"object"==typeof navigator&&function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):(e=e||self).Plyr=t()}(this,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return i}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f={addCSS:!0,thumbWidth:15,watch:!0};function g(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var y=function(e){return null!=e?e.constructor:null},v=function(e,t){return!!(e&&t&&e instanceof t)},b=function(e){return null==e},w=function(e){return y(e)===Object},k=function(e){return y(e)===String},T=function(e){return Array.isArray(e)},C=function(e){return v(e,NodeList)},A=k,S=T,P=C,E=function(e){return v(e,Element)},N=function(e){return v(e,Event)},M=function(e){return b(e)||(k(e)||T(e)||C(e))&&!e.length||w(e)&&!Object.keys(e).length};function x(e,t){if(1>t){var i=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}var I,L,O,_=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),E(t)?this.element=t:A(t)&&(this.element=document.querySelector(t)),E(this.element)&&M(this.element.rangeTouch)&&(this.config=m({},f,{},i),this.init())}return function(e,t,i){t&&d(e.prototype,t),i&&d(e,i)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[i](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!N(t))return null;var i,n=t.target,a=t.changedTouches[0],s=parseFloat(n.getAttribute("min"))||0,r=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(a.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*c:50<i&&(i+=2*(i-50)*c),s+x(i/100*(r-s),o)}},{key:"set",value:function(t){e.enabled&&N(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;if(M(t)||A(t)?n=Array.from(document.querySelectorAll(A(t)?t:'input[type="range"]')):E(t)?n=[t]:P(t)?n=Array.from(t):S(t)&&(n=t.filter(E)),M(n))return null;var a=m({},f,{},i);if(A(t)&&a.watch){var s=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){E(i)&&g(i,t)&&new e(i,a)}))}))}));s.observe(document.body,{childList:!0,subtree:!0})}return n.map((function(t){return new e(t,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),j=function(e){return null!=e?e.constructor:null},q=function(e,t){return Boolean(e&&t&&e instanceof t)},D=function(e){return null==e},H=function(e){return j(e)===Object},F=function(e){return j(e)===String},R=function(e){return j(e)===Function},V=function(e){return Array.isArray(e)},B=function(e){return q(e,NodeList)},U=function(e){return D(e)||(F(e)||V(e)||B(e))&&!e.length||H(e)&&!Object.keys(e).length},W=D,z=H,K=function(e){return j(e)===Number&&!Number.isNaN(e)},Y=F,Q=function(e){return j(e)===Boolean},X=R,$=V,J=B,G=function(e){return q(e,Element)},Z=function(e){return q(e,Event)},ee=function(e){return q(e,KeyboardEvent)},te=function(e){return q(e,TextTrack)||!D(e)&&F(e.kind)},ie=function(e){return q(e,Promise)&&R(e.then)},ne=function(e){if(q(e,window.URL))return!0;if(!F(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!U(new URL(t).hostname)}catch(e){return!1}},ae=U,se=(I=document.createElement("span"),L={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},O=Object.keys(L).find((function(e){return void 0!==I.style[e]})),!!Y(O)&&L[O]);function re(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var oe={isIE:
/* @cc_on!@ */
!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function le(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function ce(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(!i.length)return e;var s=i.shift();return z(s)?(Object.keys(s).forEach((function(t){z(s[t])?(Object.keys(e).includes(t)||Object.assign(e,n({},t,{})),ce(e[t],s[t])):Object.assign(e,n({},t,s[t]))})),ce.apply(void 0,[e].concat(i))):e}function ue(e,t){var i=e.length?e:[e];Array.from(i).reverse().forEach((function(e,i){var n=i>0?t.cloneNode(!0):t,a=e.parentNode,s=e.nextSibling;n.appendChild(e),s?a.insertBefore(n,s):a.appendChild(n)}))}function de(e,t){G(e)&&!ae(t)&&Object.entries(t).filter((function(e){var t=o(e,2)[1];return!W(t)})).forEach((function(t){var i=o(t,2),n=i[0],a=i[1];return e.setAttribute(n,a)}))}function he(e,t,i){var n=document.createElement(e);return z(t)&&de(n,t),Y(i)&&(n.innerText=i),n}function pe(e,t,i,n){G(t)&&t.appendChild(he(e,i,n))}function me(e){J(e)||$(e)?Array.from(e).forEach(me):G(e)&&G(e.parentNode)&&e.parentNode.removeChild(e)}function fe(e){if(G(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function ge(e,t){return G(t)&&G(t.parentNode)&&G(e)?(t.parentNode.replaceChild(e,t),e):null}function ye(e,t){if(!Y(e)||ae(e))return{};var i={},n=ce({},t);return e.split(",").forEach((function(e){var t=e.trim(),a=t.replace(".",""),s=t.replace(/[[\]]/g,"").split("="),r=o(s,1)[0],l=s.length>1?s[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":Y(n.class)?i.class="".concat(n.class," ").concat(a):i.class=a;break;case"#":i.id=t.replace("#","");break;case"[":i[r]=l}})),ce(n,i)}function ve(e,t){if(G(e)){var i=t;Q(i)||(i=!e.hidden),e.hidden=i}}function be(e,t,i){if(J(e))return Array.from(e).map((function(e){return be(e,t,i)}));if(G(e)){var n="toggle";return void 0!==i&&(n=i?"add":"remove"),e.classList[n](t),e.classList.contains(t)}return!1}function we(e,t){return G(e)&&e.classList.contains(t)}function ke(e,t){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function Te(e){return this.elements.container.querySelectorAll(e)}function Ce(e){return this.elements.container.querySelector(e)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];G(e)&&(e.focus({preventScroll:!0}),t&&be(e,this.config.classNames.tabFocus))}var Se,Pe={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Ee={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,i){var n=oe.isIPhone&&i&&Ee.playsinline,a=Ee[e]||"html5"!==t;return{api:a,ui:a&&Ee.rangeInput&&("video"!==e||!oe.isIPhone||n)}},pip:!(oe.isIPhone||!X(he("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||he("video").disablePictureInPicture)),airplay:X(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(ae(e))return!1;var t=o(e.split("/"),1)[0],i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(Pe).includes(i)&&(i+='; codecs="'.concat(Pe[e],'"'));try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(Se=document.createElement("input"),Se.type="range","range"===Se.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==se,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Ne=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function Me(e,t,i){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!ae(t)&&X(i)){var o=t.split(" "),l=r;Ne&&(l={passive:s,capture:r}),o.forEach((function(t){n&&n.eventListeners&&a&&n.eventListeners.push({element:e,type:t,callback:i,options:l}),e[a?"addEventListener":"removeEventListener"](t,i,l)}))}}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Me.call(this,e,t,i,!0,n,a)}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Me.call(this,e,t,i,!1,n,a)}function Le(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function r(){Ie(e,i,r,a,s);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n.apply(t,l)};Me.call(this,e,i,r,!0,a,s)}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(G(e)&&!ae(t)){var a=new CustomEvent(t,{bubbles:i,detail:s(s({},n),{},{plyr:this})});e.dispatchEvent(a)}}function _e(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,i=e.type,n=e.callback,a=e.options;t.removeEventListener(i,n,a)})),this.eventListeners=[])}function je(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):xe.call(e,e.elements.container,"ready",t)})).then((function(){}))}function qe(e){ie(e)&&e.then(null,(function(){}))}function De(e){return!!($(e)||Y(e)&&e.includes(":"))&&($(e)?e:e.split(":")).map(Number).every(K)}function He(e){if(!$(e)||!e.every(K))return null;var t=o(e,2),i=t[0],n=t[1],a=function e(t,i){return 0===i?t:e(i,t%i)}(i,n);return[i/a,n/a]}function Fe(e){var t=function(e){return De(e)?e.split(":").map(Number):null},i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!ae(this.embed)&&$(this.embed.ratio)&&(i=this.embed.ratio),null===i&&this.isHTML5){var n=this.media;i=He([n.videoWidth,n.videoHeight])}return i}function Re(e){if(!this.isVideo)return{};var t=this.elements.wrapper,i=Fe.call(this,e),n=o($(i)?i:[0,0],2),a=100/n[0]*n[1];if(t.style.paddingBottom="".concat(a,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var s=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),r=(s-a)/(s/50);this.media.style.transform="translateY(-".concat(r,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==i);return{padding:a,ratio:i}}var Ve={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var i=t.getAttribute("type");return!!ae(i)||Ee.mime.call(e,i)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:Ve.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,ae(this.config.ratio)||Re.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=Ve.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&X(e.config.quality.onChange))e.config.quality.onChange(t);else{var i=Ve.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!i)return;var n=e.media,a=n.currentTime,s=n.paused,r=n.preload,o=n.readyState,l=n.playbackRate;e.media.src=i.getAttribute("src"),("none"!==r||o)&&(e.once("loadedmetadata",(function(){e.speed=l,e.currentTime=a,s||qe(e.play())})),e.media.load())}Oe.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(me(Ve.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Be(e){return $(e)?e.filter((function(t,i){return e.indexOf(t)===i})):e}function Ue(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return ae(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return i[t].toString()}))}var We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString())},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return t=We(t,"-"," "),t=We(t,"_"," "),t=ze(t),We(t," ","")}function Ye(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var Qe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ae(e)||ae(t))return"";var i=le(t.i18n,e);if(ae(i))return Object.keys(Qe).includes(e)?Qe[e]:"";var n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach((function(e){var t=o(e,2),n=t[0],a=t[1];i=We(i,n,a)})),i},$e=function(){function t(i){e(this,t),this.enabled=i.config.storage.enabled,this.key=i.config.storage.key}return i(t,[{key:"get",value:function(e){if(!t.supported||!this.enabled)return null;var i=window.localStorage.getItem(this.key);if(ae(i))return null;var n=JSON.parse(i);return Y(e)&&e.length?n[e]:n}},{key:"set",value:function(e){if(t.supported&&this.enabled&&z(e)){var i=this.get();ae(i)&&(i={}),ce(i,e),window.localStorage.setItem(this.key,JSON.stringify(i))}}}],[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;return window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0}catch(e){return!1}}}]),t}();function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(i,n){try{var a=new XMLHttpRequest;if(!("withCredentials"in a))return;a.addEventListener("load",(function(){if("text"===t)try{i(JSON.parse(a.responseText))}catch(e){i(a.responseText)}else i(a.response)})),a.addEventListener("error",(function(){throw new Error(a.status)})),a.open("GET",e,!0),a.responseType=t,a.send()}catch(e){n(e)}}))}function Ge(e,t){if(Y(e)){var i=Y(t),n=function(){return null!==document.getElementById(t)},a=function(e,t){e.innerHTML=t,i&&n()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!n()){var s=$e.supported,r=document.createElement("div");if(r.setAttribute("hidden",""),i&&r.setAttribute("id",t),s){var o=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==o){var l=JSON.parse(o);a(r,l.content)}}Je(e).then((function(e){ae(e)||(s&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),a(r,e))})).catch((function(){}))}}}var Ze=function(e){return Math.trunc(e/60/60%60,10)},et=function(e){return Math.trunc(e/60%60,10)},tt=function(e){return Math.trunc(e%60,10)};function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!K(e))return it(void 0,t,i);var n=function(e){return"0".concat(e).slice(-2)},a=Ze(e),s=et(e),r=tt(e);return a=t||a>0?"".concat(a,":"):"","".concat(i&&e>0?"-":"").concat(a).concat(n(s),":").concat(n(r))}var nt={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||oe.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=Ce.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Te.call(this,this.config.selectors.buttons.play),pause:Ce.call(this,this.config.selectors.buttons.pause),restart:Ce.call(this,this.config.selectors.buttons.restart),rewind:Ce.call(this,this.config.selectors.buttons.rewind),fastForward:Ce.call(this,this.config.selectors.buttons.fastForward),mute:Ce.call(this,this.config.selectors.buttons.mute),pip:Ce.call(this,this.config.selectors.buttons.pip),airplay:Ce.call(this,this.config.selectors.buttons.airplay),settings:Ce.call(this,this.config.selectors.buttons.settings),captions:Ce.call(this,this.config.selectors.buttons.captions),fullscreen:Ce.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Ce.call(this,this.config.selectors.progress),this.elements.inputs={seek:Ce.call(this,this.config.selectors.inputs.seek),volume:Ce.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Ce.call(this,this.config.selectors.display.buffer),currentTime:Ce.call(this,this.config.selectors.display.currentTime),duration:Ce.call(this,this.config.selectors.display.duration)},G(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var i=nt.getIconUrl.call(this),n="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),a=document.createElementNS("http://www.w3.org/2000/svg","svg");de(a,ce(t,{"aria-hidden":"true",focusable:"false"}));var s=document.createElementNS("http://www.w3.org/2000/svg","use"),r="".concat(n,"-").concat(e);return"href"in s&&s.setAttributeNS("http://www.w3.org/1999/xlink","href",r),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),a.appendChild(s),a},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Xe(e,this.config),n=s(s({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")});return he("span",n,i)},createBadge:function(e){if(ae(e))return null;var t=he("span",{class:this.config.classNames.menu.value});return t.appendChild(he("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var i=this,n=ce({},t),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return(t=Ke(t)).charAt(0).toLowerCase()+t.slice(1)}(e),s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(n).includes(e)&&(s[e]=n[e],delete n[e])})),"button"!==s.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((function(e){return e===i.config.classNames.control}))||ce(n,{class:"".concat(n.class," ").concat(this.config.classNames.control)}):n.class=this.config.classNames.control,e){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),a="play",s.label="play",s.icon="play";break;default:ae(s.label)&&(s.label=a),ae(s.icon)&&(s.icon=e)}var r=he(s.element);return s.toggle?(r.appendChild(nt.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),r.appendChild(nt.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),r.appendChild(nt.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),r.appendChild(nt.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(r.appendChild(nt.createIcon.call(this,s.icon)),r.appendChild(nt.createLabel.call(this,s.label))),ce(n,ye(this.config.selectors.buttons[a],n)),de(r,n),"play"===a?($(this.elements.buttons[a])||(this.elements.buttons[a]=[]),this.elements.buttons[a].push(r)):this.elements.buttons[a]=r,r},createRange:function(e,t){var i=he("input",ce(ye(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Xe(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,nt.updateRangeFill.call(this,i),_.setup(i),i},createProgress:function(e,t){var i=he("progress",ce(ye(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(he("span",null,"0"));var n={played:"played",buffer:"buffered"}[e],a=n?Xe(n,this.config):"";i.innerText="% ".concat(a.toLowerCase())}return this.elements.display[e]=i,i},createTime:function(e,t){var i=ye(this.config.selectors.display[e],t),n=he("div",ce(i,{class:"".concat(i.class?i.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Xe(e,this.config)}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts:function(e,t){var i=this;xe.call(this,e,"keydown keyup",(function(n){if([32,38,39,40].includes(n.which)&&(n.preventDefault(),n.stopPropagation(),"keydown"!==n.type)){var a,s=ke(e,'[role="menuitemradio"]');if(!s&&[32,39].includes(n.which))nt.showMenuPanel.call(i,t,!0);else 32!==n.which&&(40===n.which||s&&39===n.which?(a=e.nextElementSibling,G(a)||(a=e.parentNode.firstElementChild)):(a=e.previousElementSibling,G(a)||(a=e.parentNode.lastElementChild)),Ae.call(i,a,!0))}}),!1),xe.call(this,e,"keyup",(function(e){13===e.which&&nt.focusFirstMenuItem.call(i,null,!0)}))},createMenuItem:function(e){var t=this,i=e.value,n=e.list,a=e.type,s=e.title,r=e.badge,o=void 0===r?null:r,l=e.checked,c=void 0!==l&&l,u=ye(this.config.selectors.inputs[a]),d=he("button",ce(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:i})),h=he("span");h.innerHTML=s,G(o)&&h.appendChild(o),d.appendChild(h),Object.defineProperty(d,"checked",{enumerable:!0,get:function(){return"true"===d.getAttribute("aria-checked")},set:function(e){e&&Array.from(d.parentNode.children).filter((function(e){return ke(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),d.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(d,"click keyup",(function(e){if(!ee(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),d.checked=!0,a){case"language":t.currentTrack=Number(i);break;case"quality":t.quality=i;break;case"speed":t.speed=parseFloat(i)}nt.showMenuPanel.call(t,"home",ee(e))}}),a,!1),nt.bindMenuItemShortcuts.call(this,d,a),n.appendChild(d)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!K(e))return e;var i=Ze(this.duration)>0;return it(e,i,t)},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];G(e)&&K(t)&&(e.innerText=nt.formatTime(t,i))},updateVolume:function(){this.supported.ui&&(G(this.elements.inputs.volume)&&nt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),G(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;G(e)&&(e.value=t,nt.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&Z(e)){var i,n,a=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":i=this.currentTime,n=this.duration,a=0===i||0===n||Number.isNaN(i)||Number.isNaN(n)?0:(i/n*100).toFixed(2),"timeupdate"===e.type&&nt.setRange.call(this,this.elements.inputs.seek,a);break;case"playing":case"progress":!function(e,i){var n=K(i)?i:0,a=G(e)?e:t.elements.display.buffer;if(G(a)){a.value=n;var s=a.getElementsByTagName("span")[0];G(s)&&(s.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=Z(e)?e.target:e;if(G(t)&&"range"===t.getAttribute("type")){if(ke(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var i=nt.formatTime(this.currentTime),n=nt.formatTime(this.duration),a=Xe("seekLabel",this.config);t.setAttribute("aria-valuetext",a.replace("{currentTime}",i).replace("{duration}",n))}else if(ke(t,this.config.selectors.inputs.volume)){var s=100*t.value;t.setAttribute("aria-valuenow",s),t.setAttribute("aria-valuetext","".concat(s.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);oe.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&G(this.elements.inputs.seek)&&G(this.elements.display.seekTooltip)&&0!==this.duration){var i="".concat(this.config.classNames.tooltip,"--visible"),n=function(e){return be(t.elements.display.seekTooltip,i,e)};if(this.touch)n(!1);else{var a=0,s=this.elements.progress.getBoundingClientRect();if(Z(e))a=100/s.width*(e.pageX-s.left);else{if(!we(this.elements.display.seekTooltip,i))return;a=parseFloat(this.elements.display.seekTooltip.style.left,10)}a<0?a=0:a>100&&(a=100),nt.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*a),this.elements.display.seekTooltip.style.left="".concat(a,"%"),Z(e)&&["mouseenter","mouseleave"].includes(e.type)&&n("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!G(this.elements.display.duration)&&this.config.invertTime;nt.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||nt.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return ve(this.elements.display.currentTime,!0),void ve(this.elements.progress,!0);G(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=G(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&nt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&nt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),nt.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){ve(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,i){var n=this.elements.settings.panels[e],a=null,s=t;if("captions"===e)a=this.currentTrack;else{if(a=ae(i)?this[e]:i,ae(a)&&(a=this.config[e].default),!ae(this.options[e])&&!this.options[e].includes(a))return void this.debug.warn("Unsupported value of '".concat(a,"' for ").concat(e));if(!this.config[e].options.includes(a))return void this.debug.warn("Disabled value of '".concat(a,"' for ").concat(e))}if(G(s)||(s=n&&n.querySelector('[role="menu"]')),G(s)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=nt.getLabel.call(this,e,a);var r=s&&s.querySelector('[value="'.concat(a,'"]'));G(r)&&(r.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?Xe("normal",this.config):"".concat(t,"&times;");case"quality":if(K(t)){var i=Xe("qualityLabel.".concat(t),this.config);return i.length?i:"".concat(t,"p")}return ze(t);case"captions":return rt.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(G(this.elements.settings.panels.quality)){var i=this.elements.settings.panels.quality.querySelector('[role="menu"]');$(e)&&(this.options.quality=Be(e).filter((function(e){return t.config.quality.options.includes(e)})));var n=!ae(this.options.quality)&&this.options.quality.length>1;if(nt.toggleMenuButton.call(this,"quality",n),fe(i),nt.checkMenu.call(this),n){var a=function(e){var i=Xe("qualityBadge.".concat(e),t.config);return i.length?nt.createBadge.call(t,i):null};this.options.quality.sort((function(e,i){var n=t.config.quality.options;return n.indexOf(e)>n.indexOf(i)?1:-1})).forEach((function(e){nt.createMenuItem.call(t,{value:e,list:i,type:"quality",title:nt.getLabel.call(t,"quality",e),badge:a(e)})})),nt.updateSetting.call(this,"quality",i)}}},setCaptionsMenu:function(){var e=this;if(G(this.elements.settings.panels.captions)){var t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=rt.getTracks.call(this),n=Boolean(i.length);if(nt.toggleMenuButton.call(this,"captions",n),fe(t),nt.checkMenu.call(this),n){var a=i.map((function(i,n){return{value:n,checked:e.captions.toggled&&e.currentTrack===n,title:rt.getLabel.call(e,i),badge:i.language&&nt.createBadge.call(e,i.language.toUpperCase()),list:t,type:"language"}}));a.unshift({value:-1,checked:!this.captions.toggled,title:Xe("disabled",this.config),list:t,type:"language"}),a.forEach(nt.createMenuItem.bind(this)),nt.updateSetting.call(this,"captions",t)}}},setSpeedMenu:function(){var e=this;if(G(this.elements.settings.panels.speed)){var t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var i=!ae(this.options.speed)&&this.options.speed.length>1;nt.toggleMenuButton.call(this,"speed",i),fe(t),nt.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){nt.createMenuItem.call(e,{value:i,list:t,type:"speed",title:nt.getLabel.call(e,"speed",i)})})),nt.updateSetting.call(this,"speed",t))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!ae(e)&&Object.values(e).some((function(e){return!e.hidden}));ve(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var i=e;G(i)||(i=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var n=i.querySelector('[role^="menuitem"]');Ae.call(this,n,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,i=this.elements.buttons.settings;if(G(t)&&G(i)){var n=t.hidden,a=n;if(Q(e))a=e;else if(ee(e)&&27===e.which)a=!1;else if(Z(e)){var s=X(e.composedPath)?e.composedPath()[0]:e.target,r=t.contains(s);if(r||!r&&e.target!==i&&a)return}i.setAttribute("aria-expanded",a),ve(t,!a),be(this.elements.container,this.config.classNames.menu.open,a),a&&ee(e)?nt.focusFirstMenuItem.call(this,null,!0):a||n||Ae.call(this,i,ee(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var i=t.scrollWidth,n=t.scrollHeight;return me(t),{width:i,height:n}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(G(n)){var a=n.parentNode,s=Array.from(a.children).find((function(e){return!e.hidden}));if(Ee.transitions&&!Ee.reducedMotion){a.style.width="".concat(s.scrollWidth,"px"),a.style.height="".concat(s.scrollHeight,"px");var r=nt.getMenuSize.call(this,n),o=function t(i){i.target===a&&["width","height"].includes(i.propertyName)&&(a.style.width="",a.style.height="",Ie.call(e,a,se,t))};xe.call(this,a,se,o),a.style.width="".concat(r.width,"px"),a.style.height="".concat(r.height,"px")}ve(s,!0),ve(n,!1),nt.focusFirstMenuItem.call(this,n,i)}},setDownloadUrl:function(){var e=this.elements.buttons.download;G(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,i=nt.bindMenuItemShortcuts,n=nt.createButton,a=nt.createProgress,s=nt.createRange,r=nt.createTime,o=nt.setQualityMenu,l=nt.setSpeedMenu,c=nt.showMenuPanel;this.elements.controls=null,$(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));var u=he("div",ye(this.config.selectors.controls.wrapper));this.elements.controls=u;var d={class:"plyr__controls__item"};return Be($(this.config.controls)?this.config.controls:[]).forEach((function(o){if("restart"===o&&u.appendChild(n.call(t,"restart",d)),"rewind"===o&&u.appendChild(n.call(t,"rewind",d)),"play"===o&&u.appendChild(n.call(t,"play",d)),"fast-forward"===o&&u.appendChild(n.call(t,"fast-forward",d)),"progress"===o){var l=he("div",{class:"".concat(d.class," plyr__progress__container")}),h=he("div",ye(t.config.selectors.progress));if(h.appendChild(s.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),h.appendChild(a.call(t,"buffer")),t.config.tooltips.seek){var p=he("span",{class:t.config.classNames.tooltip},"00:00");h.appendChild(p),t.elements.display.seekTooltip=p}t.elements.progress=h,l.appendChild(t.elements.progress),u.appendChild(l)}if("current-time"===o&&u.appendChild(r.call(t,"currentTime",d)),"duration"===o&&u.appendChild(r.call(t,"duration",d)),"mute"===o||"volume"===o){var m=t.elements.volume;if(G(m)&&u.contains(m)||(m=he("div",ce({},d,{class:"".concat(d.class," plyr__volume").trim()})),t.elements.volume=m,u.appendChild(m)),"mute"===o&&m.appendChild(n.call(t,"mute")),"volume"===o&&!oe.isIos){var f={max:1,step:.05,value:t.config.volume};m.appendChild(s.call(t,"volume",ce(f,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===o&&u.appendChild(n.call(t,"captions",d)),"settings"===o&&!ae(t.config.settings)){var g=he("div",ce({},d,{class:"".concat(d.class," plyr__menu").trim(),hidden:""}));g.appendChild(n.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var y=he("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),v=he("div"),b=he("div",{id:"plyr-settings-".concat(e.id,"-home")}),w=he("div",{role:"menu"});b.appendChild(w),v.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(n){var a=he("button",ce(ye(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));i.call(t,a,n),xe.call(t,a,"click",(function(){c.call(t,n,!1)}));var s=he("span",null,Xe(n,t.config)),r=he("span",{class:t.config.classNames.menu.value});r.innerHTML=e[n],s.appendChild(r),a.appendChild(s),w.appendChild(a);var o=he("div",{id:"plyr-settings-".concat(e.id,"-").concat(n),hidden:""}),l=he("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});l.appendChild(he("span",{"aria-hidden":!0},Xe(n,t.config))),l.appendChild(he("span",{class:t.config.classNames.hidden},Xe("menuBack",t.config))),xe.call(t,o,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),c.call(t,"home",!0))}),!1),xe.call(t,l,"click",(function(){c.call(t,"home",!1)})),o.appendChild(l),o.appendChild(he("div",{role:"menu"})),v.appendChild(o),t.elements.settings.buttons[n]=a,t.elements.settings.panels[n]=o})),y.appendChild(v),g.appendChild(y),u.appendChild(g),t.elements.settings.popup=y,t.elements.settings.menu=g}if("pip"===o&&Ee.pip&&u.appendChild(n.call(t,"pip",d)),"airplay"===o&&Ee.airplay&&u.appendChild(n.call(t,"airplay",d)),"download"===o){var k=ce({},d,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(k.download="");var T=t.config.urls.download;!ne(T)&&t.isEmbed&&ce(k,{icon:"logo-".concat(t.provider),label:t.provider}),u.appendChild(n.call(t,"download",k))}"fullscreen"===o&&u.appendChild(n.call(t,"fullscreen",d))})),this.isHTML5&&o.call(this,Ve.getQualityOptions.call(this)),l.call(this),u},inject:function(){var e=this;if(this.config.loadSprite){var t=nt.getIconUrl.call(this);t.cors&&Ge(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var i=null;this.elements.controls=null;var n={id:this.id,seektime:this.config.seekTime,title:this.config.title},a=!0;X(this.config.controls)&&(this.config.controls=this.config.controls.call(this,n)),this.config.controls||(this.config.controls=[]),G(this.config.controls)||Y(this.config.controls)?i=this.config.controls:(i=nt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:rt.getLabel.call(this)}),a=!1);var s,r;if(a&&Y(this.config.controls)&&(s=i,Object.entries(n).forEach((function(e){var t=o(e,2),i=t[0],n=t[1];s=We(s,"{".concat(i,"}"),n)})),i=s),Y(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),G(r)||(r=this.elements.container),r[G(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),G(this.elements.controls)||nt.findElements.call(this),!ae(this.elements.buttons)){var l=function(t){var i=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return we(t,i)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];be(t,i,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){$(e)||J(e)?Array.from(e).filter(Boolean).forEach(l):l(e)}))}if(oe.isEdge&&re(r),this.config.tooltips.controls){var c=this.config,u=c.classNames,d=c.selectors,h="".concat(d.controls.wrapper," ").concat(d.labels," .").concat(u.hidden),p=Te.call(this,h);Array.from(p).forEach((function(t){be(t,e.config.classNames.hidden,!1),be(t,e.config.classNames.tooltip,!0)}))}}};function at(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e;if(t){var n=document.createElement("a");n.href=i,i=n.href}try{return new URL(i)}catch(e){return null}}function st(e){var t=new URLSearchParams;return z(e)&&Object.entries(e).forEach((function(e){var i=o(e,2),n=i[0],a=i[1];t.set(n,a)})),t}var rt={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!Ee.textTracks)$(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&nt.setCaptionsMenu.call(this);else{if(G(this.elements.captions)||(this.elements.captions=he("div",ye(this.config.selectors.captions)),function(e,t){G(e)&&G(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),oe.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),i=at(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Je(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){me(e)}))}))}var t=Be((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();if("auto"===i)i=o(t,1)[0];var n=this.storage.get("captions");if(Q(n)||(n=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:n,language:i,languages:t}),this.isHTML5){var a=this.config.captions.update?"addtrack removetrack":"removetrack";xe.call(this,this.media.textTracks,a,rt.update.bind(this))}setTimeout(rt.update.bind(this),0)}},update:function(){var e=this,t=rt.getTracks.call(this,!0),i=this.captions,n=i.active,a=i.language,s=i.meta,r=i.currentTrackNode,o=Boolean(t.find((function(e){return e.language===a})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!s.get(e)})).forEach((function(t){e.debug.log("Track added",t),s.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),xe.call(e,t,"cuechange",(function(){return rt.updateCues.call(e)}))})),(o&&this.language!==a||!t.includes(r))&&(rt.setLanguage.call(this,a),rt.toggle.call(this,n&&o)),be(this.elements.container,this.config.classNames.captions.enabled,!ae(t)),$(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&nt.setCaptionsMenu.call(this)},toggle:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,a=this.config.classNames.captions.active,s=W(e)?!n:e;if(s!==n){if(i||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!i){var r=rt.getTracks.call(this),o=rt.findTrack.call(this,[this.captions.language].concat(l(this.captions.languages)),!0);return this.captions.language=o.language,void rt.set.call(this,r.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),be(this.elements.container,a,s),this.captions.toggled=s,nt.updateSetting.call(this,"captions"),Oe.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout((function(){s&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")}))}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=rt.getTracks.call(this);if(-1!==e)if(K(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var n=i[e],a=n||{},s=a.language;this.captions.currentTrackNode=n,nt.updateSetting.call(this,"captions"),t||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),Oe.call(this,this.media,"languagechange")}rt.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&rt.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else rt.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Y(e)){var i=e.toLowerCase();this.captions.language=i;var n=rt.getTracks.call(this),a=rt.findTrack.call(this,[i]);rt.set.call(this,n.indexOf(a),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=Array.from((this.media||{}).textTracks||[]);return i.filter((function(i){return!e.isHTML5||t||e.captions.meta.has(i)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=rt.getTracks.call(this),s=function(e){return Number((i.captions.meta.get(e)||{}).default)},r=Array.from(a).sort((function(e,t){return s(t)-s(e)}));return e.every((function(e){return!(t=r.find((function(t){return t.language===e})))})),t||(n?r[0]:void 0)},getCurrentTrack:function(){return rt.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!te(t)&&Ee.textTracks&&this.captions.toggled&&(t=rt.getCurrentTrack.call(this)),te(t)?ae(t.label)?ae(t.language)?Xe("enabled",this.config):e.language.toUpperCase():t.label:Xe("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(G(this.elements.captions))if(W(e)||Array.isArray(e)){var t=e;if(!t){var i=rt.getCurrentTrack.call(this);t=Array.from((i||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(Ye)}var n=t.map((function(e){return e.trim()})).join("\n");if(n!==this.elements.captions.innerHTML){fe(this.elements.captions);var a=he("span",ye(this.config.selectors.caption));a.innerHTML=n,this.elements.captions.appendChild(a),Oe.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},ot={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,premium:!1,referrerPolicy:null},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},lt="picture-in-picture",ct="inline",ut={html5:"html5",youtube:"youtube",vimeo:"vimeo"},dt="audio",ht="video";var pt=function(){},mt=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.enabled=window.console&&i,this.enabled&&this.log("Debugging enabled")}return i(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):pt}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):pt}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):pt}}]),t}(),ft=function(){function t(i){var n=this;e(this,t),this.player=i,this.prefix=t.prefix,this.property=t.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===i.config.fullscreen.fallback,this.player.elements.fullscreen=i.config.fullscreen.container&&function(e,t){return(Element.prototype.closest||function(){var e=this;do{if(ke.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,i.config.fullscreen.container),xe.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),xe.call(this.player,this.player.elements.container,"dblclick",(function(e){G(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.toggle()})),xe.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return i(t,[{key:"onChange",value:function(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;G(e)&&(e.pressed=this.active),Oe.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",be(this.target,this.player.config.classNames.fullscreen.fallback,e),oe.isIos){var t=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var n=Y(t.content)&&t.content.includes(i);e?(this.cleanupViewport=!n,n||(t.content+=",".concat(i))):this.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==i})).join(","))}this.onChange()}},{key:"trapFocus",value:function(e){if(!oe.isIos&&this.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,i=Te.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),n=o(i,1)[0],a=i[i.length-1];t!==a||e.shiftKey?t===n&&e.shiftKey&&(a.focus(),e.preventDefault()):(n.focus(),e.preventDefault())}}},{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":t.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled");be(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(oe.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!t.native||this.forceFallback?this.toggleFallback(!0):this.prefix?ae(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if(oe.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),qe(this.player.play());else if(!t.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!ae(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return t.native&&!this.forceFallback}},{key:"enabled",get:function(){return(t.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!t.native||this.forceFallback)return we(this.target,this.player.config.classNames.fullscreen.fallback);var e=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}},{key:"target",get:function(){return oe.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(X(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!X(document["".concat(t,"ExitFullscreen")])&&!X(document["".concat(t,"CancelFullScreen")]))&&(e=t,!0)})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),t}();function gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(i,n){var a=new Image,s=function(){delete a.onload,delete a.onerror,(a.naturalWidth>=t?i:n)(a)};Object.assign(a,{onload:s,onerror:s,src:e})}))}var yt={addStyleHook:function(){be(this.elements.container,this.config.selectors.container.replace(".",""),!0),be(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void yt.toggleNativeControls.call(this,!0);G(this.elements.controls)||(nt.inject.call(this),this.listeners.controls()),yt.toggleNativeControls.call(this),this.isHTML5&&rt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,nt.updateVolume.call(this),nt.timeUpdate.call(this),yt.checkPlaying.call(this),be(this.elements.container,this.config.classNames.pip.supported,Ee.pip&&this.isHTML5&&this.isVideo),be(this.elements.container,this.config.classNames.airplay.supported,Ee.airplay&&this.isHTML5),be(this.elements.container,this.config.classNames.isIos,oe.isIos),be(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){Oe.call(e,e.media,"ready")}),0),yt.setTitle.call(this),this.poster&&yt.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&nt.durationUpdate.call(this)},setTitle:function(){var e=Xe("play",this.config);if(Y(this.config.title)&&!ae(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=Ce.call(this,"iframe");if(!G(t))return;var i=ae(this.config.title)?"video":this.config.title,n=Xe("frameTitle",this.config);t.setAttribute("title",n.replace("{title}",i))}},togglePoster:function(e){be(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),je.call(this).then((function(){return gt(e)})).catch((function(i){throw e===t.poster&&yt.togglePoster.call(t,!1),i})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),yt.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;be(this.elements.container,this.config.classNames.playing,this.playing),be(this.elements.container,this.config.classNames.paused,this.paused),be(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",Xe(t.playing?"pause":"play",t.config))})),Z(e)&&"timeupdate"===e.type||yt.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){be(t.elements.container,t.config.classNames.loading,t.loading),yt.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles:function(){var e=this;Object.values(s({},this.media.style)).filter((function(e){return!ae(e)&&e.startsWith("--plyr")})).forEach((function(t){e.elements.container.style.setProperty(t,e.media.style.getPropertyValue(t)),e.media.style.removeProperty(t)})),ae(this.media.style)&&this.media.removeAttribute("style")}},vt=function(){function t(i){e(this,t),this.player=i,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return i(t,[{key:"handleKey",value:function(e){var t=this.player,i=t.elements,n=e.keyCode?e.keyCode:e.which,a="keydown"===e.type,s=a&&n===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&K(n)){if(a){var r=document.activeElement;if(G(r)){var o=t.config.selectors.editable;if(r!==i.inputs.seek&&ke(r,o))return;if(32===e.which&&ke(r,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(n)&&(e.preventDefault(),e.stopPropagation()),n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:s||(t.currentTime=t.duration/10*(n-48));break;case 32:case 75:s||qe(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:s||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:s||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===n&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=n}else this.lastKey=null}}},{key:"toggleMenu",value:function(e){nt.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,be(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,i=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var n,a=e.timeStamp-this.lastKeyDown<=20;if("focus"!==e.type||a)n=t.config.classNames.tabFocus,be(Te.call(t,".".concat(n)),n,!1),"focusout"!==e.type&&(this.focusTimer=setTimeout((function(){var e=document.activeElement;i.container.contains(e)&&be(document.activeElement,t.config.classNames.tabFocus,!0)}),10))}}},{key:"global",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&Me.call(t,window,"keydown keyup",this.handleKey,e,!1),Me.call(t,document.body,"click",this.toggleMenu,e),Le.call(t,document.body,"touchstart",this.firstTouch),Me.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var e=this.player,t=e.config,i=e.elements,n=e.timers;!t.keyboard.global&&t.keyboard.focused&&xe.call(e,i.container,"keydown keyup",this.handleKey,!1),xe.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var a=i.controls;a&&"enterfullscreen"===t.type&&(a.pressed=!1,a.hover=!1);var s=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(yt.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout((function(){return yt.toggleControls.call(e,!1)}),s)}));var a=function(t){if(!t)return Re.call(e);var n=i.container.getBoundingClientRect(),a=n.width,s=n.height;return Re.call(e,"".concat(a,":").concat(s))},s=function(){clearTimeout(n.resized),n.resized=setTimeout(a,50)};xe.call(e,i.container,"enterfullscreen exitfullscreen",(function(t){var n=e.fullscreen,r=n.target,l=n.usingNative;if(r===i.container&&(e.isEmbed||!ae(e.config.ratio))){var c="enterfullscreen"===t.type,u=a(c);u.padding;!function(t,i,n){if(e.isVimeo&&!e.config.vimeo.premium){var a=e.elements.wrapper.firstChild,s=o(t,2)[1],r=o(Fe.call(e),2),l=r[0],c=r[1];a.style.maxWidth=n?"".concat(s/c*l,"px"):null,a.style.margin=n?"0 auto":null}}(u.ratio,0,c),l||(c?xe.call(e,window,"resize",s):Ie.call(e,window,"resize",s))}}))}},{key:"media",value:function(){var e=this,t=this.player,i=t.elements;if(xe.call(t,t.media,"timeupdate seeking seeked",(function(e){return nt.timeUpdate.call(t,e)})),xe.call(t,t.media,"durationchange loadeddata loadedmetadata",(function(e){return nt.durationUpdate.call(t,e)})),xe.call(t,t.media,"ended",(function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),xe.call(t,t.media,"progress playing seeking seeked",(function(e){return nt.updateProgress.call(t,e)})),xe.call(t,t.media,"volumechange",(function(e){return nt.updateVolume.call(t,e)})),xe.call(t,t.media,"playing play pause ended emptied timeupdate",(function(e){return yt.checkPlaying.call(t,e)})),xe.call(t,t.media,"waiting canplay seeked playing",(function(e){return yt.checkLoading.call(t,e)})),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var n=Ce.call(t,".".concat(t.config.classNames.video));if(!G(n))return;xe.call(t,i.container,"click",(function(a){([i.container,n].includes(a.target)||n.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(e.proxy(a,t.restart,"restart"),e.proxy(a,(function(){qe(t.play())}),"play")):e.proxy(a,(function(){qe(t.togglePlay())}),"play")))}))}t.supported.ui&&t.config.disableContextMenu&&xe.call(t,i.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),xe.call(t,t.media,"volumechange",(function(){t.storage.set({volume:t.volume,muted:t.muted})})),xe.call(t,t.media,"ratechange",(function(){nt.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),xe.call(t,t.media,"qualitychange",(function(e){nt.updateSetting.call(t,"quality",null,e.detail.quality)})),xe.call(t,t.media,"ready qualitychange",(function(){nt.setDownloadUrl.call(t)}));var a=t.config.events.concat(["keyup","keydown"]).join(" ");xe.call(t,t.media,a,(function(e){var n=e.detail,a=void 0===n?{}:n;"error"===e.type&&(a=t.media.error),Oe.call(t,i.container,e.type,!0,a)}))}},{key:"proxy",value:function(e,t,i){var n=this.player,a=n.config.listeners[i],s=!0;X(a)&&(s=a.call(n,e)),!1!==s&&X(t)&&t.call(n,e)}},{key:"bind",value:function(e,t,i,n){var a=this,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.player,o=r.config.listeners[n],l=X(o);xe.call(r,e,t,(function(e){return a.proxy(e,i,n)}),s&&!l)}},{key:"controls",value:function(){var e=this,t=this.player,i=t.elements,n=oe.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach((function(i){e.bind(i,"click",(function(){qe(t.togglePlay())}),"play")})),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",t.rewind,"rewind"),this.bind(i.buttons.fastForward,"click",t.forward,"fastForward"),this.bind(i.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),this.bind(i.buttons.captions,"click",(function(){return t.toggleCaptions()})),this.bind(i.buttons.download,"click",(function(){Oe.call(t,t.media,"download")}),"download"),this.bind(i.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),this.bind(i.buttons.pip,"click",(function(){t.pip="toggle"}),"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",(function(e){e.stopPropagation(),e.preventDefault(),nt.toggleMenu.call(t,e)}),null,!1),this.bind(i.buttons.settings,"keyup",(function(e){var i=e.which;[13,32].includes(i)&&(13!==i?(e.preventDefault(),e.stopPropagation(),nt.toggleMenu.call(t,e)):nt.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(i.settings.menu,"keydown",(function(e){27===e.which&&nt.toggleMenu.call(t,e)})),this.bind(i.inputs.seek,"mousedown mousemove",(function(e){var t=i.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",n)})),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(e){var i=e.currentTarget,n=e.keyCode?e.keyCode:e.which;if(!ee(e)||39===n||37===n){t.lastSeekTime=Date.now();var a=i.hasAttribute("play-on-seeked"),s=["mouseup","touchend","keyup"].includes(e.type);a&&s?(i.removeAttribute("play-on-seeked"),qe(t.play())):!s&&t.playing&&(i.setAttribute("play-on-seeked",""),t.pause())}})),oe.isIos){var a=Te.call(t,'input[type="range"]');Array.from(a).forEach((function(t){return e.bind(t,n,(function(e){return re(e.target)}))}))}this.bind(i.inputs.seek,n,(function(e){var i=e.currentTarget,n=i.getAttribute("seek-value");ae(n)&&(n=i.value),i.removeAttribute("seek-value"),t.currentTime=n/i.max*t.duration}),"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",(function(e){return nt.updateSeekTooltip.call(t,e)})),this.bind(i.progress,"mousemove touchmove",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.startMove(e)})),this.bind(i.progress,"mouseleave touchend click",(function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)})),this.bind(i.progress,"mousedown touchstart",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.startScrubbing(e)})),this.bind(i.progress,"mouseup touchend",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.endScrubbing(e)})),oe.isWebkit&&Array.from(Te.call(t,'input[type="range"]')).forEach((function(i){e.bind(i,"input",(function(e){return nt.updateRangeFill.call(t,e.target)}))})),t.config.toggleInvert&&!G(i.display.duration)&&this.bind(i.display.currentTime,"click",(function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,nt.timeUpdate.call(t))})),this.bind(i.inputs.volume,n,(function(e){t.volume=e.target.value}),"volume"),this.bind(i.controls,"mouseenter mouseleave",(function(e){i.controls.hover=!t.touch&&"mouseenter"===e.type})),i.fullscreen&&Array.from(i.fullscreen.children).filter((function(e){return!e.contains(i.container)})).forEach((function(n){e.bind(n,"mouseenter mouseleave",(function(e){i.controls.hover=!t.touch&&"mouseenter"===e.type}))})),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){i.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(i.controls,"focusin",(function(){var n=t.config,a=t.timers;be(i.controls,n.classNames.noTransition,!0),yt.toggleControls.call(t,!0),setTimeout((function(){be(i.controls,n.classNames.noTransition,!1)}),0);var s=e.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout((function(){return yt.toggleControls.call(t,!1)}),s)})),this.bind(i.inputs.volume,"wheel",(function(e){var i=e.webkitDirectionInvertedFromDevice,n=o([e.deltaX,-e.deltaY].map((function(e){return i?-e:e})),2),a=n[0],s=n[1],r=Math.sign(Math.abs(a)>Math.abs(s)?a:s);t.increaseVolume(r/50);var l=t.media.volume;(1===r&&l<1||-1===r&&l>0)&&e.preventDefault()}),"volume",!1)}}]),t}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var bt=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e=function(){},t={},i={},n={};function a(e,t){if(e){var a=n[e];if(i[e]=t,a)for(;a.length;)a[0](e,t),a.splice(0,1)}}function s(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function r(t,i,n,a){var s,o,l=document,c=n.async,u=(n.numRetries||0)+1,d=n.before||e,h=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");a=a||0,/(^css!|\.css$)/.test(h)?((o=l.createElement("link")).rel="stylesheet",o.href=p,(s="hideFocus"in o)&&o.relList&&(s=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(o=l.createElement("img")).src=p:((o=l.createElement("script")).src=t,o.async=void 0===c||c),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(s)try{o.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((a+=1)<u)return r(t,i,n,a)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";i(t,l,e.defaultPrevented)},!1!==d(t,o)&&l.head.appendChild(o)}function o(e,i,n){var o,l;if(i&&i.trim&&(o=i),l=(o?n:i)||{},o){if(o in t)throw"LoadJS";t[o]=!0}function c(t,i){!function(e,t,i){var n,a,s=(e=e.push?e:[e]).length,o=s,l=[];for(n=function(e,i,n){if("e"==i&&l.push(e),"b"==i){if(!n)return;l.push(e)}--s||t(l)},a=0;a<o;a++)r(e[a],n,i)}(e,(function(e){s(l,e),t&&s({success:t,error:i},e),a(o,e)}),l)}if(l.returnPromise)return new Promise(c);c()}return o.ready=function(e,t){return function(e,t){e=e.push?e:[e];var a,s,r,o=[],l=e.length,c=l;for(a=function(e,i){i.length&&o.push(e),--c||t(o)};l--;)s=e[l],(r=i[s])?a(s,r):(n[s]=n[s]||[]).push(a)}(e,(function(e){s(t,e)})),o},o.done=function(e){a(e,[])},o.reset=function(){t={},i={},n={}},o.isDefined=function(e){return e in t},o}()}));function wt(e){return new Promise((function(t,i){bt(e,{success:t,error:i})}))}function kt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Oe.call(this,this.media,e?"play":"pause"))}var Tt={setup:function(){var e=this;be(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Re.call(e),z(window.Vimeo)?Tt.ready.call(e):wt(e.config.urls.vimeo.sdk).then((function(){Tt.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,i=t.config.vimeo,n=i.premium,a=i.referrerPolicy,l=r(i,["premium","referrerPolicy"]);n&&Object.assign(l,{controls:!1,sidedock:!1});var c=st(s({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},l)),u=t.media.getAttribute("src");ae(u)&&(u=t.media.getAttribute(t.config.attributes.embed.id));var d,h=ae(d=u)?null:K(Number(d))?d:d.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:d,p=he("iframe"),m=Ue(t.config.urls.vimeo.iframe,h,c);p.setAttribute("src",m),p.setAttribute("allowfullscreen",""),p.setAttribute("allow","autoplay,fullscreen,picture-in-picture"),ae(a)||p.setAttribute("referrerPolicy",a);var f=t.poster;if(n)p.setAttribute("data-poster",f),t.media=ge(p,t.media);else{var g=he("div",{class:t.config.classNames.embedContainer,"data-poster":f});g.appendChild(p),t.media=ge(g,t.media)}Je(Ue(t.config.urls.vimeo.api,h),"json").then((function(e){if(!ae(e)){var i=new URL(e[0].thumbnail_large);i.pathname="".concat(i.pathname.split("_")[0],".jpg"),yt.setPoster.call(t,i.href).catch((function(){}))}})),t.embed=new window.Vimeo.Player(p,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return kt.call(t,!0),t.embed.play()},t.media.pause=function(){return kt.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var y=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return y},set:function(e){var i=t.embed,n=t.media,a=t.paused,s=t.volume,r=a&&!i.hasPlayed;n.seeking=!0,Oe.call(t,n,"seeking"),Promise.resolve(r&&i.setVolume(0)).then((function(){return i.setCurrentTime(e)})).then((function(){return r&&i.pause()})).then((function(){return r&&i.setVolume(s)})).catch((function(){}))}});var v=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return v},set:function(e){t.embed.setPlaybackRate(e).then((function(){v=e,Oe.call(t,t.media,"ratechange")})).catch((function(){t.options.speed=[1]}))}});var b=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return b},set:function(e){t.embed.setVolume(e).then((function(){b=e,Oe.call(t,t.media,"volumechange")}))}});var w=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return w},set:function(e){var i=!!Q(e)&&e;t.embed.setVolume(i?0:t.config.volume).then((function(){w=i,Oe.call(t,t.media,"volumechange")}))}});var k,T=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return T},set:function(e){var i=Q(e)?e:t.config.loop.active;t.embed.setLoop(i).then((function(){T=i}))}}),t.embed.getVideoUrl().then((function(e){k=e,nt.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return k}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(i){var n=o(i,2),a=n[0],s=n[1];t.embed.ratio=[a,s],Re.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(i){t.config.title=i,yt.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){y=e,Oe.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,Oe.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,rt.setup.call(t)})),t.embed.on("cuechange",(function(e){var i=e.cues,n=(void 0===i?[]:i).map((function(e){return function(e){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text)}));rt.updateCues.call(t,n)})),t.embed.on("loaded",(function(){(t.embed.getPaused().then((function(e){kt.call(t,!e),e||Oe.call(t,t.media,"playing")})),G(t.embed.element)&&t.supported.ui)&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){Oe.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){Oe.call(t,t.media,"playing")})),t.embed.on("play",(function(){kt.call(t,!0),Oe.call(t,t.media,"playing")})),t.embed.on("pause",(function(){kt.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,y=e.seconds,Oe.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,Oe.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&Oe.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,Oe.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,Oe.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,Oe.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,Oe.call(t,t.media,"error")})),setTimeout((function(){return yt.build.call(t)}),0)}};function Ct(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Oe.call(this,this.media,e?"play":"pause"))}function At(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var St={setup:function(){var e=this;if(be(this.elements.wrapper,this.config.classNames.embed,!0),z(window.YT)&&X(window.YT.Player))St.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){X(t)&&t(),St.ready.call(e)},wt(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;Je(Ue(this.config.urls.youtube.api,e)).then((function(e){if(z(e)){var i=e.title,n=e.height,a=e.width;t.config.title=i,yt.setTitle.call(t),t.embed.ratio=[a,n]}Re.call(t)})).catch((function(){Re.call(t)}))},ready:function(){var e=this,t=e.media&&e.media.getAttribute("id");if(ae(t)||!t.startsWith("youtube-")){var i=e.media.getAttribute("src");ae(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));var n,a,s=ae(n=i)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n,r=(a=e.provider,"".concat(a,"-").concat(Math.floor(1e4*Math.random()))),o=he("div",{id:r,"data-poster":e.poster});e.media=ge(o,e.media);var l=function(e){return"https://i.ytimg.com/vi/".concat(s,"/").concat(e,"default.jpg")};gt(l("maxres"),121).catch((function(){return gt(l("sd"),121)})).catch((function(){return gt(l("hq"))})).then((function(t){return yt.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}));var c=e.config.youtube;e.embed=new window.YT.Player(r,{videoId:s,host:At(c),playerVars:ce({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},c),events:{onError:function(t){if(!e.media.error){var i=t.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured";e.media.error={code:i,message:n},Oe.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var i=t.target;e.media.playbackRate=i.getPlaybackRate(),Oe.call(e,e.media,"ratechange")},onReady:function(t){if(!X(e.media.play)){var i=t.target;St.getTitle.call(e,s),e.media.play=function(){Ct.call(e,!0),i.playVideo()},e.media.pause=function(){Ct.call(e,!1),i.pauseVideo()},e.media.stop=function(){i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(i.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,Oe.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return i.getPlaybackRate()},set:function(e){i.setPlaybackRate(e)}});var n=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return n},set:function(t){n=t,i.setVolume(100*n),Oe.call(e,e.media,"volumechange")}});var a=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return a},set:function(t){var n=Q(t)?t:a;a=n,i[n?"mute":"unMute"](),Oe.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return i.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var r=i.getAvailablePlaybackRates();e.options.speed=r.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&e.media.setAttribute("tabindex",-1),Oe.call(e,e.media,"timeupdate"),Oe.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&Oe.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),Oe.call(e,e.media,"canplaythrough"))}),200),setTimeout((function(){return yt.build.call(e)}),50)}},onStateChange:function(t){var i=t.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(t.data)&&(e.media.seeking=!1,Oe.call(e,e.media,"seeked")),t.data){case-1:Oe.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),Oe.call(e,e.media,"progress");break;case 0:Ct.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):Oe.call(e,e.media,"ended");break;case 1:e.config.autoplay||!e.media.paused||e.embed.hasPlayed?(Ct.call(e,!0),Oe.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){Oe.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),Oe.call(e,e.media,"durationchange"))):e.media.pause();break;case 2:e.muted||e.embed.unMute(),Ct.call(e,!1);break;case 3:Oe.call(e,e.media,"waiting")}Oe.call(e,e.elements.container,"statechange",!1,{code:t.data})}}})}}},Pt={setup:function(){this.media?(be(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),be(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&be(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=he("div",{class:this.config.classNames.video}),ue(this.media,this.elements.wrapper),this.elements.poster=he("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Ve.setup.call(this):this.isYouTube?St.setup.call(this):this.isVimeo&&Tt.setup.call(this)):this.debug.warn("No media element found!")}},Et=function(){function t(i){var n=this;e(this,t),this.player=i,this.config=i.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}return i(t,[{key:"load",value:function(){var e=this;this.enabled&&(z(window.google)&&z(window.google.ima)?this.ready():wt(this.player.config.urls.googleIMA.sdk).then((function(){e.ready()})).catch((function(){e.trigger("error",new Error("Google IMA SDK failed to load"))})))}},{key:"ready",value:function(){var e,t=this;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((function(){t.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){var e=this;this.elements.container=he("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return e.onAdsManagerLoaded(t)}),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return e.onAdError(t)}),!1),this.requestAds()}},{key:"requestAds",value:function(){var e=this.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}},{key:"pollCountdown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");var i=function(){var t=it(Math.max(e.manager.getRemainingTime(),0)),i="".concat(Xe("advertisement",e.player.config)," - ").concat(t);e.elements.container.setAttribute("data-badge-text",i)};this.countdownTimer=setInterval(i,100)}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=e.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return t.onAdEvent(e)}))})),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var e=this;ae(this.cuePoints)||this.cuePoints.forEach((function(t){if(0!==t&&-1!==t&&t<e.player.duration){var i=e.player.elements.progress;if(G(i)){var n=100/e.player.duration*t,a=he("span",{class:e.player.config.classNames.cues});a.style.left="".concat(n.toString(),"%"),i.appendChild(a)}}}))}},{key:"onAdEvent",value:function(e){var t=this,i=this.player.elements.container,n=e.getAd(),a=e.getAdData();switch(function(e){Oe.call(t.player,t.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),n.isLinear()||(n.width=i.offsetWidth,n.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:a.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(a.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var e,t=this,i=this.player.elements.container;this.player.on("canplay",(function(){t.addCuePoints()})),this.player.on("ended",(function(){t.loader.contentComplete()})),this.player.on("timeupdate",(function(){e=t.player.currentTime})),this.player.on("seeked",(function(){var i=t.player.currentTime;ae(t.cuePoints)||t.cuePoints.forEach((function(n,a){e<n&&n<i&&(t.manager.discardAdBreak(),t.cuePoints.splice(a,1))}))})),window.addEventListener("resize",(function(){t.manager&&t.manager.resize(i.offsetWidth,i.offsetHeight,google.ima.ViewMode.NORMAL)}))}},{key:"play",value:function(){var e=this,t=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then((function(){e.manager.setVolume(e.player.volume),e.elements.displayContainer.initialize();try{e.initialized||(e.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),e.manager.start()),e.initialized=!0}catch(t){e.onAdError(t)}})).catch((function(){}))}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,qe(this.player.media.play())}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var e=this;this.managerPromise.then((function(){e.manager&&e.manager.destroy(),e.managerPromise=new Promise((function(t){e.on("loaded",t),e.player.debug.log(e.manager)})),e.initialized=!1,e.requestAds()})).catch((function(){}))}},{key:"trigger",value:function(e){for(var t=this,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var s=this.events[e];$(s)&&s.forEach((function(e){X(e)&&e.apply(t,n)}))}},{key:"on",value:function(e,t){return $(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var i=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout((function(){i.cancel(),i.clearSafetyTimer("startSafetyTimer()")}),e)}},{key:"clearSafetyTimer",value:function(e){W(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!ae(e.publisherId)||ne(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(ne(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(st(t))}}]),t}(),Nt=function(e,t){var i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i},Mt=function(){function t(i){e(this,t),this.player=i,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return i(t,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)}))}},{key:"getThumbnails",value:function(){var e=this;return new Promise((function(t){var i=e.player.config.previewThumbnails.src;if(ae(i))throw new Error("Missing previewThumbnails.src config attribute");var n=function(){e.thumbnails.sort((function(e,t){return e.height-t.height})),e.player.debug.log("Preview thumbnails",e.thumbnails),t()};if(X(i))i((function(t){e.thumbnails=t,n()}));else{var a=(Y(i)?[i]:i).map((function(t){return e.getThumbnail(t)}));Promise.all(a).then(n)}}))}},{key:"getThumbnail",value:function(e){var t=this;return new Promise((function(i){Je(e).then((function(n){var a,s,r={frames:(a=n,s=[],a.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var t={};e.split(/\r\n|\n|\r/).forEach((function(e){if(K(t.startTime)){if(!ae(e.trim())&&ae(t.text)){var i=e.trim().split("#xywh="),n=o(i,1);if(t.text=n[0],i[1]){var a=o(i[1].split(","),4);t.x=a[0],t.y=a[1],t.w=a[2],t.h=a[3]}}}else{var s=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(t.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+Number("0.".concat(s[4])),t.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+Number("0.".concat(s[9])))}})),t.text&&s.push(t)})),s),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var l=new Image;l.onload=function(){r.height=l.naturalHeight,r.width=l.naturalWidth,t.thumbnails.push(r),i()},l.src=r.urlPrefix+r.frames[0].text}))}))}},{key:"startMove",value:function(e){if(this.loaded&&Z(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(i/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=it(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){(W(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Le.call(this.player,this.player.media,"timeupdate",(function(){e.mouseDown||e.toggleScrubbingContainer(!1)}))}},{key:"listeners",value:function(){var e=this;this.player.on("play",(function(){e.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(function(){e.toggleThumbContainer(!1)})),this.player.on("timeupdate",(function(){e.lastTime=e.player.media.currentTime}))}},{key:"render",value:function(){this.elements.thumb.container=he("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=he("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=he("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=he("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),G(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=he("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var e=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var t=this.thumbnails[0].frames.findIndex((function(t){return e.seekTime>=t.startTime&&e.seekTime<=t.endTime})),i=t>=0,n=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((function(i,a){e.loadedImages.includes(i.frames[t].text)&&(n=a)})),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(n)))}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.showingThumb,n=this.thumbnails[t],a=n.urlPrefix,s=n.frames[i],r=n.frames[i].text,o=a+r;if(this.currentImageElement&&this.currentImageElement.dataset.filename===r)this.showImage(this.currentImageElement,s,t,i,r,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var l=new Image;l.src=o,l.dataset.index=i,l.dataset.filename=r,this.showingThumbFilename=r,this.player.debug.log("Loading image: ".concat(o)),l.onload=function(){return e.showImage(l,s,t,i,r,!0)},this.loadingImage=l,this.removeOldImages(l)}}},{key:"showImage",value:function(e,t,i,n,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(n,". qual: ").concat(i,". newimg: ").concat(s)),this.setImageSizeAndOffset(e,t),s&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(i,e,t,a))}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach((function(i){if("img"===i.tagName.toLowerCase()){var n=t.usingSprites?500:1e3;if(i.dataset.index!==e.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;var a=t.currentImageContainer;setTimeout((function(){a.removeChild(i),t.player.debug.log("Removing thumb: ".concat(i.dataset.filename))}),n)}}}))}},{key:"preloadNearby",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n){setTimeout((function(){var a=t.thumbnails[0].frames[e].text;if(t.showingThumbFilename===a){var s;s=i?t.thumbnails[0].frames.slice(e):t.thumbnails[0].frames.slice(0,e).reverse();var r=!1;s.forEach((function(e){var i=e.text;if(i!==a&&!t.loadedImages.includes(i)){r=!0,t.player.debug.log("Preloading thumb filename: ".concat(i));var s=t.thumbnails[0].urlPrefix+i,o=new Image;o.src=s,o.onload=function(){t.player.debug.log("Preloaded thumb filename: ".concat(i)),t.loadedImages.includes(i)||t.loadedImages.push(i),n()}}})),r||n()}}),300)}))}},{key:"getHigherQuality",value:function(e,t,i,n){var a=this;if(e<this.thumbnails.length-1){var s=t.naturalHeight;this.usingSprites&&(s=i.h),s<this.thumbContainerHeight&&setTimeout((function(){a.showingThumbFilename===n&&(a.player.debug.log("Showing higher quality thumb for: ".concat(n)),a.loadImage(e+1))}),300)}}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(i,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),i=this.elements.thumb.container,n=t.left-e.left+10,a=t.right-e.left-i.clientWidth-10,s=this.mousePosX-e.left-i.clientWidth/2;s<n&&(s=n),s>a&&(s=a),i.style.left="".concat(s,"px")}},{key:"setScrubbingContainerSize",value:function(){var e=Nt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),t=e.width,i=e.height;this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(i,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var i=this.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*i,"px"),e.style.width="".concat(e.naturalWidth*i,"px"),e.style.left="-".concat(t.x*i,"px"),e.style.top="-".concat(t.y*i,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Nt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),t}(),xt={insertElements:function(e,t){var i=this;Y(t)?pe(e,this.media,{src:t}):$(t)&&t.forEach((function(t){pe(e,i.media,t)}))},change:function(e){var t=this;le(e,"sources.length")?(Ve.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],me(t.media),t.media=null,G(t.elements.container)&&t.elements.container.removeAttribute("class");var i=e.sources,n=e.type,a=o(i,1)[0],s=a.provider,r=void 0===s?ut.html5:s,l=a.src,c="html5"===r?n:"div",u="html5"===r?{}:{src:l};Object.assign(t,{provider:r,type:n,supported:Ee.check(n,r,t.config.playsinline),media:he(c,u)}),t.elements.container.appendChild(t.media),Q(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),ae(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),yt.addStyleHook.call(t),t.isHTML5&&xt.insertElements.call(t,"source",i),t.config.title=e.title,Pt.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&xt.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&yt.build.call(t),t.isHTML5&&t.media.load(),ae(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new Mt(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};var It,Lt=function(){function t(i,n){var a=this;if(e(this,t),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Ee.touch,this.media=i,Y(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||J(this.media)||$(this.media))&&(this.media=this.media[0]),this.config=ce({},ot,t.defaults,n||{},function(){try{return JSON.parse(a.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new mt(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Ee),!W(this.media)&&G(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(Ee.check().api){var s=this.media.cloneNode(!0);s.autoplay=!1,this.elements.original=s;var r=this.media.tagName.toLowerCase(),o=null,l=null;switch(r){case"div":if(o=this.media.querySelector("iframe"),G(o)){if(l=at(o.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?ut.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?ut.vimeo:null}(l.toString()),this.elements.container=this.media,this.media=o,this.elements.container.className="",l.search.length){var c=["1","true"];c.includes(l.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(l.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(l.searchParams.get("playsinline")),this.config.youtube.hl=l.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(ae(this.provider)||!Object.keys(ut).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=ht;break;case"video":case"audio":this.type=r,this.provider=ut.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Ee.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new vt(this),this.storage=new $e(this),this.media.plyr=this,G(this.elements.container)||(this.elements.container=he("div",{tabindex:0}),ue(this.media,this.elements.container)),yt.migrateStyles.call(this),yt.addStyleHook.call(this),Pt.setup.call(this),this.config.debug&&xe.call(this,this.elements.container,this.config.events.join(" "),(function(e){a.debug.log("event: ".concat(e.type))})),this.fullscreen=new ft(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&yt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Et(this)),this.isHTML5&&this.config.autoplay&&setTimeout((function(){return qe(a.play())}),10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Mt(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return i(t,[{key:"play",value:function(){var e=this;return X(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((function(){return e.ads.play()})).catch((function(){return qe(e.media.play())})),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&X(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(e){return(Q(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):X(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime-=K(e)?e:this.config.seekTime}},{key:"forward",value:function(e){this.currentTime+=K(e)?e:this.config.seekTime}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(K(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){rt.toggle.call(this,e,!1)}},{key:"airplay",value:function(){Ee.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(this.supported.ui&&!this.isAudio){var t=we(this.elements.container,this.config.classNames.hideControls),i=void 0===e?void 0:!e,n=be(this.elements.container,this.config.classNames.hideControls,i);if(n&&$(this.config.controls)&&this.config.controls.includes("settings")&&!ae(this.config.settings)&&nt.toggleMenu.call(this,!1),n!==t){var a=n?"controlshidden":"controlsshown";Oe.call(this,this.media,a)}return!n}return!1}},{key:"on",value:function(e,t){xe.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){Le.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){Ie(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var n=function(){document.body.style.overflow="",t.embed=null,i?(Object.keys(t.elements).length&&(me(t.elements.buttons.play),me(t.elements.captions),me(t.elements.controls),me(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),X(e)&&e()):(_e.call(t),ge(t.elements.original,t.elements.container),Oe.call(t,t.elements.original,"destroyed",!0),X(e)&&e.call(t.elements.original),t.ready=!1,setTimeout((function(){t.elements=null,t.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(yt.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&X(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))}}},{key:"supports",value:function(e){return Ee.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===ut.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===ut.youtube}},{key:"isVimeo",get:function(){return this.provider===ut.vimeo}},{key:"isVideo",get:function(){return this.type===ht}},{key:"isAudio",get:function(){return this.type===dt}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=K(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return K(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=K(t)&&t!==1/0?t:0;return e||i}},{key:"volume",set:function(e){var t=e;Y(t)&&(t=Number(t)),K(t)||(t=this.storage.get("volume")),K(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!ae(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;Q(t)||(t=this.storage.get("muted")),Q(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||(!!this.isAudio||(Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)))}},{key:"speed",set:function(e){var t=this,i=null;K(e)&&(i=e),K(i)||(i=this.storage.get("speed")),K(i)||(i=this.config.speed.selected);var n=this.minimumSpeed,a=this.maximumSpeed;i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),i)}(i,n,a),this.config.speed.selected=i,setTimeout((function(){t.media.playbackRate=i}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,l(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,l(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,i=this.options.quality;if(i.length){var n=[!ae(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(K),a=!0;if(!i.includes(n)){var s=function(e,t){return $(e)&&e.length?e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e})):null}(i,n);this.debug.warn("Unsupported quality option: ".concat(n,", using ").concat(s," instead")),n=s,a=!1}t.selected=n,this.media.quality=n,a&&this.storage.set({quality:n})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=Q(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){xt.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return ne(e)?e:this.source},set:function(e){ne(e)&&(this.config.urls.download=e,nt.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?yt.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=He(Fe.call(this));return $(e)?e.join(":"):e},set:function(e){this.isVideo?Y(e)&&De(e)?(this.config.ratio=e,Re.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=Q(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){rt.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,i=e.currentTrack;return t?i:-1}},{key:"language",set:function(e){rt.setLanguage.call(this,e,!1)},get:function(){return(rt.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(Ee.pip){var t=Q(e)?e:!this.pip;X(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?lt:ct),X(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return Ee.pip?ae(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===lt:null}}],[{key:"supported",value:function(e,t,i){return Ee.check(e,t,i)}},{key:"loadSprite",value:function(e,t){return Ge(e,t)}},{key:"setup",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return Y(e)?n=Array.from(document.querySelectorAll(e)):J(e)?n=Array.from(e):$(e)&&(n=e.filter(G)),ae(n)?null:n.map((function(e){return new t(e,i)}))}}]),t}();return Lt.defaults=(It=ot,JSON.parse(JSON.stringify(It))),Lt}));
//# sourceMappingURL=plyr.min.js.map

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHlyLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcIm9iamVjdFwiPT10eXBlb2YgbmF2aWdhdG9yJiZmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiUGx5clwiLHQpOihlPWV8fHNlbGYpLlBseXI9dCgpfSh0aGlzLChmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIHQoZSx0KXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fWZ1bmN0aW9uIGkoZSxpLG4pe3JldHVybiBpJiZ0KGUucHJvdG90eXBlLGkpLG4mJnQoZSxuKSxlfWZ1bmN0aW9uIG4oZSx0LGkpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6aSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09aSxlfWZ1bmN0aW9uIGEoZSx0KXt2YXIgaT1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihuPW4uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLGkucHVzaC5hcHBseShpLG4pfXJldHVybiBpfWZ1bmN0aW9uIHMoZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIGk9bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/YShPYmplY3QoaSksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe24oZSx0LGlbdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoaSkpOmEoT2JqZWN0KGkpKS5mb3JFYWNoKChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSx0KSl9KSl9cmV0dXJuIGV9ZnVuY3Rpb24gcihlLHQpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIGksbixhPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSlyZXR1cm57fTt2YXIgaSxuLGE9e30scz1PYmplY3Qua2V5cyhlKTtmb3Iobj0wO248cy5sZW5ndGg7bisrKWk9c1tuXSx0LmluZGV4T2YoaSk+PTB8fChhW2ldPWVbaV0pO3JldHVybiBhfShlLHQpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7Zm9yKG49MDtuPHMubGVuZ3RoO24rKylpPXNbbl0sdC5pbmRleE9mKGkpPj0wfHxPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpKSYmKGFbaV09ZVtpXSl9cmV0dXJuIGF9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHwhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpKXJldHVybjt2YXIgaT1bXSxuPSEwLGE9ITEscz12b2lkIDA7dHJ5e2Zvcih2YXIgcixvPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEobj0ocj1vLm5leHQoKSkuZG9uZSkmJihpLnB1c2goci52YWx1ZSksIXR8fGkubGVuZ3RoIT09dCk7bj0hMCk7fWNhdGNoKGUpe2E9ITAscz1lfWZpbmFsbHl7dHJ5e258fG51bGw9PW8ucmV0dXJufHxvLnJldHVybigpfWZpbmFsbHl7aWYoYSl0aHJvdyBzfX1yZXR1cm4gaX0oZSx0KXx8YyhlLHQpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gdShlKX0oZSl8fGZ1bmN0aW9uKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIEFycmF5LmZyb20oZSl9KGUpfHxjKGUpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfSgpfWZ1bmN0aW9uIGMoZSx0KXtpZihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gdShlLHQpO3ZhciBpPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTtyZXR1cm5cIk9iamVjdFwiPT09aSYmZS5jb25zdHJ1Y3RvciYmKGk9ZS5jb25zdHJ1Y3Rvci5uYW1lKSxcIk1hcFwiPT09aXx8XCJTZXRcIj09PWk/QXJyYXkuZnJvbShlKTpcIkFyZ3VtZW50c1wiPT09aXx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QoaSk/dShlLHQpOnZvaWQgMH19ZnVuY3Rpb24gdShlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgaT0wLG49bmV3IEFycmF5KHQpO2k8dDtpKyspbltpXT1lW2ldO3JldHVybiBufWZ1bmN0aW9uIGQoZSx0KXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fWZ1bmN0aW9uIGgoZSx0LGkpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6aSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09aSxlfWZ1bmN0aW9uIHAoZSx0KXt2YXIgaT1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihuPW4uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLGkucHVzaC5hcHBseShpLG4pfXJldHVybiBpfWZ1bmN0aW9uIG0oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIGk9bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/cChPYmplY3QoaSksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe2goZSx0LGlbdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoaSkpOnAoT2JqZWN0KGkpKS5mb3JFYWNoKChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSx0KSl9KSl9cmV0dXJuIGV9dmFyIGY9e2FkZENTUzohMCx0aHVtYldpZHRoOjE1LHdhdGNoOiEwfTtmdW5jdGlvbiBnKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSkuaW5jbHVkZXModGhpcyl9LmNhbGwoZSx0KX12YXIgeT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9lLmNvbnN0cnVjdG9yOm51bGx9LHY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIShlJiZ0JiZlIGluc3RhbmNlb2YgdCl9LGI9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWV9LHc9ZnVuY3Rpb24oZSl7cmV0dXJuIHkoZSk9PT1PYmplY3R9LGs9ZnVuY3Rpb24oZSl7cmV0dXJuIHkoZSk9PT1TdHJpbmd9LFQ9ZnVuY3Rpb24oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl9LEM9ZnVuY3Rpb24oZSl7cmV0dXJuIHYoZSxOb2RlTGlzdCl9LEE9ayxTPVQsUD1DLEU9ZnVuY3Rpb24oZSl7cmV0dXJuIHYoZSxFbGVtZW50KX0sTj1mdW5jdGlvbihlKXtyZXR1cm4gdihlLEV2ZW50KX0sTT1mdW5jdGlvbihlKXtyZXR1cm4gYihlKXx8KGsoZSl8fFQoZSl8fEMoZSkpJiYhZS5sZW5ndGh8fHcoZSkmJiFPYmplY3Qua2V5cyhlKS5sZW5ndGh9O2Z1bmN0aW9uIHgoZSx0KXtpZigxPnQpe3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KGUpLm1hdGNoKC8oPzpcXC4oXFxkKykpPyg/OltlRV0oWystXT9cXGQrKSk/JC8pO3JldHVybiB0P01hdGgubWF4KDAsKHRbMV0/dFsxXS5sZW5ndGg6MCktKHRbMl0/K3RbMl06MCkpOjB9KHQpO3JldHVybiBwYXJzZUZsb2F0KGUudG9GaXhlZChpKSl9cmV0dXJuIE1hdGgucm91bmQoZS90KSp0fXZhciBJLEwsTyxfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGkpeyhmdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KSh0aGlzLGUpLEUodCk/dGhpcy5lbGVtZW50PXQ6QSh0KSYmKHRoaXMuZWxlbWVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQpKSxFKHRoaXMuZWxlbWVudCkmJk0odGhpcy5lbGVtZW50LnJhbmdlVG91Y2gpJiYodGhpcy5jb25maWc9bSh7fSxmLHt9LGkpLHRoaXMuaW5pdCgpKX1yZXR1cm4gZnVuY3Rpb24oZSx0LGkpe3QmJmQoZS5wcm90b3R5cGUsdCksaSYmZChlLGkpfShlLFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7ZS5lbmFibGVkJiYodGhpcy5jb25maWcuYWRkQ1NTJiYodGhpcy5lbGVtZW50LnN0eWxlLnVzZXJTZWxlY3Q9XCJub25lXCIsdGhpcy5lbGVtZW50LnN0eWxlLndlYktpdFVzZXJTZWxlY3Q9XCJub25lXCIsdGhpcy5lbGVtZW50LnN0eWxlLnRvdWNoQWN0aW9uPVwibWFuaXB1bGF0aW9uXCIpLHRoaXMubGlzdGVuZXJzKCEwKSx0aGlzLmVsZW1lbnQucmFuZ2VUb3VjaD10aGlzKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtlLmVuYWJsZWQmJih0aGlzLmNvbmZpZy5hZGRDU1MmJih0aGlzLmVsZW1lbnQuc3R5bGUudXNlclNlbGVjdD1cIlwiLHRoaXMuZWxlbWVudC5zdHlsZS53ZWJLaXRVc2VyU2VsZWN0PVwiXCIsdGhpcy5lbGVtZW50LnN0eWxlLnRvdWNoQWN0aW9uPVwiXCIpLHRoaXMubGlzdGVuZXJzKCExKSx0aGlzLmVsZW1lbnQucmFuZ2VUb3VjaD1udWxsKX19LHtrZXk6XCJsaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9ZT9cImFkZEV2ZW50TGlzdGVuZXJcIjpcInJlbW92ZUV2ZW50TGlzdGVuZXJcIjtbXCJ0b3VjaHN0YXJ0XCIsXCJ0b3VjaG1vdmVcIixcInRvdWNoZW5kXCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuZWxlbWVudFtpXShlLChmdW5jdGlvbihlKXtyZXR1cm4gdC5zZXQoZSl9KSwhMSl9KSl9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoIWUuZW5hYmxlZHx8IU4odCkpcmV0dXJuIG51bGw7dmFyIGksbj10LnRhcmdldCxhPXQuY2hhbmdlZFRvdWNoZXNbMF0scz1wYXJzZUZsb2F0KG4uZ2V0QXR0cmlidXRlKFwibWluXCIpKXx8MCxyPXBhcnNlRmxvYXQobi5nZXRBdHRyaWJ1dGUoXCJtYXhcIikpfHwxMDAsbz1wYXJzZUZsb2F0KG4uZ2V0QXR0cmlidXRlKFwic3RlcFwiKSl8fDEsbD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9MTAwL2wud2lkdGgqKHRoaXMuY29uZmlnLnRodW1iV2lkdGgvMikvMTAwO3JldHVybiAwPihpPTEwMC9sLndpZHRoKihhLmNsaWVudFgtbC5sZWZ0KSk/aT0wOjEwMDxpJiYoaT0xMDApLDUwPmk/aS09KDEwMC0yKmkpKmM6NTA8aSYmKGkrPTIqKGktNTApKmMpLHMreChpLzEwMCooci1zKSxvKX19LHtrZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbih0KXtlLmVuYWJsZWQmJk4odCkmJiF0LnRhcmdldC5kaXNhYmxlZCYmKHQucHJldmVudERlZmF1bHQoKSx0LnRhcmdldC52YWx1ZT10aGlzLmdldCh0KSxmdW5jdGlvbihlLHQpe2lmKGUmJnQpe3ZhciBpPW5ldyBFdmVudCh0LHtidWJibGVzOiEwfSk7ZS5kaXNwYXRjaEV2ZW50KGkpfX0odC50YXJnZXQsXCJ0b3VjaGVuZFwiPT09dC50eXBlP1wiY2hhbmdlXCI6XCJpbnB1dFwiKSl9fV0sW3trZXk6XCJzZXR1cFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBpPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPW51bGw7aWYoTSh0KXx8QSh0KT9uPUFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChBKHQpP3Q6J2lucHV0W3R5cGU9XCJyYW5nZVwiXScpKTpFKHQpP249W3RdOlAodCk/bj1BcnJheS5mcm9tKHQpOlModCkmJihuPXQuZmlsdGVyKEUpKSxNKG4pKXJldHVybiBudWxsO3ZhciBhPW0oe30sZix7fSxpKTtpZihBKHQpJiZhLndhdGNoKXt2YXIgcz1uZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oaSl7QXJyYXkuZnJvbShpKS5mb3JFYWNoKChmdW5jdGlvbihpKXtBcnJheS5mcm9tKGkuYWRkZWROb2RlcykuZm9yRWFjaCgoZnVuY3Rpb24oaSl7RShpKSYmZyhpLHQpJiZuZXcgZShpLGEpfSkpfSkpfSkpO3Mub2JzZXJ2ZShkb2N1bWVudC5ib2R5LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXJldHVybiBuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQsaSl9KSl9fSx7a2V5OlwiZW5hYmxlZFwiLGdldDpmdW5jdGlvbigpe3JldHVyblwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9fV0pLGV9KCksaj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9lLmNvbnN0cnVjdG9yOm51bGx9LHE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQm9vbGVhbihlJiZ0JiZlIGluc3RhbmNlb2YgdCl9LEQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWV9LEg9ZnVuY3Rpb24oZSl7cmV0dXJuIGooZSk9PT1PYmplY3R9LEY9ZnVuY3Rpb24oZSl7cmV0dXJuIGooZSk9PT1TdHJpbmd9LFI9ZnVuY3Rpb24oZSl7cmV0dXJuIGooZSk9PT1GdW5jdGlvbn0sVj1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX0sQj1mdW5jdGlvbihlKXtyZXR1cm4gcShlLE5vZGVMaXN0KX0sVT1mdW5jdGlvbihlKXtyZXR1cm4gRChlKXx8KEYoZSl8fFYoZSl8fEIoZSkpJiYhZS5sZW5ndGh8fEgoZSkmJiFPYmplY3Qua2V5cyhlKS5sZW5ndGh9LFc9RCx6PUgsSz1mdW5jdGlvbihlKXtyZXR1cm4gaihlKT09PU51bWJlciYmIU51bWJlci5pc05hTihlKX0sWT1GLFE9ZnVuY3Rpb24oZSl7cmV0dXJuIGooZSk9PT1Cb29sZWFufSxYPVIsJD1WLEo9QixHPWZ1bmN0aW9uKGUpe3JldHVybiBxKGUsRWxlbWVudCl9LFo9ZnVuY3Rpb24oZSl7cmV0dXJuIHEoZSxFdmVudCl9LGVlPWZ1bmN0aW9uKGUpe3JldHVybiBxKGUsS2V5Ym9hcmRFdmVudCl9LHRlPWZ1bmN0aW9uKGUpe3JldHVybiBxKGUsVGV4dFRyYWNrKXx8IUQoZSkmJkYoZS5raW5kKX0saWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHEoZSxQcm9taXNlKSYmUihlLnRoZW4pfSxuZT1mdW5jdGlvbihlKXtpZihxKGUsd2luZG93LlVSTCkpcmV0dXJuITA7aWYoIUYoZSkpcmV0dXJuITE7dmFyIHQ9ZTtlLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpJiZlLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKXx8KHQ9XCJodHRwOi8vXCIuY29uY2F0KGUpKTt0cnl7cmV0dXJuIVUobmV3IFVSTCh0KS5ob3N0bmFtZSl9Y2F0Y2goZSl7cmV0dXJuITF9fSxhZT1VLHNlPShJPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLEw9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn0sTz1PYmplY3Qua2V5cyhMKS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09SS5zdHlsZVtlXX0pKSwhIVkoTykmJkxbT10pO2Z1bmN0aW9uIHJlKGUsdCl7c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0cnl7ZS5oaWRkZW49ITAsZS5vZmZzZXRIZWlnaHQsZS5oaWRkZW49ITF9Y2F0Y2goZSl7fX0pLHQpfXZhciBvZT17aXNJRTpcbi8qIEBjY19vbiFAICovXG4hIWRvY3VtZW50LmRvY3VtZW50TW9kZSxpc0VkZ2U6d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJFZGdlXCIpLGlzV2Via2l0OlwiV2Via2l0QXBwZWFyYW5jZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlJiYhL0VkZ2UvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNJUGhvbmU6LyhpUGhvbmV8aVBvZCkvZ2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pLGlzSW9zOi8oaVBhZHxpUGhvbmV8aVBvZCkvZ2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pfTtmdW5jdGlvbiBsZShlLHQpe3JldHVybiB0LnNwbGl0KFwiLlwiKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmVbdF19KSxlKX1mdW5jdGlvbiBjZSgpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sdD1hcmd1bWVudHMubGVuZ3RoLGk9bmV3IEFycmF5KHQ+MT90LTE6MCksYT0xO2E8dDthKyspaVthLTFdPWFyZ3VtZW50c1thXTtpZighaS5sZW5ndGgpcmV0dXJuIGU7dmFyIHM9aS5zaGlmdCgpO3JldHVybiB6KHMpPyhPYmplY3Qua2V5cyhzKS5mb3JFYWNoKChmdW5jdGlvbih0KXt6KHNbdF0pPyhPYmplY3Qua2V5cyhlKS5pbmNsdWRlcyh0KXx8T2JqZWN0LmFzc2lnbihlLG4oe30sdCx7fSkpLGNlKGVbdF0sc1t0XSkpOk9iamVjdC5hc3NpZ24oZSxuKHt9LHQsc1t0XSkpfSkpLGNlLmFwcGx5KHZvaWQgMCxbZV0uY29uY2F0KGkpKSk6ZX1mdW5jdGlvbiB1ZShlLHQpe3ZhciBpPWUubGVuZ3RoP2U6W2VdO0FycmF5LmZyb20oaSkucmV2ZXJzZSgpLmZvckVhY2goKGZ1bmN0aW9uKGUsaSl7dmFyIG49aT4wP3QuY2xvbmVOb2RlKCEwKTp0LGE9ZS5wYXJlbnROb2RlLHM9ZS5uZXh0U2libGluZztuLmFwcGVuZENoaWxkKGUpLHM/YS5pbnNlcnRCZWZvcmUobixzKTphLmFwcGVuZENoaWxkKG4pfSkpfWZ1bmN0aW9uIGRlKGUsdCl7RyhlKSYmIWFlKHQpJiZPYmplY3QuZW50cmllcyh0KS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3ZhciB0PW8oZSwyKVsxXTtyZXR1cm4hVyh0KX0pKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaT1vKHQsMiksbj1pWzBdLGE9aVsxXTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUobixhKX0pKX1mdW5jdGlvbiBoZShlLHQsaSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKTtyZXR1cm4geih0KSYmZGUobix0KSxZKGkpJiYobi5pbm5lclRleHQ9aSksbn1mdW5jdGlvbiBwZShlLHQsaSxuKXtHKHQpJiZ0LmFwcGVuZENoaWxkKGhlKGUsaSxuKSl9ZnVuY3Rpb24gbWUoZSl7SihlKXx8JChlKT9BcnJheS5mcm9tKGUpLmZvckVhY2gobWUpOkcoZSkmJkcoZS5wYXJlbnROb2RlKSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfWZ1bmN0aW9uIGZlKGUpe2lmKEcoZSkpZm9yKHZhciB0PWUuY2hpbGROb2Rlcy5sZW5ndGg7dD4wOyllLnJlbW92ZUNoaWxkKGUubGFzdENoaWxkKSx0LT0xfWZ1bmN0aW9uIGdlKGUsdCl7cmV0dXJuIEcodCkmJkcodC5wYXJlbnROb2RlKSYmRyhlKT8odC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLHQpLGUpOm51bGx9ZnVuY3Rpb24geWUoZSx0KXtpZighWShlKXx8YWUoZSkpcmV0dXJue307dmFyIGk9e30sbj1jZSh7fSx0KTtyZXR1cm4gZS5zcGxpdChcIixcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50cmltKCksYT10LnJlcGxhY2UoXCIuXCIsXCJcIikscz10LnJlcGxhY2UoL1tbXFxdXS9nLFwiXCIpLnNwbGl0KFwiPVwiKSxyPW8ocywxKVswXSxsPXMubGVuZ3RoPjE/c1sxXS5yZXBsYWNlKC9bXCInXS9nLFwiXCIpOlwiXCI7c3dpdGNoKHQuY2hhckF0KDApKXtjYXNlXCIuXCI6WShuLmNsYXNzKT9pLmNsYXNzPVwiXCIuY29uY2F0KG4uY2xhc3MsXCIgXCIpLmNvbmNhdChhKTppLmNsYXNzPWE7YnJlYWs7Y2FzZVwiI1wiOmkuaWQ9dC5yZXBsYWNlKFwiI1wiLFwiXCIpO2JyZWFrO2Nhc2VcIltcIjppW3JdPWx9fSkpLGNlKG4saSl9ZnVuY3Rpb24gdmUoZSx0KXtpZihHKGUpKXt2YXIgaT10O1EoaSl8fChpPSFlLmhpZGRlbiksZS5oaWRkZW49aX19ZnVuY3Rpb24gYmUoZSx0LGkpe2lmKEooZSkpcmV0dXJuIEFycmF5LmZyb20oZSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gYmUoZSx0LGkpfSkpO2lmKEcoZSkpe3ZhciBuPVwidG9nZ2xlXCI7cmV0dXJuIHZvaWQgMCE9PWkmJihuPWk/XCJhZGRcIjpcInJlbW92ZVwiKSxlLmNsYXNzTGlzdFtuXSh0KSxlLmNsYXNzTGlzdC5jb250YWlucyh0KX1yZXR1cm4hMX1mdW5jdGlvbiB3ZShlLHQpe3JldHVybiBHKGUpJiZlLmNsYXNzTGlzdC5jb250YWlucyh0KX1mdW5jdGlvbiBrZShlLHQpe3ZhciBpPUVsZW1lbnQucHJvdG90eXBlO3JldHVybihpLm1hdGNoZXN8fGkud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxpLm1vek1hdGNoZXNTZWxlY3Rvcnx8aS5tc01hdGNoZXNTZWxlY3Rvcnx8ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKS5pbmNsdWRlcyh0aGlzKX0pLmNhbGwoZSx0KX1mdW5jdGlvbiBUZShlKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChlKX1mdW5jdGlvbiBDZShlKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5jb250YWluZXIucXVlcnlTZWxlY3RvcihlKX1mdW5jdGlvbiBBZSgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtHKGUpJiYoZS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pLHQmJmJlKGUsdGhpcy5jb25maWcuY2xhc3NOYW1lcy50YWJGb2N1cykpfXZhciBTZSxQZT17XCJhdWRpby9vZ2dcIjpcInZvcmJpc1wiLFwiYXVkaW8vd2F2XCI6XCIxXCIsXCJ2aWRlby93ZWJtXCI6XCJ2cDgsIHZvcmJpc1wiLFwidmlkZW8vbXA0XCI6XCJhdmMxLjQyRTAxRSwgbXA0YS40MC4yXCIsXCJ2aWRlby9vZ2dcIjpcInRoZW9yYVwifSxFZT17YXVkaW86XCJjYW5QbGF5VHlwZVwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpLHZpZGVvOlwiY2FuUGxheVR5cGVcImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSxjaGVjazpmdW5jdGlvbihlLHQsaSl7dmFyIG49b2UuaXNJUGhvbmUmJmkmJkVlLnBsYXlzaW5saW5lLGE9RWVbZV18fFwiaHRtbDVcIiE9PXQ7cmV0dXJue2FwaTphLHVpOmEmJkVlLnJhbmdlSW5wdXQmJihcInZpZGVvXCIhPT1lfHwhb2UuaXNJUGhvbmV8fG4pfX0scGlwOiEob2UuaXNJUGhvbmV8fCFYKGhlKFwidmlkZW9cIikud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSkmJighZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVuYWJsZWR8fGhlKFwidmlkZW9cIikuZGlzYWJsZVBpY3R1cmVJblBpY3R1cmUpKSxhaXJwbGF5Olgod2luZG93LldlYktpdFBsYXliYWNrVGFyZ2V0QXZhaWxhYmlsaXR5RXZlbnQpLHBsYXlzaW5saW5lOlwicGxheXNJbmxpbmVcImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSxtaW1lOmZ1bmN0aW9uKGUpe2lmKGFlKGUpKXJldHVybiExO3ZhciB0PW8oZS5zcGxpdChcIi9cIiksMSlbMF0saT1lO2lmKCF0aGlzLmlzSFRNTDV8fHQhPT10aGlzLnR5cGUpcmV0dXJuITE7T2JqZWN0LmtleXMoUGUpLmluY2x1ZGVzKGkpJiYoaSs9JzsgY29kZWNzPVwiJy5jb25jYXQoUGVbZV0sJ1wiJykpO3RyeXtyZXR1cm4gQm9vbGVhbihpJiZ0aGlzLm1lZGlhLmNhblBsYXlUeXBlKGkpLnJlcGxhY2UoL25vLyxcIlwiKSl9Y2F0Y2goZSl7cmV0dXJuITF9fSx0ZXh0VHJhY2tzOlwidGV4dFRyYWNrc1wiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpLHJhbmdlSW5wdXQ6KFNlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxTZS50eXBlPVwicmFuZ2VcIixcInJhbmdlXCI9PT1TZS50eXBlKSx0b3VjaDpcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRyYW5zaXRpb25zOiExIT09c2UscmVkdWNlZE1vdGlvbjpcIm1hdGNoTWVkaWFcImluIHdpbmRvdyYmd2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1yZWR1Y2VkLW1vdGlvbilcIikubWF0Y2hlc30sTmU9ZnVuY3Rpb24oKXt2YXIgZT0hMTt0cnl7dmFyIHQ9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxudWxsfX0pO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLG51bGwsdCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsbnVsbCx0KX1jYXRjaChlKXt9cmV0dXJuIGV9KCk7ZnVuY3Rpb24gTWUoZSx0LGkpe3ZhciBuPXRoaXMsYT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdLHM9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxyPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdJiZhcmd1bWVudHNbNV07aWYoZSYmXCJhZGRFdmVudExpc3RlbmVyXCJpbiBlJiYhYWUodCkmJlgoaSkpe3ZhciBvPXQuc3BsaXQoXCIgXCIpLGw9cjtOZSYmKGw9e3Bhc3NpdmU6cyxjYXB0dXJlOnJ9KSxvLmZvckVhY2goKGZ1bmN0aW9uKHQpe24mJm4uZXZlbnRMaXN0ZW5lcnMmJmEmJm4uZXZlbnRMaXN0ZW5lcnMucHVzaCh7ZWxlbWVudDplLHR5cGU6dCxjYWxsYmFjazppLG9wdGlvbnM6bH0pLGVbYT9cImFkZEV2ZW50TGlzdGVuZXJcIjpcInJlbW92ZUV2ZW50TGlzdGVuZXJcIl0odCxpLGwpfSkpfX1mdW5jdGlvbiB4ZShlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJcIixpPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLG49IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxhPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF07TWUuY2FsbCh0aGlzLGUsdCxpLCEwLG4sYSl9ZnVuY3Rpb24gSWUoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiXCIsaT1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxuPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10sYT1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSYmYXJndW1lbnRzWzRdO01lLmNhbGwodGhpcyxlLHQsaSwhMSxuLGEpfWZ1bmN0aW9uIExlKGUpe3ZhciB0PXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJcIixuPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGE9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxzPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF0scj1mdW5jdGlvbiByKCl7SWUoZSxpLHIsYSxzKTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxsPW5ldyBBcnJheShvKSxjPTA7YzxvO2MrKylsW2NdPWFyZ3VtZW50c1tjXTtuLmFwcGx5KHQsbCl9O01lLmNhbGwodGhpcyxlLGksciwhMCxhLHMpfWZ1bmN0aW9uIE9lKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIlwiLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXSxuPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTp7fTtpZihHKGUpJiYhYWUodCkpe3ZhciBhPW5ldyBDdXN0b21FdmVudCh0LHtidWJibGVzOmksZGV0YWlsOnMocyh7fSxuKSx7fSx7cGx5cjp0aGlzfSl9KTtlLmRpc3BhdGNoRXZlbnQoYSl9fWZ1bmN0aW9uIF9lKCl7dGhpcyYmdGhpcy5ldmVudExpc3RlbmVycyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbGVtZW50LGk9ZS50eXBlLG49ZS5jYWxsYmFjayxhPWUub3B0aW9uczt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoaSxuLGEpfSkpLHRoaXMuZXZlbnRMaXN0ZW5lcnM9W10pfWZ1bmN0aW9uIGplKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWR5P3NldFRpbWVvdXQodCwwKTp4ZS5jYWxsKGUsZS5lbGVtZW50cy5jb250YWluZXIsXCJyZWFkeVwiLHQpfSkpLnRoZW4oKGZ1bmN0aW9uKCl7fSkpfWZ1bmN0aW9uIHFlKGUpe2llKGUpJiZlLnRoZW4obnVsbCwoZnVuY3Rpb24oKXt9KSl9ZnVuY3Rpb24gRGUoZSl7cmV0dXJuISEoJChlKXx8WShlKSYmZS5pbmNsdWRlcyhcIjpcIikpJiYoJChlKT9lOmUuc3BsaXQoXCI6XCIpKS5tYXAoTnVtYmVyKS5ldmVyeShLKX1mdW5jdGlvbiBIZShlKXtpZighJChlKXx8IWUuZXZlcnkoSykpcmV0dXJuIG51bGw7dmFyIHQ9byhlLDIpLGk9dFswXSxuPXRbMV0sYT1mdW5jdGlvbiBlKHQsaSl7cmV0dXJuIDA9PT1pP3Q6ZShpLHQlaSl9KGksbik7cmV0dXJuW2kvYSxuL2FdfWZ1bmN0aW9uIEZlKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe3JldHVybiBEZShlKT9lLnNwbGl0KFwiOlwiKS5tYXAoTnVtYmVyKTpudWxsfSxpPXQoZSk7aWYobnVsbD09PWkmJihpPXQodGhpcy5jb25maWcucmF0aW8pKSxudWxsPT09aSYmIWFlKHRoaXMuZW1iZWQpJiYkKHRoaXMuZW1iZWQucmF0aW8pJiYoaT10aGlzLmVtYmVkLnJhdGlvKSxudWxsPT09aSYmdGhpcy5pc0hUTUw1KXt2YXIgbj10aGlzLm1lZGlhO2k9SGUoW24udmlkZW9XaWR0aCxuLnZpZGVvSGVpZ2h0XSl9cmV0dXJuIGl9ZnVuY3Rpb24gUmUoZSl7aWYoIXRoaXMuaXNWaWRlbylyZXR1cm57fTt2YXIgdD10aGlzLmVsZW1lbnRzLndyYXBwZXIsaT1GZS5jYWxsKHRoaXMsZSksbj1vKCQoaSk/aTpbMCwwXSwyKSxhPTEwMC9uWzBdKm5bMV07aWYodC5zdHlsZS5wYWRkaW5nQm90dG9tPVwiXCIuY29uY2F0KGEsXCIlXCIpLHRoaXMuaXNWaW1lbyYmIXRoaXMuY29uZmlnLnZpbWVvLnByZW1pdW0mJnRoaXMuc3VwcG9ydGVkLnVpKXt2YXIgcz0xMDAvdGhpcy5tZWRpYS5vZmZzZXRXaWR0aCpwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lZGlhKS5wYWRkaW5nQm90dG9tLDEwKSxyPShzLWEpLyhzLzUwKTt0aGlzLm1lZGlhLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZVkoLVwiLmNvbmNhdChyLFwiJSlcIil9ZWxzZSB0aGlzLmlzSFRNTDUmJnQuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnZpZGVvRml4ZWRSYXRpbyxudWxsIT09aSk7cmV0dXJue3BhZGRpbmc6YSxyYXRpbzppfX12YXIgVmU9e2dldFNvdXJjZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmlzSFRNTDU/QXJyYXkuZnJvbSh0aGlzLm1lZGlhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzb3VyY2VcIikpLmZpbHRlcigoZnVuY3Rpb24odCl7dmFyIGk9dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO3JldHVybiEhYWUoaSl8fEVlLm1pbWUuY2FsbChlLGkpfSkpOltdfSxnZXRRdWFsaXR5T3B0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5xdWFsaXR5LmZvcmNlZD90aGlzLmNvbmZpZy5xdWFsaXR5Lm9wdGlvbnM6VmUuZ2V0U291cmNlcy5jYWxsKHRoaXMpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlLmdldEF0dHJpYnV0ZShcInNpemVcIikpfSkpLmZpbHRlcihCb29sZWFuKX0sc2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzLmlzSFRNTDUpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLnNwZWVkPWUuY29uZmlnLnNwZWVkLm9wdGlvbnMsYWUodGhpcy5jb25maWcucmF0aW8pfHxSZS5jYWxsKGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLm1lZGlhLFwicXVhbGl0eVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1WZS5nZXRTb3VyY2VzLmNhbGwoZSkuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwic3JjXCIpPT09ZS5zb3VyY2V9KSk7cmV0dXJuIHQmJk51bWJlcih0LmdldEF0dHJpYnV0ZShcInNpemVcIikpfSxzZXQ6ZnVuY3Rpb24odCl7aWYoZS5xdWFsaXR5IT09dCl7aWYoZS5jb25maWcucXVhbGl0eS5mb3JjZWQmJlgoZS5jb25maWcucXVhbGl0eS5vbkNoYW5nZSkpZS5jb25maWcucXVhbGl0eS5vbkNoYW5nZSh0KTtlbHNle3ZhciBpPVZlLmdldFNvdXJjZXMuY2FsbChlKS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKGUuZ2V0QXR0cmlidXRlKFwic2l6ZVwiKSk9PT10fSkpO2lmKCFpKXJldHVybjt2YXIgbj1lLm1lZGlhLGE9bi5jdXJyZW50VGltZSxzPW4ucGF1c2VkLHI9bi5wcmVsb2FkLG89bi5yZWFkeVN0YXRlLGw9bi5wbGF5YmFja1JhdGU7ZS5tZWRpYS5zcmM9aS5nZXRBdHRyaWJ1dGUoXCJzcmNcIiksKFwibm9uZVwiIT09cnx8bykmJihlLm9uY2UoXCJsb2FkZWRtZXRhZGF0YVwiLChmdW5jdGlvbigpe2Uuc3BlZWQ9bCxlLmN1cnJlbnRUaW1lPWEsc3x8cWUoZS5wbGF5KCkpfSkpLGUubWVkaWEubG9hZCgpKX1PZS5jYWxsKGUsZS5tZWRpYSxcInF1YWxpdHljaGFuZ2VcIiwhMSx7cXVhbGl0eTp0fSl9fX0pfX0sY2FuY2VsUmVxdWVzdHM6ZnVuY3Rpb24oKXt0aGlzLmlzSFRNTDUmJihtZShWZS5nZXRTb3VyY2VzLmNhbGwodGhpcykpLHRoaXMubWVkaWEuc2V0QXR0cmlidXRlKFwic3JjXCIsdGhpcy5jb25maWcuYmxhbmtWaWRlbyksdGhpcy5tZWRpYS5sb2FkKCksdGhpcy5kZWJ1Zy5sb2coXCJDYW5jZWxsZWQgbmV0d29yayByZXF1ZXN0c1wiKSl9fTtmdW5jdGlvbiBCZShlKXtyZXR1cm4gJChlKT9lLmZpbHRlcigoZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5pbmRleE9mKHQpPT09aX0pKTplfWZ1bmN0aW9uIFVlKGUpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGk9bmV3IEFycmF5KHQ+MT90LTE6MCksbj0xO248dDtuKyspaVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gYWUoZSk/ZTplLnRvU3RyaW5nKCkucmVwbGFjZSgveyhcXGQrKX0vZywoZnVuY3Rpb24oZSx0KXtyZXR1cm4gaVt0XS50b1N0cmluZygpfSkpfXZhciBXZT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiXCIsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06XCJcIjtyZXR1cm4gZS5yZXBsYWNlKG5ldyBSZWdFeHAodC50b1N0cmluZygpLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXFxdL1xcXFxdKS9nLFwiXFxcXCQxXCIpLFwiZ1wiKSxpLnRvU3RyaW5nKCkpfSx6ZT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiO3JldHVybiBlLnRvU3RyaW5nKCkucmVwbGFjZSgvXFx3XFxTKi9nLChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnN1YnN0cigxKS50b0xvd2VyQ2FzZSgpfSkpfTtmdW5jdGlvbiBLZSgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLHQ9ZS50b1N0cmluZygpO3JldHVybiB0PVdlKHQsXCItXCIsXCIgXCIpLHQ9V2UodCxcIl9cIixcIiBcIiksdD16ZSh0KSxXZSh0LFwiIFwiLFwiXCIpfWZ1bmN0aW9uIFllKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoZSksdC5pbm5lckhUTUx9dmFyIFFlPXtwaXA6XCJQSVBcIixhaXJwbGF5OlwiQWlyUGxheVwiLGh0bWw1OlwiSFRNTDVcIix2aW1lbzpcIlZpbWVvXCIseW91dHViZTpcIllvdVR1YmVcIn0sWGU9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJcIix0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihhZShlKXx8YWUodCkpcmV0dXJuXCJcIjt2YXIgaT1sZSh0LmkxOG4sZSk7aWYoYWUoaSkpcmV0dXJuIE9iamVjdC5rZXlzKFFlKS5pbmNsdWRlcyhlKT9RZVtlXTpcIlwiO3ZhciBuPXtcIntzZWVrdGltZX1cIjp0LnNlZWtUaW1lLFwie3RpdGxlfVwiOnQudGl0bGV9O3JldHVybiBPYmplY3QuZW50cmllcyhuKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1vKGUsMiksbj10WzBdLGE9dFsxXTtpPVdlKGksbixhKX0pKSxpfSwkZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoaSl7ZSh0aGlzLHQpLHRoaXMuZW5hYmxlZD1pLmNvbmZpZy5zdG9yYWdlLmVuYWJsZWQsdGhpcy5rZXk9aS5jb25maWcuc3RvcmFnZS5rZXl9cmV0dXJuIGkodCxbe2tleTpcImdldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCF0LnN1cHBvcnRlZHx8IXRoaXMuZW5hYmxlZClyZXR1cm4gbnVsbDt2YXIgaT13aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpO2lmKGFlKGkpKXJldHVybiBudWxsO3ZhciBuPUpTT04ucGFyc2UoaSk7cmV0dXJuIFkoZSkmJmUubGVuZ3RoP25bZV06bn19LHtrZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0LnN1cHBvcnRlZCYmdGhpcy5lbmFibGVkJiZ6KGUpKXt2YXIgaT10aGlzLmdldCgpO2FlKGkpJiYoaT17fSksY2UoaSxlKSx3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5rZXksSlNPTi5zdHJpbmdpZnkoaSkpfX19XSxbe2tleTpcInN1cHBvcnRlZFwiLGdldDpmdW5jdGlvbigpe3RyeXtpZighKFwibG9jYWxTdG9yYWdlXCJpbiB3aW5kb3cpKXJldHVybiExO3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJfX190ZXN0XCIsXCJfX190ZXN0XCIpLHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIl9fX3Rlc3RcIiksITB9Y2F0Y2goZSl7cmV0dXJuITF9fX1dKSx0fSgpO2Z1bmN0aW9uIEplKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcInRleHRcIjtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGksbil7dHJ5e3ZhciBhPW5ldyBYTUxIdHRwUmVxdWVzdDtpZighKFwid2l0aENyZWRlbnRpYWxzXCJpbiBhKSlyZXR1cm47YS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLChmdW5jdGlvbigpe2lmKFwidGV4dFwiPT09dCl0cnl7aShKU09OLnBhcnNlKGEucmVzcG9uc2VUZXh0KSl9Y2F0Y2goZSl7aShhLnJlc3BvbnNlVGV4dCl9ZWxzZSBpKGEucmVzcG9uc2UpfSkpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsKGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKGEuc3RhdHVzKX0pKSxhLm9wZW4oXCJHRVRcIixlLCEwKSxhLnJlc3BvbnNlVHlwZT10LGEuc2VuZCgpfWNhdGNoKGUpe24oZSl9fSkpfWZ1bmN0aW9uIEdlKGUsdCl7aWYoWShlKSl7dmFyIGk9WSh0KSxuPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KX0sYT1mdW5jdGlvbihlLHQpe2UuaW5uZXJIVE1MPXQsaSYmbigpfHxkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIixlKX07aWYoIWl8fCFuKCkpe3ZhciBzPSRlLnN1cHBvcnRlZCxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoci5zZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIixcIlwiKSxpJiZyLnNldEF0dHJpYnV0ZShcImlkXCIsdCkscyl7dmFyIG89d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiXCIuY29uY2F0KFwiY2FjaGVcIixcIi1cIikuY29uY2F0KHQpKTtpZihudWxsIT09byl7dmFyIGw9SlNPTi5wYXJzZShvKTthKHIsbC5jb250ZW50KX19SmUoZSkudGhlbigoZnVuY3Rpb24oZSl7YWUoZSl8fChzJiZ3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJcIi5jb25jYXQoXCJjYWNoZVwiLFwiLVwiKS5jb25jYXQodCksSlNPTi5zdHJpbmdpZnkoe2NvbnRlbnQ6ZX0pKSxhKHIsZSkpfSkpLmNhdGNoKChmdW5jdGlvbigpe30pKX19fXZhciBaZT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC50cnVuYyhlLzYwLzYwJTYwLDEwKX0sZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgudHJ1bmMoZS82MCU2MCwxMCl9LHR0PWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnRydW5jKGUlNjAsMTApfTtmdW5jdGlvbiBpdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07aWYoIUsoZSkpcmV0dXJuIGl0KHZvaWQgMCx0LGkpO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVyblwiMFwiLmNvbmNhdChlKS5zbGljZSgtMil9LGE9WmUoZSkscz1ldChlKSxyPXR0KGUpO3JldHVybiBhPXR8fGE+MD9cIlwiLmNvbmNhdChhLFwiOlwiKTpcIlwiLFwiXCIuY29uY2F0KGkmJmU+MD9cIi1cIjpcIlwiKS5jb25jYXQoYSkuY29uY2F0KG4ocyksXCI6XCIpLmNvbmNhdChuKHIpKX12YXIgbnQ9e2dldEljb25Vcmw6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgVVJMKHRoaXMuY29uZmlnLmljb25Vcmwsd2luZG93LmxvY2F0aW9uKS5ob3N0IT09d2luZG93LmxvY2F0aW9uLmhvc3R8fG9lLmlzSUUmJiF3aW5kb3cuc3ZnNGV2ZXJ5Ym9keTtyZXR1cm57dXJsOnRoaXMuY29uZmlnLmljb25VcmwsY29yczplfX0sZmluZEVsZW1lbnRzOmZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVsZW1lbnRzLmNvbnRyb2xzPUNlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuY29udHJvbHMud3JhcHBlciksdGhpcy5lbGVtZW50cy5idXR0b25zPXtwbGF5OlRlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5wbGF5KSxwYXVzZTpDZS5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGF1c2UpLHJlc3RhcnQ6Q2UuY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnJlc3RhcnQpLHJld2luZDpDZS5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucmV3aW5kKSxmYXN0Rm9yd2FyZDpDZS5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZmFzdEZvcndhcmQpLG11dGU6Q2UuY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLm11dGUpLHBpcDpDZS5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGlwKSxhaXJwbGF5OkNlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5haXJwbGF5KSxzZXR0aW5nczpDZS5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuc2V0dGluZ3MpLGNhcHRpb25zOkNlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5jYXB0aW9ucyksZnVsbHNjcmVlbjpDZS5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZnVsbHNjcmVlbil9LHRoaXMuZWxlbWVudHMucHJvZ3Jlc3M9Q2UuY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5wcm9ncmVzcyksdGhpcy5lbGVtZW50cy5pbnB1dHM9e3NlZWs6Q2UuY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5pbnB1dHMuc2Vlayksdm9sdW1lOkNlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnZvbHVtZSl9LHRoaXMuZWxlbWVudHMuZGlzcGxheT17YnVmZmVyOkNlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheS5idWZmZXIpLGN1cnJlbnRUaW1lOkNlLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheS5jdXJyZW50VGltZSksZHVyYXRpb246Q2UuY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5kaXNwbGF5LmR1cmF0aW9uKX0sRyh0aGlzLmVsZW1lbnRzLnByb2dyZXNzKSYmKHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcD10aGlzLmVsZW1lbnRzLnByb2dyZXNzLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudG9vbHRpcCkpKSwhMH1jYXRjaChlKXtyZXR1cm4gdGhpcy5kZWJ1Zy53YXJuKFwiSXQgbG9va3MgbGlrZSB0aGVyZSBpcyBhIHByb2JsZW0gd2l0aCB5b3VyIGN1c3RvbSBjb250cm9scyBIVE1MXCIsZSksdGhpcy50b2dnbGVOYXRpdmVDb250cm9scyghMCksITF9fSxjcmVhdGVJY29uOmZ1bmN0aW9uKGUsdCl7dmFyIGk9bnQuZ2V0SWNvblVybC5jYWxsKHRoaXMpLG49XCJcIi5jb25jYXQoaS5jb3JzP1wiXCI6aS51cmwsXCIjXCIpLmNvbmNhdCh0aGlzLmNvbmZpZy5pY29uUHJlZml4KSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIik7ZGUoYSxjZSh0LHtcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCIsZm9jdXNhYmxlOlwiZmFsc2VcIn0pKTt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwidXNlXCIpLHI9XCJcIi5jb25jYXQobixcIi1cIikuY29uY2F0KGUpO3JldHVyblwiaHJlZlwiaW4gcyYmcy5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcImhyZWZcIixyKSxzLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFwieGxpbms6aHJlZlwiLHIpLGEuYXBwZW5kQ2hpbGQocyksYX0sY3JlYXRlTGFiZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9WGUoZSx0aGlzLmNvbmZpZyksbj1zKHMoe30sdCkse30se2NsYXNzOlt0LmNsYXNzLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaGlkZGVuXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIil9KTtyZXR1cm4gaGUoXCJzcGFuXCIsbixpKX0sY3JlYXRlQmFkZ2U6ZnVuY3Rpb24oZSl7aWYoYWUoZSkpcmV0dXJuIG51bGw7dmFyIHQ9aGUoXCJzcGFuXCIse2NsYXNzOnRoaXMuY29uZmlnLmNsYXNzTmFtZXMubWVudS52YWx1ZX0pO3JldHVybiB0LmFwcGVuZENoaWxkKGhlKFwic3BhblwiLHtjbGFzczp0aGlzLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUuYmFkZ2V9LGUpKSx0fSxjcmVhdGVCdXR0b246ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLG49Y2Uoe30sdCksYT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLHQ9ZS50b1N0cmluZygpO3JldHVybih0PUtlKHQpKS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSt0LnNsaWNlKDEpfShlKSxzPXtlbGVtZW50OlwiYnV0dG9uXCIsdG9nZ2xlOiExLGxhYmVsOm51bGwsaWNvbjpudWxsLGxhYmVsUHJlc3NlZDpudWxsLGljb25QcmVzc2VkOm51bGx9O3N3aXRjaChbXCJlbGVtZW50XCIsXCJpY29uXCIsXCJsYWJlbFwiXS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3Qua2V5cyhuKS5pbmNsdWRlcyhlKSYmKHNbZV09bltlXSxkZWxldGUgbltlXSl9KSksXCJidXR0b25cIiE9PXMuZWxlbWVudHx8T2JqZWN0LmtleXMobikuaW5jbHVkZXMoXCJ0eXBlXCIpfHwobi50eXBlPVwiYnV0dG9uXCIpLE9iamVjdC5rZXlzKG4pLmluY2x1ZGVzKFwiY2xhc3NcIik/bi5jbGFzcy5zcGxpdChcIiBcIikuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1pLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2x9KSl8fGNlKG4se2NsYXNzOlwiXCIuY29uY2F0KG4uY2xhc3MsXCIgXCIpLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wpfSk6bi5jbGFzcz10aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsZSl7Y2FzZVwicGxheVwiOnMudG9nZ2xlPSEwLHMubGFiZWw9XCJwbGF5XCIscy5sYWJlbFByZXNzZWQ9XCJwYXVzZVwiLHMuaWNvbj1cInBsYXlcIixzLmljb25QcmVzc2VkPVwicGF1c2VcIjticmVhaztjYXNlXCJtdXRlXCI6cy50b2dnbGU9ITAscy5sYWJlbD1cIm11dGVcIixzLmxhYmVsUHJlc3NlZD1cInVubXV0ZVwiLHMuaWNvbj1cInZvbHVtZVwiLHMuaWNvblByZXNzZWQ9XCJtdXRlZFwiO2JyZWFrO2Nhc2VcImNhcHRpb25zXCI6cy50b2dnbGU9ITAscy5sYWJlbD1cImVuYWJsZUNhcHRpb25zXCIscy5sYWJlbFByZXNzZWQ9XCJkaXNhYmxlQ2FwdGlvbnNcIixzLmljb249XCJjYXB0aW9ucy1vZmZcIixzLmljb25QcmVzc2VkPVwiY2FwdGlvbnMtb25cIjticmVhaztjYXNlXCJmdWxsc2NyZWVuXCI6cy50b2dnbGU9ITAscy5sYWJlbD1cImVudGVyRnVsbHNjcmVlblwiLHMubGFiZWxQcmVzc2VkPVwiZXhpdEZ1bGxzY3JlZW5cIixzLmljb249XCJlbnRlci1mdWxsc2NyZWVuXCIscy5pY29uUHJlc3NlZD1cImV4aXQtZnVsbHNjcmVlblwiO2JyZWFrO2Nhc2VcInBsYXktbGFyZ2VcIjpuLmNsYXNzKz1cIiBcIi5jb25jYXQodGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLFwiLS1vdmVybGFpZFwiKSxhPVwicGxheVwiLHMubGFiZWw9XCJwbGF5XCIscy5pY29uPVwicGxheVwiO2JyZWFrO2RlZmF1bHQ6YWUocy5sYWJlbCkmJihzLmxhYmVsPWEpLGFlKHMuaWNvbikmJihzLmljb249ZSl9dmFyIHI9aGUocy5lbGVtZW50KTtyZXR1cm4gcy50b2dnbGU/KHIuYXBwZW5kQ2hpbGQobnQuY3JlYXRlSWNvbi5jYWxsKHRoaXMscy5pY29uUHJlc3NlZCx7Y2xhc3M6XCJpY29uLS1wcmVzc2VkXCJ9KSksci5hcHBlbmRDaGlsZChudC5jcmVhdGVJY29uLmNhbGwodGhpcyxzLmljb24se2NsYXNzOlwiaWNvbi0tbm90LXByZXNzZWRcIn0pKSxyLmFwcGVuZENoaWxkKG50LmNyZWF0ZUxhYmVsLmNhbGwodGhpcyxzLmxhYmVsUHJlc3NlZCx7Y2xhc3M6XCJsYWJlbC0tcHJlc3NlZFwifSkpLHIuYXBwZW5kQ2hpbGQobnQuY3JlYXRlTGFiZWwuY2FsbCh0aGlzLHMubGFiZWwse2NsYXNzOlwibGFiZWwtLW5vdC1wcmVzc2VkXCJ9KSkpOihyLmFwcGVuZENoaWxkKG50LmNyZWF0ZUljb24uY2FsbCh0aGlzLHMuaWNvbikpLHIuYXBwZW5kQ2hpbGQobnQuY3JlYXRlTGFiZWwuY2FsbCh0aGlzLHMubGFiZWwpKSksY2Uobix5ZSh0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9uc1thXSxuKSksZGUocixuKSxcInBsYXlcIj09PWE/KCQodGhpcy5lbGVtZW50cy5idXR0b25zW2FdKXx8KHRoaXMuZWxlbWVudHMuYnV0dG9uc1thXT1bXSksdGhpcy5lbGVtZW50cy5idXR0b25zW2FdLnB1c2gocikpOnRoaXMuZWxlbWVudHMuYnV0dG9uc1thXT1yLHJ9LGNyZWF0ZVJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIGk9aGUoXCJpbnB1dFwiLGNlKHllKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5pbnB1dHNbZV0pLHt0eXBlOlwicmFuZ2VcIixtaW46MCxtYXg6MTAwLHN0ZXA6LjAxLHZhbHVlOjAsYXV0b2NvbXBsZXRlOlwib2ZmXCIscm9sZTpcInNsaWRlclwiLFwiYXJpYS1sYWJlbFwiOlhlKGUsdGhpcy5jb25maWcpLFwiYXJpYS12YWx1ZW1pblwiOjAsXCJhcmlhLXZhbHVlbWF4XCI6MTAwLFwiYXJpYS12YWx1ZW5vd1wiOjB9LHQpKTtyZXR1cm4gdGhpcy5lbGVtZW50cy5pbnB1dHNbZV09aSxudC51cGRhdGVSYW5nZUZpbGwuY2FsbCh0aGlzLGkpLF8uc2V0dXAoaSksaX0sY3JlYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oZSx0KXt2YXIgaT1oZShcInByb2dyZXNzXCIsY2UoeWUodGhpcy5jb25maWcuc2VsZWN0b3JzLmRpc3BsYXlbZV0pLHttaW46MCxtYXg6MTAwLHZhbHVlOjAscm9sZTpcInByb2dyZXNzYmFyXCIsXCJhcmlhLWhpZGRlblwiOiEwfSx0KSk7aWYoXCJ2b2x1bWVcIiE9PWUpe2kuYXBwZW5kQ2hpbGQoaGUoXCJzcGFuXCIsbnVsbCxcIjBcIikpO3ZhciBuPXtwbGF5ZWQ6XCJwbGF5ZWRcIixidWZmZXI6XCJidWZmZXJlZFwifVtlXSxhPW4/WGUobix0aGlzLmNvbmZpZyk6XCJcIjtpLmlubmVyVGV4dD1cIiUgXCIuY29uY2F0KGEudG9Mb3dlckNhc2UoKSl9cmV0dXJuIHRoaXMuZWxlbWVudHMuZGlzcGxheVtlXT1pLGl9LGNyZWF0ZVRpbWU6ZnVuY3Rpb24oZSx0KXt2YXIgaT15ZSh0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheVtlXSx0KSxuPWhlKFwiZGl2XCIsY2UoaSx7Y2xhc3M6XCJcIi5jb25jYXQoaS5jbGFzcz9pLmNsYXNzOlwiXCIsXCIgXCIpLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmRpc3BsYXkudGltZSxcIiBcIikudHJpbSgpLFwiYXJpYS1sYWJlbFwiOlhlKGUsdGhpcy5jb25maWcpfSksXCIwMDowMFwiKTtyZXR1cm4gdGhpcy5lbGVtZW50cy5kaXNwbGF5W2VdPW4sbn0sYmluZE1lbnVJdGVtU2hvcnRjdXRzOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpczt4ZS5jYWxsKHRoaXMsZSxcImtleWRvd24ga2V5dXBcIiwoZnVuY3Rpb24obil7aWYoWzMyLDM4LDM5LDQwXS5pbmNsdWRlcyhuLndoaWNoKSYmKG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpLFwia2V5ZG93blwiIT09bi50eXBlKSl7dmFyIGEscz1rZShlLCdbcm9sZT1cIm1lbnVpdGVtcmFkaW9cIl0nKTtpZighcyYmWzMyLDM5XS5pbmNsdWRlcyhuLndoaWNoKSludC5zaG93TWVudVBhbmVsLmNhbGwoaSx0LCEwKTtlbHNlIDMyIT09bi53aGljaCYmKDQwPT09bi53aGljaHx8cyYmMzk9PT1uLndoaWNoPyhhPWUubmV4dEVsZW1lbnRTaWJsaW5nLEcoYSl8fChhPWUucGFyZW50Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCkpOihhPWUucHJldmlvdXNFbGVtZW50U2libGluZyxHKGEpfHwoYT1lLnBhcmVudE5vZGUubGFzdEVsZW1lbnRDaGlsZCkpLEFlLmNhbGwoaSxhLCEwKSl9fSksITEpLHhlLmNhbGwodGhpcyxlLFwia2V5dXBcIiwoZnVuY3Rpb24oZSl7MTM9PT1lLndoaWNoJiZudC5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbChpLG51bGwsITApfSkpfSxjcmVhdGVNZW51SXRlbTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9ZS52YWx1ZSxuPWUubGlzdCxhPWUudHlwZSxzPWUudGl0bGUscj1lLmJhZGdlLG89dm9pZCAwPT09cj9udWxsOnIsbD1lLmNoZWNrZWQsYz12b2lkIDAhPT1sJiZsLHU9eWUodGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0c1thXSksZD1oZShcImJ1dHRvblwiLGNlKHUse3R5cGU6XCJidXR0b25cIixyb2xlOlwibWVudWl0ZW1yYWRpb1wiLGNsYXNzOlwiXCIuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbCxcIiBcIikuY29uY2F0KHUuY2xhc3M/dS5jbGFzczpcIlwiKS50cmltKCksXCJhcmlhLWNoZWNrZWRcIjpjLHZhbHVlOml9KSksaD1oZShcInNwYW5cIik7aC5pbm5lckhUTUw9cyxHKG8pJiZoLmFwcGVuZENoaWxkKG8pLGQuYXBwZW5kQ2hpbGQoaCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGQsXCJjaGVja2VkXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJ0cnVlXCI9PT1kLmdldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiKX0sc2V0OmZ1bmN0aW9uKGUpe2UmJkFycmF5LmZyb20oZC5wYXJlbnROb2RlLmNoaWxkcmVuKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBrZShlLCdbcm9sZT1cIm1lbnVpdGVtcmFkaW9cIl0nKX0pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIixcImZhbHNlXCIpfSkpLGQuc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsZT9cInRydWVcIjpcImZhbHNlXCIpfX0pLHRoaXMubGlzdGVuZXJzLmJpbmQoZCxcImNsaWNrIGtleXVwXCIsKGZ1bmN0aW9uKGUpe2lmKCFlZShlKXx8MzI9PT1lLndoaWNoKXtzd2l0Y2goZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksZC5jaGVja2VkPSEwLGEpe2Nhc2VcImxhbmd1YWdlXCI6dC5jdXJyZW50VHJhY2s9TnVtYmVyKGkpO2JyZWFrO2Nhc2VcInF1YWxpdHlcIjp0LnF1YWxpdHk9aTticmVhaztjYXNlXCJzcGVlZFwiOnQuc3BlZWQ9cGFyc2VGbG9hdChpKX1udC5zaG93TWVudVBhbmVsLmNhbGwodCxcImhvbWVcIixlZShlKSl9fSksYSwhMSksbnQuYmluZE1lbnVJdGVtU2hvcnRjdXRzLmNhbGwodGhpcyxkLGEpLG4uYXBwZW5kQ2hpbGQoZCl9LGZvcm1hdFRpbWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCx0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV07aWYoIUsoZSkpcmV0dXJuIGU7dmFyIGk9WmUodGhpcy5kdXJhdGlvbik+MDtyZXR1cm4gaXQoZSxpLHQpfSx1cGRhdGVUaW1lRGlzcGxheTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdO0coZSkmJksodCkmJihlLmlubmVyVGV4dD1udC5mb3JtYXRUaW1lKHQsaSkpfSx1cGRhdGVWb2x1bWU6ZnVuY3Rpb24oKXt0aGlzLnN1cHBvcnRlZC51aSYmKEcodGhpcy5lbGVtZW50cy5pbnB1dHMudm9sdW1lKSYmbnQuc2V0UmFuZ2UuY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuaW5wdXRzLnZvbHVtZSx0aGlzLm11dGVkPzA6dGhpcy52b2x1bWUpLEcodGhpcy5lbGVtZW50cy5idXR0b25zLm11dGUpJiYodGhpcy5lbGVtZW50cy5idXR0b25zLm11dGUucHJlc3NlZD10aGlzLm11dGVkfHwwPT09dGhpcy52b2x1bWUpKX0sc2V0UmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjA7RyhlKSYmKGUudmFsdWU9dCxudC51cGRhdGVSYW5nZUZpbGwuY2FsbCh0aGlzLGUpKX0sdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLnN1cHBvcnRlZC51aSYmWihlKSl7dmFyIGksbixhPTA7aWYoZSlzd2l0Y2goZS50eXBlKXtjYXNlXCJ0aW1ldXBkYXRlXCI6Y2FzZVwic2Vla2luZ1wiOmNhc2VcInNlZWtlZFwiOmk9dGhpcy5jdXJyZW50VGltZSxuPXRoaXMuZHVyYXRpb24sYT0wPT09aXx8MD09PW58fE51bWJlci5pc05hTihpKXx8TnVtYmVyLmlzTmFOKG4pPzA6KGkvbioxMDApLnRvRml4ZWQoMiksXCJ0aW1ldXBkYXRlXCI9PT1lLnR5cGUmJm50LnNldFJhbmdlLmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmlucHV0cy5zZWVrLGEpO2JyZWFrO2Nhc2VcInBsYXlpbmdcIjpjYXNlXCJwcm9ncmVzc1wiOiFmdW5jdGlvbihlLGkpe3ZhciBuPUsoaSk/aTowLGE9RyhlKT9lOnQuZWxlbWVudHMuZGlzcGxheS5idWZmZXI7aWYoRyhhKSl7YS52YWx1ZT1uO3ZhciBzPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpWzBdO0cocykmJihzLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlPW4pfX0odGhpcy5lbGVtZW50cy5kaXNwbGF5LmJ1ZmZlciwxMDAqdGhpcy5idWZmZXJlZCl9fX0sdXBkYXRlUmFuZ2VGaWxsOmZ1bmN0aW9uKGUpe3ZhciB0PVooZSk/ZS50YXJnZXQ6ZTtpZihHKHQpJiZcInJhbmdlXCI9PT10LmdldEF0dHJpYnV0ZShcInR5cGVcIikpe2lmKGtlKHQsdGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0cy5zZWVrKSl7dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbm93XCIsdGhpcy5jdXJyZW50VGltZSk7dmFyIGk9bnQuZm9ybWF0VGltZSh0aGlzLmN1cnJlbnRUaW1lKSxuPW50LmZvcm1hdFRpbWUodGhpcy5kdXJhdGlvbiksYT1YZShcInNlZWtMYWJlbFwiLHRoaXMuY29uZmlnKTt0LnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWV0ZXh0XCIsYS5yZXBsYWNlKFwie2N1cnJlbnRUaW1lfVwiLGkpLnJlcGxhY2UoXCJ7ZHVyYXRpb259XCIsbikpfWVsc2UgaWYoa2UodCx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnZvbHVtZSkpe3ZhciBzPTEwMCp0LnZhbHVlO3Quc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZW5vd1wiLHMpLHQuc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZXRleHRcIixcIlwiLmNvbmNhdChzLnRvRml4ZWQoMSksXCIlXCIpKX1lbHNlIHQuc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZW5vd1wiLHQudmFsdWUpO29lLmlzV2Via2l0JiZ0LnN0eWxlLnNldFByb3BlcnR5KFwiLS12YWx1ZVwiLFwiXCIuY29uY2F0KHQudmFsdWUvdC5tYXgqMTAwLFwiJVwiKSl9fSx1cGRhdGVTZWVrVG9vbHRpcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuY29uZmlnLnRvb2x0aXBzLnNlZWsmJkcodGhpcy5lbGVtZW50cy5pbnB1dHMuc2VlaykmJkcodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwKSYmMCE9PXRoaXMuZHVyYXRpb24pe3ZhciBpPVwiXCIuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudG9vbHRpcCxcIi0tdmlzaWJsZVwiKSxuPWZ1bmN0aW9uKGUpe3JldHVybiBiZSh0LmVsZW1lbnRzLmRpc3BsYXkuc2Vla1Rvb2x0aXAsaSxlKX07aWYodGhpcy50b3VjaCluKCExKTtlbHNle3ZhciBhPTAscz10aGlzLmVsZW1lbnRzLnByb2dyZXNzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKFooZSkpYT0xMDAvcy53aWR0aCooZS5wYWdlWC1zLmxlZnQpO2Vsc2V7aWYoIXdlKHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCxpKSlyZXR1cm47YT1wYXJzZUZsb2F0KHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcC5zdHlsZS5sZWZ0LDEwKX1hPDA/YT0wOmE+MTAwJiYoYT0xMDApLG50LnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmRpc3BsYXkuc2Vla1Rvb2x0aXAsdGhpcy5kdXJhdGlvbi8xMDAqYSksdGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLnN0eWxlLmxlZnQ9XCJcIi5jb25jYXQoYSxcIiVcIiksWihlKSYmW1wibW91c2VlbnRlclwiLFwibW91c2VsZWF2ZVwiXS5pbmNsdWRlcyhlLnR5cGUpJiZuKFwibW91c2VlbnRlclwiPT09ZS50eXBlKX19fSx0aW1lVXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PSFHKHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbikmJnRoaXMuY29uZmlnLmludmVydFRpbWU7bnQudXBkYXRlVGltZURpc3BsYXkuY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuZGlzcGxheS5jdXJyZW50VGltZSx0P3RoaXMuZHVyYXRpb24tdGhpcy5jdXJyZW50VGltZTp0aGlzLmN1cnJlbnRUaW1lLHQpLGUmJlwidGltZXVwZGF0ZVwiPT09ZS50eXBlJiZ0aGlzLm1lZGlhLnNlZWtpbmd8fG50LnVwZGF0ZVByb2dyZXNzLmNhbGwodGhpcyxlKX0sZHVyYXRpb25VcGRhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLnN1cHBvcnRlZC51aSYmKHRoaXMuY29uZmlnLmludmVydFRpbWV8fCF0aGlzLmN1cnJlbnRUaW1lKSl7aWYodGhpcy5kdXJhdGlvbj49TWF0aC5wb3coMiwzMikpcmV0dXJuIHZlKHRoaXMuZWxlbWVudHMuZGlzcGxheS5jdXJyZW50VGltZSwhMCksdm9pZCB2ZSh0aGlzLmVsZW1lbnRzLnByb2dyZXNzLCEwKTtHKHRoaXMuZWxlbWVudHMuaW5wdXRzLnNlZWspJiZ0aGlzLmVsZW1lbnRzLmlucHV0cy5zZWVrLnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVtYXhcIix0aGlzLmR1cmF0aW9uKTt2YXIgZT1HKHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbik7IWUmJnRoaXMuY29uZmlnLmRpc3BsYXlEdXJhdGlvbiYmdGhpcy5wYXVzZWQmJm50LnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmRpc3BsYXkuY3VycmVudFRpbWUsdGhpcy5kdXJhdGlvbiksZSYmbnQudXBkYXRlVGltZURpc3BsYXkuY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbix0aGlzLmR1cmF0aW9uKSxudC51cGRhdGVTZWVrVG9vbHRpcC5jYWxsKHRoaXMpfX0sdG9nZ2xlTWVudUJ1dHRvbjpmdW5jdGlvbihlLHQpe3ZlKHRoaXMuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1tlXSwhdCl9LHVwZGF0ZVNldHRpbmc6ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzW2VdLGE9bnVsbCxzPXQ7aWYoXCJjYXB0aW9uc1wiPT09ZSlhPXRoaXMuY3VycmVudFRyYWNrO2Vsc2V7aWYoYT1hZShpKT90aGlzW2VdOmksYWUoYSkmJihhPXRoaXMuY29uZmlnW2VdLmRlZmF1bHQpLCFhZSh0aGlzLm9wdGlvbnNbZV0pJiYhdGhpcy5vcHRpb25zW2VdLmluY2x1ZGVzKGEpKXJldHVybiB2b2lkIHRoaXMuZGVidWcud2FybihcIlVuc3VwcG9ydGVkIHZhbHVlIG9mICdcIi5jb25jYXQoYSxcIicgZm9yIFwiKS5jb25jYXQoZSkpO2lmKCF0aGlzLmNvbmZpZ1tlXS5vcHRpb25zLmluY2x1ZGVzKGEpKXJldHVybiB2b2lkIHRoaXMuZGVidWcud2FybihcIkRpc2FibGVkIHZhbHVlIG9mICdcIi5jb25jYXQoYSxcIicgZm9yIFwiKS5jb25jYXQoZSkpfWlmKEcocyl8fChzPW4mJm4ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJykpLEcocykpe3RoaXMuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1tlXS5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUudmFsdWUpKS5pbm5lckhUTUw9bnQuZ2V0TGFiZWwuY2FsbCh0aGlzLGUsYSk7dmFyIHI9cyYmcy5xdWVyeVNlbGVjdG9yKCdbdmFsdWU9XCInLmNvbmNhdChhLCdcIl0nKSk7RyhyKSYmKHIuY2hlY2tlZD0hMCl9fSxnZXRMYWJlbDpmdW5jdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlXCJzcGVlZFwiOnJldHVybiAxPT09dD9YZShcIm5vcm1hbFwiLHRoaXMuY29uZmlnKTpcIlwiLmNvbmNhdCh0LFwiJnRpbWVzO1wiKTtjYXNlXCJxdWFsaXR5XCI6aWYoSyh0KSl7dmFyIGk9WGUoXCJxdWFsaXR5TGFiZWwuXCIuY29uY2F0KHQpLHRoaXMuY29uZmlnKTtyZXR1cm4gaS5sZW5ndGg/aTpcIlwiLmNvbmNhdCh0LFwicFwiKX1yZXR1cm4gemUodCk7Y2FzZVwiY2FwdGlvbnNcIjpyZXR1cm4gcnQuZ2V0TGFiZWwuY2FsbCh0aGlzKTtkZWZhdWx0OnJldHVybiBudWxsfX0sc2V0UXVhbGl0eU1lbnU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihHKHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnF1YWxpdHkpKXt2YXIgaT10aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5xdWFsaXR5LnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwibWVudVwiXScpOyQoZSkmJih0aGlzLm9wdGlvbnMucXVhbGl0eT1CZShlKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmZpZy5xdWFsaXR5Lm9wdGlvbnMuaW5jbHVkZXMoZSl9KSkpO3ZhciBuPSFhZSh0aGlzLm9wdGlvbnMucXVhbGl0eSkmJnRoaXMub3B0aW9ucy5xdWFsaXR5Lmxlbmd0aD4xO2lmKG50LnRvZ2dsZU1lbnVCdXR0b24uY2FsbCh0aGlzLFwicXVhbGl0eVwiLG4pLGZlKGkpLG50LmNoZWNrTWVudS5jYWxsKHRoaXMpLG4pe3ZhciBhPWZ1bmN0aW9uKGUpe3ZhciBpPVhlKFwicXVhbGl0eUJhZGdlLlwiLmNvbmNhdChlKSx0LmNvbmZpZyk7cmV0dXJuIGkubGVuZ3RoP250LmNyZWF0ZUJhZGdlLmNhbGwodCxpKTpudWxsfTt0aGlzLm9wdGlvbnMucXVhbGl0eS5zb3J0KChmdW5jdGlvbihlLGkpe3ZhciBuPXQuY29uZmlnLnF1YWxpdHkub3B0aW9ucztyZXR1cm4gbi5pbmRleE9mKGUpPm4uaW5kZXhPZihpKT8xOi0xfSkpLmZvckVhY2goKGZ1bmN0aW9uKGUpe250LmNyZWF0ZU1lbnVJdGVtLmNhbGwodCx7dmFsdWU6ZSxsaXN0OmksdHlwZTpcInF1YWxpdHlcIix0aXRsZTpudC5nZXRMYWJlbC5jYWxsKHQsXCJxdWFsaXR5XCIsZSksYmFkZ2U6YShlKX0pfSkpLG50LnVwZGF0ZVNldHRpbmcuY2FsbCh0aGlzLFwicXVhbGl0eVwiLGkpfX19LHNldENhcHRpb25zTWVudTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoRyh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5jYXB0aW9ucykpe3ZhciB0PXRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLmNhcHRpb25zLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwibWVudVwiXScpLGk9cnQuZ2V0VHJhY2tzLmNhbGwodGhpcyksbj1Cb29sZWFuKGkubGVuZ3RoKTtpZihudC50b2dnbGVNZW51QnV0dG9uLmNhbGwodGhpcyxcImNhcHRpb25zXCIsbiksZmUodCksbnQuY2hlY2tNZW51LmNhbGwodGhpcyksbil7dmFyIGE9aS5tYXAoKGZ1bmN0aW9uKGksbil7cmV0dXJue3ZhbHVlOm4sY2hlY2tlZDplLmNhcHRpb25zLnRvZ2dsZWQmJmUuY3VycmVudFRyYWNrPT09bix0aXRsZTpydC5nZXRMYWJlbC5jYWxsKGUsaSksYmFkZ2U6aS5sYW5ndWFnZSYmbnQuY3JlYXRlQmFkZ2UuY2FsbChlLGkubGFuZ3VhZ2UudG9VcHBlckNhc2UoKSksbGlzdDp0LHR5cGU6XCJsYW5ndWFnZVwifX0pKTthLnVuc2hpZnQoe3ZhbHVlOi0xLGNoZWNrZWQ6IXRoaXMuY2FwdGlvbnMudG9nZ2xlZCx0aXRsZTpYZShcImRpc2FibGVkXCIsdGhpcy5jb25maWcpLGxpc3Q6dCx0eXBlOlwibGFuZ3VhZ2VcIn0pLGEuZm9yRWFjaChudC5jcmVhdGVNZW51SXRlbS5iaW5kKHRoaXMpKSxudC51cGRhdGVTZXR0aW5nLmNhbGwodGhpcyxcImNhcHRpb25zXCIsdCl9fX0sc2V0U3BlZWRNZW51OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihHKHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnNwZWVkKSl7dmFyIHQ9dGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuc3BlZWQucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJyk7dGhpcy5vcHRpb25zLnNwZWVkPXRoaXMub3B0aW9ucy5zcGVlZC5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0Pj1lLm1pbmltdW1TcGVlZCYmdDw9ZS5tYXhpbXVtU3BlZWR9KSk7dmFyIGk9IWFlKHRoaXMub3B0aW9ucy5zcGVlZCkmJnRoaXMub3B0aW9ucy5zcGVlZC5sZW5ndGg+MTtudC50b2dnbGVNZW51QnV0dG9uLmNhbGwodGhpcyxcInNwZWVkXCIsaSksZmUodCksbnQuY2hlY2tNZW51LmNhbGwodGhpcyksaSYmKHRoaXMub3B0aW9ucy5zcGVlZC5mb3JFYWNoKChmdW5jdGlvbihpKXtudC5jcmVhdGVNZW51SXRlbS5jYWxsKGUse3ZhbHVlOmksbGlzdDp0LHR5cGU6XCJzcGVlZFwiLHRpdGxlOm50LmdldExhYmVsLmNhbGwoZSxcInNwZWVkXCIsaSl9KX0pKSxudC51cGRhdGVTZXR0aW5nLmNhbGwodGhpcyxcInNwZWVkXCIsdCkpfX0sY2hlY2tNZW51OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50cy5zZXR0aW5ncy5idXR0b25zLHQ9IWFlKGUpJiZPYmplY3QudmFsdWVzKGUpLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmhpZGRlbn0pKTt2ZSh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLm1lbnUsIXQpfSxmb2N1c0ZpcnN0TWVudUl0ZW06ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtpZighdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wb3B1cC5oaWRkZW4pe3ZhciBpPWU7RyhpKXx8KGk9T2JqZWN0LnZhbHVlcyh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscykuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIWUuaGlkZGVufSkpKTt2YXIgbj1pLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlXj1cIm1lbnVpdGVtXCJdJyk7QWUuY2FsbCh0aGlzLG4sdCl9fSx0b2dnbGVNZW51OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudHMuc2V0dGluZ3MucG9wdXAsaT10aGlzLmVsZW1lbnRzLmJ1dHRvbnMuc2V0dGluZ3M7aWYoRyh0KSYmRyhpKSl7dmFyIG49dC5oaWRkZW4sYT1uO2lmKFEoZSkpYT1lO2Vsc2UgaWYoZWUoZSkmJjI3PT09ZS53aGljaClhPSExO2Vsc2UgaWYoWihlKSl7dmFyIHM9WChlLmNvbXBvc2VkUGF0aCk/ZS5jb21wb3NlZFBhdGgoKVswXTplLnRhcmdldCxyPXQuY29udGFpbnMocyk7aWYocnx8IXImJmUudGFyZ2V0IT09aSYmYSlyZXR1cm59aS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsYSksdmUodCwhYSksYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51Lm9wZW4sYSksYSYmZWUoZSk/bnQuZm9jdXNGaXJzdE1lbnVJdGVtLmNhbGwodGhpcyxudWxsLCEwKTphfHxufHxBZS5jYWxsKHRoaXMsaSxlZShlKSl9fSxnZXRNZW51U2l6ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNsb25lTm9kZSghMCk7dC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdC5zdHlsZS5vcGFjaXR5PTAsdC5yZW1vdmVBdHRyaWJ1dGUoXCJoaWRkZW5cIiksZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHQpO3ZhciBpPXQuc2Nyb2xsV2lkdGgsbj10LnNjcm9sbEhlaWdodDtyZXR1cm4gbWUodCkse3dpZHRoOmksaGVpZ2h0Om59fSxzaG93TWVudVBhbmVsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxuPXRoaXMuZWxlbWVudHMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjcGx5ci1zZXR0aW5ncy1cIi5jb25jYXQodGhpcy5pZCxcIi1cIikuY29uY2F0KHQpKTtpZihHKG4pKXt2YXIgYT1uLnBhcmVudE5vZGUscz1BcnJheS5mcm9tKGEuY2hpbGRyZW4pLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmhpZGRlbn0pKTtpZihFZS50cmFuc2l0aW9ucyYmIUVlLnJlZHVjZWRNb3Rpb24pe2Euc3R5bGUud2lkdGg9XCJcIi5jb25jYXQocy5zY3JvbGxXaWR0aCxcInB4XCIpLGEuc3R5bGUuaGVpZ2h0PVwiXCIuY29uY2F0KHMuc2Nyb2xsSGVpZ2h0LFwicHhcIik7dmFyIHI9bnQuZ2V0TWVudVNpemUuY2FsbCh0aGlzLG4pLG89ZnVuY3Rpb24gdChpKXtpLnRhcmdldD09PWEmJltcIndpZHRoXCIsXCJoZWlnaHRcIl0uaW5jbHVkZXMoaS5wcm9wZXJ0eU5hbWUpJiYoYS5zdHlsZS53aWR0aD1cIlwiLGEuc3R5bGUuaGVpZ2h0PVwiXCIsSWUuY2FsbChlLGEsc2UsdCkpfTt4ZS5jYWxsKHRoaXMsYSxzZSxvKSxhLnN0eWxlLndpZHRoPVwiXCIuY29uY2F0KHIud2lkdGgsXCJweFwiKSxhLnN0eWxlLmhlaWdodD1cIlwiLmNvbmNhdChyLmhlaWdodCxcInB4XCIpfXZlKHMsITApLHZlKG4sITEpLG50LmZvY3VzRmlyc3RNZW51SXRlbS5jYWxsKHRoaXMsbixpKX19LHNldERvd25sb2FkVXJsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50cy5idXR0b25zLmRvd25sb2FkO0coZSkmJmUuc2V0QXR0cmlidXRlKFwiaHJlZlwiLHRoaXMuZG93bmxvYWQpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPW50LmJpbmRNZW51SXRlbVNob3J0Y3V0cyxuPW50LmNyZWF0ZUJ1dHRvbixhPW50LmNyZWF0ZVByb2dyZXNzLHM9bnQuY3JlYXRlUmFuZ2Uscj1udC5jcmVhdGVUaW1lLG89bnQuc2V0UXVhbGl0eU1lbnUsbD1udC5zZXRTcGVlZE1lbnUsYz1udC5zaG93TWVudVBhbmVsO3RoaXMuZWxlbWVudHMuY29udHJvbHM9bnVsbCwkKHRoaXMuY29uZmlnLmNvbnRyb2xzKSYmdGhpcy5jb25maWcuY29udHJvbHMuaW5jbHVkZXMoXCJwbGF5LWxhcmdlXCIpJiZ0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChuLmNhbGwodGhpcyxcInBsYXktbGFyZ2VcIikpO3ZhciB1PWhlKFwiZGl2XCIseWUodGhpcy5jb25maWcuc2VsZWN0b3JzLmNvbnRyb2xzLndyYXBwZXIpKTt0aGlzLmVsZW1lbnRzLmNvbnRyb2xzPXU7dmFyIGQ9e2NsYXNzOlwicGx5cl9fY29udHJvbHNfX2l0ZW1cIn07cmV0dXJuIEJlKCQodGhpcy5jb25maWcuY29udHJvbHMpP3RoaXMuY29uZmlnLmNvbnRyb2xzOltdKS5mb3JFYWNoKChmdW5jdGlvbihvKXtpZihcInJlc3RhcnRcIj09PW8mJnUuYXBwZW5kQ2hpbGQobi5jYWxsKHQsXCJyZXN0YXJ0XCIsZCkpLFwicmV3aW5kXCI9PT1vJiZ1LmFwcGVuZENoaWxkKG4uY2FsbCh0LFwicmV3aW5kXCIsZCkpLFwicGxheVwiPT09byYmdS5hcHBlbmRDaGlsZChuLmNhbGwodCxcInBsYXlcIixkKSksXCJmYXN0LWZvcndhcmRcIj09PW8mJnUuYXBwZW5kQ2hpbGQobi5jYWxsKHQsXCJmYXN0LWZvcndhcmRcIixkKSksXCJwcm9ncmVzc1wiPT09byl7dmFyIGw9aGUoXCJkaXZcIix7Y2xhc3M6XCJcIi5jb25jYXQoZC5jbGFzcyxcIiBwbHlyX19wcm9ncmVzc19fY29udGFpbmVyXCIpfSksaD1oZShcImRpdlwiLHllKHQuY29uZmlnLnNlbGVjdG9ycy5wcm9ncmVzcykpO2lmKGguYXBwZW5kQ2hpbGQocy5jYWxsKHQsXCJzZWVrXCIse2lkOlwicGx5ci1zZWVrLVwiLmNvbmNhdChlLmlkKX0pKSxoLmFwcGVuZENoaWxkKGEuY2FsbCh0LFwiYnVmZmVyXCIpKSx0LmNvbmZpZy50b29sdGlwcy5zZWVrKXt2YXIgcD1oZShcInNwYW5cIix7Y2xhc3M6dC5jb25maWcuY2xhc3NOYW1lcy50b29sdGlwfSxcIjAwOjAwXCIpO2guYXBwZW5kQ2hpbGQocCksdC5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwPXB9dC5lbGVtZW50cy5wcm9ncmVzcz1oLGwuYXBwZW5kQ2hpbGQodC5lbGVtZW50cy5wcm9ncmVzcyksdS5hcHBlbmRDaGlsZChsKX1pZihcImN1cnJlbnQtdGltZVwiPT09byYmdS5hcHBlbmRDaGlsZChyLmNhbGwodCxcImN1cnJlbnRUaW1lXCIsZCkpLFwiZHVyYXRpb25cIj09PW8mJnUuYXBwZW5kQ2hpbGQoci5jYWxsKHQsXCJkdXJhdGlvblwiLGQpKSxcIm11dGVcIj09PW98fFwidm9sdW1lXCI9PT1vKXt2YXIgbT10LmVsZW1lbnRzLnZvbHVtZTtpZihHKG0pJiZ1LmNvbnRhaW5zKG0pfHwobT1oZShcImRpdlwiLGNlKHt9LGQse2NsYXNzOlwiXCIuY29uY2F0KGQuY2xhc3MsXCIgcGx5cl9fdm9sdW1lXCIpLnRyaW0oKX0pKSx0LmVsZW1lbnRzLnZvbHVtZT1tLHUuYXBwZW5kQ2hpbGQobSkpLFwibXV0ZVwiPT09byYmbS5hcHBlbmRDaGlsZChuLmNhbGwodCxcIm11dGVcIikpLFwidm9sdW1lXCI9PT1vJiYhb2UuaXNJb3Mpe3ZhciBmPXttYXg6MSxzdGVwOi4wNSx2YWx1ZTp0LmNvbmZpZy52b2x1bWV9O20uYXBwZW5kQ2hpbGQocy5jYWxsKHQsXCJ2b2x1bWVcIixjZShmLHtpZDpcInBseXItdm9sdW1lLVwiLmNvbmNhdChlLmlkKX0pKSl9fWlmKFwiY2FwdGlvbnNcIj09PW8mJnUuYXBwZW5kQ2hpbGQobi5jYWxsKHQsXCJjYXB0aW9uc1wiLGQpKSxcInNldHRpbmdzXCI9PT1vJiYhYWUodC5jb25maWcuc2V0dGluZ3MpKXt2YXIgZz1oZShcImRpdlwiLGNlKHt9LGQse2NsYXNzOlwiXCIuY29uY2F0KGQuY2xhc3MsXCIgcGx5cl9fbWVudVwiKS50cmltKCksaGlkZGVuOlwiXCJ9KSk7Zy5hcHBlbmRDaGlsZChuLmNhbGwodCxcInNldHRpbmdzXCIse1wiYXJpYS1oYXNwb3B1cFwiOiEwLFwiYXJpYS1jb250cm9sc1wiOlwicGx5ci1zZXR0aW5ncy1cIi5jb25jYXQoZS5pZCksXCJhcmlhLWV4cGFuZGVkXCI6ITF9KSk7dmFyIHk9aGUoXCJkaXZcIix7Y2xhc3M6XCJwbHlyX19tZW51X19jb250YWluZXJcIixpZDpcInBseXItc2V0dGluZ3MtXCIuY29uY2F0KGUuaWQpLGhpZGRlbjpcIlwifSksdj1oZShcImRpdlwiKSxiPWhlKFwiZGl2XCIse2lkOlwicGx5ci1zZXR0aW5ncy1cIi5jb25jYXQoZS5pZCxcIi1ob21lXCIpfSksdz1oZShcImRpdlwiLHtyb2xlOlwibWVudVwifSk7Yi5hcHBlbmRDaGlsZCh3KSx2LmFwcGVuZENoaWxkKGIpLHQuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLmhvbWU9Yix0LmNvbmZpZy5zZXR0aW5ncy5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgYT1oZShcImJ1dHRvblwiLGNlKHllKHQuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnNldHRpbmdzKSx7dHlwZTpcImJ1dHRvblwiLGNsYXNzOlwiXCIuY29uY2F0KHQuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbCxcIiBcIikuY29uY2F0KHQuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbCxcIi0tZm9yd2FyZFwiKSxyb2xlOlwibWVudWl0ZW1cIixcImFyaWEtaGFzcG9wdXBcIjohMCxoaWRkZW46XCJcIn0pKTtpLmNhbGwodCxhLG4pLHhlLmNhbGwodCxhLFwiY2xpY2tcIiwoZnVuY3Rpb24oKXtjLmNhbGwodCxuLCExKX0pKTt2YXIgcz1oZShcInNwYW5cIixudWxsLFhlKG4sdC5jb25maWcpKSxyPWhlKFwic3BhblwiLHtjbGFzczp0LmNvbmZpZy5jbGFzc05hbWVzLm1lbnUudmFsdWV9KTtyLmlubmVySFRNTD1lW25dLHMuYXBwZW5kQ2hpbGQociksYS5hcHBlbmRDaGlsZChzKSx3LmFwcGVuZENoaWxkKGEpO3ZhciBvPWhlKFwiZGl2XCIse2lkOlwicGx5ci1zZXR0aW5ncy1cIi5jb25jYXQoZS5pZCxcIi1cIikuY29uY2F0KG4pLGhpZGRlbjpcIlwifSksbD1oZShcImJ1dHRvblwiLHt0eXBlOlwiYnV0dG9uXCIsY2xhc3M6XCJcIi5jb25jYXQodC5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLFwiIFwiKS5jb25jYXQodC5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLFwiLS1iYWNrXCIpfSk7bC5hcHBlbmRDaGlsZChoZShcInNwYW5cIix7XCJhcmlhLWhpZGRlblwiOiEwfSxYZShuLHQuY29uZmlnKSkpLGwuYXBwZW5kQ2hpbGQoaGUoXCJzcGFuXCIse2NsYXNzOnQuY29uZmlnLmNsYXNzTmFtZXMuaGlkZGVufSxYZShcIm1lbnVCYWNrXCIsdC5jb25maWcpKSkseGUuY2FsbCh0LG8sXCJrZXlkb3duXCIsKGZ1bmN0aW9uKGUpezM3PT09ZS53aGljaCYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLGMuY2FsbCh0LFwiaG9tZVwiLCEwKSl9KSwhMSkseGUuY2FsbCh0LGwsXCJjbGlja1wiLChmdW5jdGlvbigpe2MuY2FsbCh0LFwiaG9tZVwiLCExKX0pKSxvLmFwcGVuZENoaWxkKGwpLG8uYXBwZW5kQ2hpbGQoaGUoXCJkaXZcIix7cm9sZTpcIm1lbnVcIn0pKSx2LmFwcGVuZENoaWxkKG8pLHQuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1tuXT1hLHQuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzW25dPW99KSkseS5hcHBlbmRDaGlsZCh2KSxnLmFwcGVuZENoaWxkKHkpLHUuYXBwZW5kQ2hpbGQoZyksdC5lbGVtZW50cy5zZXR0aW5ncy5wb3B1cD15LHQuZWxlbWVudHMuc2V0dGluZ3MubWVudT1nfWlmKFwicGlwXCI9PT1vJiZFZS5waXAmJnUuYXBwZW5kQ2hpbGQobi5jYWxsKHQsXCJwaXBcIixkKSksXCJhaXJwbGF5XCI9PT1vJiZFZS5haXJwbGF5JiZ1LmFwcGVuZENoaWxkKG4uY2FsbCh0LFwiYWlycGxheVwiLGQpKSxcImRvd25sb2FkXCI9PT1vKXt2YXIgaz1jZSh7fSxkLHtlbGVtZW50OlwiYVwiLGhyZWY6dC5kb3dubG9hZCx0YXJnZXQ6XCJfYmxhbmtcIn0pO3QuaXNIVE1MNSYmKGsuZG93bmxvYWQ9XCJcIik7dmFyIFQ9dC5jb25maWcudXJscy5kb3dubG9hZDshbmUoVCkmJnQuaXNFbWJlZCYmY2Uoayx7aWNvbjpcImxvZ28tXCIuY29uY2F0KHQucHJvdmlkZXIpLGxhYmVsOnQucHJvdmlkZXJ9KSx1LmFwcGVuZENoaWxkKG4uY2FsbCh0LFwiZG93bmxvYWRcIixrKSl9XCJmdWxsc2NyZWVuXCI9PT1vJiZ1LmFwcGVuZENoaWxkKG4uY2FsbCh0LFwiZnVsbHNjcmVlblwiLGQpKX0pKSx0aGlzLmlzSFRNTDUmJm8uY2FsbCh0aGlzLFZlLmdldFF1YWxpdHlPcHRpb25zLmNhbGwodGhpcykpLGwuY2FsbCh0aGlzKSx1fSxpbmplY3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuY29uZmlnLmxvYWRTcHJpdGUpe3ZhciB0PW50LmdldEljb25VcmwuY2FsbCh0aGlzKTt0LmNvcnMmJkdlKHQudXJsLFwic3ByaXRlLXBseXJcIil9dGhpcy5pZD1NYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTt2YXIgaT1udWxsO3RoaXMuZWxlbWVudHMuY29udHJvbHM9bnVsbDt2YXIgbj17aWQ6dGhpcy5pZCxzZWVrdGltZTp0aGlzLmNvbmZpZy5zZWVrVGltZSx0aXRsZTp0aGlzLmNvbmZpZy50aXRsZX0sYT0hMDtYKHRoaXMuY29uZmlnLmNvbnRyb2xzKSYmKHRoaXMuY29uZmlnLmNvbnRyb2xzPXRoaXMuY29uZmlnLmNvbnRyb2xzLmNhbGwodGhpcyxuKSksdGhpcy5jb25maWcuY29udHJvbHN8fCh0aGlzLmNvbmZpZy5jb250cm9scz1bXSksRyh0aGlzLmNvbmZpZy5jb250cm9scyl8fFkodGhpcy5jb25maWcuY29udHJvbHMpP2k9dGhpcy5jb25maWcuY29udHJvbHM6KGk9bnQuY3JlYXRlLmNhbGwodGhpcyx7aWQ6dGhpcy5pZCxzZWVrdGltZTp0aGlzLmNvbmZpZy5zZWVrVGltZSxzcGVlZDp0aGlzLnNwZWVkLHF1YWxpdHk6dGhpcy5xdWFsaXR5LGNhcHRpb25zOnJ0LmdldExhYmVsLmNhbGwodGhpcyl9KSxhPSExKTt2YXIgcyxyO2lmKGEmJlkodGhpcy5jb25maWcuY29udHJvbHMpJiYocz1pLE9iamVjdC5lbnRyaWVzKG4pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW8oZSwyKSxpPXRbMF0sbj10WzFdO3M9V2UocyxcIntcIi5jb25jYXQoaSxcIn1cIiksbil9KSksaT1zKSxZKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy5jb250YWluZXIpJiYocj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy5jb250YWluZXIpKSxHKHIpfHwocj10aGlzLmVsZW1lbnRzLmNvbnRhaW5lcikscltHKGkpP1wiaW5zZXJ0QWRqYWNlbnRFbGVtZW50XCI6XCJpbnNlcnRBZGphY2VudEhUTUxcIl0oXCJhZnRlcmJlZ2luXCIsaSksRyh0aGlzLmVsZW1lbnRzLmNvbnRyb2xzKXx8bnQuZmluZEVsZW1lbnRzLmNhbGwodGhpcyksIWFlKHRoaXMuZWxlbWVudHMuYnV0dG9ucykpe3ZhciBsPWZ1bmN0aW9uKHQpe3ZhciBpPWUuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbFByZXNzZWQ7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJwcmVzc2VkXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHdlKHQsaSl9LHNldDpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07YmUodCxpLGUpfX0pfTtPYmplY3QudmFsdWVzKHRoaXMuZWxlbWVudHMuYnV0dG9ucykuZmlsdGVyKEJvb2xlYW4pLmZvckVhY2goKGZ1bmN0aW9uKGUpeyQoZSl8fEooZSk/QXJyYXkuZnJvbShlKS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaChsKTpsKGUpfSkpfWlmKG9lLmlzRWRnZSYmcmUociksdGhpcy5jb25maWcudG9vbHRpcHMuY29udHJvbHMpe3ZhciBjPXRoaXMuY29uZmlnLHU9Yy5jbGFzc05hbWVzLGQ9Yy5zZWxlY3RvcnMsaD1cIlwiLmNvbmNhdChkLmNvbnRyb2xzLndyYXBwZXIsXCIgXCIpLmNvbmNhdChkLmxhYmVscyxcIiAuXCIpLmNvbmNhdCh1LmhpZGRlbikscD1UZS5jYWxsKHRoaXMsaCk7QXJyYXkuZnJvbShwKS5mb3JFYWNoKChmdW5jdGlvbih0KXtiZSh0LGUuY29uZmlnLmNsYXNzTmFtZXMuaGlkZGVuLCExKSxiZSh0LGUuY29uZmlnLmNsYXNzTmFtZXMudG9vbHRpcCwhMCl9KSl9fX07ZnVuY3Rpb24gYXQoZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxpPWU7aWYodCl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7bi5ocmVmPWksaT1uLmhyZWZ9dHJ5e3JldHVybiBuZXcgVVJMKGkpfWNhdGNoKGUpe3JldHVybiBudWxsfX1mdW5jdGlvbiBzdChlKXt2YXIgdD1uZXcgVVJMU2VhcmNoUGFyYW1zO3JldHVybiB6KGUpJiZPYmplY3QuZW50cmllcyhlKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT1vKGUsMiksbj1pWzBdLGE9aVsxXTt0LnNldChuLGEpfSkpLHR9dmFyIHJ0PXtzZXR1cDpmdW5jdGlvbigpe2lmKHRoaXMuc3VwcG9ydGVkLnVpKWlmKCF0aGlzLmlzVmlkZW98fHRoaXMuaXNZb3VUdWJlfHx0aGlzLmlzSFRNTDUmJiFFZS50ZXh0VHJhY2tzKSQodGhpcy5jb25maWcuY29udHJvbHMpJiZ0aGlzLmNvbmZpZy5jb250cm9scy5pbmNsdWRlcyhcInNldHRpbmdzXCIpJiZ0aGlzLmNvbmZpZy5zZXR0aW5ncy5pbmNsdWRlcyhcImNhcHRpb25zXCIpJiZudC5zZXRDYXB0aW9uc01lbnUuY2FsbCh0aGlzKTtlbHNle2lmKEcodGhpcy5lbGVtZW50cy5jYXB0aW9ucyl8fCh0aGlzLmVsZW1lbnRzLmNhcHRpb25zPWhlKFwiZGl2XCIseWUodGhpcy5jb25maWcuc2VsZWN0b3JzLmNhcHRpb25zKSksZnVuY3Rpb24oZSx0KXtHKGUpJiZHKHQpJiZ0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdC5uZXh0U2libGluZyl9KHRoaXMuZWxlbWVudHMuY2FwdGlvbnMsdGhpcy5lbGVtZW50cy53cmFwcGVyKSksb2UuaXNJRSYmd2luZG93LlVSTCl7dmFyIGU9dGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yQWxsKFwidHJhY2tcIik7QXJyYXkuZnJvbShlKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZShcInNyY1wiKSxpPWF0KHQpO251bGwhPT1pJiZpLmhvc3RuYW1lIT09d2luZG93LmxvY2F0aW9uLmhyZWYuaG9zdG5hbWUmJltcImh0dHA6XCIsXCJodHRwczpcIl0uaW5jbHVkZXMoaS5wcm90b2NvbCkmJkplKHQsXCJibG9iXCIpLnRoZW4oKGZ1bmN0aW9uKHQpe2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodCkpfSkpLmNhdGNoKChmdW5jdGlvbigpe21lKGUpfSkpfSkpfXZhciB0PUJlKChuYXZpZ2F0b3IubGFuZ3VhZ2VzfHxbbmF2aWdhdG9yLmxhbmd1YWdlfHxuYXZpZ2F0b3IudXNlckxhbmd1YWdlfHxcImVuXCJdKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KFwiLVwiKVswXX0pKSksaT0odGhpcy5zdG9yYWdlLmdldChcImxhbmd1YWdlXCIpfHx0aGlzLmNvbmZpZy5jYXB0aW9ucy5sYW5ndWFnZXx8XCJhdXRvXCIpLnRvTG93ZXJDYXNlKCk7aWYoXCJhdXRvXCI9PT1pKWk9byh0LDEpWzBdO3ZhciBuPXRoaXMuc3RvcmFnZS5nZXQoXCJjYXB0aW9uc1wiKTtpZihRKG4pfHwobj10aGlzLmNvbmZpZy5jYXB0aW9ucy5hY3RpdmUpLE9iamVjdC5hc3NpZ24odGhpcy5jYXB0aW9ucyx7dG9nZ2xlZDohMSxhY3RpdmU6bixsYW5ndWFnZTppLGxhbmd1YWdlczp0fSksdGhpcy5pc0hUTUw1KXt2YXIgYT10aGlzLmNvbmZpZy5jYXB0aW9ucy51cGRhdGU/XCJhZGR0cmFjayByZW1vdmV0cmFja1wiOlwicmVtb3ZldHJhY2tcIjt4ZS5jYWxsKHRoaXMsdGhpcy5tZWRpYS50ZXh0VHJhY2tzLGEscnQudXBkYXRlLmJpbmQodGhpcykpfXNldFRpbWVvdXQocnQudXBkYXRlLmJpbmQodGhpcyksMCl9fSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9cnQuZ2V0VHJhY2tzLmNhbGwodGhpcywhMCksaT10aGlzLmNhcHRpb25zLG49aS5hY3RpdmUsYT1pLmxhbmd1YWdlLHM9aS5tZXRhLHI9aS5jdXJyZW50VHJhY2tOb2RlLG89Qm9vbGVhbih0LmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxhbmd1YWdlPT09YX0pKSk7dGhpcy5pc0hUTUw1JiZ0aGlzLmlzVmlkZW8mJnQuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hcy5nZXQoZSl9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5kZWJ1Zy5sb2coXCJUcmFjayBhZGRlZFwiLHQpLHMuc2V0KHQse2RlZmF1bHQ6XCJzaG93aW5nXCI9PT10Lm1vZGV9KSxcInNob3dpbmdcIj09PXQubW9kZSYmKHQubW9kZT1cImhpZGRlblwiKSx4ZS5jYWxsKGUsdCxcImN1ZWNoYW5nZVwiLChmdW5jdGlvbigpe3JldHVybiBydC51cGRhdGVDdWVzLmNhbGwoZSl9KSl9KSksKG8mJnRoaXMubGFuZ3VhZ2UhPT1hfHwhdC5pbmNsdWRlcyhyKSkmJihydC5zZXRMYW5ndWFnZS5jYWxsKHRoaXMsYSkscnQudG9nZ2xlLmNhbGwodGhpcyxuJiZvKSksYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jYXB0aW9ucy5lbmFibGVkLCFhZSh0KSksJCh0aGlzLmNvbmZpZy5jb250cm9scykmJnRoaXMuY29uZmlnLmNvbnRyb2xzLmluY2x1ZGVzKFwic2V0dGluZ3NcIikmJnRoaXMuY29uZmlnLnNldHRpbmdzLmluY2x1ZGVzKFwiY2FwdGlvbnNcIikmJm50LnNldENhcHRpb25zTWVudS5jYWxsKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYodGhpcy5zdXBwb3J0ZWQudWkpe3ZhciBuPXRoaXMuY2FwdGlvbnMudG9nZ2xlZCxhPXRoaXMuY29uZmlnLmNsYXNzTmFtZXMuY2FwdGlvbnMuYWN0aXZlLHM9VyhlKT8hbjplO2lmKHMhPT1uKXtpZihpfHwodGhpcy5jYXB0aW9ucy5hY3RpdmU9cyx0aGlzLnN0b3JhZ2Uuc2V0KHtjYXB0aW9uczpzfSkpLCF0aGlzLmxhbmd1YWdlJiZzJiYhaSl7dmFyIHI9cnQuZ2V0VHJhY2tzLmNhbGwodGhpcyksbz1ydC5maW5kVHJhY2suY2FsbCh0aGlzLFt0aGlzLmNhcHRpb25zLmxhbmd1YWdlXS5jb25jYXQobCh0aGlzLmNhcHRpb25zLmxhbmd1YWdlcykpLCEwKTtyZXR1cm4gdGhpcy5jYXB0aW9ucy5sYW5ndWFnZT1vLmxhbmd1YWdlLHZvaWQgcnQuc2V0LmNhbGwodGhpcyxyLmluZGV4T2YobykpfXRoaXMuZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucyYmKHRoaXMuZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucy5wcmVzc2VkPXMpLGJlKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLGEscyksdGhpcy5jYXB0aW9ucy50b2dnbGVkPXMsbnQudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsXCJjYXB0aW9uc1wiKSxPZS5jYWxsKHRoaXMsdGhpcy5tZWRpYSxzP1wiY2FwdGlvbnNlbmFibGVkXCI6XCJjYXB0aW9uc2Rpc2FibGVkXCIpfXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cyYmdC5jYXB0aW9ucy50b2dnbGVkJiYodC5jYXB0aW9ucy5jdXJyZW50VHJhY2tOb2RlLm1vZGU9XCJoaWRkZW5cIil9KSl9fSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxpPXJ0LmdldFRyYWNrcy5jYWxsKHRoaXMpO2lmKC0xIT09ZSlpZihLKGUpKWlmKGUgaW4gaSl7aWYodGhpcy5jYXB0aW9ucy5jdXJyZW50VHJhY2shPT1lKXt0aGlzLmNhcHRpb25zLmN1cnJlbnRUcmFjaz1lO3ZhciBuPWlbZV0sYT1ufHx7fSxzPWEubGFuZ3VhZ2U7dGhpcy5jYXB0aW9ucy5jdXJyZW50VHJhY2tOb2RlPW4sbnQudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsXCJjYXB0aW9uc1wiKSx0fHwodGhpcy5jYXB0aW9ucy5sYW5ndWFnZT1zLHRoaXMuc3RvcmFnZS5zZXQoe2xhbmd1YWdlOnN9KSksdGhpcy5pc1ZpbWVvJiZ0aGlzLmVtYmVkLmVuYWJsZVRleHRUcmFjayhzKSxPZS5jYWxsKHRoaXMsdGhpcy5tZWRpYSxcImxhbmd1YWdlY2hhbmdlXCIpfXJ0LnRvZ2dsZS5jYWxsKHRoaXMsITAsdCksdGhpcy5pc0hUTUw1JiZ0aGlzLmlzVmlkZW8mJnJ0LnVwZGF0ZUN1ZXMuY2FsbCh0aGlzKX1lbHNlIHRoaXMuZGVidWcud2FybihcIlRyYWNrIG5vdCBmb3VuZFwiLGUpO2Vsc2UgdGhpcy5kZWJ1Zy53YXJuKFwiSW52YWxpZCBjYXB0aW9uIGFyZ3VtZW50XCIsZSk7ZWxzZSBydC50b2dnbGUuY2FsbCh0aGlzLCExLHQpfSxzZXRMYW5ndWFnZTpmdW5jdGlvbihlKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO2lmKFkoZSkpe3ZhciBpPWUudG9Mb3dlckNhc2UoKTt0aGlzLmNhcHRpb25zLmxhbmd1YWdlPWk7dmFyIG49cnQuZ2V0VHJhY2tzLmNhbGwodGhpcyksYT1ydC5maW5kVHJhY2suY2FsbCh0aGlzLFtpXSk7cnQuc2V0LmNhbGwodGhpcyxuLmluZGV4T2YoYSksdCl9ZWxzZSB0aGlzLmRlYnVnLndhcm4oXCJJbnZhbGlkIGxhbmd1YWdlIGFyZ3VtZW50XCIsZSl9LGdldFRyYWNrczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLGk9QXJyYXkuZnJvbSgodGhpcy5tZWRpYXx8e30pLnRleHRUcmFja3N8fFtdKTtyZXR1cm4gaS5maWx0ZXIoKGZ1bmN0aW9uKGkpe3JldHVybiFlLmlzSFRNTDV8fHR8fGUuY2FwdGlvbnMubWV0YS5oYXMoaSl9KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm5bXCJjYXB0aW9uc1wiLFwic3VidGl0bGVzXCJdLmluY2x1ZGVzKGUua2luZCl9KSl9LGZpbmRUcmFjazpmdW5jdGlvbihlKXt2YXIgdCxpPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLGE9cnQuZ2V0VHJhY2tzLmNhbGwodGhpcykscz1mdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKChpLmNhcHRpb25zLm1ldGEuZ2V0KGUpfHx7fSkuZGVmYXVsdCl9LHI9QXJyYXkuZnJvbShhKS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBzKHQpLXMoZSl9KSk7cmV0dXJuIGUuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiEodD1yLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxhbmd1YWdlPT09ZX0pKSl9KSksdHx8KG4/clswXTp2b2lkIDApfSxnZXRDdXJyZW50VHJhY2s6ZnVuY3Rpb24oKXtyZXR1cm4gcnQuZ2V0VHJhY2tzLmNhbGwodGhpcylbdGhpcy5jdXJyZW50VHJhY2tdfSxnZXRMYWJlbDpmdW5jdGlvbihlKXt2YXIgdD1lO3JldHVybiF0ZSh0KSYmRWUudGV4dFRyYWNrcyYmdGhpcy5jYXB0aW9ucy50b2dnbGVkJiYodD1ydC5nZXRDdXJyZW50VHJhY2suY2FsbCh0aGlzKSksdGUodCk/YWUodC5sYWJlbCk/YWUodC5sYW5ndWFnZSk/WGUoXCJlbmFibGVkXCIsdGhpcy5jb25maWcpOmUubGFuZ3VhZ2UudG9VcHBlckNhc2UoKTp0LmxhYmVsOlhlKFwiZGlzYWJsZWRcIix0aGlzLmNvbmZpZyl9LHVwZGF0ZUN1ZXM6ZnVuY3Rpb24oZSl7aWYodGhpcy5zdXBwb3J0ZWQudWkpaWYoRyh0aGlzLmVsZW1lbnRzLmNhcHRpb25zKSlpZihXKGUpfHxBcnJheS5pc0FycmF5KGUpKXt2YXIgdD1lO2lmKCF0KXt2YXIgaT1ydC5nZXRDdXJyZW50VHJhY2suY2FsbCh0aGlzKTt0PUFycmF5LmZyb20oKGl8fHt9KS5hY3RpdmVDdWVzfHxbXSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRDdWVBc0hUTUwoKX0pKS5tYXAoWWUpfXZhciBuPXQubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9KSkuam9pbihcIlxcblwiKTtpZihuIT09dGhpcy5lbGVtZW50cy5jYXB0aW9ucy5pbm5lckhUTUwpe2ZlKHRoaXMuZWxlbWVudHMuY2FwdGlvbnMpO3ZhciBhPWhlKFwic3BhblwiLHllKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jYXB0aW9uKSk7YS5pbm5lckhUTUw9bix0aGlzLmVsZW1lbnRzLmNhcHRpb25zLmFwcGVuZENoaWxkKGEpLE9lLmNhbGwodGhpcyx0aGlzLm1lZGlhLFwiY3VlY2hhbmdlXCIpfX1lbHNlIHRoaXMuZGVidWcud2FybihcInVwZGF0ZUN1ZXM6IEludmFsaWQgaW5wdXRcIixlKTtlbHNlIHRoaXMuZGVidWcud2FybihcIk5vIGNhcHRpb25zIGVsZW1lbnQgdG8gcmVuZGVyIHRvXCIpfX0sb3Q9e2VuYWJsZWQ6ITAsdGl0bGU6XCJcIixkZWJ1ZzohMSxhdXRvcGxheTohMSxhdXRvcGF1c2U6ITAscGxheXNpbmxpbmU6ITAsc2Vla1RpbWU6MTAsdm9sdW1lOjEsbXV0ZWQ6ITEsZHVyYXRpb246bnVsbCxkaXNwbGF5RHVyYXRpb246ITAsaW52ZXJ0VGltZTohMCx0b2dnbGVJbnZlcnQ6ITAscmF0aW86bnVsbCxjbGlja1RvUGxheTohMCxoaWRlQ29udHJvbHM6ITAscmVzZXRPbkVuZDohMSxkaXNhYmxlQ29udGV4dE1lbnU6ITAsbG9hZFNwcml0ZTohMCxpY29uUHJlZml4OlwicGx5clwiLGljb25Vcmw6XCJodHRwczovL2Nkbi5wbHlyLmlvLzMuNi4yL3BseXIuc3ZnXCIsYmxhbmtWaWRlbzpcImh0dHBzOi8vY2RuLnBseXIuaW8vc3RhdGljL2JsYW5rLm1wNFwiLHF1YWxpdHk6e2RlZmF1bHQ6NTc2LG9wdGlvbnM6WzQzMjAsMjg4MCwyMTYwLDE0NDAsMTA4MCw3MjAsNTc2LDQ4MCwzNjAsMjQwXSxmb3JjZWQ6ITEsb25DaGFuZ2U6bnVsbH0sbG9vcDp7YWN0aXZlOiExfSxzcGVlZDp7c2VsZWN0ZWQ6MSxvcHRpb25zOlsuNSwuNzUsMSwxLjI1LDEuNSwxLjc1LDIsNF19LGtleWJvYXJkOntmb2N1c2VkOiEwLGdsb2JhbDohMX0sdG9vbHRpcHM6e2NvbnRyb2xzOiExLHNlZWs6ITB9LGNhcHRpb25zOnthY3RpdmU6ITEsbGFuZ3VhZ2U6XCJhdXRvXCIsdXBkYXRlOiExfSxmdWxsc2NyZWVuOntlbmFibGVkOiEwLGZhbGxiYWNrOiEwLGlvc05hdGl2ZTohMX0sc3RvcmFnZTp7ZW5hYmxlZDohMCxrZXk6XCJwbHlyXCJ9LGNvbnRyb2xzOltcInBsYXktbGFyZ2VcIixcInBsYXlcIixcInByb2dyZXNzXCIsXCJjdXJyZW50LXRpbWVcIixcIm11dGVcIixcInZvbHVtZVwiLFwiY2FwdGlvbnNcIixcInNldHRpbmdzXCIsXCJwaXBcIixcImFpcnBsYXlcIixcImZ1bGxzY3JlZW5cIl0sc2V0dGluZ3M6W1wiY2FwdGlvbnNcIixcInF1YWxpdHlcIixcInNwZWVkXCJdLGkxOG46e3Jlc3RhcnQ6XCJSZXN0YXJ0XCIscmV3aW5kOlwiUmV3aW5kIHtzZWVrdGltZX1zXCIscGxheTpcIlBsYXlcIixwYXVzZTpcIlBhdXNlXCIsZmFzdEZvcndhcmQ6XCJGb3J3YXJkIHtzZWVrdGltZX1zXCIsc2VlazpcIlNlZWtcIixzZWVrTGFiZWw6XCJ7Y3VycmVudFRpbWV9IG9mIHtkdXJhdGlvbn1cIixwbGF5ZWQ6XCJQbGF5ZWRcIixidWZmZXJlZDpcIkJ1ZmZlcmVkXCIsY3VycmVudFRpbWU6XCJDdXJyZW50IHRpbWVcIixkdXJhdGlvbjpcIkR1cmF0aW9uXCIsdm9sdW1lOlwiVm9sdW1lXCIsbXV0ZTpcIk11dGVcIix1bm11dGU6XCJVbm11dGVcIixlbmFibGVDYXB0aW9uczpcIkVuYWJsZSBjYXB0aW9uc1wiLGRpc2FibGVDYXB0aW9uczpcIkRpc2FibGUgY2FwdGlvbnNcIixkb3dubG9hZDpcIkRvd25sb2FkXCIsZW50ZXJGdWxsc2NyZWVuOlwiRW50ZXIgZnVsbHNjcmVlblwiLGV4aXRGdWxsc2NyZWVuOlwiRXhpdCBmdWxsc2NyZWVuXCIsZnJhbWVUaXRsZTpcIlBsYXllciBmb3Ige3RpdGxlfVwiLGNhcHRpb25zOlwiQ2FwdGlvbnNcIixzZXR0aW5nczpcIlNldHRpbmdzXCIscGlwOlwiUElQXCIsbWVudUJhY2s6XCJHbyBiYWNrIHRvIHByZXZpb3VzIG1lbnVcIixzcGVlZDpcIlNwZWVkXCIsbm9ybWFsOlwiTm9ybWFsXCIscXVhbGl0eTpcIlF1YWxpdHlcIixsb29wOlwiTG9vcFwiLHN0YXJ0OlwiU3RhcnRcIixlbmQ6XCJFbmRcIixhbGw6XCJBbGxcIixyZXNldDpcIlJlc2V0XCIsZGlzYWJsZWQ6XCJEaXNhYmxlZFwiLGVuYWJsZWQ6XCJFbmFibGVkXCIsYWR2ZXJ0aXNlbWVudDpcIkFkXCIscXVhbGl0eUJhZGdlOnsyMTYwOlwiNEtcIiwxNDQwOlwiSERcIiwxMDgwOlwiSERcIiw3MjA6XCJIRFwiLDU3NjpcIlNEXCIsNDgwOlwiU0RcIn19LHVybHM6e2Rvd25sb2FkOm51bGwsdmltZW86e3NkazpcImh0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS9hcGkvcGxheWVyLmpzXCIsaWZyYW1lOlwiaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvL3swfT97MX1cIixhcGk6XCJodHRwczovL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vezB9Lmpzb25cIn0seW91dHViZTp7c2RrOlwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaVwiLGFwaTpcImh0dHBzOi8vbm9lbWJlZC5jb20vZW1iZWQ/dXJsPWh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9ezB9XCJ9LGdvb2dsZUlNQTp7c2RrOlwiaHR0cHM6Ly9pbWFzZGsuZ29vZ2xlYXBpcy5jb20vanMvc2RrbG9hZGVyL2ltYTMuanNcIn19LGxpc3RlbmVyczp7c2VlazpudWxsLHBsYXk6bnVsbCxwYXVzZTpudWxsLHJlc3RhcnQ6bnVsbCxyZXdpbmQ6bnVsbCxmYXN0Rm9yd2FyZDpudWxsLG11dGU6bnVsbCx2b2x1bWU6bnVsbCxjYXB0aW9uczpudWxsLGRvd25sb2FkOm51bGwsZnVsbHNjcmVlbjpudWxsLHBpcDpudWxsLGFpcnBsYXk6bnVsbCxzcGVlZDpudWxsLHF1YWxpdHk6bnVsbCxsb29wOm51bGwsbGFuZ3VhZ2U6bnVsbH0sZXZlbnRzOltcImVuZGVkXCIsXCJwcm9ncmVzc1wiLFwic3RhbGxlZFwiLFwicGxheWluZ1wiLFwid2FpdGluZ1wiLFwiY2FucGxheVwiLFwiY2FucGxheXRocm91Z2hcIixcImxvYWRzdGFydFwiLFwibG9hZGVkZGF0YVwiLFwibG9hZGVkbWV0YWRhdGFcIixcInRpbWV1cGRhdGVcIixcInZvbHVtZWNoYW5nZVwiLFwicGxheVwiLFwicGF1c2VcIixcImVycm9yXCIsXCJzZWVraW5nXCIsXCJzZWVrZWRcIixcImVtcHRpZWRcIixcInJhdGVjaGFuZ2VcIixcImN1ZWNoYW5nZVwiLFwiZG93bmxvYWRcIixcImVudGVyZnVsbHNjcmVlblwiLFwiZXhpdGZ1bGxzY3JlZW5cIixcImNhcHRpb25zZW5hYmxlZFwiLFwiY2FwdGlvbnNkaXNhYmxlZFwiLFwibGFuZ3VhZ2VjaGFuZ2VcIixcImNvbnRyb2xzaGlkZGVuXCIsXCJjb250cm9sc3Nob3duXCIsXCJyZWFkeVwiLFwic3RhdGVjaGFuZ2VcIixcInF1YWxpdHljaGFuZ2VcIixcImFkc2xvYWRlZFwiLFwiYWRzY29udGVudHBhdXNlXCIsXCJhZHNjb250ZW50cmVzdW1lXCIsXCJhZHN0YXJ0ZWRcIixcImFkc21pZHBvaW50XCIsXCJhZHNjb21wbGV0ZVwiLFwiYWRzYWxsY29tcGxldGVcIixcImFkc2ltcHJlc3Npb25cIixcImFkc2NsaWNrXCJdLHNlbGVjdG9yczp7ZWRpdGFibGU6XCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgW2NvbnRlbnRlZGl0YWJsZV1cIixjb250YWluZXI6XCIucGx5clwiLGNvbnRyb2xzOntjb250YWluZXI6bnVsbCx3cmFwcGVyOlwiLnBseXJfX2NvbnRyb2xzXCJ9LGxhYmVsczpcIltkYXRhLXBseXJdXCIsYnV0dG9uczp7cGxheTonW2RhdGEtcGx5cj1cInBsYXlcIl0nLHBhdXNlOidbZGF0YS1wbHlyPVwicGF1c2VcIl0nLHJlc3RhcnQ6J1tkYXRhLXBseXI9XCJyZXN0YXJ0XCJdJyxyZXdpbmQ6J1tkYXRhLXBseXI9XCJyZXdpbmRcIl0nLGZhc3RGb3J3YXJkOidbZGF0YS1wbHlyPVwiZmFzdC1mb3J3YXJkXCJdJyxtdXRlOidbZGF0YS1wbHlyPVwibXV0ZVwiXScsY2FwdGlvbnM6J1tkYXRhLXBseXI9XCJjYXB0aW9uc1wiXScsZG93bmxvYWQ6J1tkYXRhLXBseXI9XCJkb3dubG9hZFwiXScsZnVsbHNjcmVlbjonW2RhdGEtcGx5cj1cImZ1bGxzY3JlZW5cIl0nLHBpcDonW2RhdGEtcGx5cj1cInBpcFwiXScsYWlycGxheTonW2RhdGEtcGx5cj1cImFpcnBsYXlcIl0nLHNldHRpbmdzOidbZGF0YS1wbHlyPVwic2V0dGluZ3NcIl0nLGxvb3A6J1tkYXRhLXBseXI9XCJsb29wXCJdJ30saW5wdXRzOntzZWVrOidbZGF0YS1wbHlyPVwic2Vla1wiXScsdm9sdW1lOidbZGF0YS1wbHlyPVwidm9sdW1lXCJdJyxzcGVlZDonW2RhdGEtcGx5cj1cInNwZWVkXCJdJyxsYW5ndWFnZTonW2RhdGEtcGx5cj1cImxhbmd1YWdlXCJdJyxxdWFsaXR5OidbZGF0YS1wbHlyPVwicXVhbGl0eVwiXSd9LGRpc3BsYXk6e2N1cnJlbnRUaW1lOlwiLnBseXJfX3RpbWUtLWN1cnJlbnRcIixkdXJhdGlvbjpcIi5wbHlyX190aW1lLS1kdXJhdGlvblwiLGJ1ZmZlcjpcIi5wbHlyX19wcm9ncmVzc19fYnVmZmVyXCIsbG9vcDpcIi5wbHlyX19wcm9ncmVzc19fbG9vcFwiLHZvbHVtZTpcIi5wbHlyX192b2x1bWUtLWRpc3BsYXlcIn0scHJvZ3Jlc3M6XCIucGx5cl9fcHJvZ3Jlc3NcIixjYXB0aW9uczpcIi5wbHlyX19jYXB0aW9uc1wiLGNhcHRpb246XCIucGx5cl9fY2FwdGlvblwifSxjbGFzc05hbWVzOnt0eXBlOlwicGx5ci0tezB9XCIscHJvdmlkZXI6XCJwbHlyLS17MH1cIix2aWRlbzpcInBseXJfX3ZpZGVvLXdyYXBwZXJcIixlbWJlZDpcInBseXJfX3ZpZGVvLWVtYmVkXCIsdmlkZW9GaXhlZFJhdGlvOlwicGx5cl9fdmlkZW8td3JhcHBlci0tZml4ZWQtcmF0aW9cIixlbWJlZENvbnRhaW5lcjpcInBseXJfX3ZpZGVvLWVtYmVkX19jb250YWluZXJcIixwb3N0ZXI6XCJwbHlyX19wb3N0ZXJcIixwb3N0ZXJFbmFibGVkOlwicGx5cl9fcG9zdGVyLWVuYWJsZWRcIixhZHM6XCJwbHlyX19hZHNcIixjb250cm9sOlwicGx5cl9fY29udHJvbFwiLGNvbnRyb2xQcmVzc2VkOlwicGx5cl9fY29udHJvbC0tcHJlc3NlZFwiLHBsYXlpbmc6XCJwbHlyLS1wbGF5aW5nXCIscGF1c2VkOlwicGx5ci0tcGF1c2VkXCIsc3RvcHBlZDpcInBseXItLXN0b3BwZWRcIixsb2FkaW5nOlwicGx5ci0tbG9hZGluZ1wiLGhvdmVyOlwicGx5ci0taG92ZXJcIix0b29sdGlwOlwicGx5cl9fdG9vbHRpcFwiLGN1ZXM6XCJwbHlyX19jdWVzXCIsaGlkZGVuOlwicGx5cl9fc3Itb25seVwiLGhpZGVDb250cm9sczpcInBseXItLWhpZGUtY29udHJvbHNcIixpc0lvczpcInBseXItLWlzLWlvc1wiLGlzVG91Y2g6XCJwbHlyLS1pcy10b3VjaFwiLHVpU3VwcG9ydGVkOlwicGx5ci0tZnVsbC11aVwiLG5vVHJhbnNpdGlvbjpcInBseXItLW5vLXRyYW5zaXRpb25cIixkaXNwbGF5Ont0aW1lOlwicGx5cl9fdGltZVwifSxtZW51Ont2YWx1ZTpcInBseXJfX21lbnVfX3ZhbHVlXCIsYmFkZ2U6XCJwbHlyX19iYWRnZVwiLG9wZW46XCJwbHlyLS1tZW51LW9wZW5cIn0sY2FwdGlvbnM6e2VuYWJsZWQ6XCJwbHlyLS1jYXB0aW9ucy1lbmFibGVkXCIsYWN0aXZlOlwicGx5ci0tY2FwdGlvbnMtYWN0aXZlXCJ9LGZ1bGxzY3JlZW46e2VuYWJsZWQ6XCJwbHlyLS1mdWxsc2NyZWVuLWVuYWJsZWRcIixmYWxsYmFjazpcInBseXItLWZ1bGxzY3JlZW4tZmFsbGJhY2tcIn0scGlwOntzdXBwb3J0ZWQ6XCJwbHlyLS1waXAtc3VwcG9ydGVkXCIsYWN0aXZlOlwicGx5ci0tcGlwLWFjdGl2ZVwifSxhaXJwbGF5OntzdXBwb3J0ZWQ6XCJwbHlyLS1haXJwbGF5LXN1cHBvcnRlZFwiLGFjdGl2ZTpcInBseXItLWFpcnBsYXktYWN0aXZlXCJ9LHRhYkZvY3VzOlwicGx5cl9fdGFiLWZvY3VzXCIscHJldmlld1RodW1ibmFpbHM6e3RodW1iQ29udGFpbmVyOlwicGx5cl9fcHJldmlldy10aHVtYlwiLHRodW1iQ29udGFpbmVyU2hvd246XCJwbHlyX19wcmV2aWV3LXRodW1iLS1pcy1zaG93blwiLGltYWdlQ29udGFpbmVyOlwicGx5cl9fcHJldmlldy10aHVtYl9faW1hZ2UtY29udGFpbmVyXCIsdGltZUNvbnRhaW5lcjpcInBseXJfX3ByZXZpZXctdGh1bWJfX3RpbWUtY29udGFpbmVyXCIsc2NydWJiaW5nQ29udGFpbmVyOlwicGx5cl9fcHJldmlldy1zY3J1YmJpbmdcIixzY3J1YmJpbmdDb250YWluZXJTaG93bjpcInBseXJfX3ByZXZpZXctc2NydWJiaW5nLS1pcy1zaG93blwifX0sYXR0cmlidXRlczp7ZW1iZWQ6e3Byb3ZpZGVyOlwiZGF0YS1wbHlyLXByb3ZpZGVyXCIsaWQ6XCJkYXRhLXBseXItZW1iZWQtaWRcIn19LGFkczp7ZW5hYmxlZDohMSxwdWJsaXNoZXJJZDpcIlwiLHRhZ1VybDpcIlwifSxwcmV2aWV3VGh1bWJuYWlsczp7ZW5hYmxlZDohMSxzcmM6XCJcIn0sdmltZW86e2J5bGluZTohMSxwb3J0cmFpdDohMSx0aXRsZTohMSxzcGVlZDohMCx0cmFuc3BhcmVudDohMSxwcmVtaXVtOiExLHJlZmVycmVyUG9saWN5Om51bGx9LHlvdXR1YmU6e25vQ29va2llOiEwLHJlbDowLHNob3dpbmZvOjAsaXZfbG9hZF9wb2xpY3k6Myxtb2Rlc3RicmFuZGluZzoxfX0sbHQ9XCJwaWN0dXJlLWluLXBpY3R1cmVcIixjdD1cImlubGluZVwiLHV0PXtodG1sNTpcImh0bWw1XCIseW91dHViZTpcInlvdXR1YmVcIix2aW1lbzpcInZpbWVvXCJ9LGR0PVwiYXVkaW9cIixodD1cInZpZGVvXCI7dmFyIHB0PWZ1bmN0aW9uKCl7fSxtdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2UodGhpcyx0KSx0aGlzLmVuYWJsZWQ9d2luZG93LmNvbnNvbGUmJmksdGhpcy5lbmFibGVkJiZ0aGlzLmxvZyhcIkRlYnVnZ2luZyBlbmFibGVkXCIpfXJldHVybiBpKHQsW3trZXk6XCJsb2dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkP0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csY29uc29sZSk6cHR9fSx7a2V5Olwid2FyblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWQ/RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLndhcm4sY29uc29sZSk6cHR9fSx7a2V5OlwiZXJyb3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkP0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlKTpwdH19XSksdH0oKSxmdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoaSl7dmFyIG49dGhpcztlKHRoaXMsdCksdGhpcy5wbGF5ZXI9aSx0aGlzLnByZWZpeD10LnByZWZpeCx0aGlzLnByb3BlcnR5PXQucHJvcGVydHksdGhpcy5zY3JvbGxQb3NpdGlvbj17eDowLHk6MH0sdGhpcy5mb3JjZUZhbGxiYWNrPVwiZm9yY2VcIj09PWkuY29uZmlnLmZ1bGxzY3JlZW4uZmFsbGJhY2ssdGhpcy5wbGF5ZXIuZWxlbWVudHMuZnVsbHNjcmVlbj1pLmNvbmZpZy5mdWxsc2NyZWVuLmNvbnRhaW5lciYmZnVuY3Rpb24oZSx0KXtyZXR1cm4oRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdHx8ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Rve2lmKGtlLm1hdGNoZXMoZSx0KSlyZXR1cm4gZTtlPWUucGFyZW50RWxlbWVudHx8ZS5wYXJlbnROb2RlfXdoaWxlKG51bGwhPT1lJiYxPT09ZS5ub2RlVHlwZSk7cmV0dXJuIG51bGx9KS5jYWxsKGUsdCl9KHRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lcixpLmNvbmZpZy5mdWxsc2NyZWVuLmNvbnRhaW5lcikseGUuY2FsbCh0aGlzLnBsYXllcixkb2N1bWVudCxcIm1zXCI9PT10aGlzLnByZWZpeD9cIk1TRnVsbHNjcmVlbkNoYW5nZVwiOlwiXCIuY29uY2F0KHRoaXMucHJlZml4LFwiZnVsbHNjcmVlbmNoYW5nZVwiKSwoZnVuY3Rpb24oKXtuLm9uQ2hhbmdlKCl9KSkseGUuY2FsbCh0aGlzLnBsYXllcix0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsXCJkYmxjbGlja1wiLChmdW5jdGlvbihlKXtHKG4ucGxheWVyLmVsZW1lbnRzLmNvbnRyb2xzKSYmbi5wbGF5ZXIuZWxlbWVudHMuY29udHJvbHMuY29udGFpbnMoZS50YXJnZXQpfHxuLnRvZ2dsZSgpfSkpLHhlLmNhbGwodGhpcyx0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsXCJrZXlkb3duXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBuLnRyYXBGb2N1cyhlKX0pKSx0aGlzLnVwZGF0ZSgpfXJldHVybiBpKHQsW3trZXk6XCJvbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVkKXt2YXIgZT10aGlzLnBsYXllci5lbGVtZW50cy5idXR0b25zLmZ1bGxzY3JlZW47RyhlKSYmKGUucHJlc3NlZD10aGlzLmFjdGl2ZSksT2UuY2FsbCh0aGlzLnBsYXllcix0aGlzLnRhcmdldCx0aGlzLmFjdGl2ZT9cImVudGVyZnVsbHNjcmVlblwiOlwiZXhpdGZ1bGxzY3JlZW5cIiwhMCl9fX0se2tleTpcInRvZ2dsZUZhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2lmKGU/dGhpcy5zY3JvbGxQb3NpdGlvbj17eDp3aW5kb3cuc2Nyb2xsWHx8MCx5OndpbmRvdy5zY3JvbGxZfHwwfTp3aW5kb3cuc2Nyb2xsVG8odGhpcy5zY3JvbGxQb3NpdGlvbi54LHRoaXMuc2Nyb2xsUG9zaXRpb24ueSksZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz1lP1wiaGlkZGVuXCI6XCJcIixiZSh0aGlzLnRhcmdldCx0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5mdWxsc2NyZWVuLmZhbGxiYWNrLGUpLG9lLmlzSW9zKXt2YXIgdD1kb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJyksaT1cInZpZXdwb3J0LWZpdD1jb3ZlclwiO3R8fCh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIpKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ2aWV3cG9ydFwiKTt2YXIgbj1ZKHQuY29udGVudCkmJnQuY29udGVudC5pbmNsdWRlcyhpKTtlPyh0aGlzLmNsZWFudXBWaWV3cG9ydD0hbixufHwodC5jb250ZW50Kz1cIixcIi5jb25jYXQoaSkpKTp0aGlzLmNsZWFudXBWaWV3cG9ydCYmKHQuY29udGVudD10LmNvbnRlbnQuc3BsaXQoXCIsXCIpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbSgpIT09aX0pKS5qb2luKFwiLFwiKSl9dGhpcy5vbkNoYW5nZSgpfX0se2tleTpcInRyYXBGb2N1c1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFvZS5pc0lvcyYmdGhpcy5hY3RpdmUmJlwiVGFiXCI9PT1lLmtleSYmOT09PWUua2V5Q29kZSl7dmFyIHQ9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCxpPVRlLmNhbGwodGhpcy5wbGF5ZXIsXCJhW2hyZWZdLCBidXR0b246bm90KDpkaXNhYmxlZCksIGlucHV0Om5vdCg6ZGlzYWJsZWQpLCBbdGFiaW5kZXhdXCIpLG49byhpLDEpWzBdLGE9aVtpLmxlbmd0aC0xXTt0IT09YXx8ZS5zaGlmdEtleT90PT09biYmZS5zaGlmdEtleSYmKGEuZm9jdXMoKSxlLnByZXZlbnREZWZhdWx0KCkpOihuLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpKX19fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLmVuYWJsZWQ/KGU9dGhpcy5mb3JjZUZhbGxiYWNrP1wiRmFsbGJhY2sgKGZvcmNlZClcIjp0Lm5hdGl2ZT9cIk5hdGl2ZVwiOlwiRmFsbGJhY2tcIix0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJcIi5jb25jYXQoZSxcIiBmdWxsc2NyZWVuIGVuYWJsZWRcIikpKTp0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJGdWxsc2NyZWVuIG5vdCBzdXBwb3J0ZWQgYW5kIGZhbGxiYWNrIGRpc2FibGVkXCIpO2JlKHRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5mdWxsc2NyZWVuLmVuYWJsZWQsdGhpcy5lbmFibGVkKX19LHtrZXk6XCJlbnRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkJiYob2UuaXNJb3MmJnRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZT90aGlzLnRhcmdldC53ZWJraXRFbnRlckZ1bGxzY3JlZW4oKTohdC5uYXRpdmV8fHRoaXMuZm9yY2VGYWxsYmFjaz90aGlzLnRvZ2dsZUZhbGxiYWNrKCEwKTp0aGlzLnByZWZpeD9hZSh0aGlzLnByZWZpeCl8fHRoaXMudGFyZ2V0W1wiXCIuY29uY2F0KHRoaXMucHJlZml4LFwiUmVxdWVzdFwiKS5jb25jYXQodGhpcy5wcm9wZXJ0eSldKCk6dGhpcy50YXJnZXQucmVxdWVzdEZ1bGxzY3JlZW4oe25hdmlnYXRpb25VSTpcImhpZGVcIn0pKX19LHtrZXk6XCJleGl0XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmVuYWJsZWQpaWYob2UuaXNJb3MmJnRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZSl0aGlzLnRhcmdldC53ZWJraXRFeGl0RnVsbHNjcmVlbigpLHFlKHRoaXMucGxheWVyLnBsYXkoKSk7ZWxzZSBpZighdC5uYXRpdmV8fHRoaXMuZm9yY2VGYWxsYmFjayl0aGlzLnRvZ2dsZUZhbGxiYWNrKCExKTtlbHNlIGlmKHRoaXMucHJlZml4KXtpZighYWUodGhpcy5wcmVmaXgpKXt2YXIgZT1cIm1velwiPT09dGhpcy5wcmVmaXg/XCJDYW5jZWxcIjpcIkV4aXRcIjtkb2N1bWVudFtcIlwiLmNvbmNhdCh0aGlzLnByZWZpeCkuY29uY2F0KGUpLmNvbmNhdCh0aGlzLnByb3BlcnR5KV0oKX19ZWxzZShkb2N1bWVudC5jYW5jZWxGdWxsU2NyZWVufHxkb2N1bWVudC5leGl0RnVsbHNjcmVlbikuY2FsbChkb2N1bWVudCl9fSx7a2V5OlwidG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZT90aGlzLmV4aXQoKTp0aGlzLmVudGVyKCl9fSx7a2V5OlwidXNpbmdOYXRpdmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5uYXRpdmUmJiF0aGlzLmZvcmNlRmFsbGJhY2t9fSx7a2V5OlwiZW5hYmxlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybih0Lm5hdGl2ZXx8dGhpcy5wbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uZmFsbGJhY2spJiZ0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5lbmFibGVkJiZ0aGlzLnBsYXllci5zdXBwb3J0ZWQudWkmJnRoaXMucGxheWVyLmlzVmlkZW99fSx7a2V5OlwiYWN0aXZlXCIsZ2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuZW5hYmxlZClyZXR1cm4hMTtpZighdC5uYXRpdmV8fHRoaXMuZm9yY2VGYWxsYmFjaylyZXR1cm4gd2UodGhpcy50YXJnZXQsdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMuZnVsbHNjcmVlbi5mYWxsYmFjayk7dmFyIGU9dGhpcy5wcmVmaXg/ZG9jdW1lbnRbXCJcIi5jb25jYXQodGhpcy5wcmVmaXgpLmNvbmNhdCh0aGlzLnByb3BlcnR5LFwiRWxlbWVudFwiKV06ZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQ7cmV0dXJuIGUmJmUuc2hhZG93Um9vdD9lPT09dGhpcy50YXJnZXQuZ2V0Um9vdE5vZGUoKS5ob3N0OmU9PT10aGlzLnRhcmdldH19LHtrZXk6XCJ0YXJnZXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb2UuaXNJb3MmJnRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZT90aGlzLnBsYXllci5tZWRpYTp0aGlzLnBsYXllci5lbGVtZW50cy5mdWxsc2NyZWVufHx0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXJ9fV0sW3trZXk6XCJuYXRpdmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hIShkb2N1bWVudC5mdWxsc2NyZWVuRW5hYmxlZHx8ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVuYWJsZWR8fGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbmFibGVkfHxkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbmFibGVkKX19LHtrZXk6XCJwcmVmaXhcIixnZXQ6ZnVuY3Rpb24oKXtpZihYKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSlyZXR1cm5cIlwiO3ZhciBlPVwiXCI7cmV0dXJuW1wid2Via2l0XCIsXCJtb3pcIixcIm1zXCJdLnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiEoIVgoZG9jdW1lbnRbXCJcIi5jb25jYXQodCxcIkV4aXRGdWxsc2NyZWVuXCIpXSkmJiFYKGRvY3VtZW50W1wiXCIuY29uY2F0KHQsXCJDYW5jZWxGdWxsU2NyZWVuXCIpXSkpJiYoZT10LCEwKX0pKSxlfX0se2tleTpcInByb3BlcnR5XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJtb3pcIj09PXRoaXMucHJlZml4P1wiRnVsbFNjcmVlblwiOlwiRnVsbHNjcmVlblwifX1dKSx0fSgpO2Z1bmN0aW9uIGd0KGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oaSxuKXt2YXIgYT1uZXcgSW1hZ2Uscz1mdW5jdGlvbigpe2RlbGV0ZSBhLm9ubG9hZCxkZWxldGUgYS5vbmVycm9yLChhLm5hdHVyYWxXaWR0aD49dD9pOm4pKGEpfTtPYmplY3QuYXNzaWduKGEse29ubG9hZDpzLG9uZXJyb3I6cyxzcmM6ZX0pfSkpfXZhciB5dD17YWRkU3R5bGVIb29rOmZ1bmN0aW9uKCl7YmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuc2VsZWN0b3JzLmNvbnRhaW5lci5yZXBsYWNlKFwiLlwiLFwiXCIpLCEwKSxiZSh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnVpU3VwcG9ydGVkLHRoaXMuc3VwcG9ydGVkLnVpKX0sdG9nZ2xlTmF0aXZlQ29udHJvbHM6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2UmJnRoaXMuaXNIVE1MNT90aGlzLm1lZGlhLnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsXCJcIik6dGhpcy5tZWRpYS5yZW1vdmVBdHRyaWJ1dGUoXCJjb250cm9sc1wiKX0sYnVpbGQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMubGlzdGVuZXJzLm1lZGlhKCksIXRoaXMuc3VwcG9ydGVkLnVpKXJldHVybiB0aGlzLmRlYnVnLndhcm4oXCJCYXNpYyBzdXBwb3J0IG9ubHkgZm9yIFwiLmNvbmNhdCh0aGlzLnByb3ZpZGVyLFwiIFwiKS5jb25jYXQodGhpcy50eXBlKSksdm9pZCB5dC50b2dnbGVOYXRpdmVDb250cm9scy5jYWxsKHRoaXMsITApO0codGhpcy5lbGVtZW50cy5jb250cm9scyl8fChudC5pbmplY3QuY2FsbCh0aGlzKSx0aGlzLmxpc3RlbmVycy5jb250cm9scygpKSx5dC50b2dnbGVOYXRpdmVDb250cm9scy5jYWxsKHRoaXMpLHRoaXMuaXNIVE1MNSYmcnQuc2V0dXAuY2FsbCh0aGlzKSx0aGlzLnZvbHVtZT1udWxsLHRoaXMubXV0ZWQ9bnVsbCx0aGlzLmxvb3A9bnVsbCx0aGlzLnF1YWxpdHk9bnVsbCx0aGlzLnNwZWVkPW51bGwsbnQudXBkYXRlVm9sdW1lLmNhbGwodGhpcyksbnQudGltZVVwZGF0ZS5jYWxsKHRoaXMpLHl0LmNoZWNrUGxheWluZy5jYWxsKHRoaXMpLGJlKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucGlwLnN1cHBvcnRlZCxFZS5waXAmJnRoaXMuaXNIVE1MNSYmdGhpcy5pc1ZpZGVvKSxiZSh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmFpcnBsYXkuc3VwcG9ydGVkLEVlLmFpcnBsYXkmJnRoaXMuaXNIVE1MNSksYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5pc0lvcyxvZS5pc0lvcyksYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5pc1RvdWNoLHRoaXMudG91Y2gpLHRoaXMucmVhZHk9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtPZS5jYWxsKGUsZS5tZWRpYSxcInJlYWR5XCIpfSksMCkseXQuc2V0VGl0bGUuY2FsbCh0aGlzKSx0aGlzLnBvc3RlciYmeXQuc2V0UG9zdGVyLmNhbGwodGhpcyx0aGlzLnBvc3RlciwhMSkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpLHRoaXMuY29uZmlnLmR1cmF0aW9uJiZudC5kdXJhdGlvblVwZGF0ZS5jYWxsKHRoaXMpfSxzZXRUaXRsZTpmdW5jdGlvbigpe3ZhciBlPVhlKFwicGxheVwiLHRoaXMuY29uZmlnKTtpZihZKHRoaXMuY29uZmlnLnRpdGxlKSYmIWFlKHRoaXMuY29uZmlnLnRpdGxlKSYmKGUrPVwiLCBcIi5jb25jYXQodGhpcy5jb25maWcudGl0bGUpKSxBcnJheS5mcm9tKHRoaXMuZWxlbWVudHMuYnV0dG9ucy5wbGF5fHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsZSl9KSksdGhpcy5pc0VtYmVkKXt2YXIgdD1DZS5jYWxsKHRoaXMsXCJpZnJhbWVcIik7aWYoIUcodCkpcmV0dXJuO3ZhciBpPWFlKHRoaXMuY29uZmlnLnRpdGxlKT9cInZpZGVvXCI6dGhpcy5jb25maWcudGl0bGUsbj1YZShcImZyYW1lVGl0bGVcIix0aGlzLmNvbmZpZyk7dC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLG4ucmVwbGFjZShcInt0aXRsZX1cIixpKSl9fSx0b2dnbGVQb3N0ZXI6ZnVuY3Rpb24oZSl7YmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wb3N0ZXJFbmFibGVkLGUpfSxzZXRQb3N0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07cmV0dXJuIGkmJnRoaXMucG9zdGVyP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlBvc3RlciBhbHJlYWR5IHNldFwiKSk6KHRoaXMubWVkaWEuc2V0QXR0cmlidXRlKFwiZGF0YS1wb3N0ZXJcIixlKSxqZS5jYWxsKHRoaXMpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGd0KGUpfSkpLmNhdGNoKChmdW5jdGlvbihpKXt0aHJvdyBlPT09dC5wb3N0ZXImJnl0LnRvZ2dsZVBvc3Rlci5jYWxsKHQsITEpLGl9KSkudGhlbigoZnVuY3Rpb24oKXtpZihlIT09dC5wb3N0ZXIpdGhyb3cgbmV3IEVycm9yKFwic2V0UG9zdGVyIGNhbmNlbGxlZCBieSBsYXRlciBjYWxsIHRvIHNldFBvc3RlclwiKX0pKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBPYmplY3QuYXNzaWduKHQuZWxlbWVudHMucG9zdGVyLnN0eWxlLHtiYWNrZ3JvdW5kSW1hZ2U6XCJ1cmwoJ1wiLmNvbmNhdChlLFwiJylcIiksYmFja2dyb3VuZFNpemU6XCJcIn0pLHl0LnRvZ2dsZVBvc3Rlci5jYWxsKHQsITApLGV9KSkpfSxjaGVja1BsYXlpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztiZSh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnBsYXlpbmcsdGhpcy5wbGF5aW5nKSxiZSh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnBhdXNlZCx0aGlzLnBhdXNlZCksYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5zdG9wcGVkLHRoaXMuc3RvcHBlZCksQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMucGxheXx8W10pLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5hc3NpZ24oZSx7cHJlc3NlZDp0LnBsYXlpbmd9KSxlLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixYZSh0LnBsYXlpbmc/XCJwYXVzZVwiOlwicGxheVwiLHQuY29uZmlnKSl9KSksWihlKSYmXCJ0aW1ldXBkYXRlXCI9PT1lLnR5cGV8fHl0LnRvZ2dsZUNvbnRyb2xzLmNhbGwodGhpcyl9LGNoZWNrTG9hZGluZzpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMubG9hZGluZz1bXCJzdGFsbGVkXCIsXCJ3YWl0aW5nXCJdLmluY2x1ZGVzKGUudHlwZSksY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmxvYWRpbmcpLHRoaXMudGltZXJzLmxvYWRpbmc9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtiZSh0LmVsZW1lbnRzLmNvbnRhaW5lcix0LmNvbmZpZy5jbGFzc05hbWVzLmxvYWRpbmcsdC5sb2FkaW5nKSx5dC50b2dnbGVDb250cm9scy5jYWxsKHQpfSksdGhpcy5sb2FkaW5nPzI1MDowKX0sdG9nZ2xlQ29udHJvbHM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50cy5jb250cm9scztpZih0JiZ0aGlzLmNvbmZpZy5oaWRlQ29udHJvbHMpe3ZhciBpPXRoaXMudG91Y2gmJnRoaXMubGFzdFNlZWtUaW1lKzJlMz5EYXRlLm5vdygpO3RoaXMudG9nZ2xlQ29udHJvbHMoQm9vbGVhbihlfHx0aGlzLmxvYWRpbmd8fHRoaXMucGF1c2VkfHx0LnByZXNzZWR8fHQuaG92ZXJ8fGkpKX19LG1pZ3JhdGVTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO09iamVjdC52YWx1ZXMocyh7fSx0aGlzLm1lZGlhLnN0eWxlKSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hYWUoZSkmJmUuc3RhcnRzV2l0aChcIi0tcGx5clwiKX0pKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLmVsZW1lbnRzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eSh0LGUubWVkaWEuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSh0KSksZS5tZWRpYS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSh0KX0pKSxhZSh0aGlzLm1lZGlhLnN0eWxlKSYmdGhpcy5tZWRpYS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKX19LHZ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChpKXtlKHRoaXMsdCksdGhpcy5wbGF5ZXI9aSx0aGlzLmxhc3RLZXk9bnVsbCx0aGlzLmZvY3VzVGltZXI9bnVsbCx0aGlzLmxhc3RLZXlEb3duPW51bGwsdGhpcy5oYW5kbGVLZXk9dGhpcy5oYW5kbGVLZXkuYmluZCh0aGlzKSx0aGlzLnRvZ2dsZU1lbnU9dGhpcy50b2dnbGVNZW51LmJpbmQodGhpcyksdGhpcy5zZXRUYWJGb2N1cz10aGlzLnNldFRhYkZvY3VzLmJpbmQodGhpcyksdGhpcy5maXJzdFRvdWNoPXRoaXMuZmlyc3RUb3VjaC5iaW5kKHRoaXMpfXJldHVybiBpKHQsW3trZXk6XCJoYW5kbGVLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnBsYXllcixpPXQuZWxlbWVudHMsbj1lLmtleUNvZGU/ZS5rZXlDb2RlOmUud2hpY2gsYT1cImtleWRvd25cIj09PWUudHlwZSxzPWEmJm49PT10aGlzLmxhc3RLZXk7aWYoIShlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLm1ldGFLZXl8fGUuc2hpZnRLZXkpJiZLKG4pKXtpZihhKXt2YXIgcj1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2lmKEcocikpe3ZhciBvPXQuY29uZmlnLnNlbGVjdG9ycy5lZGl0YWJsZTtpZihyIT09aS5pbnB1dHMuc2VlayYma2UocixvKSlyZXR1cm47aWYoMzI9PT1lLndoaWNoJiZrZShyLCdidXR0b24sIFtyb2xlXj1cIm1lbnVpdGVtXCJdJykpcmV0dXJufXN3aXRjaChbMzIsMzcsMzgsMzksNDAsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTYsNTcsNjcsNzAsNzMsNzUsNzYsNzcsNzldLmluY2x1ZGVzKG4pJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpLG4pe2Nhc2UgNDg6Y2FzZSA0OTpjYXNlIDUwOmNhc2UgNTE6Y2FzZSA1MjpjYXNlIDUzOmNhc2UgNTQ6Y2FzZSA1NTpjYXNlIDU2OmNhc2UgNTc6c3x8KHQuY3VycmVudFRpbWU9dC5kdXJhdGlvbi8xMCoobi00OCkpO2JyZWFrO2Nhc2UgMzI6Y2FzZSA3NTpzfHxxZSh0LnRvZ2dsZVBsYXkoKSk7YnJlYWs7Y2FzZSAzODp0LmluY3JlYXNlVm9sdW1lKC4xKTticmVhaztjYXNlIDQwOnQuZGVjcmVhc2VWb2x1bWUoLjEpO2JyZWFrO2Nhc2UgNzc6c3x8KHQubXV0ZWQ9IXQubXV0ZWQpO2JyZWFrO2Nhc2UgMzk6dC5mb3J3YXJkKCk7YnJlYWs7Y2FzZSAzNzp0LnJld2luZCgpO2JyZWFrO2Nhc2UgNzA6dC5mdWxsc2NyZWVuLnRvZ2dsZSgpO2JyZWFrO2Nhc2UgNjc6c3x8dC50b2dnbGVDYXB0aW9ucygpO2JyZWFrO2Nhc2UgNzY6dC5sb29wPSF0Lmxvb3B9Mjc9PT1uJiYhdC5mdWxsc2NyZWVuLnVzaW5nTmF0aXZlJiZ0LmZ1bGxzY3JlZW4uYWN0aXZlJiZ0LmZ1bGxzY3JlZW4udG9nZ2xlKCksdGhpcy5sYXN0S2V5PW59ZWxzZSB0aGlzLmxhc3RLZXk9bnVsbH19fSx7a2V5OlwidG9nZ2xlTWVudVwiLHZhbHVlOmZ1bmN0aW9uKGUpe250LnRvZ2dsZU1lbnUuY2FsbCh0aGlzLnBsYXllcixlKX19LHtrZXk6XCJmaXJzdFRvdWNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBsYXllcix0PWUuZWxlbWVudHM7ZS50b3VjaD0hMCxiZSh0LmNvbnRhaW5lcixlLmNvbmZpZy5jbGFzc05hbWVzLmlzVG91Y2gsITApfX0se2tleTpcInNldFRhYkZvY3VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wbGF5ZXIsaT10LmVsZW1lbnRzO2lmKGNsZWFyVGltZW91dCh0aGlzLmZvY3VzVGltZXIpLFwia2V5ZG93blwiIT09ZS50eXBlfHw5PT09ZS53aGljaCl7XCJrZXlkb3duXCI9PT1lLnR5cGUmJih0aGlzLmxhc3RLZXlEb3duPWUudGltZVN0YW1wKTt2YXIgbixhPWUudGltZVN0YW1wLXRoaXMubGFzdEtleURvd248PTIwO2lmKFwiZm9jdXNcIiE9PWUudHlwZXx8YSluPXQuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXMsYmUoVGUuY2FsbCh0LFwiLlwiLmNvbmNhdChuKSksbiwhMSksXCJmb2N1c291dFwiIT09ZS50eXBlJiYodGhpcy5mb2N1c1RpbWVyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpLmNvbnRhaW5lci5jb250YWlucyhlKSYmYmUoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCx0LmNvbmZpZy5jbGFzc05hbWVzLnRhYkZvY3VzLCEwKX0pLDEwKSl9fX0se2tleTpcImdsb2JhbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSx0PXRoaXMucGxheWVyO3QuY29uZmlnLmtleWJvYXJkLmdsb2JhbCYmTWUuY2FsbCh0LHdpbmRvdyxcImtleWRvd24ga2V5dXBcIix0aGlzLmhhbmRsZUtleSxlLCExKSxNZS5jYWxsKHQsZG9jdW1lbnQuYm9keSxcImNsaWNrXCIsdGhpcy50b2dnbGVNZW51LGUpLExlLmNhbGwodCxkb2N1bWVudC5ib2R5LFwidG91Y2hzdGFydFwiLHRoaXMuZmlyc3RUb3VjaCksTWUuY2FsbCh0LGRvY3VtZW50LmJvZHksXCJrZXlkb3duIGZvY3VzIGJsdXIgZm9jdXNvdXRcIix0aGlzLnNldFRhYkZvY3VzLGUsITEsITApfX0se2tleTpcImNvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wbGF5ZXIsdD1lLmNvbmZpZyxpPWUuZWxlbWVudHMsbj1lLnRpbWVyczshdC5rZXlib2FyZC5nbG9iYWwmJnQua2V5Ym9hcmQuZm9jdXNlZCYmeGUuY2FsbChlLGkuY29udGFpbmVyLFwia2V5ZG93biBrZXl1cFwiLHRoaXMuaGFuZGxlS2V5LCExKSx4ZS5jYWxsKGUsaS5jb250YWluZXIsXCJtb3VzZW1vdmUgbW91c2VsZWF2ZSB0b3VjaHN0YXJ0IHRvdWNobW92ZSBlbnRlcmZ1bGxzY3JlZW4gZXhpdGZ1bGxzY3JlZW5cIiwoZnVuY3Rpb24odCl7dmFyIGE9aS5jb250cm9sczthJiZcImVudGVyZnVsbHNjcmVlblwiPT09dC50eXBlJiYoYS5wcmVzc2VkPSExLGEuaG92ZXI9ITEpO3ZhciBzPTA7W1widG91Y2hzdGFydFwiLFwidG91Y2htb3ZlXCIsXCJtb3VzZW1vdmVcIl0uaW5jbHVkZXModC50eXBlKSYmKHl0LnRvZ2dsZUNvbnRyb2xzLmNhbGwoZSwhMCkscz1lLnRvdWNoPzNlMzoyZTMpLGNsZWFyVGltZW91dChuLmNvbnRyb2xzKSxuLmNvbnRyb2xzPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHl0LnRvZ2dsZUNvbnRyb2xzLmNhbGwoZSwhMSl9KSxzKX0pKTt2YXIgYT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gUmUuY2FsbChlKTt2YXIgbj1pLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPW4ud2lkdGgscz1uLmhlaWdodDtyZXR1cm4gUmUuY2FsbChlLFwiXCIuY29uY2F0KGEsXCI6XCIpLmNvbmNhdChzKSl9LHM9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQobi5yZXNpemVkKSxuLnJlc2l6ZWQ9c2V0VGltZW91dChhLDUwKX07eGUuY2FsbChlLGkuY29udGFpbmVyLFwiZW50ZXJmdWxsc2NyZWVuIGV4aXRmdWxsc2NyZWVuXCIsKGZ1bmN0aW9uKHQpe3ZhciBuPWUuZnVsbHNjcmVlbixyPW4udGFyZ2V0LGw9bi51c2luZ05hdGl2ZTtpZihyPT09aS5jb250YWluZXImJihlLmlzRW1iZWR8fCFhZShlLmNvbmZpZy5yYXRpbykpKXt2YXIgYz1cImVudGVyZnVsbHNjcmVlblwiPT09dC50eXBlLHU9YShjKTt1LnBhZGRpbmc7IWZ1bmN0aW9uKHQsaSxuKXtpZihlLmlzVmltZW8mJiFlLmNvbmZpZy52aW1lby5wcmVtaXVtKXt2YXIgYT1lLmVsZW1lbnRzLndyYXBwZXIuZmlyc3RDaGlsZCxzPW8odCwyKVsxXSxyPW8oRmUuY2FsbChlKSwyKSxsPXJbMF0sYz1yWzFdO2Euc3R5bGUubWF4V2lkdGg9bj9cIlwiLmNvbmNhdChzL2MqbCxcInB4XCIpOm51bGwsYS5zdHlsZS5tYXJnaW49bj9cIjAgYXV0b1wiOm51bGx9fSh1LnJhdGlvLDAsYyksbHx8KGM/eGUuY2FsbChlLHdpbmRvdyxcInJlc2l6ZVwiLHMpOkllLmNhbGwoZSx3aW5kb3csXCJyZXNpemVcIixzKSl9fSkpfX0se2tleTpcIm1lZGlhXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wbGF5ZXIsaT10LmVsZW1lbnRzO2lmKHhlLmNhbGwodCx0Lm1lZGlhLFwidGltZXVwZGF0ZSBzZWVraW5nIHNlZWtlZFwiLChmdW5jdGlvbihlKXtyZXR1cm4gbnQudGltZVVwZGF0ZS5jYWxsKHQsZSl9KSkseGUuY2FsbCh0LHQubWVkaWEsXCJkdXJhdGlvbmNoYW5nZSBsb2FkZWRkYXRhIGxvYWRlZG1ldGFkYXRhXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBudC5kdXJhdGlvblVwZGF0ZS5jYWxsKHQsZSl9KSkseGUuY2FsbCh0LHQubWVkaWEsXCJlbmRlZFwiLChmdW5jdGlvbigpe3QuaXNIVE1MNSYmdC5pc1ZpZGVvJiZ0LmNvbmZpZy5yZXNldE9uRW5kJiYodC5yZXN0YXJ0KCksdC5wYXVzZSgpKX0pKSx4ZS5jYWxsKHQsdC5tZWRpYSxcInByb2dyZXNzIHBsYXlpbmcgc2Vla2luZyBzZWVrZWRcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIG50LnVwZGF0ZVByb2dyZXNzLmNhbGwodCxlKX0pKSx4ZS5jYWxsKHQsdC5tZWRpYSxcInZvbHVtZWNoYW5nZVwiLChmdW5jdGlvbihlKXtyZXR1cm4gbnQudXBkYXRlVm9sdW1lLmNhbGwodCxlKX0pKSx4ZS5jYWxsKHQsdC5tZWRpYSxcInBsYXlpbmcgcGxheSBwYXVzZSBlbmRlZCBlbXB0aWVkIHRpbWV1cGRhdGVcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIHl0LmNoZWNrUGxheWluZy5jYWxsKHQsZSl9KSkseGUuY2FsbCh0LHQubWVkaWEsXCJ3YWl0aW5nIGNhbnBsYXkgc2Vla2VkIHBsYXlpbmdcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIHl0LmNoZWNrTG9hZGluZy5jYWxsKHQsZSl9KSksdC5zdXBwb3J0ZWQudWkmJnQuY29uZmlnLmNsaWNrVG9QbGF5JiYhdC5pc0F1ZGlvKXt2YXIgbj1DZS5jYWxsKHQsXCIuXCIuY29uY2F0KHQuY29uZmlnLmNsYXNzTmFtZXMudmlkZW8pKTtpZighRyhuKSlyZXR1cm47eGUuY2FsbCh0LGkuY29udGFpbmVyLFwiY2xpY2tcIiwoZnVuY3Rpb24oYSl7KFtpLmNvbnRhaW5lcixuXS5pbmNsdWRlcyhhLnRhcmdldCl8fG4uY29udGFpbnMoYS50YXJnZXQpKSYmKHQudG91Y2gmJnQuY29uZmlnLmhpZGVDb250cm9sc3x8KHQuZW5kZWQ/KGUucHJveHkoYSx0LnJlc3RhcnQsXCJyZXN0YXJ0XCIpLGUucHJveHkoYSwoZnVuY3Rpb24oKXtxZSh0LnBsYXkoKSl9KSxcInBsYXlcIikpOmUucHJveHkoYSwoZnVuY3Rpb24oKXtxZSh0LnRvZ2dsZVBsYXkoKSl9KSxcInBsYXlcIikpKX0pKX10LnN1cHBvcnRlZC51aSYmdC5jb25maWcuZGlzYWJsZUNvbnRleHRNZW51JiZ4ZS5jYWxsKHQsaS53cmFwcGVyLFwiY29udGV4dG1lbnVcIiwoZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSksITEpLHhlLmNhbGwodCx0Lm1lZGlhLFwidm9sdW1lY2hhbmdlXCIsKGZ1bmN0aW9uKCl7dC5zdG9yYWdlLnNldCh7dm9sdW1lOnQudm9sdW1lLG11dGVkOnQubXV0ZWR9KX0pKSx4ZS5jYWxsKHQsdC5tZWRpYSxcInJhdGVjaGFuZ2VcIiwoZnVuY3Rpb24oKXtudC51cGRhdGVTZXR0aW5nLmNhbGwodCxcInNwZWVkXCIpLHQuc3RvcmFnZS5zZXQoe3NwZWVkOnQuc3BlZWR9KX0pKSx4ZS5jYWxsKHQsdC5tZWRpYSxcInF1YWxpdHljaGFuZ2VcIiwoZnVuY3Rpb24oZSl7bnQudXBkYXRlU2V0dGluZy5jYWxsKHQsXCJxdWFsaXR5XCIsbnVsbCxlLmRldGFpbC5xdWFsaXR5KX0pKSx4ZS5jYWxsKHQsdC5tZWRpYSxcInJlYWR5IHF1YWxpdHljaGFuZ2VcIiwoZnVuY3Rpb24oKXtudC5zZXREb3dubG9hZFVybC5jYWxsKHQpfSkpO3ZhciBhPXQuY29uZmlnLmV2ZW50cy5jb25jYXQoW1wia2V5dXBcIixcImtleWRvd25cIl0pLmpvaW4oXCIgXCIpO3hlLmNhbGwodCx0Lm1lZGlhLGEsKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGV0YWlsLGE9dm9pZCAwPT09bj97fTpuO1wiZXJyb3JcIj09PWUudHlwZSYmKGE9dC5tZWRpYS5lcnJvciksT2UuY2FsbCh0LGkuY29udGFpbmVyLGUudHlwZSwhMCxhKX0pKX19LHtrZXk6XCJwcm94eVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj10aGlzLnBsYXllcixhPW4uY29uZmlnLmxpc3RlbmVyc1tpXSxzPSEwO1goYSkmJihzPWEuY2FsbChuLGUpKSwhMSE9PXMmJlgodCkmJnQuY2FsbChuLGUpfX0se2tleTpcImJpbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQsaSxuKXt2YXIgYT10aGlzLHM9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxyPXRoaXMucGxheWVyLG89ci5jb25maWcubGlzdGVuZXJzW25dLGw9WChvKTt4ZS5jYWxsKHIsZSx0LChmdW5jdGlvbihlKXtyZXR1cm4gYS5wcm94eShlLGksbil9KSxzJiYhbCl9fSx7a2V5OlwiY29udHJvbHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnBsYXllcixpPXQuZWxlbWVudHMsbj1vZS5pc0lFP1wiY2hhbmdlXCI6XCJpbnB1dFwiO2lmKGkuYnV0dG9ucy5wbGF5JiZBcnJheS5mcm9tKGkuYnV0dG9ucy5wbGF5KS5mb3JFYWNoKChmdW5jdGlvbihpKXtlLmJpbmQoaSxcImNsaWNrXCIsKGZ1bmN0aW9uKCl7cWUodC50b2dnbGVQbGF5KCkpfSksXCJwbGF5XCIpfSkpLHRoaXMuYmluZChpLmJ1dHRvbnMucmVzdGFydCxcImNsaWNrXCIsdC5yZXN0YXJ0LFwicmVzdGFydFwiKSx0aGlzLmJpbmQoaS5idXR0b25zLnJld2luZCxcImNsaWNrXCIsdC5yZXdpbmQsXCJyZXdpbmRcIiksdGhpcy5iaW5kKGkuYnV0dG9ucy5mYXN0Rm9yd2FyZCxcImNsaWNrXCIsdC5mb3J3YXJkLFwiZmFzdEZvcndhcmRcIiksdGhpcy5iaW5kKGkuYnV0dG9ucy5tdXRlLFwiY2xpY2tcIiwoZnVuY3Rpb24oKXt0Lm11dGVkPSF0Lm11dGVkfSksXCJtdXRlXCIpLHRoaXMuYmluZChpLmJ1dHRvbnMuY2FwdGlvbnMsXCJjbGlja1wiLChmdW5jdGlvbigpe3JldHVybiB0LnRvZ2dsZUNhcHRpb25zKCl9KSksdGhpcy5iaW5kKGkuYnV0dG9ucy5kb3dubG9hZCxcImNsaWNrXCIsKGZ1bmN0aW9uKCl7T2UuY2FsbCh0LHQubWVkaWEsXCJkb3dubG9hZFwiKX0pLFwiZG93bmxvYWRcIiksdGhpcy5iaW5kKGkuYnV0dG9ucy5mdWxsc2NyZWVuLFwiY2xpY2tcIiwoZnVuY3Rpb24oKXt0LmZ1bGxzY3JlZW4udG9nZ2xlKCl9KSxcImZ1bGxzY3JlZW5cIiksdGhpcy5iaW5kKGkuYnV0dG9ucy5waXAsXCJjbGlja1wiLChmdW5jdGlvbigpe3QucGlwPVwidG9nZ2xlXCJ9KSxcInBpcFwiKSx0aGlzLmJpbmQoaS5idXR0b25zLmFpcnBsYXksXCJjbGlja1wiLHQuYWlycGxheSxcImFpcnBsYXlcIiksdGhpcy5iaW5kKGkuYnV0dG9ucy5zZXR0aW5ncyxcImNsaWNrXCIsKGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLG50LnRvZ2dsZU1lbnUuY2FsbCh0LGUpfSksbnVsbCwhMSksdGhpcy5iaW5kKGkuYnV0dG9ucy5zZXR0aW5ncyxcImtleXVwXCIsKGZ1bmN0aW9uKGUpe3ZhciBpPWUud2hpY2g7WzEzLDMyXS5pbmNsdWRlcyhpKSYmKDEzIT09aT8oZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksbnQudG9nZ2xlTWVudS5jYWxsKHQsZSkpOm50LmZvY3VzRmlyc3RNZW51SXRlbS5jYWxsKHQsbnVsbCwhMCkpfSksbnVsbCwhMSksdGhpcy5iaW5kKGkuc2V0dGluZ3MubWVudSxcImtleWRvd25cIiwoZnVuY3Rpb24oZSl7Mjc9PT1lLndoaWNoJiZudC50b2dnbGVNZW51LmNhbGwodCxlKX0pKSx0aGlzLmJpbmQoaS5pbnB1dHMuc2VlayxcIm1vdXNlZG93biBtb3VzZW1vdmVcIiwoZnVuY3Rpb24oZSl7dmFyIHQ9aS5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPTEwMC90LndpZHRoKihlLnBhZ2VYLXQubGVmdCk7ZS5jdXJyZW50VGFyZ2V0LnNldEF0dHJpYnV0ZShcInNlZWstdmFsdWVcIixuKX0pKSx0aGlzLmJpbmQoaS5pbnB1dHMuc2VlayxcIm1vdXNlZG93biBtb3VzZXVwIGtleWRvd24ga2V5dXAgdG91Y2hzdGFydCB0b3VjaGVuZFwiLChmdW5jdGlvbihlKXt2YXIgaT1lLmN1cnJlbnRUYXJnZXQsbj1lLmtleUNvZGU/ZS5rZXlDb2RlOmUud2hpY2g7aWYoIWVlKGUpfHwzOT09PW58fDM3PT09bil7dC5sYXN0U2Vla1RpbWU9RGF0ZS5ub3coKTt2YXIgYT1pLmhhc0F0dHJpYnV0ZShcInBsYXktb24tc2Vla2VkXCIpLHM9W1wibW91c2V1cFwiLFwidG91Y2hlbmRcIixcImtleXVwXCJdLmluY2x1ZGVzKGUudHlwZSk7YSYmcz8oaS5yZW1vdmVBdHRyaWJ1dGUoXCJwbGF5LW9uLXNlZWtlZFwiKSxxZSh0LnBsYXkoKSkpOiFzJiZ0LnBsYXlpbmcmJihpLnNldEF0dHJpYnV0ZShcInBsYXktb24tc2Vla2VkXCIsXCJcIiksdC5wYXVzZSgpKX19KSksb2UuaXNJb3Mpe3ZhciBhPVRlLmNhbGwodCwnaW5wdXRbdHlwZT1cInJhbmdlXCJdJyk7QXJyYXkuZnJvbShhKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gZS5iaW5kKHQsbiwoZnVuY3Rpb24oZSl7cmV0dXJuIHJlKGUudGFyZ2V0KX0pKX0pKX10aGlzLmJpbmQoaS5pbnB1dHMuc2VlayxuLChmdW5jdGlvbihlKXt2YXIgaT1lLmN1cnJlbnRUYXJnZXQsbj1pLmdldEF0dHJpYnV0ZShcInNlZWstdmFsdWVcIik7YWUobikmJihuPWkudmFsdWUpLGkucmVtb3ZlQXR0cmlidXRlKFwic2Vlay12YWx1ZVwiKSx0LmN1cnJlbnRUaW1lPW4vaS5tYXgqdC5kdXJhdGlvbn0pLFwic2Vla1wiKSx0aGlzLmJpbmQoaS5wcm9ncmVzcyxcIm1vdXNlZW50ZXIgbW91c2VsZWF2ZSBtb3VzZW1vdmVcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIG50LnVwZGF0ZVNlZWtUb29sdGlwLmNhbGwodCxlKX0pKSx0aGlzLmJpbmQoaS5wcm9ncmVzcyxcIm1vdXNlbW92ZSB0b3VjaG1vdmVcIiwoZnVuY3Rpb24oZSl7dmFyIGk9dC5wcmV2aWV3VGh1bWJuYWlscztpJiZpLmxvYWRlZCYmaS5zdGFydE1vdmUoZSl9KSksdGhpcy5iaW5kKGkucHJvZ3Jlc3MsXCJtb3VzZWxlYXZlIHRvdWNoZW5kIGNsaWNrXCIsKGZ1bmN0aW9uKCl7dmFyIGU9dC5wcmV2aWV3VGh1bWJuYWlscztlJiZlLmxvYWRlZCYmZS5lbmRNb3ZlKCExLCEwKX0pKSx0aGlzLmJpbmQoaS5wcm9ncmVzcyxcIm1vdXNlZG93biB0b3VjaHN0YXJ0XCIsKGZ1bmN0aW9uKGUpe3ZhciBpPXQucHJldmlld1RodW1ibmFpbHM7aSYmaS5sb2FkZWQmJmkuc3RhcnRTY3J1YmJpbmcoZSl9KSksdGhpcy5iaW5kKGkucHJvZ3Jlc3MsXCJtb3VzZXVwIHRvdWNoZW5kXCIsKGZ1bmN0aW9uKGUpe3ZhciBpPXQucHJldmlld1RodW1ibmFpbHM7aSYmaS5sb2FkZWQmJmkuZW5kU2NydWJiaW5nKGUpfSkpLG9lLmlzV2Via2l0JiZBcnJheS5mcm9tKFRlLmNhbGwodCwnaW5wdXRbdHlwZT1cInJhbmdlXCJdJykpLmZvckVhY2goKGZ1bmN0aW9uKGkpe2UuYmluZChpLFwiaW5wdXRcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIG50LnVwZGF0ZVJhbmdlRmlsbC5jYWxsKHQsZS50YXJnZXQpfSkpfSkpLHQuY29uZmlnLnRvZ2dsZUludmVydCYmIUcoaS5kaXNwbGF5LmR1cmF0aW9uKSYmdGhpcy5iaW5kKGkuZGlzcGxheS5jdXJyZW50VGltZSxcImNsaWNrXCIsKGZ1bmN0aW9uKCl7MCE9PXQuY3VycmVudFRpbWUmJih0LmNvbmZpZy5pbnZlcnRUaW1lPSF0LmNvbmZpZy5pbnZlcnRUaW1lLG50LnRpbWVVcGRhdGUuY2FsbCh0KSl9KSksdGhpcy5iaW5kKGkuaW5wdXRzLnZvbHVtZSxuLChmdW5jdGlvbihlKXt0LnZvbHVtZT1lLnRhcmdldC52YWx1ZX0pLFwidm9sdW1lXCIpLHRoaXMuYmluZChpLmNvbnRyb2xzLFwibW91c2VlbnRlciBtb3VzZWxlYXZlXCIsKGZ1bmN0aW9uKGUpe2kuY29udHJvbHMuaG92ZXI9IXQudG91Y2gmJlwibW91c2VlbnRlclwiPT09ZS50eXBlfSkpLGkuZnVsbHNjcmVlbiYmQXJyYXkuZnJvbShpLmZ1bGxzY3JlZW4uY2hpbGRyZW4pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIWUuY29udGFpbnMoaS5jb250YWluZXIpfSkpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2UuYmluZChuLFwibW91c2VlbnRlciBtb3VzZWxlYXZlXCIsKGZ1bmN0aW9uKGUpe2kuY29udHJvbHMuaG92ZXI9IXQudG91Y2gmJlwibW91c2VlbnRlclwiPT09ZS50eXBlfSkpfSkpLHRoaXMuYmluZChpLmNvbnRyb2xzLFwibW91c2Vkb3duIG1vdXNldXAgdG91Y2hzdGFydCB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiLChmdW5jdGlvbihlKXtpLmNvbnRyb2xzLnByZXNzZWQ9W1wibW91c2Vkb3duXCIsXCJ0b3VjaHN0YXJ0XCJdLmluY2x1ZGVzKGUudHlwZSl9KSksdGhpcy5iaW5kKGkuY29udHJvbHMsXCJmb2N1c2luXCIsKGZ1bmN0aW9uKCl7dmFyIG49dC5jb25maWcsYT10LnRpbWVycztiZShpLmNvbnRyb2xzLG4uY2xhc3NOYW1lcy5ub1RyYW5zaXRpb24sITApLHl0LnRvZ2dsZUNvbnRyb2xzLmNhbGwodCwhMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtiZShpLmNvbnRyb2xzLG4uY2xhc3NOYW1lcy5ub1RyYW5zaXRpb24sITEpfSksMCk7dmFyIHM9ZS50b3VjaD8zZTM6NGUzO2NsZWFyVGltZW91dChhLmNvbnRyb2xzKSxhLmNvbnRyb2xzPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHl0LnRvZ2dsZUNvbnRyb2xzLmNhbGwodCwhMSl9KSxzKX0pKSx0aGlzLmJpbmQoaS5pbnB1dHMudm9sdW1lLFwid2hlZWxcIiwoZnVuY3Rpb24oZSl7dmFyIGk9ZS53ZWJraXREaXJlY3Rpb25JbnZlcnRlZEZyb21EZXZpY2Usbj1vKFtlLmRlbHRhWCwtZS5kZWx0YVldLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGk/LWU6ZX0pKSwyKSxhPW5bMF0scz1uWzFdLHI9TWF0aC5zaWduKE1hdGguYWJzKGEpPk1hdGguYWJzKHMpP2E6cyk7dC5pbmNyZWFzZVZvbHVtZShyLzUwKTt2YXIgbD10Lm1lZGlhLnZvbHVtZTsoMT09PXImJmw8MXx8LTE9PT1yJiZsPjApJiZlLnByZXZlbnREZWZhdWx0KCl9KSxcInZvbHVtZVwiLCExKX19XSksdH0oKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmO3ZhciBidD1mdW5jdGlvbihlLHQpe3JldHVybiBlKHQ9e2V4cG9ydHM6e319LHQuZXhwb3J0cyksdC5leHBvcnRzfSgoZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe30sdD17fSxpPXt9LG49e307ZnVuY3Rpb24gYShlLHQpe2lmKGUpe3ZhciBhPW5bZV07aWYoaVtlXT10LGEpZm9yKDthLmxlbmd0aDspYVswXShlLHQpLGEuc3BsaWNlKDAsMSl9fWZ1bmN0aW9uIHModCxpKXt0LmNhbGwmJih0PXtzdWNjZXNzOnR9KSxpLmxlbmd0aD8odC5lcnJvcnx8ZSkoaSk6KHQuc3VjY2Vzc3x8ZSkodCl9ZnVuY3Rpb24gcih0LGksbixhKXt2YXIgcyxvLGw9ZG9jdW1lbnQsYz1uLmFzeW5jLHU9KG4ubnVtUmV0cmllc3x8MCkrMSxkPW4uYmVmb3JlfHxlLGg9dC5yZXBsYWNlKC9bXFw/fCNdLiokLyxcIlwiKSxwPXQucmVwbGFjZSgvXihjc3N8aW1nKSEvLFwiXCIpO2E9YXx8MCwvKF5jc3MhfFxcLmNzcyQpLy50ZXN0KGgpPygobz1sLmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpKS5yZWw9XCJzdHlsZXNoZWV0XCIsby5ocmVmPXAsKHM9XCJoaWRlRm9jdXNcImluIG8pJiZvLnJlbExpc3QmJihzPTAsby5yZWw9XCJwcmVsb2FkXCIsby5hcz1cInN0eWxlXCIpKTovKF5pbWchfFxcLihwbmd8Z2lmfGpwZ3xzdmd8d2VicCkkKS8udGVzdChoKT8obz1sLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikpLnNyYz1wOigobz1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpLnNyYz10LG8uYXN5bmM9dm9pZCAwPT09Y3x8Yyksby5vbmxvYWQ9by5vbmVycm9yPW8ub25iZWZvcmVsb2FkPWZ1bmN0aW9uKGUpe3ZhciBsPWUudHlwZVswXTtpZihzKXRyeXtvLnNoZWV0LmNzc1RleHQubGVuZ3RofHwobD1cImVcIil9Y2F0Y2goZSl7MTghPWUuY29kZSYmKGw9XCJlXCIpfWlmKFwiZVwiPT1sKXtpZigoYSs9MSk8dSlyZXR1cm4gcih0LGksbixhKX1lbHNlIGlmKFwicHJlbG9hZFwiPT1vLnJlbCYmXCJzdHlsZVwiPT1vLmFzKXJldHVybiBvLnJlbD1cInN0eWxlc2hlZXRcIjtpKHQsbCxlLmRlZmF1bHRQcmV2ZW50ZWQpfSwhMSE9PWQodCxvKSYmbC5oZWFkLmFwcGVuZENoaWxkKG8pfWZ1bmN0aW9uIG8oZSxpLG4pe3ZhciBvLGw7aWYoaSYmaS50cmltJiYobz1pKSxsPShvP246aSl8fHt9LG8pe2lmKG8gaW4gdCl0aHJvd1wiTG9hZEpTXCI7dFtvXT0hMH1mdW5jdGlvbiBjKHQsaSl7IWZ1bmN0aW9uKGUsdCxpKXt2YXIgbixhLHM9KGU9ZS5wdXNoP2U6W2VdKS5sZW5ndGgsbz1zLGw9W107Zm9yKG49ZnVuY3Rpb24oZSxpLG4pe2lmKFwiZVwiPT1pJiZsLnB1c2goZSksXCJiXCI9PWkpe2lmKCFuKXJldHVybjtsLnB1c2goZSl9LS1zfHx0KGwpfSxhPTA7YTxvO2ErKylyKGVbYV0sbixpKX0oZSwoZnVuY3Rpb24oZSl7cyhsLGUpLHQmJnMoe3N1Y2Nlc3M6dCxlcnJvcjppfSxlKSxhKG8sZSl9KSxsKX1pZihsLnJldHVyblByb21pc2UpcmV0dXJuIG5ldyBQcm9taXNlKGMpO2MoKX1yZXR1cm4gby5yZWFkeT1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe2U9ZS5wdXNoP2U6W2VdO3ZhciBhLHMscixvPVtdLGw9ZS5sZW5ndGgsYz1sO2ZvcihhPWZ1bmN0aW9uKGUsaSl7aS5sZW5ndGgmJm8ucHVzaChlKSwtLWN8fHQobyl9O2wtLTspcz1lW2xdLChyPWlbc10pP2EocyxyKToobltzXT1uW3NdfHxbXSkucHVzaChhKX0oZSwoZnVuY3Rpb24oZSl7cyh0LGUpfSkpLG99LG8uZG9uZT1mdW5jdGlvbihlKXthKGUsW10pfSxvLnJlc2V0PWZ1bmN0aW9uKCl7dD17fSxpPXt9LG49e319LG8uaXNEZWZpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHR9LG99KCl9KSk7ZnVuY3Rpb24gd3QoZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LGkpe2J0KGUse3N1Y2Nlc3M6dCxlcnJvcjppfSl9KSl9ZnVuY3Rpb24ga3QoZSl7ZSYmIXRoaXMuZW1iZWQuaGFzUGxheWVkJiYodGhpcy5lbWJlZC5oYXNQbGF5ZWQ9ITApLHRoaXMubWVkaWEucGF1c2VkPT09ZSYmKHRoaXMubWVkaWEucGF1c2VkPSFlLE9lLmNhbGwodGhpcyx0aGlzLm1lZGlhLGU/XCJwbGF5XCI6XCJwYXVzZVwiKSl9dmFyIFR0PXtzZXR1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7YmUoZS5lbGVtZW50cy53cmFwcGVyLGUuY29uZmlnLmNsYXNzTmFtZXMuZW1iZWQsITApLGUub3B0aW9ucy5zcGVlZD1lLmNvbmZpZy5zcGVlZC5vcHRpb25zLFJlLmNhbGwoZSkseih3aW5kb3cuVmltZW8pP1R0LnJlYWR5LmNhbGwoZSk6d3QoZS5jb25maWcudXJscy52aW1lby5zZGspLnRoZW4oKGZ1bmN0aW9uKCl7VHQucmVhZHkuY2FsbChlKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5kZWJ1Zy53YXJuKFwiVmltZW8gU0RLIChwbGF5ZXIuanMpIGZhaWxlZCB0byBsb2FkXCIsdCl9KSl9LHJlYWR5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMsaT10LmNvbmZpZy52aW1lbyxuPWkucHJlbWl1bSxhPWkucmVmZXJyZXJQb2xpY3ksbD1yKGksW1wicHJlbWl1bVwiLFwicmVmZXJyZXJQb2xpY3lcIl0pO24mJk9iamVjdC5hc3NpZ24obCx7Y29udHJvbHM6ITEsc2lkZWRvY2s6ITF9KTt2YXIgYz1zdChzKHtsb29wOnQuY29uZmlnLmxvb3AuYWN0aXZlLGF1dG9wbGF5OnQuYXV0b3BsYXksbXV0ZWQ6dC5tdXRlZCxnZXN0dXJlOlwibWVkaWFcIixwbGF5c2lubGluZTohdGhpcy5jb25maWcuZnVsbHNjcmVlbi5pb3NOYXRpdmV9LGwpKSx1PXQubWVkaWEuZ2V0QXR0cmlidXRlKFwic3JjXCIpO2FlKHUpJiYodT10Lm1lZGlhLmdldEF0dHJpYnV0ZSh0LmNvbmZpZy5hdHRyaWJ1dGVzLmVtYmVkLmlkKSk7dmFyIGQsaD1hZShkPXUpP251bGw6SyhOdW1iZXIoZCkpP2Q6ZC5tYXRjaCgvXi4qKHZpbWVvLmNvbVxcL3x2aWRlb1xcLykoXFxkKykuKi8pP1JlZ0V4cC4kMjpkLHA9aGUoXCJpZnJhbWVcIiksbT1VZSh0LmNvbmZpZy51cmxzLnZpbWVvLmlmcmFtZSxoLGMpO3Auc2V0QXR0cmlidXRlKFwic3JjXCIsbSkscC5zZXRBdHRyaWJ1dGUoXCJhbGxvd2Z1bGxzY3JlZW5cIixcIlwiKSxwLnNldEF0dHJpYnV0ZShcImFsbG93XCIsXCJhdXRvcGxheSxmdWxsc2NyZWVuLHBpY3R1cmUtaW4tcGljdHVyZVwiKSxhZShhKXx8cC5zZXRBdHRyaWJ1dGUoXCJyZWZlcnJlclBvbGljeVwiLGEpO3ZhciBmPXQucG9zdGVyO2lmKG4pcC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBvc3RlclwiLGYpLHQubWVkaWE9Z2UocCx0Lm1lZGlhKTtlbHNle3ZhciBnPWhlKFwiZGl2XCIse2NsYXNzOnQuY29uZmlnLmNsYXNzTmFtZXMuZW1iZWRDb250YWluZXIsXCJkYXRhLXBvc3RlclwiOmZ9KTtnLmFwcGVuZENoaWxkKHApLHQubWVkaWE9Z2UoZyx0Lm1lZGlhKX1KZShVZSh0LmNvbmZpZy51cmxzLnZpbWVvLmFwaSxoKSxcImpzb25cIikudGhlbigoZnVuY3Rpb24oZSl7aWYoIWFlKGUpKXt2YXIgaT1uZXcgVVJMKGVbMF0udGh1bWJuYWlsX2xhcmdlKTtpLnBhdGhuYW1lPVwiXCIuY29uY2F0KGkucGF0aG5hbWUuc3BsaXQoXCJfXCIpWzBdLFwiLmpwZ1wiKSx5dC5zZXRQb3N0ZXIuY2FsbCh0LGkuaHJlZikuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpfX0pKSx0LmVtYmVkPW5ldyB3aW5kb3cuVmltZW8uUGxheWVyKHAse2F1dG9wYXVzZTp0LmNvbmZpZy5hdXRvcGF1c2UsbXV0ZWQ6dC5tdXRlZH0pLHQubWVkaWEucGF1c2VkPSEwLHQubWVkaWEuY3VycmVudFRpbWU9MCx0LnN1cHBvcnRlZC51aSYmdC5lbWJlZC5kaXNhYmxlVGV4dFRyYWNrKCksdC5tZWRpYS5wbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIGt0LmNhbGwodCwhMCksdC5lbWJlZC5wbGF5KCl9LHQubWVkaWEucGF1c2U9ZnVuY3Rpb24oKXtyZXR1cm4ga3QuY2FsbCh0LCExKSx0LmVtYmVkLnBhdXNlKCl9LHQubWVkaWEuc3RvcD1mdW5jdGlvbigpe3QucGF1c2UoKSx0LmN1cnJlbnRUaW1lPTB9O3ZhciB5PXQubWVkaWEuY3VycmVudFRpbWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQubWVkaWEsXCJjdXJyZW50VGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciBpPXQuZW1iZWQsbj10Lm1lZGlhLGE9dC5wYXVzZWQscz10LnZvbHVtZSxyPWEmJiFpLmhhc1BsYXllZDtuLnNlZWtpbmc9ITAsT2UuY2FsbCh0LG4sXCJzZWVraW5nXCIpLFByb21pc2UucmVzb2x2ZShyJiZpLnNldFZvbHVtZSgwKSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gaS5zZXRDdXJyZW50VGltZShlKX0pKS50aGVuKChmdW5jdGlvbigpe3JldHVybiByJiZpLnBhdXNlKCl9KSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gciYmaS5zZXRWb2x1bWUocyl9KSkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpfX0pO3ZhciB2PXQuY29uZmlnLnNwZWVkLnNlbGVjdGVkO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lm1lZGlhLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2fSxzZXQ6ZnVuY3Rpb24oZSl7dC5lbWJlZC5zZXRQbGF5YmFja1JhdGUoZSkudGhlbigoZnVuY3Rpb24oKXt2PWUsT2UuY2FsbCh0LHQubWVkaWEsXCJyYXRlY2hhbmdlXCIpfSkpLmNhdGNoKChmdW5jdGlvbigpe3Qub3B0aW9ucy5zcGVlZD1bMV19KSl9fSk7dmFyIGI9dC5jb25maWcudm9sdW1lO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lm1lZGlhLFwidm9sdW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBifSxzZXQ6ZnVuY3Rpb24oZSl7dC5lbWJlZC5zZXRWb2x1bWUoZSkudGhlbigoZnVuY3Rpb24oKXtiPWUsT2UuY2FsbCh0LHQubWVkaWEsXCJ2b2x1bWVjaGFuZ2VcIil9KSl9fSk7dmFyIHc9dC5jb25maWcubXV0ZWQ7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQubWVkaWEsXCJtdXRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd30sc2V0OmZ1bmN0aW9uKGUpe3ZhciBpPSEhUShlKSYmZTt0LmVtYmVkLnNldFZvbHVtZShpPzA6dC5jb25maWcudm9sdW1lKS50aGVuKChmdW5jdGlvbigpe3c9aSxPZS5jYWxsKHQsdC5tZWRpYSxcInZvbHVtZWNoYW5nZVwiKX0pKX19KTt2YXIgayxUPXQuY29uZmlnLmxvb3A7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQubWVkaWEsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBUfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIGk9UShlKT9lOnQuY29uZmlnLmxvb3AuYWN0aXZlO3QuZW1iZWQuc2V0TG9vcChpKS50aGVuKChmdW5jdGlvbigpe1Q9aX0pKX19KSx0LmVtYmVkLmdldFZpZGVvVXJsKCkudGhlbigoZnVuY3Rpb24oZSl7az1lLG50LnNldERvd25sb2FkVXJsLmNhbGwodCl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2UuZGVidWcud2Fybih0KX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5tZWRpYSxcImN1cnJlbnRTcmNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGt9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQubWVkaWEsXCJlbmRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5jdXJyZW50VGltZT09PXQuZHVyYXRpb259fSksUHJvbWlzZS5hbGwoW3QuZW1iZWQuZ2V0VmlkZW9XaWR0aCgpLHQuZW1iZWQuZ2V0VmlkZW9IZWlnaHQoKV0pLnRoZW4oKGZ1bmN0aW9uKGkpe3ZhciBuPW8oaSwyKSxhPW5bMF0scz1uWzFdO3QuZW1iZWQucmF0aW89W2Esc10sUmUuY2FsbChlKX0pKSx0LmVtYmVkLnNldEF1dG9wYXVzZSh0LmNvbmZpZy5hdXRvcGF1c2UpLnRoZW4oKGZ1bmN0aW9uKGUpe3QuY29uZmlnLmF1dG9wYXVzZT1lfSkpLHQuZW1iZWQuZ2V0VmlkZW9UaXRsZSgpLnRoZW4oKGZ1bmN0aW9uKGkpe3QuY29uZmlnLnRpdGxlPWkseXQuc2V0VGl0bGUuY2FsbChlKX0pKSx0LmVtYmVkLmdldEN1cnJlbnRUaW1lKCkudGhlbigoZnVuY3Rpb24oZSl7eT1lLE9lLmNhbGwodCx0Lm1lZGlhLFwidGltZXVwZGF0ZVwiKX0pKSx0LmVtYmVkLmdldER1cmF0aW9uKCkudGhlbigoZnVuY3Rpb24oZSl7dC5tZWRpYS5kdXJhdGlvbj1lLE9lLmNhbGwodCx0Lm1lZGlhLFwiZHVyYXRpb25jaGFuZ2VcIil9KSksdC5lbWJlZC5nZXRUZXh0VHJhY2tzKCkudGhlbigoZnVuY3Rpb24oZSl7dC5tZWRpYS50ZXh0VHJhY2tzPWUscnQuc2V0dXAuY2FsbCh0KX0pKSx0LmVtYmVkLm9uKFwiY3VlY2hhbmdlXCIsKGZ1bmN0aW9uKGUpe3ZhciBpPWUuY3VlcyxuPSh2b2lkIDA9PT1pP1tdOmkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoaSksaS5pbm5lckhUTUw9ZSx0LmZpcnN0Q2hpbGQuaW5uZXJUZXh0fShlLnRleHQpfSkpO3J0LnVwZGF0ZUN1ZXMuY2FsbCh0LG4pfSkpLHQuZW1iZWQub24oXCJsb2FkZWRcIiwoZnVuY3Rpb24oKXsodC5lbWJlZC5nZXRQYXVzZWQoKS50aGVuKChmdW5jdGlvbihlKXtrdC5jYWxsKHQsIWUpLGV8fE9lLmNhbGwodCx0Lm1lZGlhLFwicGxheWluZ1wiKX0pKSxHKHQuZW1iZWQuZWxlbWVudCkmJnQuc3VwcG9ydGVkLnVpKSYmdC5lbWJlZC5lbGVtZW50LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsLTEpfSkpLHQuZW1iZWQub24oXCJidWZmZXJzdGFydFwiLChmdW5jdGlvbigpe09lLmNhbGwodCx0Lm1lZGlhLFwid2FpdGluZ1wiKX0pKSx0LmVtYmVkLm9uKFwiYnVmZmVyZW5kXCIsKGZ1bmN0aW9uKCl7T2UuY2FsbCh0LHQubWVkaWEsXCJwbGF5aW5nXCIpfSkpLHQuZW1iZWQub24oXCJwbGF5XCIsKGZ1bmN0aW9uKCl7a3QuY2FsbCh0LCEwKSxPZS5jYWxsKHQsdC5tZWRpYSxcInBsYXlpbmdcIil9KSksdC5lbWJlZC5vbihcInBhdXNlXCIsKGZ1bmN0aW9uKCl7a3QuY2FsbCh0LCExKX0pKSx0LmVtYmVkLm9uKFwidGltZXVwZGF0ZVwiLChmdW5jdGlvbihlKXt0Lm1lZGlhLnNlZWtpbmc9ITEseT1lLnNlY29uZHMsT2UuY2FsbCh0LHQubWVkaWEsXCJ0aW1ldXBkYXRlXCIpfSkpLHQuZW1iZWQub24oXCJwcm9ncmVzc1wiLChmdW5jdGlvbihlKXt0Lm1lZGlhLmJ1ZmZlcmVkPWUucGVyY2VudCxPZS5jYWxsKHQsdC5tZWRpYSxcInByb2dyZXNzXCIpLDE9PT1wYXJzZUludChlLnBlcmNlbnQsMTApJiZPZS5jYWxsKHQsdC5tZWRpYSxcImNhbnBsYXl0aHJvdWdoXCIpLHQuZW1iZWQuZ2V0RHVyYXRpb24oKS50aGVuKChmdW5jdGlvbihlKXtlIT09dC5tZWRpYS5kdXJhdGlvbiYmKHQubWVkaWEuZHVyYXRpb249ZSxPZS5jYWxsKHQsdC5tZWRpYSxcImR1cmF0aW9uY2hhbmdlXCIpKX0pKX0pKSx0LmVtYmVkLm9uKFwic2Vla2VkXCIsKGZ1bmN0aW9uKCl7dC5tZWRpYS5zZWVraW5nPSExLE9lLmNhbGwodCx0Lm1lZGlhLFwic2Vla2VkXCIpfSkpLHQuZW1iZWQub24oXCJlbmRlZFwiLChmdW5jdGlvbigpe3QubWVkaWEucGF1c2VkPSEwLE9lLmNhbGwodCx0Lm1lZGlhLFwiZW5kZWRcIil9KSksdC5lbWJlZC5vbihcImVycm9yXCIsKGZ1bmN0aW9uKGUpe3QubWVkaWEuZXJyb3I9ZSxPZS5jYWxsKHQsdC5tZWRpYSxcImVycm9yXCIpfSkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHl0LmJ1aWxkLmNhbGwodCl9KSwwKX19O2Z1bmN0aW9uIEN0KGUpe2UmJiF0aGlzLmVtYmVkLmhhc1BsYXllZCYmKHRoaXMuZW1iZWQuaGFzUGxheWVkPSEwKSx0aGlzLm1lZGlhLnBhdXNlZD09PWUmJih0aGlzLm1lZGlhLnBhdXNlZD0hZSxPZS5jYWxsKHRoaXMsdGhpcy5tZWRpYSxlP1wicGxheVwiOlwicGF1c2VcIikpfWZ1bmN0aW9uIEF0KGUpe3JldHVybiBlLm5vQ29va2llP1wiaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb21cIjpcImh0dHA6XCI9PT13aW5kb3cubG9jYXRpb24ucHJvdG9jb2w/XCJodHRwOi8vd3d3LnlvdXR1YmUuY29tXCI6dm9pZCAwfXZhciBTdD17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGJlKHRoaXMuZWxlbWVudHMud3JhcHBlcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmVtYmVkLCEwKSx6KHdpbmRvdy5ZVCkmJlgod2luZG93LllULlBsYXllcikpU3QucmVhZHkuY2FsbCh0aGlzKTtlbHNle3ZhciB0PXdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeTt3aW5kb3cub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHk9ZnVuY3Rpb24oKXtYKHQpJiZ0KCksU3QucmVhZHkuY2FsbChlKX0sd3QodGhpcy5jb25maWcudXJscy55b3V0dWJlLnNkaykuY2F0Y2goKGZ1bmN0aW9uKHQpe2UuZGVidWcud2FybihcIllvdVR1YmUgQVBJIGZhaWxlZCB0byBsb2FkXCIsdCl9KSl9fSxnZXRUaXRsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO0plKFVlKHRoaXMuY29uZmlnLnVybHMueW91dHViZS5hcGksZSkpLnRoZW4oKGZ1bmN0aW9uKGUpe2lmKHooZSkpe3ZhciBpPWUudGl0bGUsbj1lLmhlaWdodCxhPWUud2lkdGg7dC5jb25maWcudGl0bGU9aSx5dC5zZXRUaXRsZS5jYWxsKHQpLHQuZW1iZWQucmF0aW89W2Esbl19UmUuY2FsbCh0KX0pKS5jYXRjaCgoZnVuY3Rpb24oKXtSZS5jYWxsKHQpfSkpfSxyZWFkeTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm1lZGlhJiZlLm1lZGlhLmdldEF0dHJpYnV0ZShcImlkXCIpO2lmKGFlKHQpfHwhdC5zdGFydHNXaXRoKFwieW91dHViZS1cIikpe3ZhciBpPWUubWVkaWEuZ2V0QXR0cmlidXRlKFwic3JjXCIpO2FlKGkpJiYoaT1lLm1lZGlhLmdldEF0dHJpYnV0ZSh0aGlzLmNvbmZpZy5hdHRyaWJ1dGVzLmVtYmVkLmlkKSk7dmFyIG4sYSxzPWFlKG49aSk/bnVsbDpuLm1hdGNoKC9eLiooeW91dHUuYmVcXC98dlxcL3x1XFwvXFx3XFwvfGVtYmVkXFwvfHdhdGNoXFw/dj18JnY9KShbXiMmP10qKS4qLyk/UmVnRXhwLiQyOm4scj0oYT1lLnByb3ZpZGVyLFwiXCIuY29uY2F0KGEsXCItXCIpLmNvbmNhdChNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSkpLG89aGUoXCJkaXZcIix7aWQ6cixcImRhdGEtcG9zdGVyXCI6ZS5wb3N0ZXJ9KTtlLm1lZGlhPWdlKG8sZS5tZWRpYSk7dmFyIGw9ZnVuY3Rpb24oZSl7cmV0dXJuXCJodHRwczovL2kueXRpbWcuY29tL3ZpL1wiLmNvbmNhdChzLFwiL1wiKS5jb25jYXQoZSxcImRlZmF1bHQuanBnXCIpfTtndChsKFwibWF4cmVzXCIpLDEyMSkuY2F0Y2goKGZ1bmN0aW9uKCl7cmV0dXJuIGd0KGwoXCJzZFwiKSwxMjEpfSkpLmNhdGNoKChmdW5jdGlvbigpe3JldHVybiBndChsKFwiaHFcIikpfSkpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB5dC5zZXRQb3N0ZXIuY2FsbChlLHQuc3JjKX0pKS50aGVuKChmdW5jdGlvbih0KXt0LmluY2x1ZGVzKFwibWF4cmVzXCIpfHwoZS5lbGVtZW50cy5wb3N0ZXIuc3R5bGUuYmFja2dyb3VuZFNpemU9XCJjb3ZlclwiKX0pKS5jYXRjaCgoZnVuY3Rpb24oKXt9KSk7dmFyIGM9ZS5jb25maWcueW91dHViZTtlLmVtYmVkPW5ldyB3aW5kb3cuWVQuUGxheWVyKHIse3ZpZGVvSWQ6cyxob3N0OkF0KGMpLHBsYXllclZhcnM6Y2Uoe30se2F1dG9wbGF5OmUuY29uZmlnLmF1dG9wbGF5PzE6MCxobDplLmNvbmZpZy5obCxjb250cm9sczplLnN1cHBvcnRlZC51aT8wOjEsZGlzYWJsZWtiOjEscGxheXNpbmxpbmU6ZS5jb25maWcuZnVsbHNjcmVlbi5pb3NOYXRpdmU/MDoxLGNjX2xvYWRfcG9saWN5OmUuY2FwdGlvbnMuYWN0aXZlPzE6MCxjY19sYW5nX3ByZWY6ZS5jb25maWcuY2FwdGlvbnMubGFuZ3VhZ2Usd2lkZ2V0X3JlZmVycmVyOndpbmRvdz93aW5kb3cubG9jYXRpb24uaHJlZjpudWxsfSxjKSxldmVudHM6e29uRXJyb3I6ZnVuY3Rpb24odCl7aWYoIWUubWVkaWEuZXJyb3Ipe3ZhciBpPXQuZGF0YSxuPXsyOlwiVGhlIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBwYXJhbWV0ZXIgdmFsdWUuIEZvciBleGFtcGxlLCB0aGlzIGVycm9yIG9jY3VycyBpZiB5b3Ugc3BlY2lmeSBhIHZpZGVvIElEIHRoYXQgZG9lcyBub3QgaGF2ZSAxMSBjaGFyYWN0ZXJzLCBvciBpZiB0aGUgdmlkZW8gSUQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGV4Y2xhbWF0aW9uIHBvaW50cyBvciBhc3Rlcmlza3MuXCIsNTpcIlRoZSByZXF1ZXN0ZWQgY29udGVudCBjYW5ub3QgYmUgcGxheWVkIGluIGFuIEhUTUw1IHBsYXllciBvciBhbm90aGVyIGVycm9yIHJlbGF0ZWQgdG8gdGhlIEhUTUw1IHBsYXllciBoYXMgb2NjdXJyZWQuXCIsMTAwOlwiVGhlIHZpZGVvIHJlcXVlc3RlZCB3YXMgbm90IGZvdW5kLiBUaGlzIGVycm9yIG9jY3VycyB3aGVuIGEgdmlkZW8gaGFzIGJlZW4gcmVtb3ZlZCAoZm9yIGFueSByZWFzb24pIG9yIGhhcyBiZWVuIG1hcmtlZCBhcyBwcml2YXRlLlwiLDEwMTpcIlRoZSBvd25lciBvZiB0aGUgcmVxdWVzdGVkIHZpZGVvIGRvZXMgbm90IGFsbG93IGl0IHRvIGJlIHBsYXllZCBpbiBlbWJlZGRlZCBwbGF5ZXJzLlwiLDE1MDpcIlRoZSBvd25lciBvZiB0aGUgcmVxdWVzdGVkIHZpZGVvIGRvZXMgbm90IGFsbG93IGl0IHRvIGJlIHBsYXllZCBpbiBlbWJlZGRlZCBwbGF5ZXJzLlwifVtpXXx8XCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWRcIjtlLm1lZGlhLmVycm9yPXtjb2RlOmksbWVzc2FnZTpufSxPZS5jYWxsKGUsZS5tZWRpYSxcImVycm9yXCIpfX0sb25QbGF5YmFja1JhdGVDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIGk9dC50YXJnZXQ7ZS5tZWRpYS5wbGF5YmFja1JhdGU9aS5nZXRQbGF5YmFja1JhdGUoKSxPZS5jYWxsKGUsZS5tZWRpYSxcInJhdGVjaGFuZ2VcIil9LG9uUmVhZHk6ZnVuY3Rpb24odCl7aWYoIVgoZS5tZWRpYS5wbGF5KSl7dmFyIGk9dC50YXJnZXQ7U3QuZ2V0VGl0bGUuY2FsbChlLHMpLGUubWVkaWEucGxheT1mdW5jdGlvbigpe0N0LmNhbGwoZSwhMCksaS5wbGF5VmlkZW8oKX0sZS5tZWRpYS5wYXVzZT1mdW5jdGlvbigpe0N0LmNhbGwoZSwhMSksaS5wYXVzZVZpZGVvKCl9LGUubWVkaWEuc3RvcD1mdW5jdGlvbigpe2kuc3RvcFZpZGVvKCl9LGUubWVkaWEuZHVyYXRpb249aS5nZXREdXJhdGlvbigpLGUubWVkaWEucGF1c2VkPSEwLGUubWVkaWEuY3VycmVudFRpbWU9MCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5tZWRpYSxcImN1cnJlbnRUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBOdW1iZXIoaS5nZXRDdXJyZW50VGltZSgpKX0sc2V0OmZ1bmN0aW9uKHQpe2UucGF1c2VkJiYhZS5lbWJlZC5oYXNQbGF5ZWQmJmUuZW1iZWQubXV0ZSgpLGUubWVkaWEuc2Vla2luZz0hMCxPZS5jYWxsKGUsZS5tZWRpYSxcInNlZWtpbmdcIiksaS5zZWVrVG8odCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0UGxheWJhY2tSYXRlKCl9LHNldDpmdW5jdGlvbihlKXtpLnNldFBsYXliYWNrUmF0ZShlKX19KTt2YXIgbj1lLmNvbmZpZy52b2x1bWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsXCJ2b2x1bWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG59LHNldDpmdW5jdGlvbih0KXtuPXQsaS5zZXRWb2x1bWUoMTAwKm4pLE9lLmNhbGwoZSxlLm1lZGlhLFwidm9sdW1lY2hhbmdlXCIpfX0pO3ZhciBhPWUuY29uZmlnLm11dGVkO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLm1lZGlhLFwibXV0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LHNldDpmdW5jdGlvbih0KXt2YXIgbj1RKHQpP3Q6YTthPW4saVtuP1wibXV0ZVwiOlwidW5NdXRlXCJdKCksT2UuY2FsbChlLGUubWVkaWEsXCJ2b2x1bWVjaGFuZ2VcIil9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsXCJjdXJyZW50U3JjXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBpLmdldFZpZGVvVXJsKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsXCJlbmRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5jdXJyZW50VGltZT09PWUuZHVyYXRpb259fSk7dmFyIHI9aS5nZXRBdmFpbGFibGVQbGF5YmFja1JhdGVzKCk7ZS5vcHRpb25zLnNwZWVkPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gZS5jb25maWcuc3BlZWQub3B0aW9ucy5pbmNsdWRlcyh0KX0pKSxlLnN1cHBvcnRlZC51aSYmZS5tZWRpYS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLC0xKSxPZS5jYWxsKGUsZS5tZWRpYSxcInRpbWV1cGRhdGVcIiksT2UuY2FsbChlLGUubWVkaWEsXCJkdXJhdGlvbmNoYW5nZVwiKSxjbGVhckludGVydmFsKGUudGltZXJzLmJ1ZmZlcmluZyksZS50aW1lcnMuYnVmZmVyaW5nPXNldEludGVydmFsKChmdW5jdGlvbigpe2UubWVkaWEuYnVmZmVyZWQ9aS5nZXRWaWRlb0xvYWRlZEZyYWN0aW9uKCksKG51bGw9PT1lLm1lZGlhLmxhc3RCdWZmZXJlZHx8ZS5tZWRpYS5sYXN0QnVmZmVyZWQ8ZS5tZWRpYS5idWZmZXJlZCkmJk9lLmNhbGwoZSxlLm1lZGlhLFwicHJvZ3Jlc3NcIiksZS5tZWRpYS5sYXN0QnVmZmVyZWQ9ZS5tZWRpYS5idWZmZXJlZCwxPT09ZS5tZWRpYS5idWZmZXJlZCYmKGNsZWFySW50ZXJ2YWwoZS50aW1lcnMuYnVmZmVyaW5nKSxPZS5jYWxsKGUsZS5tZWRpYSxcImNhbnBsYXl0aHJvdWdoXCIpKX0pLDIwMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4geXQuYnVpbGQuY2FsbChlKX0pLDUwKX19LG9uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIGk9dC50YXJnZXQ7c3dpdGNoKGNsZWFySW50ZXJ2YWwoZS50aW1lcnMucGxheWluZyksZS5tZWRpYS5zZWVraW5nJiZbMSwyXS5pbmNsdWRlcyh0LmRhdGEpJiYoZS5tZWRpYS5zZWVraW5nPSExLE9lLmNhbGwoZSxlLm1lZGlhLFwic2Vla2VkXCIpKSx0LmRhdGEpe2Nhc2UtMTpPZS5jYWxsKGUsZS5tZWRpYSxcInRpbWV1cGRhdGVcIiksZS5tZWRpYS5idWZmZXJlZD1pLmdldFZpZGVvTG9hZGVkRnJhY3Rpb24oKSxPZS5jYWxsKGUsZS5tZWRpYSxcInByb2dyZXNzXCIpO2JyZWFrO2Nhc2UgMDpDdC5jYWxsKGUsITEpLGUubWVkaWEubG9vcD8oaS5zdG9wVmlkZW8oKSxpLnBsYXlWaWRlbygpKTpPZS5jYWxsKGUsZS5tZWRpYSxcImVuZGVkXCIpO2JyZWFrO2Nhc2UgMTplLmNvbmZpZy5hdXRvcGxheXx8IWUubWVkaWEucGF1c2VkfHxlLmVtYmVkLmhhc1BsYXllZD8oQ3QuY2FsbChlLCEwKSxPZS5jYWxsKGUsZS5tZWRpYSxcInBsYXlpbmdcIiksZS50aW1lcnMucGxheWluZz1zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtPZS5jYWxsKGUsZS5tZWRpYSxcInRpbWV1cGRhdGVcIil9KSw1MCksZS5tZWRpYS5kdXJhdGlvbiE9PWkuZ2V0RHVyYXRpb24oKSYmKGUubWVkaWEuZHVyYXRpb249aS5nZXREdXJhdGlvbigpLE9lLmNhbGwoZSxlLm1lZGlhLFwiZHVyYXRpb25jaGFuZ2VcIikpKTplLm1lZGlhLnBhdXNlKCk7YnJlYWs7Y2FzZSAyOmUubXV0ZWR8fGUuZW1iZWQudW5NdXRlKCksQ3QuY2FsbChlLCExKTticmVhaztjYXNlIDM6T2UuY2FsbChlLGUubWVkaWEsXCJ3YWl0aW5nXCIpfU9lLmNhbGwoZSxlLmVsZW1lbnRzLmNvbnRhaW5lcixcInN0YXRlY2hhbmdlXCIsITEse2NvZGU6dC5kYXRhfSl9fX0pfX19LFB0PXtzZXR1cDpmdW5jdGlvbigpe3RoaXMubWVkaWE/KGJlKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudHlwZS5yZXBsYWNlKFwiezB9XCIsdGhpcy50eXBlKSwhMCksYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wcm92aWRlci5yZXBsYWNlKFwiezB9XCIsdGhpcy5wcm92aWRlciksITApLHRoaXMuaXNFbWJlZCYmYmUodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy50eXBlLnJlcGxhY2UoXCJ7MH1cIixcInZpZGVvXCIpLCEwKSx0aGlzLmlzVmlkZW8mJih0aGlzLmVsZW1lbnRzLndyYXBwZXI9aGUoXCJkaXZcIix7Y2xhc3M6dGhpcy5jb25maWcuY2xhc3NOYW1lcy52aWRlb30pLHVlKHRoaXMubWVkaWEsdGhpcy5lbGVtZW50cy53cmFwcGVyKSx0aGlzLmVsZW1lbnRzLnBvc3Rlcj1oZShcImRpdlwiLHtjbGFzczp0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnBvc3Rlcn0pLHRoaXMuZWxlbWVudHMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnBvc3RlcikpLHRoaXMuaXNIVE1MNT9WZS5zZXR1cC5jYWxsKHRoaXMpOnRoaXMuaXNZb3VUdWJlP1N0LnNldHVwLmNhbGwodGhpcyk6dGhpcy5pc1ZpbWVvJiZUdC5zZXR1cC5jYWxsKHRoaXMpKTp0aGlzLmRlYnVnLndhcm4oXCJObyBtZWRpYSBlbGVtZW50IGZvdW5kIVwiKX19LEV0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChpKXt2YXIgbj10aGlzO2UodGhpcyx0KSx0aGlzLnBsYXllcj1pLHRoaXMuY29uZmlnPWkuY29uZmlnLmFkcyx0aGlzLnBsYXlpbmc9ITEsdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLmVsZW1lbnRzPXtjb250YWluZXI6bnVsbCxkaXNwbGF5Q29udGFpbmVyOm51bGx9LHRoaXMubWFuYWdlcj1udWxsLHRoaXMubG9hZGVyPW51bGwsdGhpcy5jdWVQb2ludHM9bnVsbCx0aGlzLmV2ZW50cz17fSx0aGlzLnNhZmV0eVRpbWVyPW51bGwsdGhpcy5jb3VudGRvd25UaW1lcj1udWxsLHRoaXMubWFuYWdlclByb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsdCl7bi5vbihcImxvYWRlZFwiLGUpLG4ub24oXCJlcnJvclwiLHQpfSkpLHRoaXMubG9hZCgpfXJldHVybiBpKHQsW3trZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZW5hYmxlZCYmKHood2luZG93Lmdvb2dsZSkmJnood2luZG93Lmdvb2dsZS5pbWEpP3RoaXMucmVhZHkoKTp3dCh0aGlzLnBsYXllci5jb25maWcudXJscy5nb29nbGVJTUEuc2RrKS50aGVuKChmdW5jdGlvbigpe2UucmVhZHkoKX0pKS5jYXRjaCgoZnVuY3Rpb24oKXtlLnRyaWdnZXIoXCJlcnJvclwiLG5ldyBFcnJvcihcIkdvb2dsZSBJTUEgU0RLIGZhaWxlZCB0byBsb2FkXCIpKX0pKSl9fSx7a2V5OlwicmVhZHlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpczt0aGlzLmVuYWJsZWR8fCgoZT10aGlzKS5tYW5hZ2VyJiZlLm1hbmFnZXIuZGVzdHJveSgpLGUuZWxlbWVudHMuZGlzcGxheUNvbnRhaW5lciYmZS5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyLmRlc3Ryb3koKSxlLmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmUoKSksdGhpcy5zdGFydFNhZmV0eVRpbWVyKDEyZTMsXCJyZWFkeSgpXCIpLHRoaXMubWFuYWdlclByb21pc2UudGhlbigoZnVuY3Rpb24oKXt0LmNsZWFyU2FmZXR5VGltZXIoXCJvbkFkc01hbmFnZXJMb2FkZWQoKVwiKX0pKSx0aGlzLmxpc3RlbmVycygpLHRoaXMuc2V0dXBJTUEoKX19LHtrZXk6XCJzZXR1cElNQVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcj1oZShcImRpdlwiLHtjbGFzczp0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5hZHN9KSx0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5jb250YWluZXIpLGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0VnBhaWRNb2RlKGdvb2dsZS5pbWEuSW1hU2RrU2V0dGluZ3MuVnBhaWRNb2RlLkVOQUJMRUQpLGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0TG9jYWxlKHRoaXMucGxheWVyLmNvbmZpZy5hZHMubGFuZ3VhZ2UpLGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0RGlzYWJsZUN1c3RvbVBsYXliYWNrRm9ySU9TMTBQbHVzKHRoaXMucGxheWVyLmNvbmZpZy5wbGF5c2lubGluZSksdGhpcy5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyPW5ldyBnb29nbGUuaW1hLkFkRGlzcGxheUNvbnRhaW5lcih0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLnBsYXllci5tZWRpYSksdGhpcy5sb2FkZXI9bmV3IGdvb2dsZS5pbWEuQWRzTG9hZGVyKHRoaXMuZWxlbWVudHMuZGlzcGxheUNvbnRhaW5lciksdGhpcy5sb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihnb29nbGUuaW1hLkFkc01hbmFnZXJMb2FkZWRFdmVudC5UeXBlLkFEU19NQU5BR0VSX0xPQURFRCwoZnVuY3Rpb24odCl7cmV0dXJuIGUub25BZHNNYW5hZ2VyTG9hZGVkKHQpfSksITEpLHRoaXMubG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoZ29vZ2xlLmltYS5BZEVycm9yRXZlbnQuVHlwZS5BRF9FUlJPUiwoZnVuY3Rpb24odCl7cmV0dXJuIGUub25BZEVycm9yKHQpfSksITEpLHRoaXMucmVxdWVzdEFkcygpfX0se2tleTpcInJlcXVlc3RBZHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lcjt0cnl7dmFyIHQ9bmV3IGdvb2dsZS5pbWEuQWRzUmVxdWVzdDt0LmFkVGFnVXJsPXRoaXMudGFnVXJsLHQubGluZWFyQWRTbG90V2lkdGg9ZS5vZmZzZXRXaWR0aCx0LmxpbmVhckFkU2xvdEhlaWdodD1lLm9mZnNldEhlaWdodCx0Lm5vbkxpbmVhckFkU2xvdFdpZHRoPWUub2Zmc2V0V2lkdGgsdC5ub25MaW5lYXJBZFNsb3RIZWlnaHQ9ZS5vZmZzZXRIZWlnaHQsdC5mb3JjZU5vbkxpbmVhckZ1bGxTbG90PSExLHQuc2V0QWRXaWxsUGxheU11dGVkKCF0aGlzLnBsYXllci5tdXRlZCksdGhpcy5sb2FkZXIucmVxdWVzdEFkcyh0KX1jYXRjaChlKXt0aGlzLm9uQWRFcnJvcihlKX19fSx7a2V5OlwicG9sbENvdW50ZG93blwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07aWYoIXQpcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5jb3VudGRvd25UaW1lciksdm9pZCB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWJhZGdlLXRleHRcIik7dmFyIGk9ZnVuY3Rpb24oKXt2YXIgdD1pdChNYXRoLm1heChlLm1hbmFnZXIuZ2V0UmVtYWluaW5nVGltZSgpLDApKSxpPVwiXCIuY29uY2F0KFhlKFwiYWR2ZXJ0aXNlbWVudFwiLGUucGxheWVyLmNvbmZpZyksXCIgLSBcIikuY29uY2F0KHQpO2UuZWxlbWVudHMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtYmFkZ2UtdGV4dFwiLGkpfTt0aGlzLmNvdW50ZG93blRpbWVyPXNldEludGVydmFsKGksMTAwKX19LHtrZXk6XCJvbkFkc01hbmFnZXJMb2FkZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuZW5hYmxlZCl7dmFyIGk9bmV3IGdvb2dsZS5pbWEuQWRzUmVuZGVyaW5nU2V0dGluZ3M7aS5yZXN0b3JlQ3VzdG9tUGxheWJhY2tTdGF0ZU9uQWRCcmVha0NvbXBsZXRlPSEwLGkuZW5hYmxlUHJlbG9hZGluZz0hMCx0aGlzLm1hbmFnZXI9ZS5nZXRBZHNNYW5hZ2VyKHRoaXMucGxheWVyLGkpLHRoaXMuY3VlUG9pbnRzPXRoaXMubWFuYWdlci5nZXRDdWVQb2ludHMoKSx0aGlzLm1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLChmdW5jdGlvbihlKXtyZXR1cm4gdC5vbkFkRXJyb3IoZSl9KSksT2JqZWN0LmtleXMoZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QubWFuYWdlci5hZGRFdmVudExpc3RlbmVyKGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlW2VdLChmdW5jdGlvbihlKXtyZXR1cm4gdC5vbkFkRXZlbnQoZSl9KSl9KSksdGhpcy50cmlnZ2VyKFwibG9hZGVkXCIpfX19LHtrZXk6XCJhZGRDdWVQb2ludHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7YWUodGhpcy5jdWVQb2ludHMpfHx0aGlzLmN1ZVBvaW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXtpZigwIT09dCYmLTEhPT10JiZ0PGUucGxheWVyLmR1cmF0aW9uKXt2YXIgaT1lLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcztpZihHKGkpKXt2YXIgbj0xMDAvZS5wbGF5ZXIuZHVyYXRpb24qdCxhPWhlKFwic3BhblwiLHtjbGFzczplLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5jdWVzfSk7YS5zdHlsZS5sZWZ0PVwiXCIuY29uY2F0KG4udG9TdHJpbmcoKSxcIiVcIiksaS5hcHBlbmRDaGlsZChhKX19fSkpfX0se2tleTpcIm9uQWRFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsaT10aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsbj1lLmdldEFkKCksYT1lLmdldEFkRGF0YSgpO3N3aXRjaChmdW5jdGlvbihlKXtPZS5jYWxsKHQucGxheWVyLHQucGxheWVyLm1lZGlhLFwiYWRzXCIuY29uY2F0KGUucmVwbGFjZSgvXy9nLFwiXCIpLnRvTG93ZXJDYXNlKCkpKX0oZS50eXBlKSxlLnR5cGUpe2Nhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuTE9BREVEOnRoaXMudHJpZ2dlcihcImxvYWRlZFwiKSx0aGlzLnBvbGxDb3VudGRvd24oITApLG4uaXNMaW5lYXIoKXx8KG4ud2lkdGg9aS5vZmZzZXRXaWR0aCxuLmhlaWdodD1pLm9mZnNldEhlaWdodCk7YnJlYWs7Y2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5TVEFSVEVEOnRoaXMubWFuYWdlci5zZXRWb2x1bWUodGhpcy5wbGF5ZXIudm9sdW1lKTticmVhaztjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkFMTF9BRFNfQ09NUExFVEVEOnRoaXMucGxheWVyLmVuZGVkP3RoaXMubG9hZEFkcygpOnRoaXMubG9hZGVyLmNvbnRlbnRDb21wbGV0ZSgpO2JyZWFrO2Nhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQ6dGhpcy5wYXVzZUNvbnRlbnQoKTticmVhaztjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkNPTlRFTlRfUkVTVU1FX1JFUVVFU1RFRDp0aGlzLnBvbGxDb3VudGRvd24oKSx0aGlzLnJlc3VtZUNvbnRlbnQoKTticmVhaztjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkxPRzphLmFkRXJyb3ImJnRoaXMucGxheWVyLmRlYnVnLndhcm4oXCJOb24tZmF0YWwgYWQgZXJyb3I6IFwiLmNvbmNhdChhLmFkRXJyb3IuZ2V0TWVzc2FnZSgpKSl9fX0se2tleTpcIm9uQWRFcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FuY2VsKCksdGhpcy5wbGF5ZXIuZGVidWcud2FybihcIkFkcyBlcnJvclwiLGUpfX0se2tleTpcImxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLGk9dGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyO3RoaXMucGxheWVyLm9uKFwiY2FucGxheVwiLChmdW5jdGlvbigpe3QuYWRkQ3VlUG9pbnRzKCl9KSksdGhpcy5wbGF5ZXIub24oXCJlbmRlZFwiLChmdW5jdGlvbigpe3QubG9hZGVyLmNvbnRlbnRDb21wbGV0ZSgpfSkpLHRoaXMucGxheWVyLm9uKFwidGltZXVwZGF0ZVwiLChmdW5jdGlvbigpe2U9dC5wbGF5ZXIuY3VycmVudFRpbWV9KSksdGhpcy5wbGF5ZXIub24oXCJzZWVrZWRcIiwoZnVuY3Rpb24oKXt2YXIgaT10LnBsYXllci5jdXJyZW50VGltZTthZSh0LmN1ZVBvaW50cyl8fHQuY3VlUG9pbnRzLmZvckVhY2goKGZ1bmN0aW9uKG4sYSl7ZTxuJiZuPGkmJih0Lm1hbmFnZXIuZGlzY2FyZEFkQnJlYWsoKSx0LmN1ZVBvaW50cy5zcGxpY2UoYSwxKSl9KSl9KSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwoZnVuY3Rpb24oKXt0Lm1hbmFnZXImJnQubWFuYWdlci5yZXNpemUoaS5vZmZzZXRXaWR0aCxpLm9mZnNldEhlaWdodCxnb29nbGUuaW1hLlZpZXdNb2RlLk5PUk1BTCl9KSl9fSx7a2V5OlwicGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lcjt0aGlzLm1hbmFnZXJQcm9taXNlfHx0aGlzLnJlc3VtZUNvbnRlbnQoKSx0aGlzLm1hbmFnZXJQcm9taXNlLnRoZW4oKGZ1bmN0aW9uKCl7ZS5tYW5hZ2VyLnNldFZvbHVtZShlLnBsYXllci52b2x1bWUpLGUuZWxlbWVudHMuZGlzcGxheUNvbnRhaW5lci5pbml0aWFsaXplKCk7dHJ5e2UuaW5pdGlhbGl6ZWR8fChlLm1hbmFnZXIuaW5pdCh0Lm9mZnNldFdpZHRoLHQub2Zmc2V0SGVpZ2h0LGdvb2dsZS5pbWEuVmlld01vZGUuTk9STUFMKSxlLm1hbmFnZXIuc3RhcnQoKSksZS5pbml0aWFsaXplZD0hMH1jYXRjaCh0KXtlLm9uQWRFcnJvcih0KX19KSkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpfX0se2tleTpcInJlc3VtZUNvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudHMuY29udGFpbmVyLnN0eWxlLnpJbmRleD1cIlwiLHRoaXMucGxheWluZz0hMSxxZSh0aGlzLnBsYXllci5tZWRpYS5wbGF5KCkpfX0se2tleTpcInBhdXNlQ29udGVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cy5jb250YWluZXIuc3R5bGUuekluZGV4PTMsdGhpcy5wbGF5aW5nPSEwLHRoaXMucGxheWVyLm1lZGlhLnBhdXNlKCl9fSx7a2V5OlwiY2FuY2VsXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxpemVkJiZ0aGlzLnJlc3VtZUNvbnRlbnQoKSx0aGlzLnRyaWdnZXIoXCJlcnJvclwiKSx0aGlzLmxvYWRBZHMoKX19LHtrZXk6XCJsb2FkQWRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMubWFuYWdlclByb21pc2UudGhlbigoZnVuY3Rpb24oKXtlLm1hbmFnZXImJmUubWFuYWdlci5kZXN0cm95KCksZS5tYW5hZ2VyUHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5vbihcImxvYWRlZFwiLHQpLGUucGxheWVyLmRlYnVnLmxvZyhlLm1hbmFnZXIpfSkpLGUuaW5pdGlhbGl6ZWQ9ITEsZS5yZXF1ZXN0QWRzKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpfX0se2tleTpcInRyaWdnZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxpPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoaT4xP2ktMTowKSxhPTE7YTxpO2ErKyluW2EtMV09YXJndW1lbnRzW2FdO3ZhciBzPXRoaXMuZXZlbnRzW2VdOyQocykmJnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7WChlKSYmZS5hcHBseSh0LG4pfSkpfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gJCh0aGlzLmV2ZW50c1tlXSl8fCh0aGlzLmV2ZW50c1tlXT1bXSksdGhpcy5ldmVudHNbZV0ucHVzaCh0KSx0aGlzfX0se2tleTpcInN0YXJ0U2FmZXR5VGltZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXM7dGhpcy5wbGF5ZXIuZGVidWcubG9nKFwiU2FmZXR5IHRpbWVyIGludm9rZWQgZnJvbTogXCIuY29uY2F0KHQpKSx0aGlzLnNhZmV0eVRpbWVyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aS5jYW5jZWwoKSxpLmNsZWFyU2FmZXR5VGltZXIoXCJzdGFydFNhZmV0eVRpbWVyKClcIil9KSxlKX19LHtrZXk6XCJjbGVhclNhZmV0eVRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Vyh0aGlzLnNhZmV0eVRpbWVyKXx8KHRoaXMucGxheWVyLmRlYnVnLmxvZyhcIlNhZmV0eSB0aW1lciBjbGVhcmVkIGZyb206IFwiLmNvbmNhdChlKSksY2xlYXJUaW1lb3V0KHRoaXMuc2FmZXR5VGltZXIpLHRoaXMuc2FmZXR5VGltZXI9bnVsbCl9fSx7a2V5OlwiZW5hYmxlZFwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29uZmlnO3JldHVybiB0aGlzLnBsYXllci5pc0hUTUw1JiZ0aGlzLnBsYXllci5pc1ZpZGVvJiZlLmVuYWJsZWQmJighYWUoZS5wdWJsaXNoZXJJZCl8fG5lKGUudGFnVXJsKSl9fSx7a2V5OlwidGFnVXJsXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb25maWc7aWYobmUoZS50YWdVcmwpKXJldHVybiBlLnRhZ1VybDt2YXIgdD17QVZfUFVCTElTSEVSSUQ6XCI1OGMyNWJiMDA3M2VmNDQ4YjEwODdhZDZcIixBVl9DSEFOTkVMSUQ6XCI1YTA0NThkYzI4YTA2MTQ1ZTQ1MTlkMjFcIixBVl9VUkw6d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLGNiOkRhdGUubm93KCksQVZfV0lEVEg6NjQwLEFWX0hFSUdIVDo0ODAsQVZfQ0RJTTI6ZS5wdWJsaXNoZXJJZH07cmV0dXJuXCJcIi5jb25jYXQoXCJodHRwczovL2dvLmFuaXZpZXcuY29tL2FwaS9hZHNlcnZlcjYvdmFzdC9cIixcIj9cIikuY29uY2F0KHN0KHQpKX19XSksdH0oKSxOdD1mdW5jdGlvbihlLHQpe3ZhciBpPXt9O3JldHVybiBlPnQud2lkdGgvdC5oZWlnaHQ/KGkud2lkdGg9dC53aWR0aCxpLmhlaWdodD0xL2UqdC53aWR0aCk6KGkuaGVpZ2h0PXQuaGVpZ2h0LGkud2lkdGg9ZSp0LmhlaWdodCksaX0sTXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGkpe2UodGhpcyx0KSx0aGlzLnBsYXllcj1pLHRoaXMudGh1bWJuYWlscz1bXSx0aGlzLmxvYWRlZD0hMSx0aGlzLmxhc3RNb3VzZU1vdmVUaW1lPURhdGUubm93KCksdGhpcy5tb3VzZURvd249ITEsdGhpcy5sb2FkZWRJbWFnZXM9W10sdGhpcy5lbGVtZW50cz17dGh1bWI6e30sc2NydWJiaW5nOnt9fSx0aGlzLmxvYWQoKX1yZXR1cm4gaSh0LFt7a2V5OlwibG9hZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnBsYXllci5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwJiYodGhpcy5wbGF5ZXIuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcC5oaWRkZW49dGhpcy5lbmFibGVkKSx0aGlzLmVuYWJsZWQmJnRoaXMuZ2V0VGh1bWJuYWlscygpLnRoZW4oKGZ1bmN0aW9uKCl7ZS5lbmFibGVkJiYoZS5yZW5kZXIoKSxlLmRldGVybWluZUNvbnRhaW5lckF1dG9TaXppbmcoKSxlLmxvYWRlZD0hMCl9KSl9fSx7a2V5OlwiZ2V0VGh1bWJuYWlsc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe3ZhciBpPWUucGxheWVyLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscy5zcmM7aWYoYWUoaSkpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBwcmV2aWV3VGh1bWJuYWlscy5zcmMgY29uZmlnIGF0dHJpYnV0ZVwiKTt2YXIgbj1mdW5jdGlvbigpe2UudGh1bWJuYWlscy5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLmhlaWdodC10LmhlaWdodH0pKSxlLnBsYXllci5kZWJ1Zy5sb2coXCJQcmV2aWV3IHRodW1ibmFpbHNcIixlLnRodW1ibmFpbHMpLHQoKX07aWYoWChpKSlpKChmdW5jdGlvbih0KXtlLnRodW1ibmFpbHM9dCxuKCl9KSk7ZWxzZXt2YXIgYT0oWShpKT9baV06aSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS5nZXRUaHVtYm5haWwodCl9KSk7UHJvbWlzZS5hbGwoYSkudGhlbihuKX19KSl9fSx7a2V5OlwiZ2V0VGh1bWJuYWlsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGkpe0plKGUpLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBhLHMscj17ZnJhbWVzOihhPW4scz1bXSxhLnNwbGl0KC9cXHJcXG5cXHJcXG58XFxuXFxufFxcclxcci8pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Uuc3BsaXQoL1xcclxcbnxcXG58XFxyLykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoSyh0LnN0YXJ0VGltZSkpe2lmKCFhZShlLnRyaW0oKSkmJmFlKHQudGV4dCkpe3ZhciBpPWUudHJpbSgpLnNwbGl0KFwiI3h5d2g9XCIpLG49byhpLDEpO2lmKHQudGV4dD1uWzBdLGlbMV0pe3ZhciBhPW8oaVsxXS5zcGxpdChcIixcIiksNCk7dC54PWFbMF0sdC55PWFbMV0sdC53PWFbMl0sdC5oPWFbM119fX1lbHNle3ZhciBzPWUubWF0Y2goLyhbMC05XXsyfSk/Oj8oWzAtOV17Mn0pOihbMC05XXsyfSkuKFswLTldezIsM30pKCA/LS0+ID8pKFswLTldezJ9KT86PyhbMC05XXsyfSk6KFswLTldezJ9KS4oWzAtOV17MiwzfSkvKTtzJiYodC5zdGFydFRpbWU9NjAqTnVtYmVyKHNbMV18fDApKjYwKzYwKk51bWJlcihzWzJdKStOdW1iZXIoc1szXSkrTnVtYmVyKFwiMC5cIi5jb25jYXQoc1s0XSkpLHQuZW5kVGltZT02MCpOdW1iZXIoc1s2XXx8MCkqNjArNjAqTnVtYmVyKHNbN10pK051bWJlcihzWzhdKStOdW1iZXIoXCIwLlwiLmNvbmNhdChzWzldKSkpfX0pKSx0LnRleHQmJnMucHVzaCh0KX0pKSxzKSxoZWlnaHQ6bnVsbCx1cmxQcmVmaXg6XCJcIn07ci5mcmFtZXNbMF0udGV4dC5zdGFydHNXaXRoKFwiL1wiKXx8ci5mcmFtZXNbMF0udGV4dC5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ci5mcmFtZXNbMF0udGV4dC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIil8fChyLnVybFByZWZpeD1lLnN1YnN0cmluZygwLGUubGFzdEluZGV4T2YoXCIvXCIpKzEpKTt2YXIgbD1uZXcgSW1hZ2U7bC5vbmxvYWQ9ZnVuY3Rpb24oKXtyLmhlaWdodD1sLm5hdHVyYWxIZWlnaHQsci53aWR0aD1sLm5hdHVyYWxXaWR0aCx0LnRodW1ibmFpbHMucHVzaChyKSxpKCl9LGwuc3JjPXIudXJsUHJlZml4K3IuZnJhbWVzWzBdLnRleHR9KSl9KSl9fSx7a2V5Olwic3RhcnRNb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5sb2FkZWQmJlooZSkmJltcInRvdWNobW92ZVwiLFwibW91c2Vtb3ZlXCJdLmluY2x1ZGVzKGUudHlwZSkmJnRoaXMucGxheWVyLm1lZGlhLmR1cmF0aW9uKXtpZihcInRvdWNobW92ZVwiPT09ZS50eXBlKXRoaXMuc2Vla1RpbWU9dGhpcy5wbGF5ZXIubWVkaWEuZHVyYXRpb24qKHRoaXMucGxheWVyLmVsZW1lbnRzLmlucHV0cy5zZWVrLnZhbHVlLzEwMCk7ZWxzZXt2YXIgdD10aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPTEwMC90LndpZHRoKihlLnBhZ2VYLXQubGVmdCk7dGhpcy5zZWVrVGltZT10aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiooaS8xMDApLHRoaXMuc2Vla1RpbWU8MCYmKHRoaXMuc2Vla1RpbWU9MCksdGhpcy5zZWVrVGltZT50aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbi0xJiYodGhpcy5zZWVrVGltZT10aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbi0xKSx0aGlzLm1vdXNlUG9zWD1lLnBhZ2VYLHRoaXMuZWxlbWVudHMudGh1bWIudGltZS5pbm5lclRleHQ9aXQodGhpcy5zZWVrVGltZSl9dGhpcy5zaG93SW1hZ2VBdEN1cnJlbnRUaW1lKCl9fX0se2tleTpcImVuZE1vdmVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudG9nZ2xlVGh1bWJDb250YWluZXIoITEsITApfX0se2tleTpcInN0YXJ0U2NydWJiaW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSl7KFcoZS5idXR0b24pfHwhMT09PWUuYnV0dG9ufHwwPT09ZS5idXR0b24pJiYodGhpcy5tb3VzZURvd249ITAsdGhpcy5wbGF5ZXIubWVkaWEuZHVyYXRpb24mJih0aGlzLnRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lcighMCksdGhpcy50b2dnbGVUaHVtYkNvbnRhaW5lcighMSwhMCksdGhpcy5zaG93SW1hZ2VBdEN1cnJlbnRUaW1lKCkpKX19LHtrZXk6XCJlbmRTY3J1YmJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5tb3VzZURvd249ITEsTWF0aC5jZWlsKHRoaXMubGFzdFRpbWUpPT09TWF0aC5jZWlsKHRoaXMucGxheWVyLm1lZGlhLmN1cnJlbnRUaW1lKT90aGlzLnRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lcighMSk6TGUuY2FsbCh0aGlzLnBsYXllcix0aGlzLnBsYXllci5tZWRpYSxcInRpbWV1cGRhdGVcIiwoZnVuY3Rpb24oKXtlLm1vdXNlRG93bnx8ZS50b2dnbGVTY3J1YmJpbmdDb250YWluZXIoITEpfSkpfX0se2tleTpcImxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnBsYXllci5vbihcInBsYXlcIiwoZnVuY3Rpb24oKXtlLnRvZ2dsZVRodW1iQ29udGFpbmVyKCExLCEwKX0pKSx0aGlzLnBsYXllci5vbihcInNlZWtlZFwiLChmdW5jdGlvbigpe2UudG9nZ2xlVGh1bWJDb250YWluZXIoITEpfSkpLHRoaXMucGxheWVyLm9uKFwidGltZXVwZGF0ZVwiLChmdW5jdGlvbigpe2UubGFzdFRpbWU9ZS5wbGF5ZXIubWVkaWEuY3VycmVudFRpbWV9KSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lcj1oZShcImRpdlwiLHtjbGFzczp0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aHVtYkNvbnRhaW5lcn0pLHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXI9aGUoXCJkaXZcIix7Y2xhc3M6dGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMuaW1hZ2VDb250YWluZXJ9KSx0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyKTt2YXIgZT1oZShcImRpdlwiLHtjbGFzczp0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aW1lQ29udGFpbmVyfSk7dGhpcy5lbGVtZW50cy50aHVtYi50aW1lPWhlKFwic3BhblwiLHt9LFwiMDA6MDBcIiksZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnRodW1iLnRpbWUpLHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLmFwcGVuZENoaWxkKGUpLEcodGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MpJiZ0aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcy5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lciksdGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyPWhlKFwiZGl2XCIse2NsYXNzOnRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLnByZXZpZXdUaHVtYm5haWxzLnNjcnViYmluZ0NvbnRhaW5lcn0pLHRoaXMucGxheWVyLmVsZW1lbnRzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lciYmdGhpcy5lbGVtZW50cy50aHVtYi5jb250YWluZXIucmVtb3ZlKCksdGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyJiZ0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIucmVtb3ZlKCl9fSx7a2V5Olwic2hvd0ltYWdlQXRDdXJyZW50VGltZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLm1vdXNlRG93bj90aGlzLnNldFNjcnViYmluZ0NvbnRhaW5lclNpemUoKTp0aGlzLnNldFRodW1iQ29udGFpbmVyU2l6ZUFuZFBvcygpO3ZhciB0PXRoaXMudGh1bWJuYWlsc1swXS5mcmFtZXMuZmluZEluZGV4KChmdW5jdGlvbih0KXtyZXR1cm4gZS5zZWVrVGltZT49dC5zdGFydFRpbWUmJmUuc2Vla1RpbWU8PXQuZW5kVGltZX0pKSxpPXQ+PTAsbj0wO3RoaXMubW91c2VEb3dufHx0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKGkpLGkmJih0aGlzLnRodW1ibmFpbHMuZm9yRWFjaCgoZnVuY3Rpb24oaSxhKXtlLmxvYWRlZEltYWdlcy5pbmNsdWRlcyhpLmZyYW1lc1t0XS50ZXh0KSYmKG49YSl9KSksdCE9PXRoaXMuc2hvd2luZ1RodW1iJiYodGhpcy5zaG93aW5nVGh1bWI9dCx0aGlzLmxvYWRJbWFnZShuKSkpfX0se2tleTpcImxvYWRJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGk9dGhpcy5zaG93aW5nVGh1bWIsbj10aGlzLnRodW1ibmFpbHNbdF0sYT1uLnVybFByZWZpeCxzPW4uZnJhbWVzW2ldLHI9bi5mcmFtZXNbaV0udGV4dCxvPWErcjtpZih0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQmJnRoaXMuY3VycmVudEltYWdlRWxlbWVudC5kYXRhc2V0LmZpbGVuYW1lPT09cil0aGlzLnNob3dJbWFnZSh0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQscyx0LGksciwhMSksdGhpcy5jdXJyZW50SW1hZ2VFbGVtZW50LmRhdGFzZXQuaW5kZXg9aSx0aGlzLnJlbW92ZU9sZEltYWdlcyh0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQpO2Vsc2V7dGhpcy5sb2FkaW5nSW1hZ2UmJnRoaXMudXNpbmdTcHJpdGVzJiYodGhpcy5sb2FkaW5nSW1hZ2Uub25sb2FkPW51bGwpO3ZhciBsPW5ldyBJbWFnZTtsLnNyYz1vLGwuZGF0YXNldC5pbmRleD1pLGwuZGF0YXNldC5maWxlbmFtZT1yLHRoaXMuc2hvd2luZ1RodW1iRmlsZW5hbWU9cix0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJMb2FkaW5nIGltYWdlOiBcIi5jb25jYXQobykpLGwub25sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIGUuc2hvd0ltYWdlKGwscyx0LGksciwhMCl9LHRoaXMubG9hZGluZ0ltYWdlPWwsdGhpcy5yZW1vdmVPbGRJbWFnZXMobCl9fX0se2tleTpcInNob3dJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxpLG4sYSl7dmFyIHM9IShhcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XSl8fGFyZ3VtZW50c1s1XTt0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJTaG93aW5nIHRodW1iOiBcIi5jb25jYXQoYSxcIi4gbnVtOiBcIikuY29uY2F0KG4sXCIuIHF1YWw6IFwiKS5jb25jYXQoaSxcIi4gbmV3aW1nOiBcIikuY29uY2F0KHMpKSx0aGlzLnNldEltYWdlU2l6ZUFuZE9mZnNldChlLHQpLHMmJih0aGlzLmN1cnJlbnRJbWFnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChlKSx0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQ9ZSx0aGlzLmxvYWRlZEltYWdlcy5pbmNsdWRlcyhhKXx8dGhpcy5sb2FkZWRJbWFnZXMucHVzaChhKSksdGhpcy5wcmVsb2FkTmVhcmJ5KG4sITApLnRoZW4odGhpcy5wcmVsb2FkTmVhcmJ5KG4sITEpKS50aGVuKHRoaXMuZ2V0SGlnaGVyUXVhbGl0eShpLGUsdCxhKSl9fSx7a2V5OlwicmVtb3ZlT2xkSW1hZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztBcnJheS5mcm9tKHRoaXMuY3VycmVudEltYWdlQ29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKChmdW5jdGlvbihpKXtpZihcImltZ1wiPT09aS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBuPXQudXNpbmdTcHJpdGVzPzUwMDoxZTM7aWYoaS5kYXRhc2V0LmluZGV4IT09ZS5kYXRhc2V0LmluZGV4JiYhaS5kYXRhc2V0LmRlbGV0aW5nKXtpLmRhdGFzZXQuZGVsZXRpbmc9ITA7dmFyIGE9dC5jdXJyZW50SW1hZ2VDb250YWluZXI7c2V0VGltZW91dCgoZnVuY3Rpb24oKXthLnJlbW92ZUNoaWxkKGkpLHQucGxheWVyLmRlYnVnLmxvZyhcIlJlbW92aW5nIHRodW1iOiBcIi5jb25jYXQoaS5kYXRhc2V0LmZpbGVuYW1lKSl9KSxuKX19fSkpfX0se2tleTpcInByZWxvYWROZWFyYnlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dmFyIGE9dC50aHVtYm5haWxzWzBdLmZyYW1lc1tlXS50ZXh0O2lmKHQuc2hvd2luZ1RodW1iRmlsZW5hbWU9PT1hKXt2YXIgcztzPWk/dC50aHVtYm5haWxzWzBdLmZyYW1lcy5zbGljZShlKTp0LnRodW1ibmFpbHNbMF0uZnJhbWVzLnNsaWNlKDAsZSkucmV2ZXJzZSgpO3ZhciByPSExO3MuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIGk9ZS50ZXh0O2lmKGkhPT1hJiYhdC5sb2FkZWRJbWFnZXMuaW5jbHVkZXMoaSkpe3I9ITAsdC5wbGF5ZXIuZGVidWcubG9nKFwiUHJlbG9hZGluZyB0aHVtYiBmaWxlbmFtZTogXCIuY29uY2F0KGkpKTt2YXIgcz10LnRodW1ibmFpbHNbMF0udXJsUHJlZml4K2ksbz1uZXcgSW1hZ2U7by5zcmM9cyxvLm9ubG9hZD1mdW5jdGlvbigpe3QucGxheWVyLmRlYnVnLmxvZyhcIlByZWxvYWRlZCB0aHVtYiBmaWxlbmFtZTogXCIuY29uY2F0KGkpKSx0LmxvYWRlZEltYWdlcy5pbmNsdWRlcyhpKXx8dC5sb2FkZWRJbWFnZXMucHVzaChpKSxuKCl9fX0pKSxyfHxuKCl9fSksMzAwKX0pKX19LHtrZXk6XCJnZXRIaWdoZXJRdWFsaXR5XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LGksbil7dmFyIGE9dGhpcztpZihlPHRoaXMudGh1bWJuYWlscy5sZW5ndGgtMSl7dmFyIHM9dC5uYXR1cmFsSGVpZ2h0O3RoaXMudXNpbmdTcHJpdGVzJiYocz1pLmgpLHM8dGhpcy50aHVtYkNvbnRhaW5lckhlaWdodCYmc2V0VGltZW91dCgoZnVuY3Rpb24oKXthLnNob3dpbmdUaHVtYkZpbGVuYW1lPT09biYmKGEucGxheWVyLmRlYnVnLmxvZyhcIlNob3dpbmcgaGlnaGVyIHF1YWxpdHkgdGh1bWIgZm9yOiBcIi5jb25jYXQobikpLGEubG9hZEltYWdlKGUrMSkpfSksMzAwKX19fSx7a2V5OlwidG9nZ2xlVGh1bWJDb250YWluZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0sdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLGk9dGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMudGh1bWJDb250YWluZXJTaG93bjt0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKGksZSksIWUmJnQmJih0aGlzLnNob3dpbmdUaHVtYj1udWxsLHRoaXMuc2hvd2luZ1RodW1iRmlsZW5hbWU9bnVsbCl9fSx7a2V5OlwidG9nZ2xlU2NydWJiaW5nQ29udGFpbmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLHQ9dGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMuc2NydWJiaW5nQ29udGFpbmVyU2hvd247dGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUodCxlKSxlfHwodGhpcy5zaG93aW5nVGh1bWI9bnVsbCx0aGlzLnNob3dpbmdUaHVtYkZpbGVuYW1lPW51bGwpfX0se2tleTpcImRldGVybWluZUNvbnRhaW5lckF1dG9TaXppbmdcIix2YWx1ZTpmdW5jdGlvbigpeyh0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudEhlaWdodD4yMHx8dGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRXaWR0aD4yMCkmJih0aGlzLnNpemVTcGVjaWZpZWRJbkNTUz0hMCl9fSx7a2V5Olwic2V0VGh1bWJDb250YWluZXJTaXplQW5kUG9zXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnNpemVTcGVjaWZpZWRJbkNTUyl7aWYodGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQ+MjAmJnRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50V2lkdGg8MjApe3ZhciBlPU1hdGguZmxvb3IodGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQqdGhpcy50aHVtYkFzcGVjdFJhdGlvKTt0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLndpZHRoPVwiXCIuY29uY2F0KGUsXCJweFwiKX1lbHNlIGlmKHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50SGVpZ2h0PDIwJiZ0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudFdpZHRoPjIwKXt2YXIgdD1NYXRoLmZsb29yKHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50V2lkdGgvdGhpcy50aHVtYkFzcGVjdFJhdGlvKTt0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodD1cIlwiLmNvbmNhdCh0LFwicHhcIil9fWVsc2V7dmFyIGk9TWF0aC5mbG9vcih0aGlzLnRodW1iQ29udGFpbmVySGVpZ2h0KnRoaXMudGh1bWJBc3BlY3RSYXRpbyk7dGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9XCJcIi5jb25jYXQodGhpcy50aHVtYkNvbnRhaW5lckhlaWdodCxcInB4XCIpLHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuc3R5bGUud2lkdGg9XCJcIi5jb25jYXQoaSxcInB4XCIpfXRoaXMuc2V0VGh1bWJDb250YWluZXJQb3MoKX19LHtrZXk6XCJzZXRUaHVtYkNvbnRhaW5lclBvc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdD10aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksaT10aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lcixuPXQubGVmdC1lLmxlZnQrMTAsYT10LnJpZ2h0LWUubGVmdC1pLmNsaWVudFdpZHRoLTEwLHM9dGhpcy5tb3VzZVBvc1gtZS5sZWZ0LWkuY2xpZW50V2lkdGgvMjtzPG4mJihzPW4pLHM+YSYmKHM9YSksaS5zdHlsZS5sZWZ0PVwiXCIuY29uY2F0KHMsXCJweFwiKX19LHtrZXk6XCJzZXRTY3J1YmJpbmdDb250YWluZXJTaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1OdCh0aGlzLnRodW1iQXNwZWN0UmF0aW8se3dpZHRoOnRoaXMucGxheWVyLm1lZGlhLmNsaWVudFdpZHRoLGhlaWdodDp0aGlzLnBsYXllci5tZWRpYS5jbGllbnRIZWlnaHR9KSx0PWUud2lkdGgsaT1lLmhlaWdodDt0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIuc3R5bGUud2lkdGg9XCJcIi5jb25jYXQodCxcInB4XCIpLHRoaXMuZWxlbWVudHMuc2NydWJiaW5nLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9XCJcIi5jb25jYXQoaSxcInB4XCIpfX0se2tleTpcInNldEltYWdlU2l6ZUFuZE9mZnNldFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy51c2luZ1Nwcml0ZXMpe3ZhciBpPXRoaXMudGh1bWJDb250YWluZXJIZWlnaHQvdC5oO2Uuc3R5bGUuaGVpZ2h0PVwiXCIuY29uY2F0KGUubmF0dXJhbEhlaWdodCppLFwicHhcIiksZS5zdHlsZS53aWR0aD1cIlwiLmNvbmNhdChlLm5hdHVyYWxXaWR0aCppLFwicHhcIiksZS5zdHlsZS5sZWZ0PVwiLVwiLmNvbmNhdCh0LngqaSxcInB4XCIpLGUuc3R5bGUudG9wPVwiLVwiLmNvbmNhdCh0LnkqaSxcInB4XCIpfX19LHtrZXk6XCJlbmFibGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWVyLmlzSFRNTDUmJnRoaXMucGxheWVyLmlzVmlkZW8mJnRoaXMucGxheWVyLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscy5lbmFibGVkfX0se2tleTpcImN1cnJlbnRJbWFnZUNvbnRhaW5lclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlRG93bj90aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXI6dGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lcn19LHtrZXk6XCJ1c2luZ1Nwcml0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy50aHVtYm5haWxzWzBdLmZyYW1lc1swXSkuaW5jbHVkZXMoXCJ3XCIpfX0se2tleTpcInRodW1iQXNwZWN0UmF0aW9cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2luZ1Nwcml0ZXM/dGhpcy50aHVtYm5haWxzWzBdLmZyYW1lc1swXS53L3RoaXMudGh1bWJuYWlsc1swXS5mcmFtZXNbMF0uaDp0aGlzLnRodW1ibmFpbHNbMF0ud2lkdGgvdGhpcy50aHVtYm5haWxzWzBdLmhlaWdodH19LHtrZXk6XCJ0aHVtYkNvbnRhaW5lckhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlRG93bj9OdCh0aGlzLnRodW1iQXNwZWN0UmF0aW8se3dpZHRoOnRoaXMucGxheWVyLm1lZGlhLmNsaWVudFdpZHRoLGhlaWdodDp0aGlzLnBsYXllci5tZWRpYS5jbGllbnRIZWlnaHR9KS5oZWlnaHQ6dGhpcy5zaXplU3BlY2lmaWVkSW5DU1M/dGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQ6TWF0aC5mbG9vcih0aGlzLnBsYXllci5tZWRpYS5jbGllbnRXaWR0aC90aGlzLnRodW1iQXNwZWN0UmF0aW8vNCl9fSx7a2V5OlwiY3VycmVudEltYWdlRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlRG93bj90aGlzLmN1cnJlbnRTY3J1YmJpbmdJbWFnZUVsZW1lbnQ6dGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5tb3VzZURvd24/dGhpcy5jdXJyZW50U2NydWJiaW5nSW1hZ2VFbGVtZW50PWU6dGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50PWV9fV0pLHR9KCkseHQ9e2luc2VydEVsZW1lbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztZKHQpP3BlKGUsdGhpcy5tZWRpYSx7c3JjOnR9KTokKHQpJiZ0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3BlKGUsaS5tZWRpYSx0KX0pKX0sY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7bGUoZSxcInNvdXJjZXMubGVuZ3RoXCIpPyhWZS5jYW5jZWxSZXF1ZXN0cy5jYWxsKHRoaXMpLHRoaXMuZGVzdHJveS5jYWxsKHRoaXMsKGZ1bmN0aW9uKCl7dC5vcHRpb25zLnF1YWxpdHk9W10sbWUodC5tZWRpYSksdC5tZWRpYT1udWxsLEcodC5lbGVtZW50cy5jb250YWluZXIpJiZ0LmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTt2YXIgaT1lLnNvdXJjZXMsbj1lLnR5cGUsYT1vKGksMSlbMF0scz1hLnByb3ZpZGVyLHI9dm9pZCAwPT09cz91dC5odG1sNTpzLGw9YS5zcmMsYz1cImh0bWw1XCI9PT1yP246XCJkaXZcIix1PVwiaHRtbDVcIj09PXI/e306e3NyYzpsfTtPYmplY3QuYXNzaWduKHQse3Byb3ZpZGVyOnIsdHlwZTpuLHN1cHBvcnRlZDpFZS5jaGVjayhuLHIsdC5jb25maWcucGxheXNpbmxpbmUpLG1lZGlhOmhlKGMsdSl9KSx0LmVsZW1lbnRzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0Lm1lZGlhKSxRKGUuYXV0b3BsYXkpJiYodC5jb25maWcuYXV0b3BsYXk9ZS5hdXRvcGxheSksdC5pc0hUTUw1JiYodC5jb25maWcuY3Jvc3NvcmlnaW4mJnQubWVkaWEuc2V0QXR0cmlidXRlKFwiY3Jvc3NvcmlnaW5cIixcIlwiKSx0LmNvbmZpZy5hdXRvcGxheSYmdC5tZWRpYS5zZXRBdHRyaWJ1dGUoXCJhdXRvcGxheVwiLFwiXCIpLGFlKGUucG9zdGVyKXx8KHQucG9zdGVyPWUucG9zdGVyKSx0LmNvbmZpZy5sb29wLmFjdGl2ZSYmdC5tZWRpYS5zZXRBdHRyaWJ1dGUoXCJsb29wXCIsXCJcIiksdC5jb25maWcubXV0ZWQmJnQubWVkaWEuc2V0QXR0cmlidXRlKFwibXV0ZWRcIixcIlwiKSx0LmNvbmZpZy5wbGF5c2lubGluZSYmdC5tZWRpYS5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLFwiXCIpKSx5dC5hZGRTdHlsZUhvb2suY2FsbCh0KSx0LmlzSFRNTDUmJnh0Lmluc2VydEVsZW1lbnRzLmNhbGwodCxcInNvdXJjZVwiLGkpLHQuY29uZmlnLnRpdGxlPWUudGl0bGUsUHQuc2V0dXAuY2FsbCh0KSx0LmlzSFRNTDUmJk9iamVjdC5rZXlzKGUpLmluY2x1ZGVzKFwidHJhY2tzXCIpJiZ4dC5pbnNlcnRFbGVtZW50cy5jYWxsKHQsXCJ0cmFja1wiLGUudHJhY2tzKSwodC5pc0hUTUw1fHx0LmlzRW1iZWQmJiF0LnN1cHBvcnRlZC51aSkmJnl0LmJ1aWxkLmNhbGwodCksdC5pc0hUTUw1JiZ0Lm1lZGlhLmxvYWQoKSxhZShlLnByZXZpZXdUaHVtYm5haWxzKXx8KE9iamVjdC5hc3NpZ24odC5jb25maWcucHJldmlld1RodW1ibmFpbHMsZS5wcmV2aWV3VGh1bWJuYWlscyksdC5wcmV2aWV3VGh1bWJuYWlscyYmdC5wcmV2aWV3VGh1bWJuYWlscy5sb2FkZWQmJih0LnByZXZpZXdUaHVtYm5haWxzLmRlc3Ryb3koKSx0LnByZXZpZXdUaHVtYm5haWxzPW51bGwpLHQuY29uZmlnLnByZXZpZXdUaHVtYm5haWxzLmVuYWJsZWQmJih0LnByZXZpZXdUaHVtYm5haWxzPW5ldyBNdCh0KSkpLHQuZnVsbHNjcmVlbi51cGRhdGUoKX0pLCEwKSk6dGhpcy5kZWJ1Zy53YXJuKFwiSW52YWxpZCBzb3VyY2UgZm9ybWF0XCIpfX07dmFyIEl0LEx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChpLG4pe3ZhciBhPXRoaXM7aWYoZSh0aGlzLHQpLHRoaXMudGltZXJzPXt9LHRoaXMucmVhZHk9ITEsdGhpcy5sb2FkaW5nPSExLHRoaXMuZmFpbGVkPSExLHRoaXMudG91Y2g9RWUudG91Y2gsdGhpcy5tZWRpYT1pLFkodGhpcy5tZWRpYSkmJih0aGlzLm1lZGlhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5tZWRpYSkpLCh3aW5kb3cualF1ZXJ5JiZ0aGlzLm1lZGlhIGluc3RhbmNlb2YgalF1ZXJ5fHxKKHRoaXMubWVkaWEpfHwkKHRoaXMubWVkaWEpKSYmKHRoaXMubWVkaWE9dGhpcy5tZWRpYVswXSksdGhpcy5jb25maWc9Y2Uoe30sb3QsdC5kZWZhdWx0cyxufHx7fSxmdW5jdGlvbigpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLm1lZGlhLmdldEF0dHJpYnV0ZShcImRhdGEtcGx5ci1jb25maWdcIikpfWNhdGNoKGUpe3JldHVybnt9fX0oKSksdGhpcy5lbGVtZW50cz17Y29udGFpbmVyOm51bGwsZnVsbHNjcmVlbjpudWxsLGNhcHRpb25zOm51bGwsYnV0dG9uczp7fSxkaXNwbGF5Ont9LHByb2dyZXNzOnt9LGlucHV0czp7fSxzZXR0aW5nczp7cG9wdXA6bnVsbCxtZW51Om51bGwscGFuZWxzOnt9LGJ1dHRvbnM6e319fSx0aGlzLmNhcHRpb25zPXthY3RpdmU6bnVsbCxjdXJyZW50VHJhY2s6LTEsbWV0YTpuZXcgV2Vha01hcH0sdGhpcy5mdWxsc2NyZWVuPXthY3RpdmU6ITF9LHRoaXMub3B0aW9ucz17c3BlZWQ6W10scXVhbGl0eTpbXX0sdGhpcy5kZWJ1Zz1uZXcgbXQodGhpcy5jb25maWcuZGVidWcpLHRoaXMuZGVidWcubG9nKFwiQ29uZmlnXCIsdGhpcy5jb25maWcpLHRoaXMuZGVidWcubG9nKFwiU3VwcG9ydFwiLEVlKSwhVyh0aGlzLm1lZGlhKSYmRyh0aGlzLm1lZGlhKSlpZih0aGlzLm1lZGlhLnBseXIpdGhpcy5kZWJ1Zy53YXJuKFwiVGFyZ2V0IGFscmVhZHkgc2V0dXBcIik7ZWxzZSBpZih0aGlzLmNvbmZpZy5lbmFibGVkKWlmKEVlLmNoZWNrKCkuYXBpKXt2YXIgcz10aGlzLm1lZGlhLmNsb25lTm9kZSghMCk7cy5hdXRvcGxheT0hMSx0aGlzLmVsZW1lbnRzLm9yaWdpbmFsPXM7dmFyIHI9dGhpcy5tZWRpYS50YWdOYW1lLnRvTG93ZXJDYXNlKCksbz1udWxsLGw9bnVsbDtzd2l0Y2gocil7Y2FzZVwiZGl2XCI6aWYobz10aGlzLm1lZGlhLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIiksRyhvKSl7aWYobD1hdChvLmdldEF0dHJpYnV0ZShcInNyY1wiKSksdGhpcy5wcm92aWRlcj1mdW5jdGlvbihlKXtyZXR1cm4vXihodHRwcz86XFwvXFwvKT8od3d3XFwuKT8oeW91dHViZVxcLmNvbXx5b3V0dWJlLW5vY29va2llXFwuY29tfHlvdXR1XFwuP2JlKVxcLy4rJC8udGVzdChlKT91dC55b3V0dWJlOi9eaHR0cHM/OlxcL1xcL3BsYXllci52aW1lby5jb21cXC92aWRlb1xcL1xcZHswLDl9KD89XFxifFxcLykvLnRlc3QoZSk/dXQudmltZW86bnVsbH0obC50b1N0cmluZygpKSx0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcj10aGlzLm1lZGlhLHRoaXMubWVkaWE9byx0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc05hbWU9XCJcIixsLnNlYXJjaC5sZW5ndGgpe3ZhciBjPVtcIjFcIixcInRydWVcIl07Yy5pbmNsdWRlcyhsLnNlYXJjaFBhcmFtcy5nZXQoXCJhdXRvcGxheVwiKSkmJih0aGlzLmNvbmZpZy5hdXRvcGxheT0hMCksYy5pbmNsdWRlcyhsLnNlYXJjaFBhcmFtcy5nZXQoXCJsb29wXCIpKSYmKHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlPSEwKSx0aGlzLmlzWW91VHViZT8odGhpcy5jb25maWcucGxheXNpbmxpbmU9Yy5pbmNsdWRlcyhsLnNlYXJjaFBhcmFtcy5nZXQoXCJwbGF5c2lubGluZVwiKSksdGhpcy5jb25maWcueW91dHViZS5obD1sLnNlYXJjaFBhcmFtcy5nZXQoXCJobFwiKSk6dGhpcy5jb25maWcucGxheXNpbmxpbmU9ITB9fWVsc2UgdGhpcy5wcm92aWRlcj10aGlzLm1lZGlhLmdldEF0dHJpYnV0ZSh0aGlzLmNvbmZpZy5hdHRyaWJ1dGVzLmVtYmVkLnByb3ZpZGVyKSx0aGlzLm1lZGlhLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmNvbmZpZy5hdHRyaWJ1dGVzLmVtYmVkLnByb3ZpZGVyKTtpZihhZSh0aGlzLnByb3ZpZGVyKXx8IU9iamVjdC5rZXlzKHV0KS5pbmNsdWRlcyh0aGlzLnByb3ZpZGVyKSlyZXR1cm4gdm9pZCB0aGlzLmRlYnVnLmVycm9yKFwiU2V0dXAgZmFpbGVkOiBJbnZhbGlkIHByb3ZpZGVyXCIpO3RoaXMudHlwZT1odDticmVhaztjYXNlXCJ2aWRlb1wiOmNhc2VcImF1ZGlvXCI6dGhpcy50eXBlPXIsdGhpcy5wcm92aWRlcj11dC5odG1sNSx0aGlzLm1lZGlhLmhhc0F0dHJpYnV0ZShcImNyb3Nzb3JpZ2luXCIpJiYodGhpcy5jb25maWcuY3Jvc3NvcmlnaW49ITApLHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKFwiYXV0b3BsYXlcIikmJih0aGlzLmNvbmZpZy5hdXRvcGxheT0hMCksKHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKFwicGxheXNpbmxpbmVcIil8fHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKFwid2Via2l0LXBsYXlzaW5saW5lXCIpKSYmKHRoaXMuY29uZmlnLnBsYXlzaW5saW5lPSEwKSx0aGlzLm1lZGlhLmhhc0F0dHJpYnV0ZShcIm11dGVkXCIpJiYodGhpcy5jb25maWcubXV0ZWQ9ITApLHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKFwibG9vcFwiKSYmKHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlPSEwKTticmVhaztkZWZhdWx0OnJldHVybiB2b2lkIHRoaXMuZGVidWcuZXJyb3IoXCJTZXR1cCBmYWlsZWQ6IHVuc3VwcG9ydGVkIHR5cGVcIil9dGhpcy5zdXBwb3J0ZWQ9RWUuY2hlY2sodGhpcy50eXBlLHRoaXMucHJvdmlkZXIsdGhpcy5jb25maWcucGxheXNpbmxpbmUpLHRoaXMuc3VwcG9ydGVkLmFwaT8odGhpcy5ldmVudExpc3RlbmVycz1bXSx0aGlzLmxpc3RlbmVycz1uZXcgdnQodGhpcyksdGhpcy5zdG9yYWdlPW5ldyAkZSh0aGlzKSx0aGlzLm1lZGlhLnBseXI9dGhpcyxHKHRoaXMuZWxlbWVudHMuY29udGFpbmVyKXx8KHRoaXMuZWxlbWVudHMuY29udGFpbmVyPWhlKFwiZGl2XCIse3RhYmluZGV4OjB9KSx1ZSh0aGlzLm1lZGlhLHRoaXMuZWxlbWVudHMuY29udGFpbmVyKSkseXQubWlncmF0ZVN0eWxlcy5jYWxsKHRoaXMpLHl0LmFkZFN0eWxlSG9vay5jYWxsKHRoaXMpLFB0LnNldHVwLmNhbGwodGhpcyksdGhpcy5jb25maWcuZGVidWcmJnhlLmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5ldmVudHMuam9pbihcIiBcIiksKGZ1bmN0aW9uKGUpe2EuZGVidWcubG9nKFwiZXZlbnQ6IFwiLmNvbmNhdChlLnR5cGUpKX0pKSx0aGlzLmZ1bGxzY3JlZW49bmV3IGZ0KHRoaXMpLCh0aGlzLmlzSFRNTDV8fHRoaXMuaXNFbWJlZCYmIXRoaXMuc3VwcG9ydGVkLnVpKSYmeXQuYnVpbGQuY2FsbCh0aGlzKSx0aGlzLmxpc3RlbmVycy5jb250YWluZXIoKSx0aGlzLmxpc3RlbmVycy5nbG9iYWwoKSx0aGlzLmNvbmZpZy5hZHMuZW5hYmxlZCYmKHRoaXMuYWRzPW5ldyBFdCh0aGlzKSksdGhpcy5pc0hUTUw1JiZ0aGlzLmNvbmZpZy5hdXRvcGxheSYmc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gcWUoYS5wbGF5KCkpfSksMTApLHRoaXMubGFzdFNlZWtUaW1lPTAsdGhpcy5jb25maWcucHJldmlld1RodW1ibmFpbHMuZW5hYmxlZCYmKHRoaXMucHJldmlld1RodW1ibmFpbHM9bmV3IE10KHRoaXMpKSk6dGhpcy5kZWJ1Zy5lcnJvcihcIlNldHVwIGZhaWxlZDogbm8gc3VwcG9ydFwiKX1lbHNlIHRoaXMuZGVidWcuZXJyb3IoXCJTZXR1cCBmYWlsZWQ6IG5vIHN1cHBvcnRcIik7ZWxzZSB0aGlzLmRlYnVnLmVycm9yKFwiU2V0dXAgZmFpbGVkOiBkaXNhYmxlZCBieSBjb25maWdcIik7ZWxzZSB0aGlzLmRlYnVnLmVycm9yKFwiU2V0dXAgZmFpbGVkOiBubyBzdWl0YWJsZSBlbGVtZW50IHBhc3NlZFwiKX1yZXR1cm4gaSh0LFt7a2V5OlwicGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gWCh0aGlzLm1lZGlhLnBsYXkpPyh0aGlzLmFkcyYmdGhpcy5hZHMuZW5hYmxlZCYmdGhpcy5hZHMubWFuYWdlclByb21pc2UudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gZS5hZHMucGxheSgpfSkpLmNhdGNoKChmdW5jdGlvbigpe3JldHVybiBxZShlLm1lZGlhLnBsYXkoKSl9KSksdGhpcy5tZWRpYS5wbGF5KCkpOm51bGx9fSx7a2V5OlwicGF1c2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBsYXlpbmcmJlgodGhpcy5tZWRpYS5wYXVzZSk/dGhpcy5tZWRpYS5wYXVzZSgpOm51bGx9fSx7a2V5OlwidG9nZ2xlUGxheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybihRKGUpP2U6IXRoaXMucGxheWluZyk/dGhpcy5wbGF5KCk6dGhpcy5wYXVzZSgpfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNIVE1MNT8odGhpcy5wYXVzZSgpLHRoaXMucmVzdGFydCgpKTpYKHRoaXMubWVkaWEuc3RvcCkmJnRoaXMubWVkaWEuc3RvcCgpfX0se2tleTpcInJlc3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY3VycmVudFRpbWU9MH19LHtrZXk6XCJyZXdpbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmN1cnJlbnRUaW1lLT1LKGUpP2U6dGhpcy5jb25maWcuc2Vla1RpbWV9fSx7a2V5OlwiZm9yd2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY3VycmVudFRpbWUrPUsoZSk/ZTp0aGlzLmNvbmZpZy5zZWVrVGltZX19LHtrZXk6XCJpbmNyZWFzZVZvbHVtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWVkaWEubXV0ZWQ/MDp0aGlzLnZvbHVtZTt0aGlzLnZvbHVtZT10KyhLKGUpP2U6MCl9fSx7a2V5OlwiZGVjcmVhc2VWb2x1bWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmluY3JlYXNlVm9sdW1lKC1lKX19LHtrZXk6XCJ0b2dnbGVDYXB0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3J0LnRvZ2dsZS5jYWxsKHRoaXMsZSwhMSl9fSx7a2V5OlwiYWlycGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7RWUuYWlycGxheSYmdGhpcy5tZWRpYS53ZWJraXRTaG93UGxheWJhY2tUYXJnZXRQaWNrZXIoKX19LHtrZXk6XCJ0b2dnbGVDb250cm9sc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuc3VwcG9ydGVkLnVpJiYhdGhpcy5pc0F1ZGlvKXt2YXIgdD13ZSh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmhpZGVDb250cm9scyksaT12b2lkIDA9PT1lP3ZvaWQgMDohZSxuPWJlKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaGlkZUNvbnRyb2xzLGkpO2lmKG4mJiQodGhpcy5jb25maWcuY29udHJvbHMpJiZ0aGlzLmNvbmZpZy5jb250cm9scy5pbmNsdWRlcyhcInNldHRpbmdzXCIpJiYhYWUodGhpcy5jb25maWcuc2V0dGluZ3MpJiZudC50b2dnbGVNZW51LmNhbGwodGhpcywhMSksbiE9PXQpe3ZhciBhPW4/XCJjb250cm9sc2hpZGRlblwiOlwiY29udHJvbHNzaG93blwiO09lLmNhbGwodGhpcyx0aGlzLm1lZGlhLGEpfXJldHVybiFufXJldHVybiExfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt4ZS5jYWxsKHRoaXMsdGhpcy5lbGVtZW50cy5jb250YWluZXIsZSx0KX19LHtrZXk6XCJvbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtMZS5jYWxsKHRoaXMsdGhpcy5lbGVtZW50cy5jb250YWluZXIsZSx0KX19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlLHQpe0llKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLGUsdCl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKHRoaXMucmVhZHkpe3ZhciBuPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz1cIlwiLHQuZW1iZWQ9bnVsbCxpPyhPYmplY3Qua2V5cyh0LmVsZW1lbnRzKS5sZW5ndGgmJihtZSh0LmVsZW1lbnRzLmJ1dHRvbnMucGxheSksbWUodC5lbGVtZW50cy5jYXB0aW9ucyksbWUodC5lbGVtZW50cy5jb250cm9scyksbWUodC5lbGVtZW50cy53cmFwcGVyKSx0LmVsZW1lbnRzLmJ1dHRvbnMucGxheT1udWxsLHQuZWxlbWVudHMuY2FwdGlvbnM9bnVsbCx0LmVsZW1lbnRzLmNvbnRyb2xzPW51bGwsdC5lbGVtZW50cy53cmFwcGVyPW51bGwpLFgoZSkmJmUoKSk6KF9lLmNhbGwodCksZ2UodC5lbGVtZW50cy5vcmlnaW5hbCx0LmVsZW1lbnRzLmNvbnRhaW5lciksT2UuY2FsbCh0LHQuZWxlbWVudHMub3JpZ2luYWwsXCJkZXN0cm95ZWRcIiwhMCksWChlKSYmZS5jYWxsKHQuZWxlbWVudHMub3JpZ2luYWwpLHQucmVhZHk9ITEsc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmVsZW1lbnRzPW51bGwsdC5tZWRpYT1udWxsfSksMjAwKSl9O3RoaXMuc3RvcCgpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5sb2FkaW5nKSxjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuY29udHJvbHMpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZXNpemVkKSx0aGlzLmlzSFRNTDU/KHl0LnRvZ2dsZU5hdGl2ZUNvbnRyb2xzLmNhbGwodGhpcywhMCksbigpKTp0aGlzLmlzWW91VHViZT8oY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVycy5idWZmZXJpbmcpLGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcnMucGxheWluZyksbnVsbCE9PXRoaXMuZW1iZWQmJlgodGhpcy5lbWJlZC5kZXN0cm95KSYmdGhpcy5lbWJlZC5kZXN0cm95KCksbigpKTp0aGlzLmlzVmltZW8mJihudWxsIT09dGhpcy5lbWJlZCYmdGhpcy5lbWJlZC51bmxvYWQoKS50aGVuKG4pLHNldFRpbWVvdXQobiwyMDApKX19fSx7a2V5Olwic3VwcG9ydHNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gRWUubWltZS5jYWxsKHRoaXMsZSl9fSx7a2V5OlwiaXNIVE1MNVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3ZpZGVyPT09dXQuaHRtbDV9fSx7a2V5OlwiaXNFbWJlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzWW91VHViZXx8dGhpcy5pc1ZpbWVvfX0se2tleTpcImlzWW91VHViZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3ZpZGVyPT09dXQueW91dHViZX19LHtrZXk6XCJpc1ZpbWVvXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdmlkZXI9PT11dC52aW1lb319LHtrZXk6XCJpc1ZpZGVvXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZT09PWh0fX0se2tleTpcImlzQXVkaW9cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlPT09ZHR9fSx7a2V5OlwicGxheWluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMucmVhZHkmJiF0aGlzLnBhdXNlZCYmIXRoaXMuZW5kZWQpfX0se2tleTpcInBhdXNlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMubWVkaWEucGF1c2VkKX19LHtrZXk6XCJzdG9wcGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5wYXVzZWQmJjA9PT10aGlzLmN1cnJlbnRUaW1lKX19LHtrZXk6XCJlbmRlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMubWVkaWEuZW5kZWQpfX0se2tleTpcImN1cnJlbnRUaW1lXCIsc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMuZHVyYXRpb24pe3ZhciB0PUsoZSkmJmU+MDt0aGlzLm1lZGlhLmN1cnJlbnRUaW1lPXQ/TWF0aC5taW4oZSx0aGlzLmR1cmF0aW9uKTowLHRoaXMuZGVidWcubG9nKFwiU2Vla2luZyB0byBcIi5jb25jYXQodGhpcy5jdXJyZW50VGltZSxcIiBzZWNvbmRzXCIpKX19LGdldDpmdW5jdGlvbigpe3JldHVybiBOdW1iZXIodGhpcy5tZWRpYS5jdXJyZW50VGltZSl9fSx7a2V5OlwiYnVmZmVyZWRcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lZGlhLmJ1ZmZlcmVkO3JldHVybiBLKGUpP2U6ZSYmZS5sZW5ndGgmJnRoaXMuZHVyYXRpb24+MD9lLmVuZCgwKS90aGlzLmR1cmF0aW9uOjB9fSx7a2V5Olwic2Vla2luZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMubWVkaWEuc2Vla2luZyl9fSx7a2V5OlwiZHVyYXRpb25cIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1wYXJzZUZsb2F0KHRoaXMuY29uZmlnLmR1cmF0aW9uKSx0PSh0aGlzLm1lZGlhfHx7fSkuZHVyYXRpb24saT1LKHQpJiZ0IT09MS8wP3Q6MDtyZXR1cm4gZXx8aX19LHtrZXk6XCJ2b2x1bWVcIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtZKHQpJiYodD1OdW1iZXIodCkpLEsodCl8fCh0PXRoaXMuc3RvcmFnZS5nZXQoXCJ2b2x1bWVcIikpLEsodCl8fCh0PXRoaXMuY29uZmlnLnZvbHVtZSksdD4xJiYodD0xKSx0PDAmJih0PTApLHRoaXMuY29uZmlnLnZvbHVtZT10LHRoaXMubWVkaWEudm9sdW1lPXQsIWFlKGUpJiZ0aGlzLm11dGVkJiZ0PjAmJih0aGlzLm11dGVkPSExKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE51bWJlcih0aGlzLm1lZGlhLnZvbHVtZSl9fSx7a2V5OlwibXV0ZWRcIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtRKHQpfHwodD10aGlzLnN0b3JhZ2UuZ2V0KFwibXV0ZWRcIikpLFEodCl8fCh0PXRoaXMuY29uZmlnLm11dGVkKSx0aGlzLmNvbmZpZy5tdXRlZD10LHRoaXMubWVkaWEubXV0ZWQ9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5tdXRlZCl9fSx7a2V5OlwiaGFzQXVkaW9cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0hUTUw1fHwoISF0aGlzLmlzQXVkaW98fChCb29sZWFuKHRoaXMubWVkaWEubW96SGFzQXVkaW8pfHxCb29sZWFuKHRoaXMubWVkaWEud2Via2l0QXVkaW9EZWNvZGVkQnl0ZUNvdW50KXx8Qm9vbGVhbih0aGlzLm1lZGlhLmF1ZGlvVHJhY2tzJiZ0aGlzLm1lZGlhLmF1ZGlvVHJhY2tzLmxlbmd0aCkpKX19LHtrZXk6XCJzcGVlZFwiLHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9bnVsbDtLKGUpJiYoaT1lKSxLKGkpfHwoaT10aGlzLnN0b3JhZ2UuZ2V0KFwic3BlZWRcIikpLEsoaSl8fChpPXRoaXMuY29uZmlnLnNwZWVkLnNlbGVjdGVkKTt2YXIgbj10aGlzLm1pbmltdW1TcGVlZCxhPXRoaXMubWF4aW11bVNwZWVkO2k9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCx0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjI1NTtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSx0KSxpKX0oaSxuLGEpLHRoaXMuY29uZmlnLnNwZWVkLnNlbGVjdGVkPWksc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Lm1lZGlhLnBsYXliYWNrUmF0ZT1pfSksMCl9LGdldDpmdW5jdGlvbigpe3JldHVybiBOdW1iZXIodGhpcy5tZWRpYS5wbGF5YmFja1JhdGUpfX0se2tleTpcIm1pbmltdW1TcGVlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzWW91VHViZT9NYXRoLm1pbi5hcHBseShNYXRoLGwodGhpcy5vcHRpb25zLnNwZWVkKSk6dGhpcy5pc1ZpbWVvPy41Oi4wNjI1fX0se2tleTpcIm1heGltdW1TcGVlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzWW91VHViZT9NYXRoLm1heC5hcHBseShNYXRoLGwodGhpcy5vcHRpb25zLnNwZWVkKSk6dGhpcy5pc1ZpbWVvPzI6MTZ9fSx7a2V5OlwicXVhbGl0eVwiLHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbmZpZy5xdWFsaXR5LGk9dGhpcy5vcHRpb25zLnF1YWxpdHk7aWYoaS5sZW5ndGgpe3ZhciBuPVshYWUoZSkmJk51bWJlcihlKSx0aGlzLnN0b3JhZ2UuZ2V0KFwicXVhbGl0eVwiKSx0LnNlbGVjdGVkLHQuZGVmYXVsdF0uZmluZChLKSxhPSEwO2lmKCFpLmluY2x1ZGVzKG4pKXt2YXIgcz1mdW5jdGlvbihlLHQpe3JldHVybiAkKGUpJiZlLmxlbmd0aD9lLnJlZHVjZSgoZnVuY3Rpb24oZSxpKXtyZXR1cm4gTWF0aC5hYnMoaS10KTxNYXRoLmFicyhlLXQpP2k6ZX0pKTpudWxsfShpLG4pO3RoaXMuZGVidWcud2FybihcIlVuc3VwcG9ydGVkIHF1YWxpdHkgb3B0aW9uOiBcIi5jb25jYXQobixcIiwgdXNpbmcgXCIpLmNvbmNhdChzLFwiIGluc3RlYWRcIikpLG49cyxhPSExfXQuc2VsZWN0ZWQ9bix0aGlzLm1lZGlhLnF1YWxpdHk9bixhJiZ0aGlzLnN0b3JhZ2Uuc2V0KHtxdWFsaXR5Om59KX19LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lZGlhLnF1YWxpdHl9fSx7a2V5OlwibG9vcFwiLHNldDpmdW5jdGlvbihlKXt2YXIgdD1RKGUpP2U6dGhpcy5jb25maWcubG9vcC5hY3RpdmU7dGhpcy5jb25maWcubG9vcC5hY3RpdmU9dCx0aGlzLm1lZGlhLmxvb3A9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5sb29wKX19LHtrZXk6XCJzb3VyY2VcIixzZXQ6ZnVuY3Rpb24oZSl7eHQuY2hhbmdlLmNhbGwodGhpcyxlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVkaWEuY3VycmVudFNyY319LHtrZXk6XCJkb3dubG9hZFwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29uZmlnLnVybHMuZG93bmxvYWQ7cmV0dXJuIG5lKGUpP2U6dGhpcy5zb3VyY2V9LHNldDpmdW5jdGlvbihlKXtuZShlKSYmKHRoaXMuY29uZmlnLnVybHMuZG93bmxvYWQ9ZSxudC5zZXREb3dubG9hZFVybC5jYWxsKHRoaXMpKX19LHtrZXk6XCJwb3N0ZXJcIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pc1ZpZGVvP3l0LnNldFBvc3Rlci5jYWxsKHRoaXMsZSwhMSkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpOnRoaXMuZGVidWcud2FybihcIlBvc3RlciBjYW4gb25seSBiZSBzZXQgZm9yIHZpZGVvXCIpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZpZGVvP3RoaXMubWVkaWEuZ2V0QXR0cmlidXRlKFwicG9zdGVyXCIpfHx0aGlzLm1lZGlhLmdldEF0dHJpYnV0ZShcImRhdGEtcG9zdGVyXCIpOm51bGx9fSx7a2V5OlwicmF0aW9cIixnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5pc1ZpZGVvKXJldHVybiBudWxsO3ZhciBlPUhlKEZlLmNhbGwodGhpcykpO3JldHVybiAkKGUpP2Uuam9pbihcIjpcIik6ZX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuaXNWaWRlbz9ZKGUpJiZEZShlKT8odGhpcy5jb25maWcucmF0aW89ZSxSZS5jYWxsKHRoaXMpKTp0aGlzLmRlYnVnLmVycm9yKFwiSW52YWxpZCBhc3BlY3QgcmF0aW8gc3BlY2lmaWVkIChcIi5jb25jYXQoZSxcIilcIikpOnRoaXMuZGVidWcud2FybihcIkFzcGVjdCByYXRpbyBjYW4gb25seSBiZSBzZXQgZm9yIHZpZGVvXCIpfX0se2tleTpcImF1dG9wbGF5XCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVEoZSk/ZTp0aGlzLmNvbmZpZy5hdXRvcGxheTt0aGlzLmNvbmZpZy5hdXRvcGxheT10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQm9vbGVhbih0aGlzLmNvbmZpZy5hdXRvcGxheSl9fSx7a2V5OlwiY3VycmVudFRyYWNrXCIsc2V0OmZ1bmN0aW9uKGUpe3J0LnNldC5jYWxsKHRoaXMsZSwhMSl9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY2FwdGlvbnMsdD1lLnRvZ2dsZWQsaT1lLmN1cnJlbnRUcmFjaztyZXR1cm4gdD9pOi0xfX0se2tleTpcImxhbmd1YWdlXCIsc2V0OmZ1bmN0aW9uKGUpe3J0LnNldExhbmd1YWdlLmNhbGwodGhpcyxlLCExKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuKHJ0LmdldEN1cnJlbnRUcmFjay5jYWxsKHRoaXMpfHx7fSkubGFuZ3VhZ2V9fSx7a2V5OlwicGlwXCIsc2V0OmZ1bmN0aW9uKGUpe2lmKEVlLnBpcCl7dmFyIHQ9UShlKT9lOiF0aGlzLnBpcDtYKHRoaXMubWVkaWEud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSkmJnRoaXMubWVkaWEud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSh0P2x0OmN0KSxYKHRoaXMubWVkaWEucmVxdWVzdFBpY3R1cmVJblBpY3R1cmUpJiYoIXRoaXMucGlwJiZ0P3RoaXMubWVkaWEucmVxdWVzdFBpY3R1cmVJblBpY3R1cmUoKTp0aGlzLnBpcCYmIXQmJmRvY3VtZW50LmV4aXRQaWN0dXJlSW5QaWN0dXJlKCkpfX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEVlLnBpcD9hZSh0aGlzLm1lZGlhLndlYmtpdFByZXNlbnRhdGlvbk1vZGUpP3RoaXMubWVkaWE9PT1kb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRWxlbWVudDp0aGlzLm1lZGlhLndlYmtpdFByZXNlbnRhdGlvbk1vZGU9PT1sdDpudWxsfX1dLFt7a2V5Olwic3VwcG9ydGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBFZS5jaGVjayhlLHQsaSl9fSx7a2V5OlwibG9hZFNwcml0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEdlKGUsdCl9fSx7a2V5Olwic2V0dXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1udWxsO3JldHVybiBZKGUpP249QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpKTpKKGUpP249QXJyYXkuZnJvbShlKTokKGUpJiYobj1lLmZpbHRlcihHKSksYWUobik/bnVsbDpuLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUsaSl9KSl9fV0pLHR9KCk7cmV0dXJuIEx0LmRlZmF1bHRzPShJdD1vdCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEl0KSkpLEx0fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx5ci5taW4uanMubWFwXG4iXSwiZmlsZSI6InBseXIubWluLmpzIn0=
