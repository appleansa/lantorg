function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(x,e){"use strict";function m(e){return null!=e&&e===e.window}var t=[],i=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},l=t.push,r=t.indexOf,n={},o=n.toString,y=n.hasOwnProperty,a=y.toString,c=a.call(Object),v={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},C=x.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var i,r,o=(n=n||C).createElement("script");if(o.text=e,t)for(i in u)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function k(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var d="3.5.1",E=function(e,t){return new E.fn.init(e,t)};function h(e){var t=!!e&&"length"in e&&e.length,n=k(e);return!b(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}E.fn=E.prototype={jquery:d,constructor:E,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(n){return this.pushStack(E.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},E.extend=E.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||b(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(c&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],o=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,a[t]=E.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},E.extend({expando:"jQuery"+(d+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=i(e))||"function"==typeof(n=y.call(t,"constructor")&&t.constructor)&&a.call(n)===c)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(h(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(h(Object(e))?E.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:r.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!=a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(h(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return g(a)},guid:1,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=t[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var f=function(n){function d(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320))}function r(){T()}var e,f,w,o,a,p,h,m,k,l,c,T,x,s,C,g,u,y,v,E="sizzle"+ +new Date,b=n.document,S=0,i=0,A=le(),N=le(),P=le(),L=le(),j=function(e,t){return e===t&&(c=!0),0},M={}.hasOwnProperty,t=[],D=t.pop,O=t.push,I=t.push,q=t.slice,H=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+R+"*("+F+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+R+"*\\]",W=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",V=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),U=new RegExp("^"+R+"*,"+R+"*"),$=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),K=new RegExp(R+"|>"),X=new RegExp(W),Y=new RegExp("^"+F+"$"),Q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},G=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,ie=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(t=q.call(b.childNodes),b.childNodes),t[b.childNodes.length].nodeType}catch(e){I={apply:t.length?function(e,t){O.apply(e,q.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(t,e,n,i){var r,o,a,s,l,c,u,d=e&&e.ownerDocument,h=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==h&&9!==h&&11!==h)return n;if(!i&&(T(e),e=e||x,C)){if(11!==h&&(l=te.exec(t)))if(r=l[1]){if(9===h){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&v(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return I.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&f.getElementsByClassName&&e.getElementsByClassName)return I.apply(n,e.getElementsByClassName(r)),n}if(f.qsa&&!L[t+" "]&&(!g||!g.test(t))&&(1!==h||"object"!==e.nodeName.toLowerCase())){if(u=t,d=e,1===h&&(K.test(t)||$.test(t))){for((d=ne.test(t)&&ye(e.parentNode)||e)===e&&f.scope||((s=e.getAttribute("id"))?s=s.replace(re,oe):e.setAttribute("id",s=E)),o=(c=p(t)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+be(c[o]);u=c.join(",")}try{return I.apply(n,d.querySelectorAll(u)),n}catch(e){L(t,!0)}finally{s===E&&e.removeAttribute("id")}}}return m(t.replace(z,"$1"),e,n,i)}function le(){var i=[];return function e(t,n){return i.push(t+" ")>w.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function ce(e){return e[E]=!0,e}function ue(e){var t=x.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pe(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ge(a){return ce(function(o){return o=+o,ce(function(e,t){for(var n,i=a([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!G.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:b;return i!=x&&9===i.nodeType&&i.documentElement&&(s=(x=i).documentElement,C=!a(x),b!=x&&(n=x.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",r,!1):n.attachEvent&&n.attachEvent("onunload",r)),f.scope=ue(function(e){return s.appendChild(e).appendChild(x.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=ue(function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=ee.test(x.getElementsByClassName),f.getById=ue(function(e){return s.appendChild(e).id=E,!x.getElementsByName||!x.getElementsByName(E).length}),f.getById?(w.filter.ID=function(e){var t=e.replace(ie,d);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var n=e.replace(ie,d);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&C){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),w.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},w.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&C)return t.getElementsByClassName(e)},u=[],g=[],(f.qsa=ee.test(x.querySelectorAll))&&(ue(function(e){var t;s.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+_+")"),e.querySelectorAll("[id~="+E+"-]").length||g.push("~="),(t=x.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=x.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),s.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=ee.test(y=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&ue(function(e){f.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),u.push("!=",W)}),g=g.length&&new RegExp(g.join("|")),u=u.length&&new RegExp(u.join("|")),t=ee.test(s.compareDocumentPosition),v=t||ee.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e==x||e.ownerDocument==b&&v(b,e)?-1:t==x||t.ownerDocument==b&&v(b,t)?1:l?H(l,e)-H(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e==x?-1:t==x?1:r?-1:o?1:l?H(l,e)-H(l,t):0;if(r===o)return he(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?he(a[i],s[i]):a[i]==b?-1:s[i]==b?1:0}),x},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),f.matchesSelector&&C&&!L[t+" "]&&(!u||!u.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){L(t,!0)}return 0<se(t,x,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=x&&T(e),v(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=x&&T(e);var n=w.attrHandle[t.toLowerCase()],i=n&&M.call(w.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==i?i:f.attributes||!C?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],i=0,r=0;if(c=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(j),c){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return l=null,e},o=se.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(w=se.selectors={cacheLength:50,createPseudo:ce,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,d),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&A(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=se.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(V," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,m,g){var y="nth"!==p.slice(0,3),v="last"!==p.slice(-4),b="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,a,s,l,c=y!=v?"nextSibling":"previousSibling",u=e.parentNode,d=b&&e.nodeName.toLowerCase(),h=!n&&!b,f=!1;if(u){if(y){for(;c;){for(a=e;a=a[c];)if(b?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&h){for(f=(s=(i=(r=(o=(a=u)[E]||(a[E]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(f=s=0)||l.pop();)if(1===a.nodeType&&++f&&a===e){r[p]=[S,s,f];break}}else if(h&&(f=s=(i=(r=(o=(a=e)[E]||(a[E]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&i[1]),!1===f)for(;(a=++s&&a&&a[c]||(f=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++f||(h&&((r=(o=a[E]||(a[E]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[S,f]),a!==e)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(e,o){var t,a=w.pseudos[e]||w.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[E]?a(o):1<a.length?(t=[e,e,"",o],w.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,t){for(var n,i=a(e,o),r=i.length;r--;)e[n=H(e,i[r])]=!(t[n]=i[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:ce(function(e){var i=[],r=[],s=h(e.replace(z,"$1"));return s[E]?ce(function(e,t,n,i){for(var r,o=s(e,null,i,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,n){return i[0]=e,s(i,null,n,r),i[0]=null,!r.pop()}}),has:ce(function(t){return function(e){return 0<se(t,e).length}}),contains:ce(function(t){return t=t.replace(ie,d),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:ce(function(n){return Y.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(ie,d).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,n){return[n<0?n+t:n]}),even:ge(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ge(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ge(function(e,t,n){for(var i=n<0?n+t:t<n?t:n;0<=--i;)e.push(i);return e}),gt:ge(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=fe(e);for(e in{submit:!0,reset:!0})w.pseudos[e]=pe(e);function ve(){}function be(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function we(s,e,t){var l=e.dir,c=e.next,u=c||l,d=t&&"parentNode"===u,h=i++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||d)return s(e,t,n);return!1}:function(e,t,n){var i,r,o,a=[S,h];if(n){for(;e=e[l];)if((1===e.nodeType||d)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||d)if(r=(o=e[E]||(e[E]={}))[e.uniqueID]||(o[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[l]||e;else{if((i=r[u])&&i[0]===S&&i[1]===h)return a[2]=i[2];if((r[u]=a)[2]=s(e,t,n))return!0}return!1}}function ke(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function Te(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function xe(f,p,m,g,y,e){return g&&!g[E]&&(g=xe(g)),y&&!y[E]&&(y=xe(y,e)),ce(function(e,t,n,i){var r,o,a,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)se(e,t[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),d=!f||!e&&p?u:Te(u,s,f,n,i),h=m?y||(e?f:c||g)?[]:t:d;if(m&&m(d,h,n,i),g)for(r=Te(h,l),g(r,[],n,i),o=r.length;o--;)(a=r[o])&&(h[l[o]]=!(d[l[o]]=a));if(e){if(y||f){if(y){for(r=[],o=h.length;o--;)(a=h[o])&&r.push(d[o]=a);y(null,h=[],r,i)}for(o=h.length;o--;)(a=h[o])&&-1<(r=y?H(e,a):s[o])&&(e[r]=!(t[r]=a))}}else h=Te(h===t?h.splice(c,h.length):h),y?y(null,t,h,i):I.apply(t,h)})}function Ce(e){for(var r,t,n,i=e.length,o=w.relative[e[0].type],a=o||w.relative[" "],s=o?1:0,l=we(function(e){return e===r},a,!0),c=we(function(e){return-1<H(r,e)},a,!0),u=[function(e,t,n){var i=!o&&(n||t!==k)||((r=t).nodeType?l:c)(e,t,n);return r=null,i}];s<i;s++)if(t=w.relative[e[s].type])u=[we(ke(u),t)];else{if((t=w.filter[e[s].type].apply(null,e[s].matches))[E]){for(n=++s;n<i&&!w.relative[e[n].type];n++);return xe(1<s&&ke(u),1<s&&be(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(z,"$1"),t,s<n&&Ce(e.slice(s,n)),n<i&&Ce(e=e.slice(n)),n<i&&be(e))}u.push(t)}return ke(u)}function Ee(g,y){function e(e,t,n,i,r){var o,a,s,l=0,c="0",u=e&&[],d=[],h=k,f=e||b&&w.find.TAG("*",r),p=S+=null==h?1:Math.random()||.1,m=f.length;for(r&&(k=t==x||t||r);c!==m&&null!=(o=f[c]);c++){if(b&&o){for(a=0,t||o.ownerDocument==x||(T(o),n=!C);s=g[a++];)if(s(o,t||x,n)){i.push(o);break}r&&(S=p)}v&&((o=!s&&o)&&l--,e&&u.push(o))}if(l+=c,v&&c!==l){for(a=0;s=y[a++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=D.call(i));d=Te(d)}I.apply(i,d),r&&!e&&0<d.length&&1<l+y.length&&se.uniqueSort(i)}return r&&(S=p,k=h),u}var v=0<y.length,b=0<g.length;return v?ce(e):e}return ve.prototype=w.filters=w.pseudos,w.setFilters=new ve,p=se.tokenize=function(e,t){var n,i,r,o,a,s,l,c=N[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=w.preFilter;a;){for(o in n&&!(i=U.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=$.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(z," ")}),a=a.slice(n.length)),w.filter)!(i=Q[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):N(e,s).slice(0)},h=se.compile=function(e,t){var n,i=[],r=[],o=P[e+" "];if(!o){for(n=(t=t||p(e)).length;n--;)(o=Ce(t[n]))[E]?i.push(o):r.push(o);(o=P(e,Ee(r,i))).selector=e}return o},m=se.select=function(e,t,n,i){var r,o,a,s,l,c="function"==typeof e&&e,u=!i&&p(e=c.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&w.relative[o[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(ie,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=Q.needsContext.test(e)?0:o.length;r--&&(a=o[r],!w.relative[s=a.type]);)if((l=w.find[s])&&(i=l(a.matches[0].replace(ie,d),ne.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&be(o)))return I.apply(n,i),n;break}}return(c||h(e,u))(i,t,!C,n,!t||ne.test(e)&&ye(t.parentNode)||t),n},f.sortStable=E.split("").sort(j).join("")===E,f.detectDuplicates=!!c,T(),f.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(x.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||de(_,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),se}(x);E.find=f,E.expr=f.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=f.uniqueSort,E.text=f.getText,E.isXMLDoc=f.isXML,E.contains=f.contains,E.escapeSelector=f.escape;function p(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&E(e).is(n))break;i.push(e)}return i}function T(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var S=E.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,n,i){return b(n)?E.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?E.grep(e,function(e){return e===n!==i}):"string"!=typeof n?E.grep(e,function(e){return-1<r.call(n,e)!==i}):E.filter(n,e,i)}E.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?E.find.matchesSelector(i,e)?[i]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<i;t++)if(E.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)E.find(e,r[t],n);return 1<i?E.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&S.test(e)?E(e):e||[],!1).length}});var L,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||L,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:j.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),N.test(i[1])&&E.isPlainObject(t))for(i in t)b(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=C.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=E.fn,L=E(C);var M=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&E(e);if(!S.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&E.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?E.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(E(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,n){return p(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,n){return p(e,"nextSibling",n)},prevUntil:function(e,t,n){return p(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},function(i,r){E.fn[i]=function(e,t){var n=E.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=E.filter(t,n)),1<this.length&&(D[i]||E.uniqueSort(n),M.test(i)&&n.reverse()),this.pushStack(n)}});var I=/[^\x20\t\r\n\f]+/g;function q(e){return e}function H(e){throw e}function _(e,t,n,i){var r;try{e&&b(r=e.promise)?r.call(e).done(t).fail(n):e&&b(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},E.each(e.match(I)||[],function(e,t){n[t]=!0}),n):E.extend({},i);function r(){for(s=s||i.once,a=o=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&i.stopOnFalse&&(u=l.length,t=!1);i.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,a,s,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!o&&(u=l.length-1,c.push(t)),function n(e){E.each(e,function(e,t){b(t)?i.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==k(t)&&n(t)})}(arguments),t&&!o&&r()),this},remove:function(){return E.each(arguments,function(e,t){for(var n;-1<(n=E.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<E.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||o||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o||r()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},E.extend({Deferred:function(e){var o=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return E.Deferred(function(i){E.each(o,function(e,t){var n=b(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&b(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),r=null}).promise()},then:function(t,n,i){var l=0;function c(r,o,a,s){return function(){function e(){var e,t;if(!(r<l)){if((e=a.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,b(t)?s?t.call(e,c(l,o,q,s),c(l,o,H,s)):(l++,t.call(e,c(l,o,q,s),c(l,o,H,s),c(l,o,q,o.notifyWith))):(a!==q&&(n=void 0,i=[e]),(s||o.resolveWith)(n,i))}}var n=this,i=arguments,t=s?e:function(){try{e()}catch(e){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(a!==H&&(n=void 0,i=[e]),o.rejectWith(n,i))}};r?t():(E.Deferred.getStackHook&&(t.stackTrace=E.Deferred.getStackHook()),x.setTimeout(t))}}return E.Deferred(function(e){o[0][3].add(c(0,e,b(i)?i:q,e.notifyWith)),o[1][3].add(c(0,e,b(t)?t:q)),o[2][3].add(c(0,e,b(n)?n:H))}).promise()},promise:function(e){return null!=e?E.extend(e,a):a}},s={};return E.each(o,function(e,t){var n=t[2],i=t[5];a[t[1]]=n.add,i&&n.add(function(){r=i},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){r[t]=this,o[t]=1<arguments.length?s.call(arguments):e,--n||a.resolveWith(r,o)}}var n=arguments.length,i=n,r=Array(i),o=s.call(arguments),a=E.Deferred();if(n<=1&&(_(e,a.done(t(i)).resolve,a.reject,!n),"pending"===a.state()||b(o[i]&&o[i].then)))return a.then();for(;i--;)_(o[i],t(i),a.reject);return a.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){x.console&&x.console.warn&&e&&R.test(e.name)&&x.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){x.setTimeout(function(){throw e})};var F=E.Deferred();function B(){C.removeEventListener("DOMContentLoaded",B),x.removeEventListener("load",B),E.ready()}E.fn.ready=function(e){return F.then(e).catch(function(e){E.readyException(e)}),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0)!==e&&0<--E.readyWait||F.resolveWith(C,[E])}}),E.ready.then=F.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?x.setTimeout(E.ready):(C.addEventListener("DOMContentLoaded",B),x.addEventListener("load",B));var W=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===k(n))for(s in r=!0,n)W(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,b(i)||(a=!0),c&&(t=a?(t.call(e,i),null):(c=t,function(e,t,n){return c.call(E(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},V=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function $(e){return e.replace(V,"ms-").replace(z,U)}function K(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function X(){this.expando=E.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[$(t)]=n;else for(i in t)r[$(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map($):(t=$(t))in i?[t]:t.match(I)||[]).length;for(;n--;)delete i[t[n]]}void 0!==t&&!E.isEmptyObject(i)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var Y=new X,Q=new X,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(e,t,n){var i,r;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:G.test(r)?JSON.parse(r):r)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),E.fn.extend({data:function(n,e){var t,i,r,o=this[0],a=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Q.set(this,n)}):W(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))||void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(i=a[t].name).indexOf("data-")&&(i=$(i.slice(5)),Z(o,i,r[i]));Y.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),E.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Y.get(e,t),n&&(!i||Array.isArray(n)?i=Y.access(e,t,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),i=n.length,r=n.shift(),o=E._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){E.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:E.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?E.queue(this[0],t):void 0===n?this:this.each(function(){var e=E.queue(this,t,n);E._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&E.dequeue(this,t)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--r||o.resolveWith(a,[a])}var i,r=1,o=E.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=Y.get(a[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=C.documentElement,re=function(e){return E.contains(e.ownerDocument,e)},oe={composed:!0};ie.getRootNode&&(re=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===E.css(e,"display")};function se(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return E.css(e,t,"")},l=s(),c=n&&n[3]||(E.cssNumber[t]?"":"px"),u=e.nodeType&&(E.cssNumber[t]||"px"!==c&&+l)&&te.exec(E.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)E.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,E.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var le={};function ce(e,t){for(var n,i,r,o,a,s,l,c=[],u=0,d=e.length;u<d;u++)(i=e[u]).style&&(n=i.style.display,t?("none"===n&&(c[u]=Y.get(i,"display")||null,c[u]||(i.style.display="")),""===i.style.display&&ae(i)&&(c[u]=(l=a=o=void 0,a=(r=i).ownerDocument,s=r.nodeName,(l=le[s])||(o=a.body.appendChild(a.createElement(s)),l=E.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),le[s]=l)))):"none"!==n&&(c[u]="none",Y.set(i,"display",n)));for(u=0;u<d;u++)null!=c[u]&&(e[u].style.display=c[u]);return e}E.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?E(this).show():E(this).hide()})}});var ue,de,he=/^(?:checkbox|radio)$/i,fe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pe=/^$|^module$|\/(?:java|ecma)script/i;ue=C.createDocumentFragment().appendChild(C.createElement("div")),(de=C.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),ue.appendChild(de),v.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue,ue.innerHTML="<option></option>",v.option=!!ue.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?E.merge([e],n):n}function ye(e,t){for(var n=0,i=e.length;n<i;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,v.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,n,i,r){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===k(o))E.merge(h,o.nodeType?[o]:o);else if(ve.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(fe.exec(o)||["",""])[1].toLowerCase(),l=me[s]||me._default,a.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;E.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(i&&-1<E.inArray(o,i))r&&r.push(o);else if(c=re(o),a=ge(d.appendChild(o),"script"),c&&ye(a),n)for(u=0;o=a[u++];)pe.test(o.type||"")&&n.push(o);return d}var we=/^key/,ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function Ce(){return!1}function Ee(e,t){return e===function(){try{return C.activeElement}catch(e){}}()==("focus"===t)}function Se(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Se(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ce;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return E().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=E.guid++)),e.each(function(){E.event.add(this,t,r,i,n)})}function Ae(e,r,o){o?(Y.set(e,r,!1),E.event.add(e,r,{namespace:!1,handler:function(e){var t,n,i=Y.get(this,r);if(1&e.isTrigger&&this[r]){if(i.length)(E.event.special[r]||{}).delegateType&&e.stopPropagation();else if(i=s.call(arguments),Y.set(this,r,i),t=o(this,r),this[r](),i!==(n=Y.get(this,r))||t?Y.set(this,r,!1):n={},i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else i.length&&(Y.set(this,r,{value:E.event.trigger(E.extend(i[0],E.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,r)&&E.event.add(e,r,xe)}E.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,c,u,d,h,f,p,m,g=Y.get(t);if(K(t))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&E.find.matchesSelector(ie,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(I)||[""]).length;c--;)f=m=(s=Te.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=E.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=E.event.special[f]||{},u=E.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,p,a)||t.addEventListener&&t.addEventListener(f,a)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),E.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,f,p,m,g=Y.hasData(e)&&Y.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(I)||[""]).length;c--;)if(f=m=(s=Te.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=E.event.special[f]||{},h=l[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||E.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)E.event.remove(e,f+t[c],n,i,!0);E.isEmptyObject(l)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=new Array(arguments.length),l=E.event.fix(e),c=(Y.get(this,"events")||Object.create(null))[l.type]||[],u=E.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=E.event.handlers.call(this,l,c),t=0;(r=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((E.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?-1<E(r,this).index(c):E.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:b(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",xe),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(e,t){E.event.special[e]={setup:function(){return Ae(this,e,Ee),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){E.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||E.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),E.fn.extend({on:function(e,t,n,i){return Se(this,e,t,n,i)},one:function(e,t,n,i){return Se(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each(function(){E.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this}});var Ne=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,i,r,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(r in Y.remove(t,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)E.event.add(t,r,s[r][n]);Q.hasData(e)&&(o=Q.access(e),a=E.extend({},o),Q.set(t,a))}}function Ie(n,i,r,o){i=g(i);var e,t,a,s,l,c,u=0,d=n.length,h=d-1,f=i[0],p=b(f);if(p||1<d&&"string"==typeof f&&!v.checkClone&&Pe.test(f))return n.each(function(e){var t=n.eq(e);p&&(i[0]=f.call(this,e,t.html())),Ie(t,i,r,o)});if(d&&(t=(e=be(i,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=E.map(ge(e,"script"),Me)).length;u<d;u++)l=e,u!==h&&(l=E.clone(l,!0,!0),s&&E.merge(a,ge(l,"script"))),r.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,E.map(a,De),u=0;u<s;u++)l=a[u],pe.test(l.type||"")&&!Y.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):w(l.textContent.replace(Le,""),l,c))}return n}function qe(e,t,n){for(var i,r=t?E.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||E.cleanData(ge(i)),i.parentNode&&(n&&re(i)&&ye(ge(i,"script")),i.parentNode.removeChild(i));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,o,a,s,l,c,u=e.cloneNode(!0),d=re(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(a=ge(u),i=0,r=(o=ge(e)).length;i<r;i++)s=o[i],l=a[i],"input"===(c=l.nodeName.toLowerCase())&&he.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ge(e),a=a||ge(u),i=0,r=o.length;i<r;i++)Oe(o[i],a[i]);else Oe(e,u);return 0<(a=ge(u,"script")).length&&ye(a,!d&&ge(e,"script")),u},cleanData:function(e){for(var t,n,i,r=E.event.special,o=0;void 0!==(n=e[o]);o++)if(K(n)){if(t=n[Y.expando]){if(t.events)for(i in t.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),E.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return W(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!me[(fe.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;E.inArray(this,n)<0&&(E.cleanData(ge(this)),t&&t.replaceChild(e,this))},n)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){E.fn[e]=function(e){for(var t,n=[],i=E(e),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),E(i[o])[a](t),l.apply(n,t.get());return this.pushStack(n)}});function He(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=o[r];return i}var _e,Re,Fe,Be,We,Ve,ze,Ue,$e=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ke=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=x),t.getComputedStyle(e)},Xe=new RegExp(ne.join("|"),"i");function Ye(){if(Ue){ze.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ue.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(ze).appendChild(Ue);var e=x.getComputedStyle(Ue);_e="1%"!==e.top,Ve=12===Qe(e.marginLeft),Ue.style.right="60%",Be=36===Qe(e.right),Re=36===Qe(e.width),Ue.style.position="absolute",Fe=12===Qe(Ue.offsetWidth/3),ie.removeChild(ze),Ue=null}}function Qe(e){return Math.round(parseFloat(e))}function Ge(e,t,n){var i,r,o,a,s=e.style;return(n=n||Ke(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||re(e)||(a=E.style(e,t)),!v.pixelBoxStyles()&&$e.test(a)&&Xe.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}ze=C.createElement("div"),(Ue=C.createElement("div")).style&&(Ue.style.backgroundClip="content-box",Ue.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Ue.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return Ye(),Re},pixelBoxStyles:function(){return Ye(),Be},pixelPosition:function(){return Ye(),_e},reliableMarginLeft:function(){return Ye(),Ve},scrollboxSize:function(){return Ye(),Fe},reliableTrDimensions:function(){var e,t,n,i;return null==We&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",ie.appendChild(e).appendChild(t).appendChild(n),i=x.getComputedStyle(t),We=3<parseInt(i.height),ie.removeChild(e)),We}}));var Ze=["Webkit","Moz","ms"],et=C.createElement("div").style,tt={};function nt(e){var t=E.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in et)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,rt=/^--/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function st(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function lt(e,t,n,i,r,o){var a="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=E.css(e,n+ne[a],!0,r)),i?("content"===n&&(l-=E.css(e,"padding"+ne[a],!0,r)),"margin"!==n&&(l-=E.css(e,"border"+ne[a]+"Width",!0,r))):(l+=E.css(e,"padding"+ne[a],!0,r),"padding"!==n?l+=E.css(e,"border"+ne[a]+"Width",!0,r):s+=E.css(e,"border"+ne[a]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function ct(e,t,n){var i=Ke(e),r=(!v.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,i),o=r,a=Ge(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&r||!v.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===E.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===E.css(e,"boxSizing",!1,i),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+lt(e,t,n||(r?"border":"content"),o,i,a)+"px"}function ut(e,t,n,i,r){return new ut.prototype.init(e,t,n,i,r)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=$(t),l=rt.test(t),c=e.style;if(l||(t=nt(s)),a=E.cssHooks[t]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=te.exec(n))&&r[1]&&(n=se(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,a,s=$(t);return rt.test(t)||(t=nt(s)),(a=E.cssHooks[t]||E.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Ge(e,t,i)),"normal"===r&&t in at&&(r=at[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),E.each(["height","width"],function(e,l){E.cssHooks[l]={get:function(e,t,n){if(t)return!it.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ct(e,l,n):He(e,ot,function(){return ct(e,l,n)})},set:function(e,t,n){var i,r=Ke(e),o=!v.scrollboxSize()&&"absolute"===r.position,a=(o||n)&&"border-box"===E.css(e,"boxSizing",!1,r),s=n?lt(e,l,n,a,r):0;return a&&o&&(s-=Math.ceil(e["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(r[l])-lt(e,l,"border",!1,r)-.5)),s&&(i=te.exec(t))&&"px"!==(i[3]||"px")&&(e.style[l]=t,t=E.css(e,l)),st(0,t,s)}}}),E.cssHooks.marginLeft=Je(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(r,o){E.cssHooks[r+o]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+ne[t]+o]=i[t]||i[t-2]||i[0];return n}},"margin"!==r&&(E.cssHooks[r+o].set=st)}),E.fn.extend({css:function(e,t){return W(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=Ke(e),r=t.length;a<r;a++)o[t[a]]=E.css(e,t[a],!1,i);return o}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,1<arguments.length)}}),((E.Tween=ut).prototype={constructor:ut,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var e=ut.propHooks[this.prop];return e&&e.get?e.get(this):ut.propHooks._default.get(this)},run:function(e){var t,n=ut.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ut.propHooks._default.set(this),this}}).init.prototype=ut.prototype,(ut.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=ut.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=ut.prototype.init,E.fx.step={};var dt,ht,ft,pt,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function yt(){ht&&(!1===C.hidden&&x.requestAnimationFrame?x.requestAnimationFrame(yt):x.setTimeout(yt,E.fx.interval),E.fx.tick())}function vt(){return x.setTimeout(function(){dt=void 0}),dt=Date.now()}function bt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ne[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function wt(e,t,n){for(var i,r=(kt.tweeners[t]||[]).concat(kt.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function kt(o,e,t){var n,a,i=0,r=kt.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=dt||vt(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return s.notifyWith(o,[c,n,t]),n<1&&r?t:(r||s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c]),!1)},c=s.promise({elem:o,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},t),originalProperties:e,originalOptions:t,startTime:dt||vt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=E.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)c.tweens[t].run(1);return e?(s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c,e])):s.rejectWith(o,[c,e]),this}}),u=c.props;for(!function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=$(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=E.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);i<r;i++)if(n=kt.prefilters[i].call(c,o,u,c.opts))return b(n.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return E.map(u,wt,c),b(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(kt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,r=(e=b(e)?(t=e,["*"]):e.match(I)).length;i<r;i++)n=e[i],kt.tweeners[n]=kt.tweeners[n]||[],kt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u,d="width"in t||"height"in t,h=this,f={},p=e.style,m=e.nodeType&&ae(e),g=Y.get(e,"fxshow");for(i in n.queue||(null==(a=E._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,E.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],mt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||E.style(e,i)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=Y.get(e,"display")),"none"===(u=E.css(e,"display"))&&(c?u=c:(ce([e],!0),c=e.style.display||c,u=E.css(e,"display"),ce([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(e,"float")&&(l||(h.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=Y.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&ce([e],!0),h.done(function(){for(i in m||ce([e]),Y.remove(e,"fxshow"),f)E.style(e,i,f[i])})),l=wt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?kt.prefilters.unshift(e):kt.prefilters.push(e)}}),E.speed=function(e,t,n){var i=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){b(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function r(){var e=kt(this,E.extend({},t),a);(o||Y.get(this,"finish"))&&e.stop(!0)}var o=E.isEmptyObject(t),a=E.speed(e,n,i);return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=E.timers,i=Y.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&gt.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||E.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],i=t[a+"queueHooks"],r=E.timers,o=n?n.length:0;for(t.finish=!0,E.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),E.each(["toggle","show","hide"],function(e,i){var r=E.fn[i];E.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(bt(i,!0),e,t,n)}}),E.each({slideDown:bt("show"),slideUp:bt("hide"),slideToggle:bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){E.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),dt=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){ht||(ht=!0,yt())},E.fx.stop=function(){ht=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(i,e){return i=E.fx&&E.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=x.setTimeout(e,i);t.stop=function(){x.clearTimeout(n)}})},ft=C.createElement("input"),pt=C.createElement("select").appendChild(C.createElement("option")),ft.type="checkbox",v.checkOn=""!==ft.value,v.optSelected=pt.selected,(ft=C.createElement("input")).value="t",ft.type="radio",v.radioValue="t"===ft.value;var Tt,xt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return W(this,E.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?E.prop(e,t,n):(1===o&&E.isXMLDoc(e)||(r=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?Tt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=E.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(I);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),Tt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||E.find.attr;xt[t]=function(e,t,n){var i,r,o=t.toLowerCase();return n||(r=xt[o],xt[o]=i,i=null!=a(e,t,n)?o:null,xt[o]=r),i}});var Ct=/^(?:input|select|textarea|button)$/i,Et=/^(?:a|area)$/i;function St(e){return(e.match(I)||[]).join(" ")}function At(e){return e.getAttribute&&e.getAttribute("class")||""}function Nt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(I)||[]}E.fn.extend({prop:function(e,t){return W(this,E.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(e)||(t=E.propFix[t]||t,r=E.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):Ct.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,l=0;if(b(t))return this.each(function(e){E(this).addClass(t.call(this,e,At(this)))});if((e=Nt(t)).length)for(;n=this[l++];)if(r=At(n),i=1===n.nodeType&&" "+St(r)+" "){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=St(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,l=0;if(b(t))return this.each(function(e){E(this).removeClass(t.call(this,e,At(this)))});if(!arguments.length)return this.attr("class","");if((e=Nt(t)).length)for(;n=this[l++];)if(r=At(n),i=1===n.nodeType&&" "+St(r)+" "){for(a=0;o=e[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=St(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,t){var o=typeof r,a="string"==o||Array.isArray(r);return"boolean"==typeof t&&a?t?this.addClass(r):this.removeClass(r):b(r)?this.each(function(e){E(this).toggleClass(r.call(this,e,At(this),t),t)}):this.each(function(){var e,t,n,i;if(a)for(t=0,n=E(this),i=Nt(r);e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!=o||((e=At(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+St(At(n))+" ").indexOf(t))return!0;return!1}});var Pt=/\r/g;E.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=b(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,E(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=E.map(t,function(e){return null==e?"":e+""})),(i=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=E.valHooks[t.type]||E.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(Pt,""):null==e?"":e:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:St(E.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=E(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=E.makeArray(t),a=r.length;a--;)((i=r[a]).selected=-1<E.inArray(E.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<E.inArray(E(e).val(),t)}},v.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in x;function Lt(e){e.stopPropagation()}var jt=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(e,t,n,i){var r,o,a,s,l,c,u,d,h=[n||C],f=y.call(e,"type")?e.type:e,p=y.call(e,"namespace")?e.namespace.split("."):[];if(o=d=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!jt.test(f+E.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),l=f.indexOf(":")<0&&"on"+f,(e=e[E.expando]?e:new E.Event(f,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),u=E.event.special[f]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!m(n)){for(s=u.delegateType||f,jt.test(s+f)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(n.ownerDocument||C)&&h.push(a.defaultView||a.parentWindow||x)}for(r=0;(o=h[r++])&&!e.isPropagationStopped();)d=o,e.type=1<r?s:u.bindType||f,(c=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&c.apply(o,t),(c=l&&o[l])&&c.apply&&K(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=f,i||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),t)||!K(n)||l&&b(n[f])&&!m(n)&&((a=n[l])&&(n[l]=null),E.event.triggered=f,e.isPropagationStopped()&&d.addEventListener(f,Lt),n[f](),e.isPropagationStopped()&&d.removeEventListener(f,Lt),E.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,n){var i=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(i,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),v.focusin||E.each({focus:"focusin",blur:"focusout"},function(n,i){function r(e){E.event.simulate(i,e.target,E.event.fix(e))}E.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,i);t||e.addEventListener(n,r,!0),Y.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,i)-1;t?Y.access(e,i,t):(e.removeEventListener(n,r,!0),Y.remove(e,i))}}});var Mt=x.location,Dt={guid:Date.now()},Ot=/\?/;E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new x.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var It=/\[\]$/,qt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,_t=/^(?:input|select|textarea|keygen)/i;function Rt(n,e,i,r){var t;if(Array.isArray(e))E.each(e,function(e,t){i||It.test(n)?r(n,t):Rt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==k(e))r(n,e);else for(t in e)Rt(n+"["+t+"]",e[t],i,r)}E.param=function(e,t){function n(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)}var i,r=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){n(this.name,this.value)});else for(i in e)Rt(i,e[i],t,n);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&_t.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!he.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(qt,"\r\n")}}):{name:t.name,value:n.replace(qt,"\r\n")}}).get()}});var Ft=/%20/g,Bt=/#.*$/,Wt=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:GET|HEAD)$/,Ut=/^\/\//,$t={},Kt={},Xt="*/".concat("*"),Yt=C.createElement("a");function Qt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(I)||[];if(b(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Gt(t,r,o,a){var s={},l=t===Kt;function c(e){var i;return s[e]=!0,E.each(t[e]||[],function(e,t){var n=t(r,o,a);return"string"!=typeof n||l||s[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),c(n),!1)}),i}return c(r.dataTypes[0])||!s["*"]&&c("*")}function Jt(e,t){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i=i||{})[n]=t[n]);return i&&E.extend(!0,e,i),e}Yt.href=Mt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,E.ajaxSettings),t):Jt(E.ajaxSettings,e)},ajaxPrefilter:Qt($t),ajaxTransport:Qt(Kt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,d,h,n,f,i,p,m,r,o,g=E.ajaxSetup({},t),y=g.context||g,v=g.context&&(y.nodeType||y.jquery)?E(y):E.event,b=E.Deferred(),w=E.Callbacks("once memory"),k=g.statusCode||{},a={},s={},l="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(p){if(!n)for(n={};t=Vt.exec(h);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return p?h:null},setRequestHeader:function(e,t){return null==p&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==p&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(p)T.always(e[T.status]);else for(t in e)k[t]=[k[t],e[t]];return this},abort:function(e){var t=e||l;return u&&u.abort(t),c(0,t),this}};if(b.promise(T),g.url=((e||g.url||Mt.href)+"").replace(Ut,Mt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(I)||[""],null==g.crossDomain){i=C.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=Yt.protocol+"//"+Yt.host!=i.protocol+"//"+i.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=E.param(g.data,g.traditional)),Gt($t,g,t,T),p)return T;for(r in(m=E.event&&g.global)&&0==E.active++&&E.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!zt.test(g.type),d=g.url.replace(Bt,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Ft,"+")):(o=g.url.slice(d.length),g.data&&(g.processData||"string"==typeof g.data)&&(d+=(Ot.test(d)?"&":"?")+g.data,delete g.data),!1===g.cache&&(d=d.replace(Wt,"$1"),o=(Ot.test(d)?"&":"?")+"_="+Dt.guid+++o),g.url=d+o),g.ifModified&&(E.lastModified[d]&&T.setRequestHeader("If-Modified-Since",E.lastModified[d]),E.etag[d]&&T.setRequestHeader("If-None-Match",E.etag[d])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&T.setRequestHeader("Content-Type",g.contentType),T.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Xt+"; q=0.01":""):g.accepts["*"]),g.headers)T.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(y,T,g)||p))return T.abort();if(l="abort",w.add(g.complete),T.done(g.success),T.fail(g.error),u=Gt(Kt,g,t,T)){if(T.readyState=1,m&&v.trigger("ajaxSend",[T,g]),p)return T;g.async&&0<g.timeout&&(f=x.setTimeout(function(){T.abort("timeout")},g.timeout));try{p=!1,u.send(a,c)}catch(e){if(p)throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,n,i){var r,o,a,s,l,c=t;p||(p=!0,f&&x.clearTimeout(f),u=void 0,h=i||"",T.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a=a||r}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,T,n)),!r&&-1<E.inArray("script",g.dataTypes)&&(g.converters["text script"]=function(){}),s=function(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(g,s,T,r),r?(g.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(E.lastModified[d]=l),(l=T.getResponseHeader("etag"))&&(E.etag[d]=l)),204===e||"HEAD"===g.type?c="nocontent":304===e?c="notmodified":(c=s.state,o=s.data,r=!(a=s.error))):(a=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",r?b.resolveWith(y,[o,c,T]):b.rejectWith(y,[T,c,a]),T.statusCode(k),k=void 0,m&&v.trigger(r?"ajaxSuccess":"ajaxError",[T,g,r?o:a]),w.fireWith(y,[T,c]),m&&(v.trigger("ajaxComplete",[T,g]),--E.active||E.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,r){E[r]=function(e,t,n,i){return b(t)&&(i=i||n,n=t,t=void 0),E.ajax(E.extend({url:e,type:r,dataType:i,data:t,success:n},E.isPlainObject(e)&&e))}}),E.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return b(n)?this.each(function(e){E(this).wrapInner(n.call(this,e))}):this.each(function(){var e=E(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=b(t);return this.each(function(e){E(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},en=E.ajaxSettings.xhr();v.cors=!!en&&"withCredentials"in en,v.ajax=en=!!en,E.ajaxTransport(function(r){var o,a;if(v.cors||en&&!r.crossDomain)return{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Zt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&x.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),E.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(n){var i,r;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){i=E("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(i[0])},abort:function(){r&&r()}}});var tn,nn=[],rn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=nn.pop()||E.expando+"_"+Dt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,o,a=!1!==e.jsonp&&(rn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&rn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(rn,"$1"+i):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||E.error(i+" was not called"),o[0]},e.dataTypes[0]="json",r=x[i],x[i]=function(){o=arguments},n.always(function(){void 0===r?E(x).removeProp(i):x[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,nn.push(i)),o&&b(r)&&r(o[0]),o=r=void 0}),"script"}),v.createHTMLDocument=((tn=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((i=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(i)):t=C),o=!n&&[],(r=N.exec(e))?[t.createElement(r[1])]:(r=be([e],t,o),o&&o.length&&E(o).remove(),E.merge([],r.childNodes)));var i,r,o},E.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return-1<s&&(i=St(e.slice(s)),e=e.slice(0,s)),b(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&E.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=E.css(e,"position"),u=E(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=E.css(e,"top"),l=E.css(e,"left"),r=("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(a=(i=u.position()).top,i.left):(a=parseFloat(o)||0,parseFloat(l)||0),b(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),u.css(d))}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),r.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-E.css(i,"marginTop",!0),left:t.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||ie})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;E.fn[t]=function(e){return W(this,function(e,t,n){var i;if(m(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n)return i?i[r]:e[t];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),E.each(["top","left"],function(e,n){E.cssHooks[n]=Je(v.pixelPosition,function(e,t){if(t)return t=Ge(e,n),$e.test(t)?E(e).position()[n]+"px":t})}),E.each({Height:"height",Width:"width"},function(a,s){E.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,o){E.fn[o]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return W(this,function(e,t,n){var i;return m(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+a],i["scroll"+a],e.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?E.css(e,t,r):E.style(e,t,n,r)},s,n?e:void 0,n)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){E.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var on=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return i=s.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||E.guid++,r},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=A,E.isFunction=b,E.isWindow=m,E.camelCase=$,E.type=k,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(on,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var an=x.jQuery,sn=x.$;return E.noConflict=function(e){return x.$===E&&(x.$=sn),e&&x.jQuery===E&&(x.jQuery=an),E},void 0===e&&(x.jQuery=x.$=E),E}),"object"==typeof navigator&&function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):(e=e||self).Plyr=t()}(this,function(){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function e(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function u(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach(function(e){var t,n,i;t=r,i=o[n=e],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}var d={addCSS:!0,thumbWidth:15,watch:!0};function h(e){return null!=e?e.constructor:null}function f(e,t){return!!(e&&t&&e instanceof t)}function p(e){return h(e)===String}function m(e){return Array.isArray(e)}function g(e){return f(e,NodeList)}function y(e){return f(e,Element)}function v(e){return f(e,Event)}function b(e){return null==e||(p(e)||m(e)||g(e))&&!e.length||h(e)===Object&&!Object.keys(e).length}var T=p,x=m,C=g;function E(e){return null!=e?e.constructor:null}function S(e,t){return Boolean(e&&t&&e instanceof t)}function A(e){return null==e}function N(e){return E(e)===Object}function P(e){return E(e)===String}function L(e){return E(e)===Function}function j(e){return Array.isArray(e)}function M(e){return S(e,NodeList)}function D(e){return A(e)||(P(e)||j(e)||M(e))&&!e.length||N(e)&&!Object.keys(e).length}function O(e){return E(e)===Boolean}function I(e){return S(e,Event)}function q(e){return S(e,KeyboardEvent)}function H(e){return S(e,TextTrack)||!A(e)&&P(e.kind)}function _(e){if(S(e,window.URL))return!0;if(!P(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!D(new URL(t).hostname)}catch(e){return!1}}var R,F,B,W,V,z=(V=[{key:"setup",value:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=null;if(b(n)||T(n)?e=Array.from(document.querySelectorAll(T(n)?n:'input[type="range"]')):y(n)?e=[n]:C(n)?e=Array.from(n):x(n)&&(e=n.filter(y)),b(e))return null;var i=u({},d,{},t);return T(n)&&i.watch&&new MutationObserver(function(e){Array.from(e).forEach(function(e){Array.from(e.addedNodes).forEach(function(e){var t;y(e)&&function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t=n)&&new ne(e,i)})})}).observe(document.body,{childList:!0,subtree:!0}),e.map(function(e){return new ne(e,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}],t((W=ne).prototype,[{key:"init",value:function(){ne.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){ne.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(e){t.element[n](e,function(e){return t.set(e)},!1)})}},{key:"get",value:function(e){if(!ne.enabled||!v(e))return null;var t,n=e.target,i=e.changedTouches[0],r=parseFloat(n.getAttribute("min"))||0,o=parseFloat(n.getAttribute("max"))||100,a=parseFloat(n.getAttribute("step"))||1,s=n.getBoundingClientRect(),l=100/s.width*(this.config.thumbWidth/2)/100;return(t=100/s.width*(i.clientX-s.left))<0?t=0:100<t&&(t=100),t<50?t-=(100-2*t)*l:50<t&&(t+=2*(t-50)*l),r+function(e,t){if(t<1){var n=(i="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0;return parseFloat(e.toFixed(n))}var i;return Math.round(e/t)*t}(t/100*(o-r),a)}},{key:"set",value:function(e){ne.enabled&&v(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(e.target,"touchend"===e.type?"change":"input"))}}]),t(W,V),ne),U=A,$=N,K=function(e){return E(e)===Number&&!Number.isNaN(e)},X=P,Y=L,Q=j,G=M,J=function(e){return S(e,Element)},Z=function(e){return S(e,Promise)&&L(e.then)},ee=D,te=(R=document.createElement("span"),F={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},B=Object.keys(F).find(function(e){return void 0!==R.style[e]}),!!X(B)&&F[B]);function ne(e,t){(function(e){if(!(e instanceof ne))throw new TypeError("Cannot call a class as a function")})(this),y(e)?this.element=e:T(e)&&(this.element=document.querySelector(e)),y(this.element)&&b(this.element.rangeTouch)&&(this.config=u({},d,{},t),this.init())}function ie(e,t){setTimeout(function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}},t)}var re={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function oe(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function ae(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(!n.length)return t;var r=n.shift();return $(r)?(Object.keys(r).forEach(function(e){$(r[e])?(Object.keys(t).includes(e)||Object.assign(t,o({},e,{})),ae(t[e],r[e])):Object.assign(t,o({},e,r[e]))}),ae.apply(void 0,[t].concat(n))):t}function se(e,o){var t=e.length?e:[e];Array.from(t).reverse().forEach(function(e,t){var n=0<t?o.cloneNode(!0):o,i=e.parentNode,r=e.nextSibling;n.appendChild(e),r?i.insertBefore(n,r):i.appendChild(n)})}function le(r,e){J(r)&&!ee(e)&&Object.entries(e).filter(function(e){var t=k(e,2)[1];return!U(t)}).forEach(function(e){var t=k(e,2),n=t[0],i=t[1];return r.setAttribute(n,i)})}function ce(e,t,n){var i=document.createElement(e);return $(t)&&le(i,t),X(n)&&(i.innerText=n),i}function ue(e,t,n,i){J(t)&&t.appendChild(ce(e,n,i))}function de(e){G(e)||Q(e)?Array.from(e).forEach(de):J(e)&&J(e.parentNode)&&e.parentNode.removeChild(e)}function he(e){if(J(e))for(var t=e.childNodes.length;0<t;)e.removeChild(e.lastChild),--t}function fe(e,t){return J(t)&&J(t.parentNode)&&J(e)?(t.parentNode.replaceChild(e,t),e):null}function pe(e,t){if(!X(e)||ee(e))return{};var a={},s=ae({},t);return e.split(",").forEach(function(e){var t=e.trim(),n=t.replace(".",""),i=t.replace(/[[\]]/g,"").split("="),r=k(i,1)[0],o=1<i.length?i[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":X(s.class)?a.class="".concat(s.class," ").concat(n):a.class=n;break;case"#":a.id=t.replace("#","");break;case"[":a[r]=o}}),ae(s,a)}function me(e,t){if(J(e)){var n=t;O(n)||(n=!e.hidden),e.hidden=n}}function ge(e,t,n){if(G(e))return Array.from(e).map(function(e){return ge(e,t,n)});if(J(e)){var i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function ye(e,t){return J(e)&&e.classList.contains(t)}function ve(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function be(e){return this.elements.container.querySelectorAll(e)}function we(e){return this.elements.container.querySelector(e)}function ke(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];J(e)&&(e.focus({preventScroll:!0}),t&&ge(e,this.config.classNames.tabFocus))}var Te,xe={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Ce={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var i=re.isIPhone&&n&&Ce.playsinline,r=Ce[e]||"html5"!==t;return{api:r,ui:r&&Ce.rangeInput&&("video"!==e||!re.isIPhone||i)}},pip:!(re.isIPhone||!Y(ce("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||ce("video").disablePictureInPicture)),airplay:Y(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(ee(e))return!1;var t=k(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(xe).includes(n)&&(n+='; codecs="'.concat(xe[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:((Te=document.createElement("input")).type="range")===Te.type,touch:"ontouchstart"in document.documentElement,transitions:!1!==te,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Ee=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function Se(t,e,n){var i=this,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(t&&"addEventListener"in t&&!ee(e)&&Y(n)){var s=e.split(" "),l=a;Ee&&(l={passive:o,capture:a}),s.forEach(function(e){i&&i.eventListeners&&r&&i.eventListeners.push({element:t,type:e,callback:n,options:l}),t[r?"addEventListener":"removeEventListener"](e,n,l)})}}function Ae(e){Se.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",2<arguments.length?arguments[2]:void 0,!0,!(3<arguments.length&&void 0!==arguments[3])||arguments[3],4<arguments.length&&void 0!==arguments[4]&&arguments[4])}function Ne(e){Se.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",2<arguments.length?arguments[2]:void 0,!1,!(3<arguments.length&&void 0!==arguments[3])||arguments[3],4<arguments.length&&void 0!==arguments[4]&&arguments[4])}function Pe(r){var o=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",s=2<arguments.length?arguments[2]:void 0,l=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],c=4<arguments.length&&void 0!==arguments[4]&&arguments[4];Se.call(this,r,a,function e(){Ne(r,a,e,l,c);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];s.apply(o,n)},!0,l,c)}function Le(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(J(e)&&!ee(t)){var r=new CustomEvent(t,{bubbles:n,detail:w(w({},i),{},{plyr:this})});e.dispatchEvent(r)}}function je(e){Z(e)&&e.then(null,function(){})}function Me(e){return(Q(e)||X(e)&&e.includes(":"))&&(Q(e)?e:e.split(":")).map(Number).every(K)}function De(e){if(!Q(e)||!e.every(K))return null;var t=k(e,2),n=t[0],i=t[1],r=function e(t,n){return 0===n?t:e(n,t%n)}(n,i);return[n/r,i/r]}function Oe(e){function t(e){return Me(e)?e.split(":").map(Number):null}var n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!ee(this.embed)&&Q(this.embed.ratio)&&(n=this.embed.ratio),null===n&&this.isHTML5){var i=this.media;n=De([i.videoWidth,i.videoHeight])}return n}function Ie(e){if(!this.isVideo)return{};var t=this.elements.wrapper,n=Oe.call(this,e),i=k(Q(n)?n:[0,0],2),r=100/i[0]*i[1];if(t.style.paddingBottom="".concat(r,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-r)/(o/50);this.media.style.transform="translateY(-".concat(a,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==n);return{padding:r,ratio:n}}var qe={getSources:function(){var n=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(function(e){var t=e.getAttribute("type");return!!ee(t)||Ce.mime.call(n,t)}):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:qe.getSources.call(this).map(function(e){return Number(e.getAttribute("size"))}).filter(Boolean)},setup:function(){if(this.isHTML5){var l=this;l.options.speed=l.config.speed.options,ee(this.config.ratio)||Ie.call(l),Object.defineProperty(l.media,"quality",{get:function(){var e=qe.getSources.call(l).find(function(e){return e.getAttribute("src")===l.source});return e&&Number(e.getAttribute("size"))},set:function(t){if(l.quality!==t){if(l.config.quality.forced&&Y(l.config.quality.onChange))l.config.quality.onChange(t);else{var e=qe.getSources.call(l).find(function(e){return Number(e.getAttribute("size"))===t});if(!e)return;var n=l.media,i=n.currentTime,r=n.paused,o=n.preload,a=n.readyState,s=n.playbackRate;l.media.src=e.getAttribute("src"),"none"===o&&!a||(l.once("loadedmetadata",function(){l.speed=s,l.currentTime=i,r||je(l.play())}),l.media.load())}Le.call(l,l.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(de(qe.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function He(n){return Q(n)?n.filter(function(e,t){return n.indexOf(e)===t}):n}function _e(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ee(e)?e:e.toString().replace(/{(\d+)}/g,function(e,t){return n[t].toString()})}function Re(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString())}function Fe(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function Be(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}function We(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(ee(e)||ee(t))return"";var r=oe(t.i18n,e);if(ee(r))return Object.keys(Ve).includes(e)?Ve[e]:"";var n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach(function(e){var t=k(e,2),n=t[0],i=t[1];r=Re(r,n,i)}),r}var Ve={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ze=(e(Ue,[{key:"get",value:function(e){if(!Ue.supported||!this.enabled)return null;var t=window.localStorage.getItem(this.key);if(ee(t))return null;var n=JSON.parse(t);return X(e)&&e.length?n[e]:n}},{key:"set",value:function(e){if(Ue.supported&&this.enabled&&$(e)){var t=this.get();ee(t)&&(t={}),ae(t,e),window.localStorage.setItem(this.key,JSON.stringify(t))}}}],[{key:"supported",get:function(){try{return"localStorage"in window&&(window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0)}catch(e){return!1}}}]),Ue);function Ue(e){c(this,Ue),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}function $e(e,t){var r=1<arguments.length&&void 0!==t?t:"text";return new Promise(function(t,n){try{var i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",function(){if("text"===r)try{t(JSON.parse(i.responseText))}catch(e){t(i.responseText)}else t(i.response)}),i.addEventListener("error",function(){throw new Error(i.status)}),i.open("GET",e,!0),i.responseType=r,i.send()}catch(e){n(e)}})}function Ke(e,t){if(X(e)){var n=X(t),i=function(){return null!==document.getElementById(t)},r=function(e,t){e.innerHTML=t,n&&i()||document.body.insertAdjacentElement("afterbegin",e)};if(!n||!i()){var o=ze.supported,a=document.createElement("div");if(a.setAttribute("hidden",""),n&&a.setAttribute("id",t),o){var s=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==s){var l=JSON.parse(s);r(a,l.content)}}$e(e).then(function(e){ee(e)||(o&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),r(a,e))}).catch(function(){})}}}var Xe=function(e){return Math.trunc(e/60/60%60,10)},Ye=function(e){return Math.trunc(e/60%60,10)},Qe=function(e){return Math.trunc(e%60,10)};function Ge(e,t,n){var i=0<arguments.length&&void 0!==e?e:0,r=1<arguments.length&&void 0!==t&&t,o=2<arguments.length&&void 0!==n&&n;if(!K(i))return Ge(void 0,r,o);function a(e){return"0".concat(e).slice(-2)}var s=Xe(i),l=Ye(i),c=Qe(i);return s=r||0<s?"".concat(s,":"):"","".concat(o&&0<i?"-":"").concat(s).concat(a(l),":").concat(a(c))}var Je={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||re.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=we.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:be.call(this,this.config.selectors.buttons.play),pause:we.call(this,this.config.selectors.buttons.pause),restart:we.call(this,this.config.selectors.buttons.restart),rewind:we.call(this,this.config.selectors.buttons.rewind),fastForward:we.call(this,this.config.selectors.buttons.fastForward),mute:we.call(this,this.config.selectors.buttons.mute),pip:we.call(this,this.config.selectors.buttons.pip),airplay:we.call(this,this.config.selectors.buttons.airplay),settings:we.call(this,this.config.selectors.buttons.settings),captions:we.call(this,this.config.selectors.buttons.captions),fullscreen:we.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=we.call(this,this.config.selectors.progress),this.elements.inputs={seek:we.call(this,this.config.selectors.inputs.seek),volume:we.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:we.call(this,this.config.selectors.display.buffer),currentTime:we.call(this,this.config.selectors.display.currentTime),duration:we.call(this,this.config.selectors.display.duration)},J(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n=Je.getIconUrl.call(this),i="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),r=document.createElementNS("http://www.w3.org/2000/svg","svg");le(r,ae(t,{"aria-hidden":"true",focusable:"false"}));var o=document.createElementNS("http://www.w3.org/2000/svg","use"),a="".concat(i,"-").concat(e);return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),r.appendChild(o),r},createLabel:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=We(e,this.config);return ce("span",w(w({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),n)},createBadge:function(e){if(ee(e))return null;var t=ce("span",{class:this.config.classNames.menu.value});return t.appendChild(ce("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,i=ae({},t),r=function(e){var t=(0<arguments.length&&void 0!==e?e:"").toString();return(t=function(e){var t=(0<arguments.length&&void 0!==e?e:"").toString();return t=Re(t,"-"," "),t=Re(t,"_"," "),t=Fe(t),Re(t," ","")}(t)).charAt(0).toLowerCase()+t.slice(1)}(e),o={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(function(e){Object.keys(i).includes(e)&&(o[e]=i[e],delete i[e])}),"button"!==o.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some(function(e){return e===n.config.classNames.control})||ae(i,{class:"".concat(i.class," ").concat(this.config.classNames.control)}):i.class=this.config.classNames.control,e){case"play":o.toggle=!0,o.label="play",o.labelPressed="pause",o.icon="play",o.iconPressed="pause";break;case"mute":o.toggle=!0,o.label="mute",o.labelPressed="unmute",o.icon="volume",o.iconPressed="muted";break;case"captions":o.toggle=!0,o.label="enableCaptions",o.labelPressed="disableCaptions",o.icon="captions-off",o.iconPressed="captions-on";break;case"fullscreen":o.toggle=!0,o.label="enterFullscreen",o.labelPressed="exitFullscreen",o.icon="enter-fullscreen",o.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" ".concat(this.config.classNames.control,"--overlaid"),r="play",o.label="play",o.icon="play";break;default:ee(o.label)&&(o.label=r),ee(o.icon)&&(o.icon=e)}var a=ce(o.element);return o.toggle?(a.appendChild(Je.createIcon.call(this,o.iconPressed,{class:"icon--pressed"})),a.appendChild(Je.createIcon.call(this,o.icon,{class:"icon--not-pressed"})),a.appendChild(Je.createLabel.call(this,o.labelPressed,{class:"label--pressed"})),a.appendChild(Je.createLabel.call(this,o.label,{class:"label--not-pressed"}))):(a.appendChild(Je.createIcon.call(this,o.icon)),a.appendChild(Je.createLabel.call(this,o.label))),ae(i,pe(this.config.selectors.buttons[r],i)),le(a,i),"play"===r?(Q(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(a)):this.elements.buttons[r]=a,a},createRange:function(e,t){var n=ce("input",ae(pe(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":We(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,Je.updateRangeFill.call(this,n),z.setup(n),n},createProgress:function(e,t){var n=ce("progress",ae(pe(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(ce("span",null,"0"));var i={played:"played",buffer:"buffered"}[e],r=i?We(i,this.config):"";n.innerText="% ".concat(r.toLowerCase())}return this.elements.display[e]=n},createTime:function(e,t){var n=pe(this.config.selectors.display[e],t),i=ce("div",ae(n,{class:"".concat(n.class?n.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":We(e,this.config)}),"00:00");return this.elements.display[e]=i},bindMenuItemShortcuts:function(i,r){var o=this;Ae.call(this,i,"keydown keyup",function(e){if([32,38,39,40].includes(e.which)&&(e.preventDefault(),e.stopPropagation(),"keydown"!==e.type)){var t,n=ve(i,'[role="menuitemradio"]');!n&&[32,39].includes(e.which)?Je.showMenuPanel.call(o,r,!0):32!==e.which&&(40===e.which||n&&39===e.which?(t=i.nextElementSibling,J(t)||(t=i.parentNode.firstElementChild)):(t=i.previousElementSibling,J(t)||(t=i.parentNode.lastElementChild)),ke.call(o,t,!0))}},!1),Ae.call(this,i,"keyup",function(e){13===e.which&&Je.focusFirstMenuItem.call(o,null,!0)})},createMenuItem:function(e){var t=this,n=e.value,i=e.list,r=e.type,o=e.title,a=e.badge,s=void 0===a?null:a,l=e.checked,c=void 0!==l&&l,u=pe(this.config.selectors.inputs[r]),d=ce("button",ae(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:n})),h=ce("span");h.innerHTML=o,J(s)&&h.appendChild(s),d.appendChild(h),Object.defineProperty(d,"checked",{enumerable:!0,get:function(){return"true"===d.getAttribute("aria-checked")},set:function(e){e&&Array.from(d.parentNode.children).filter(function(e){return ve(e,'[role="menuitemradio"]')}).forEach(function(e){return e.setAttribute("aria-checked","false")}),d.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(d,"click keyup",function(e){if(!q(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),d.checked=!0,r){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}Je.showMenuPanel.call(t,"home",q(e))}},r,!1),Je.bindMenuItemShortcuts.call(this,d,r),i.appendChild(d)},formatTime:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return K(e)?Ge(e,0<Xe(this.duration),t):e},updateTimeDisplay:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];J(e)&&K(t)&&(e.innerText=Je.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(J(this.elements.inputs.volume)&&Je.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),J(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;J(e)&&(e.value=t,Je.updateRangeFill.call(this,e))},updateProgress:function(e){var o=this;if(this.supported.ui&&I(e)){var t,n,i=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=this.currentTime,n=this.duration,i=0===t||0===n||Number.isNaN(t)||Number.isNaN(n)?0:(t/n*100).toFixed(2),"timeupdate"===e.type&&Je.setRange.call(this,this.elements.inputs.seek,i);break;case"playing":case"progress":!function(e,t){var n=K(t)?t:0,i=J(e)?e:o.elements.display.buffer;if(J(i)){i.value=n;var r=i.getElementsByTagName("span")[0];J(r)&&(r.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=I(e)?e.target:e;if(J(t)&&"range"===t.getAttribute("type")){if(ve(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=Je.formatTime(this.currentTime),i=Je.formatTime(this.duration),r=We("seekLabel",this.config);t.setAttribute("aria-valuetext",r.replace("{currentTime}",n).replace("{duration}",i))}else if(ve(t,this.config.selectors.inputs.volume)){var o=100*t.value;t.setAttribute("aria-valuenow",o),t.setAttribute("aria-valuetext","".concat(o.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);re.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&J(this.elements.inputs.seek)&&J(this.elements.display.seekTooltip)&&0!==this.duration){var n="".concat(this.config.classNames.tooltip,"--visible"),i=function(e){return ge(t.elements.display.seekTooltip,n,e)};if(this.touch)i(!1);else{var r=0,o=this.elements.progress.getBoundingClientRect();if(I(e))r=100/o.width*(e.pageX-o.left);else{if(!ye(this.elements.display.seekTooltip,n))return;r=parseFloat(this.elements.display.seekTooltip.style.left,10)}r<0?r=0:100<r&&(r=100),Je.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*r),this.elements.display.seekTooltip.style.left="".concat(r,"%"),I(e)&&["mouseenter","mouseleave"].includes(e.type)&&i("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!J(this.elements.display.duration)&&this.config.invertTime;Je.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||Je.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return me(this.elements.display.currentTime,!0),void me(this.elements.progress,!0);J(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=J(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&Je.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&Je.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),Je.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){me(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],r=null,o=t;if("captions"===e)r=this.currentTrack;else{if(r=ee(n)?this[e]:n,ee(r)&&(r=this.config[e].default),!ee(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn("Unsupported value of '".concat(r,"' for ").concat(e));if(!this.config[e].options.includes(r))return void this.debug.warn("Disabled value of '".concat(r,"' for ").concat(e))}if(J(o)||(o=i&&i.querySelector('[role="menu"]')),J(o)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=Je.getLabel.call(this,e,r);var a=o&&o.querySelector('[value="'.concat(r,'"]'));J(a)&&(a.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?We("normal",this.config):"".concat(t,"&times;");case"quality":if(K(t)){var n=We("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return Fe(t);case"captions":return nt.getLabel.call(this);default:return null}},setQualityMenu:function(e){var i=this;if(J(this.elements.settings.panels.quality)){var n=this.elements.settings.panels.quality.querySelector('[role="menu"]');Q(e)&&(this.options.quality=He(e).filter(function(e){return i.config.quality.options.includes(e)}));var t=!ee(this.options.quality)&&1<this.options.quality.length;if(Je.toggleMenuButton.call(this,"quality",t),he(n),Je.checkMenu.call(this),t){this.options.quality.sort(function(e,t){var n=i.config.quality.options;return n.indexOf(e)>n.indexOf(t)?1:-1}).forEach(function(e){var t;Je.createMenuItem.call(i,{value:e,list:n,type:"quality",title:Je.getLabel.call(i,"quality",e),badge:(t=We("qualityBadge.".concat(e),i.config)).length?Je.createBadge.call(i,t):null})}),Je.updateSetting.call(this,"quality",n)}}},setCaptionsMenu:function(){var n=this;if(J(this.elements.settings.panels.captions)){var i=this.elements.settings.panels.captions.querySelector('[role="menu"]'),e=nt.getTracks.call(this),t=Boolean(e.length);if(Je.toggleMenuButton.call(this,"captions",t),he(i),Je.checkMenu.call(this),t){var r=e.map(function(e,t){return{value:t,checked:n.captions.toggled&&n.currentTrack===t,title:nt.getLabel.call(n,e),badge:e.language&&Je.createBadge.call(n,e.language.toUpperCase()),list:i,type:"language"}});r.unshift({value:-1,checked:!this.captions.toggled,title:We("disabled",this.config),list:i,type:"language"}),r.forEach(Je.createMenuItem.bind(this)),Je.updateSetting.call(this,"captions",i)}}},setSpeedMenu:function(){var t=this;if(J(this.elements.settings.panels.speed)){var n=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(function(e){return e>=t.minimumSpeed&&e<=t.maximumSpeed});var e=!ee(this.options.speed)&&1<this.options.speed.length;Je.toggleMenuButton.call(this,"speed",e),he(n),Je.checkMenu.call(this),e&&(this.options.speed.forEach(function(e){Je.createMenuItem.call(t,{value:e,list:n,type:"speed",title:Je.getLabel.call(t,"speed",e)})}),Je.updateSetting.call(this,"speed",n))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!ee(e)&&Object.values(e).some(function(e){return!e.hidden});me(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;J(n)||(n=Object.values(this.elements.settings.panels).find(function(e){return!e.hidden}));var i=n.querySelector('[role^="menuitem"]');ke.call(this,i,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(J(t)&&J(n)){var i=t.hidden,r=i;if(O(e))r=e;else if(q(e)&&27===e.which)r=!1;else if(I(e)){var o=Y(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(o);if(a||!a&&e.target!==n&&r)return}n.setAttribute("aria-expanded",r),me(t,!r),ge(this.elements.container,this.config.classNames.menu.open,r),r&&q(e)?Je.focusFirstMenuItem.call(this,null,!0):r||i||ke.call(this,n,q(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,i=t.scrollHeight;return de(t),{width:n,height:i}},showMenuPanel:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(e));if(J(i)){var r=i.parentNode,o=Array.from(r.children).find(function(e){return!e.hidden});if(Ce.transitions&&!Ce.reducedMotion){r.style.width="".concat(o.scrollWidth,"px"),r.style.height="".concat(o.scrollHeight,"px");var a=Je.getMenuSize.call(this,i);Ae.call(this,r,te,function e(t){t.target===r&&["width","height"].includes(t.propertyName)&&(r.style.width="",r.style.height="",Ne.call(n,r,te,e))}),r.style.width="".concat(a.width,"px"),r.style.height="".concat(a.height,"px")}me(o,!0),me(i,!1),Je.focusFirstMenuItem.call(this,i,t)}},setDownloadUrl:function(){var e=this.elements.buttons.download;J(e)&&e.setAttribute("href",this.download)},create:function(f){var p=this,m=Je.bindMenuItemShortcuts,g=Je.createButton,y=Je.createProgress,v=Je.createRange,b=Je.createTime,e=Je.setQualityMenu,t=Je.setSpeedMenu,w=Je.showMenuPanel;this.elements.controls=null,Q(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(g.call(this,"play-large"));var k=ce("div",pe(this.config.selectors.controls.wrapper));this.elements.controls=k;var T={class:"plyr__controls__item"};return He(Q(this.config.controls)?this.config.controls:[]).forEach(function(e){if("restart"===e&&k.appendChild(g.call(p,"restart",T)),"rewind"===e&&k.appendChild(g.call(p,"rewind",T)),"play"===e&&k.appendChild(g.call(p,"play",T)),"fast-forward"===e&&k.appendChild(g.call(p,"fast-forward",T)),"progress"===e){var t=ce("div",{class:"".concat(T.class," plyr__progress__container")}),n=ce("div",pe(p.config.selectors.progress));if(n.appendChild(v.call(p,"seek",{id:"plyr-seek-".concat(f.id)})),n.appendChild(y.call(p,"buffer")),p.config.tooltips.seek){var i=ce("span",{class:p.config.classNames.tooltip},"00:00");n.appendChild(i),p.elements.display.seekTooltip=i}p.elements.progress=n,t.appendChild(p.elements.progress),k.appendChild(t)}if("current-time"===e&&k.appendChild(b.call(p,"currentTime",T)),"duration"===e&&k.appendChild(b.call(p,"duration",T)),"mute"===e||"volume"===e){var r=p.elements.volume;if(J(r)&&k.contains(r)||(r=ce("div",ae({},T,{class:"".concat(T.class," plyr__volume").trim()})),p.elements.volume=r,k.appendChild(r)),"mute"===e&&r.appendChild(g.call(p,"mute")),"volume"===e&&!re.isIos){var o={max:1,step:.05,value:p.config.volume};r.appendChild(v.call(p,"volume",ae(o,{id:"plyr-volume-".concat(f.id)})))}}if("captions"===e&&k.appendChild(g.call(p,"captions",T)),"settings"===e&&!ee(p.config.settings)){var a=ce("div",ae({},T,{class:"".concat(T.class," plyr__menu").trim(),hidden:""}));a.appendChild(g.call(p,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(f.id),"aria-expanded":!1}));var s=ce("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(f.id),hidden:""}),l=ce("div"),c=ce("div",{id:"plyr-settings-".concat(f.id,"-home")}),u=ce("div",{role:"menu"});c.appendChild(u),l.appendChild(c),p.elements.settings.panels.home=c,p.config.settings.forEach(function(e){var t=ce("button",ae(pe(p.config.selectors.buttons.settings),{type:"button",class:"".concat(p.config.classNames.control," ").concat(p.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));m.call(p,t,e),Ae.call(p,t,"click",function(){w.call(p,e,!1)});var n=ce("span",null,We(e,p.config)),i=ce("span",{class:p.config.classNames.menu.value});i.innerHTML=f[e],n.appendChild(i),t.appendChild(n),u.appendChild(t);var r=ce("div",{id:"plyr-settings-".concat(f.id,"-").concat(e),hidden:""}),o=ce("button",{type:"button",class:"".concat(p.config.classNames.control," ").concat(p.config.classNames.control,"--back")});o.appendChild(ce("span",{"aria-hidden":!0},We(e,p.config))),o.appendChild(ce("span",{class:p.config.classNames.hidden},We("menuBack",p.config))),Ae.call(p,r,"keydown",function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),w.call(p,"home",!0))},!1),Ae.call(p,o,"click",function(){w.call(p,"home",!1)}),r.appendChild(o),r.appendChild(ce("div",{role:"menu"})),l.appendChild(r),p.elements.settings.buttons[e]=t,p.elements.settings.panels[e]=r}),s.appendChild(l),a.appendChild(s),k.appendChild(a),p.elements.settings.popup=s,p.elements.settings.menu=a}if("pip"===e&&Ce.pip&&k.appendChild(g.call(p,"pip",T)),"airplay"===e&&Ce.airplay&&k.appendChild(g.call(p,"airplay",T)),"download"===e){var d=ae({},T,{element:"a",href:p.download,target:"_blank"});p.isHTML5&&(d.download="");var h=p.config.urls.download;!_(h)&&p.isEmbed&&ae(d,{icon:"logo-".concat(p.provider),label:p.provider}),k.appendChild(g.call(p,"download",d))}"fullscreen"===e&&k.appendChild(g.call(p,"fullscreen",T))}),this.isHTML5&&e.call(this,qe.getQualityOptions.call(this)),t.call(this),k},inject:function(){var n=this;if(this.config.loadSprite){var e=Je.getIconUrl.call(this);e.cors&&Ke(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var t=null;this.elements.controls=null;var r,i,o={id:this.id,seektime:this.config.seekTime,title:this.config.title},a=!0;if(Y(this.config.controls)&&(this.config.controls=this.config.controls.call(this,o)),this.config.controls||(this.config.controls=[]),J(this.config.controls)||X(this.config.controls)?t=this.config.controls:(t=Je.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:nt.getLabel.call(this)}),a=!1),a&&X(this.config.controls)&&(r=t,Object.entries(o).forEach(function(e){var t=k(e,2),n=t[0],i=t[1];r=Re(r,"{".concat(n,"}"),i)}),t=r),X(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),J(i)||(i=this.elements.container),i[J(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),J(this.elements.controls)||Je.findElements.call(this),!ee(this.elements.buttons)){var s=function(e){var t=n.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:function(){return ye(e,t)},set:function(){ge(e,t,0<arguments.length&&void 0!==arguments[0]&&arguments[0])}})};Object.values(this.elements.buttons).filter(Boolean).forEach(function(e){Q(e)||G(e)?Array.from(e).filter(Boolean).forEach(s):s(e)})}if(re.isEdge&&ie(i),this.config.tooltips.controls){var l=this.config,c=l.classNames,u=l.selectors,d="".concat(u.controls.wrapper," ").concat(u.labels," .").concat(c.hidden),h=be.call(this,d);Array.from(h).forEach(function(e){ge(e,n.config.classNames.hidden,!1),ge(e,n.config.classNames.tooltip,!0)})}}};function Ze(e,t){var n=e;if(!(1<arguments.length&&void 0!==t)||t){var i=document.createElement("a");i.href=n,n=i.href}try{return new URL(n)}catch(e){return null}}function et(e){var r=new URLSearchParams;return $(e)&&Object.entries(e).forEach(function(e){var t=k(e,2),n=t[0],i=t[1];r.set(n,i)}),r}function tt(){}var nt={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!Ce.textTracks)Q(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Je.setCaptionsMenu.call(this);else{if(J(this.elements.captions)||(this.elements.captions=ce("div",pe(this.config.selectors.captions)),o=this.elements.captions,a=this.elements.wrapper,J(o)&&J(a)&&a.parentNode.insertBefore(o,a.nextSibling)),re.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach(function(t){var e=t.getAttribute("src"),n=Ze(e);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&$e(e,"blob").then(function(e){t.setAttribute("src",window.URL.createObjectURL(e))}).catch(function(){de(t)})})}var t=He((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(function(e){return e.split("-")[0]})),n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===n&&(n=k(t,1)[0]);var i=this.storage.get("captions");if(O(i)||(i=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:i,language:n,languages:t}),this.isHTML5){var r=this.config.captions.update?"addtrack removetrack":"removetrack";Ae.call(this,this.media.textTracks,r,nt.update.bind(this))}setTimeout(nt.update.bind(this),0)}var o,a},update:function(){var t=this,e=nt.getTracks.call(this,!0),n=this.captions,i=n.active,r=n.language,o=n.meta,a=n.currentTrackNode,s=Boolean(e.find(function(e){return e.language===r}));this.isHTML5&&this.isVideo&&e.filter(function(e){return!o.get(e)}).forEach(function(e){t.debug.log("Track added",e),o.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),Ae.call(t,e,"cuechange",function(){return nt.updateCues.call(t)})}),(s&&this.language!==r||!e.includes(a))&&(nt.setLanguage.call(this,r),nt.toggle.call(this,i&&s)),ge(this.elements.container,this.config.classNames.captions.enabled,!ee(e)),Q(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Je.setCaptionsMenu.call(this)},toggle:function(e){var t=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var i=this.captions.toggled,r=this.config.classNames.captions.active,o=U(e)?!i:e;if(o!==i){if(n||(this.captions.active=o,this.storage.set({captions:o})),!this.language&&o&&!n){var a=nt.getTracks.call(this),s=nt.findTrack.call(this,[this.captions.language].concat(l(this.captions.languages)),!0);return this.captions.language=s.language,void nt.set.call(this,a.indexOf(s))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=o),ge(this.elements.container,r,o),this.captions.toggled=o,Je.updateSetting.call(this,"captions"),Le.call(this,this.media,o?"captionsenabled":"captionsdisabled")}setTimeout(function(){o&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")})}},set:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=nt.getTracks.call(this);if(-1!==e)if(K(e))if(e in n){if(this.captions.currentTrack!==e){var i=n[this.captions.currentTrack=e],r=(i||{}).language;this.captions.currentTrackNode=i,Je.updateSetting.call(this,"captions"),t||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),Le.call(this,this.media,"languagechange")}nt.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&nt.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else nt.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(X(e)){var n=e.toLowerCase();this.captions.language=n;var i=nt.getTracks.call(this),r=nt.findTrack.call(this,[n]);nt.set.call(this,i.indexOf(r),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter(function(e){return!t.isHTML5||n||t.captions.meta.has(e)}).filter(function(e){return["captions","subtitles"].includes(e.kind)})},findTrack:function(e){function n(e){return Number((t.captions.meta.get(e)||{}).default)}var i,t=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=nt.getTracks.call(this),a=Array.from(o).sort(function(e,t){return n(t)-n(e)});return e.every(function(t){return!(i=a.find(function(e){return e.language===t}))}),i||(r?a[0]:void 0)},getCurrentTrack:function(){return nt.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!H(t)&&Ce.textTracks&&this.captions.toggled&&(t=nt.getCurrentTrack.call(this)),H(t)?ee(t.label)?ee(t.language)?We("enabled",this.config):e.language.toUpperCase():t.label:We("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(J(this.elements.captions))if(U(e)||Array.isArray(e)){var t=e;if(!t){var n=nt.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map(function(e){return e.getCueAsHTML()}).map(Be)}var i=t.map(function(e){return e.trim()}).join("\n");if(i!==this.elements.captions.innerHTML){he(this.elements.captions);var r=ce("span",pe(this.config.selectors.caption));r.innerHTML=i,this.elements.captions.appendChild(r),Le.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},it={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,premium:!1,referrerPolicy:null},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},rt="picture-in-picture",ot={html5:"html5",youtube:"youtube",vimeo:"vimeo"},at=(e(ct,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):tt}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):tt}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):tt}}]),ct),st=(e(lt,[{key:"onChange",value:function(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;J(e)&&(e.pressed=this.active),Le.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ge(this.target,this.player.config.classNames.fullscreen.fallback,e),re.isIos){var t=document.head.querySelector('meta[name="viewport"]'),n="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var i=X(t.content)&&t.content.includes(n);e?(this.cleanupViewport=!i,i||(t.content+=",".concat(n))):this.cleanupViewport&&(t.content=t.content.split(",").filter(function(e){return e.trim()!==n}).join(","))}this.onChange()}},{key:"trapFocus",value:function(e){if(!re.isIos&&this.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,n=be.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),i=k(n,1)[0],r=n[n.length-1];t!==r||e.shiftKey?t===i&&e.shiftKey&&(r.focus(),e.preventDefault()):(i.focus(),e.preventDefault())}}},{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":lt.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled"),ge(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(re.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!lt.native||this.forceFallback?this.toggleFallback(!0):this.prefix?ee(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if(re.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),je(this.player.play());else if(!lt.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!ee(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return lt.native&&!this.forceFallback}},{key:"enabled",get:function(){return(lt.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!lt.native||this.forceFallback)return ye(this.target,this.player.config.classNames.fullscreen.fallback);var e=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}},{key:"target",get:function(){return re.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(Y(document.exitFullscreen))return"";var t="";return["webkit","moz","ms"].some(function(e){return!(!Y(document["".concat(e,"ExitFullscreen")])&&!Y(document["".concat(e,"CancelFullScreen")])||(t=e,0))}),t}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),lt);function lt(e){var t,n,i=this;c(this,lt),this.player=e,this.prefix=lt.prefix,this.property=lt.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===e.config.fullscreen.fallback,this.player.elements.fullscreen=e.config.fullscreen.container&&(t=this.player.elements.container,n=e.config.fullscreen.container,(Element.prototype.closest||function(){var e=this;do{if(ve.matches(e,n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(t,n)),Ae.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),function(){i.onChange()}),Ae.call(this.player,this.player.elements.container,"dblclick",function(e){J(i.player.elements.controls)&&i.player.elements.controls.contains(e.target)||i.toggle()}),Ae.call(this,this.player.elements.container,"keydown",function(e){return i.trapFocus(e)}),this.update()}function ct(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];c(this,ct),this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}function ut(r,e){var o=1<arguments.length&&void 0!==e?e:1;return new Promise(function(e,t){function n(){delete i.onload,delete i.onerror,(i.naturalWidth>=o?e:t)(i)}var i=new Image;Object.assign(i,{onload:n,onerror:n,src:r})})}var dt={addStyleHook:function(){ge(this.elements.container,this.config.selectors.container.replace(".",""),!0),ge(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void dt.toggleNativeControls.call(this,!0);J(this.elements.controls)||(Je.inject.call(this),this.listeners.controls()),dt.toggleNativeControls.call(this),this.isHTML5&&nt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Je.updateVolume.call(this),Je.timeUpdate.call(this),dt.checkPlaying.call(this),ge(this.elements.container,this.config.classNames.pip.supported,Ce.pip&&this.isHTML5&&this.isVideo),ge(this.elements.container,this.config.classNames.airplay.supported,Ce.airplay&&this.isHTML5),ge(this.elements.container,this.config.classNames.isIos,re.isIos),ge(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(function(){Le.call(e,e.media,"ready")},0),dt.setTitle.call(this),this.poster&&dt.setPoster.call(this,this.poster,!1).catch(function(){}),this.config.duration&&Je.durationUpdate.call(this)},setTitle:function(){var t=We("play",this.config);if(X(this.config.title)&&!ee(this.config.title)&&(t+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach(function(e){e.setAttribute("aria-label",t)}),this.isEmbed){var e=we.call(this,"iframe");if(!J(e))return;var n=ee(this.config.title)?"video":this.config.title,i=We("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",n))}},togglePoster:function(e){ge(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(t){var n=this;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),function(){var t=this;return new Promise(function(e){return t.ready?setTimeout(e,0):Ae.call(t,t.elements.container,"ready",e)}).then(function(){})}.call(this).then(function(){return ut(t)}).catch(function(e){throw t===n.poster&&dt.togglePoster.call(n,!1),e}).then(function(){if(t!==n.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(function(){return Object.assign(n.elements.poster.style,{backgroundImage:"url('".concat(t,"')"),backgroundSize:""}),dt.togglePoster.call(n,!0),t}))},checkPlaying:function(e){var t=this;ge(this.elements.container,this.config.classNames.playing,this.playing),ge(this.elements.container,this.config.classNames.paused,this.paused),ge(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",We(t.playing?"pause":"play",t.config))}),I(e)&&"timeupdate"===e.type||dt.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(function(){ge(t.elements.container,t.config.classNames.loading,t.loading),dt.toggleControls.call(t)},this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles:function(){var t=this;Object.values(w({},this.media.style)).filter(function(e){return!ee(e)&&e.startsWith("--plyr")}).forEach(function(e){t.elements.container.style.setProperty(e,t.media.style.getPropertyValue(e)),t.media.style.removeProperty(e)}),ee(this.media.style)&&this.media.removeAttribute("style")}},ht=(e(ft,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,i=e.keyCode?e.keyCode:e.which,r="keydown"===e.type,o=r&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&K(i))if(r){var a=document.activeElement;if(J(a)){var s=t.config.selectors.editable;if(a!==n.inputs.seek&&ve(a,s))return;if(32===e.which&&ve(a,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:o||je(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:o||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:o||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}},{key:"toggleMenu",value:function(e){Je.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,ge(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,n=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var i,r=e.timeStamp-this.lastKeyDown<=20;"focus"===e.type&&!r||(i=t.config.classNames.tabFocus,ge(be.call(t,".".concat(i)),i,!1),"focusout"!==e.type&&(this.focusTimer=setTimeout(function(){var e=document.activeElement;n.container.contains(e)&&ge(document.activeElement,t.config.classNames.tabFocus,!0)},10)))}}},{key:"global",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&Se.call(t,window,"keydown keyup",this.handleKey,e,!1),Se.call(t,document.body,"click",this.toggleMenu,e),Pe.call(t,document.body,"touchstart",this.firstTouch),Se.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var s=this.player,e=s.config,a=s.elements,i=s.timers;function l(e){if(!e)return Ie.call(s);var t=a.container.getBoundingClientRect(),n=t.width,i=t.height;return Ie.call(s,"".concat(n,":").concat(i))}function c(){clearTimeout(i.resized),i.resized=setTimeout(l,50)}!e.keyboard.global&&e.keyboard.focused&&Ae.call(s,a.container,"keydown keyup",this.handleKey,!1),Ae.call(s,a.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",function(e){var t=a.controls;t&&"enterfullscreen"===e.type&&(t.pressed=!1,t.hover=!1);var n=0;["touchstart","touchmove","mousemove"].includes(e.type)&&(dt.toggleControls.call(s,!0),n=s.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout(function(){return dt.toggleControls.call(s,!1)},n)}),Ae.call(s,a.container,"enterfullscreen exitfullscreen",function(e){var t=s.fullscreen,n=t.target,i=t.usingNative;if(n===a.container&&(s.isEmbed||!ee(s.config.ratio))){var r="enterfullscreen"===e.type,o=l(r);o.padding,function(e,t){if(s.isVimeo&&!s.config.vimeo.premium){var n=s.elements.wrapper.firstChild,i=k(e,2)[1],r=k(Oe.call(s),2),o=r[0],a=r[1];n.style.maxWidth=t?"".concat(i/a*o,"px"):null,n.style.margin=t?"0 auto":null}}(o.ratio,r),i||(r?Ae.call(s,window,"resize",c):Ne.call(s,window,"resize",c))}})}},{key:"media",value:function(){var t=this,i=this.player,r=i.elements;if(Ae.call(i,i.media,"timeupdate seeking seeked",function(e){return Je.timeUpdate.call(i,e)}),Ae.call(i,i.media,"durationchange loadeddata loadedmetadata",function(e){return Je.durationUpdate.call(i,e)}),Ae.call(i,i.media,"ended",function(){i.isHTML5&&i.isVideo&&i.config.resetOnEnd&&(i.restart(),i.pause())}),Ae.call(i,i.media,"progress playing seeking seeked",function(e){return Je.updateProgress.call(i,e)}),Ae.call(i,i.media,"volumechange",function(e){return Je.updateVolume.call(i,e)}),Ae.call(i,i.media,"playing play pause ended emptied timeupdate",function(e){return dt.checkPlaying.call(i,e)}),Ae.call(i,i.media,"waiting canplay seeked playing",function(e){return dt.checkLoading.call(i,e)}),i.supported.ui&&i.config.clickToPlay&&!i.isAudio){var n=we.call(i,".".concat(i.config.classNames.video));if(!J(n))return;Ae.call(i,r.container,"click",function(e){([r.container,n].includes(e.target)||n.contains(e.target))&&(i.touch&&i.config.hideControls||(i.ended?(t.proxy(e,i.restart,"restart"),t.proxy(e,function(){je(i.play())},"play")):t.proxy(e,function(){je(i.togglePlay())},"play")))})}i.supported.ui&&i.config.disableContextMenu&&Ae.call(i,r.wrapper,"contextmenu",function(e){e.preventDefault()},!1),Ae.call(i,i.media,"volumechange",function(){i.storage.set({volume:i.volume,muted:i.muted})}),Ae.call(i,i.media,"ratechange",function(){Je.updateSetting.call(i,"speed"),i.storage.set({speed:i.speed})}),Ae.call(i,i.media,"qualitychange",function(e){Je.updateSetting.call(i,"quality",null,e.detail.quality)}),Ae.call(i,i.media,"ready qualitychange",function(){Je.setDownloadUrl.call(i)});var e=i.config.events.concat(["keyup","keydown"]).join(" ");Ae.call(i,i.media,e,function(e){var t=e.detail,n=void 0===t?{}:t;"error"===e.type&&(n=i.media.error),Le.call(i,r.container,e.type,!0,n)})}},{key:"proxy",value:function(e,t,n){var i=this.player,r=i.config.listeners[n],o=!0;Y(r)&&(o=r.call(i,e)),!1!==o&&Y(t)&&t.call(i,e)}},{key:"bind",value:function(e,t,n,i){var r=this,o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],a=this.player,s=a.config.listeners[i],l=Y(s);Ae.call(a,e,t,function(e){return r.proxy(e,n,i)},o&&!l)}},{key:"controls",value:function(){var i=this,s=this.player,r=s.elements,t=re.isIE?"change":"input";if(r.buttons.play&&Array.from(r.buttons.play).forEach(function(e){i.bind(e,"click",function(){je(s.togglePlay())},"play")}),this.bind(r.buttons.restart,"click",s.restart,"restart"),this.bind(r.buttons.rewind,"click",s.rewind,"rewind"),this.bind(r.buttons.fastForward,"click",s.forward,"fastForward"),this.bind(r.buttons.mute,"click",function(){s.muted=!s.muted},"mute"),this.bind(r.buttons.captions,"click",function(){return s.toggleCaptions()}),this.bind(r.buttons.download,"click",function(){Le.call(s,s.media,"download")},"download"),this.bind(r.buttons.fullscreen,"click",function(){s.fullscreen.toggle()},"fullscreen"),this.bind(r.buttons.pip,"click",function(){s.pip="toggle"},"pip"),this.bind(r.buttons.airplay,"click",s.airplay,"airplay"),this.bind(r.buttons.settings,"click",function(e){e.stopPropagation(),e.preventDefault(),Je.toggleMenu.call(s,e)},null,!1),this.bind(r.buttons.settings,"keyup",function(e){var t=e.which;[13,32].includes(t)&&(13!==t?(e.preventDefault(),e.stopPropagation(),Je.toggleMenu.call(s,e)):Je.focusFirstMenuItem.call(s,null,!0))},null,!1),this.bind(r.settings.menu,"keydown",function(e){27===e.which&&Je.toggleMenu.call(s,e)}),this.bind(r.inputs.seek,"mousedown mousemove",function(e){var t=r.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",n)}),this.bind(r.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",function(e){var t=e.currentTarget,n=e.keyCode?e.keyCode:e.which;if(!q(e)||39===n||37===n){s.lastSeekTime=Date.now();var i=t.hasAttribute("play-on-seeked"),r=["mouseup","touchend","keyup"].includes(e.type);i&&r?(t.removeAttribute("play-on-seeked"),je(s.play())):!r&&s.playing&&(t.setAttribute("play-on-seeked",""),s.pause())}}),re.isIos){var e=be.call(s,'input[type="range"]');Array.from(e).forEach(function(e){return i.bind(e,t,function(e){return ie(e.target)})})}this.bind(r.inputs.seek,t,function(e){var t=e.currentTarget,n=t.getAttribute("seek-value");ee(n)&&(n=t.value),t.removeAttribute("seek-value"),s.currentTime=n/t.max*s.duration},"seek"),this.bind(r.progress,"mouseenter mouseleave mousemove",function(e){return Je.updateSeekTooltip.call(s,e)}),this.bind(r.progress,"mousemove touchmove",function(e){var t=s.previewThumbnails;t&&t.loaded&&t.startMove(e)}),this.bind(r.progress,"mouseleave touchend click",function(){var e=s.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)}),this.bind(r.progress,"mousedown touchstart",function(e){var t=s.previewThumbnails;t&&t.loaded&&t.startScrubbing(e)}),this.bind(r.progress,"mouseup touchend",function(e){var t=s.previewThumbnails;t&&t.loaded&&t.endScrubbing(e)}),re.isWebkit&&Array.from(be.call(s,'input[type="range"]')).forEach(function(e){i.bind(e,"input",function(e){return Je.updateRangeFill.call(s,e.target)})}),s.config.toggleInvert&&!J(r.display.duration)&&this.bind(r.display.currentTime,"click",function(){0!==s.currentTime&&(s.config.invertTime=!s.config.invertTime,Je.timeUpdate.call(s))}),this.bind(r.inputs.volume,t,function(e){s.volume=e.target.value},"volume"),this.bind(r.controls,"mouseenter mouseleave",function(e){r.controls.hover=!s.touch&&"mouseenter"===e.type}),r.fullscreen&&Array.from(r.fullscreen.children).filter(function(e){return!e.contains(r.container)}).forEach(function(e){i.bind(e,"mouseenter mouseleave",function(e){r.controls.hover=!s.touch&&"mouseenter"===e.type})}),this.bind(r.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){r.controls.pressed=["mousedown","touchstart"].includes(e.type)}),this.bind(r.controls,"focusin",function(){var e=s.config,t=s.timers;ge(r.controls,e.classNames.noTransition,!0),dt.toggleControls.call(s,!0),setTimeout(function(){ge(r.controls,e.classNames.noTransition,!1)},0);var n=i.touch?3e3:4e3;clearTimeout(t.controls),t.controls=setTimeout(function(){return dt.toggleControls.call(s,!1)},n)}),this.bind(r.inputs.volume,"wheel",function(e){var t=e.webkitDirectionInvertedFromDevice,n=k([e.deltaX,-e.deltaY].map(function(e){return t?-e:e}),2),i=n[0],r=n[1],o=Math.sign(Math.abs(i)>Math.abs(r)?i:r);s.increaseVolume(o/50);var a=s.media.volume;(1===o&&a<1||-1===o&&0<a)&&e.preventDefault()},"volume",!1)}}]),ft);function ft(e){c(this,ft),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}var pt,mt=((pt={exports:{}}).exports=function(){var h=function(){},r={},l={},c={};function d(e,t){if(e){var n=c[e];if(l[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function f(e,t){e.call&&(e={success:e}),t.length?(e.error||h)(t):(e.success||h)(e)}function p(n,i,r,o){var a,s,e=document,t=r.async,l=(r.numRetries||0)+1,c=r.before||h,u=n.replace(/[\?|#].*$/,""),d=n.replace(/^(css|img)!/,"");o=o||0,/(^css!|\.css$)/.test(u)?((s=e.createElement("link")).rel="stylesheet",s.href=d,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(u)?(s=e.createElement("img")).src=d:((s=e.createElement("script")).src=n,s.async=void 0===t||t),!(s.onload=s.onerror=s.onbeforeload=function(e){var t=e.type[0];if(a)try{s.sheet.cssText.length||(t="e")}catch(e){18!=e.code&&(t="e")}if("e"==t){if((o+=1)<l)return p(n,i,r,o)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";i(n,t,e.defaultPrevented)})!==c(n,s)&&e.head.appendChild(s)}function t(e,t,n){var c,u;if(t&&t.trim&&(c=t),u=(c?n:t)||{},c){if(c in r)throw"LoadJS";r[c]=!0}function i(s,l){!function(e,t){var n,i,r=(e=e.push?e:[e]).length,o=r,a=[];for(n=function(e,t,n){if("e"==t&&a.push(e),"b"==t){if(!n)return;a.push(e)}var i;--r||(f(u,i=a),s&&f({success:s,error:l},i),d(c,i))},i=0;i<o;i++)p(e[i],n,t)}(e,u)}if(u.returnPromise)return new Promise(i);i()}return t.ready=function(e,s){return function(e){e=e.push?e:[e];var t,n,i,r=[],o=e.length,a=o;for(t=function(e,t){t.length&&r.push(e),--a||f(s,r)};o--;)n=e[o],(i=l[n])?t(n,i):(c[n]=c[n]||[]).push(t)}(e),t},t.done=function(e){d(e,[])},t.reset=function(){r={},l={},c={}},t.isDefined=function(e){return e in r},t}(),pt.exports);function gt(n){return new Promise(function(e,t){mt(n,{success:e,error:t})})}function yt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Le.call(this,this.media,e?"play":"pause"))}var vt={setup:function(){var t=this;ge(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,Ie.call(t),$(window.Vimeo)?vt.ready.call(t):gt(t.config.urls.vimeo.sdk).then(function(){vt.ready.call(t)}).catch(function(e){t.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready:function(){var r=this,a=this,e=a.config.vimeo,t=e.premium,n=e.referrerPolicy,i=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["premium","referrerPolicy"]);t&&Object.assign(i,{controls:!1,sidedock:!1});var o=et(w({loop:a.config.loop.active,autoplay:a.autoplay,muted:a.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},i)),s=a.media.getAttribute("src");ee(s)&&(s=a.media.getAttribute(a.config.attributes.embed.id));var l,c=ee(l=s)?null:K(Number(l))?l:l.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:l,u=ce("iframe"),d=_e(a.config.urls.vimeo.iframe,c,o);u.setAttribute("src",d),u.setAttribute("allowfullscreen",""),u.setAttribute("allow","autoplay,fullscreen,picture-in-picture"),ee(n)||u.setAttribute("referrerPolicy",n);var h=a.poster;if(t)u.setAttribute("data-poster",h),a.media=fe(u,a.media);else{var f=ce("div",{class:a.config.classNames.embedContainer,"data-poster":h});f.appendChild(u),a.media=fe(f,a.media)}$e(_e(a.config.urls.vimeo.api,c),"json").then(function(e){if(!ee(e)){var t=new URL(e[0].thumbnail_large);t.pathname="".concat(t.pathname.split("_")[0],".jpg"),dt.setPoster.call(a,t.href).catch(function(){})}}),a.embed=new window.Vimeo.Player(u,{autopause:a.config.autopause,muted:a.muted}),a.media.paused=!0,a.media.currentTime=0,a.supported.ui&&a.embed.disableTextTrack(),a.media.play=function(){return yt.call(a,!0),a.embed.play()},a.media.pause=function(){return yt.call(a,!1),a.embed.pause()},a.media.stop=function(){a.pause(),a.currentTime=0};var p=a.media.currentTime;Object.defineProperty(a.media,"currentTime",{get:function(){return p},set:function(e){var t=a.embed,n=a.media,i=a.paused,r=a.volume,o=i&&!t.hasPlayed;n.seeking=!0,Le.call(a,n,"seeking"),Promise.resolve(o&&t.setVolume(0)).then(function(){return t.setCurrentTime(e)}).then(function(){return o&&t.pause()}).then(function(){return o&&t.setVolume(r)}).catch(function(){})}});var m=a.config.speed.selected;Object.defineProperty(a.media,"playbackRate",{get:function(){return m},set:function(e){a.embed.setPlaybackRate(e).then(function(){m=e,Le.call(a,a.media,"ratechange")}).catch(function(){a.options.speed=[1]})}});var g=a.config.volume;Object.defineProperty(a.media,"volume",{get:function(){return g},set:function(e){a.embed.setVolume(e).then(function(){g=e,Le.call(a,a.media,"volumechange")})}});var y=a.config.muted;Object.defineProperty(a.media,"muted",{get:function(){return y},set:function(e){var t=!!O(e)&&e;a.embed.setVolume(t?0:a.config.volume).then(function(){y=t,Le.call(a,a.media,"volumechange")})}});var v,b=a.config.loop;Object.defineProperty(a.media,"loop",{get:function(){return b},set:function(e){var t=O(e)?e:a.config.loop.active;a.embed.setLoop(t).then(function(){b=t})}}),a.embed.getVideoUrl().then(function(e){v=e,Je.setDownloadUrl.call(a)}).catch(function(e){r.debug.warn(e)}),Object.defineProperty(a.media,"currentSrc",{get:function(){return v}}),Object.defineProperty(a.media,"ended",{get:function(){return a.currentTime===a.duration}}),Promise.all([a.embed.getVideoWidth(),a.embed.getVideoHeight()]).then(function(e){var t=k(e,2),n=t[0],i=t[1];a.embed.ratio=[n,i],Ie.call(r)}),a.embed.setAutopause(a.config.autopause).then(function(e){a.config.autopause=e}),a.embed.getVideoTitle().then(function(e){a.config.title=e,dt.setTitle.call(r)}),a.embed.getCurrentTime().then(function(e){p=e,Le.call(a,a.media,"timeupdate")}),a.embed.getDuration().then(function(e){a.media.duration=e,Le.call(a,a.media,"durationchange")}),a.embed.getTextTracks().then(function(e){a.media.textTracks=e,nt.setup.call(a)}),a.embed.on("cuechange",function(e){var t=e.cues,n=(void 0===t?[]:t).map(function(e){return t=e.text,n=document.createDocumentFragment(),i=document.createElement("div"),n.appendChild(i),i.innerHTML=t,n.firstChild.innerText;var t,n,i});nt.updateCues.call(a,n)}),a.embed.on("loaded",function(){a.embed.getPaused().then(function(e){yt.call(a,!e),e||Le.call(a,a.media,"playing")}),J(a.embed.element)&&a.supported.ui&&a.embed.element.setAttribute("tabindex",-1)}),a.embed.on("bufferstart",function(){Le.call(a,a.media,"waiting")}),a.embed.on("bufferend",function(){Le.call(a,a.media,"playing")}),a.embed.on("play",function(){yt.call(a,!0),Le.call(a,a.media,"playing")}),a.embed.on("pause",function(){yt.call(a,!1)}),a.embed.on("timeupdate",function(e){a.media.seeking=!1,p=e.seconds,Le.call(a,a.media,"timeupdate")}),a.embed.on("progress",function(e){a.media.buffered=e.percent,Le.call(a,a.media,"progress"),1===parseInt(e.percent,10)&&Le.call(a,a.media,"canplaythrough"),a.embed.getDuration().then(function(e){e!==a.media.duration&&(a.media.duration=e,Le.call(a,a.media,"durationchange"))})}),a.embed.on("seeked",function(){a.media.seeking=!1,Le.call(a,a.media,"seeked")}),a.embed.on("ended",function(){a.media.paused=!0,Le.call(a,a.media,"ended")}),a.embed.on("error",function(e){a.media.error=e,Le.call(a,a.media,"error")}),setTimeout(function(){return dt.build.call(a)},0)}};function bt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Le.call(this,this.media,e?"play":"pause"))}function wt(e,t){var n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n}var kt={setup:function(){var t=this;if(ge(this.elements.wrapper,this.config.classNames.embed,!0),$(window.YT)&&Y(window.YT.Player))kt.ready.call(this);else{var e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){Y(e)&&e(),kt.ready.call(t)},gt(this.config.urls.youtube.sdk).catch(function(e){t.debug.warn("YouTube API failed to load",e)})}},getTitle:function(e){var r=this;$e(_e(this.config.urls.youtube.api,e)).then(function(e){if($(e)){var t=e.title,n=e.height,i=e.width;r.config.title=t,dt.setTitle.call(r),r.embed.ratio=[i,n]}Ie.call(r)}).catch(function(){Ie.call(r)})},ready:function(){var o=this,e=o.media&&o.media.getAttribute("id");if(ee(e)||!e.startsWith("youtube-")){var t=o.media.getAttribute("src");ee(t)&&(t=o.media.getAttribute(this.config.attributes.embed.id));var n,i,a=ee(n=t)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n,r=(i=o.provider,"".concat(i,"-").concat(Math.floor(1e4*Math.random()))),s=ce("div",{id:r,"data-poster":o.poster});o.media=fe(s,o.media);var l=function(e){return"https://i.ytimg.com/vi/".concat(a,"/").concat(e,"default.jpg")};ut(l("maxres"),121).catch(function(){return ut(l("sd"),121)}).catch(function(){return ut(l("hq"))}).then(function(e){return dt.setPoster.call(o,e.src)}).then(function(e){e.includes("maxres")||(o.elements.poster.style.backgroundSize="cover")}).catch(function(){});var c=o.config.youtube;o.embed=new window.YT.Player(r,{videoId:a,host:c.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0,playerVars:ae({},{autoplay:o.config.autoplay?1:0,hl:o.config.hl,controls:o.supported.ui?0:1,disablekb:1,playsinline:o.config.fullscreen.iosNative?0:1,cc_load_policy:o.captions.active?1:0,cc_lang_pref:o.config.captions.language,widget_referrer:window?window.location.href:null},c),events:{onError:function(e){if(!o.media.error){var t=e.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[t]||"An unknown error occured";o.media.error={code:t,message:n},Le.call(o,o.media,"error")}},onPlaybackRateChange:function(e){var t=e.target;o.media.playbackRate=t.getPlaybackRate(),Le.call(o,o.media,"ratechange")},onReady:function(e){if(!Y(o.media.play)){var n=e.target;kt.getTitle.call(o,a),o.media.play=function(){bt.call(o,!0),n.playVideo()},o.media.pause=function(){bt.call(o,!1),n.pauseVideo()},o.media.stop=function(){n.stopVideo()},o.media.duration=n.getDuration(),o.media.paused=!0,o.media.currentTime=0,Object.defineProperty(o.media,"currentTime",{get:function(){return Number(n.getCurrentTime())},set:function(e){o.paused&&!o.embed.hasPlayed&&o.embed.mute(),o.media.seeking=!0,Le.call(o,o.media,"seeking"),n.seekTo(e)}}),Object.defineProperty(o.media,"playbackRate",{get:function(){return n.getPlaybackRate()},set:function(e){n.setPlaybackRate(e)}});var t=o.config.volume;Object.defineProperty(o.media,"volume",{get:function(){return t},set:function(e){t=e,n.setVolume(100*t),Le.call(o,o.media,"volumechange")}});var i=o.config.muted;Object.defineProperty(o.media,"muted",{get:function(){return i},set:function(e){var t=O(e)?e:i;n[(i=t)?"mute":"unMute"](),Le.call(o,o.media,"volumechange")}}),Object.defineProperty(o.media,"currentSrc",{get:function(){return n.getVideoUrl()}}),Object.defineProperty(o.media,"ended",{get:function(){return o.currentTime===o.duration}});var r=n.getAvailablePlaybackRates();o.options.speed=r.filter(function(e){return o.config.speed.options.includes(e)}),o.supported.ui&&o.media.setAttribute("tabindex",-1),Le.call(o,o.media,"timeupdate"),Le.call(o,o.media,"durationchange"),clearInterval(o.timers.buffering),o.timers.buffering=setInterval(function(){o.media.buffered=n.getVideoLoadedFraction(),(null===o.media.lastBuffered||o.media.lastBuffered<o.media.buffered)&&Le.call(o,o.media,"progress"),o.media.lastBuffered=o.media.buffered,1===o.media.buffered&&(clearInterval(o.timers.buffering),Le.call(o,o.media,"canplaythrough"))},200),setTimeout(function(){return dt.build.call(o)},50)}},onStateChange:function(e){var t=e.target;switch(clearInterval(o.timers.playing),o.media.seeking&&[1,2].includes(e.data)&&(o.media.seeking=!1,Le.call(o,o.media,"seeked")),e.data){case-1:Le.call(o,o.media,"timeupdate"),o.media.buffered=t.getVideoLoadedFraction(),Le.call(o,o.media,"progress");break;case 0:bt.call(o,!1),o.media.loop?(t.stopVideo(),t.playVideo()):Le.call(o,o.media,"ended");break;case 1:o.config.autoplay||!o.media.paused||o.embed.hasPlayed?(bt.call(o,!0),Le.call(o,o.media,"playing"),o.timers.playing=setInterval(function(){Le.call(o,o.media,"timeupdate")},50),o.media.duration!==t.getDuration()&&(o.media.duration=t.getDuration(),Le.call(o,o.media,"durationchange"))):o.media.pause();break;case 2:o.muted||o.embed.unMute(),bt.call(o,!1);break;case 3:Le.call(o,o.media,"waiting")}Le.call(o,o.elements.container,"statechange",!1,{code:e.data})}}})}}},Tt={setup:function(){this.media?(ge(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ge(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ge(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=ce("div",{class:this.config.classNames.video}),se(this.media,this.elements.wrapper),this.elements.poster=ce("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?qe.setup.call(this):this.isYouTube?kt.setup.call(this):this.isVimeo&&vt.setup.call(this)):this.debug.warn("No media element found!")}},xt=(e(At,[{key:"load",value:function(){var e=this;this.enabled&&($(window.google)&&$(window.google.ima)?this.ready():gt(this.player.config.urls.googleIMA.sdk).then(function(){e.ready()}).catch(function(){e.trigger("error",new Error("Google IMA SDK failed to load"))}))}},{key:"ready",value:function(){var e=this;this.enabled||(this.manager&&this.manager.destroy(),this.elements.displayContainer&&this.elements.displayContainer.destroy(),this.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(function(){e.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){var t=this;this.elements.container=ce("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){return t.onAdsManagerLoaded(e)},!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return t.onAdError(e)},!1),this.requestAds()}},{key:"requestAds",value:function(){var e=this.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}},{key:"pollCountdown",value:function(){var n=this;if(!(0<arguments.length&&void 0!==arguments[0]&&arguments[0]))return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(function(){var e=Ge(Math.max(n.manager.getRemainingTime(),0)),t="".concat(We("advertisement",n.player.config)," - ").concat(e);n.elements.container.setAttribute("data-badge-text",t)},100)}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=e.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return t.onAdError(e)}),Object.keys(google.ima.AdEvent.Type).forEach(function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],function(e){return t.onAdEvent(e)})}),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var r=this;ee(this.cuePoints)||this.cuePoints.forEach(function(e){if(0!==e&&-1!==e&&e<r.player.duration){var t=r.player.elements.progress;if(J(t)){var n=100/r.player.duration*e,i=ce("span",{class:r.player.config.classNames.cues});i.style.left="".concat(n.toString(),"%"),t.appendChild(i)}}})}},{key:"onAdEvent",value:function(e){var t,n=this,i=this.player.elements.container,r=e.getAd(),o=e.getAdData();switch(t=e.type,Le.call(n.player,n.player.media,"ads".concat(t.replace(/_/g,"").toLowerCase())),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=i.offsetWidth,r.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:o.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(o.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var i,r=this,e=this.player.elements.container;this.player.on("canplay",function(){r.addCuePoints()}),this.player.on("ended",function(){r.loader.contentComplete()}),this.player.on("timeupdate",function(){i=r.player.currentTime}),this.player.on("seeked",function(){var n=r.player.currentTime;ee(r.cuePoints)||r.cuePoints.forEach(function(e,t){i<e&&e<n&&(r.manager.discardAdBreak(),r.cuePoints.splice(t,1))})}),window.addEventListener("resize",function(){r.manager&&r.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)})}},{key:"play",value:function(){var t=this,e=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then(function(){t.manager.setVolume(t.player.volume),t.elements.displayContainer.initialize();try{t.initialized||(t.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),t.manager.start()),t.initialized=!0}catch(e){t.onAdError(e)}}).catch(function(){})}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,je(this.player.media.play())}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var t=this;this.managerPromise.then(function(){t.manager&&t.manager.destroy(),t.managerPromise=new Promise(function(e){t.on("loaded",e),t.player.debug.log(t.manager)}),t.initialized=!1,t.requestAds()}).catch(function(){})}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this.events[e];Q(o)&&o.forEach(function(e){Y(e)&&e.apply(t,i)})}},{key:"on",value:function(e,t){return Q(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var n=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout(function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")},e)}},{key:"clearSafetyTimer",value:function(e){U(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!ee(e.publisherId)||_(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(_(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(et(t))}}]),At),Ct=(e(St,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)})}},{key:"getThumbnails",value:function(){var r=this;return new Promise(function(e){var t=r.player.config.previewThumbnails.src;if(ee(t))throw new Error("Missing previewThumbnails.src config attribute");function n(){r.thumbnails.sort(function(e,t){return e.height-t.height}),r.player.debug.log("Preview thumbnails",r.thumbnails),e()}if(Y(t))t(function(e){r.thumbnails=e,n()});else{var i=(X(t)?[t]:t).map(function(e){return r.getThumbnail(e)});Promise.all(i).then(n)}})}},{key:"getThumbnail",value:function(o){var a=this;return new Promise(function(r){$e(o).then(function(e){var t,n={frames:(t=[],e.split(/\r\n\r\n|\n\n|\r\r/).forEach(function(e){var o={};e.split(/\r\n|\n|\r/).forEach(function(e){if(K(o.startTime)){if(!ee(e.trim())&&ee(o.text)){var t=e.trim().split("#xywh="),n=k(t,1);if(o.text=n[0],t[1]){var i=k(t[1].split(","),4);o.x=i[0],o.y=i[1],o.w=i[2],o.h=i[3]}}}else{var r=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);r&&(o.startTime=60*Number(r[1]||0)*60+60*Number(r[2])+Number(r[3])+Number("0.".concat(r[4])),o.endTime=60*Number(r[6]||0)*60+60*Number(r[7])+Number(r[8])+Number("0.".concat(r[9])))}}),o.text&&t.push(o)}),t),height:null,urlPrefix:""};n.frames[0].text.startsWith("/")||n.frames[0].text.startsWith("http://")||n.frames[0].text.startsWith("https://")||(n.urlPrefix=o.substring(0,o.lastIndexOf("/")+1));var i=new Image;i.onload=function(){n.height=i.naturalHeight,n.width=i.naturalWidth,a.thumbnails.push(n),r()},i.src=n.urlPrefix+n.frames[0].text})})}},{key:"startMove",value:function(e){if(this.loaded&&I(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=Ge(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){!U(e.button)&&!1!==e.button&&0!==e.button||(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Pe.call(this.player,this.player.media,"timeupdate",function(){e.mouseDown||e.toggleScrubbingContainer(!1)})}},{key:"listeners",value:function(){var e=this;this.player.on("play",function(){e.toggleThumbContainer(!1,!0)}),this.player.on("seeked",function(){e.toggleThumbContainer(!1)}),this.player.on("timeupdate",function(){e.lastTime=e.player.media.currentTime})}},{key:"render",value:function(){this.elements.thumb.container=ce("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=ce("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=ce("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=ce("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),J(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=ce("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var n=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var i=this.thumbnails[0].frames.findIndex(function(e){return n.seekTime>=e.startTime&&n.seekTime<=e.endTime}),e=0<=i,r=0;this.mouseDown||this.toggleThumbContainer(e),e&&(this.thumbnails.forEach(function(e,t){n.loadedImages.includes(e.frames[i].text)&&(r=t)}),i!==this.showingThumb&&(this.showingThumb=i,this.loadImage(r)))}},{key:"loadImage",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=this.showingThumb,i=this.thumbnails[t],r=i.urlPrefix,o=i.frames[n],a=i.frames[n].text,s=r+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,t,n,a,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var l=new Image;l.src=s,l.dataset.index=n,l.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log("Loading image: ".concat(s)),l.onload=function(){return e.showImage(l,o,t,n,a,!0)},this.loadingImage=l,this.removeOldImages(l)}}},{key:"showImage",value:function(e,t,n,i,r){var o=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(r,". num: ").concat(i,". qual: ").concat(n,". newimg: ").concat(o)),this.setImageSizeAndOffset(e,t),o&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,r))}},{key:"removeOldImages",value:function(i){var r=this;Array.from(this.currentImageContainer.children).forEach(function(e){if("img"===e.tagName.toLowerCase()){var t=r.usingSprites?500:1e3;if(e.dataset.index!==i.dataset.index&&!e.dataset.deleting){e.dataset.deleting=!0;var n=r.currentImageContainer;setTimeout(function(){n.removeChild(e),r.player.debug.log("Removing thumb: ".concat(e.dataset.filename))},t)}}})}},{key:"preloadNearby",value:function(t){var s=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new Promise(function(a){setTimeout(function(){var r=s.thumbnails[0].frames[t].text;if(s.showingThumbFilename===r){var e;e=n?s.thumbnails[0].frames.slice(t):s.thumbnails[0].frames.slice(0,t).reverse();var o=!1;e.forEach(function(e){var t=e.text;if(t!==r&&!s.loadedImages.includes(t)){o=!0,s.player.debug.log("Preloading thumb filename: ".concat(t));var n=s.thumbnails[0].urlPrefix+t,i=new Image;i.src=n,i.onload=function(){s.player.debug.log("Preloaded thumb filename: ".concat(t)),s.loadedImages.includes(t)||s.loadedImages.push(t),a()}}}),o||a()}},300)})}},{key:"getHigherQuality",value:function(e,t,n,i){var r=this;if(e<this.thumbnails.length-1){var o=t.naturalHeight;this.usingSprites&&(o=n.h),o<this.thumbContainerHeight&&setTimeout(function(){r.showingThumbFilename===i&&(r.player.debug.log("Showing higher quality thumb for: ".concat(i)),r.loadImage(e+1))},300)}}},{key:"toggleThumbContainer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(20<this.elements.thumb.imageContainer.clientHeight||20<this.elements.thumb.imageContainer.clientWidth)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(20<this.elements.thumb.imageContainer.clientHeight&&this.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&20<this.elements.thumb.imageContainer.clientWidth){var t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(n,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),n=this.elements.thumb.container,i=t.left-e.left+10,r=t.right-e.left-n.clientWidth-10,o=this.mousePosX-e.left-n.clientWidth/2;o<i&&(o=i),r<o&&(o=r),n.style.left="".concat(o,"px")}},{key:"setScrubbingContainerSize",value:function(){var e=wt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),t=e.width,n=e.height;this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(n,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var n=this.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*n,"px"),e.style.width="".concat(e.naturalWidth*n,"px"),e.style.left="-".concat(t.x*n,"px"),e.style.top="-".concat(t.y*n,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?wt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),St),Et={insertElements:function(t,e){var n=this;X(e)?ue(t,this.media,{src:e}):Q(e)&&e.forEach(function(e){ue(t,n.media,e)})},change:function(l){var c=this;oe(l,"sources.length")?(qe.cancelRequests.call(this),this.destroy.call(this,function(){c.options.quality=[],de(c.media),c.media=null,J(c.elements.container)&&c.elements.container.removeAttribute("class");var e=l.sources,t=l.type,n=k(e,1)[0],i=n.provider,r=void 0===i?ot.html5:i,o=n.src,a="html5"===r?t:"div",s="html5"===r?{}:{src:o};Object.assign(c,{provider:r,type:t,supported:Ce.check(t,r,c.config.playsinline),media:ce(a,s)}),c.elements.container.appendChild(c.media),O(l.autoplay)&&(c.config.autoplay=l.autoplay),c.isHTML5&&(c.config.crossorigin&&c.media.setAttribute("crossorigin",""),c.config.autoplay&&c.media.setAttribute("autoplay",""),ee(l.poster)||(c.poster=l.poster),c.config.loop.active&&c.media.setAttribute("loop",""),c.config.muted&&c.media.setAttribute("muted",""),c.config.playsinline&&c.media.setAttribute("playsinline","")),dt.addStyleHook.call(c),c.isHTML5&&Et.insertElements.call(c,"source",e),c.config.title=l.title,Tt.setup.call(c),c.isHTML5&&Object.keys(l).includes("tracks")&&Et.insertElements.call(c,"track",l.tracks),(c.isHTML5||c.isEmbed&&!c.supported.ui)&&dt.build.call(c),c.isHTML5&&c.media.load(),ee(l.previewThumbnails)||(Object.assign(c.config.previewThumbnails,l.previewThumbnails),c.previewThumbnails&&c.previewThumbnails.loaded&&(c.previewThumbnails.destroy(),c.previewThumbnails=null),c.config.previewThumbnails.enabled&&(c.previewThumbnails=new Ct(c))),c.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};function St(e){c(this,St),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}function At(e){var n=this;c(this,At),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(function(e,t){n.on("loaded",e),n.on("error",t)}),this.load()}var Nt=(e(Pt,[{key:"play",value:function(){var e=this;return Y(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(function(){return e.ads.play()}).catch(function(){return je(e.media.play())}),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&Y(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(e){return(O(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):Y(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime-=K(e)?e:this.config.seekTime}},{key:"forward",value:function(e){this.currentTime+=K(e)?e:this.config.seekTime}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(K(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){nt.toggle.call(this,e,!1)}},{key:"airplay",value:function(){Ce.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(!this.supported.ui||this.isAudio)return!1;var t=ye(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=ge(this.elements.container,this.config.classNames.hideControls,n);if(i&&Q(this.config.controls)&&this.config.controls.includes("settings")&&!ee(this.config.settings)&&Je.toggleMenu.call(this,!1),i!==t){var r=i?"controlshidden":"controlsshown";Le.call(this,this.media,r)}return!i}},{key:"on",value:function(e,t){Ae.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){Pe.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){Ne(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.ready){var i=function(){document.body.style.overflow="",t.embed=null,n?(Object.keys(t.elements).length&&(de(t.elements.buttons.play),de(t.elements.captions),de(t.elements.controls),de(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),Y(e)&&e()):(function(){this&&this.eventListeners&&(this.eventListeners.forEach(function(e){var t=e.element,n=e.type,i=e.callback,r=e.options;t.removeEventListener(n,i,r)}),this.eventListeners=[])}.call(t),fe(t.elements.original,t.elements.container),Le.call(t,t.elements.original,"destroyed",!0),Y(e)&&e.call(t.elements.original),t.ready=!1,setTimeout(function(){t.elements=null,t.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(dt.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&Y(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))}}},{key:"supports",value:function(e){return Ce.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===ot.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===ot.youtube}},{key:"isVimeo",get:function(){return this.provider===ot.vimeo}},{key:"isVideo",get:function(){return"video"===this.type}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=K(e)&&0<e;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return K(e)?e:e&&e.length&&0<this.duration?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=K(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;X(t)&&(t=Number(t)),K(t)||(t=this.storage.get("volume")),K(t)||(t=this.config.volume),1<t&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!ee(e)&&this.muted&&0<t&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;O(t)||(t=this.storage.get("muted")),O(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,n=null;K(e)&&(n=e),K(n)||(n=this.storage.get("speed")),K(n)||(n=this.config.speed.selected);var i=this.minimumSpeed,r=this.maximumSpeed;n=function(e,t,n){var i=0<arguments.length&&void 0!==e?e:0,r=1<arguments.length&&void 0!==t?t:0,o=2<arguments.length&&void 0!==n?n:255;return Math.min(Math.max(i,r),o)}(n,i,r),this.config.speed.selected=n,setTimeout(function(){t.media.playbackRate=n},0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,l(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,l(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t,n,i=this.config.quality,r=this.options.quality;if(r.length){var o=[!ee(e)&&Number(e),this.storage.get("quality"),i.selected,i.default].find(K),a=!0;if(!r.includes(o)){var s=(n=o,Q(t=r)&&t.length?t.reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e}):null);this.debug.warn("Unsupported quality option: ".concat(o,", using ").concat(s," instead")),o=s,a=!1}i.selected=o,this.media.quality=o,a&&this.storage.set({quality:o})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=O(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){Et.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return _(e)?e:this.source},set:function(e){_(e)&&(this.config.urls.download=e,Je.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?dt.setPoster.call(this,e,!1).catch(function(){}):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=De(Oe.call(this));return Q(e)?e.join(":"):e},set:function(e){this.isVideo?X(e)&&Me(e)?(this.config.ratio=e,Ie.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=O(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){nt.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){nt.setLanguage.call(this,e,!1)},get:function(){return(nt.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(Ce.pip){var t=O(e)?e:!this.pip;Y(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?rt:"inline"),Y(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return Ce.pip?ee(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===rt:null}}],[{key:"supported",value:function(e,t,n){return Ce.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return Ke(e,t)}},{key:"setup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;return X(e)?n=Array.from(document.querySelectorAll(e)):G(e)?n=Array.from(e):Q(e)&&(n=e.filter(J)),ee(n)?null:n.map(function(e){return new Pt(e,t)})}}]),Pt);function Pt(e,t){var n,i=this;if(c(this,Pt),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Ce.touch,this.media=e,X(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||G(this.media)||Q(this.media))&&(this.media=this.media[0]),this.config=ae({},it,Pt.defaults,t||{},function(){try{return JSON.parse(i.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new at(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Ce),!U(this.media)&&J(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(Ce.check().api){var r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;var o=this.media.tagName.toLowerCase(),a=null,s=null;switch(o){case"div":if(a=this.media.querySelector("iframe"),J(a)){if(s=Ze(a.getAttribute("src")),this.provider=(n=s.toString(),/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(n)?ot.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(n)?ot.vimeo:null),this.elements.container=this.media,this.media=a,this.elements.container.className="",s.search.length){var l=["1","true"];l.includes(s.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(s.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(s.searchParams.get("playsinline")),this.config.youtube.hl=s.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(ee(this.provider)||!Object.keys(ot).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type="video";break;case"video":case"audio":this.type=o,this.provider=ot.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Ce.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new ht(this),this.storage=new ze(this),this.media.plyr=this,J(this.elements.container)||(this.elements.container=ce("div",{tabindex:0}),se(this.media,this.elements.container)),dt.migrateStyles.call(this),dt.addStyleHook.call(this),Tt.setup.call(this),this.config.debug&&Ae.call(this,this.elements.container,this.config.events.join(" "),function(e){i.debug.log("event: ".concat(e.type))}),this.fullscreen=new st(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&dt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new xt(this)),this.isHTML5&&this.config.autoplay&&setTimeout(function(){return je(i.play())},10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Ct(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return Nt.defaults=JSON.parse(JSON.stringify(it)),Nt}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).MicroModal=t()}(this,function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e){if(e){if("string"==typeof e)return n(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var t,c,u,i,d,r=(t=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],e(E.prototype,[{key:"registerTriggers",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.filter(Boolean).forEach(function(e){e.addEventListener("click",function(e){return t.showModal(e)})})}},{key:"showModal",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",function e(){t.modal.removeEventListener("animationend",e,!1),t.setFocusToFirstNode()},!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,e)}},{key:"closeModal",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",function e(){t.classList.remove(n),t.removeEventListener("animationend",e,!1)},!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(e)}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(t);return Array.apply(void 0,C(e))}},{key:"setFocusToFirstNode",value:function(){var t=this;if(!this.config.disableFocus){var e=this.getFocusableNodes();if(0!==e.length){var n=e.filter(function(e){return!e.hasAttribute(t.config.closeTrigger)});0<n.length&&n[0].focus(),0===n.length&&e[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter(function(e){return null!==e.offsetParent}),this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&0<t.length&&n===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}]),c=E,u=null,i=function(e){if(!document.getElementById(e))return console.warn("MicroModal: âSeems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},d=function(e,t){if(e.length<=0&&(console.warn("MicroModal: âPlease specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>')),!t)return!0;for(var n in t)i(n);return!0},{init:function(e){var t,n,i,r=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),o=C(document.querySelectorAll("[".concat(r.openTrigger,"]"))),a=(t=o,n=r.openTrigger,i=[],t.forEach(function(e){var t=e.attributes[n].value;void 0===i[t]&&(i[t]=[]),i[t].push(e)}),i);if(!0!==r.debugMode||!1!==d(o,a))for(var s in a){var l=a[s];r.targetModal=s,r.triggers=C(l),u=new c(r)}},show:function(e,t){var n=t||{};n.targetModal=e,!0===n.debugMode&&!1===i(e)||(u&&u.removeEventListeners(),(u=new c(n)).showModal())},close:function(e){e?u.closeModalById(e):u.closeModal()}});function E(e){var t=e.targetModal,n=e.triggers,i=void 0===n?[]:n,r=e.onShow,o=void 0===r?function(){}:r,a=e.onClose,s=void 0===a?function(){}:a,l=e.openTrigger,c=void 0===l?"data-micromodal-trigger":l,u=e.closeTrigger,d=void 0===u?"data-micromodal-close":u,h=e.openClass,f=void 0===h?"is-open":h,p=e.disableScroll,m=void 0!==p&&p,g=e.disableFocus,y=void 0!==g&&g,v=e.awaitCloseAnimation,b=void 0!==v&&v,w=e.awaitOpenAnimation,k=void 0!==w&&w,T=e.debugMode,x=void 0!==T&&T;!function(e){if(!(e instanceof E))throw new TypeError("Cannot call a class as a function")}(this),this.modal=document.getElementById(t),this.config={debugMode:x,disableScroll:m,openTrigger:c,closeTrigger:d,openClass:f,onShow:o,onClose:s,awaitCloseAnimation:b,awaitOpenAnimation:k,disableFocus:y},0<i.length&&this.registerTriggers.apply(this,C(i)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return window.MicroModal=r});var Sticky=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.selector=e,this.elements=[],this.version="1.3.0",this.vp=this.getViewportSize(),this.body=document.querySelector("body"),this.options={wrap:t.wrap||!1,wrapWith:t.wrapWith||"<span></span>",marginTop:t.marginTop||0,marginBottom:t.marginBottom||0,stickyFor:t.stickyFor||0,stickyClass:t.stickyClass||null,stickyContainer:t.stickyContainer||"body"},this.updateScrollTopPosition=this.updateScrollTopPosition.bind(this),this.updateScrollTopPosition(),window.addEventListener("load",this.updateScrollTopPosition),window.addEventListener("scroll",this.updateScrollTopPosition),this.run()}return _createClass(n,[{key:"run",value:function(){var t=this,n=setInterval(function(){if("complete"===document.readyState){clearInterval(n);var e=document.querySelectorAll(t.selector);t.forEach(e,function(e){return t.renderElement(e)})}},10)}},{key:"renderElement",value:function(e){var t=this;e.sticky={},e.sticky.active=!1,e.sticky.marginTop=parseInt(e.getAttribute("data-margin-top"))||this.options.marginTop,e.sticky.marginBottom=parseInt(e.getAttribute("data-margin-bottom"))||this.options.marginBottom,e.sticky.stickyFor=parseInt(e.getAttribute("data-sticky-for"))||this.options.stickyFor,e.sticky.stickyClass=e.getAttribute("data-sticky-class")||this.options.stickyClass,e.sticky.wrap=!!e.hasAttribute("data-sticky-wrap")||this.options.wrap,e.sticky.stickyContainer=this.options.stickyContainer,e.sticky.container=this.getStickyContainer(e),e.sticky.container.rect=this.getRectangle(e.sticky.container),e.sticky.rect=this.getRectangle(e),"img"===e.tagName.toLowerCase()&&(e.onload=function(){return e.sticky.rect=t.getRectangle(e)}),e.sticky.wrap&&this.wrapElement(e),this.activate(e)}},{key:"wrapElement",value:function(e){e.insertAdjacentHTML("beforebegin",e.getAttribute("data-sticky-wrapWith")||this.options.wrapWith),e.previousSibling.appendChild(e)}},{key:"activate",value:function(e){e.sticky.rect.top+e.sticky.rect.height<e.sticky.container.rect.top+e.sticky.container.rect.height&&e.sticky.stickyFor<this.vp.width&&!e.sticky.active&&(e.sticky.active=!0),this.elements.indexOf(e)<0&&this.elements.push(e),e.sticky.resizeEvent||(this.initResizeEvents(e),e.sticky.resizeEvent=!0),e.sticky.scrollEvent||(this.initScrollEvents(e),e.sticky.scrollEvent=!0),this.setPosition(e)}},{key:"initResizeEvents",value:function(e){var t=this;e.sticky.resizeListener=function(){return t.onResizeEvents(e)},window.addEventListener("resize",e.sticky.resizeListener)}},{key:"destroyResizeEvents",value:function(e){window.removeEventListener("resize",e.sticky.resizeListener)}},{key:"onResizeEvents",value:function(e){this.vp=this.getViewportSize(),e.sticky.rect=this.getRectangle(e),e.sticky.container.rect=this.getRectangle(e.sticky.container),e.sticky.rect.top+e.sticky.rect.height<e.sticky.container.rect.top+e.sticky.container.rect.height&&e.sticky.stickyFor<this.vp.width&&!e.sticky.active?e.sticky.active=!0:(e.sticky.rect.top+e.sticky.rect.height>=e.sticky.container.rect.top+e.sticky.container.rect.height||e.sticky.stickyFor>=this.vp.width&&e.sticky.active)&&(e.sticky.active=!1),this.setPosition(e)}},{key:"initScrollEvents",value:function(e){var t=this;e.sticky.scrollListener=function(){return t.onScrollEvents(e)},window.addEventListener("scroll",e.sticky.scrollListener)}},{key:"destroyScrollEvents",value:function(e){window.removeEventListener("scroll",e.sticky.scrollListener)}},{key:"onScrollEvents",value:function(e){e.sticky&&e.sticky.active&&this.setPosition(e)}},{key:"setPosition",value:function(e){this.css(e,{position:"",width:"",top:"",left:""}),this.vp.height<e.sticky.rect.height||!e.sticky.active||(e.sticky.rect.width||(e.sticky.rect=this.getRectangle(e)),e.sticky.wrap&&this.css(e.parentNode,{display:"block",width:e.sticky.rect.width+"px",height:e.sticky.rect.height+"px"}),0===e.sticky.rect.top&&e.sticky.container===this.body?(this.css(e,{position:"fixed",top:e.sticky.rect.top+"px",left:e.sticky.rect.left+"px",width:e.sticky.rect.width+"px"}),e.sticky.stickyClass&&e.classList.add(e.sticky.stickyClass)):this.scrollTop>e.sticky.rect.top-e.sticky.marginTop?(this.css(e,{position:"fixed",width:e.sticky.rect.width+"px",left:e.sticky.rect.left+"px"}),this.scrollTop+e.sticky.rect.height+e.sticky.marginTop>e.sticky.container.rect.top+e.sticky.container.offsetHeight-e.sticky.marginBottom?(e.sticky.stickyClass&&e.classList.remove(e.sticky.stickyClass),this.css(e,{top:e.sticky.container.rect.top+e.sticky.container.offsetHeight-(this.scrollTop+e.sticky.rect.height+e.sticky.marginBottom)+"px"})):(e.sticky.stickyClass&&e.classList.add(e.sticky.stickyClass),this.css(e,{top:e.sticky.marginTop+"px"}))):(e.sticky.stickyClass&&e.classList.remove(e.sticky.stickyClass),this.css(e,{position:"",width:"",top:"",left:""}),e.sticky.wrap&&this.css(e.parentNode,{display:"",width:"",height:""})))}},{key:"update",value:function(){var t=this;this.forEach(this.elements,function(e){e.sticky.rect=t.getRectangle(e),e.sticky.container.rect=t.getRectangle(e.sticky.container),t.activate(e),t.setPosition(e)})}},{key:"destroy",value:function(){var t=this;window.removeEventListener("load",this.updateScrollTopPosition),window.removeEventListener("scroll",this.updateScrollTopPosition),this.forEach(this.elements,function(e){t.destroyResizeEvents(e),t.destroyScrollEvents(e),delete e.sticky})}},{key:"getStickyContainer",value:function(e){for(var t=e.parentNode;!t.hasAttribute("data-sticky-container")&&!t.parentNode.querySelector(e.sticky.stickyContainer)&&t!==this.body;)t=t.parentNode;return t}},{key:"getRectangle",value:function(e){this.css(e,{position:"",width:"",top:"",left:""});for(var t=Math.max(e.offsetWidth,e.clientWidth,e.scrollWidth),n=Math.max(e.offsetHeight,e.clientHeight,e.scrollHeight),i=0,r=0;i+=e.offsetTop||0,r+=e.offsetLeft||0,e=e.offsetParent;);return{top:i,left:r,width:t,height:n}}},{key:"getViewportSize",value:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}},{key:"updateScrollTopPosition",value:function(){this.scrollTop=(window.pageYOffset||document.scrollTop)-(document.clientTop||0)||0}},{key:"forEach",value:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n])}},{key:"css",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}}]),n}();!function(e,t){"undefined"!=typeof exports?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return t}):e.Sticky=t}(this,Sticky);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0aWNreS5taW4uanMiLCJqcXVlcnkuanMiLCJwbHlyLmpzIiwibm9kZV9tb2R1bGVzL3JhbmdldG91Y2gvZGlzdC9yYW5nZXRvdWNoLm1qcyIsInNyYy9qcy91dGlscy9pcy5qcyIsInNyYy9qcy91dGlscy9hbmltYXRpb24uanMiLCJzcmMvanMvdXRpbHMvYnJvd3Nlci5qcyIsInNyYy9qcy91dGlscy9vYmplY3RzLmpzIiwic3JjL2pzL3V0aWxzL2VsZW1lbnRzLmpzIiwic3JjL2pzL3N1cHBvcnQuanMiLCJzcmMvanMvdXRpbHMvZXZlbnRzLmpzIiwic3JjL2pzL3V0aWxzL3Byb21pc2UuanMiLCJzcmMvanMvdXRpbHMvc3R5bGUuanMiLCJzcmMvanMvaHRtbDUuanMiLCJzcmMvanMvdXRpbHMvYXJyYXlzLmpzIiwic3JjL2pzL3V0aWxzL3N0cmluZ3MuanMiLCJzcmMvanMvdXRpbHMvaTE4bi5qcyIsInNyYy9qcy9zdG9yYWdlLmpzIiwic3JjL2pzL3V0aWxzL2ZldGNoLmpzIiwic3JjL2pzL3V0aWxzL2xvYWQtc3ByaXRlLmpzIiwic3JjL2pzL3V0aWxzL3RpbWUuanMiLCJzcmMvanMvY29udHJvbHMuanMiLCJzcmMvanMvdXRpbHMvdXJscy5qcyIsInNyYy9qcy9jb25zb2xlLmpzIiwic3JjL2pzL2NhcHRpb25zLmpzIiwic3JjL2pzL2NvbmZpZy9kZWZhdWx0cy5qcyIsInNyYy9qcy9jb25maWcvc3RhdGVzLmpzIiwic3JjL2pzL2NvbmZpZy90eXBlcy5qcyIsInNyYy9qcy9mdWxsc2NyZWVuLmpzIiwic3JjL2pzL3V0aWxzL2xvYWQtaW1hZ2UuanMiLCJzcmMvanMvdWkuanMiLCJzcmMvanMvbGlzdGVuZXJzLmpzIiwibm9kZV9tb2R1bGVzL2xvYWRqcy9kaXN0L2xvYWRqcy51bWQuanMiLCJzcmMvanMvdXRpbHMvbG9hZC1zY3JpcHQuanMiLCJzcmMvanMvcGx1Z2lucy92aW1lby5qcyIsInNyYy9qcy9wbHVnaW5zL3lvdXR1YmUuanMiLCJzcmMvanMvcGx1Z2lucy9wcmV2aWV3LXRodW1ibmFpbHMuanMiLCJzcmMvanMvbWVkaWEuanMiLCJzcmMvanMvcGx1Z2lucy9hZHMuanMiLCJzcmMvanMvc291cmNlLmpzIiwic3JjL2pzL3BseXIuanMiLCJzcmMvanMvdXRpbHMvbnVtYmVycy5qcyIsIm1pY3JvbW9kYWwubWluLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsInQiLCJpIiwiVHlwZUVycm9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJlIiwibGVuZ3RoIiwicyIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwicHJvdG90eXBlIiwiZ2xvYmFsIiwiZmFjdG9yeSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkb2N1bWVudCIsInciLCJFcnJvciIsIndpbmRvdyIsInRoaXMiLCJub0dsb2JhbCIsImlzV2luZG93Iiwib2JqIiwiYXJyIiwiZ2V0UHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsInNsaWNlIiwiZmxhdCIsImFycmF5IiwiY2FsbCIsImNvbmNhdCIsImFwcGx5IiwicHVzaCIsImluZGV4T2YiLCJjbGFzczJ0eXBlIiwidG9TdHJpbmciLCJoYXNPd24iLCJoYXNPd25Qcm9wZXJ0eSIsImZuVG9TdHJpbmciLCJPYmplY3RGdW5jdGlvblN0cmluZyIsInN1cHBvcnQiLCJpc0Z1bmN0aW9uIiwibm9kZVR5cGUiLCJwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzIiwidHlwZSIsInNyYyIsIm5vbmNlIiwibm9Nb2R1bGUiLCJET01FdmFsIiwiY29kZSIsIm5vZGUiLCJkb2MiLCJ2YWwiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInRvVHlwZSIsInZlcnNpb24iLCJqUXVlcnkiLCJzZWxlY3RvciIsImNvbnRleHQiLCJmbiIsImluaXQiLCJpc0FycmF5TGlrZSIsImpxdWVyeSIsImNvbnN0cnVjdG9yIiwidG9BcnJheSIsImdldCIsIm51bSIsInB1c2hTdGFjayIsImVsZW1zIiwicmV0IiwibWVyZ2UiLCJwcmV2T2JqZWN0IiwiZWFjaCIsImNhbGxiYWNrIiwibWFwIiwiZWxlbSIsImFyZ3VtZW50cyIsImZpcnN0IiwiZXEiLCJsYXN0IiwiZXZlbiIsImdyZXAiLCJfZWxlbSIsIm9kZCIsImxlbiIsImoiLCJlbmQiLCJzb3J0Iiwic3BsaWNlIiwiZXh0ZW5kIiwib3B0aW9ucyIsIm5hbWUiLCJjb3B5IiwiY29weUlzQXJyYXkiLCJjbG9uZSIsInRhcmdldCIsImRlZXAiLCJpc1BsYWluT2JqZWN0IiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwiZXhwYW5kbyIsIk1hdGgiLCJyYW5kb20iLCJyZXBsYWNlIiwiaXNSZWFkeSIsImVycm9yIiwibXNnIiwibm9vcCIsInByb3RvIiwiQ3RvciIsImlzRW1wdHlPYmplY3QiLCJnbG9iYWxFdmFsIiwibWFrZUFycmF5IiwicmVzdWx0cyIsImluQXJyYXkiLCJzZWNvbmQiLCJpbnZlcnQiLCJtYXRjaGVzIiwiY2FsbGJhY2tFeHBlY3QiLCJhcmciLCJ2YWx1ZSIsImd1aWQiLCJTeW1ib2wiLCJpdGVyYXRvciIsInNwbGl0IiwiX2kiLCJ0b0xvd2VyQ2FzZSIsIlNpenpsZSIsImZ1bmVzY2FwZSIsImVzY2FwZSIsIm5vbkhleCIsImhpZ2giLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJ1bmxvYWRIYW5kbGVyIiwic2V0RG9jdW1lbnQiLCJFeHByIiwiZ2V0VGV4dCIsImlzWE1MIiwidG9rZW5pemUiLCJjb21waWxlIiwic2VsZWN0Iiwib3V0ZXJtb3N0Q29udGV4dCIsInNvcnRJbnB1dCIsImhhc0R1cGxpY2F0ZSIsImRvY0VsZW0iLCJkb2N1bWVudElzSFRNTCIsInJidWdneVFTQSIsInJidWdneU1hdGNoZXMiLCJjb250YWlucyIsIkRhdGUiLCJwcmVmZXJyZWREb2MiLCJkaXJydW5zIiwiZG9uZSIsImNsYXNzQ2FjaGUiLCJjcmVhdGVDYWNoZSIsInRva2VuQ2FjaGUiLCJjb21waWxlckNhY2hlIiwibm9ubmF0aXZlU2VsZWN0b3JDYWNoZSIsInNvcnRPcmRlciIsImEiLCJiIiwicG9wIiwicHVzaE5hdGl2ZSIsImxpc3QiLCJib29sZWFucyIsIndoaXRlc3BhY2UiLCJpZGVudGlmaWVyIiwiYXR0cmlidXRlcyIsInBzZXVkb3MiLCJyd2hpdGVzcGFjZSIsIlJlZ0V4cCIsInJ0cmltIiwicmNvbW1hIiwicmNvbWJpbmF0b3JzIiwicmRlc2NlbmQiLCJycHNldWRvIiwicmlkZW50aWZpZXIiLCJtYXRjaEV4cHIiLCJJRCIsIkNMQVNTIiwiVEFHIiwiQVRUUiIsIlBTRVVETyIsIkNISUxEIiwiYm9vbCIsIm5lZWRzQ29udGV4dCIsInJodG1sIiwicmlucHV0cyIsInJoZWFkZXIiLCJybmF0aXZlIiwicnF1aWNrRXhwciIsInJzaWJsaW5nIiwicnVuZXNjYXBlIiwicmNzc2VzY2FwZSIsImZjc3Nlc2NhcGUiLCJjaCIsImFzQ29kZVBvaW50IiwiY2hhckNvZGVBdCIsImluRGlzYWJsZWRGaWVsZHNldCIsImFkZENvbWJpbmF0b3IiLCJkaXNhYmxlZCIsIm5vZGVOYW1lIiwiZGlyIiwibmV4dCIsImNoaWxkTm9kZXMiLCJlbHMiLCJzZWVkIiwibSIsIm5pZCIsIm1hdGNoIiwiZ3JvdXBzIiwibmV3U2VsZWN0b3IiLCJuZXdDb250ZXh0Iiwib3duZXJEb2N1bWVudCIsImV4ZWMiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicXNhIiwidGVzdCIsInRlc3RDb250ZXh0Iiwic2NvcGUiLCJ0b1NlbGVjdG9yIiwiam9pbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxc2FFcnJvciIsInJlbW92ZUF0dHJpYnV0ZSIsImtleXMiLCJjYWNoZSIsImNhY2hlTGVuZ3RoIiwic2hpZnQiLCJtYXJrRnVuY3Rpb24iLCJhc3NlcnQiLCJlbCIsImFkZEhhbmRsZSIsImF0dHJzIiwiaGFuZGxlciIsImF0dHJIYW5kbGUiLCJzaWJsaW5nQ2hlY2siLCJjdXIiLCJkaWZmIiwic291cmNlSW5kZXgiLCJuZXh0U2libGluZyIsImNyZWF0ZUlucHV0UHNldWRvIiwiY3JlYXRlQnV0dG9uUHNldWRvIiwiY3JlYXRlRGlzYWJsZWRQc2V1ZG8iLCJpc0Rpc2FibGVkIiwiY3JlYXRlUG9zaXRpb25hbFBzZXVkbyIsImFyZ3VtZW50IiwibWF0Y2hJbmRleGVzIiwibmFtZXNwYWNlIiwibmFtZXNwYWNlVVJJIiwiZG9jdW1lbnRFbGVtZW50IiwiaGFzQ29tcGFyZSIsInN1YldpbmRvdyIsImRlZmF1bHRWaWV3IiwidG9wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwiY2xhc3NOYW1lIiwiY3JlYXRlQ29tbWVudCIsImdldEJ5SWQiLCJnZXRFbGVtZW50c0J5TmFtZSIsImZpbHRlciIsImF0dHJJZCIsImZpbmQiLCJnZXRBdHRyaWJ1dGVOb2RlIiwidGFnIiwidG1wIiwiaW5wdXQiLCJpbm5lckhUTUwiLCJtYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJkaXNjb25uZWN0ZWRNYXRjaCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiYWRvd24iLCJidXAiLCJjb21wYXJlIiwic29ydERldGFjaGVkIiwiYXVwIiwiYXAiLCJicCIsInVuc2hpZnQiLCJleHByIiwiZWxlbWVudHMiLCJhdHRyIiwic3BlY2lmaWVkIiwic2VsIiwidW5pcXVlU29ydCIsImR1cGxpY2F0ZXMiLCJkZXRlY3REdXBsaWNhdGVzIiwic29ydFN0YWJsZSIsInRleHRDb250ZW50IiwiZmlyc3RDaGlsZCIsIm5vZGVWYWx1ZSIsInNlbGVjdG9ycyIsImNyZWF0ZVBzZXVkbyIsInJlbGF0aXZlIiwiPiIsIiAiLCIrIiwifiIsInByZUZpbHRlciIsImV4Y2VzcyIsInVucXVvdGVkIiwibm9kZU5hbWVTZWxlY3RvciIsInBhdHRlcm4iLCJvcGVyYXRvciIsImNoZWNrIiwicmVzdWx0Iiwid2hhdCIsIl9hcmd1bWVudCIsInNpbXBsZSIsImZvcndhcmQiLCJvZlR5cGUiLCJfY29udGV4dCIsInhtbCIsInVuaXF1ZUNhY2hlIiwib3V0ZXJDYWNoZSIsIm5vZGVJbmRleCIsInN0YXJ0IiwicGFyZW50IiwidXNlQ2FjaGUiLCJsYXN0Q2hpbGQiLCJ1bmlxdWVJRCIsInBzZXVkbyIsImFyZ3MiLCJzZXRGaWx0ZXJzIiwiaWR4IiwibWF0Y2hlZCIsIm5vdCIsIm1hdGNoZXIiLCJ1bm1hdGNoZWQiLCJoYXMiLCJsYW5nIiwiZWxlbUxhbmciLCJoYXNoIiwibG9jYXRpb24iLCJyb290IiwiZm9jdXMiLCJhY3RpdmVFbGVtZW50IiwiaGFzRm9jdXMiLCJocmVmIiwidGFiSW5kZXgiLCJlbmFibGVkIiwiY2hlY2tlZCIsInNlbGVjdGVkIiwic2VsZWN0ZWRJbmRleCIsImVtcHR5IiwiaGVhZGVyIiwiYnV0dG9uIiwiX21hdGNoSW5kZXhlcyIsImx0IiwiZ3QiLCJyYWRpbyIsImNoZWNrYm94IiwiZmlsZSIsInBhc3N3b3JkIiwiaW1hZ2UiLCJzdWJtaXQiLCJyZXNldCIsInRva2VucyIsImNvbWJpbmF0b3IiLCJiYXNlIiwic2tpcCIsImNoZWNrTm9uRWxlbWVudHMiLCJkb25lTmFtZSIsIm9sZENhY2hlIiwibmV3Q2FjaGUiLCJlbGVtZW50TWF0Y2hlciIsIm1hdGNoZXJzIiwiY29uZGVuc2UiLCJuZXdVbm1hdGNoZWQiLCJtYXBwZWQiLCJzZXRNYXRjaGVyIiwicG9zdEZpbHRlciIsInBvc3RGaW5kZXIiLCJwb3N0U2VsZWN0b3IiLCJ0ZW1wIiwicHJlTWFwIiwicG9zdE1hcCIsInByZWV4aXN0aW5nIiwiY29udGV4dHMiLCJtdWx0aXBsZUNvbnRleHRzIiwibWF0Y2hlckluIiwibWF0Y2hlck91dCIsIm1hdGNoZXJGcm9tVG9rZW5zIiwiY2hlY2tDb250ZXh0IiwibGVhZGluZ1JlbGF0aXZlIiwiaW1wbGljaXRSZWxhdGl2ZSIsIm1hdGNoQ29udGV4dCIsIm1hdGNoQW55Q29udGV4dCIsIm1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyIsImVsZW1lbnRNYXRjaGVycyIsInNldE1hdGNoZXJzIiwic3VwZXJNYXRjaGVyIiwib3V0ZXJtb3N0IiwibWF0Y2hlZENvdW50Iiwic2V0TWF0Y2hlZCIsImNvbnRleHRCYWNrdXAiLCJieUVsZW1lbnQiLCJkaXJydW5zVW5pcXVlIiwiYnlTZXQiLCJmaWx0ZXJzIiwicGFyc2VPbmx5Iiwic29GYXIiLCJwcmVGaWx0ZXJzIiwiY2FjaGVkIiwidG9rZW4iLCJjb21waWxlZCIsIl9uYW1lIiwiZGVmYXVsdFZhbHVlIiwidW5pcXVlIiwiaXNYTUxEb2MiLCJlc2NhcGVTZWxlY3RvciIsInVudGlsIiwidHJ1bmNhdGUiLCJpcyIsInNpYmxpbmdzIiwibiIsInJuZWVkc0NvbnRleHQiLCJyc2luZ2xlVGFnIiwid2lubm93IiwicXVhbGlmaWVyIiwic2VsZiIsInJvb3RqUXVlcnkiLCJyZWFkeSIsInBhcnNlSFRNTCIsInJwYXJlbnRzcHJldiIsImd1YXJhbnRlZWRVbmlxdWUiLCJjaGlsZHJlbiIsImNvbnRlbnRzIiwicHJldiIsInNpYmxpbmciLCJ0YXJnZXRzIiwibCIsImNsb3Nlc3QiLCJpbmRleCIsInByZXZBbGwiLCJhZGQiLCJhZGRCYWNrIiwicGFyZW50cyIsInBhcmVudHNVbnRpbCIsIm5leHRBbGwiLCJuZXh0VW50aWwiLCJwcmV2VW50aWwiLCJjb250ZW50RG9jdW1lbnQiLCJjb250ZW50IiwicmV2ZXJzZSIsInJub3RodG1sd2hpdGUiLCJJZGVudGl0eSIsInYiLCJUaHJvd2VyIiwiZXgiLCJhZG9wdFZhbHVlIiwicmVzb2x2ZSIsInJlamVjdCIsIm5vVmFsdWUiLCJtZXRob2QiLCJwcm9taXNlIiwiZmFpbCIsInRoZW4iLCJDYWxsYmFja3MiLCJvYmplY3QiLCJfIiwiZmxhZyIsImZpcmUiLCJsb2NrZWQiLCJvbmNlIiwiZmlyZWQiLCJmaXJpbmciLCJxdWV1ZSIsImZpcmluZ0luZGV4IiwibWVtb3J5Iiwic3RvcE9uRmFsc2UiLCJyZW1vdmUiLCJkaXNhYmxlIiwibG9jayIsImZpcmVXaXRoIiwiRGVmZXJyZWQiLCJmdW5jIiwidHVwbGVzIiwic3RhdGUiLCJhbHdheXMiLCJkZWZlcnJlZCIsImNhdGNoIiwicGlwZSIsImZucyIsIm5ld0RlZmVyIiwidHVwbGUiLCJyZXR1cm5lZCIsInByb2dyZXNzIiwibm90aWZ5Iiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwib25Qcm9ncmVzcyIsIm1heERlcHRoIiwiZGVwdGgiLCJzcGVjaWFsIiwibWlnaHRUaHJvdyIsInRoYXQiLCJub3RpZnlXaXRoIiwicmVzb2x2ZVdpdGgiLCJwcm9jZXNzIiwiZXhjZXB0aW9uSG9vayIsInN0YWNrVHJhY2UiLCJyZWplY3RXaXRoIiwiZ2V0U3RhY2tIb29rIiwic2V0VGltZW91dCIsInN0YXRlU3RyaW5nIiwid2hlbiIsInNpbmdsZVZhbHVlIiwidXBkYXRlRnVuYyIsInJlc29sdmVDb250ZXh0cyIsInJlc29sdmVWYWx1ZXMiLCJyZW1haW5pbmciLCJtYXN0ZXIiLCJyZXJyb3JOYW1lcyIsInN0YWNrIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwicmVhZHlFeGNlcHRpb24iLCJyZWFkeUxpc3QiLCJjb21wbGV0ZWQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVhZHlXYWl0Iiwid2FpdCIsInJlYWR5U3RhdGUiLCJkb1Njcm9sbCIsImFjY2VzcyIsImNoYWluYWJsZSIsImVtcHR5R2V0IiwicmF3IiwiYnVsayIsIl9rZXkiLCJybXNQcmVmaXgiLCJyZGFzaEFscGhhIiwiZmNhbWVsQ2FzZSIsIl9hbGwiLCJsZXR0ZXIiLCJ0b1VwcGVyQ2FzZSIsImNhbWVsQ2FzZSIsInN0cmluZyIsImFjY2VwdERhdGEiLCJvd25lciIsIkRhdGEiLCJ1aWQiLCJzZXQiLCJkYXRhIiwicHJvcCIsImhhc0RhdGEiLCJkYXRhUHJpdiIsImRhdGFVc2VyIiwicmJyYWNlIiwicm11bHRpRGFzaCIsImRhdGFBdHRyIiwiSlNPTiIsInBhcnNlIiwicmVtb3ZlRGF0YSIsIl9kYXRhIiwiX3JlbW92ZURhdGEiLCJkZXF1ZXVlIiwic3RhcnRMZW5ndGgiLCJob29rcyIsIl9xdWV1ZUhvb2tzIiwic3RvcCIsInNldHRlciIsImNsZWFyUXVldWUiLCJjb3VudCIsImRlZmVyIiwicG51bSIsInNvdXJjZSIsInJjc3NOdW0iLCJjc3NFeHBhbmQiLCJpc0F0dGFjaGVkIiwiY29tcG9zZWQiLCJnZXRSb290Tm9kZSIsImlzSGlkZGVuV2l0aGluVHJlZSIsInN0eWxlIiwiZGlzcGxheSIsImNzcyIsImFkanVzdENTUyIsInZhbHVlUGFydHMiLCJ0d2VlbiIsImFkanVzdGVkIiwic2NhbGUiLCJtYXhJdGVyYXRpb25zIiwiY3VycmVudFZhbHVlIiwiaW5pdGlhbCIsInVuaXQiLCJjc3NOdW1iZXIiLCJpbml0aWFsSW5Vbml0IiwiZGVmYXVsdERpc3BsYXlNYXAiLCJzaG93SGlkZSIsInNob3ciLCJ2YWx1ZXMiLCJib2R5IiwiaGlkZSIsInRvZ2dsZSIsImRpdiIsInJjaGVja2FibGVUeXBlIiwicnRhZ05hbWUiLCJyc2NyaXB0VHlwZSIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjaGVja0Nsb25lIiwiY2xvbmVOb2RlIiwibm9DbG9uZUNoZWNrZWQiLCJvcHRpb24iLCJ3cmFwTWFwIiwidGhlYWQiLCJjb2wiLCJ0ciIsInRkIiwiX2RlZmF1bHQiLCJnZXRBbGwiLCJzZXRHbG9iYWxFdmFsIiwicmVmRWxlbWVudHMiLCJ0Ym9keSIsInRmb290IiwiY29sZ3JvdXAiLCJjYXB0aW9uIiwidGgiLCJvcHRncm91cCIsImJ1aWxkRnJhZ21lbnQiLCJzY3JpcHRzIiwic2VsZWN0aW9uIiwiaWdub3JlZCIsIndyYXAiLCJhdHRhY2hlZCIsImZyYWdtZW50Iiwibm9kZXMiLCJodG1sUHJlZmlsdGVyIiwiY3JlYXRlVGV4dE5vZGUiLCJya2V5RXZlbnQiLCJybW91c2VFdmVudCIsInJ0eXBlbmFtZXNwYWNlIiwicmV0dXJuVHJ1ZSIsInJldHVybkZhbHNlIiwiZXhwZWN0U3luYyIsImVyciIsInNhZmVBY3RpdmVFbGVtZW50Iiwib24iLCJ0eXBlcyIsIm9uZSIsIm9yaWdGbiIsImV2ZW50Iiwib2ZmIiwibGV2ZXJhZ2VOYXRpdmUiLCJub3RBc3luYyIsInNhdmVkIiwiaXNUcmlnZ2VyIiwiZGVsZWdhdGVUeXBlIiwic3RvcFByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJ0cmlnZ2VyIiwiRXZlbnQiLCJoYW5kbGVPYmpJbiIsImV2ZW50SGFuZGxlIiwiZXZlbnRzIiwiaGFuZGxlT2JqIiwiaGFuZGxlcnMiLCJuYW1lc3BhY2VzIiwib3JpZ1R5cGUiLCJlbGVtRGF0YSIsImNyZWF0ZSIsImhhbmRsZSIsInRyaWdnZXJlZCIsImRpc3BhdGNoIiwiYmluZFR5cGUiLCJkZWxlZ2F0ZUNvdW50Iiwic2V0dXAiLCJtYXBwZWRUeXBlcyIsIm9yaWdDb3VudCIsInRlYXJkb3duIiwicmVtb3ZlRXZlbnQiLCJuYXRpdmVFdmVudCIsImhhbmRsZXJRdWV1ZSIsImZpeCIsImRlbGVnYXRlVGFyZ2V0IiwicHJlRGlzcGF0Y2giLCJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsImN1cnJlbnRUYXJnZXQiLCJpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsInJuYW1lc3BhY2UiLCJwb3N0RGlzcGF0Y2giLCJtYXRjaGVkSGFuZGxlcnMiLCJtYXRjaGVkU2VsZWN0b3JzIiwiYWRkUHJvcCIsImhvb2siLCJvcmlnaW5hbEV2ZW50IiwibG9hZCIsIm5vQnViYmxlIiwiY2xpY2siLCJiZWZvcmV1bmxvYWQiLCJyZXR1cm5WYWx1ZSIsInByb3BzIiwiaXNEZWZhdWx0UHJldmVudGVkIiwiZGVmYXVsdFByZXZlbnRlZCIsInJlbGF0ZWRUYXJnZXQiLCJ0aW1lU3RhbXAiLCJub3ciLCJpc1NpbXVsYXRlZCIsImFsdEtleSIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiY2hhbmdlZFRvdWNoZXMiLCJjdHJsS2V5IiwiZGV0YWlsIiwiZXZlbnRQaGFzZSIsIm1ldGFLZXkiLCJwYWdlWCIsInBhZ2VZIiwic2hpZnRLZXkiLCJ2aWV3IiwiY2hhciIsImNoYXJDb2RlIiwia2V5Q29kZSIsImJ1dHRvbnMiLCJjbGllbnRYIiwiY2xpZW50WSIsIm9mZnNldFgiLCJvZmZzZXRZIiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJzY3JlZW5YIiwic2NyZWVuWSIsInRhcmdldFRvdWNoZXMiLCJ0b0VsZW1lbnQiLCJ0b3VjaGVzIiwid2hpY2giLCJibHVyIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiLCJwb2ludGVyZW50ZXIiLCJwb2ludGVybGVhdmUiLCJvcmlnIiwicmVsYXRlZCIsInJub0lubmVyaHRtbCIsInJjaGVja2VkIiwicmNsZWFuU2NyaXB0IiwibWFuaXB1bGF0aW9uVGFyZ2V0IiwiZGlzYWJsZVNjcmlwdCIsInJlc3RvcmVTY3JpcHQiLCJjbG9uZUNvcHlFdmVudCIsImRlc3QiLCJ1ZGF0YU9sZCIsInVkYXRhQ3VyIiwiZG9tTWFuaXAiLCJjb2xsZWN0aW9uIiwiaGFzU2NyaXB0cyIsImlOb0Nsb25lIiwidmFsdWVJc0Z1bmN0aW9uIiwiaHRtbCIsIl9ldmFsVXJsIiwia2VlcERhdGEiLCJjbGVhbkRhdGEiLCJkYXRhQW5kRXZlbnRzIiwiZGVlcERhdGFBbmRFdmVudHMiLCJzcmNFbGVtZW50cyIsImRlc3RFbGVtZW50cyIsImluUGFnZSIsImRldGFjaCIsImFwcGVuZCIsInByZXBlbmQiLCJpbnNlcnRCZWZvcmUiLCJiZWZvcmUiLCJhZnRlciIsInJlcGxhY2VXaXRoIiwicmVwbGFjZUNoaWxkIiwiYXBwZW5kVG8iLCJwcmVwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlcGxhY2VBbGwiLCJvcmlnaW5hbCIsImluc2VydCIsInN3YXAiLCJvbGQiLCJwaXhlbFBvc2l0aW9uVmFsIiwiYm94U2l6aW5nUmVsaWFibGVWYWwiLCJzY3JvbGxib3hTaXplVmFsIiwicGl4ZWxCb3hTdHlsZXNWYWwiLCJyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbCIsInJlbGlhYmxlTWFyZ2luTGVmdFZhbCIsImNvbnRhaW5lciIsInJudW1ub25weCIsImdldFN0eWxlcyIsIm9wZW5lciIsImdldENvbXB1dGVkU3R5bGUiLCJyYm94U3R5bGUiLCJjb21wdXRlU3R5bGVUZXN0cyIsImNzc1RleHQiLCJkaXZTdHlsZSIsInJvdW5kUGl4ZWxNZWFzdXJlcyIsIm1hcmdpbkxlZnQiLCJyaWdodCIsIndpZHRoIiwicG9zaXRpb24iLCJvZmZzZXRXaWR0aCIsIm1lYXN1cmUiLCJyb3VuZCIsInBhcnNlRmxvYXQiLCJjdXJDU1MiLCJjb21wdXRlZCIsIm1pbldpZHRoIiwibWF4V2lkdGgiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicGl4ZWxCb3hTdHlsZXMiLCJhZGRHZXRIb29rSWYiLCJjb25kaXRpb25GbiIsImhvb2tGbiIsImJhY2tncm91bmRDbGlwIiwiY2xlYXJDbG9uZVN0eWxlIiwiYm94U2l6aW5nUmVsaWFibGUiLCJwaXhlbFBvc2l0aW9uIiwicmVsaWFibGVNYXJnaW5MZWZ0Iiwic2Nyb2xsYm94U2l6ZSIsInJlbGlhYmxlVHJEaW1lbnNpb25zIiwidGFibGUiLCJ0ckNoaWxkIiwidHJTdHlsZSIsImhlaWdodCIsInBhcnNlSW50IiwiY3NzUHJlZml4ZXMiLCJlbXB0eVN0eWxlIiwidmVuZG9yUHJvcHMiLCJmaW5hbFByb3BOYW1lIiwiZmluYWwiLCJjc3NQcm9wcyIsImNhcE5hbWUiLCJ2ZW5kb3JQcm9wTmFtZSIsInJkaXNwbGF5c3dhcCIsInJjdXN0b21Qcm9wIiwiY3NzU2hvdyIsInZpc2liaWxpdHkiLCJjc3NOb3JtYWxUcmFuc2Zvcm0iLCJsZXR0ZXJTcGFjaW5nIiwiZm9udFdlaWdodCIsInNldFBvc2l0aXZlTnVtYmVyIiwic3VidHJhY3QiLCJtYXgiLCJib3hNb2RlbEFkanVzdG1lbnQiLCJkaW1lbnNpb24iLCJib3giLCJpc0JvcmRlckJveCIsInN0eWxlcyIsImNvbXB1dGVkVmFsIiwiZXh0cmEiLCJkZWx0YSIsImNlaWwiLCJnZXRXaWR0aE9ySGVpZ2h0IiwidmFsdWVJc0JvcmRlckJveCIsIm9mZnNldFByb3AiLCJnZXRDbGllbnRSZWN0cyIsIlR3ZWVuIiwiZWFzaW5nIiwiY3NzSG9va3MiLCJvcGFjaXR5IiwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiLCJjb2x1bW5Db3VudCIsImZpbGxPcGFjaXR5IiwiZmxleEdyb3ciLCJmbGV4U2hyaW5rIiwiZ3JpZEFyZWEiLCJncmlkQ29sdW1uIiwiZ3JpZENvbHVtbkVuZCIsImdyaWRDb2x1bW5TdGFydCIsImdyaWRSb3ciLCJncmlkUm93RW5kIiwiZ3JpZFJvd1N0YXJ0IiwibGluZUhlaWdodCIsIm9yZGVyIiwib3JwaGFucyIsIndpZG93cyIsInpJbmRleCIsInpvb20iLCJvcmlnTmFtZSIsImlzQ3VzdG9tUHJvcCIsInNldFByb3BlcnR5IiwiaXNGaW5pdGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzY3JvbGxib3hTaXplQnVnZ3kiLCJsZWZ0IiwibWFyZ2luIiwicGFkZGluZyIsImJvcmRlciIsInByZWZpeCIsInN1ZmZpeCIsImV4cGFuZCIsImV4cGFuZGVkIiwicGFydHMiLCJwcm9wSG9va3MiLCJydW4iLCJwZXJjZW50IiwiZWFzZWQiLCJkdXJhdGlvbiIsInBvcyIsInN0ZXAiLCJmeCIsInNjcm9sbFRvcCIsInNjcm9sbExlZnQiLCJsaW5lYXIiLCJwIiwic3dpbmciLCJjb3MiLCJQSSIsImZ4Tm93IiwiaW5Qcm9ncmVzcyIsIm9wdCIsInJmeHR5cGVzIiwicnJ1biIsInNjaGVkdWxlIiwiaGlkZGVuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW50ZXJ2YWwiLCJ0aWNrIiwiY3JlYXRlRnhOb3ciLCJnZW5GeCIsImluY2x1ZGVXaWR0aCIsImNyZWF0ZVR3ZWVuIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwidHdlZW5lcnMiLCJwcm9wZXJ0aWVzIiwic3RvcHBlZCIsInByZWZpbHRlcnMiLCJjdXJyZW50VGltZSIsInN0YXJ0VGltZSIsInR3ZWVucyIsIm9wdHMiLCJzcGVjaWFsRWFzaW5nIiwib3JpZ2luYWxQcm9wZXJ0aWVzIiwib3JpZ2luYWxPcHRpb25zIiwiZ290b0VuZCIsInByb3BGaWx0ZXIiLCJiaW5kIiwiY29tcGxldGUiLCJ0aW1lciIsImFuaW0iLCIqIiwidHdlZW5lciIsIm9sZGZpcmUiLCJwcm9wVHdlZW4iLCJyZXN0b3JlRGlzcGxheSIsImlzQm94IiwiZGF0YVNob3ciLCJ1bnF1ZXVlZCIsIm92ZXJmbG93Iiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIiwicHJlZmlsdGVyIiwic3BlZWQiLCJzcGVlZHMiLCJmYWRlVG8iLCJ0byIsImFuaW1hdGUiLCJkb0FuaW1hdGlvbiIsIm9wdGFsbCIsImZpbmlzaCIsInN0b3BRdWV1ZSIsInRpbWVycyIsImNzc0ZuIiwic2xpZGVEb3duIiwic2xpZGVVcCIsInNsaWRlVG9nZ2xlIiwiZmFkZUluIiwiZmFkZU91dCIsImZhZGVUb2dnbGUiLCJzbG93IiwiZmFzdCIsImRlbGF5IiwidGltZSIsInRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjaGVja09uIiwib3B0U2VsZWN0ZWQiLCJyYWRpb1ZhbHVlIiwiYm9vbEhvb2siLCJyZW1vdmVBdHRyIiwiblR5cGUiLCJhdHRySG9va3MiLCJhdHRyTmFtZXMiLCJnZXR0ZXIiLCJsb3dlcmNhc2VOYW1lIiwicmZvY3VzYWJsZSIsInJjbGlja2FibGUiLCJzdHJpcEFuZENvbGxhcHNlIiwiZ2V0Q2xhc3MiLCJjbGFzc2VzVG9BcnJheSIsInJlbW92ZVByb3AiLCJwcm9wRml4IiwidGFiaW5kZXgiLCJmb3IiLCJjbGFzcyIsImFkZENsYXNzIiwiY2xhc3NlcyIsImN1clZhbHVlIiwiY2xhenoiLCJmaW5hbFZhbHVlIiwicmVtb3ZlQ2xhc3MiLCJ0b2dnbGVDbGFzcyIsInN0YXRlVmFsIiwiaXNWYWxpZFZhbHVlIiwiY2xhc3NOYW1lcyIsImhhc0NsYXNzIiwicnJldHVybiIsInZhbEhvb2tzIiwib3B0aW9uU2V0IiwiZm9jdXNpbiIsInN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrIiwicmZvY3VzTW9ycGgiLCJvbmx5SGFuZGxlcnMiLCJidWJibGVUeXBlIiwib250eXBlIiwibGFzdEVsZW1lbnQiLCJldmVudFBhdGgiLCJwYXJlbnRXaW5kb3ciLCJzaW11bGF0ZSIsInRyaWdnZXJIYW5kbGVyIiwiYXR0YWNoZXMiLCJycXVlcnkiLCJwYXJzZVhNTCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJicmFja2V0IiwickNSTEYiLCJyc3VibWl0dGVyVHlwZXMiLCJyc3VibWl0dGFibGUiLCJidWlsZFBhcmFtcyIsInRyYWRpdGlvbmFsIiwicGFyYW0iLCJ2YWx1ZU9yRnVuY3Rpb24iLCJlbmNvZGVVUklDb21wb25lbnQiLCJzZXJpYWxpemUiLCJzZXJpYWxpemVBcnJheSIsInIyMCIsInJoYXNoIiwicmFudGlDYWNoZSIsInJoZWFkZXJzIiwicm5vQ29udGVudCIsInJwcm90b2NvbCIsInRyYW5zcG9ydHMiLCJhbGxUeXBlcyIsIm9yaWdpbkFuY2hvciIsImFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyIsInN0cnVjdHVyZSIsImRhdGFUeXBlRXhwcmVzc2lvbiIsImRhdGFUeXBlIiwiZGF0YVR5cGVzIiwiaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMiLCJqcVhIUiIsImluc3BlY3RlZCIsInNlZWtpbmdUcmFuc3BvcnQiLCJpbnNwZWN0IiwicHJlZmlsdGVyT3JGYWN0b3J5IiwiZGF0YVR5cGVPclRyYW5zcG9ydCIsImFqYXhFeHRlbmQiLCJmbGF0T3B0aW9ucyIsImFqYXhTZXR0aW5ncyIsImFjdGl2ZSIsImxhc3RNb2RpZmllZCIsImV0YWciLCJ1cmwiLCJpc0xvY2FsIiwicHJvdG9jb2wiLCJwcm9jZXNzRGF0YSIsImFzeW5jIiwiY29udGVudFR5cGUiLCJhY2NlcHRzIiwianNvbiIsInJlc3BvbnNlRmllbGRzIiwiY29udmVydGVycyIsIiogdGV4dCIsInRleHQgaHRtbCIsInRleHQganNvbiIsInRleHQgeG1sIiwiYWpheFNldHVwIiwic2V0dGluZ3MiLCJhamF4UHJlZmlsdGVyIiwiYWpheFRyYW5zcG9ydCIsImFqYXgiLCJ0cmFuc3BvcnQiLCJjYWNoZVVSTCIsInJlc3BvbnNlSGVhZGVyc1N0cmluZyIsInJlc3BvbnNlSGVhZGVycyIsInRpbWVvdXRUaW1lciIsInVybEFuY2hvciIsImZpcmVHbG9iYWxzIiwidW5jYWNoZWQiLCJjYWxsYmFja0NvbnRleHQiLCJnbG9iYWxFdmVudENvbnRleHQiLCJjb21wbGV0ZURlZmVycmVkIiwic3RhdHVzQ29kZSIsInJlcXVlc3RIZWFkZXJzIiwicmVxdWVzdEhlYWRlcnNOYW1lcyIsInN0ckFib3J0IiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib3ZlcnJpZGVNaW1lVHlwZSIsIm1pbWVUeXBlIiwic3RhdHVzIiwiYWJvcnQiLCJzdGF0dXNUZXh0IiwiZmluYWxUZXh0IiwiY3Jvc3NEb21haW4iLCJob3N0IiwiaGFzQ29udGVudCIsImlmTW9kaWZpZWQiLCJoZWFkZXJzIiwiYmVmb3JlU2VuZCIsInN1Y2Nlc3MiLCJzZW5kIiwibmF0aXZlU3RhdHVzVGV4dCIsInJlc3BvbnNlcyIsImlzU3VjY2VzcyIsInJlc3BvbnNlIiwibW9kaWZpZWQiLCJjdCIsImZpbmFsRGF0YVR5cGUiLCJmaXJzdERhdGFUeXBlIiwiYWpheEhhbmRsZVJlc3BvbnNlcyIsImNvbnYyIiwiY3VycmVudCIsImNvbnYiLCJkYXRhRmlsdGVyIiwidGhyb3dzIiwiYWpheENvbnZlcnQiLCJnZXRKU09OIiwiZ2V0U2NyaXB0IiwidGV4dCBzY3JpcHQiLCJ3cmFwQWxsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ3cmFwSW5uZXIiLCJodG1sSXNGdW5jdGlvbiIsInVud3JhcCIsInZpc2libGUiLCJvZmZzZXRIZWlnaHQiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInhoclN1Y2Nlc3NTdGF0dXMiLCIwIiwiMTIyMyIsInhoclN1cHBvcnRlZCIsImNvcnMiLCJlcnJvckNhbGxiYWNrIiwib3BlbiIsInVzZXJuYW1lIiwieGhyRmllbGRzIiwib25sb2FkIiwib25lcnJvciIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJiaW5hcnkiLCJzY3JpcHRBdHRycyIsImNoYXJzZXQiLCJzY3JpcHRDaGFyc2V0IiwiZXZ0Iiwib2xkQ2FsbGJhY2tzIiwicmpzb25wIiwianNvbnAiLCJqc29ucENhbGxiYWNrIiwib3JpZ2luYWxTZXR0aW5ncyIsImNhbGxiYWNrTmFtZSIsIm92ZXJ3cml0dGVuIiwicmVzcG9uc2VDb250YWluZXIiLCJqc29uUHJvcCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImltcGxlbWVudGF0aW9uIiwia2VlcFNjcmlwdHMiLCJwYXJzZWQiLCJwYXJhbXMiLCJhbmltYXRlZCIsIm9mZnNldCIsInNldE9mZnNldCIsImN1clBvc2l0aW9uIiwiY3VyTGVmdCIsImN1ckNTU1RvcCIsImN1clRvcCIsImN1ck9mZnNldCIsImN1ckNTU0xlZnQiLCJjdXJFbGVtIiwidXNpbmciLCJyZWN0Iiwid2luIiwicGFnZVlPZmZzZXQiLCJwYWdlWE9mZnNldCIsIm9mZnNldFBhcmVudCIsInBhcmVudE9mZnNldCIsInNjcm9sbFRvIiwiSGVpZ2h0IiwiV2lkdGgiLCIiLCJkZWZhdWx0RXh0cmEiLCJmdW5jTmFtZSIsInVuYmluZCIsImRlbGVnYXRlIiwidW5kZWxlZ2F0ZSIsImhvdmVyIiwiZm5PdmVyIiwiZm5PdXQiLCJwcm94eSIsImhvbGRSZWFkeSIsImhvbGQiLCJwYXJzZUpTT04iLCJpc051bWVyaWMiLCJpc05hTiIsInRyaW0iLCJkZWZpbmUiLCJhbWQiLCJfalF1ZXJ5IiwiXyQiLCIkIiwibm9Db25mbGljdCIsIm5hdmlnYXRvciIsIlBseXIiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9kZWZpbmVQcm9wZXJ0eSIsIm93bktleXMiLCJlbnVtZXJhYmxlT25seSIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bWJvbHMiLCJzeW0iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfb2JqZWN0U3ByZWFkMiIsImZvckVhY2giLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIl9zbGljZWRUb0FycmF5IiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwicmV0dXJuIiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiX2FycmF5TGlrZVRvQXJyYXkiLCJpdGVyIiwiZnJvbSIsIm8iLCJtaW5MZW4iLCJhcnIyIiwiciIsImRlZmF1bHRzIiwiYWRkQ1NTIiwidGh1bWJXaWR0aCIsIndhdGNoIiwiZ2V0Q29uc3RydWN0b3IiLCJpbnN0YW5jZU9mIiwiaXNTdHJpbmciLCJpc05vZGVMaXN0IiwiTm9kZUxpc3QiLCJFbGVtZW50IiwiQm9vbGVhbiIsImlzTnVsbE9yVW5kZWZpbmVkIiwiaXNPYmplY3QiLCJGdW5jdGlvbiIsImlzRW1wdHkiLCJpcyQxIiwiS2V5Ym9hcmRFdmVudCIsIlRleHRUcmFjayIsImtpbmQiLCJVUkwiLCJzdGFydHNXaXRoIiwiaG9zdG5hbWUiLCJlbGVtZW50IiwiUmFuZ2VUb3VjaCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJhZGRlZE5vZGVzIiwiaW5jbHVkZXMiLCJvYnNlcnZlIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsImNvbmZpZyIsInVzZXJTZWxlY3QiLCJ3ZWJLaXRVc2VyU2VsZWN0IiwidG91Y2hBY3Rpb24iLCJsaXN0ZW5lcnMiLCJyYW5nZVRvdWNoIiwidSIsImMiLCJ0b0ZpeGVkIiwiZGlzcGF0Y2hFdmVudCIsIk51bWJlciIsIlByb21pc2UiLCJ0cmFuc2l0aW9uRW5kRXZlbnQiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsInF1ZXJ5U2VsZWN0b3IiLCJyZXBhaW50IiwiYnJvd3NlciIsImlzSUUiLCJkb2N1bWVudE1vZGUiLCJpc0VkZ2UiLCJ1c2VyQWdlbnQiLCJpc1dlYmtpdCIsImlzSVBob25lIiwicGxhdGZvcm0iLCJpc0lvcyIsImdldERlZXAiLCJwYXRoIiwicmVkdWNlIiwic291cmNlcyIsImFzc2lnbiIsIndyYXBwZXIiLCJjaGlsZCIsInNldEF0dHJpYnV0ZXMiLCJlbnRyaWVzIiwiaW5uZXJUZXh0IiwiaW5zZXJ0RWxlbWVudCIsInJlbW92ZUVsZW1lbnQiLCJlbXB0eUVsZW1lbnQiLCJyZXBsYWNlRWxlbWVudCIsIm5ld0NoaWxkIiwib2xkQ2hpbGQiLCJnZXRBdHRyaWJ1dGVzRnJvbVNlbGVjdG9yIiwiZXhpc3RpbmdBdHRyaWJ1dGVzIiwiZXhpc3RpbmciLCJjaGFyQXQiLCJ0b2dnbGVIaWRkZW4iLCJmb3JjZSIsImNsYXNzTGlzdCIsImdldEVsZW1lbnRzIiwiZ2V0RWxlbWVudCIsInNldEZvY3VzIiwidGFiRm9jdXMiLCJwcmV2ZW50U2Nyb2xsIiwicmFuZ2UiLCJkZWZhdWx0Q29kZWNzIiwiYXVkaW8vb2dnIiwiYXVkaW8vd2F2IiwidmlkZW8vd2VibSIsInZpZGVvL21wNCIsInZpZGVvL29nZyIsImF1ZGlvIiwidmlkZW8iLCJwcm92aWRlciIsInBsYXlzaW5saW5lIiwiY2FuUGxheUlubGluZSIsImFwaSIsInVpIiwicmFuZ2VJbnB1dCIsInBpcCIsIndlYmtpdFNldFByZXNlbnRhdGlvbk1vZGUiLCJwaWN0dXJlSW5QaWN0dXJlRW5hYmxlZCIsImRpc2FibGVQaWN0dXJlSW5QaWN0dXJlIiwiYWlycGxheSIsIldlYktpdFBsYXliYWNrVGFyZ2V0QXZhaWxhYmlsaXR5RXZlbnQiLCJtaW1lIiwibWVkaWFUeXBlIiwiaXNIVE1MNSIsIm1lZGlhIiwiY2FuUGxheVR5cGUiLCJ0ZXh0VHJhY2tzIiwidG91Y2giLCJ0cmFuc2l0aW9ucyIsInJlZHVjZWRNb3Rpb24iLCJtYXRjaE1lZGlhIiwic3VwcG9ydHNQYXNzaXZlTGlzdGVuZXJzIiwic3VwcG9ydGVkIiwidG9nZ2xlTGlzdGVuZXIiLCJwYXNzaXZlIiwiY2FwdHVyZSIsIl90aGlzIiwiZXZlbnRMaXN0ZW5lcnMiLCJvbmNlQ2FsbGJhY2siLCJfdGhpczIiLCJ0cmlnZ2VyRXZlbnQiLCJDdXN0b21FdmVudCIsInBseXIiLCJzaWxlbmNlUHJvbWlzZSIsInZhbGlkYXRlUmF0aW8iLCJldmVyeSIsInJlZHVjZUFzcGVjdFJhdGlvIiwicmF0aW8iLCJkaXZpZGVyIiwiZ2V0RGl2aWRlciIsImgiLCJnZXRBc3BlY3RSYXRpbyIsImVtYmVkIiwidmlkZW9XaWR0aCIsInZpZGVvSGVpZ2h0Iiwic2V0QXNwZWN0UmF0aW8iLCJpc1ZpZGVvIiwicGFkZGluZ0JvdHRvbSIsImlzVmltZW8iLCJ2aW1lbyIsInByZW1pdW0iLCJ0cmFuc2Zvcm0iLCJ2aWRlb0ZpeGVkUmF0aW8iLCJodG1sNSIsImdldFNvdXJjZXMiLCJnZXRRdWFsaXR5T3B0aW9ucyIsInF1YWxpdHkiLCJmb3JjZWQiLCJwbGF5ZXIiLCJvbkNoYW5nZSIsInBhdXNlZCIsInByZWxvYWQiLCJwbGF5YmFja1JhdGUiLCJwbGF5IiwiY2FuY2VsUmVxdWVzdHMiLCJibGFua1ZpZGVvIiwiZGVidWciLCJsb2ciLCJkZWR1cGUiLCJpdGVtIiwiZm9ybWF0IiwidG9UaXRsZUNhc2UiLCJzdWJzdHIiLCJnZXRIVE1MIiwiaTE4biIsInJlc291cmNlcyIsIntzZWVrdGltZX0iLCJzZWVrVGltZSIsInt0aXRsZX0iLCJ0aXRsZSIsImsiLCJ5b3V0dWJlIiwiU3RvcmFnZSIsInN0b3JlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JhZ2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwicmVtb3ZlSXRlbSIsImZldGNoIiwicmVxdWVzdCIsImxvYWRTcHJpdGUiLCJoYXNJZCIsImV4aXN0cyIsInVwZGF0ZSIsImluc2VydEFkamFjZW50RWxlbWVudCIsInVzZVN0b3JhZ2UiLCJnZXRIb3VycyIsInRydW5jIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJmb3JtYXRUaW1lIiwiZGlzcGxheUhvdXJzIiwiaW52ZXJ0ZWQiLCJob3VycyIsIm1pbnMiLCJzZWNzIiwiY29udHJvbHMiLCJnZXRJY29uVXJsIiwiaWNvblVybCIsInN2ZzRldmVyeWJvZHkiLCJmaW5kRWxlbWVudHMiLCJwYXVzZSIsInJlc3RhcnQiLCJyZXdpbmQiLCJmYXN0Rm9yd2FyZCIsIm11dGUiLCJjYXB0aW9ucyIsImZ1bGxzY3JlZW4iLCJpbnB1dHMiLCJzZWVrIiwidm9sdW1lIiwiYnVmZmVyIiwic2Vla1Rvb2x0aXAiLCJ0b29sdGlwIiwidG9nZ2xlTmF0aXZlQ29udHJvbHMiLCJjcmVhdGVJY29uIiwiaWNvblBhdGgiLCJpY29uUHJlZml4IiwiaWNvbiIsImNyZWF0ZUVsZW1lbnROUyIsImFyaWEtaGlkZGVuIiwiZm9jdXNhYmxlIiwidXNlIiwic2V0QXR0cmlidXRlTlMiLCJjcmVhdGVMYWJlbCIsImNyZWF0ZUJhZGdlIiwiYmFkZ2UiLCJtZW51IiwiY3JlYXRlQnV0dG9uIiwiYnV0dG9uVHlwZSIsInRvUGFzY2FsQ2FzZSIsImxhYmVsIiwibGFiZWxQcmVzc2VkIiwiaWNvblByZXNzZWQiLCJzb21lIiwiY29udHJvbCIsImNyZWF0ZVJhbmdlIiwibWluIiwiYXV0b2NvbXBsZXRlIiwicm9sZSIsImFyaWEtbGFiZWwiLCJhcmlhLXZhbHVlbWluIiwiYXJpYS12YWx1ZW1heCIsImFyaWEtdmFsdWVub3ciLCJ1cGRhdGVSYW5nZUZpbGwiLCJjcmVhdGVQcm9ncmVzcyIsInN1ZmZpeEtleSIsInBsYXllZCIsImNyZWF0ZVRpbWUiLCJiaW5kTWVudUl0ZW1TaG9ydGN1dHMiLCJtZW51SXRlbSIsImlzUmFkaW9CdXR0b24iLCJzaG93TWVudVBhbmVsIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImxhc3RFbGVtZW50Q2hpbGQiLCJmb2N1c0ZpcnN0TWVudUl0ZW0iLCJjcmVhdGVNZW51SXRlbSIsImFyaWEtY2hlY2tlZCIsImZsZXgiLCJfdGhpczMiLCJjdXJyZW50VHJhY2siLCJ1cGRhdGVUaW1lRGlzcGxheSIsInVwZGF0ZVZvbHVtZSIsInNldFJhbmdlIiwibXV0ZWQiLCJwcmVzc2VkIiwidXBkYXRlUHJvZ3Jlc3MiLCJfdGhpczQiLCJidWZmZXJlZCIsInVwZGF0ZVNlZWtUb29sdGlwIiwidG9vbHRpcHMiLCJfdGhpczUiLCJjbGllbnRSZWN0IiwidGltZVVwZGF0ZSIsImludmVydFRpbWUiLCJzZWVraW5nIiwiZHVyYXRpb25VcGRhdGUiLCJoYXNEdXJhdGlvbiIsImRpc3BsYXlEdXJhdGlvbiIsInRvZ2dsZU1lbnVCdXR0b24iLCJzZXR0aW5nIiwidXBkYXRlU2V0dGluZyIsInBhbmUiLCJwYW5lbHMiLCJkZWZhdWx0IiwiZ2V0TGFiZWwiLCJzZXRRdWFsaXR5TWVudSIsIl90aGlzNiIsImNoZWNrTWVudSIsInNvcnRpbmciLCJzZXRDYXB0aW9uc01lbnUiLCJ0cmFja3MiLCJnZXRUcmFja3MiLCJ0cmFjayIsIl90aGlzNyIsInRvZ2dsZWQiLCJsYW5ndWFnZSIsInNldFNwZWVkTWVudSIsIl90aGlzOCIsIm1pbmltdW1TcGVlZCIsIm1heGltdW1TcGVlZCIsInBvcHVwIiwiZmlyc3RJdGVtIiwidG9nZ2xlTWVudSIsImNvbXBvc2VkUGF0aCIsImlzTWVudUl0ZW0iLCJnZXRNZW51U2l6ZSIsInRhYiIsInNjcm9sbFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2l6ZSIsInJlc3RvcmUiLCJwcm9wZXJ0eU5hbWUiLCJfdGhpczkiLCJzZXREb3dubG9hZFVybCIsImRvd25sb2FkIiwiZGVmYXVsdEF0dHJpYnV0ZXMiLCJfdGhpczEwIiwicHJvZ3Jlc3NDb250YWluZXIiLCJhcmlhLWhhc3BvcHVwIiwiYXJpYS1jb250cm9scyIsImFyaWEtZXhwYW5kZWQiLCJpbm5lciIsImhvbWUiLCJiYWNrQnV0dG9uIiwidXJscyIsImlzRW1iZWQiLCJpbmplY3QiLCJmbG9vciIsInNlZWt0aW1lIiwiYWRkUHJvcGVydHkiLCJfdGhpczExIiwiY29udHJvbFByZXNzZWQiLCJsYWJlbHMiLCJwYXJzZVVybCIsInBhcnNlciIsImJ1aWxkVXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiaXNZb3VUdWJlIiwiY3JlYXRlT2JqZWN0VVJMIiwiYmxvYiIsImxhbmd1YWdlcyIsInVzZXJMYW5ndWFnZSIsInRyYWNrRXZlbnRzIiwibWV0YSIsImN1cnJlbnRUcmFja05vZGUiLCJsYW5ndWFnZUV4aXN0cyIsIm1vZGUiLCJ1cGRhdGVDdWVzIiwic2V0TGFuZ3VhZ2UiLCJhY3RpdmVDbGFzcyIsImZpbmRUcmFjayIsImVuYWJsZVRleHRUcmFjayIsInNvcnRJc0RlZmF1bHQiLCJzb3J0ZWQiLCJnZXRDdXJyZW50VHJhY2siLCJjdWVzIiwiYWN0aXZlQ3VlcyIsImN1ZSIsImdldEN1ZUFzSFRNTCIsImN1ZVRleHQiLCJhdXRvcGxheSIsImF1dG9wYXVzZSIsInRvZ2dsZUludmVydCIsImNsaWNrVG9QbGF5IiwiaGlkZUNvbnRyb2xzIiwicmVzZXRPbkVuZCIsImRpc2FibGVDb250ZXh0TWVudSIsImxvb3AiLCJrZXlib2FyZCIsImZvY3VzZWQiLCJmYWxsYmFjayIsImlvc05hdGl2ZSIsInNlZWtMYWJlbCIsInVubXV0ZSIsImVuYWJsZUNhcHRpb25zIiwiZGlzYWJsZUNhcHRpb25zIiwiZW50ZXJGdWxsc2NyZWVuIiwiZXhpdEZ1bGxzY3JlZW4iLCJmcmFtZVRpdGxlIiwibWVudUJhY2siLCJub3JtYWwiLCJhbGwiLCJhZHZlcnRpc2VtZW50IiwicXVhbGl0eUJhZGdlIiwiMjE2MCIsIjE0NDAiLCIxMDgwIiwiNzIwIiwiNTc2IiwiNDgwIiwic2RrIiwiaWZyYW1lIiwiZ29vZ2xlSU1BIiwiZWRpdGFibGUiLCJlbWJlZENvbnRhaW5lciIsInBvc3RlciIsInBvc3RlckVuYWJsZWQiLCJhZHMiLCJwbGF5aW5nIiwibG9hZGluZyIsImlzVG91Y2giLCJ1aVN1cHBvcnRlZCIsIm5vVHJhbnNpdGlvbiIsInByZXZpZXdUaHVtYm5haWxzIiwidGh1bWJDb250YWluZXIiLCJ0aHVtYkNvbnRhaW5lclNob3duIiwiaW1hZ2VDb250YWluZXIiLCJ0aW1lQ29udGFpbmVyIiwic2NydWJiaW5nQ29udGFpbmVyIiwic2NydWJiaW5nQ29udGFpbmVyU2hvd24iLCJwdWJsaXNoZXJJZCIsInRhZ1VybCIsImJ5bGluZSIsInBvcnRyYWl0IiwidHJhbnNwYXJlbnQiLCJyZWZlcnJlclBvbGljeSIsIm5vQ29va2llIiwicmVsIiwic2hvd2luZm8iLCJpdl9sb2FkX3BvbGljeSIsIm1vZGVzdGJyYW5kaW5nIiwicHJvdmlkZXJzIiwiQ29uc29sZSIsIkZ1bGxzY3JlZW4iLCJzY3JvbGxQb3NpdGlvbiIsIngiLCJzY3JvbGxYIiwieSIsInNjcm9sbFkiLCJ2aWV3cG9ydCIsInByb3BlcnR5IiwiaGFzUHJvcGVydHkiLCJjbGVhbnVwVmlld3BvcnQiLCJwYXJ0IiwiZm9yY2VGYWxsYmFjayIsIm5hdGl2ZSIsIndlYmtpdEVudGVyRnVsbHNjcmVlbiIsInRvZ2dsZUZhbGxiYWNrIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJuYXZpZ2F0aW9uVUkiLCJ3ZWJraXRFeGl0RnVsbHNjcmVlbiIsImFjdGlvbiIsImNhbmNlbEZ1bGxTY3JlZW4iLCJleGl0IiwiZW50ZXIiLCJmdWxsc2NyZWVuRWxlbWVudCIsInNoYWRvd1Jvb3QiLCJmdWxsc2NyZWVuRW5hYmxlZCIsIndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkIiwibW96RnVsbFNjcmVlbkVuYWJsZWQiLCJtc0Z1bGxzY3JlZW5FbmFibGVkIiwicHJlIiwicGFyZW50RWxlbWVudCIsInRyYXBGb2N1cyIsImxvYWRJbWFnZSIsIm5hdHVyYWxXaWR0aCIsIkltYWdlIiwiYWRkU3R5bGVIb29rIiwiYnVpbGQiLCJjaGVja1BsYXlpbmciLCJzZXRUaXRsZSIsInNldFBvc3RlciIsInRvZ2dsZVBvc3RlciIsImVuYWJsZSIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwidG9nZ2xlQ29udHJvbHMiLCJjaGVja0xvYWRpbmciLCJjb250cm9sc0VsZW1lbnQiLCJyZWNlbnRUb3VjaFNlZWsiLCJsYXN0U2Vla1RpbWUiLCJtaWdyYXRlU3R5bGVzIiwicmVtb3ZlUHJvcGVydHkiLCJMaXN0ZW5lcnMiLCJyZXBlYXQiLCJsYXN0S2V5IiwidG9nZ2xlUGxheSIsImluY3JlYXNlVm9sdW1lIiwiZGVjcmVhc2VWb2x1bWUiLCJ0b2dnbGVDYXB0aW9ucyIsInVzaW5nTmF0aXZlIiwiZm9jdXNUaW1lciIsImxhc3RLZXlEb3duIiwid2FzS2V5RG93biIsImhhbmRsZUtleSIsImZpcnN0VG91Y2giLCJzZXRUYWJGb2N1cyIsInNldFBsYXllclNpemUiLCJyZXNpemVkIiwiaXNFbnRlciIsInZpZGVvWCIsInZpZGVvWSIsImlzQXVkaW8iLCJlbmRlZCIsInByb3h5RXZlbnRzIiwiZGVmYXVsdEhhbmRsZXIiLCJjdXN0b21IYW5kbGVyS2V5IiwiY3VzdG9tSGFuZGxlciIsImhhc0N1c3RvbUhhbmRsZXIiLCJpbnB1dEV2ZW50IiwiaGFzQXR0cmlidXRlIiwic2Vla1RvIiwibG9hZGVkIiwic3RhcnRNb3ZlIiwiZW5kTW92ZSIsInN0YXJ0U2NydWJiaW5nIiwiZW5kU2NydWJiaW5nIiwid2Via2l0RGlyZWN0aW9uSW52ZXJ0ZWRGcm9tRGV2aWNlIiwiX21hcDIiLCJkZWx0YVgiLCJkZWx0YVkiLCJkaXJlY3Rpb24iLCJzaWduIiwiYWJzIiwibG9hZGpzX3VtZCIsImRldm51bGwiLCJidW5kbGVJZENhY2hlIiwiYnVuZGxlUmVzdWx0Q2FjaGUiLCJidW5kbGVDYWxsYmFja1F1ZXVlIiwicHVibGlzaCIsImJ1bmRsZUlkIiwicGF0aHNOb3RGb3VuZCIsInEiLCJleGVjdXRlQ2FsbGJhY2tzIiwiZGVwc05vdEZvdW5kIiwibG9hZEZpbGUiLCJjYWxsYmFja0ZuIiwibnVtVHJpZXMiLCJpc0xlZ2FjeUlFQ3NzIiwibWF4VHJpZXMiLCJudW1SZXRyaWVzIiwiYmVmb3JlQ2FsbGJhY2tGbiIsInBhdGhuYW1lIiwicGF0aFN0cmlwcGVkIiwicmVsTGlzdCIsImFzIiwib25iZWZvcmVsb2FkIiwiZXYiLCJzaGVldCIsImxvYWRqcyIsInBhdGhzIiwiYXJnMSIsImFyZzIiLCJsb2FkRm4iLCJudW1XYWl0aW5nIiwicmV0dXJuUHJvbWlzZSIsImRlcHMiLCJidW5kbGVJZHMiLCJpc0RlZmluZWQiLCJsb2FkU2NyaXB0IiwiYXNzdXJlUGxheWJhY2tTdGF0ZSIsImhhc1BsYXllZCIsIlZpbWVvIiwiZnJhbWVQYXJhbXMiLCJleGNsdWRlZCIsInNvdXJjZUtleXMiLCJzb3VyY2VTeW1ib2xLZXlzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJzaWRlZG9jayIsImdlc3R1cmUiLCIkMiIsImRhdGEtcG9zdGVyIiwidGh1bWJuYWlsX2xhcmdlIiwiUGxheWVyIiwiZGlzYWJsZVRleHRUcmFjayIsInJlc3RvcmVQYXVzZSIsInNldFZvbHVtZSIsInNldEN1cnJlbnRUaW1lIiwic2V0UGxheWJhY2tSYXRlIiwiY3VycmVudFNyYyIsInNldExvb3AiLCJnZXRWaWRlb1VybCIsImdldFZpZGVvV2lkdGgiLCJnZXRWaWRlb0hlaWdodCIsImRpbWVuc2lvbnMiLCJzZXRBdXRvcGF1c2UiLCJnZXRWaWRlb1RpdGxlIiwiZ2V0Q3VycmVudFRpbWUiLCJnZXREdXJhdGlvbiIsImdldFRleHRUcmFja3MiLCJzdHJpcHBlZEN1ZXMiLCJnZXRQYXVzZWQiLCJzZWNvbmRzIiwiZml0UmF0aW8iLCJvdXRlciIsIllUIiwib25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkiLCJnZXRUaXRsZSIsInZpZGVvSWQiLCJjdXJyZW50SWQiLCJwb3N0ZXJTcmMiLCJwbGF5ZXJWYXJzIiwiaGwiLCJkaXNhYmxla2IiLCJjY19sb2FkX3BvbGljeSIsImNjX2xhbmdfcHJlZiIsIndpZGdldF9yZWZlcnJlciIsIm9uRXJyb3IiLCIyIiwiNSIsIjEwMCIsIjEwMSIsIjE1MCIsIm9uUGxheWJhY2tSYXRlQ2hhbmdlIiwiZ2V0UGxheWJhY2tSYXRlIiwib25SZWFkeSIsInBsYXlWaWRlbyIsInBhdXNlVmlkZW8iLCJzdG9wVmlkZW8iLCJnZXRBdmFpbGFibGVQbGF5YmFja1JhdGVzIiwiY2xlYXJJbnRlcnZhbCIsImJ1ZmZlcmluZyIsInNldEludGVydmFsIiwiZ2V0VmlkZW9Mb2FkZWRGcmFjdGlvbiIsImxhc3RCdWZmZXJlZCIsIm9uU3RhdGVDaGFuZ2UiLCJ1bk11dGUiLCJBZHMiLCJnb29nbGUiLCJpbWEiLCJtYW5hZ2VyIiwiZGVzdHJveSIsImRpc3BsYXlDb250YWluZXIiLCJzdGFydFNhZmV0eVRpbWVyIiwibWFuYWdlclByb21pc2UiLCJjbGVhclNhZmV0eVRpbWVyIiwic2V0dXBJTUEiLCJzZXRWcGFpZE1vZGUiLCJJbWFTZGtTZXR0aW5ncyIsIlZwYWlkTW9kZSIsIkVOQUJMRUQiLCJzZXRMb2NhbGUiLCJzZXREaXNhYmxlQ3VzdG9tUGxheWJhY2tGb3JJT1MxMFBsdXMiLCJBZERpc3BsYXlDb250YWluZXIiLCJsb2FkZXIiLCJBZHNMb2FkZXIiLCJBZHNNYW5hZ2VyTG9hZGVkRXZlbnQiLCJUeXBlIiwiQURTX01BTkFHRVJfTE9BREVEIiwib25BZHNNYW5hZ2VyTG9hZGVkIiwiQWRFcnJvckV2ZW50IiwiQURfRVJST1IiLCJvbkFkRXJyb3IiLCJyZXF1ZXN0QWRzIiwiQWRzUmVxdWVzdCIsImFkVGFnVXJsIiwibGluZWFyQWRTbG90V2lkdGgiLCJsaW5lYXJBZFNsb3RIZWlnaHQiLCJub25MaW5lYXJBZFNsb3RXaWR0aCIsIm5vbkxpbmVhckFkU2xvdEhlaWdodCIsImZvcmNlTm9uTGluZWFyRnVsbFNsb3QiLCJzZXRBZFdpbGxQbGF5TXV0ZWQiLCJjb3VudGRvd25UaW1lciIsImdldFJlbWFpbmluZ1RpbWUiLCJBZHNSZW5kZXJpbmdTZXR0aW5ncyIsInJlc3RvcmVDdXN0b21QbGF5YmFja1N0YXRlT25BZEJyZWFrQ29tcGxldGUiLCJlbmFibGVQcmVsb2FkaW5nIiwiZ2V0QWRzTWFuYWdlciIsImN1ZVBvaW50cyIsImdldEN1ZVBvaW50cyIsIkFkRXZlbnQiLCJvbkFkRXZlbnQiLCJjdWVQb2ludCIsInNlZWtFbGVtZW50IiwiY3VlUGVyY2VudGFnZSIsImFkIiwiZ2V0QWQiLCJhZERhdGEiLCJnZXRBZERhdGEiLCJMT0FERUQiLCJwb2xsQ291bnRkb3duIiwiaXNMaW5lYXIiLCJTVEFSVEVEIiwiQUxMX0FEU19DT01QTEVURUQiLCJsb2FkQWRzIiwiY29udGVudENvbXBsZXRlIiwiQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQiLCJwYXVzZUNvbnRlbnQiLCJDT05URU5UX1JFU1VNRV9SRVFVRVNURUQiLCJyZXN1bWVDb250ZW50IiwiTE9HIiwiYWRFcnJvciIsImdldE1lc3NhZ2UiLCJjYW5jZWwiLCJhZGRDdWVQb2ludHMiLCJzZWVrZWRUaW1lIiwiZGlzY2FyZEFkQnJlYWsiLCJyZXNpemUiLCJWaWV3TW9kZSIsIk5PUk1BTCIsImluaXRpYWxpemUiLCJpbml0aWFsaXplZCIsIl90aGlzMTIiLCJzYWZldHlUaW1lciIsIl90aGlzMTMiLCJBVl9QVUJMSVNIRVJJRCIsIkFWX0NIQU5ORUxJRCIsIkFWX1VSTCIsImNiIiwiQVZfV0lEVEgiLCJBVl9IRUlHSFQiLCJBVl9DRElNMiIsIlByZXZpZXdUaHVtYm5haWxzIiwiZ2V0VGh1bWJuYWlscyIsInJlbmRlciIsImRldGVybWluZUNvbnRhaW5lckF1dG9TaXppbmciLCJzb3J0QW5kUmVzb2x2ZSIsInRodW1ibmFpbHMiLCJwcm9taXNlcyIsImdldFRodW1ibmFpbCIsInByb2Nlc3NlZExpc3QiLCJ0aHVtYm5haWwiLCJmcmFtZXMiLCJmcmFtZSIsImxpbmUiLCJsaW5lU3BsaXQiLCJtYXRjaFRpbWVzIiwiZW5kVGltZSIsInVybFByZWZpeCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwidGVtcEltYWdlIiwibmF0dXJhbEhlaWdodCIsInBlcmNlbnRhZ2UiLCJtb3VzZVBvc1giLCJ0aHVtYiIsInNob3dJbWFnZUF0Q3VycmVudFRpbWUiLCJ0b2dnbGVUaHVtYkNvbnRhaW5lciIsIm1vdXNlRG93biIsInRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lciIsImxhc3RUaW1lIiwic2NydWJiaW5nIiwic2V0U2NydWJiaW5nQ29udGFpbmVyU2l6ZSIsInNldFRodW1iQ29udGFpbmVyU2l6ZUFuZFBvcyIsInRodW1iTnVtIiwiZmluZEluZGV4IiwiaGFzVGh1bWIiLCJxdWFsaXR5SW5kZXgiLCJsb2FkZWRJbWFnZXMiLCJzaG93aW5nVGh1bWIiLCJ0aHVtYkZpbGVuYW1lIiwidGh1bWJVcmwiLCJjdXJyZW50SW1hZ2VFbGVtZW50IiwiZGF0YXNldCIsImZpbGVuYW1lIiwic2hvd0ltYWdlIiwicmVtb3ZlT2xkSW1hZ2VzIiwibG9hZGluZ0ltYWdlIiwidXNpbmdTcHJpdGVzIiwicHJldmlld0ltYWdlIiwic2hvd2luZ1RodW1iRmlsZW5hbWUiLCJuZXdJbWFnZSIsInNldEltYWdlU2l6ZUFuZE9mZnNldCIsImN1cnJlbnRJbWFnZUNvbnRhaW5lciIsInByZWxvYWROZWFyYnkiLCJnZXRIaWdoZXJRdWFsaXR5IiwiY3VycmVudEltYWdlIiwidGFnTmFtZSIsInJlbW92ZURlbGF5IiwiZGVsZXRpbmciLCJvbGRUaHVtYkZpbGVuYW1lIiwidGh1bWJuYWlsc0Nsb25lIiwiZm91bmRPbmUiLCJuZXdUaHVtYkZpbGVuYW1lIiwidGh1bWJVUkwiLCJjdXJyZW50UXVhbGl0eUluZGV4IiwicHJldmlld0ltYWdlSGVpZ2h0IiwidGh1bWJDb250YWluZXJIZWlnaHQiLCJjbGVhclNob3dpbmciLCJjbGllbnRIZWlnaHQiLCJjbGllbnRXaWR0aCIsInNpemVTcGVjaWZpZWRJbkNTUyIsInRodW1iQXNwZWN0UmF0aW8iLCJ0aHVtYkhlaWdodCIsInNldFRodW1iQ29udGFpbmVyUG9zIiwic2Vla2JhclJlY3QiLCJwbHlyUmVjdCIsIm1pblZhbCIsIm1heFZhbCIsInByZXZpZXdQb3MiLCJtdWx0aXBsaWVyIiwiY3VycmVudFNjcnViYmluZ0ltYWdlRWxlbWVudCIsImN1cnJlbnRUaHVtYm5haWxJbWFnZUVsZW1lbnQiLCJpbnNlcnRFbGVtZW50cyIsImF0dHJpYnV0ZSIsImNoYW5nZSIsImNyb3Nzb3JpZ2luIiwibGFzdE1vdXNlTW92ZVRpbWUiLCJ3ZWJraXRTaG93UGxheWJhY2tUYXJnZXRQaWNrZXIiLCJpc0hpZGRlbiIsImhpZGluZyIsImV2ZW50TmFtZSIsInNvZnQiLCJ1bmxvYWQiLCJpbnB1dElzVmFsaWQiLCJmYXV4RHVyYXRpb24iLCJyZWFsRHVyYXRpb24iLCJJbmZpbml0eSIsIm1vekhhc0F1ZGlvIiwid2Via2l0QXVkaW9EZWNvZGVkQnl0ZUNvdW50IiwiYXVkaW9UcmFja3MiLCJ1cGRhdGVTdG9yYWdlIiwiY3VyciIsInJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlIiwiZXhpdFBpY3R1cmVJblBpY3R1cmUiLCJ3ZWJraXRQcmVzZW50YXRpb25Nb2RlIiwicGljdHVyZUluUGljdHVyZUVsZW1lbnQiLCJpbmxpbmUiLCJmYWlsZWQiLCJXZWFrTWFwIiwic2VhcmNoIiwidHJ1dGh5Iiwic2VhcmNoUGFyYW1zIiwiTWljcm9Nb2RhbCIsInNob3dNb2RhbCIsIm1vZGFsIiwib3BlbkNsYXNzIiwic2Nyb2xsQmVoYXZpb3VyIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJhd2FpdE9wZW5BbmltYXRpb24iLCJzZXRGb2N1c1RvRmlyc3ROb2RlIiwib25TaG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJvbkNsb3NlIiwiYXdhaXRDbG9zZUFuaW1hdGlvbiIsImNsb3NlTW9kYWwiLCJkaXNhYmxlU2Nyb2xsIiwib25DbGljayIsIm9uS2V5ZG93biIsImNsb3NlVHJpZ2dlciIsInJldGFpbkZvY3VzIiwiZGlzYWJsZUZvY3VzIiwiZ2V0Rm9jdXNhYmxlTm9kZXMiLCJvcGVuVHJpZ2dlciIsImRlYnVnTW9kZSIsInRhcmdldE1vZGFsIiwidHJpZ2dlcnMiLCJjbG9zZSIsImNsb3NlTW9kYWxCeUlkIiwiZCIsImYiLCJnIiwiRSIsIk0iLCJDIiwiQSIsInJlZ2lzdGVyVHJpZ2dlcnMiLCJTdGlja3kiLCJ2cCIsImdldFZpZXdwb3J0U2l6ZSIsIndyYXBXaXRoIiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwic3RpY2t5Rm9yIiwic3RpY2t5Q2xhc3MiLCJzdGlja3lDb250YWluZXIiLCJ1cGRhdGVTY3JvbGxUb3BQb3NpdGlvbiIsInJlbmRlckVsZW1lbnQiLCJzdGlja3kiLCJnZXRTdGlja3lDb250YWluZXIiLCJnZXRSZWN0YW5nbGUiLCJ3cmFwRWxlbWVudCIsImFjdGl2YXRlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwicHJldmlvdXNTaWJsaW5nIiwicmVzaXplRXZlbnQiLCJpbml0UmVzaXplRXZlbnRzIiwic2Nyb2xsRXZlbnQiLCJpbml0U2Nyb2xsRXZlbnRzIiwic2V0UG9zaXRpb24iLCJyZXNpemVMaXN0ZW5lciIsIm9uUmVzaXplRXZlbnRzIiwic2Nyb2xsTGlzdGVuZXIiLCJvblNjcm9sbEV2ZW50cyIsImRlc3Ryb3lSZXNpemVFdmVudHMiLCJkZXN0cm95U2Nyb2xsRXZlbnRzIiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImNsaWVudFRvcCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsZ0JBQWdCQyxFQUFFQyxHQUFHLEtBQUtELGFBQWFDLEdBQUcsTUFBTSxJQUFJQyxVQUFVLHFDQUFxQyxTQUFTQyxrQkFBa0JILEVBQUVDLEdBQUcsSUFBSSxJQUFJRyxFQUFFLEVBQUVBLEVBQUVILEVBQUVJLE9BQU9ELElBQUksQ0FBQyxJQUFJRSxFQUFFTCxFQUFFRyxHQUFHRSxFQUFFQyxXQUFXRCxFQUFFQyxhQUFZLEVBQUdELEVBQUVFLGNBQWEsRUFBRyxVQUFVRixJQUFJQSxFQUFFRyxVQUFTLEdBQUlDLE9BQU9DLGVBQWVYLEVBQUVNLEVBQUVNLElBQUlOLElBQUksU0FBU08sYUFBYWIsRUFBRUMsRUFBRUcsR0FBRyxP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QUE3ME0sSUFBbTFNLFNBQVNKLEVBQUVDLEdBQUcsb0JBQW9CaUIsUUFBUUQsT0FBT0MsUUFBUWpCLEVBQUUsbUJBQW1CNnNDLFFBQVFBLE9BQU9DLElBQUlELE9BQU8sR0FBRyxXQUFXLE9BQU83c0MsSUFBSUQsRUFBRStrRSxPQUFPOWtFLEVBQTFJLENBQTZJc0IsS0FBS3dqRSIsImZpbGUiOiJsaWJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayh0LGkpe2lmKCEodCBpbnN0YW5jZW9mIGkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModCxpKXtmb3IodmFyIGU9MDtlPGkubGVuZ3RoO2UrKyl7dmFyIHM9aVtlXTtzLmVudW1lcmFibGU9cy5lbnVtZXJhYmxlfHwhMSxzLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBzJiYocy53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscy5rZXkscyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyh0LGksZSl7cmV0dXJuIGkmJl9kZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLGkpLGUmJl9kZWZpbmVQcm9wZXJ0aWVzKHQsZSksdH12YXIgU3RpY2t5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciB0PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLGk9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O19jbGFzc0NhbGxDaGVjayh0aGlzLGUpLHRoaXMuc2VsZWN0b3I9dCx0aGlzLmVsZW1lbnRzPVtdLHRoaXMudmVyc2lvbj1cIjEuMy4wXCIsdGhpcy52cD10aGlzLmdldFZpZXdwb3J0U2l6ZSgpLHRoaXMuYm9keT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKSx0aGlzLm9wdGlvbnM9e3dyYXA6aS53cmFwfHwhMSx3cmFwV2l0aDppLndyYXBXaXRofHxcIjxzcGFuPjwvc3Bhbj5cIixtYXJnaW5Ub3A6aS5tYXJnaW5Ub3B8fDAsbWFyZ2luQm90dG9tOmkubWFyZ2luQm90dG9tfHwwLHN0aWNreUZvcjppLnN0aWNreUZvcnx8MCxzdGlja3lDbGFzczppLnN0aWNreUNsYXNzfHxudWxsLHN0aWNreUNvbnRhaW5lcjppLnN0aWNreUNvbnRhaW5lcnx8XCJib2R5XCJ9LHRoaXMudXBkYXRlU2Nyb2xsVG9wUG9zaXRpb249dGhpcy51cGRhdGVTY3JvbGxUb3BQb3NpdGlvbi5iaW5kKHRoaXMpLHRoaXMudXBkYXRlU2Nyb2xsVG9wUG9zaXRpb24oKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzLnVwZGF0ZVNjcm9sbFRvcFBvc2l0aW9uKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMudXBkYXRlU2Nyb2xsVG9wUG9zaXRpb24pLHRoaXMucnVuKCl9cmV0dXJuIF9jcmVhdGVDbGFzcyhlLFt7a2V5OlwicnVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLGU9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKXtjbGVhckludGVydmFsKGUpO3ZhciB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaS5zZWxlY3Rvcik7aS5mb3JFYWNoKHQsZnVuY3Rpb24odCl7cmV0dXJuIGkucmVuZGVyRWxlbWVudCh0KX0pfX0sMTApfX0se2tleTpcInJlbmRlckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzO3Quc3RpY2t5PXt9LHQuc3RpY2t5LmFjdGl2ZT0hMSx0LnN0aWNreS5tYXJnaW5Ub3A9cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1hcmdpbi10b3BcIikpfHx0aGlzLm9wdGlvbnMubWFyZ2luVG9wLHQuc3RpY2t5Lm1hcmdpbkJvdHRvbT1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcImRhdGEtbWFyZ2luLWJvdHRvbVwiKSl8fHRoaXMub3B0aW9ucy5tYXJnaW5Cb3R0b20sdC5zdGlja3kuc3RpY2t5Rm9yPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGlja3ktZm9yXCIpKXx8dGhpcy5vcHRpb25zLnN0aWNreUZvcix0LnN0aWNreS5zdGlja3lDbGFzcz10LmdldEF0dHJpYnV0ZShcImRhdGEtc3RpY2t5LWNsYXNzXCIpfHx0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MsdC5zdGlja3kud3JhcD0hIXQuaGFzQXR0cmlidXRlKFwiZGF0YS1zdGlja3ktd3JhcFwiKXx8dGhpcy5vcHRpb25zLndyYXAsdC5zdGlja3kuc3RpY2t5Q29udGFpbmVyPXRoaXMub3B0aW9ucy5zdGlja3lDb250YWluZXIsdC5zdGlja3kuY29udGFpbmVyPXRoaXMuZ2V0U3RpY2t5Q29udGFpbmVyKHQpLHQuc3RpY2t5LmNvbnRhaW5lci5yZWN0PXRoaXMuZ2V0UmVjdGFuZ2xlKHQuc3RpY2t5LmNvbnRhaW5lciksdC5zdGlja3kucmVjdD10aGlzLmdldFJlY3RhbmdsZSh0KSxcImltZ1wiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJih0Lm9ubG9hZD1mdW5jdGlvbigpe3JldHVybiB0LnN0aWNreS5yZWN0PWkuZ2V0UmVjdGFuZ2xlKHQpfSksdC5zdGlja3kud3JhcCYmdGhpcy53cmFwRWxlbWVudCh0KSx0aGlzLmFjdGl2YXRlKHQpfX0se2tleTpcIndyYXBFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmViZWdpblwiLHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGlja3ktd3JhcFdpdGhcIil8fHRoaXMub3B0aW9ucy53cmFwV2l0aCksdC5wcmV2aW91c1NpYmxpbmcuYXBwZW5kQ2hpbGQodCl9fSx7a2V5OlwiYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0aWNreS5yZWN0LnRvcCt0LnN0aWNreS5yZWN0LmhlaWdodDx0LnN0aWNreS5jb250YWluZXIucmVjdC50b3ArdC5zdGlja3kuY29udGFpbmVyLnJlY3QuaGVpZ2h0JiZ0LnN0aWNreS5zdGlja3lGb3I8dGhpcy52cC53aWR0aCYmIXQuc3RpY2t5LmFjdGl2ZSYmKHQuc3RpY2t5LmFjdGl2ZT0hMCksdGhpcy5lbGVtZW50cy5pbmRleE9mKHQpPDAmJnRoaXMuZWxlbWVudHMucHVzaCh0KSx0LnN0aWNreS5yZXNpemVFdmVudHx8KHRoaXMuaW5pdFJlc2l6ZUV2ZW50cyh0KSx0LnN0aWNreS5yZXNpemVFdmVudD0hMCksdC5zdGlja3kuc2Nyb2xsRXZlbnR8fCh0aGlzLmluaXRTY3JvbGxFdmVudHModCksdC5zdGlja3kuc2Nyb2xsRXZlbnQ9ITApLHRoaXMuc2V0UG9zaXRpb24odCl9fSx7a2V5OlwiaW5pdFJlc2l6ZUV2ZW50c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7dC5zdGlja3kucmVzaXplTGlzdGVuZXI9ZnVuY3Rpb24oKXtyZXR1cm4gaS5vblJlc2l6ZUV2ZW50cyh0KX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0LnN0aWNreS5yZXNpemVMaXN0ZW5lcil9fSx7a2V5OlwiZGVzdHJveVJlc2l6ZUV2ZW50c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdC5zdGlja3kucmVzaXplTGlzdGVuZXIpfX0se2tleTpcIm9uUmVzaXplRXZlbnRzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy52cD10aGlzLmdldFZpZXdwb3J0U2l6ZSgpLHQuc3RpY2t5LnJlY3Q9dGhpcy5nZXRSZWN0YW5nbGUodCksdC5zdGlja3kuY29udGFpbmVyLnJlY3Q9dGhpcy5nZXRSZWN0YW5nbGUodC5zdGlja3kuY29udGFpbmVyKSx0LnN0aWNreS5yZWN0LnRvcCt0LnN0aWNreS5yZWN0LmhlaWdodDx0LnN0aWNreS5jb250YWluZXIucmVjdC50b3ArdC5zdGlja3kuY29udGFpbmVyLnJlY3QuaGVpZ2h0JiZ0LnN0aWNreS5zdGlja3lGb3I8dGhpcy52cC53aWR0aCYmIXQuc3RpY2t5LmFjdGl2ZT90LnN0aWNreS5hY3RpdmU9ITA6KHQuc3RpY2t5LnJlY3QudG9wK3Quc3RpY2t5LnJlY3QuaGVpZ2h0Pj10LnN0aWNreS5jb250YWluZXIucmVjdC50b3ArdC5zdGlja3kuY29udGFpbmVyLnJlY3QuaGVpZ2h0fHx0LnN0aWNreS5zdGlja3lGb3I+PXRoaXMudnAud2lkdGgmJnQuc3RpY2t5LmFjdGl2ZSkmJih0LnN0aWNreS5hY3RpdmU9ITEpLHRoaXMuc2V0UG9zaXRpb24odCl9fSx7a2V5OlwiaW5pdFNjcm9sbEV2ZW50c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7dC5zdGlja3kuc2Nyb2xsTGlzdGVuZXI9ZnVuY3Rpb24oKXtyZXR1cm4gaS5vblNjcm9sbEV2ZW50cyh0KX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0LnN0aWNreS5zY3JvbGxMaXN0ZW5lcil9fSx7a2V5OlwiZGVzdHJveVNjcm9sbEV2ZW50c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdC5zdGlja3kuc2Nyb2xsTGlzdGVuZXIpfX0se2tleTpcIm9uU2Nyb2xsRXZlbnRzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5zdGlja3kmJnQuc3RpY2t5LmFjdGl2ZSYmdGhpcy5zZXRQb3NpdGlvbih0KX19LHtrZXk6XCJzZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY3NzKHQse3Bvc2l0aW9uOlwiXCIsd2lkdGg6XCJcIix0b3A6XCJcIixsZWZ0OlwiXCJ9KSx0aGlzLnZwLmhlaWdodDx0LnN0aWNreS5yZWN0LmhlaWdodHx8IXQuc3RpY2t5LmFjdGl2ZXx8KHQuc3RpY2t5LnJlY3Qud2lkdGh8fCh0LnN0aWNreS5yZWN0PXRoaXMuZ2V0UmVjdGFuZ2xlKHQpKSx0LnN0aWNreS53cmFwJiZ0aGlzLmNzcyh0LnBhcmVudE5vZGUse2Rpc3BsYXk6XCJibG9ja1wiLHdpZHRoOnQuc3RpY2t5LnJlY3Qud2lkdGgrXCJweFwiLGhlaWdodDp0LnN0aWNreS5yZWN0LmhlaWdodCtcInB4XCJ9KSwwPT09dC5zdGlja3kucmVjdC50b3AmJnQuc3RpY2t5LmNvbnRhaW5lcj09PXRoaXMuYm9keT8odGhpcy5jc3ModCx7cG9zaXRpb246XCJmaXhlZFwiLHRvcDp0LnN0aWNreS5yZWN0LnRvcCtcInB4XCIsbGVmdDp0LnN0aWNreS5yZWN0LmxlZnQrXCJweFwiLHdpZHRoOnQuc3RpY2t5LnJlY3Qud2lkdGgrXCJweFwifSksdC5zdGlja3kuc3RpY2t5Q2xhc3MmJnQuY2xhc3NMaXN0LmFkZCh0LnN0aWNreS5zdGlja3lDbGFzcykpOnRoaXMuc2Nyb2xsVG9wPnQuc3RpY2t5LnJlY3QudG9wLXQuc3RpY2t5Lm1hcmdpblRvcD8odGhpcy5jc3ModCx7cG9zaXRpb246XCJmaXhlZFwiLHdpZHRoOnQuc3RpY2t5LnJlY3Qud2lkdGgrXCJweFwiLGxlZnQ6dC5zdGlja3kucmVjdC5sZWZ0K1wicHhcIn0pLHRoaXMuc2Nyb2xsVG9wK3Quc3RpY2t5LnJlY3QuaGVpZ2h0K3Quc3RpY2t5Lm1hcmdpblRvcD50LnN0aWNreS5jb250YWluZXIucmVjdC50b3ArdC5zdGlja3kuY29udGFpbmVyLm9mZnNldEhlaWdodC10LnN0aWNreS5tYXJnaW5Cb3R0b20/KHQuc3RpY2t5LnN0aWNreUNsYXNzJiZ0LmNsYXNzTGlzdC5yZW1vdmUodC5zdGlja3kuc3RpY2t5Q2xhc3MpLHRoaXMuY3NzKHQse3RvcDp0LnN0aWNreS5jb250YWluZXIucmVjdC50b3ArdC5zdGlja3kuY29udGFpbmVyLm9mZnNldEhlaWdodC0odGhpcy5zY3JvbGxUb3ArdC5zdGlja3kucmVjdC5oZWlnaHQrdC5zdGlja3kubWFyZ2luQm90dG9tKStcInB4XCJ9KSk6KHQuc3RpY2t5LnN0aWNreUNsYXNzJiZ0LmNsYXNzTGlzdC5hZGQodC5zdGlja3kuc3RpY2t5Q2xhc3MpLHRoaXMuY3NzKHQse3RvcDp0LnN0aWNreS5tYXJnaW5Ub3ArXCJweFwifSkpKToodC5zdGlja3kuc3RpY2t5Q2xhc3MmJnQuY2xhc3NMaXN0LnJlbW92ZSh0LnN0aWNreS5zdGlja3lDbGFzcyksdGhpcy5jc3ModCx7cG9zaXRpb246XCJcIix3aWR0aDpcIlwiLHRvcDpcIlwiLGxlZnQ6XCJcIn0pLHQuc3RpY2t5LndyYXAmJnRoaXMuY3NzKHQucGFyZW50Tm9kZSx7ZGlzcGxheTpcIlwiLHdpZHRoOlwiXCIsaGVpZ2h0OlwiXCJ9KSkpfX0se2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGk9dGhpczt0aGlzLmZvckVhY2godGhpcy5lbGVtZW50cyxmdW5jdGlvbih0KXt0LnN0aWNreS5yZWN0PWkuZ2V0UmVjdGFuZ2xlKHQpLHQuc3RpY2t5LmNvbnRhaW5lci5yZWN0PWkuZ2V0UmVjdGFuZ2xlKHQuc3RpY2t5LmNvbnRhaW5lciksaS5hY3RpdmF0ZSh0KSxpLnNldFBvc2l0aW9uKHQpfSl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGk9dGhpczt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzLnVwZGF0ZVNjcm9sbFRvcFBvc2l0aW9uKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMudXBkYXRlU2Nyb2xsVG9wUG9zaXRpb24pLHRoaXMuZm9yRWFjaCh0aGlzLmVsZW1lbnRzLGZ1bmN0aW9uKHQpe2kuZGVzdHJveVJlc2l6ZUV2ZW50cyh0KSxpLmRlc3Ryb3lTY3JvbGxFdmVudHModCksZGVsZXRlIHQuc3RpY2t5fSl9fSx7a2V5OlwiZ2V0U3RpY2t5Q29udGFpbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBpPXQucGFyZW50Tm9kZTshaS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXN0aWNreS1jb250YWluZXJcIikmJiFpLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcih0LnN0aWNreS5zdGlja3lDb250YWluZXIpJiZpIT09dGhpcy5ib2R5OylpPWkucGFyZW50Tm9kZTtyZXR1cm4gaX19LHtrZXk6XCJnZXRSZWN0YW5nbGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmNzcyh0LHtwb3NpdGlvbjpcIlwiLHdpZHRoOlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwifSk7Zm9yKHZhciBpPU1hdGgubWF4KHQub2Zmc2V0V2lkdGgsdC5jbGllbnRXaWR0aCx0LnNjcm9sbFdpZHRoKSxlPU1hdGgubWF4KHQub2Zmc2V0SGVpZ2h0LHQuY2xpZW50SGVpZ2h0LHQuc2Nyb2xsSGVpZ2h0KSxzPTAsbj0wO3MrPXQub2Zmc2V0VG9wfHwwLG4rPXQub2Zmc2V0TGVmdHx8MCx0PXQub2Zmc2V0UGFyZW50Oyk7cmV0dXJue3RvcDpzLGxlZnQ6bix3aWR0aDppLGhlaWdodDplfX19LHtrZXk6XCJnZXRWaWV3cG9ydFNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybnt3aWR0aDpNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsd2luZG93LmlubmVyV2lkdGh8fDApLGhlaWdodDpNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LHdpbmRvdy5pbm5lckhlaWdodHx8MCl9fX0se2tleTpcInVwZGF0ZVNjcm9sbFRvcFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbFRvcD0od2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5zY3JvbGxUb3ApLShkb2N1bWVudC5jbGllbnRUb3B8fDApfHwwfX0se2tleTpcImZvckVhY2hcIix2YWx1ZTpmdW5jdGlvbih0LGkpe2Zvcih2YXIgZT0wLHM9dC5sZW5ndGg7ZTxzO2UrKylpKHRbZV0pfX0se2tleTpcImNzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsaSl7Zm9yKHZhciBlIGluIGkpaS5oYXNPd25Qcm9wZXJ0eShlKSYmKHQuc3R5bGVbZV09aVtlXSl9fV0pLGV9KCk7IWZ1bmN0aW9uKHQsaSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9aTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGl9KTp0LlN0aWNreT1pfSh0aGlzLFN0aWNreSk7IiwiLyohXG4gKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYzLjUuMVxuICogaHR0cHM6Ly9qcXVlcnkuY29tL1xuICpcbiAqIEluY2x1ZGVzIFNpenpsZS5qc1xuICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwczovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMjAtMDUtMDRUMjI6NDlaXG4gKi9cbiggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSApKCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIEVkZ2UgPD0gMTIgLSAxMyssIEZpcmVmb3ggPD0xOCAtIDQ1KywgSUUgMTAgLSAxMSwgU2FmYXJpIDUuMSAtIDkrLCBpT1MgNiAtIDkuMVxuLy8gdGhyb3cgZXhjZXB0aW9ucyB3aGVuIG5vbi1zdHJpY3QgY29kZSAoZS5nLiwgQVNQLk5FVCA0LjUpIGFjY2Vzc2VzIHN0cmljdCBtb2RlXG4vLyBhcmd1bWVudHMuY2FsbGVlLmNhbGxlciAodHJhYy0xMzMzNSkuIEJ1dCBhcyBvZiBqUXVlcnkgMy4wICgyMDE2KSwgc3RyaWN0IG1vZGUgc2hvdWxkIGJlIGNvbW1vblxuLy8gZW5vdWdoIHRoYXQgYWxsIHN1Y2ggYXR0ZW1wdHMgYXJlIGd1YXJkZWQgaW4gYSB0cnkgYmxvY2suXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGFyciA9IFtdO1xuXG52YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxudmFyIGZsYXQgPSBhcnIuZmxhdCA/IGZ1bmN0aW9uKCBhcnJheSApIHtcblx0cmV0dXJuIGFyci5mbGF0LmNhbGwoIGFycmF5ICk7XG59IDogZnVuY3Rpb24oIGFycmF5ICkge1xuXHRyZXR1cm4gYXJyLmNvbmNhdC5hcHBseSggW10sIGFycmF5ICk7XG59O1xuXG5cbnZhciBwdXNoID0gYXJyLnB1c2g7XG5cbnZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cbnZhciBjbGFzczJ0eXBlID0ge307XG5cbnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cbnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgZm5Ub1N0cmluZyA9IGhhc093bi50b1N0cmluZztcblxudmFyIE9iamVjdEZ1bmN0aW9uU3RyaW5nID0gZm5Ub1N0cmluZy5jYWxsKCBPYmplY3QgKTtcblxudmFyIHN1cHBvcnQgPSB7fTtcblxudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IENocm9tZSA8PTU3LCBGaXJlZm94IDw9NTJcbiAgICAgIC8vIEluIHNvbWUgYnJvd3NlcnMsIHR5cGVvZiByZXR1cm5zIFwiZnVuY3Rpb25cIiBmb3IgSFRNTCA8b2JqZWN0PiBlbGVtZW50c1xuICAgICAgLy8gKGkuZS4sIGB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvYmplY3RcIiApID09PSBcImZ1bmN0aW9uXCJgKS5cbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gY2xhc3NpZnkgKmFueSogRE9NIG5vZGUgYXMgYSBmdW5jdGlvbi5cbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIG9iai5ub2RlVHlwZSAhPT0gXCJudW1iZXJcIjtcbiAgfTtcblxuXG52YXIgaXNXaW5kb3cgPSBmdW5jdGlvbiBpc1dpbmRvdyggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH07XG5cblxudmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xuXG5cblxuXHR2YXIgcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyA9IHtcblx0XHR0eXBlOiB0cnVlLFxuXHRcdHNyYzogdHJ1ZSxcblx0XHRub25jZTogdHJ1ZSxcblx0XHRub01vZHVsZTogdHJ1ZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIERPTUV2YWwoIGNvZGUsIG5vZGUsIGRvYyApIHtcblx0XHRkb2MgPSBkb2MgfHwgZG9jdW1lbnQ7XG5cblx0XHR2YXIgaSwgdmFsLFxuXHRcdFx0c2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwic2NyaXB0XCIgKTtcblxuXHRcdHNjcmlwdC50ZXh0ID0gY29kZTtcblx0XHRpZiAoIG5vZGUgKSB7XG5cdFx0XHRmb3IgKCBpIGluIHByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXMgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA2NCssIEVkZ2UgMTgrXG5cdFx0XHRcdC8vIFNvbWUgYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCB0aGUgXCJub25jZVwiIHByb3BlcnR5IG9uIHNjcmlwdHMuXG5cdFx0XHRcdC8vIE9uIHRoZSBvdGhlciBoYW5kLCBqdXN0IHVzaW5nIGBnZXRBdHRyaWJ1dGVgIGlzIG5vdCBlbm91Z2ggYXNcblx0XHRcdFx0Ly8gdGhlIGBub25jZWAgYXR0cmlidXRlIGlzIHJlc2V0IHRvIGFuIGVtcHR5IHN0cmluZyB3aGVuZXZlciBpdFxuXHRcdFx0XHQvLyBiZWNvbWVzIGJyb3dzaW5nLWNvbnRleHQgY29ubmVjdGVkLlxuXHRcdFx0XHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9odG1sL2lzc3Vlcy8yMzY5XG5cdFx0XHRcdC8vIFNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNub25jZS1hdHRyaWJ1dGVzXG5cdFx0XHRcdC8vIFRoZSBgbm9kZS5nZXRBdHRyaWJ1dGVgIGNoZWNrIHdhcyBhZGRlZCBmb3IgdGhlIHNha2Ugb2Zcblx0XHRcdFx0Ly8gYGpRdWVyeS5nbG9iYWxFdmFsYCBzbyB0aGF0IGl0IGNhbiBmYWtlIGEgbm9uY2UtY29udGFpbmluZyBub2RlXG5cdFx0XHRcdC8vIHZpYSBhbiBvYmplY3QuXG5cdFx0XHRcdHZhbCA9IG5vZGVbIGkgXSB8fCBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSggaSApO1xuXHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKCBpLCB2YWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRkb2MuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0ICkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG5cdH1cblxuXG5mdW5jdGlvbiB0b1R5cGUoIG9iaiApIHtcblx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRyZXR1cm4gb2JqICsgXCJcIjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seSAoZnVuY3Rpb25pc2ggUmVnRXhwKVxuXHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdGNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwoIG9iaiApIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0dHlwZW9mIG9iajtcbn1cbi8qIGdsb2JhbCBTeW1ib2wgKi9cbi8vIERlZmluaW5nIHRoaXMgZ2xvYmFsIGluIC5lc2xpbnRyYy5qc29uIHdvdWxkIGNyZWF0ZSBhIGRhbmdlciBvZiB1c2luZyB0aGUgZ2xvYmFsXG4vLyB1bmd1YXJkZWQgaW4gYW5vdGhlciBwbGFjZSwgaXQgc2VlbXMgc2FmZXIgdG8gZGVmaW5lIGdsb2JhbCBvbmx5IGZvciB0aGlzIG1vZHVsZVxuXG5cblxudmFyXG5cdHZlcnNpb24gPSBcIjMuNS4xXCIsXG5cblx0Ly8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnlcblx0alF1ZXJ5ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXG5cdFx0Ly8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnXG5cdFx0Ly8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZClcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5mbi5pbml0KCBzZWxlY3RvciwgY29udGV4dCApO1xuXHR9O1xuXG5qUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXG5cdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdGlmICggbnVtID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRyZXR1cm4gbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXTtcblx0fSxcblxuXHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuXHRwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuXHRcdC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5cdFx0dmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG5cdFx0Ly8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcblx0XHRyZXQucHJldk9iamVjdCA9IHRoaXM7XG5cblx0XHQvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRldmVuOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5ncmVwKCB0aGlzLCBmdW5jdGlvbiggX2VsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gKCBpICsgMSApICUgMjtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRvZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5LmdyZXAoIHRoaXMsIGZ1bmN0aW9uKCBfZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiBpICUgMjtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7XG5cdH0sXG5cblx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhaXNGdW5jdGlvbiggdGFyZ2V0ICkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblxuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoICggb3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdICkgIT0gbnVsbCApIHtcblxuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgT2JqZWN0LnByb3RvdHlwZSBwb2xsdXRpb25cblx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRpZiAoIG5hbWUgPT09IFwiX19wcm90b19fXCIgfHwgdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fFxuXHRcdFx0XHRcdCggY29weUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KCBjb3B5ICkgKSApICkge1xuXHRcdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHByb3BlciB0eXBlIGZvciB0aGUgc291cmNlIHZhbHVlXG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSAmJiAhQXJyYXkuaXNBcnJheSggc3JjICkgKSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IFtdO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoICFjb3B5SXNBcnJheSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApICkge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSB7fTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cblx0XHRcdFx0XHQvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBjb3B5O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3Rcblx0cmV0dXJuIHRhcmdldDtcbn07XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2Vcblx0ZXhwYW5kbzogXCJqUXVlcnlcIiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXFxEL2csIFwiXCIgKSxcblxuXHQvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZVxuXHRpc1JlYWR5OiB0cnVlLFxuXG5cdGVycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXHRcdHRocm93IG5ldyBFcnJvciggbXNnICk7XG5cdH0sXG5cblx0bm9vcDogZnVuY3Rpb24oKSB7fSxcblxuXHRpc1BsYWluT2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHZhciBwcm90bywgQ3RvcjtcblxuXHRcdC8vIERldGVjdCBvYnZpb3VzIG5lZ2F0aXZlc1xuXHRcdC8vIFVzZSB0b1N0cmluZyBpbnN0ZWFkIG9mIGpRdWVyeS50eXBlIHRvIGNhdGNoIGhvc3Qgb2JqZWN0c1xuXHRcdGlmICggIW9iaiB8fCB0b1N0cmluZy5jYWxsKCBvYmogKSAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRwcm90byA9IGdldFByb3RvKCBvYmogKTtcblxuXHRcdC8vIE9iamVjdHMgd2l0aCBubyBwcm90b3R5cGUgKGUuZy4sIGBPYmplY3QuY3JlYXRlKCBudWxsIClgKSBhcmUgcGxhaW5cblx0XHRpZiAoICFwcm90byApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIE9iamVjdHMgd2l0aCBwcm90b3R5cGUgYXJlIHBsYWluIGlmZiB0aGV5IHdlcmUgY29uc3RydWN0ZWQgYnkgYSBnbG9iYWwgT2JqZWN0IGZ1bmN0aW9uXG5cdFx0Q3RvciA9IGhhc093bi5jYWxsKCBwcm90bywgXCJjb25zdHJ1Y3RvclwiICkgJiYgcHJvdG8uY29uc3RydWN0b3I7XG5cdFx0cmV0dXJuIHR5cGVvZiBDdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgZm5Ub1N0cmluZy5jYWxsKCBDdG9yICkgPT09IE9iamVjdEZ1bmN0aW9uU3RyaW5nO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0Ly8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgcHJvdmlkZWQgY29udGV4dDsgZmFsbHMgYmFjayB0byB0aGUgZ2xvYmFsIG9uZVxuXHQvLyBpZiBub3Qgc3BlY2lmaWVkLlxuXHRnbG9iYWxFdmFsOiBmdW5jdGlvbiggY29kZSwgb3B0aW9ucywgZG9jICkge1xuXHRcdERPTUV2YWwoIGNvZGUsIHsgbm9uY2U6IG9wdGlvbnMgJiYgb3B0aW9ucy5ub25jZSB9LCBkb2MgKTtcblx0fSxcblxuXHRlYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHtcblx0XHR2YXIgbGVuZ3RoLCBpID0gMDtcblxuXHRcdGlmICggaXNBcnJheUxpa2UoIG9iaiApICkge1xuXHRcdFx0bGVuZ3RoID0gb2JqLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkge1xuXHRcdHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xuXG5cdFx0aWYgKCBhcnIgIT0gbnVsbCApIHtcblx0XHRcdGlmICggaXNBcnJheUxpa2UoIE9iamVjdCggYXJyICkgKSApIHtcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0WyBhcnIgXSA6IGFyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5jYWxsKCByZXQsIGFyciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcblx0XHRcdGogPSAwLFxuXHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0fVxuXG5cdFx0Zmlyc3QubGVuZ3RoID0gaTtcblxuXHRcdHJldHVybiBmaXJzdDtcblx0fSxcblxuXHRncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7XG5cdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdG1hdGNoZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0Y2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0O1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdGlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHtcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBlbGVtc1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH0sXG5cblx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciBsZW5ndGgsIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggZWxlbXMgKSApIHtcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsXG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gZWxlbXMgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRyZXR1cm4gZmxhdCggcmV0ICk7XG5cdH0sXG5cblx0Ly8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG5cdGd1aWQ6IDEsXG5cblx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG5cdHN1cHBvcnQ6IHN1cHBvcnRcbn0gKTtcblxuaWYgKCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdGpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBhcnJbIFN5bWJvbC5pdGVyYXRvciBdO1xufVxuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKCBcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoIFwiIFwiICksXG5mdW5jdGlvbiggX2ksIG5hbWUgKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSApO1xuXG5mdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkge1xuXG5cdC8vIFN1cHBvcnQ6IHJlYWwgaU9TIDguMiBvbmx5IChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcilcblx0Ly8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KVxuXHQvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXNcblx0Ly8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRVxuXHR2YXIgbGVuZ3RoID0gISFvYmogJiYgXCJsZW5ndGhcIiBpbiBvYmogJiYgb2JqLmxlbmd0aCxcblx0XHR0eXBlID0gdG9UeXBlKCBvYmogKTtcblxuXHRpZiAoIGlzRnVuY3Rpb24oIG9iaiApIHx8IGlzV2luZG93KCBvYmogKSApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRyZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IGxlbmd0aCA9PT0gMCB8fFxuXHRcdHR5cGVvZiBsZW5ndGggPT09IFwibnVtYmVyXCIgJiYgbGVuZ3RoID4gMCAmJiAoIGxlbmd0aCAtIDEgKSBpbiBvYmo7XG59XG52YXIgU2l6emxlID1cbi8qIVxuICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjIuMy41XG4gKiBodHRwczovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHBzOi8vanMuZm91bmRhdGlvbi9cbiAqXG4gKiBEYXRlOiAyMDIwLTAzLTE0XG4gKi9cbiggZnVuY3Rpb24oIHdpbmRvdyApIHtcbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdG5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRzb3J0T3JkZXIgPSBmdW5jdGlvbiggYSwgYiApIHtcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gMDtcblx0fSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICgge30gKS5oYXNPd25Qcm9wZXJ0eSxcblx0YXJyID0gW10sXG5cdHBvcCA9IGFyci5wb3AsXG5cdHB1c2hOYXRpdmUgPSBhcnIucHVzaCxcblx0cHVzaCA9IGFyci5wdXNoLFxuXHRzbGljZSA9IGFyci5zbGljZSxcblxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cHM6Ly9qc3BlcmYuY29tL3Rob3ItaW5kZXhvZi12cy1mb3IvNVxuXHRpbmRleE9mID0gZnVuY3Rpb24oIGxpc3QsIGVsZW0gKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bGVuID0gbGlzdC5sZW5ndGg7XG5cdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRpZiAoIGxpc3RbIGkgXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufFwiICtcblx0XHRcImlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI3doaXRlc3BhY2Vcblx0d2hpdGVzcGFjZSA9IFwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixcblxuXHQvLyBodHRwczovL3d3dy53My5vcmcvVFIvY3NzLXN5bnRheC0zLyNpZGVudC10b2tlbi1kaWFncmFtXG5cdGlkZW50aWZpZXIgPSBcIig/OlxcXFxcXFxcW1xcXFxkYS1mQS1GXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcIj98XFxcXFxcXFxbXlxcXFxyXFxcXG5cXFxcZl18W1xcXFx3LV18W15cXDAtXFxcXHg3Zl0pK1wiLFxuXG5cdC8vIEF0dHJpYnV0ZSBzZWxlY3RvcnM6IGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHRhdHRyaWJ1dGVzID0gXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcIiArIHdoaXRlc3BhY2UgK1xuXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXG5cdFx0Ly8gXCJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdXG5cdFx0Ly8gb3Igc3RyaW5ncyBbY2FwdHVyZSAzIG9yIGNhcHR1cmUgNF1cIlxuXHRcdFwiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIgKyBpZGVudGlmaWVyICsgXCIpKXwpXCIgK1xuXHRcdHdoaXRlc3BhY2UgKyBcIipcXFxcXVwiLFxuXG5cdHBzZXVkb3MgPSBcIjooXCIgKyBpZGVudGlmaWVyICsgXCIpKD86XFxcXCgoXCIgK1xuXG5cdFx0Ly8gVG8gcmVkdWNlIHRoZSBudW1iZXIgb2Ygc2VsZWN0b3JzIG5lZWRpbmcgdG9rZW5pemUgaW4gdGhlIHByZUZpbHRlciwgcHJlZmVyIGFyZ3VtZW50czpcblx0XHQvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSlcblx0XHRcIignKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfFwiICtcblxuXHRcdC8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KVxuXHRcdFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiICsgYXR0cmlidXRlcyArIFwiKSopfFwiICtcblxuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArXG5cdFx0d2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuXHRyY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0cmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XCIqXCIgKSxcblx0cmRlc2NlbmQgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCJ8PlwiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIkNMQVNTXCI6IG5ldyBSZWdFeHAoIFwiXlxcXFwuKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJUQUdcIjogbmV3IFJlZ0V4cCggXCJeKFwiICsgaWRlbnRpZmllciArIFwifFsqXSlcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArXG5cdFx0XHR3aGl0ZXNwYWNlICsgXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXG5cdFx0Ly8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpXG5cdFx0Ly8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YFxuXHRcdFwibmVlZHNDb250ZXh0XCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmh0bWwgPSAvSFRNTCQvaSxcblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblxuXHQvLyBDU1MgZXNjYXBlc1xuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFxbXFxcXGRhLWZBLUZdezEsNn1cIiArIHdoaXRlc3BhY2UgKyBcIj98XFxcXFxcXFwoW15cXFxcclxcXFxuXFxcXGZdKVwiLCBcImdcIiApLFxuXHRmdW5lc2NhcGUgPSBmdW5jdGlvbiggZXNjYXBlLCBub25IZXggKSB7XG5cdFx0dmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGUuc2xpY2UoIDEgKSAtIDB4MTAwMDA7XG5cblx0XHRyZXR1cm4gbm9uSGV4ID9cblxuXHRcdFx0Ly8gU3RyaXAgdGhlIGJhY2tzbGFzaCBwcmVmaXggZnJvbSBhIG5vbi1oZXggZXNjYXBlIHNlcXVlbmNlXG5cdFx0XHRub25IZXggOlxuXG5cdFx0XHQvLyBSZXBsYWNlIGEgaGV4YWRlY2ltYWwgZXNjYXBlIHNlcXVlbmNlIHdpdGggdGhlIGVuY29kZWQgVW5pY29kZSBjb2RlIHBvaW50XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTExK1xuXHRcdFx0Ly8gRm9yIHZhbHVlcyBvdXRzaWRlIHRoZSBCYXNpYyBNdWx0aWxpbmd1YWwgUGxhbmUgKEJNUCksIG1hbnVhbGx5IGNvbnN0cnVjdCBhXG5cdFx0XHQvLyBzdXJyb2dhdGUgcGFpclxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDpcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gQ1NTIHN0cmluZy9pZGVudGlmaWVyIHNlcmlhbGl6YXRpb25cblx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNjb21tb24tc2VyaWFsaXppbmctaWRpb21zXG5cdHJjc3Nlc2NhcGUgPSAvKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZyxcblx0ZmNzc2VzY2FwZSA9IGZ1bmN0aW9uKCBjaCwgYXNDb2RlUG9pbnQgKSB7XG5cdFx0aWYgKCBhc0NvZGVQb2ludCApIHtcblxuXHRcdFx0Ly8gVSswMDAwIE5VTEwgYmVjb21lcyBVK0ZGRkQgUkVQTEFDRU1FTlQgQ0hBUkFDVEVSXG5cdFx0XHRpZiAoIGNoID09PSBcIlxcMFwiICkge1xuXHRcdFx0XHRyZXR1cm4gXCJcXHVGRkZEXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRyb2wgY2hhcmFjdGVycyBhbmQgKGRlcGVuZGVudCB1cG9uIHBvc2l0aW9uKSBudW1iZXJzIGdldCBlc2NhcGVkIGFzIGNvZGUgcG9pbnRzXG5cdFx0XHRyZXR1cm4gY2guc2xpY2UoIDAsIC0xICkgKyBcIlxcXFxcIiArXG5cdFx0XHRcdGNoLmNoYXJDb2RlQXQoIGNoLmxlbmd0aCAtIDEgKS50b1N0cmluZyggMTYgKSArIFwiIFwiO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyIHBvdGVudGlhbGx5LXNwZWNpYWwgQVNDSUkgY2hhcmFjdGVycyBnZXQgYmFja3NsYXNoLWVzY2FwZWRcblx0XHRyZXR1cm4gXCJcXFxcXCIgKyBjaDtcblx0fSxcblxuXHQvLyBVc2VkIGZvciBpZnJhbWVzXG5cdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdC8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhIFwiUGVybWlzc2lvbiBEZW5pZWRcIlxuXHQvLyBlcnJvciBpbiBJRVxuXHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2V0RG9jdW1lbnQoKTtcblx0fSxcblxuXHRpbkRpc2FibGVkRmllbGRzZXQgPSBhZGRDb21iaW5hdG9yKFxuXHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImZpZWxkc2V0XCI7XG5cdFx0fSxcblx0XHR7IGRpcjogXCJwYXJlbnROb2RlXCIsIG5leHQ6IFwibGVnZW5kXCIgfVxuXHQpO1xuXG4vLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKVxudHJ5IHtcblx0cHVzaC5hcHBseShcblx0XHQoIGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkgKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuXHRhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlO1xufSBjYXRjaCAoIGUgKSB7XG5cdHB1c2ggPSB7IGFwcGx5OiBhcnIubGVuZ3RoID9cblxuXHRcdC8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlXG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0cHVzaE5hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKCBlbHMgKSApO1xuXHRcdH0gOlxuXG5cdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdC8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHlcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHR2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG5cdFx0XHRcdGkgPSAwO1xuXG5cdFx0XHQvLyBDYW4ndCB0cnVzdCBOb2RlTGlzdC5sZW5ndGhcblx0XHRcdHdoaWxlICggKCB0YXJnZXRbIGorKyBdID0gZWxzWyBpKysgXSApICkge31cblx0XHRcdHRhcmdldC5sZW5ndGggPSBqIC0gMTtcblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBtLCBpLCBlbGVtLCBuaWQsIG1hdGNoLCBncm91cHMsIG5ld1NlbGVjdG9yLFxuXHRcdG5ld0NvbnRleHQgPSBjb250ZXh0ICYmIGNvbnRleHQub3duZXJEb2N1bWVudCxcblxuXHRcdC8vIG5vZGVUeXBlIGRlZmF1bHRzIHRvIDksIHNpbmNlIGNvbnRleHQgZGVmYXVsdHMgdG8gZG9jdW1lbnRcblx0XHRub2RlVHlwZSA9IGNvbnRleHQgPyBjb250ZXh0Lm5vZGVUeXBlIDogOTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dFxuXHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiB8fCAhc2VsZWN0b3IgfHxcblx0XHRub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSAmJiBub2RlVHlwZSAhPT0gMTEgKSB7XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXG5cdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgKGFzIG9wcG9zZWQgdG8gZmlsdGVycykgaW4gSFRNTCBkb2N1bWVudHNcblx0aWYgKCAhc2VlZCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhIFwiZ2V0KkJ5KlwiIERPTSBtZXRob2Rcblx0XHRcdC8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdClcblx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmICggbWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkgKSApIHtcblxuXHRcdFx0XHQvLyBJRCBzZWxlY3RvclxuXHRcdFx0XHRpZiAoICggbSA9IG1hdGNoWyAxIF0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvY3VtZW50IGNvbnRleHRcblx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkgKSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdFxuXHRcdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRcdGlmICggZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBFbGVtZW50IGNvbnRleHRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdFxuXHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdGlmICggbmV3Q29udGV4dCAmJiAoIGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkgKSAmJlxuXHRcdFx0XHRcdFx0XHRjb250YWlucyggY29udGV4dCwgZWxlbSApICYmXG5cdFx0XHRcdFx0XHRcdGVsZW0uaWQgPT09IG0gKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUeXBlIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWyAyIF0gKSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHRcdC8vIENsYXNzIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoICggbSA9IG1hdGNoWyAzIF0gKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiZcblx0XHRcdFx0XHRjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRha2UgYWR2YW50YWdlIG9mIHF1ZXJ5U2VsZWN0b3JBbGxcblx0XHRcdGlmICggc3VwcG9ydC5xc2EgJiZcblx0XHRcdFx0IW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXSAmJlxuXHRcdFx0XHQoICFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApICkgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA4IG9ubHlcblx0XHRcdFx0Ly8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHNcblx0XHRcdFx0KCBub2RlVHlwZSAhPT0gMSB8fCBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSApIHtcblxuXHRcdFx0XHRuZXdTZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblxuXHRcdFx0XHQvLyBxU0EgY29uc2lkZXJzIGVsZW1lbnRzIG91dHNpZGUgYSBzY29waW5nIHJvb3Qgd2hlbiBldmFsdWF0aW5nIGNoaWxkIG9yXG5cdFx0XHRcdC8vIGRlc2NlbmRhbnQgY29tYmluYXRvcnMsIHdoaWNoIGlzIG5vdCB3aGF0IHdlIHdhbnQuXG5cdFx0XHRcdC8vIEluIHN1Y2ggY2FzZXMsIHdlIHdvcmsgYXJvdW5kIHRoZSBiZWhhdmlvciBieSBwcmVmaXhpbmcgZXZlcnkgc2VsZWN0b3IgaW4gdGhlXG5cdFx0XHRcdC8vIGxpc3Qgd2l0aCBhbiBJRCBzZWxlY3RvciByZWZlcmVuY2luZyB0aGUgc2NvcGUgY29udGV4dC5cblx0XHRcdFx0Ly8gVGhlIHRlY2huaXF1ZSBoYXMgdG8gYmUgdXNlZCBhcyB3ZWxsIHdoZW4gYSBsZWFkaW5nIGNvbWJpbmF0b3IgaXMgdXNlZFxuXHRcdFx0XHQvLyBhcyBzdWNoIHNlbGVjdG9ycyBhcmUgbm90IHJlY29nbml6ZWQgYnkgcXVlcnlTZWxlY3RvckFsbC5cblx0XHRcdFx0Ly8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgdGVjaG5pcXVlLlxuXHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0KCByZGVzY2VuZC50ZXN0KCBzZWxlY3RvciApIHx8IHJjb21iaW5hdG9ycy50ZXN0KCBzZWxlY3RvciApICkgKSB7XG5cblx0XHRcdFx0XHQvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnNcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHxcblx0XHRcdFx0XHRcdGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBXZSBjYW4gdXNlIDpzY29wZSBpbnN0ZWFkIG9mIHRoZSBJRCBoYWNrIGlmIHRoZSBicm93c2VyXG5cdFx0XHRcdFx0Ly8gc3VwcG9ydHMgaXQgJiBpZiB3ZSdyZSBub3QgY2hhbmdpbmcgdGhlIGNvbnRleHQuXG5cdFx0XHRcdFx0aWYgKCBuZXdDb250ZXh0ICE9PSBjb250ZXh0IHx8ICFzdXBwb3J0LnNjb3BlICkge1xuXG5cdFx0XHRcdFx0XHQvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFx0aWYgKCAoIG5pZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKCBcImlkXCIgKSApICkge1xuXHRcdFx0XHRcdFx0XHRuaWQgPSBuaWQucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgKCBuaWQgPSBleHBhbmRvICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmVmaXggZXZlcnkgc2VsZWN0b3IgaW4gdGhlIGxpc3Rcblx0XHRcdFx0XHRncm91cHMgPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblx0XHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGdyb3Vwc1sgaSBdID0gKCBuaWQgPyBcIiNcIiArIG5pZCA6IFwiOnNjb3BlXCIgKSArIFwiIFwiICtcblx0XHRcdFx0XHRcdFx0dG9TZWxlY3RvciggZ3JvdXBzWyBpIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bmV3U2VsZWN0b3IgPSBncm91cHMuam9pbiggXCIsXCIgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cyxcblx0XHRcdFx0XHRcdG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbCggbmV3U2VsZWN0b3IgKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH0gY2F0Y2ggKCBxc2FFcnJvciApIHtcblx0XHRcdFx0XHRub25uYXRpdmVTZWxlY3RvckNhY2hlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoIFwiaWRcIiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFsbCBvdGhlcnNcblx0cmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nLCBvYmplY3QpfSBSZXR1cm5zIHRoZSBPYmplY3QgZGF0YSBhZnRlciBzdG9yaW5nIGl0IG9uIGl0c2VsZiB3aXRoXG4gKlx0cHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aClcbiAqXHRkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkge1xuXHR2YXIga2V5cyA9IFtdO1xuXG5cdGZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkge1xuXG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuICggY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSApO1xuXHR9XG5cdHJldHVybiBjYWNoZTtcbn1cblxuLyoqXG4gKiBNYXJrIGEgZnVuY3Rpb24gZm9yIHNwZWNpYWwgdXNlIGJ5IFNpenpsZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmtcbiAqL1xuZnVuY3Rpb24gbWFya0Z1bmN0aW9uKCBmbiApIHtcblx0Zm5bIGV4cGFuZG8gXSA9IHRydWU7XG5cdHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBTdXBwb3J0IHRlc3RpbmcgdXNpbmcgYW4gZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gUGFzc2VkIHRoZSBjcmVhdGVkIGVsZW1lbnQgYW5kIHJldHVybnMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImZpZWxkc2V0XCIgKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBlbCApO1xuXHR9IGNhdGNoICggZSApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0gZmluYWxseSB7XG5cblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGVsLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbCApO1xuXHRcdH1cblxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZWwgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdCggXCJ8XCIgKSxcblx0XHRpID0gYXJyLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRFeHByLmF0dHJIYW5kbGVbIGFyclsgaSBdIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdGEuc291cmNlSW5kZXggLSBiLnNvdXJjZUluZGV4O1xuXG5cdC8vIFVzZSBJRSBzb3VyY2VJbmRleCBpZiBhdmFpbGFibGUgb24gYm90aCBub2Rlc1xuXHRpZiAoIGRpZmYgKSB7XG5cdFx0cmV0dXJuIGRpZmY7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBiIGZvbGxvd3MgYVxuXHRpZiAoIGN1ciApIHtcblx0XHR3aGlsZSAoICggY3VyID0gY3VyLm5leHRTaWJsaW5nICkgKSB7XG5cdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gKCBuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIiApICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIDplbmFibGVkLzpkaXNhYmxlZFxuICogQHBhcmFtIHtCb29sZWFufSBkaXNhYmxlZCB0cnVlIGZvciA6ZGlzYWJsZWQ7IGZhbHNlIGZvciA6ZW5hYmxlZFxuICovXG5mdW5jdGlvbiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZGlzYWJsZWQgKSB7XG5cblx0Ly8gS25vd24gOmRpc2FibGVkIGZhbHNlIHBvc2l0aXZlczogZmllbGRzZXRbZGlzYWJsZWRdID4gbGVnZW5kOm50aC1vZi10eXBlKG4rMikgOmNhbi1kaXNhYmxlXG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE9ubHkgY2VydGFpbiBlbGVtZW50cyBjYW4gbWF0Y2ggOmVuYWJsZWQgb3IgOmRpc2FibGVkXG5cdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2NyaXB0aW5nLmh0bWwjc2VsZWN0b3ItZW5hYmxlZFxuXHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NjcmlwdGluZy5odG1sI3NlbGVjdG9yLWRpc2FibGVkXG5cdFx0aWYgKCBcImZvcm1cIiBpbiBlbGVtICkge1xuXG5cdFx0XHQvLyBDaGVjayBmb3IgaW5oZXJpdGVkIGRpc2FibGVkbmVzcyBvbiByZWxldmFudCBub24tZGlzYWJsZWQgZWxlbWVudHM6XG5cdFx0XHQvLyAqIGxpc3RlZCBmb3JtLWFzc29jaWF0ZWQgZWxlbWVudHMgaW4gYSBkaXNhYmxlZCBmaWVsZHNldFxuXHRcdFx0Ly8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NhdGVnb3J5LWxpc3RlZFxuXHRcdFx0Ly8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NvbmNlcHQtZmUtZGlzYWJsZWRcblx0XHRcdC8vICogb3B0aW9uIGVsZW1lbnRzIGluIGEgZGlzYWJsZWQgb3B0Z3JvdXBcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjb25jZXB0LW9wdGlvbi1kaXNhYmxlZFxuXHRcdFx0Ly8gQWxsIHN1Y2ggZWxlbWVudHMgaGF2ZSBhIFwiZm9ybVwiIHByb3BlcnR5LlxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgJiYgZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0Ly8gT3B0aW9uIGVsZW1lbnRzIGRlZmVyIHRvIGEgcGFyZW50IG9wdGdyb3VwIGlmIHByZXNlbnRcblx0XHRcdFx0aWYgKCBcImxhYmVsXCIgaW4gZWxlbSApIHtcblx0XHRcdFx0XHRpZiAoIFwibGFiZWxcIiBpbiBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5wYXJlbnROb2RlLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDYgLSAxMVxuXHRcdFx0XHQvLyBVc2UgdGhlIGlzRGlzYWJsZWQgc2hvcnRjdXQgcHJvcGVydHkgdG8gY2hlY2sgZm9yIGRpc2FibGVkIGZpZWxkc2V0IGFuY2VzdG9yc1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5pc0Rpc2FibGVkID09PSBkaXNhYmxlZCB8fFxuXG5cdFx0XHRcdFx0Ly8gV2hlcmUgdGhlcmUgaXMgbm8gaXNEaXNhYmxlZCwgY2hlY2sgbWFudWFsbHlcblx0XHRcdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdFx0XHRlbGVtLmlzRGlzYWJsZWQgIT09ICFkaXNhYmxlZCAmJlxuXHRcdFx0XHRcdGluRGlzYWJsZWRGaWVsZHNldCggZWxlbSApID09PSBkaXNhYmxlZDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXG5cdFx0Ly8gVHJ5IHRvIHdpbm5vdyBvdXQgZWxlbWVudHMgdGhhdCBjYW4ndCBiZSBkaXNhYmxlZCBiZWZvcmUgdHJ1c3RpbmcgdGhlIGRpc2FibGVkIHByb3BlcnR5LlxuXHRcdC8vIFNvbWUgdmljdGltcyBnZXQgY2F1Z2h0IGluIG91ciBuZXQgKGxhYmVsLCBsZWdlbmQsIG1lbnUsIHRyYWNrKSwgYnV0IGl0IHNob3VsZG4ndFxuXHRcdC8vIGV2ZW4gZXhpc3Qgb24gdGhlbSwgbGV0IGFsb25lIGhhdmUgYSBib29sZWFuIHZhbHVlLlxuXHRcdH0gZWxzZSBpZiAoIFwibGFiZWxcIiBpbiBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdH1cblxuXHRcdC8vIFJlbWFpbmluZyBlbGVtZW50cyBhcmUgbmVpdGhlciA6ZW5hYmxlZCBub3IgOmRpc2FibGVkXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG5cdFx0XHR2YXIgaixcblx0XHRcdFx0bWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSxcblx0XHRcdFx0aSA9IG1hdGNoSW5kZXhlcy5sZW5ndGg7XG5cblx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlc1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggc2VlZFsgKCBqID0gbWF0Y2hJbmRleGVzWyBpIF0gKSBdICkge1xuXHRcdFx0XHRcdHNlZWRbIGogXSA9ICEoIG1hdGNoZXNbIGogXSA9IHNlZWRbIGogXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9ICk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHR2YXIgbmFtZXNwYWNlID0gZWxlbS5uYW1lc3BhY2VVUkksXG5cdFx0ZG9jRWxlbSA9ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD04XG5cdC8vIEFzc3VtZSBIVE1MIHdoZW4gZG9jdW1lbnRFbGVtZW50IGRvZXNuJ3QgeWV0IGV4aXN0LCBzdWNoIGFzIGluc2lkZSBsb2FkaW5nIGlmcmFtZXNcblx0Ly8gaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzQ4MzNcblx0cmV0dXJuICFyaHRtbC50ZXN0KCBuYW1lc3BhY2UgfHwgZG9jRWxlbSAmJiBkb2NFbGVtLm5vZGVOYW1lIHx8IFwiSFRNTFwiICk7XG59O1xuXG4vKipcbiAqIFNldHMgZG9jdW1lbnQtcmVsYXRlZCB2YXJpYWJsZXMgb25jZSBiYXNlZCBvbiB0aGUgY3VycmVudCBkb2N1bWVudFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqL1xuc2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHtcblx0dmFyIGhhc0NvbXBhcmUsIHN1YldpbmRvdyxcblx0XHRkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2M7XG5cblx0Ly8gUmV0dXJuIGVhcmx5IGlmIGRvYyBpcyBpbnZhbGlkIG9yIGFscmVhZHkgc2VsZWN0ZWRcblx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHQvLyB0d28gZG9jdW1lbnRzOyBzaGFsbG93IGNvbXBhcmlzb25zIHdvcmsuXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0aWYgKCBkb2MgPT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkge1xuXHRcdHJldHVybiBkb2N1bWVudDtcblx0fVxuXG5cdC8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzXG5cdGRvY3VtZW50ID0gZG9jO1xuXHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTtcblxuXHQvLyBTdXBwb3J0OiBJRSA5IC0gMTErLCBFZGdlIDEyIC0gMTgrXG5cdC8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9ycyAoalF1ZXJ5ICMxMzkzNilcblx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHQvLyB0d28gZG9jdW1lbnRzOyBzaGFsbG93IGNvbXBhcmlzb25zIHdvcmsuXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0aWYgKCBwcmVmZXJyZWREb2MgIT0gZG9jdW1lbnQgJiZcblx0XHQoIHN1YldpbmRvdyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3ICkgJiYgc3ViV2luZG93LnRvcCAhPT0gc3ViV2luZG93ICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgMTEsIEVkZ2Vcblx0XHRpZiAoIHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwidW5sb2FkXCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IC0gMTAgb25seVxuXHRcdH0gZWxzZSBpZiAoIHN1YldpbmRvdy5hdHRhY2hFdmVudCApIHtcblx0XHRcdHN1YldpbmRvdy5hdHRhY2hFdmVudCggXCJvbnVubG9hZFwiLCB1bmxvYWRIYW5kbGVyICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUUgOCAtIDExKywgRWRnZSAxMiAtIDE4KywgQ2hyb21lIDw9MTYgLSAyNSBvbmx5LCBGaXJlZm94IDw9My42IC0gMzEgb25seSxcblx0Ly8gU2FmYXJpIDQgLSA1IG9ubHksIE9wZXJhIDw9MTEuNiAtIDEyLnggb25seVxuXHQvLyBJRS9FZGdlICYgb2xkZXIgYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCB0aGUgOnNjb3BlIHBzZXVkby1jbGFzcy5cblx0Ly8gU3VwcG9ydDogU2FmYXJpIDYuMCBvbmx5XG5cdC8vIFNhZmFyaSA2LjAgc3VwcG9ydHMgOnNjb3BlIGJ1dCBpdCdzIGFuIGFsaWFzIG9mIDpyb290IHRoZXJlLlxuXHRzdXBwb3J0LnNjb3BlID0gYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cdFx0cmV0dXJuIHR5cGVvZiBlbC5xdWVyeVNlbGVjdG9yQWxsICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0XHQhZWwucXVlcnlTZWxlY3RvckFsbCggXCI6c2NvcGUgZmllbGRzZXQgZGl2XCIgKS5sZW5ndGg7XG5cdH0gKTtcblxuXHQvKiBBdHRyaWJ1dGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBTdXBwb3J0OiBJRTw4XG5cdC8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllc1xuXHQvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucylcblx0c3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZWwuY2xhc3NOYW1lID0gXCJpXCI7XG5cdFx0cmV0dXJuICFlbC5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NOYW1lXCIgKTtcblx0fSApO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydCggZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KCBcIlwiICkgKTtcblx0XHRyZXR1cm4gIWVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcIipcIiApLmxlbmd0aDtcblx0fSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDlcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICk7XG5cblx0Ly8gU3VwcG9ydDogSUU8MTBcblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudEJ5SWQgcmV0dXJucyBlbGVtZW50cyBieSBuYW1lXG5cdC8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1tYXRpY2FsbHktc2V0IG5hbWVzLFxuXHQvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3Rcblx0c3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pZCA9IGV4cGFuZG87XG5cdFx0cmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7XG5cdH0gKTtcblxuXHQvLyBJRCBmaWx0ZXIgYW5kIGZpbmRcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maWx0ZXJbIFwiSURcIiBdID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggXCJpZFwiICkgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0XHRFeHByLmZpbmRbIFwiSURcIiBdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXHRcdFx0XHRyZXR1cm4gZWxlbSA/IFsgZWxlbSBdIDogW107XG5cdFx0XHR9XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRFeHByLmZpbHRlclsgXCJJRFwiIF0gPSAgZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuXHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggXCJpZFwiICk7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDYgLSA3IG9ubHlcblx0XHQvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0XG5cdFx0RXhwci5maW5kWyBcIklEXCIgXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHZhciBub2RlLCBpLCBlbGVtcyxcblx0XHRcdFx0XHRlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0gKSB7XG5cblx0XHRcdFx0XHQvLyBWZXJpZnkgdGhlIGlkIGF0dHJpYnV0ZVxuXHRcdFx0XHRcdG5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIFwiaWRcIiApO1xuXHRcdFx0XHRcdGlmICggbm9kZSAmJiBub2RlLnZhbHVlID09PSBpZCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBbIGVsZW0gXTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBGYWxsIGJhY2sgb24gZ2V0RWxlbWVudHNCeU5hbWVcblx0XHRcdFx0XHRlbGVtcyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeU5hbWUoIGlkICk7XG5cdFx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGVsZW0gPSBlbGVtc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIFwiaWRcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCBub2RlICYmIG5vZGUudmFsdWUgPT09IGlkICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gWyBlbGVtIF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvLyBUYWdcblx0RXhwci5maW5kWyBcIlRBR1wiIF0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXG5cdFx0XHRcdC8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b29cblx0XHRcdFx0cmVzdWx0cyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG5cdFx0XHRpZiAoIHRhZyA9PT0gXCIqXCIgKSB7XG5cdFx0XHRcdHdoaWxlICggKCBlbGVtID0gcmVzdWx0c1sgaSsrIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFsgXCJDTEFTU1wiIF0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oIGNsYXNzTmFtZSwgY29udGV4dCApIHtcblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdH07XG5cblx0LyogUVNBL21hdGNoZXNTZWxlY3RvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydFxuXG5cdC8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpXG5cdHJidWdneU1hdGNoZXMgPSBbXTtcblxuXHQvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKVxuXHQvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3Jcblx0Ly8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZVxuXHQvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvclxuXHQvLyBTZWUgaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4XG5cdHJidWdneVFTQSA9IFtdO1xuXG5cdGlmICggKCBzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApICkgKSB7XG5cblx0XHQvLyBCdWlsZCBRU0EgcmVnZXhcblx0XHQvLyBSZWdleCBzdHJhdGVneSBhZG9wdGVkIGZyb20gRGllZ28gUGVyaW5pXG5cdFx0YXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cblx0XHRcdHZhciBpbnB1dDtcblxuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uXG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiWypeJF09XCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIltzZWxlY3RlZF1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuNCwgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjgrXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIltpZH49XCIgKyBleHBhbmRvICsgXCItXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJ+PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDExKywgRWRnZSAxNSAtIDE4K1xuXHRcdFx0Ly8gSUUgMTEvRWRnZSBkb24ndCBmaW5kIGVsZW1lbnRzIG9uIGEgYFtuYW1lPScnXWAgcXVlcnkgaW4gc29tZSBjYXNlcy5cblx0XHRcdC8vIEFkZGluZyBhIHRlbXBvcmFyeSBhdHRyaWJ1dGUgdG8gdGhlIGRvY3VtZW50IGJlZm9yZSB0aGUgc2VsZWN0aW9uIHdvcmtzXG5cdFx0XHQvLyBhcm91bmQgdGhlIGlzc3VlLlxuXHRcdFx0Ly8gSW50ZXJlc3RpbmdseSwgSUUgMTAgJiBvbGRlciBkb24ndCBzZWVtIHRvIGhhdmUgdGhlIGlzc3VlLlxuXHRcdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwiXCIgKTtcblx0XHRcdGVsLmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCJbbmFtZT0nJ11cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIipuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqPVwiICtcblx0XHRcdFx0XHR3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCI6Y2hlY2tlZFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6Y2hlY2tlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxXG5cdFx0XHQvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJsaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcImEjXCIgKyBleHBhbmRvICsgXCIrKlwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCIuIy4rWyt+XVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD0zLjYgLSA1IG9ubHlcblx0XHRcdC8vIE9sZCBGaXJlZm94IGRvZXNuJ3QgdGhyb3cgb24gYSBiYWRseS1lc2NhcGVkIGlkZW50aWZpZXIuXG5cdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIlxcXFxcXGZcIiApO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiW1xcXFxyXFxcXG5cXFxcZl1cIiApO1xuXHRcdH0gKTtcblxuXHRcdGFzc2VydCggZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0ZWwuaW5uZXJIVE1MID0gXCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwc1xuXHRcdFx0Ly8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG5cdFx0XHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwiaGlkZGVuXCIgKTtcblx0XHRcdGVsLmFwcGVuZENoaWxkKCBpbnB1dCApLnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwiRFwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXR5IG9mIG5hbWUgYXR0cmlidXRlXG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW25hbWU9ZF1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwibmFtZVwiICsgd2hpdGVzcGFjZSArIFwiKlsqXiR8IX5dPz1cIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGRiAzLjUgLSA6ZW5hYmxlZC86ZGlzYWJsZWQgYW5kIGhpZGRlbiBlbGVtZW50cyAoaGlkZGVuIGVsZW1lbnRzIGFyZSBzdGlsbCBlbmFibGVkKVxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbCggXCI6ZW5hYmxlZFwiICkubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIElFJ3MgOmRpc2FibGVkIHNlbGVjdG9yIGRvZXMgbm90IHBpY2sgdXAgdGhlIGNoaWxkcmVuIG9mIGRpc2FibGVkIGZpZWxkc2V0c1xuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiOmRpc2FibGVkXCIgKS5sZW5ndGggIT09IDIgKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogT3BlcmEgMTAgLSAxMSBvbmx5XG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZWwucXVlcnlTZWxlY3RvckFsbCggXCIqLDp4XCIgKTtcblx0XHRcdHJidWdneVFTQS5wdXNoKCBcIiwuKjpcIiApO1xuXHRcdH0gKTtcblx0fVxuXG5cdGlmICggKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKCBtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IgKSApICkgKSB7XG5cblx0XHRhc3NlcnQoIGZ1bmN0aW9uKCBlbCApIHtcblxuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGl0J3MgcG9zc2libGUgdG8gZG8gbWF0Y2hlc1NlbGVjdG9yXG5cdFx0XHQvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KVxuXHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZWwsIFwiKlwiICk7XG5cblx0XHRcdC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBhbiBleGNlcHRpb25cblx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdG1hdGNoZXMuY2FsbCggZWwsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSApO1xuXHR9XG5cblx0cmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbiggXCJ8XCIgKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKCBcInxcIiApICk7XG5cblx0LyogQ29udGFpbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cblx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdC8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZVxuXHQvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuXHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0dmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcblx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0YWRvd24uY29udGFpbnMgP1xuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHQpICk7XG5cdFx0fSA6XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHRpZiAoIGIgKSB7XG5cdFx0XHRcdHdoaWxlICggKCBiID0gYi5wYXJlbnROb2RlICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHQvKiBTb3J0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHR2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG5cdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdC8vIFN1cHBvcnQ6IElFIDExKywgRWRnZSAxNyAtIDE4K1xuXHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgP1xuXHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkXG5cdFx0XHQxO1xuXG5cdFx0Ly8gRGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0aWYgKCBjb21wYXJlICYgMSB8fFxuXHRcdFx0KCAhc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlICkgKSB7XG5cblx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdFx0XHQvLyBJRS9FZGdlIHNvbWV0aW1lcyB0aHJvdyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvciB3aGVuIHN0cmljdC1jb21wYXJpbmdcblx0XHRcdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0XHRcdGlmICggYSA9PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT0gcHJlZmVycmVkRG9jICYmXG5cdFx0XHRcdGNvbnRhaW5zKCBwcmVmZXJyZWREb2MsIGEgKSApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSssIEVkZ2UgMTcgLSAxOCtcblx0XHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdFx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuXHRcdFx0aWYgKCBiID09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PSBwcmVmZXJyZWREb2MgJiZcblx0XHRcdFx0Y29udGFpbnMoIHByZWZlcnJlZERvYywgYiApICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cblx0XHQvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdGJ1cCA9IGIucGFyZW50Tm9kZSxcblx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRicCA9IFsgYiBdO1xuXG5cdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdFx0XHQvLyBJRS9FZGdlIHNvbWV0aW1lcyB0aHJvdyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvciB3aGVuIHN0cmljdC1jb21wYXJpbmdcblx0XHRcdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0XHRcdC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHRcdFx0cmV0dXJuIGEgPT0gZG9jdW1lbnQgPyAtMSA6XG5cdFx0XHRcdGIgPT0gZG9jdW1lbnQgPyAxIDpcblx0XHRcdFx0LyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoIGN1ciA9IGN1ci5wYXJlbnROb2RlICkgKSB7XG5cdFx0XHRhcC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cdFx0Y3VyID0gYjtcblx0XHR3aGlsZSAoICggY3VyID0gY3VyLnBhcmVudE5vZGUgKSApIHtcblx0XHRcdGJwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblxuXHRcdC8vIFdhbGsgZG93biB0aGUgdHJlZSBsb29raW5nIGZvciBhIGRpc2NyZXBhbmN5XG5cdFx0d2hpbGUgKCBhcFsgaSBdID09PSBicFsgaSBdICkge1xuXHRcdFx0aSsrO1xuXHRcdH1cblxuXHRcdHJldHVybiBpID9cblxuXHRcdFx0Ly8gRG8gYSBzaWJsaW5nIGNoZWNrIGlmIHRoZSBub2RlcyBoYXZlIGEgY29tbW9uIGFuY2VzdG9yXG5cdFx0XHRzaWJsaW5nQ2hlY2soIGFwWyBpIF0sIGJwWyBpIF0gKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdFxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdFx0XHQvLyBJRS9FZGdlIHNvbWV0aW1lcyB0aHJvdyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvciB3aGVuIHN0cmljdC1jb21wYXJpbmdcblx0XHRcdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0XHRcdC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHRcdFx0YXBbIGkgXSA9PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFsgaSBdID09IHByZWZlcnJlZERvYyA/IDEgOlxuXHRcdFx0LyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0XHRcdDA7XG5cdH07XG5cblx0cmV0dXJuIGRvY3VtZW50O1xufTtcblxuU2l6emxlLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgZWxlbWVudHMgKSB7XG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7XG59O1xuXG5TaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7XG5cdHNldERvY3VtZW50KCBlbGVtICk7XG5cblx0aWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdCFub25uYXRpdmVTZWxlY3RvckNhY2hlWyBleHByICsgXCIgXCIgXSAmJlxuXHRcdCggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiZcblx0XHQoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7XG5cblx0XHR0cnkge1xuXHRcdFx0dmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApO1xuXG5cdFx0XHQvLyBJRSA5J3MgbWF0Y2hlc1NlbGVjdG9yIHJldHVybnMgZmFsc2Ugb24gZGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0XHRpZiAoIHJldCB8fCBzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoIHx8XG5cblx0XHRcdFx0Ly8gQXMgd2VsbCwgZGlzY29ubmVjdGVkIG5vZGVzIGFyZSBzYWlkIHRvIGJlIGluIGEgZG9jdW1lbnRcblx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0bm9ubmF0aXZlU2VsZWN0b3JDYWNoZSggZXhwciwgdHJ1ZSApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcblxuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHQvLyB0d28gZG9jdW1lbnRzOyBzaGFsbG93IGNvbXBhcmlzb25zIHdvcmsuXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0aWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdC8vIFN1cHBvcnQ6IElFIDExKywgRWRnZSAxNyAtIDE4K1xuXHQvLyBJRS9FZGdlIHNvbWV0aW1lcyB0aHJvdyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvciB3aGVuIHN0cmljdC1jb21wYXJpbmdcblx0Ly8gdHdvIGRvY3VtZW50czsgc2hhbGxvdyBjb21wYXJpc29ucyB3b3JrLlxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHR2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLFxuXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCggdmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkgKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0bnVsbDtcbn07XG5cblNpenpsZS5lc2NhcGUgPSBmdW5jdGlvbiggc2VsICkge1xuXHRyZXR1cm4gKCBzZWwgKyBcIlwiICkucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKCBlbGVtID0gcmVzdWx0c1sgaSsrIF0gKSApIHtcblx0XHRcdGlmICggZWxlbSA9PT0gcmVzdWx0c1sgaSBdICkge1xuXHRcdFx0XHRqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0cmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENsZWFyIGlucHV0IGFmdGVyIHNvcnRpbmcgdG8gcmVsZWFzZSBvYmplY3RzXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNVxuXHRzb3J0SW5wdXQgPSBudWxsO1xuXG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2Rlc1xuICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBlbGVtXG4gKi9cbmdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHR2YXIgbm9kZSxcblx0XHRyZXQgPSBcIlwiLFxuXHRcdGkgPSAwLFxuXHRcdG5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRpZiAoICFub2RlVHlwZSApIHtcblxuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAoIG5vZGUgPSBlbGVtWyBpKysgXSApICkge1xuXG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblxuXHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBUcmF2ZXJzZSBpdHMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRyZXQgKz0gZ2V0VGV4dCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7XG5cdFx0cmV0dXJuIGVsZW0ubm9kZVZhbHVlO1xuXHR9XG5cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsgMSBdID0gbWF0Y2hbIDEgXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXG5cdFx0XHQvLyBNb3ZlIHRoZSBnaXZlbiB2YWx1ZSB0byBtYXRjaFszXSB3aGV0aGVyIHF1b3RlZCBvciB1bnF1b3RlZFxuXHRcdFx0bWF0Y2hbIDMgXSA9ICggbWF0Y2hbIDMgXSB8fCBtYXRjaFsgNCBdIHx8XG5cdFx0XHRcdG1hdGNoWyA1IF0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbIDIgXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRtYXRjaFsgMyBdID0gXCIgXCIgKyBtYXRjaFsgMyBdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblxuXHRcdFx0LyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG5cdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG5cdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDYgeCBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0Ki9cblx0XHRcdG1hdGNoWyAxIF0gPSBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbIDEgXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuXG5cdFx0XHRcdC8vIG50aC0qIHJlcXVpcmVzIGFyZ3VtZW50XG5cdFx0XHRcdGlmICggIW1hdGNoWyAzIF0gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFsgMCBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcblx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRtYXRjaFsgNCBdID0gKyggbWF0Y2hbIDQgXSA/XG5cdFx0XHRcdFx0bWF0Y2hbIDUgXSArICggbWF0Y2hbIDYgXSB8fCAxICkgOlxuXHRcdFx0XHRcdDIgKiAoIG1hdGNoWyAzIF0gPT09IFwiZXZlblwiIHx8IG1hdGNoWyAzIF0gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRtYXRjaFsgNSBdID0gKyggKCBtYXRjaFsgNyBdICsgbWF0Y2hbIDggXSApIHx8IG1hdGNoWyAzIF0gPT09IFwib2RkXCIgKTtcblxuXHRcdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWyAzIF0gKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdHZhciBleGNlc3MsXG5cdFx0XHRcdHVucXVvdGVkID0gIW1hdGNoWyA2IF0gJiYgbWF0Y2hbIDIgXTtcblxuXHRcdFx0aWYgKCBtYXRjaEV4cHJbIFwiQ0hJTERcIiBdLnRlc3QoIG1hdGNoWyAwIF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWyAzIF0gKSB7XG5cdFx0XHRcdG1hdGNoWyAyIF0gPSBtYXRjaFsgNCBdIHx8IG1hdGNoWyA1IF0gfHwgXCJcIjtcblxuXHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXG5cdFx0XHRcdC8vIEdldCBleGNlc3MgZnJvbSB0b2tlbml6ZSAocmVjdXJzaXZlbHkpXG5cdFx0XHRcdCggZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkgKSAmJlxuXG5cdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQoIGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCApICkge1xuXG5cdFx0XHRcdC8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4XG5cdFx0XHRcdG1hdGNoWyAwIF0gPSBtYXRjaFsgMCBdLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdFx0bWF0Y2hbIDIgXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV0dXJuIG9ubHkgY2FwdHVyZXMgbmVlZGVkIGJ5IHRoZSBwc2V1ZG8gZmlsdGVyIG1ldGhvZCAodHlwZSBhbmQgYXJndW1lbnQpXG5cdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDMgKTtcblx0XHR9XG5cdH0sXG5cblx0ZmlsdGVyOiB7XG5cblx0XHRcIlRBR1wiOiBmdW5jdGlvbiggbm9kZU5hbWVTZWxlY3RvciApIHtcblx0XHRcdHZhciBub2RlTmFtZSA9IG5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5vZGVOYW1lU2VsZWN0b3IgPT09IFwiKlwiID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdCggcGF0dGVybiA9IG5ldyBSZWdFeHAoIFwiKF58XCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFx0XHRcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSApICYmIGNsYXNzQ2FjaGUoXG5cdFx0XHRcdFx0XHRjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KFxuXHRcdFx0XHRcdFx0XHRcdHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fFxuXHRcdFx0XHRcdFx0XHRcdHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8XG5cdFx0XHRcdFx0XHRcdFx0XCJcIlxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9ICk7XG5cdFx0fSxcblxuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbmFtZSwgb3BlcmF0b3IsIGNoZWNrICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0XHRpZiAoIHJlc3VsdCA9PSBudWxsICkge1xuXHRcdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCIhPVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggIW9wZXJhdG9yICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzdWx0ICs9IFwiXCI7XG5cblx0XHRcdFx0LyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuXG5cdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiXj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifj1cIiA/ICggXCIgXCIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsIFwiIFwiICkgKyBcIiBcIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi9cblxuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgX2FyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIF9jb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGNhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSwgbm9kZSwgbm9kZUluZGV4LCBzdGFydCxcblx0XHRcdFx0XHRcdGRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/IFwibmV4dFNpYmxpbmdcIiA6IFwicHJldmlvdXNTaWJsaW5nXCIsXG5cdFx0XHRcdFx0XHRwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUsXG5cdFx0XHRcdFx0XHRuYW1lID0gb2ZUeXBlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdHVzZUNhY2hlID0gIXhtbCAmJiAhb2ZUeXBlLFxuXHRcdFx0XHRcdFx0ZGlmZiA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIDooZmlyc3R8bGFzdHxvbmx5KS0oY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0XHRcdGlmICggc2ltcGxlICkge1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIGRpciApIHtcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoICggbm9kZSA9IG5vZGVbIGRpciBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblxuXHRcdFx0XHRcdFx0Ly8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcblx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKCBub2RlWyBleHBhbmRvIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0KCBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHRcdGNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4ICYmIGNhY2hlWyAyIF07XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKCBub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHQoIGRpZmYgPSBub2RlSW5kZXggPSAwICkgfHwgc3RhcnQucG9wKCkgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFdoZW4gZm91bmQsIGNhY2hlIGluZGV4ZXMgb24gYHBhcmVudGAgYW5kIGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlLm5vZGVUeXBlID09PSAxICYmICsrZGlmZiAmJiBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBVc2UgcHJldmlvdXNseS1jYWNoZWQgZWxlbWVudCBpbmRleCBpZiBhdmFpbGFibGVcblx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8ICggbm9kZVsgZXhwYW5kbyBdID0ge30gKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KCBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTtcblx0XHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4O1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8geG1sIDpudGgtY2hpbGQoLi4uKVxuXHRcdFx0XHRcdFx0XHQvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pXG5cdFx0XHRcdFx0XHRcdGlmICggZGlmZiA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKCBub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KCBkaWZmID0gbm9kZUluZGV4ID0gMCApIHx8IHN0YXJ0LnBvcCgpICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0KytkaWZmICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQoIG5vZGVbIGV4cGFuZG8gXSA9IHt9ICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCggb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30gKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0ZGlmZiAtPSBsYXN0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcblxuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdHZhciBpZHgsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbIGkgXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFsgaSBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXG5cdFx0Ly8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zXG5cdFx0XCJub3RcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cblx0XHRcdC8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlXG5cdFx0XHQvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZ1xuXHRcdFx0Ly8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzXG5cdFx0XHR2YXIgaW5wdXQgPSBbXSxcblx0XHRcdFx0cmVzdWx0cyA9IFtdLFxuXHRcdFx0XHRtYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApICk7XG5cblx0XHRcdHJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gP1xuXHRcdFx0XHRtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBfY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0dW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLFxuXHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYFxuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGVsZW0gPSB1bm1hdGNoZWRbIGkgXSApICkge1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpIF0gPSAhKCBtYXRjaGVzWyBpIF0gPSBlbGVtICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgX2NvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRpbnB1dFsgMCBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cblx0XHRcdFx0XHQvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0XHRcdGlucHV0WyAwIF0gPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiAhcmVzdWx0cy5wb3AoKTtcblx0XHRcdFx0fTtcblx0XHR9ICksXG5cblx0XHRcImhhc1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9ICksXG5cblx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuXHRcdFx0fTtcblx0XHR9ICksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXG5cdFx0XHQvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cdFx0XHRpZiAoICFyaWRlbnRpZmllci50ZXN0KCBsYW5nIHx8IFwiXCIgKSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbGFuZyApO1xuXHRcdFx0fVxuXHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoICggZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdFx0XHRlbGVtLmxhbmcgOlxuXHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoIFwieG1sOmxhbmdcIiApIHx8IGVsZW0uZ2V0QXR0cmlidXRlKCBcImxhbmdcIiApICkgKSB7XG5cblx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUgKCAoIGVsZW0gPSBlbGVtLnBhcmVudE5vZGUgKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSApLFxuXG5cdFx0Ly8gTWlzY2VsbGFuZW91c1xuXHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG5cdFx0fSxcblxuXHRcdFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdH0sXG5cblx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiZcblx0XHRcdFx0KCAhZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSApICYmXG5cdFx0XHRcdCEhKCBlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4ICk7XG5cdFx0fSxcblxuXHRcdC8vIEJvb2xlYW4gcHJvcGVydGllc1xuXHRcdFwiZW5hYmxlZFwiOiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZmFsc2UgKSxcblx0XHRcImRpc2FibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCB0cnVlICksXG5cblx0XHRcImNoZWNrZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdC8vIEluIENTUzMsIDpjaGVja2VkIHNob3VsZCByZXR1cm4gYm90aCBjaGVja2VkIGFuZCBzZWxlY3RlZCBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQgKSB8fFxuXHRcdFx0XHQoIG5vZGVOYW1lID09PSBcIm9wdGlvblwiICYmICEhZWxlbS5zZWxlY3RlZCApO1xuXHRcdH0sXG5cblx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHQvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5XG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdC8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSxcblx0XHRcdC8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pXG5cdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAhRXhwci5wc2V1ZG9zWyBcImVtcHR5XCIgXSggZWxlbSApO1xuXHRcdH0sXG5cblx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XCJoZWFkZXJcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiaW5wdXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gXCJidXR0b25cIiB8fCBuYW1lID09PSBcImJ1dHRvblwiO1xuXHRcdH0sXG5cblx0XHRcInRleHRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgYXR0cjtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiAmJlxuXHRcdFx0XHRlbGVtLnR5cGUgPT09IFwidGV4dFwiICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OFxuXHRcdFx0XHQvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgXCJzZWFyY2hcIikgYXBwZWFyIHdpdGggZWxlbS50eXBlID09PSBcInRleHRcIlxuXHRcdFx0XHQoICggYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApICkgPT0gbnVsbCB8fFxuXHRcdFx0XHRcdGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHR9LFxuXG5cdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0fSApLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZ1bmN0aW9uKCBfbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gWyBsZW5ndGggLSAxIF07XG5cdFx0fSApLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmdW5jdGlvbiggX21hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTtcblx0XHR9ICksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0gKSxcblxuXHRcdFwib2RkXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9ICksXG5cblx0XHRcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/XG5cdFx0XHRcdGFyZ3VtZW50ICsgbGVuZ3RoIDpcblx0XHRcdFx0YXJndW1lbnQgPiBsZW5ndGggP1xuXHRcdFx0XHRcdGxlbmd0aCA6XG5cdFx0XHRcdFx0YXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7IC0taSA+PSAwOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSApLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9IClcblx0fVxufTtcblxuRXhwci5wc2V1ZG9zWyBcIm50aFwiIF0gPSBFeHByLnBzZXVkb3NbIFwiZXFcIiBdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAoIG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkgKSApIHtcblx0XHRcdGlmICggbWF0Y2ggKSB7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgY29uc3VtZSB0cmFpbGluZyBjb21tYXMgYXMgdmFsaWRcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbIDAgXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAoIHRva2VucyA9IFtdICkgKTtcblx0XHR9XG5cblx0XHRtYXRjaGVkID0gZmFsc2U7XG5cblx0XHQvLyBDb21iaW5hdG9yc1xuXHRcdGlmICggKCBtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApICkgKSB7XG5cdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdHRva2Vucy5wdXNoKCB7XG5cdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXG5cdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHR0eXBlOiBtYXRjaFsgMCBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9ICk7XG5cdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZpbHRlcnNcblx0XHRmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuXHRcdFx0aWYgKCAoIG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSApICYmICggIXByZUZpbHRlcnNbIHR5cGUgXSB8fFxuXHRcdFx0XHQoIG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApICkgKSApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHRcdHRva2Vucy5wdXNoKCB7XG5cdFx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0dG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG59O1xuXG5mdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdHNlbGVjdG9yID0gXCJcIjtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0c2VsZWN0b3IgKz0gdG9rZW5zWyBpIF0udmFsdWU7XG5cdH1cblx0cmV0dXJuIHNlbGVjdG9yO1xufVxuXG5mdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuXHR2YXIgZGlyID0gY29tYmluYXRvci5kaXIsXG5cdFx0c2tpcCA9IGNvbWJpbmF0b3IubmV4dCxcblx0XHRrZXkgPSBza2lwIHx8IGRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBrZXkgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblxuXHRcdC8vIENoZWNrIGFnYWluc3QgY2xvc2VzdCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IGVsZW1bIGRpciBdICkgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gOlxuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBhbGwgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRzXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG5cdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoICggZWxlbSA9IGVsZW1bIGRpciBdICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKCBlbGVtWyBleHBhbmRvIF0gPSB7fSApO1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdCggb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdID0ge30gKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBza2lwICYmIHNraXAgPT09IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0ZWxlbSA9IGVsZW1bIGRpciBdIHx8IGVsZW07XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCAoIG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGtleSBdICkgJiZcblx0XHRcdFx0XHRcdFx0b2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKCBuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyBrZXkgXSA9IG5ld0NhY2hlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuXHRcdFx0XHRcdFx0XHRpZiAoICggbmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xufVxuXG5mdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7XG5cdHJldHVybiBtYXRjaGVycy5sZW5ndGggPiAxID9cblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAhbWF0Y2hlcnNbIGkgXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1sgMCBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzWyBpIF0sIHJlc3VsdHMgKTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0cztcbn1cblxuZnVuY3Rpb24gY29uZGVuc2UoIHVubWF0Y2hlZCwgbWFwLCBmaWx0ZXIsIGNvbnRleHQsIHhtbCApIHtcblx0dmFyIGVsZW0sXG5cdFx0bmV3VW5tYXRjaGVkID0gW10sXG5cdFx0aSA9IDAsXG5cdFx0bGVuID0gdW5tYXRjaGVkLmxlbmd0aCxcblx0XHRtYXBwZWQgPSBtYXAgIT0gbnVsbDtcblxuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRpZiAoICggZWxlbSA9IHVubWF0Y2hlZFsgaSBdICkgKSB7XG5cdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0aWYgKCBtYXBwZWQgKSB7XG5cdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcblx0fVxuXHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG5cdH1cblx0cmV0dXJuIG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKFxuXHRcdFx0XHRzZWxlY3RvciB8fCBcIipcIixcblx0XHRcdFx0Y29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCxcblx0XHRcdFx0W11cblx0XHRcdCksXG5cblx0XHRcdC8vIFByZWZpbHRlciB0byBnZXQgbWF0Y2hlciBpbnB1dCwgcHJlc2VydmluZyBhIG1hcCBmb3Igc2VlZC1yZXN1bHRzIHN5bmNocm9uaXphdGlvblxuXHRcdFx0bWF0Y2hlckluID0gcHJlRmlsdGVyICYmICggc2VlZCB8fCAhc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGNvbmRlbnNlKCBlbGVtcywgcHJlTWFwLCBwcmVGaWx0ZXIsIGNvbnRleHQsIHhtbCApIDpcblx0XHRcdFx0ZWxlbXMsXG5cblx0XHRcdG1hdGNoZXJPdXQgPSBtYXRjaGVyID9cblxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKCBlbGVtID0gdGVtcFsgaSBdICkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlck91dFsgcG9zdE1hcFsgaSBdIF0gPSAhKCBtYXRjaGVySW5bIHBvc3RNYXBbIGkgXSBdID0gZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyIHx8IHByZUZpbHRlciApIHtcblx0XHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKCBlbGVtID0gbWF0Y2hlck91dFsgaSBdICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAoIG1hdGNoZXJJblsgaSBdID0gZWxlbSApICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsICggbWF0Y2hlck91dCA9IFtdICksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoICggZWxlbSA9IG1hdGNoZXJPdXRbIGkgXSApICYmXG5cdFx0XHRcdFx0XHQoIHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwWyBpIF0gKSA+IC0xICkge1xuXG5cdFx0XHRcdFx0XHRzZWVkWyB0ZW1wIF0gPSAhKCByZXN1bHRzWyB0ZW1wIF0gPSBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cblx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdCk7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWyAwIF0udHlwZSBdLFxuXHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVsgXCIgXCIgXSxcblx0XHRpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsXG5cblx0XHQvLyBUaGUgZm91bmRhdGlvbmFsIG1hdGNoZXIgZW5zdXJlcyB0aGF0IGVsZW1lbnRzIGFyZSByZWFjaGFibGUgZnJvbSB0b3AtbGV2ZWwgY29udGV4dChzKVxuXHRcdG1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGNoZWNrQ29udGV4dDtcblx0XHR9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG5cdFx0bWF0Y2hBbnlDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZiggY2hlY2tDb250ZXh0LCBlbGVtICkgPiAtMTtcblx0XHR9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG5cdFx0bWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgcmV0ID0gKCAhbGVhZGluZ1JlbGF0aXZlICYmICggeG1sIHx8IGNvbnRleHQgIT09IG91dGVybW9zdENvbnRleHQgKSApIHx8IChcblx0XHRcdFx0KCBjaGVja0NvbnRleHQgPSBjb250ZXh0ICkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblxuXHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRjaGVja0NvbnRleHQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9IF07XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAoIG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbIGkgXS50eXBlIF0gKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKCBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwgbWF0Y2hlciApIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zWyBpIF0udHlwZSBdLmFwcGx5KCBudWxsLCB0b2tlbnNbIGkgXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblxuXHRcdFx0XHQvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcblx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbIGogXS50eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHNldE1hdGNoZXIoXG5cdFx0XHRcdFx0aSA+IDEgJiYgZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksXG5cdFx0XHRcdFx0aSA+IDEgJiYgdG9TZWxlY3RvcihcblxuXHRcdFx0XHRcdC8vIElmIHRoZSBwcmVjZWRpbmcgdG9rZW4gd2FzIGEgZGVzY2VuZGFudCBjb21iaW5hdG9yLCBpbnNlcnQgYW4gaW1wbGljaXQgYW55LWVsZW1lbnQgYCpgXG5cdFx0XHRcdFx0dG9rZW5zXG5cdFx0XHRcdFx0XHQuc2xpY2UoIDAsIGkgLSAxIClcblx0XHRcdFx0XHRcdC5jb25jYXQoIHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSBcIiBcIiA/IFwiKlwiIDogXCJcIiB9IClcblx0XHRcdFx0XHQpLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcblx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICggdG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkgKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgdG9TZWxlY3RvciggdG9rZW5zIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHRcdG1hdGNoZXJzLnB1c2goIG1hdGNoZXIgKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApIHtcblx0dmFyIGJ5U2V0ID0gc2V0TWF0Y2hlcnMubGVuZ3RoID4gMCxcblx0XHRieUVsZW1lbnQgPSBlbGVtZW50TWF0Y2hlcnMubGVuZ3RoID4gMCxcblx0XHRzdXBlck1hdGNoZXIgPSBmdW5jdGlvbiggc2VlZCwgY29udGV4dCwgeG1sLCByZXN1bHRzLCBvdXRlcm1vc3QgKSB7XG5cdFx0XHR2YXIgZWxlbSwgaiwgbWF0Y2hlcixcblx0XHRcdFx0bWF0Y2hlZENvdW50ID0gMCxcblx0XHRcdFx0aSA9IFwiMFwiLFxuXHRcdFx0XHR1bm1hdGNoZWQgPSBzZWVkICYmIFtdLFxuXHRcdFx0XHRzZXRNYXRjaGVkID0gW10sXG5cdFx0XHRcdGNvbnRleHRCYWNrdXAgPSBvdXRlcm1vc3RDb250ZXh0LFxuXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbIFwiVEFHXCIgXSggXCIqXCIsIG91dGVybW9zdCApLFxuXG5cdFx0XHRcdC8vIFVzZSBpbnRlZ2VyIGRpcnJ1bnMgaWZmIHRoaXMgaXMgdGhlIG91dGVybW9zdCBtYXRjaGVyXG5cdFx0XHRcdGRpcnJ1bnNVbmlxdWUgPSAoIGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xICksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgMTErLCBFZGdlIDE3IC0gMTgrXG5cdFx0XHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdFx0XHQvLyB0d28gZG9jdW1lbnRzOyBzaGFsbG93IGNvbXBhcmlzb25zIHdvcmsuXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT0gZG9jdW1lbnQgfHwgY29udGV4dCB8fCBvdXRlcm1vc3Q7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBlbGVtZW50cyBwYXNzaW5nIGVsZW1lbnRNYXRjaGVycyBkaXJlY3RseSB0byByZXN1bHRzXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0Zm9yICggOyBpICE9PSBsZW4gJiYgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRqID0gMDtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDExKywgRWRnZSAxNyAtIDE4K1xuXHRcdFx0XHRcdC8vIElFL0VkZ2Ugc29tZXRpbWVzIHRocm93IGEgXCJQZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gc3RyaWN0LWNvbXBhcmluZ1xuXHRcdFx0XHRcdC8vIHR3byBkb2N1bWVudHM7IHNoYWxsb3cgY29tcGFyaXNvbnMgd29yay5cblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG5cdFx0XHRcdFx0aWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdFx0XHRcdFx0eG1sID0gIWRvY3VtZW50SXNIVE1MO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aGlsZSAoICggbWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1sgaisrIF0gKSApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdFx0XHRkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUcmFjayB1bm1hdGNoZWQgZWxlbWVudHMgZm9yIHNldCBmaWx0ZXJzXG5cdFx0XHRcdGlmICggYnlTZXQgKSB7XG5cblx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0aWYgKCAoIGVsZW0gPSAhbWF0Y2hlciAmJiBlbGVtICkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gYGlgIGlzIG5vdyB0aGUgY291bnQgb2YgZWxlbWVudHMgdmlzaXRlZCBhYm92ZSwgYW5kIGFkZGluZyBpdCB0byBgbWF0Y2hlZENvdW50YFxuXHRcdFx0Ly8gbWFrZXMgdGhlIGxhdHRlciBub25uZWdhdGl2ZS5cblx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXG5cdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdC8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZVxuXHRcdFx0Ly8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC5cblx0XHRcdC8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nIFwiMFwiIGBpYCBhbGxvd3MgYGlgIHRvIHJlbWFpbiBhIHN0cmluZyBvbmx5IGluIHRoYXRcblx0XHRcdC8vIGNhc2UsIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgXCIwMFwiIGBtYXRjaGVkQ291bnRgIHRoYXQgZGlmZmVycyBmcm9tIGBpYCBidXQgaXMgYWxzb1xuXHRcdFx0Ly8gbnVtZXJpY2FsbHkgemVyby5cblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAoIG1hdGNoZXIgPSBzZXRNYXRjaGVyc1sgaisrIF0gKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzZWVkICkge1xuXG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEoIHVubWF0Y2hlZFsgaSBdIHx8IHNldE1hdGNoZWRbIGkgXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbIGkgXSA9IHBvcC5jYWxsKCByZXN1bHRzICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBEaXNjYXJkIGluZGV4IHBsYWNlaG9sZGVyIHZhbHVlcyB0byBnZXQgb25seSBhY3R1YWwgbWF0Y2hlc1xuXHRcdFx0XHRcdHNldE1hdGNoZWQgPSBjb25kZW5zZSggc2V0TWF0Y2hlZCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQWRkIG1hdGNoZXMgdG8gcmVzdWx0c1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZXRNYXRjaGVkICk7XG5cblx0XHRcdFx0Ly8gU2VlZGxlc3Mgc2V0IG1hdGNoZXMgc3VjY2VlZGluZyBtdWx0aXBsZSBzdWNjZXNzZnVsIG1hdGNoZXJzIHN0aXB1bGF0ZSBzb3J0aW5nXG5cdFx0XHRcdGlmICggb3V0ZXJtb3N0ICYmICFzZWVkICYmIHNldE1hdGNoZWQubGVuZ3RoID4gMCAmJlxuXHRcdFx0XHRcdCggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkge1xuXG5cdFx0XHRcdFx0U2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdmVycmlkZSBtYW5pcHVsYXRpb24gb2YgZ2xvYmFscyBieSBuZXN0ZWQgbWF0Y2hlcnNcblx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHRCYWNrdXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB1bm1hdGNoZWQ7XG5cdFx0fTtcblxuXHRyZXR1cm4gYnlTZXQgP1xuXHRcdG1hcmtGdW5jdGlvbiggc3VwZXJNYXRjaGVyICkgOlxuXHRcdHN1cGVyTWF0Y2hlcjtcbn1cblxuY29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBtYXRjaCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0dmFyIGksXG5cdFx0c2V0TWF0Y2hlcnMgPSBbXSxcblx0XHRlbGVtZW50TWF0Y2hlcnMgPSBbXSxcblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCAhY2FjaGVkICkge1xuXG5cdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoWyBpIF0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoXG5cdFx0XHRzZWxlY3Rvcixcblx0XHRcdG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApXG5cdFx0KTtcblxuXHRcdC8vIFNhdmUgc2VsZWN0b3IgYW5kIHRva2VuaXphdGlvblxuXHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHR9XG5cdHJldHVybiBjYWNoZWQ7XG59O1xuXG4vKipcbiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c11cbiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG4gKi9cbnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0bWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKCBzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yICkgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBzZWxlY3RvciBpbiB0aGUgbGlzdCBhbmQgbm8gc2VlZFxuXHQvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpXG5cdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG5cdFx0Ly8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSURcblx0XHR0b2tlbnMgPSBtYXRjaFsgMCBdID0gbWF0Y2hbIDAgXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKCB0b2tlbiA9IHRva2Vuc1sgMCBdICkudHlwZSA9PT0gXCJJRFwiICYmXG5cdFx0XHRjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmIEV4cHIucmVsYXRpdmVbIHRva2Vuc1sgMSBdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kWyBcIklEXCIgXSggdG9rZW4ubWF0Y2hlc1sgMCBdXG5cdFx0XHRcdC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLCBjb250ZXh0ICkgfHwgW10gKVsgMCBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwclsgXCJuZWVkc0NvbnRleHRcIiBdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zWyBpIF07XG5cblx0XHRcdC8vIEFib3J0IGlmIHdlIGhpdCBhIGNvbWJpbmF0b3Jcblx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgKCB0eXBlID0gdG9rZW4udHlwZSApIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoIGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSApICkge1xuXG5cdFx0XHRcdC8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9yc1xuXHRcdFx0XHRpZiAoICggc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1sgMCBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksXG5cdFx0XHRcdFx0cnNpYmxpbmcudGVzdCggdG9rZW5zWyAwIF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fFxuXHRcdFx0XHRcdFx0Y29udGV4dFxuXHRcdFx0XHQpICkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoIFwiXCIgKS5zb3J0KCBzb3J0T3JkZXIgKS5qb2luKCBcIlwiICkgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cblx0Ly8gU2hvdWxkIHJldHVybiAxLCBidXQgcmV0dXJucyA0IChmb2xsb3dpbmcpXG5cdHJldHVybiBlbC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJmaWVsZHNldFwiICkgKSAmIDE7XG59ICk7XG5cbi8vIFN1cHBvcnQ6IElFPDhcbi8vIFByZXZlbnQgYXR0cmlidXRlL3Byb3BlcnR5IFwiaW50ZXJwb2xhdGlvblwiXG4vLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweFxuaWYgKCAhYXNzZXJ0KCBmdW5jdGlvbiggZWwgKSB7XG5cdGVsLmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuXHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwiaHJlZlwiICkgPT09IFwiI1wiO1xufSApICkge1xuXHRhZGRIYW5kbGUoIFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0eXBlXCIgPyAxIDogMiApO1xuXHRcdH1cblx0fSApO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydCggZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0gKSApIHtcblx0YWRkSGFuZGxlKCBcInZhbHVlXCIsIGZ1bmN0aW9uKCBlbGVtLCBfbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG5cdFx0fVxuXHR9ICk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydCggZnVuY3Rpb24oIGVsICkge1xuXHRyZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCBcImRpc2FibGVkXCIgKSA9PSBudWxsO1xufSApICkge1xuXHRhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHZhbDtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtWyBuYW1lIF0gPT09IHRydWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOlxuXHRcdFx0XHQoIHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApICkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0XHRudWxsO1xuXHRcdH1cblx0fSApO1xufVxuXG5yZXR1cm4gU2l6emxlO1xuXG59ICkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5cbi8vIERlcHJlY2F0ZWRcbmpRdWVyeS5leHByWyBcIjpcIiBdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbmpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcbmpRdWVyeS5lc2NhcGVTZWxlY3RvciA9IFNpenpsZS5lc2NhcGU7XG5cblxuXG5cbnZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHtcblx0dmFyIG1hdGNoZWQgPSBbXSxcblx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0d2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0aWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHR2YXIgbWF0Y2hlZCA9IFtdO1xuXG5cdGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7XG5cdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRtYXRjaGVkLnB1c2goIG4gKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlZDtcbn07XG5cblxudmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7XG5cblxuXG5mdW5jdGlvbiBub2RlTmFtZSggZWxlbSwgbmFtZSApIHtcblxuICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcblxufTtcbnZhciByc2luZ2xlVGFnID0gKCAvXjwoW2Etel1bXlxcL1xcMD46XFx4MjBcXHRcXHJcXG5cXGZdKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcLz8+KD86PFxcL1xcMT58KSQvaSApO1xuXG5cblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGlzRnVuY3Rpb24oIHF1YWxpZmllciApICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIFNpbmdsZSBlbGVtZW50XG5cdGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBBcnJheWxpa2Ugb2YgZWxlbWVudHMgKGpRdWVyeSwgYXJndW1lbnRzLCBBcnJheSlcblx0aWYgKCB0eXBlb2YgcXVhbGlmaWVyICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBGaWx0ZXJlZCBkaXJlY3RseSBmb3IgYm90aCBzaW1wbGUgYW5kIGNvbXBsZXggc2VsZWN0b3JzXG5cdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdGlmICggZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHR9ICkgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBpLCByZXQsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeSggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSApICk7XG5cdFx0fVxuXG5cdFx0cmV0ID0gdGhpcy5wdXNoU3RhY2soIFtdICk7XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIHJldCApIDogcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIGZhbHNlICkgKTtcblx0fSxcblx0bm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlICkgKTtcblx0fSxcblx0aXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gISF3aW5ub3coXG5cdFx0XHR0aGlzLFxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgcG9zaXRpb25hbC9yZWxhdGl2ZSBzZWxlY3RvciwgY2hlY2sgbWVtYmVyc2hpcCBpbiB0aGUgcmV0dXJuZWQgc2V0XG5cdFx0XHQvLyBzbyAkKFwicDpmaXJzdFwiKS5pcyhcInA6bGFzdFwiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gXCJwXCIuXG5cdFx0XHR0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvciApIDpcblx0XHRcdFx0c2VsZWN0b3IgfHwgW10sXG5cdFx0XHRmYWxzZVxuXHRcdCkubGVuZ3RoO1xuXHR9XG59ICk7XG5cblxuLy8gSW5pdGlhbGl6ZSBhIGpRdWVyeSBvYmplY3RcblxuXG4vLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudClcbnZhciByb290alF1ZXJ5LFxuXG5cdC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG5cdC8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSlcblx0Ly8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG5cdC8vIFNob3J0Y3V0IHNpbXBsZSAjaWQgY2FzZSBmb3Igc3BlZWRcblx0cnF1aWNrRXhwciA9IC9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSspKSQvLFxuXG5cdGluaXQgPSBqUXVlcnkuZm4uaW5pdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcm9vdCApIHtcblx0XHR2YXIgbWF0Y2gsIGVsZW07XG5cblx0XHQvLyBIQU5ETEU6ICQoXCJcIiksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSlcblx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8vIE1ldGhvZCBpbml0KCkgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeVxuXHRcdC8vIHNvIG1pZ3JhdGUgY2FuIHN1cHBvcnQgalF1ZXJ5LnN1YiAoZ2gtMjEwMSlcblx0XHRyb290ID0gcm9vdCB8fCByb290alF1ZXJ5O1xuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclsgMCBdID09PSBcIjxcIiAmJlxuXHRcdFx0XHRzZWxlY3Rvclsgc2VsZWN0b3IubGVuZ3RoIC0gMSBdID09PSBcIj5cIiAmJlxuXHRcdFx0XHRzZWxlY3Rvci5sZW5ndGggPj0gMyApIHtcblxuXHRcdFx0XHQvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVja1xuXHRcdFx0XHRtYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWRcblx0XHRcdGlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwpIC0+ICQoYXJyYXkpXG5cdFx0XHRcdGlmICggbWF0Y2hbIDEgXSApIHtcblx0XHRcdFx0XHRjb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbIDAgXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWyAxIF0sXG5cdFx0XHRcdFx0XHRjb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IGRvY3VtZW50LFxuXHRcdFx0XHRcdFx0dHJ1ZVxuXHRcdFx0XHRcdCkgKTtcblxuXHRcdFx0XHRcdC8vIEhBTkRMRTogJChodG1sLCBwcm9wcylcblx0XHRcdFx0XHRpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCBtYXRjaCBpbiBjb250ZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbIDIgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0dGhpc1sgMCBdID0gZWxlbTtcblx0XHRcdFx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3QgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzWyAwIF0gPSBzZWxlY3Rvcjtcblx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0Ly8gSEFORExFOiAkKGZ1bmN0aW9uKVxuXHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdH0gZWxzZSBpZiAoIGlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRyZXR1cm4gcm9vdC5yZWFkeSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0cm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRzZWxlY3RvciggalF1ZXJ5ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoIHNlbGVjdG9yLCB0aGlzICk7XG5cdH07XG5cbi8vIEdpdmUgdGhlIGluaXQgZnVuY3Rpb24gdGhlIGpRdWVyeSBwcm90b3R5cGUgZm9yIGxhdGVyIGluc3RhbnRpYXRpb25cbmluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xuXG4vLyBJbml0aWFsaXplIGNlbnRyYWwgcmVmZXJlbmNlXG5yb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApO1xuXG5cbnZhciBycGFyZW50c3ByZXYgPSAvXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxcblxuXHQvLyBNZXRob2RzIGd1YXJhbnRlZWQgdG8gcHJvZHVjZSBhIHVuaXF1ZSBzZXQgd2hlbiBzdGFydGluZyBmcm9tIGEgdW5pcXVlIHNldFxuXHRndWFyYW50ZWVkVW5pcXVlID0ge1xuXHRcdGNoaWxkcmVuOiB0cnVlLFxuXHRcdGNvbnRlbnRzOiB0cnVlLFxuXHRcdG5leHQ6IHRydWUsXG5cdFx0cHJldjogdHJ1ZVxuXHR9O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1sgaSBdICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0Y2xvc2VzdDogZnVuY3Rpb24oIHNlbGVjdG9ycywgY29udGV4dCApIHtcblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRtYXRjaGVkID0gW10sXG5cdFx0XHR0YXJnZXRzID0gdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiAmJiBqUXVlcnkoIHNlbGVjdG9ycyApO1xuXG5cdFx0Ly8gUG9zaXRpb25hbCBzZWxlY3RvcnMgbmV2ZXIgbWF0Y2gsIHNpbmNlIHRoZXJlJ3Mgbm8gX3NlbGVjdGlvbl8gY29udGV4dFxuXHRcdGlmICggIXJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgKSB7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA8IDExICYmICggdGFyZ2V0cyA/XG5cdFx0XHRcdFx0XHR0YXJnZXRzLmluZGV4KCBjdXIgKSA+IC0xIDpcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcGFzcyBub24tZWxlbWVudHMgdG8gU2l6emxlXG5cdFx0XHRcdFx0XHRjdXIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7XG5cblx0XHRcdFx0XHRcdG1hdGNoZWQucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQubGVuZ3RoID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApXG5cdFx0XHQpXG5cdFx0KTtcblx0fSxcblxuXHRhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cblx0XHRcdHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoIHNlbGVjdG9yIClcblx0XHQpO1xuXHR9XG59ICk7XG5cbmZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkge1xuXHR3aGlsZSAoICggY3VyID0gY3VyWyBkaXIgXSApICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApIHt9XG5cdHJldHVybiBjdXI7XG59XG5cbmpRdWVyeS5lYWNoKCB7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuXHR9LFxuXHRwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBfaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgX2ksIHVudGlsICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgX2ksIHVudGlsICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZ3MoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdGlmICggZWxlbS5jb250ZW50RG9jdW1lbnQgIT0gbnVsbCAmJlxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMStcblx0XHRcdC8vIDxvYmplY3Q+IGVsZW1lbnRzIHdpdGggbm8gYGRhdGFgIGF0dHJpYnV0ZSBoYXMgYW4gb2JqZWN0XG5cdFx0XHQvLyBgY29udGVudERvY3VtZW50YCB3aXRoIGEgYG51bGxgIHByb3RvdHlwZS5cblx0XHRcdGdldFByb3RvKCBlbGVtLmNvbnRlbnREb2N1bWVudCApICkge1xuXG5cdFx0XHRyZXR1cm4gZWxlbS5jb250ZW50RG9jdW1lbnQ7XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHksIGlPUyA3IG9ubHksIEFuZHJvaWQgQnJvd3NlciA8PTQuMyBvbmx5XG5cdFx0Ly8gVHJlYXQgdGhlIHRlbXBsYXRlIGVsZW1lbnQgYXMgYSByZWd1bGFyIG9uZSBpbiBicm93c2VycyB0aGF0XG5cdFx0Ly8gZG9uJ3Qgc3VwcG9ydCBpdC5cblx0XHRpZiAoIG5vZGVOYW1lKCBlbGVtLCBcInRlbXBsYXRlXCIgKSApIHtcblx0XHRcdGVsZW0gPSBlbGVtLmNvbnRlbnQgfHwgZWxlbTtcblx0XHR9XG5cblx0XHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7XG5cdH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkge1xuXHRcdHZhciBtYXRjaGVkID0galF1ZXJ5Lm1hcCggdGhpcywgZm4sIHVudGlsICk7XG5cblx0XHRpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09IFwiVW50aWxcIiApIHtcblx0XHRcdHNlbGVjdG9yID0gdW50aWw7XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRtYXRjaGVkID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIG1hdGNoZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV2ZXJzZSBvcmRlciBmb3IgcGFyZW50cyogYW5kIHByZXYtZGVyaXZhdGl2ZXNcblx0XHRcdGlmICggcnBhcmVudHNwcmV2LnRlc3QoIG5hbWUgKSApIHtcblx0XHRcdFx0bWF0Y2hlZC5yZXZlcnNlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkICk7XG5cdH07XG59ICk7XG52YXIgcm5vdGh0bWx3aGl0ZSA9ICggL1teXFx4MjBcXHRcXHJcXG5cXGZdKy9nICk7XG5cblxuXG4vLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lc1xuZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHtcblx0dmFyIG9iamVjdCA9IHt9O1xuXHRqUXVlcnkuZWFjaCggb3B0aW9ucy5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0gKTtcblx0cmV0dXJuIG9iamVjdDtcbn1cblxuLypcbiAqIENyZWF0ZSBhIGNhbGxiYWNrIGxpc3QgdXNpbmcgdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICpcbiAqXHRvcHRpb25zOiBhbiBvcHRpb25hbCBsaXN0IG9mIHNwYWNlLXNlcGFyYXRlZCBvcHRpb25zIHRoYXQgd2lsbCBjaGFuZ2UgaG93XG4gKlx0XHRcdHRoZSBjYWxsYmFjayBsaXN0IGJlaGF2ZXMgb3IgYSBtb3JlIHRyYWRpdGlvbmFsIG9wdGlvbiBvYmplY3RcbiAqXG4gKiBCeSBkZWZhdWx0IGEgY2FsbGJhY2sgbGlzdCB3aWxsIGFjdCBsaWtlIGFuIGV2ZW50IGNhbGxiYWNrIGxpc3QgYW5kIGNhbiBiZVxuICogXCJmaXJlZFwiIG11bHRpcGxlIHRpbWVzLlxuICpcbiAqIFBvc3NpYmxlIG9wdGlvbnM6XG4gKlxuICpcdG9uY2U6XHRcdFx0d2lsbCBlbnN1cmUgdGhlIGNhbGxiYWNrIGxpc3QgY2FuIG9ubHkgYmUgZmlyZWQgb25jZSAobGlrZSBhIERlZmVycmVkKVxuICpcbiAqXHRtZW1vcnk6XHRcdFx0d2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZFxuICpcdFx0XHRcdFx0YWZ0ZXIgdGhlIGxpc3QgaGFzIGJlZW4gZmlyZWQgcmlnaHQgYXdheSB3aXRoIHRoZSBsYXRlc3QgXCJtZW1vcml6ZWRcIlxuICpcdFx0XHRcdFx0dmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdHVuaXF1ZTpcdFx0XHR3aWxsIGVuc3VyZSBhIGNhbGxiYWNrIGNhbiBvbmx5IGJlIGFkZGVkIG9uY2UgKG5vIGR1cGxpY2F0ZSBpbiB0aGUgbGlzdClcbiAqXG4gKlx0c3RvcE9uRmFsc2U6XHRpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2VcbiAqXG4gKi9cbmpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuXHQvLyBDb252ZXJ0IG9wdGlvbnMgZnJvbSBTdHJpbmctZm9ybWF0dGVkIHRvIE9iamVjdC1mb3JtYXR0ZWQgaWYgbmVlZGVkXG5cdC8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdClcblx0b3B0aW9ucyA9IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiID9cblx0XHRjcmVhdGVPcHRpb25zKCBvcHRpb25zICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcblx0XHRmaXJpbmcsXG5cblx0XHQvLyBMYXN0IGZpcmUgdmFsdWUgZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0c1xuXHRcdG1lbW9yeSxcblxuXHRcdC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IHdhcyBhbHJlYWR5IGZpcmVkXG5cdFx0ZmlyZWQsXG5cblx0XHQvLyBGbGFnIHRvIHByZXZlbnQgZmlyaW5nXG5cdFx0bG9ja2VkLFxuXG5cdFx0Ly8gQWN0dWFsIGNhbGxiYWNrIGxpc3Rcblx0XHRsaXN0ID0gW10sXG5cblx0XHQvLyBRdWV1ZSBvZiBleGVjdXRpb24gZGF0YSBmb3IgcmVwZWF0YWJsZSBsaXN0c1xuXHRcdHF1ZXVlID0gW10sXG5cblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSBhZGQvcmVtb3ZlIGFzIG5lZWRlZClcblx0XHRmaXJpbmdJbmRleCA9IC0xLFxuXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEVuZm9yY2Ugc2luZ2xlLWZpcmluZ1xuXHRcdFx0bG9ja2VkID0gbG9ja2VkIHx8IG9wdGlvbnMub25jZTtcblxuXHRcdFx0Ly8gRXhlY3V0ZSBjYWxsYmFja3MgZm9yIGFsbCBwZW5kaW5nIGV4ZWN1dGlvbnMsXG5cdFx0XHQvLyByZXNwZWN0aW5nIGZpcmluZ0luZGV4IG92ZXJyaWRlcyBhbmQgcnVudGltZSBjaGFuZ2VzXG5cdFx0XHRmaXJlZCA9IGZpcmluZyA9IHRydWU7XG5cdFx0XHRmb3IgKCA7IHF1ZXVlLmxlbmd0aDsgZmlyaW5nSW5kZXggPSAtMSApIHtcblx0XHRcdFx0bWVtb3J5ID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdFx0d2hpbGUgKCArK2ZpcmluZ0luZGV4IDwgbGlzdC5sZW5ndGggKSB7XG5cblx0XHRcdFx0XHQvLyBSdW4gY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBlYXJseSB0ZXJtaW5hdGlvblxuXHRcdFx0XHRcdGlmICggbGlzdFsgZmlyaW5nSW5kZXggXS5hcHBseSggbWVtb3J5WyAwIF0sIG1lbW9yeVsgMSBdICkgPT09IGZhbHNlICYmXG5cdFx0XHRcdFx0XHRvcHRpb25zLnN0b3BPbkZhbHNlICkge1xuXG5cdFx0XHRcdFx0XHQvLyBKdW1wIHRvIGVuZCBhbmQgZm9yZ2V0IHRoZSBkYXRhIHNvIC5hZGQgZG9lc24ndCByZS1maXJlXG5cdFx0XHRcdFx0XHRmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvcmdldCB0aGUgZGF0YSBpZiB3ZSdyZSBkb25lIHdpdGggaXRcblx0XHRcdGlmICggIW9wdGlvbnMubWVtb3J5ICkge1xuXHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cblx0XHRcdC8vIENsZWFuIHVwIGlmIHdlJ3JlIGRvbmUgZmlyaW5nIGZvciBnb29kXG5cdFx0XHRpZiAoIGxvY2tlZCApIHtcblxuXHRcdFx0XHQvLyBLZWVwIGFuIGVtcHR5IGxpc3QgaWYgd2UgaGF2ZSBkYXRhIGZvciBmdXR1cmUgYWRkIGNhbGxzXG5cdFx0XHRcdGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBbXTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIHRoaXMgb2JqZWN0IGlzIHNwZW50XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGlzdCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0Ly8gQWN0dWFsIENhbGxiYWNrcyBvYmplY3Rcblx0XHRzZWxmID0ge1xuXG5cdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRhZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIG1lbW9yeSBmcm9tIGEgcGFzdCBydW4sIHdlIHNob3VsZCBmaXJlIGFmdGVyIGFkZGluZ1xuXHRcdFx0XHRcdGlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoIC0gMTtcblx0XHRcdFx0XHRcdHF1ZXVlLnB1c2goIG1lbW9yeSApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdCggZnVuY3Rpb24gYWRkKCBhcmdzICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3MsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggaXNGdW5jdGlvbiggYXJnICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0b1R5cGUoIGFyZyApICE9PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSW5zcGVjdCByZWN1cnNpdmVseVxuXHRcdFx0XHRcdFx0XHRcdGFkZCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHR9ICkoIGFyZ3VtZW50cyApO1xuXG5cdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdHZhciBpbmRleDtcblx0XHRcdFx0XHR3aGlsZSAoICggaW5kZXggPSBqUXVlcnkuaW5BcnJheSggYXJnLCBsaXN0LCBpbmRleCApICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdGxpc3Quc3BsaWNlKCBpbmRleCwgMSApO1xuXG5cdFx0XHRcdFx0XHQvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXNcblx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdGZpcmluZ0luZGV4LS07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgYSBnaXZlbiBjYWxsYmFjayBpcyBpbiB0aGUgbGlzdC5cblx0XHRcdC8vIElmIG5vIGFyZ3VtZW50IGlzIGdpdmVuLCByZXR1cm4gd2hldGhlciBvciBub3QgbGlzdCBoYXMgY2FsbGJhY2tzIGF0dGFjaGVkLlxuXHRcdFx0aGFzOiBmdW5jdGlvbiggZm4gKSB7XG5cdFx0XHRcdHJldHVybiBmbiA/XG5cdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6XG5cdFx0XHRcdFx0bGlzdC5sZW5ndGggPiAwO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBjYWxsYmFja3MgZnJvbSB0aGUgbGlzdFxuXHRcdFx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRGlzYWJsZSAuZmlyZSBhbmQgLmFkZFxuXHRcdFx0Ly8gQWJvcnQgYW55IGN1cnJlbnQvcGVuZGluZyBleGVjdXRpb25zXG5cdFx0XHQvLyBDbGVhciBhbGwgY2FsbGJhY2tzIGFuZCB2YWx1ZXNcblx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsb2NrZWQgPSBxdWV1ZSA9IFtdO1xuXHRcdFx0XHRsaXN0ID0gbWVtb3J5ID0gXCJcIjtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEaXNhYmxlIC5maXJlXG5cdFx0XHQvLyBBbHNvIGRpc2FibGUgLmFkZCB1bmxlc3Mgd2UgaGF2ZSBtZW1vcnkgKHNpbmNlIGl0IHdvdWxkIGhhdmUgbm8gZWZmZWN0KVxuXHRcdFx0Ly8gQWJvcnQgYW55IHBlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdGlmICggIW1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGxvY2tlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWxvY2tlZDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHNcblx0XHRcdGZpcmVXaXRoOiBmdW5jdGlvbiggY29udGV4dCwgYXJncyApIHtcblx0XHRcdFx0aWYgKCAhbG9ja2VkICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0cXVldWUucHVzaCggYXJncyApO1xuXHRcdFx0XHRcdGlmICggIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDYWxsIGFsbCB0aGUgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuZmlyZVdpdGgoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgdGhlIGNhbGxiYWNrcyBoYXZlIGFscmVhZHkgYmVlbiBjYWxsZWQgYXQgbGVhc3Qgb25jZVxuXHRcdFx0ZmlyZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gISFmaXJlZDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdHJldHVybiBzZWxmO1xufTtcblxuXG5mdW5jdGlvbiBJZGVudGl0eSggdiApIHtcblx0cmV0dXJuIHY7XG59XG5mdW5jdGlvbiBUaHJvd2VyKCBleCApIHtcblx0dGhyb3cgZXg7XG59XG5cbmZ1bmN0aW9uIGFkb3B0VmFsdWUoIHZhbHVlLCByZXNvbHZlLCByZWplY3QsIG5vVmFsdWUgKSB7XG5cdHZhciBtZXRob2Q7XG5cblx0dHJ5IHtcblxuXHRcdC8vIENoZWNrIGZvciBwcm9taXNlIGFzcGVjdCBmaXJzdCB0byBwcml2aWxlZ2Ugc3luY2hyb25vdXMgYmVoYXZpb3Jcblx0XHRpZiAoIHZhbHVlICYmIGlzRnVuY3Rpb24oICggbWV0aG9kID0gdmFsdWUucHJvbWlzZSApICkgKSB7XG5cdFx0XHRtZXRob2QuY2FsbCggdmFsdWUgKS5kb25lKCByZXNvbHZlICkuZmFpbCggcmVqZWN0ICk7XG5cblx0XHQvLyBPdGhlciB0aGVuYWJsZXNcblx0XHR9IGVsc2UgaWYgKCB2YWx1ZSAmJiBpc0Z1bmN0aW9uKCAoIG1ldGhvZCA9IHZhbHVlLnRoZW4gKSApICkge1xuXHRcdFx0bWV0aG9kLmNhbGwoIHZhbHVlLCByZXNvbHZlLCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIG5vbi10aGVuYWJsZXNcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBDb250cm9sIGByZXNvbHZlYCBhcmd1bWVudHMgYnkgbGV0dGluZyBBcnJheSNzbGljZSBjYXN0IGJvb2xlYW4gYG5vVmFsdWVgIHRvIGludGVnZXI6XG5cdFx0XHQvLyAqIGZhbHNlOiBbIHZhbHVlIF0uc2xpY2UoIDAgKSA9PiByZXNvbHZlKCB2YWx1ZSApXG5cdFx0XHQvLyAqIHRydWU6IFsgdmFsdWUgXS5zbGljZSggMSApID0+IHJlc29sdmUoKVxuXHRcdFx0cmVzb2x2ZS5hcHBseSggdW5kZWZpbmVkLCBbIHZhbHVlIF0uc2xpY2UoIG5vVmFsdWUgKSApO1xuXHRcdH1cblxuXHQvLyBGb3IgUHJvbWlzZXMvQSssIGNvbnZlcnQgZXhjZXB0aW9ucyBpbnRvIHJlamVjdGlvbnNcblx0Ly8gU2luY2UgalF1ZXJ5LndoZW4gZG9lc24ndCB1bndyYXAgdGhlbmFibGVzLCB3ZSBjYW4gc2tpcCB0aGUgZXh0cmEgY2hlY2tzIGFwcGVhcmluZyBpblxuXHQvLyBEZWZlcnJlZCN0aGVuIHRvIGNvbmRpdGlvbmFsbHkgc3VwcHJlc3MgcmVqZWN0aW9uLlxuXHR9IGNhdGNoICggdmFsdWUgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCBvbmx5XG5cdFx0Ly8gU3RyaWN0IG1vZGUgZnVuY3Rpb25zIGludm9rZWQgd2l0aG91dCAuY2FsbC8uYXBwbHkgZ2V0IGdsb2JhbC1vYmplY3QgY29udGV4dFxuXHRcdHJlamVjdC5hcHBseSggdW5kZWZpbmVkLCBbIHZhbHVlIF0gKTtcblx0fVxufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0RGVmZXJyZWQ6IGZ1bmN0aW9uKCBmdW5jICkge1xuXHRcdHZhciB0dXBsZXMgPSBbXG5cblx0XHRcdFx0Ly8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGNhbGxiYWNrcyxcblx0XHRcdFx0Ly8gLi4uIC50aGVuIGhhbmRsZXJzLCBhcmd1bWVudCBpbmRleCwgW2ZpbmFsIHN0YXRlXVxuXHRcdFx0XHRbIFwibm90aWZ5XCIsIFwicHJvZ3Jlc3NcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSwgMiBdLFxuXHRcdFx0XHRbIFwicmVzb2x2ZVwiLCBcImRvbmVcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksIDAsIFwicmVzb2x2ZWRcIiBdLFxuXHRcdFx0XHRbIFwicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgMSwgXCJyZWplY3RlZFwiIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0XCJjYXRjaFwiOiBmdW5jdGlvbiggZm4gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2UudGhlbiggbnVsbCwgZm4gKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBLZWVwIHBpcGUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRcdHBpcGU6IGZ1bmN0aW9uKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLyApIHtcblx0XHRcdFx0XHR2YXIgZm5zID0gYXJndW1lbnRzO1xuXG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIF9pLCB0dXBsZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBNYXAgdHVwbGVzIChwcm9ncmVzcywgZG9uZSwgZmFpbCkgdG8gYXJndW1lbnRzIChkb25lLCBmYWlsLCBwcm9ncmVzcylcblx0XHRcdFx0XHRcdFx0dmFyIGZuID0gaXNGdW5jdGlvbiggZm5zWyB0dXBsZVsgNCBdIF0gKSAmJiBmbnNbIHR1cGxlWyA0IF0gXTtcblxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5wcm9ncmVzcyhmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5ub3RpZnkgfSlcblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLmZhaWwoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVqZWN0IH0pXG5cdFx0XHRcdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMSBdIF0oIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkICYmIGlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhaWwoIG5ld0RlZmVyLnJlamVjdCApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0Zm5zID0gbnVsbDtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aGVuOiBmdW5jdGlvbiggb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdFx0dmFyIG1heERlcHRoID0gMDtcblx0XHRcdFx0XHRmdW5jdGlvbiByZXNvbHZlKCBkZXB0aCwgZGVmZXJyZWQsIGhhbmRsZXIsIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdFx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzLFxuXHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3cgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCwgdGhlbjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjNcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU5XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgZG91YmxlLXJlc29sdXRpb24gYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggPCBtYXhEZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCA9IGhhbmRsZXIuYXBwbHkoIHRoYXQsIGFyZ3MgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNDhcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgPT09IGRlZmVycmVkLnByb21pc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvciggXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9ucyAyLjMuMy4xLCAzLjVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC03NVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmV0cmlldmUgYHRoZW5gIG9ubHkgb25jZVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhlbiA9IHJldHVybmVkICYmXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuNFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02NFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGNoZWNrIG9iamVjdHMgYW5kIGZ1bmN0aW9ucyBmb3IgdGhlbmFiaWxpdHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCB0eXBlb2YgcmV0dXJuZWQgPT09IFwib2JqZWN0XCIgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgcmV0dXJuZWQgPT09IFwiZnVuY3Rpb25cIiApICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhIHJldHVybmVkIHRoZW5hYmxlXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24oIHRoZW4gKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTcGVjaWFsIHByb2Nlc3NvcnMgKG5vdGlmeSkganVzdCB3YWl0IGZvciByZXNvbHV0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGVuLmNhbGwoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgVGhyb3dlciwgc3BlY2lhbCApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBOb3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgYWxzbyBob29rIGludG8gcHJvZ3Jlc3Ncblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBkaXNyZWdhcmQgb2xkZXIgcmVzb2x1dGlvbiB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXhEZXB0aCsrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGggKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGFsbCBvdGhlciByZXR1cm5lZCB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmQgbXVsdGlwbGUgdmFsdWVzIChub24tc3BlYyBiZWhhdmlvcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBoYW5kbGVyICE9PSBJZGVudGl0eSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGF0ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIHJldHVybmVkIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQcm9jZXNzIHRoZSB2YWx1ZShzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZhdWx0IHByb2Nlc3MgaXMgcmVzb2x2ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoIHNwZWNpYWwgfHwgZGVmZXJyZWQucmVzb2x2ZVdpdGggKSggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IG5vcm1hbCBwcm9jZXNzb3JzIChyZXNvbHZlKSBjYXRjaCBhbmQgcmVqZWN0IGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzID0gc3BlY2lhbCA/XG5cdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93IDpcblx0XHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3coKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2soIGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByb2Nlc3Muc3RhY2tUcmFjZSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy40LjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02MVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElnbm9yZSBwb3N0LXJlc29sdXRpb24gZXhjZXB0aW9uc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKyAxID49IG1heERlcHRoICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHN1YnN0aXR1dGUgaGFuZGxlcnMgcGFzcyBvbiBjb250ZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmQgbXVsdGlwbGUgdmFsdWVzIChub24tc3BlYyBiZWhhdmlvcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gVGhyb3dlciApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncyA9IFsgZSBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCB0aGF0LCBhcmdzICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4xXG5cdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU3XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlc29sdmUgcHJvbWlzZXMgaW1tZWRpYXRlbHkgdG8gZG9kZ2UgZmFsc2UgcmVqZWN0aW9uIGZyb21cblx0XHRcdFx0XHRcdFx0Ly8gc3Vic2VxdWVudCBlcnJvcnNcblx0XHRcdFx0XHRcdFx0aWYgKCBkZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzKCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDYWxsIGFuIG9wdGlvbmFsIGhvb2sgdG8gcmVjb3JkIHRoZSBzdGFjaywgaW4gY2FzZSBvZiBleGNlcHRpb25cblx0XHRcdFx0XHRcdFx0XHQvLyBzaW5jZSBpdCdzIG90aGVyd2lzZSBsb3N0IHdoZW4gZXhlY3V0aW9uIGdvZXMgYXN5bmNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgPSBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBwcm9jZXNzICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuXG5cdFx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uUHJvZ3Jlc3MgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvblByb2dyZXNzIDpcblx0XHRcdFx0XHRcdFx0XHRcdElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLm5vdGlmeVdpdGhcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmFkZCggLi4uIClcblx0XHRcdFx0XHRcdHR1cGxlc1sgMSBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0aXNGdW5jdGlvbiggb25GdWxmaWxsZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvbkZ1bGZpbGxlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDIgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uUmVqZWN0ZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvblJlamVjdGVkIDpcblx0XHRcdFx0XHRcdFx0XHRcdFRocm93ZXJcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWRcblx0XHRcdFx0Ly8gSWYgb2JqIGlzIHByb3ZpZGVkLCB0aGUgcHJvbWlzZSBhc3BlY3QgaXMgYWRkZWQgdG8gdGhlIG9iamVjdFxuXHRcdFx0XHRwcm9taXNlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0XHRcdHJldHVybiBvYmogIT0gbnVsbCA/IGpRdWVyeS5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlZmVycmVkID0ge307XG5cblx0XHQvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzXG5cdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0dmFyIGxpc3QgPSB0dXBsZVsgMiBdLFxuXHRcdFx0XHRzdGF0ZVN0cmluZyA9IHR1cGxlWyA1IF07XG5cblx0XHRcdC8vIHByb21pc2UucHJvZ3Jlc3MgPSBsaXN0LmFkZFxuXHRcdFx0Ly8gcHJvbWlzZS5kb25lID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZmFpbCA9IGxpc3QuYWRkXG5cdFx0XHRwcm9taXNlWyB0dXBsZVsgMSBdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChcblx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gc3RhdGUgPSBcInJlc29sdmVkXCIgKGkuZS4sIGZ1bGZpbGxlZClcblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZWplY3RlZFwiXG5cdFx0XHRcdFx0XHRzdGF0ZSA9IHN0YXRlU3RyaW5nO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyByZWplY3RlZF9jYWxsYmFja3MuZGlzYWJsZVxuXHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9jYWxsYmFja3MuZGlzYWJsZVxuXHRcdFx0XHRcdHR1cGxlc1sgMyAtIGkgXVsgMiBdLmRpc2FibGUsXG5cblx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5kaXNhYmxlXG5cdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDMgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfY2FsbGJhY2tzLmxvY2tcblx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMiBdLmxvY2ssXG5cblx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5sb2NrXG5cdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5sb2NrXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHByb2dyZXNzX2hhbmRsZXJzLmZpcmVcblx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5maXJlXG5cdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5maXJlXG5cdFx0XHRsaXN0LmFkZCggdHVwbGVbIDMgXS5maXJlICk7XG5cblx0XHRcdC8vIGRlZmVycmVkLm5vdGlmeSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5ub3RpZnlXaXRoKC4uLikgfVxuXHRcdFx0Ly8gZGVmZXJyZWQucmVzb2x2ZSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZXNvbHZlV2l0aCguLi4pIH1cblx0XHRcdC8vIGRlZmVycmVkLnJlamVjdCA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZWplY3RXaXRoKC4uLikgfVxuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gdW5kZWZpbmVkIDogdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gZGVmZXJyZWQubm90aWZ5V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdC8vIGRlZmVycmVkLnJlc29sdmVXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSApO1xuXG5cdFx0Ly8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlXG5cdFx0cHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXG5cdFx0Ly8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueVxuXHRcdGlmICggZnVuYyApIHtcblx0XHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGRvbmUhXG5cdFx0cmV0dXJuIGRlZmVycmVkO1xuXHR9LFxuXG5cdC8vIERlZmVycmVkIGhlbHBlclxuXHR3aGVuOiBmdW5jdGlvbiggc2luZ2xlVmFsdWUgKSB7XG5cdFx0dmFyXG5cblx0XHRcdC8vIGNvdW50IG9mIHVuY29tcGxldGVkIHN1Ym9yZGluYXRlc1xuXHRcdFx0cmVtYWluaW5nID0gYXJndW1lbnRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gY291bnQgb2YgdW5wcm9jZXNzZWQgYXJndW1lbnRzXG5cdFx0XHRpID0gcmVtYWluaW5nLFxuXG5cdFx0XHQvLyBzdWJvcmRpbmF0ZSBmdWxmaWxsbWVudCBkYXRhXG5cdFx0XHRyZXNvbHZlQ29udGV4dHMgPSBBcnJheSggaSApLFxuXHRcdFx0cmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkXG5cdFx0XHRtYXN0ZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gc3Vib3JkaW5hdGUgY2FsbGJhY2sgZmFjdG9yeVxuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJlc29sdmVDb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7XG5cdFx0XHRcdFx0aWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0bWFzdGVyLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0Ly8gU2luZ2xlLSBhbmQgZW1wdHkgYXJndW1lbnRzIGFyZSBhZG9wdGVkIGxpa2UgUHJvbWlzZS5yZXNvbHZlXG5cdFx0aWYgKCByZW1haW5pbmcgPD0gMSApIHtcblx0XHRcdGFkb3B0VmFsdWUoIHNpbmdsZVZhbHVlLCBtYXN0ZXIuZG9uZSggdXBkYXRlRnVuYyggaSApICkucmVzb2x2ZSwgbWFzdGVyLnJlamVjdCxcblx0XHRcdFx0IXJlbWFpbmluZyApO1xuXG5cdFx0XHQvLyBVc2UgLnRoZW4oKSB0byB1bndyYXAgc2Vjb25kYXJ5IHRoZW5hYmxlcyAoY2YuIGdoLTMwMDApXG5cdFx0XHRpZiAoIG1hc3Rlci5zdGF0ZSgpID09PSBcInBlbmRpbmdcIiB8fFxuXHRcdFx0XHRpc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgcmVzb2x2ZVZhbHVlc1sgaSBdLnRoZW4gKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gbWFzdGVyLnRoZW4oKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBNdWx0aXBsZSBhcmd1bWVudHMgYXJlIGFnZ3JlZ2F0ZWQgbGlrZSBQcm9taXNlLmFsbCBhcnJheSBlbGVtZW50c1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0YWRvcHRWYWx1ZSggcmVzb2x2ZVZhbHVlc1sgaSBdLCB1cGRhdGVGdW5jKCBpICksIG1hc3Rlci5yZWplY3QgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWFzdGVyLnByb21pc2UoKTtcblx0fVxufSApO1xuXG5cbi8vIFRoZXNlIHVzdWFsbHkgaW5kaWNhdGUgYSBwcm9ncmFtbWVyIG1pc3Rha2UgZHVyaW5nIGRldmVsb3BtZW50LFxuLy8gd2FybiBhYm91dCB0aGVtIEFTQVAgcmF0aGVyIHRoYW4gc3dhbGxvd2luZyB0aGVtIGJ5IGRlZmF1bHQuXG52YXIgcmVycm9yTmFtZXMgPSAvXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztcblxualF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgPSBmdW5jdGlvbiggZXJyb3IsIHN0YWNrICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDggLSA5IG9ubHlcblx0Ly8gQ29uc29sZSBleGlzdHMgd2hlbiBkZXYgdG9vbHMgYXJlIG9wZW4sIHdoaWNoIGNhbiBoYXBwZW4gYXQgYW55IHRpbWVcblx0aWYgKCB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS53YXJuICYmIGVycm9yICYmIHJlcnJvck5hbWVzLnRlc3QoIGVycm9yLm5hbWUgKSApIHtcblx0XHR3aW5kb3cuY29uc29sZS53YXJuKCBcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiICsgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2ssIHN0YWNrICk7XG5cdH1cbn07XG5cblxuXG5cbmpRdWVyeS5yZWFkeUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCBlcnJvciApIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdHRocm93IGVycm9yO1xuXHR9ICk7XG59O1xuXG5cblxuXG4vLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbnZhciByZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTtcblxualF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkge1xuXG5cdHJlYWR5TGlzdFxuXHRcdC50aGVuKCBmbiApXG5cblx0XHQvLyBXcmFwIGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiBpbiBhIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIGxvb2t1cFxuXHRcdC8vIGhhcHBlbnMgYXQgdGhlIHRpbWUgb2YgZXJyb3IgaGFuZGxpbmcgaW5zdGVhZCBvZiBjYWxsYmFja1xuXHRcdC8vIHJlZ2lzdHJhdGlvbi5cblx0XHQuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHtcblx0XHRcdGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiggZXJyb3IgKTtcblx0XHR9ICk7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0aXNSZWFkeTogZmFsc2UsXG5cblx0Ly8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuXHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRyZWFkeVdhaXQ6IDEsXG5cblx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7XG5cblx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0aWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG5cdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXG5cdFx0Ly8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmVcblx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlXG5cdFx0cmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5yZWFkeS50aGVuID0gcmVhZHlMaXN0LnRoZW47XG5cbi8vIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kXG5mdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbi8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkXG4vLyBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDEwIG9ubHlcbi8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzIFwiaW50ZXJhY3RpdmVcIiB0b28gc29vblxuaWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHxcblx0KCBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIiAmJiAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICkgKSB7XG5cblx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxufSBlbHNlIHtcblxuXHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblxuXHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xufVxuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGVsZW1zLmxlbmd0aCxcblx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cblx0Ly8gU2V0cyBtYW55IHZhbHVlc1xuXHRpZiAoIHRvVHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGFjY2VzcyggZWxlbXMsIGZuLCBpLCBrZXlbIGkgXSwgdHJ1ZSwgZW1wdHlHZXQsIHJhdyApO1xuXHRcdH1cblxuXHQvLyBTZXRzIG9uZSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cblx0XHRpZiAoICFpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cblx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0aWYgKCByYXcgKSB7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRmbiA9IG51bGw7XG5cblx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1bGsgPSBmbjtcblx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwgX2tleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbihcblx0XHRcdFx0XHRlbGVtc1sgaSBdLCBrZXksIHJhdyA/XG5cdFx0XHRcdFx0dmFsdWUgOlxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBjaGFpbmFibGUgKSB7XG5cdFx0cmV0dXJuIGVsZW1zO1xuXHR9XG5cblx0Ly8gR2V0c1xuXHRpZiAoIGJ1bGsgKSB7XG5cdFx0cmV0dXJuIGZuLmNhbGwoIGVsZW1zICk7XG5cdH1cblxuXHRyZXR1cm4gbGVuID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xudmFyIHJtc1ByZWZpeCA9IC9eLW1zLS8sXG5cdHJkYXNoQWxwaGEgPSAvLShbYS16XSkvZztcblxuLy8gVXNlZCBieSBjYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5mdW5jdGlvbiBmY2FtZWxDYXNlKCBfYWxsLCBsZXR0ZXIgKSB7XG5cdHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbn1cblxuLy8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlc1xuLy8gU3VwcG9ydDogSUUgPD05IC0gMTEsIEVkZ2UgMTIgLSAxNVxuLy8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuZnVuY3Rpb24gY2FtZWxDYXNlKCBzdHJpbmcgKSB7XG5cdHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xufVxudmFyIGFjY2VwdERhdGEgPSBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0Ly8gQWNjZXB0cyBvbmx5OlxuXHQvLyAgLSBOb2RlXG5cdC8vICAgIC0gTm9kZS5FTEVNRU5UX05PREVcblx0Ly8gICAgLSBOb2RlLkRPQ1VNRU5UX05PREVcblx0Ly8gIC0gT2JqZWN0XG5cdC8vICAgIC0gQW55XG5cdHJldHVybiBvd25lci5ub2RlVHlwZSA9PT0gMSB8fCBvd25lci5ub2RlVHlwZSA9PT0gOSB8fCAhKCArb3duZXIubm9kZVR5cGUgKTtcbn07XG5cblxuXG5cbmZ1bmN0aW9uIERhdGEoKSB7XG5cdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcbn1cblxuRGF0YS51aWQgPSAxO1xuXG5EYXRhLnByb3RvdHlwZSA9IHtcblxuXHRjYWNoZTogZnVuY3Rpb24oIG93bmVyICkge1xuXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIG93bmVyIG9iamVjdCBhbHJlYWR5IGhhcyBhIGNhY2hlXG5cdFx0dmFyIHZhbHVlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXG5cdFx0Ly8gSWYgbm90LCBjcmVhdGUgb25lXG5cdFx0aWYgKCAhdmFsdWUgKSB7XG5cdFx0XHR2YWx1ZSA9IHt9O1xuXG5cdFx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHRcdC8vIGJ1dCB3ZSBzaG91bGQgbm90LCBzZWUgIzgzMzUuXG5cdFx0XHQvLyBBbHdheXMgcmV0dXJuIGFuIGVtcHR5IG9iamVjdC5cblx0XHRcdGlmICggYWNjZXB0RGF0YSggb3duZXIgKSApIHtcblxuXHRcdFx0XHQvLyBJZiBpdCBpcyBhIG5vZGUgdW5saWtlbHkgdG8gYmUgc3RyaW5naWZ5LWVkIG9yIGxvb3BlZCBvdmVyXG5cdFx0XHRcdC8vIHVzZSBwbGFpbiBhc3NpZ25tZW50XG5cdFx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdID0gdmFsdWU7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHNlY3VyZSBpdCBpbiBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5XG5cdFx0XHRcdC8vIGNvbmZpZ3VyYWJsZSBtdXN0IGJlIHRydWUgdG8gYWxsb3cgdGhlIHByb3BlcnR5IHRvIGJlXG5cdFx0XHRcdC8vIGRlbGV0ZWQgd2hlbiBkYXRhIGlzIHJlbW92ZWRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIG93bmVyLCB0aGlzLmV4cGFuZG8sIHtcblx0XHRcdFx0XHRcdHZhbHVlOiB2YWx1ZSxcblx0XHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcblx0c2V0OiBmdW5jdGlvbiggb3duZXIsIGRhdGEsIHZhbHVlICkge1xuXHRcdHZhciBwcm9wLFxuXHRcdFx0Y2FjaGUgPSB0aGlzLmNhY2hlKCBvd25lciApO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCBrZXksIHZhbHVlIF0gYXJnc1xuXHRcdC8vIEFsd2F5cyB1c2UgY2FtZWxDYXNlIGtleSAoZ2gtMjI1Nylcblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Y2FjaGVbIGNhbWVsQ2FzZSggZGF0YSApIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gQ29weSB0aGUgcHJvcGVydGllcyBvbmUtYnktb25lIHRvIHRoZSBjYWNoZSBvYmplY3Rcblx0XHRcdGZvciAoIHByb3AgaW4gZGF0YSApIHtcblx0XHRcdFx0Y2FjaGVbIGNhbWVsQ2FzZSggcHJvcCApIF0gPSBkYXRhWyBwcm9wIF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjYWNoZTtcblx0fSxcblx0Z2V0OiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHRyZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcy5jYWNoZSggb3duZXIgKSA6XG5cblx0XHRcdC8vIEFsd2F5cyB1c2UgY2FtZWxDYXNlIGtleSAoZ2gtMjI1Nylcblx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSAmJiBvd25lclsgdGhpcy5leHBhbmRvIF1bIGNhbWVsQ2FzZSgga2V5ICkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cblx0XHQvLyBJbiBjYXNlcyB3aGVyZSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIE5vIGtleSB3YXMgc3BlY2lmaWVkXG5cdFx0Ly8gICAyLiBBIHN0cmluZyBrZXkgd2FzIHNwZWNpZmllZCwgYnV0IG5vIHZhbHVlIHByb3ZpZGVkXG5cdFx0Ly9cblx0XHQvLyBUYWtlIHRoZSBcInJlYWRcIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmVcblx0XHQvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0XG5cdFx0Ly8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleVxuXHRcdC8vXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHQoICgga2V5ICYmIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgKSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkICkgKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLmdldCggb3duZXIsIGtleSApO1xuXHRcdH1cblxuXHRcdC8vIFdoZW4gdGhlIGtleSBpcyBub3QgYSBzdHJpbmcsIG9yIGJvdGggYSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly8gYXJlIHNwZWNpZmllZCwgc2V0IG9yIGV4dGVuZCAoZXhpc3Rpbmcgb2JqZWN0cykgd2l0aCBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIEFuIG9iamVjdCBvZiBwcm9wZXJ0aWVzXG5cdFx0Ly8gICAyLiBBIGtleSBhbmQgdmFsdWVcblx0XHQvL1xuXHRcdHRoaXMuc2V0KCBvd25lciwga2V5LCB2YWx1ZSApO1xuXG5cdFx0Ly8gU2luY2UgdGhlIFwic2V0XCIgcGF0aCBjYW4gaGF2ZSB0d28gcG9zc2libGUgZW50cnkgcG9pbnRzXG5cdFx0Ly8gcmV0dXJuIHRoZSBleHBlY3RlZCBkYXRhIGJhc2VkIG9uIHdoaWNoIHBhdGggd2FzIHRha2VuWypdXG5cdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IGtleTtcblx0fSxcblx0cmVtb3ZlOiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHR2YXIgaSxcblx0XHRcdGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXG5cdFx0aWYgKCBjYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICgga2V5ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdC8vIFN1cHBvcnQgYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBrZXlzXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIGtleSApICkge1xuXG5cdFx0XHRcdC8vIElmIGtleSBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdlIGFsd2F5cyBzZXQgY2FtZWxDYXNlIGtleXMsIHNvIHJlbW92ZSB0aGF0LlxuXHRcdFx0XHRrZXkgPSBrZXkubWFwKCBjYW1lbENhc2UgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGtleSA9IGNhbWVsQ2FzZSgga2V5ICk7XG5cblx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIGNyZWF0ZSBhbiBhcnJheSBieSBtYXRjaGluZyBub24td2hpdGVzcGFjZVxuXHRcdFx0XHRrZXkgPSBrZXkgaW4gY2FjaGUgP1xuXHRcdFx0XHRcdFsga2V5IF0gOlxuXHRcdFx0XHRcdCgga2V5Lm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW10gKTtcblx0XHRcdH1cblxuXHRcdFx0aSA9IGtleS5sZW5ndGg7XG5cblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIGtleVsgaSBdIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIHRoZXJlJ3Mgbm8gbW9yZSBkYXRhXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fCBqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKSApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NVxuXHRcdFx0Ly8gV2Via2l0ICYgQmxpbmsgcGVyZm9ybWFuY2Ugc3VmZmVycyB3aGVuIGRlbGV0aW5nIHByb3BlcnRpZXNcblx0XHRcdC8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWRcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM3ODYwNyAoYnVnIHJlc3RyaWN0ZWQpXG5cdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWxldGUgb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHZhciBjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XHRyZXR1cm4gY2FjaGUgIT09IHVuZGVmaW5lZCAmJiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICk7XG5cdH1cbn07XG52YXIgZGF0YVByaXYgPSBuZXcgRGF0YSgpO1xuXG52YXIgZGF0YVVzZXIgPSBuZXcgRGF0YSgpO1xuXG5cblxuLy9cdEltcGxlbWVudGF0aW9uIFN1bW1hcnlcbi8vXG4vL1x0MS4gRW5mb3JjZSBBUEkgc3VyZmFjZSBhbmQgc2VtYW50aWMgY29tcGF0aWJpbGl0eSB3aXRoIDEuOS54IGJyYW5jaFxuLy9cdDIuIEltcHJvdmUgdGhlIG1vZHVsZSdzIG1haW50YWluYWJpbGl0eSBieSByZWR1Y2luZyB0aGUgc3RvcmFnZVxuLy9cdFx0cGF0aHMgdG8gYSBzaW5nbGUgbWVjaGFuaXNtLlxuLy9cdDMuIFVzZSB0aGUgc2FtZSBzaW5nbGUgbWVjaGFuaXNtIHRvIHN1cHBvcnQgXCJwcml2YXRlXCIgYW5kIFwidXNlclwiIGRhdGEuXG4vL1x0NC4gX05ldmVyXyBleHBvc2UgXCJwcml2YXRlXCIgZGF0YSB0byB1c2VyIGNvZGUgKFRPRE86IERyb3AgX2RhdGEsIF9yZW1vdmVEYXRhKVxuLy9cdDUuIEF2b2lkIGV4cG9zaW5nIGltcGxlbWVudGF0aW9uIGRldGFpbHMgb24gdXNlciBvYmplY3RzIChlZy4gZXhwYW5kbyBwcm9wZXJ0aWVzKVxuLy9cdDYuIFByb3ZpZGUgYSBjbGVhciBwYXRoIGZvciBpbXBsZW1lbnRhdGlvbiB1cGdyYWRlIHRvIFdlYWtNYXAgaW4gMjAxNFxuXG52YXIgcmJyYWNlID0gL14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFxuXHRybXVsdGlEYXNoID0gL1tBLVpdL2c7XG5cbmZ1bmN0aW9uIGdldERhdGEoIGRhdGEgKSB7XG5cdGlmICggZGF0YSA9PT0gXCJ0cnVlXCIgKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAoIGRhdGEgPT09IFwiZmFsc2VcIiApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAoIGRhdGEgPT09IFwibnVsbFwiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0aWYgKCBkYXRhID09PSArZGF0YSArIFwiXCIgKSB7XG5cdFx0cmV0dXJuICtkYXRhO1xuXHR9XG5cblx0aWYgKCByYnJhY2UudGVzdCggZGF0YSApICkge1xuXHRcdHJldHVybiBKU09OLnBhcnNlKCBkYXRhICk7XG5cdH1cblxuXHRyZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHtcblx0dmFyIG5hbWU7XG5cblx0Ly8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueVxuXHQvLyBkYXRhIGZyb20gdGhlIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGVcblx0aWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRuYW1lID0gXCJkYXRhLVwiICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsIFwiLSQmXCIgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGRhdGEgPSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApO1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRhdGEgPSBnZXREYXRhKCBkYXRhICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHt9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlclxuXHRcdFx0ZGF0YVVzZXIuc2V0KCBlbGVtLCBrZXksIGRhdGEgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aGFzRGF0YTogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRhdGFVc2VyLmhhc0RhdGEoIGVsZW0gKSB8fCBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFVc2VyLmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFVc2VyLnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9LFxuXG5cdC8vIFRPRE86IE5vdyB0aGF0IGFsbCBjYWxscyB0byBfZGF0YSBhbmQgX3JlbW92ZURhdGEgaGF2ZSBiZWVuIHJlcGxhY2VkXG5cdC8vIHdpdGggZGlyZWN0IGNhbGxzIHRvIGRhdGFQcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdF9yZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSApO1xuXG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhZGF0YVByaXYuZ2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiICkgKSB7XG5cdFx0XHRcdFx0aSA9IGF0dHJzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgMTEgb25seVxuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0gY2FtZWxDYXNlKCBuYW1lLnNsaWNlKCA1ICkgKTtcblx0XHRcdFx0XHRcdFx0XHRkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZGF0YTtcblxuXHRcdFx0Ly8gVGhlIGNhbGxpbmcgalF1ZXJ5IG9iamVjdCAoZWxlbWVudCBtYXRjaGVzKSBpcyBub3QgZW1wdHlcblx0XHRcdC8vIChhbmQgdGhlcmVmb3JlIGhhcyBhbiBlbGVtZW50IGFwcGVhcnMgYXQgdGhpc1sgMCBdKSBhbmQgdGhlXG5cdFx0XHQvLyBgdmFsdWVgIHBhcmFtZXRlciB3YXMgbm90IHVuZGVmaW5lZC4gQW4gZW1wdHkgalF1ZXJ5IG9iamVjdFxuXHRcdFx0Ly8gd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgZm9yIGVsZW0gPSB0aGlzWyAwIF0gd2hpY2ggd2lsbFxuXHRcdFx0Ly8gdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFuIGF0dGVtcHQgdG8gcmVhZCBhIGRhdGEgY2FjaGUgaXMgbWFkZS5cblx0XHRcdGlmICggZWxlbSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gVGhlIGtleSB3aWxsIGFsd2F5cyBiZSBjYW1lbENhc2VkIGluIERhdGFcblx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSwga2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGtleSApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdlIHRyaWVkIHJlYWxseSBoYXJkLCBidXQgdGhlIGRhdGEgZG9lc24ndCBleGlzdC5cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgdGhlIGRhdGEuLi5cblx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gV2UgYWx3YXlzIHN0b3JlIHRoZSBjYW1lbENhc2VkIGtleVxuXHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSwgdmFsdWUgKTtcblx0XHRcdH0gKTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGF0YVVzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgcXVldWU7XG5cblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHR0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuXHRcdFx0cXVldWUgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0Ly8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cFxuXHRcdFx0aWYgKCBkYXRhICkge1xuXHRcdFx0XHRpZiAoICFxdWV1ZSB8fCBBcnJheS5pc0FycmF5KCBkYXRhICkgKSB7XG5cdFx0XHRcdFx0cXVldWUgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEgKSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHF1ZXVlLnB1c2goIGRhdGEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHF1ZXVlIHx8IFtdO1xuXHRcdH1cblx0fSxcblxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSxcblx0XHRcdHN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLFxuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpLFxuXHRcdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSxcblx0XHRcdG5leHQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIGVsZW0sIHR5cGUgKTtcblx0XHRcdH07XG5cblx0XHQvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsXG5cdFx0aWYgKCBmbiA9PT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRzdGFydExlbmd0aC0tO1xuXHRcdH1cblxuXHRcdGlmICggZm4gKSB7XG5cblx0XHRcdC8vIEFkZCBhIHByb2dyZXNzIHNlbnRpbmVsIHRvIHByZXZlbnQgdGhlIGZ4IHF1ZXVlIGZyb20gYmVpbmdcblx0XHRcdC8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWRcblx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICkge1xuXHRcdFx0XHRxdWV1ZS51bnNoaWZ0KCBcImlucHJvZ3Jlc3NcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDbGVhciB1cCB0aGUgbGFzdCBxdWV1ZSBzdG9wIGZ1bmN0aW9uXG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdGZuLmNhbGwoIGVsZW0sIG5leHQsIGhvb2tzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIE5vdCBwdWJsaWMgLSBnZW5lcmF0ZSBhIHF1ZXVlSG9va3Mgb2JqZWN0LCBvciByZXR1cm4gdGhlIGN1cnJlbnQgb25lXG5cdF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHR2YXIga2V5ID0gdHlwZSArIFwicXVldWVIb29rc1wiO1xuXHRcdHJldHVybiBkYXRhUHJpdi5nZXQoIGVsZW0sIGtleSApIHx8IGRhdGFQcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICkuYWRkKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBbIHR5cGUgKyBcInF1ZXVlXCIsIGtleSBdICk7XG5cdFx0XHR9IClcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzIDpcblx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWyAwIF0gIT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdH0gKTtcblx0fSxcblx0Y2xlYXJRdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHR9LFxuXG5cdC8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGVcblx0Ly8gYXJlIGVtcHRpZWQgKGZ4IGlzIHRoZSB0eXBlIGJ5IGRlZmF1bHQpXG5cdHByb21pc2U6IGZ1bmN0aW9uKCB0eXBlLCBvYmogKSB7XG5cdFx0dmFyIHRtcCxcblx0XHRcdGNvdW50ID0gMSxcblx0XHRcdGRlZmVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRlbGVtZW50cyA9IHRoaXMsXG5cdFx0XHRpID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRyZXNvbHZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggISggLS1jb3VudCApICkge1xuXHRcdFx0XHRcdGRlZmVyLnJlc29sdmVXaXRoKCBlbGVtZW50cywgWyBlbGVtZW50cyBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0b2JqID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG1wID0gZGF0YVByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59ICk7XG52YXIgcG51bSA9ICggL1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8gKS5zb3VyY2U7XG5cbnZhciByY3NzTnVtID0gbmV3IFJlZ0V4cCggXCJeKD86KFsrLV0pPXwpKFwiICsgcG51bSArIFwiKShbYS16JV0qKSRcIiwgXCJpXCIgKTtcblxuXG52YXIgY3NzRXhwYW5kID0gWyBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiIF07XG5cbnZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cblxuXG5cdHZhciBpc0F0dGFjaGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblx0XHR9LFxuXHRcdGNvbXBvc2VkID0geyBjb21wb3NlZDogdHJ1ZSB9O1xuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSssIEVkZ2UgMTIgLSAxOCssIGlPUyAxMC4wIC0gMTAuMiBvbmx5XG5cdC8vIENoZWNrIGF0dGFjaG1lbnQgYWNyb3NzIHNoYWRvdyBET00gYm91bmRhcmllcyB3aGVuIHBvc3NpYmxlIChnaC0zNTA0KVxuXHQvLyBTdXBwb3J0OiBpT1MgMTAuMC0xMC4yIG9ubHlcblx0Ly8gRWFybHkgaU9TIDEwIHZlcnNpb25zIHN1cHBvcnQgYGF0dGFjaFNoYWRvd2AgYnV0IG5vdCBgZ2V0Um9vdE5vZGVgLFxuXHQvLyBsZWFkaW5nIHRvIGVycm9ycy4gV2UgbmVlZCB0byBjaGVjayBmb3IgYGdldFJvb3ROb2RlYC5cblx0aWYgKCBkb2N1bWVudEVsZW1lbnQuZ2V0Um9vdE5vZGUgKSB7XG5cdFx0aXNBdHRhY2hlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgfHxcblx0XHRcdFx0ZWxlbS5nZXRSb290Tm9kZSggY29tcG9zZWQgKSA9PT0gZWxlbS5vd25lckRvY3VtZW50O1xuXHRcdH07XG5cdH1cbnZhciBpc0hpZGRlbldpdGhpblRyZWUgPSBmdW5jdGlvbiggZWxlbSwgZWwgKSB7XG5cblx0XHQvLyBpc0hpZGRlbldpdGhpblRyZWUgbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjtcblx0XHQvLyBpbiB0aGF0IGNhc2UsIGVsZW1lbnQgd2lsbCBiZSBzZWNvbmQgYXJndW1lbnRcblx0XHRlbGVtID0gZWwgfHwgZWxlbTtcblxuXHRcdC8vIElubGluZSBzdHlsZSB0cnVtcHMgYWxsXG5cdFx0cmV0dXJuIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHxcblx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJlxuXG5cdFx0XHQvLyBPdGhlcndpc2UsIGNoZWNrIGNvbXB1dGVkIHN0eWxlXG5cdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NDMgLSA0NVxuXHRcdFx0Ly8gRGlzY29ubmVjdGVkIGVsZW1lbnRzIGNhbiBoYXZlIGNvbXB1dGVkIGRpc3BsYXk6IG5vbmUsIHNvIGZpcnN0IGNvbmZpcm0gdGhhdCBlbGVtIGlzXG5cdFx0XHQvLyBpbiB0aGUgZG9jdW1lbnQuXG5cdFx0XHRpc0F0dGFjaGVkKCBlbGVtICkgJiZcblxuXHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJub25lXCI7XG5cdH07XG5cblxuXG5mdW5jdGlvbiBhZGp1c3RDU1MoIGVsZW0sIHByb3AsIHZhbHVlUGFydHMsIHR3ZWVuICkge1xuXHR2YXIgYWRqdXN0ZWQsIHNjYWxlLFxuXHRcdG1heEl0ZXJhdGlvbnMgPSAyMCxcblx0XHRjdXJyZW50VmFsdWUgPSB0d2VlbiA/XG5cdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuLmN1cigpO1xuXHRcdFx0fSA6XG5cdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsIFwiXCIgKTtcblx0XHRcdH0sXG5cdFx0aW5pdGlhbCA9IGN1cnJlbnRWYWx1ZSgpLFxuXHRcdHVuaXQgPSB2YWx1ZVBhcnRzICYmIHZhbHVlUGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG5cdFx0aW5pdGlhbEluVW5pdCA9IGVsZW0ubm9kZVR5cGUgJiZcblx0XHRcdCggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiAraW5pdGlhbCApICYmXG5cdFx0XHRyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApO1xuXG5cdGlmICggaW5pdGlhbEluVW5pdCAmJiBpbml0aWFsSW5Vbml0WyAzIF0gIT09IHVuaXQgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NTRcblx0XHQvLyBIYWx2ZSB0aGUgaXRlcmF0aW9uIHRhcmdldCB2YWx1ZSB0byBwcmV2ZW50IGludGVyZmVyZW5jZSBmcm9tIENTUyB1cHBlciBib3VuZHMgKGdoLTIxNDQpXG5cdFx0aW5pdGlhbCA9IGluaXRpYWwgLyAyO1xuXG5cdFx0Ly8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzc1xuXHRcdHVuaXQgPSB1bml0IHx8IGluaXRpYWxJblVuaXRbIDMgXTtcblxuXHRcdC8vIEl0ZXJhdGl2ZWx5IGFwcHJveGltYXRlIGZyb20gYSBub256ZXJvIHN0YXJ0aW5nIHBvaW50XG5cdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsIHx8IDE7XG5cblx0XHR3aGlsZSAoIG1heEl0ZXJhdGlvbnMtLSApIHtcblxuXHRcdFx0Ly8gRXZhbHVhdGUgYW5kIHVwZGF0ZSBvdXIgYmVzdCBndWVzcyAoZG91YmxpbmcgZ3Vlc3NlcyB0aGF0IHplcm8gb3V0KS5cblx0XHRcdC8vIEZpbmlzaCBpZiB0aGUgc2NhbGUgZXF1YWxzIG9yIGNyb3NzZXMgMSAobWFraW5nIHRoZSBvbGQqbmV3IHByb2R1Y3Qgbm9uLXBvc2l0aXZlKS5cblx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTtcblx0XHRcdGlmICggKCAxIC0gc2NhbGUgKSAqICggMSAtICggc2NhbGUgPSBjdXJyZW50VmFsdWUoKSAvIGluaXRpYWwgfHwgMC41ICkgKSA8PSAwICkge1xuXHRcdFx0XHRtYXhJdGVyYXRpb25zID0gMDtcblx0XHRcdH1cblx0XHRcdGluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7XG5cblx0XHR9XG5cblx0XHRpbml0aWFsSW5Vbml0ID0gaW5pdGlhbEluVW5pdCAqIDI7XG5cdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuXHRcdHZhbHVlUGFydHMgPSB2YWx1ZVBhcnRzIHx8IFtdO1xuXHR9XG5cblx0aWYgKCB2YWx1ZVBhcnRzICkge1xuXHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbEluVW5pdCB8fCAraW5pdGlhbCB8fCAwO1xuXG5cdFx0Ly8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkXG5cdFx0YWRqdXN0ZWQgPSB2YWx1ZVBhcnRzWyAxIF0gP1xuXHRcdFx0aW5pdGlhbEluVW5pdCArICggdmFsdWVQYXJ0c1sgMSBdICsgMSApICogdmFsdWVQYXJ0c1sgMiBdIDpcblx0XHRcdCt2YWx1ZVBhcnRzWyAyIF07XG5cdFx0aWYgKCB0d2VlbiApIHtcblx0XHRcdHR3ZWVuLnVuaXQgPSB1bml0O1xuXHRcdFx0dHdlZW4uc3RhcnQgPSBpbml0aWFsSW5Vbml0O1xuXHRcdFx0dHdlZW4uZW5kID0gYWRqdXN0ZWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBhZGp1c3RlZDtcbn1cblxuXG52YXIgZGVmYXVsdERpc3BsYXlNYXAgPSB7fTtcblxuZnVuY3Rpb24gZ2V0RGVmYXVsdERpc3BsYXkoIGVsZW0gKSB7XG5cdHZhciB0ZW1wLFxuXHRcdGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudCxcblx0XHRub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUsXG5cdFx0ZGlzcGxheSA9IGRlZmF1bHREaXNwbGF5TWFwWyBub2RlTmFtZSBdO1xuXG5cdGlmICggZGlzcGxheSApIHtcblx0XHRyZXR1cm4gZGlzcGxheTtcblx0fVxuXG5cdHRlbXAgPSBkb2MuYm9keS5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUVsZW1lbnQoIG5vZGVOYW1lICkgKTtcblx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIHRlbXAsIFwiZGlzcGxheVwiICk7XG5cblx0dGVtcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB0ZW1wICk7XG5cblx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRkaXNwbGF5ID0gXCJibG9ja1wiO1xuXHR9XG5cdGRlZmF1bHREaXNwbGF5TWFwWyBub2RlTmFtZSBdID0gZGlzcGxheTtcblxuXHRyZXR1cm4gZGlzcGxheTtcbn1cblxuZnVuY3Rpb24gc2hvd0hpZGUoIGVsZW1lbnRzLCBzaG93ICkge1xuXHR2YXIgZGlzcGxheSwgZWxlbSxcblx0XHR2YWx1ZXMgPSBbXSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuXG5cdC8vIERldGVybWluZSBuZXcgZGlzcGxheSB2YWx1ZSBmb3IgZWxlbWVudHMgdGhhdCBuZWVkIHRvIGNoYW5nZVxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0ZGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheTtcblx0XHRpZiAoIHNob3cgKSB7XG5cblx0XHRcdC8vIFNpbmNlIHdlIGZvcmNlIHZpc2liaWxpdHkgdXBvbiBjYXNjYWRlLWhpZGRlbiBlbGVtZW50cywgYW4gaW1tZWRpYXRlIChhbmQgc2xvdylcblx0XHRcdC8vIGNoZWNrIGlzIHJlcXVpcmVkIGluIHRoaXMgZmlyc3QgbG9vcCB1bmxlc3Mgd2UgaGF2ZSBhIG5vbmVtcHR5IGRpc3BsYXkgdmFsdWUgKGVpdGhlclxuXHRcdFx0Ly8gaW5saW5lIG9yIGFib3V0LXRvLWJlLXJlc3RvcmVkKVxuXHRcdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImRpc3BsYXlcIiApIHx8IG51bGw7XG5cdFx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSApIHtcblx0XHRcdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJiBpc0hpZGRlbldpdGhpblRyZWUoIGVsZW0gKSApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gZ2V0RGVmYXVsdERpc3BsYXkoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCBkaXNwbGF5ICE9PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gXCJub25lXCI7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgd2hhdCB3ZSdyZSBvdmVyd3JpdGluZ1xuXHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiZGlzcGxheVwiLCBkaXNwbGF5ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2V0IHRoZSBkaXNwbGF5IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wIHRvIGF2b2lkIGNvbnN0YW50IHJlZmxvd1xuXHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGlmICggdmFsdWVzWyBpbmRleCBdICE9IG51bGwgKSB7XG5cdFx0XHRlbGVtZW50c1sgaW5kZXggXS5zdHlsZS5kaXNwbGF5ID0gdmFsdWVzWyBpbmRleCBdO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50cztcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGlzSGlkZGVuV2l0aGluVHJlZSggdGhpcyApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9XG59ICk7XG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoIC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pICk7XG5cbnZhciBydGFnTmFtZSA9ICggLzwoW2Etel1bXlxcL1xcMD5cXHgyMFxcdFxcclxcblxcZl0qKS9pICk7XG5cbnZhciByc2NyaXB0VHlwZSA9ICggL14kfF5tb2R1bGUkfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSApO1xuXG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdGRpdiA9IGZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKSxcblx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHlcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjEgb25seVxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBNYWtlIHN1cmUgdGV4dGFyZWEgKGFuZCBjaGVja2JveCkgZGVmYXVsdFZhbHVlIGlzIHByb3Blcmx5IGNsb25lZFxuXHRkaXYuaW5uZXJIVE1MID0gXCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCI7XG5cdHN1cHBvcnQubm9DbG9uZUNoZWNrZWQgPSAhIWRpdi5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdC8vIElFIDw9OSByZXBsYWNlcyA8b3B0aW9uPiB0YWdzIHdpdGggdGhlaXIgY29udGVudHMgd2hlbiBpbnNlcnRlZCBvdXRzaWRlIG9mXG5cdC8vIHRoZSBzZWxlY3QgZWxlbWVudC5cblx0ZGl2LmlubmVySFRNTCA9IFwiPG9wdGlvbj48L29wdGlvbj5cIjtcblx0c3VwcG9ydC5vcHRpb24gPSAhIWRpdi5sYXN0Q2hpbGQ7XG59ICkoKTtcblxuXG4vLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKVxudmFyIHdyYXBNYXAgPSB7XG5cblx0Ly8gWEhUTUwgcGFyc2VycyBkbyBub3QgbWFnaWNhbGx5IGluc2VydCBlbGVtZW50cyBpbiB0aGVcblx0Ly8gc2FtZSB3YXkgdGhhdCB0YWcgc291cCBwYXJzZXJzIGRvLiBTbyB3ZSBjYW5ub3Qgc2hvcnRlblxuXHQvLyB0aGlzIGJ5IG9taXR0aW5nIDx0Ym9keT4gb3Igb3RoZXIgcmVxdWlyZWQgZWxlbWVudHMuXG5cdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0Y29sOiBbIDIsIFwiPHRhYmxlPjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCIgXSxcblx0dHI6IFsgMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0X2RlZmF1bHQ6IFsgMCwgXCJcIiwgXCJcIiBdXG59O1xuXG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xud3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5pZiAoICFzdXBwb3J0Lm9wdGlvbiApIHtcblx0d3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uID0gWyAxLCBcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIiwgXCI8L3NlbGVjdD5cIiBdO1xufVxuXG5cbmZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0Ly8gVXNlIHR5cGVvZiB0byBhdm9pZCB6ZXJvLWFyZ3VtZW50IG1ldGhvZCBpbnZvY2F0aW9uIG9uIGhvc3Qgb2JqZWN0cyAoIzE1MTUxKVxuXHR2YXIgcmV0O1xuXG5cdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0cmV0ID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8IFwiKlwiICk7XG5cblx0fSBlbHNlIGlmICggdHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRyZXQgPSBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApO1xuXG5cdH0gZWxzZSB7XG5cdFx0cmV0ID0gW107XG5cdH1cblxuXHRpZiAoIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBub2RlTmFtZSggY29udGV4dCwgdGFnICkgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5tZXJnZSggWyBjb250ZXh0IF0sIHJldCApO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn1cblxuXG4vLyBNYXJrIHNjcmlwdHMgYXMgaGF2aW5nIGFscmVhZHkgYmVlbiBldmFsdWF0ZWRcbmZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGRhdGFQcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sXG5cdFx0XHRcImdsb2JhbEV2YWxcIixcblx0XHRcdCFyZWZFbGVtZW50cyB8fCBkYXRhUHJpdi5nZXQoIHJlZkVsZW1lbnRzWyBpIF0sIFwiZ2xvYmFsRXZhbFwiIClcblx0XHQpO1xuXHR9XG59XG5cblxudmFyIHJodG1sID0gLzx8JiM/XFx3KzsvO1xuXG5mdW5jdGlvbiBidWlsZEZyYWdtZW50KCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uLCBpZ25vcmVkICkge1xuXHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGF0dGFjaGVkLCBqLFxuXHRcdGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0bm9kZXMgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdGlmICggZWxlbSB8fCBlbGVtID09PSAwICkge1xuXG5cdFx0XHQvLyBBZGQgbm9kZXMgZGlyZWN0bHlcblx0XHRcdGlmICggdG9UeXBlKCBlbGVtICkgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApO1xuXG5cdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdH0gZWxzZSBpZiAoICFyaHRtbC50ZXN0KCBlbGVtICkgKSB7XG5cdFx0XHRcdG5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIGVsZW0gKSApO1xuXG5cdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZCggY29udGV4dC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBEZXNlcmlhbGl6ZSBhIHN0YW5kYXJkIHJlcHJlc2VudGF0aW9uXG5cdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHR3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDtcblx0XHRcdFx0dG1wLmlubmVySFRNTCA9IHdyYXBbIDEgXSArIGpRdWVyeS5odG1sUHJlZmlsdGVyKCBlbGVtICkgKyB3cmFwWyAyIF07XG5cblx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdGogPSB3cmFwWyAwIF07XG5cdFx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdC8vIFJlbWVtYmVyIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyXG5cdFx0XHRcdHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHR0bXAudGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJlbW92ZSB3cmFwcGVyIGZyb20gZnJhZ21lbnRcblx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdGkgPSAwO1xuXHR3aGlsZSAoICggZWxlbSA9IG5vZGVzWyBpKysgXSApICkge1xuXG5cdFx0Ly8gU2tpcCBlbGVtZW50cyBhbHJlYWR5IGluIHRoZSBjb250ZXh0IGNvbGxlY3Rpb24gKHRyYWMtNDA4Nylcblx0XHRpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgPiAtMSApIHtcblx0XHRcdGlmICggaWdub3JlZCApIHtcblx0XHRcdFx0aWdub3JlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRhdHRhY2hlZCA9IGlzQXR0YWNoZWQoIGVsZW0gKTtcblxuXHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGlmICggYXR0YWNoZWQgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHR9XG5cblx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZyYWdtZW50O1xufVxuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMStcbi8vIGZvY3VzKCkgYW5kIGJsdXIoKSBhcmUgYXN5bmNocm9ub3VzLCBleGNlcHQgd2hlbiB0aGV5IGFyZSBuby1vcC5cbi8vIFNvIGV4cGVjdCBmb2N1cyB0byBiZSBzeW5jaHJvbm91cyB3aGVuIHRoZSBlbGVtZW50IGlzIGFscmVhZHkgYWN0aXZlLFxuLy8gYW5kIGJsdXIgdG8gYmUgc3luY2hyb25vdXMgd2hlbiB0aGUgZWxlbWVudCBpcyBub3QgYWxyZWFkeSBhY3RpdmUuXG4vLyAoZm9jdXMgYW5kIGJsdXIgYXJlIGFsd2F5cyBzeW5jaHJvbm91cyBpbiBvdGhlciBzdXBwb3J0ZWQgYnJvd3NlcnMsXG4vLyB0aGlzIGp1c3QgZGVmaW5lcyB3aGVuIHdlIGNhbiBjb3VudCBvbiBpdCkuXG5mdW5jdGlvbiBleHBlY3RTeW5jKCBlbGVtLCB0eXBlICkge1xuXHRyZXR1cm4gKCBlbGVtID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICkgPT09ICggdHlwZSA9PT0gXCJmb2N1c1wiICk7XG59XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG4vLyBBY2Nlc3NpbmcgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gdGhyb3cgdW5leHBlY3RlZGx5XG4vLyBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzOTNcbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbmZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7XG5cdHZhciBvcmlnRm4sIHR5cGU7XG5cblx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdG9uKCBlbGVtLCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7XG5cdFx0fVxuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblxuXHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdGRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgZGF0YSwgZm4gKVxuXHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggb25lID09PSAxICkge1xuXHRcdG9yaWdGbiA9IGZuO1xuXHRcdGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdHJldHVybiBvcmlnRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH07XG5cblx0XHQvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGblxuXHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHR9XG5cdHJldHVybiBlbGVtLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0fSApO1xufVxuXG4vKlxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZXZlbnRzIC0tIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLlxuICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cbiAqL1xualF1ZXJ5LmV2ZW50ID0ge1xuXG5cdGdsb2JhbDoge30sXG5cblx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXG5cdFx0dmFyIGhhbmRsZU9iakluLCBldmVudEhhbmRsZSwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gT25seSBhdHRhY2ggZXZlbnRzIHRvIG9iamVjdHMgdGhhdCBhY2NlcHQgZGF0YVxuXHRcdGlmICggIWFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhhdCBpbnZhbGlkIHNlbGVjdG9ycyB0aHJvdyBleGNlcHRpb25zIGF0IGF0dGFjaCB0aW1lXG5cdFx0Ly8gRXZhbHVhdGUgYWdhaW5zdCBkb2N1bWVudEVsZW1lbnQgaW4gY2FzZSBlbGVtIGlzIGEgbm9uLWVsZW1lbnQgbm9kZSAoZS5nLiwgZG9jdW1lbnQpXG5cdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZG9jdW1lbnRFbGVtZW50LCBzZWxlY3RvciApO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuXHRcdGlmICggIWhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG5cdFx0fVxuXG5cdFx0Ly8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuXHRcdGlmICggISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSBPYmplY3QuY3JlYXRlKCBudWxsICk7XG5cdFx0fVxuXHRcdGlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gSWYgc2VsZWN0b3IgZGVmaW5lZCwgZGV0ZXJtaW5lIHNwZWNpYWwgZXZlbnQgYXBpIHR5cGUsIG90aGVyd2lzZSBnaXZlbiB0eXBlXG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cblx0XHRcdC8vIFVwZGF0ZSBzcGVjaWFsIGJhc2VkIG9uIG5ld2x5IHJlc2V0IHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVyc1xuXHRcdFx0aGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKVxuXHRcdFx0fSwgaGFuZGxlT2JqSW4gKTtcblxuXHRcdFx0Ly8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3Rcblx0XHRcdGlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkge1xuXHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG5cdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwO1xuXG5cdFx0XHRcdC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnNldHVwIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGlmICggZWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNwZWNpYWwuYWRkICkge1xuXHRcdFx0XHRzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblxuXHRcdFx0XHRpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkge1xuXHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnRcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBLZWVwIHRyYWNrIG9mIHdoaWNoIGV2ZW50cyBoYXZlIGV2ZXIgYmVlbiB1c2VkLCBmb3IgZXZlbnQgb3B0aW1pemF0aW9uXG5cdFx0XHRqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuXHRcdH1cblxuXHR9LFxuXG5cdC8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuXG5cdFx0dmFyIGosIG9yaWdDb3VudCwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdGlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWRcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50XG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0dG1wID0gdG1wWyAyIF0gJiZcblx0XHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fFxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGosIDEgKTtcblxuXHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0c3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdC8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKVxuXHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fFxuXHRcdFx0XHRcdHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZGF0YSBhbmQgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuXHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImhhbmRsZSBldmVudHNcIiApO1xuXHRcdH1cblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIG5hdGl2ZUV2ZW50ICkge1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLCBoYW5kbGVyUXVldWUsXG5cdFx0XHRhcmdzID0gbmV3IEFycmF5KCBhcmd1bWVudHMubGVuZ3RoICksXG5cblx0XHRcdC8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdFxuXHRcdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBuYXRpdmVFdmVudCApLFxuXG5cdFx0XHRoYW5kbGVycyA9IChcblx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiZXZlbnRzXCIgKSB8fCBPYmplY3QuY3JlYXRlKCBudWxsIClcblx0XHRcdFx0KVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307XG5cblx0XHQvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuXHRcdGFyZ3NbIDAgXSA9IGV2ZW50O1xuXG5cdFx0Zm9yICggaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRhcmdzWyBpIF0gPSBhcmd1bWVudHNbIGkgXTtcblx0XHR9XG5cblx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cblx0XHQvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkXG5cdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGhhbmRsZXJzXG5cdFx0aGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApO1xuXG5cdFx0Ly8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXNcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBtYXRjaGVkLmVsZW07XG5cblx0XHRcdGogPSAwO1xuXHRcdFx0d2hpbGUgKCAoIGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdICkgJiZcblx0XHRcdFx0IWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGlzIG5hbWVzcGFjZWQsIHRoZW4gZWFjaCBoYW5kbGVyIGlzIG9ubHkgaW52b2tlZCBpZiBpdCBpc1xuXHRcdFx0XHQvLyBzcGVjaWFsbHkgdW5pdmVyc2FsIG9yIGl0cyBuYW1lc3BhY2VzIGFyZSBhIHN1cGVyc2V0IG9mIHRoZSBldmVudCdzLlxuXHRcdFx0XHRpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGhhbmRsZU9iai5uYW1lc3BhY2UgPT09IGZhbHNlIHx8XG5cdFx0XHRcdFx0ZXZlbnQucm5hbWVzcGFjZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fFxuXHRcdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIgKS5hcHBseSggbWF0Y2hlZC5lbGVtLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGV2ZW50LnJlc3VsdCA9IHJldCApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbCB0aGUgcG9zdERpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZVxuXHRcdGlmICggc3BlY2lhbC5wb3N0RGlzcGF0Y2ggKSB7XG5cdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0dmFyIGksIGhhbmRsZU9iaiwgc2VsLCBtYXRjaGVkSGFuZGxlcnMsIG1hdGNoZWRTZWxlY3RvcnMsXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCAmJlxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTlcblx0XHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICh0cmFjLTEzMTgwKVxuXHRcdFx0Y3VyLm5vZGVUeXBlICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MlxuXHRcdFx0Ly8gU3VwcHJlc3Mgc3BlYy12aW9sYXRpbmcgY2xpY2tzIGluZGljYXRpbmcgYSBub24tcHJpbWFyeSBwb2ludGVyIGJ1dHRvbiAodHJhYy0zODYxKVxuXHRcdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnQtdHlwZS1jbGlja1xuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTEgb25seVxuXHRcdFx0Ly8gLi4uYnV0IG5vdCBhcnJvdyBrZXkgXCJjbGlja3NcIiBvZiByYWRpbyBpbnB1dHMsIHdoaWNoIGNhbiBoYXZlIGBidXR0b25gIC0xIChnaC0yMzQzKVxuXHRcdFx0ISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGV2ZW50LmJ1dHRvbiA+PSAxICkgKSB7XG5cblx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXG5cdFx0XHRcdC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGN1ci5kaXNhYmxlZCA9PT0gdHJ1ZSApICkge1xuXHRcdFx0XHRcdG1hdGNoZWRIYW5kbGVycyA9IFtdO1xuXHRcdFx0XHRcdG1hdGNoZWRTZWxlY3RvcnMgPSB7fTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkSGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggbWF0Y2hlZEhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZWRIYW5kbGVycyB9ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdGN1ciA9IHRoaXM7XG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0fSxcblxuXHRhZGRQcm9wOiBmdW5jdGlvbiggbmFtZSwgaG9vayApIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIGpRdWVyeS5FdmVudC5wcm90b3R5cGUsIG5hbWUsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cblx0XHRcdGdldDogaXNGdW5jdGlvbiggaG9vayApID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBob29rKCB0aGlzLm9yaWdpbmFsRXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gOlxuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFsgbmFtZSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcywgbmFtZSwge1xuXHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGZpeDogZnVuY3Rpb24oIG9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0cmV0dXJuIG9yaWdpbmFsRXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0b3JpZ2luYWxFdmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblxuXHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0bm9CdWJibGU6IHRydWVcblx0XHR9LFxuXHRcdGNsaWNrOiB7XG5cblx0XHRcdC8vIFV0aWxpemUgbmF0aXZlIGV2ZW50IHRvIGVuc3VyZSBjb3JyZWN0IHN0YXRlIGZvciBjaGVja2FibGUgaW5wdXRzXG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oIGRhdGEgKSB7XG5cblx0XHRcdFx0Ly8gRm9yIG11dHVhbCBjb21wcmVzc2liaWxpdHkgd2l0aCBfZGVmYXVsdCwgcmVwbGFjZSBgdGhpc2AgYWNjZXNzIHdpdGggYSBsb2NhbCB2YXIuXG5cdFx0XHRcdC8vIGB8fCBkYXRhYCBpcyBkZWFkIGNvZGUgbWVhbnQgb25seSB0byBwcmVzZXJ2ZSB0aGUgdmFyaWFibGUgdGhyb3VnaCBtaW5pZmljYXRpb24uXG5cdFx0XHRcdHZhciBlbCA9IHRoaXMgfHwgZGF0YTtcblxuXHRcdFx0XHQvLyBDbGFpbSB0aGUgZmlyc3QgaGFuZGxlclxuXHRcdFx0XHRpZiAoIHJjaGVja2FibGVUeXBlLnRlc3QoIGVsLnR5cGUgKSAmJlxuXHRcdFx0XHRcdGVsLmNsaWNrICYmIG5vZGVOYW1lKCBlbCwgXCJpbnB1dFwiICkgKSB7XG5cblx0XHRcdFx0XHQvLyBkYXRhUHJpdi5zZXQoIGVsLCBcImNsaWNrXCIsIC4uLiApXG5cdFx0XHRcdFx0bGV2ZXJhZ2VOYXRpdmUoIGVsLCBcImNsaWNrXCIsIHJldHVyblRydWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJldHVybiBmYWxzZSB0byBhbGxvdyBub3JtYWwgcHJvY2Vzc2luZyBpbiB0aGUgY2FsbGVyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0sXG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbiggZGF0YSApIHtcblxuXHRcdFx0XHQvLyBGb3IgbXV0dWFsIGNvbXByZXNzaWJpbGl0eSB3aXRoIF9kZWZhdWx0LCByZXBsYWNlIGB0aGlzYCBhY2Nlc3Mgd2l0aCBhIGxvY2FsIHZhci5cblx0XHRcdFx0Ly8gYHx8IGRhdGFgIGlzIGRlYWQgY29kZSBtZWFudCBvbmx5IHRvIHByZXNlcnZlIHRoZSB2YXJpYWJsZSB0aHJvdWdoIG1pbmlmaWNhdGlvbi5cblx0XHRcdFx0dmFyIGVsID0gdGhpcyB8fCBkYXRhO1xuXG5cdFx0XHRcdC8vIEZvcmNlIHNldHVwIGJlZm9yZSB0cmlnZ2VyaW5nIGEgY2xpY2tcblx0XHRcdFx0aWYgKCByY2hlY2thYmxlVHlwZS50ZXN0KCBlbC50eXBlICkgJiZcblx0XHRcdFx0XHRlbC5jbGljayAmJiBub2RlTmFtZSggZWwsIFwiaW5wdXRcIiApICkge1xuXG5cdFx0XHRcdFx0bGV2ZXJhZ2VOYXRpdmUoIGVsLCBcImNsaWNrXCIgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJldHVybiBub24tZmFsc2UgdG8gYWxsb3cgbm9ybWFsIGV2ZW50LXBhdGggcHJvcGFnYXRpb25cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgc3VwcHJlc3MgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzXG5cdFx0XHQvLyBBbHNvIHByZXZlbnQgaXQgaWYgd2UncmUgY3VycmVudGx5IGluc2lkZSBhIGxldmVyYWdlZCBuYXRpdmUtZXZlbnQgc3RhY2tcblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cdFx0XHRcdHJldHVybiByY2hlY2thYmxlVHlwZS50ZXN0KCB0YXJnZXQudHlwZSApICYmXG5cdFx0XHRcdFx0dGFyZ2V0LmNsaWNrICYmIG5vZGVOYW1lKCB0YXJnZXQsIFwiaW5wdXRcIiApICYmXG5cdFx0XHRcdFx0ZGF0YVByaXYuZ2V0KCB0YXJnZXQsIFwiY2xpY2tcIiApIHx8XG5cdFx0XHRcdFx0bm9kZU5hbWUoIHRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBFbnN1cmUgdGhlIHByZXNlbmNlIG9mIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgaGFuZGxlcyBtYW51YWxseS10cmlnZ2VyZWRcbi8vIHN5bnRoZXRpYyBldmVudHMgYnkgaW50ZXJydXB0aW5nIHByb2dyZXNzIHVudGlsIHJlaW52b2tlZCBpbiByZXNwb25zZSB0b1xuLy8gKm5hdGl2ZSogZXZlbnRzIHRoYXQgaXQgZmlyZXMgZGlyZWN0bHksIGVuc3VyaW5nIHRoYXQgc3RhdGUgY2hhbmdlcyBoYXZlXG4vLyBhbHJlYWR5IG9jY3VycmVkIGJlZm9yZSBvdGhlciBsaXN0ZW5lcnMgYXJlIGludm9rZWQuXG5mdW5jdGlvbiBsZXZlcmFnZU5hdGl2ZSggZWwsIHR5cGUsIGV4cGVjdFN5bmMgKSB7XG5cblx0Ly8gTWlzc2luZyBleHBlY3RTeW5jIGluZGljYXRlcyBhIHRyaWdnZXIgY2FsbCwgd2hpY2ggbXVzdCBmb3JjZSBzZXR1cCB0aHJvdWdoIGpRdWVyeS5ldmVudC5hZGRcblx0aWYgKCAhZXhwZWN0U3luYyApIHtcblx0XHRpZiAoIGRhdGFQcml2LmdldCggZWwsIHR5cGUgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZWwsIHR5cGUsIHJldHVyblRydWUgKTtcblx0XHR9XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNvbnRyb2xsZXIgYXMgYSBzcGVjaWFsIHVuaXZlcnNhbCBoYW5kbGVyIGZvciBhbGwgZXZlbnQgbmFtZXNwYWNlc1xuXHRkYXRhUHJpdi5zZXQoIGVsLCB0eXBlLCBmYWxzZSApO1xuXHRqUXVlcnkuZXZlbnQuYWRkKCBlbCwgdHlwZSwge1xuXHRcdG5hbWVzcGFjZTogZmFsc2UsXG5cdFx0aGFuZGxlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIG5vdEFzeW5jLCByZXN1bHQsXG5cdFx0XHRcdHNhdmVkID0gZGF0YVByaXYuZ2V0KCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdGlmICggKCBldmVudC5pc1RyaWdnZXIgJiAxICkgJiYgdGhpc1sgdHlwZSBdICkge1xuXG5cdFx0XHRcdC8vIEludGVycnVwdCBwcm9jZXNzaW5nIG9mIHRoZSBvdXRlciBzeW50aGV0aWMgLnRyaWdnZXIoKWVkIGV2ZW50XG5cdFx0XHRcdC8vIFNhdmVkIGRhdGEgc2hvdWxkIGJlIGZhbHNlIGluIHN1Y2ggY2FzZXMsIGJ1dCBtaWdodCBiZSBhIGxlZnRvdmVyIGNhcHR1cmUgb2JqZWN0XG5cdFx0XHRcdC8vIGZyb20gYW4gYXN5bmMgbmF0aXZlIGhhbmRsZXIgKGdoLTQzNTApXG5cdFx0XHRcdGlmICggIXNhdmVkLmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFN0b3JlIGFyZ3VtZW50cyBmb3IgdXNlIHdoZW4gaGFuZGxpbmcgdGhlIGlubmVyIG5hdGl2ZSBldmVudFxuXHRcdFx0XHRcdC8vIFRoZXJlIHdpbGwgYWx3YXlzIGJlIGF0IGxlYXN0IG9uZSBhcmd1bWVudCAoYW4gZXZlbnQgb2JqZWN0KSwgc28gdGhpcyBhcnJheVxuXHRcdFx0XHRcdC8vIHdpbGwgbm90IGJlIGNvbmZ1c2VkIHdpdGggYSBsZWZ0b3ZlciBjYXB0dXJlIG9iamVjdC5cblx0XHRcdFx0XHRzYXZlZCA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggdGhpcywgdHlwZSwgc2F2ZWQgKTtcblxuXHRcdFx0XHRcdC8vIFRyaWdnZXIgdGhlIG5hdGl2ZSBldmVudCBhbmQgY2FwdHVyZSBpdHMgcmVzdWx0XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTErXG5cdFx0XHRcdFx0Ly8gZm9jdXMoKSBhbmQgYmx1cigpIGFyZSBhc3luY2hyb25vdXNcblx0XHRcdFx0XHRub3RBc3luYyA9IGV4cGVjdFN5bmMoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0XHR0aGlzWyB0eXBlIF0oKTtcblx0XHRcdFx0XHRyZXN1bHQgPSBkYXRhUHJpdi5nZXQoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0XHRpZiAoIHNhdmVkICE9PSByZXN1bHQgfHwgbm90QXN5bmMgKSB7XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIHR5cGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IHt9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNhdmVkICE9PSByZXN1bHQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIENhbmNlbCB0aGUgb3V0ZXIgc3ludGhldGljIGV2ZW50XG5cdFx0XHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0LnZhbHVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGlzIGlzIGFuIGlubmVyIHN5bnRoZXRpYyBldmVudCBmb3IgYW4gZXZlbnQgd2l0aCBhIGJ1YmJsaW5nIHN1cnJvZ2F0ZVxuXHRcdFx0XHQvLyAoZm9jdXMgb3IgYmx1ciksIGFzc3VtZSB0aGF0IHRoZSBzdXJyb2dhdGUgYWxyZWFkeSBwcm9wYWdhdGVkIGZyb20gdHJpZ2dlcmluZyB0aGVcblx0XHRcdFx0Ly8gbmF0aXZlIGV2ZW50IGFuZCBwcmV2ZW50IHRoYXQgZnJvbSBoYXBwZW5pbmcgYWdhaW4gaGVyZS5cblx0XHRcdFx0Ly8gVGhpcyB0ZWNobmljYWxseSBnZXRzIHRoZSBvcmRlcmluZyB3cm9uZyB3LnIudC4gdG8gYC50cmlnZ2VyKClgIChpbiB3aGljaCB0aGVcblx0XHRcdFx0Ly8gYnViYmxpbmcgc3Vycm9nYXRlIHByb3BhZ2F0ZXMgKmFmdGVyKiB0aGUgbm9uLWJ1YmJsaW5nIGJhc2UpLCBidXQgdGhhdCBzZWVtc1xuXHRcdFx0XHQvLyBsZXNzIGJhZCB0aGFuIGR1cGxpY2F0aW9uLlxuXHRcdFx0XHR9IGVsc2UgaWYgKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge30gKS5kZWxlZ2F0ZVR5cGUgKSB7XG5cdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIG5hdGl2ZSBldmVudCB0cmlnZ2VyZWQgYWJvdmUsIGV2ZXJ5dGhpbmcgaXMgbm93IGluIG9yZGVyXG5cdFx0XHQvLyBGaXJlIGFuIGlubmVyIHN5bnRoZXRpYyBldmVudCB3aXRoIHRoZSBvcmlnaW5hbCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHNhdmVkLmxlbmd0aCApIHtcblxuXHRcdFx0XHQvLyAuLi5hbmQgY2FwdHVyZSB0aGUgcmVzdWx0XG5cdFx0XHRcdGRhdGFQcml2LnNldCggdGhpcywgdHlwZSwge1xuXHRcdFx0XHRcdHZhbHVlOiBqUXVlcnkuZXZlbnQudHJpZ2dlcihcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTErXG5cdFx0XHRcdFx0XHQvLyBFeHRlbmQgd2l0aCB0aGUgcHJvdG90eXBlIHRvIHJlc2V0IHRoZSBhYm92ZSBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggc2F2ZWRbIDAgXSwgalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSApLFxuXHRcdFx0XHRcdFx0c2F2ZWQuc2xpY2UoIDEgKSxcblx0XHRcdFx0XHRcdHRoaXNcblx0XHRcdFx0XHQpXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQvLyBBYm9ydCBoYW5kbGluZyBvZiB0aGUgbmF0aXZlIGV2ZW50XG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xufVxuXG5qUXVlcnkucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkge1xuXG5cdC8vIFRoaXMgXCJpZlwiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0c1xuXHRpZiAoIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcblx0XHRlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApO1xuXHR9XG59O1xuXG5qUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcblxuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7XG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIEV2ZW50IG9iamVjdFxuXHRpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcblx0XHR0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG5cdFx0dGhpcy50eXBlID0gc3JjLnR5cGU7XG5cblx0XHQvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuXHRcdC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcblx0XHRcdFx0c3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seVxuXHRcdFx0XHRzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID9cblx0XHRcdHJldHVyblRydWUgOlxuXHRcdFx0cmV0dXJuRmFsc2U7XG5cblx0XHQvLyBDcmVhdGUgdGFyZ2V0IHByb3BlcnRpZXNcblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgPD02IC0gNyBvbmx5XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHR0aGlzLnRhcmdldCA9ICggc3JjLnRhcmdldCAmJiBzcmMudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkgP1xuXHRcdFx0c3JjLnRhcmdldC5wYXJlbnROb2RlIDpcblx0XHRcdHNyYy50YXJnZXQ7XG5cblx0XHR0aGlzLmN1cnJlbnRUYXJnZXQgPSBzcmMuY3VycmVudFRhcmdldDtcblx0XHR0aGlzLnJlbGF0ZWRUYXJnZXQgPSBzcmMucmVsYXRlZFRhcmdldDtcblxuXHQvLyBFdmVudCB0eXBlXG5cdH0gZWxzZSB7XG5cdFx0dGhpcy50eXBlID0gc3JjO1xuXHR9XG5cblx0Ly8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3Rcblx0aWYgKCBwcm9wcyApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0dGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuXG5cdC8vIE1hcmsgaXQgYXMgZml4ZWRcblx0dGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7XG59O1xuXG4vLyBqUXVlcnkuRXZlbnQgaXMgYmFzZWQgb24gRE9NMyBFdmVudHMgYXMgc3BlY2lmaWVkIGJ5IHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIEJpbmRpbmdcbi8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBqUXVlcnkuRXZlbnQsXG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRpc1NpbXVsYXRlZDogZmFsc2UsXG5cblx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gSW5jbHVkZXMgYWxsIGNvbW1vbiBldmVudCBwcm9wcyBpbmNsdWRpbmcgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnQgc3BlY2lmaWMgcHJvcHNcbmpRdWVyeS5lYWNoKCB7XG5cdGFsdEtleTogdHJ1ZSxcblx0YnViYmxlczogdHJ1ZSxcblx0Y2FuY2VsYWJsZTogdHJ1ZSxcblx0Y2hhbmdlZFRvdWNoZXM6IHRydWUsXG5cdGN0cmxLZXk6IHRydWUsXG5cdGRldGFpbDogdHJ1ZSxcblx0ZXZlbnRQaGFzZTogdHJ1ZSxcblx0bWV0YUtleTogdHJ1ZSxcblx0cGFnZVg6IHRydWUsXG5cdHBhZ2VZOiB0cnVlLFxuXHRzaGlmdEtleTogdHJ1ZSxcblx0dmlldzogdHJ1ZSxcblx0XCJjaGFyXCI6IHRydWUsXG5cdGNvZGU6IHRydWUsXG5cdGNoYXJDb2RlOiB0cnVlLFxuXHRrZXk6IHRydWUsXG5cdGtleUNvZGU6IHRydWUsXG5cdGJ1dHRvbjogdHJ1ZSxcblx0YnV0dG9uczogdHJ1ZSxcblx0Y2xpZW50WDogdHJ1ZSxcblx0Y2xpZW50WTogdHJ1ZSxcblx0b2Zmc2V0WDogdHJ1ZSxcblx0b2Zmc2V0WTogdHJ1ZSxcblx0cG9pbnRlcklkOiB0cnVlLFxuXHRwb2ludGVyVHlwZTogdHJ1ZSxcblx0c2NyZWVuWDogdHJ1ZSxcblx0c2NyZWVuWTogdHJ1ZSxcblx0dGFyZ2V0VG91Y2hlczogdHJ1ZSxcblx0dG9FbGVtZW50OiB0cnVlLFxuXHR0b3VjaGVzOiB0cnVlLFxuXG5cdHdoaWNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcblxuXHRcdC8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50c1xuXHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCAmJiBya2V5RXZlbnQudGVzdCggZXZlbnQudHlwZSApICkge1xuXHRcdFx0cmV0dXJuIGV2ZW50LmNoYXJDb2RlICE9IG51bGwgPyBldmVudC5jaGFyQ29kZSA6IGV2ZW50LmtleUNvZGU7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIHJtb3VzZUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdGlmICggYnV0dG9uICYgMSApIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnV0dG9uICYgMiApIHtcblx0XHRcdFx0cmV0dXJuIDM7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnV0dG9uICYgNCApIHtcblx0XHRcdFx0cmV0dXJuIDI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC53aGljaDtcblx0fVxufSwgalF1ZXJ5LmV2ZW50LmFkZFByb3AgKTtcblxualF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIHR5cGUsIGRlbGVnYXRlVHlwZSApIHtcblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSA9IHtcblxuXHRcdC8vIFV0aWxpemUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gQ2xhaW0gdGhlIGZpcnN0IGhhbmRsZXJcblx0XHRcdC8vIGRhdGFQcml2LnNldCggdGhpcywgXCJmb2N1c1wiLCAuLi4gKVxuXHRcdFx0Ly8gZGF0YVByaXYuc2V0KCB0aGlzLCBcImJsdXJcIiwgLi4uIClcblx0XHRcdGxldmVyYWdlTmF0aXZlKCB0aGlzLCB0eXBlLCBleHBlY3RTeW5jICk7XG5cblx0XHRcdC8vIFJldHVybiBmYWxzZSB0byBhbGxvdyBub3JtYWwgcHJvY2Vzc2luZyBpbiB0aGUgY2FsbGVyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRm9yY2Ugc2V0dXAgYmVmb3JlIHRyaWdnZXJcblx0XHRcdGxldmVyYWdlTmF0aXZlKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdC8vIFJldHVybiBub24tZmFsc2UgdG8gYWxsb3cgbm9ybWFsIGV2ZW50LXBhdGggcHJvcGFnYXRpb25cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRkZWxlZ2F0ZVR5cGU6IGRlbGVnYXRlVHlwZVxuXHR9O1xufSApO1xuXG4vLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3Ncbi8vIHNvIHRoYXQgZXZlbnQgZGVsZWdhdGlvbiB3b3JrcyBpbiBqUXVlcnkuXG4vLyBEbyB0aGUgc2FtZSBmb3IgcG9pbnRlcmVudGVyL3BvaW50ZXJsZWF2ZSBhbmQgcG9pbnRlcm92ZXIvcG9pbnRlcm91dFxuLy9cbi8vIFN1cHBvcnQ6IFNhZmFyaSA3IG9ubHlcbi8vIFNhZmFyaSBzZW5kcyBtb3VzZWVudGVyIHRvbyBvZnRlbjsgc2VlOlxuLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDcwMjU4XG4vLyBmb3IgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBidWcgKGl0IGV4aXN0ZWQgaW4gb2xkZXIgQ2hyb21lIHZlcnNpb25zIGFzIHdlbGwpLlxualF1ZXJ5LmVhY2goIHtcblx0bW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcblx0bW91c2VsZWF2ZTogXCJtb3VzZW91dFwiLFxuXHRwb2ludGVyZW50ZXI6IFwicG9pbnRlcm92ZXJcIixcblx0cG9pbnRlcmxlYXZlOiBcInBvaW50ZXJvdXRcIlxufSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHtcblx0XHRkZWxlZ2F0ZVR5cGU6IGZpeCxcblx0XHRiaW5kVHlwZTogZml4LFxuXG5cdFx0aGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHR0YXJnZXQgPSB0aGlzLFxuXHRcdFx0XHRyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCxcblx0XHRcdFx0aGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqO1xuXG5cdFx0XHQvLyBGb3IgbW91c2VlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKCByZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpRdWVyeS5jb250YWlucyggdGFyZ2V0LCByZWxhdGVkICkgKSApIHtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTtcblx0XHRcdFx0cmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRldmVudC50eXBlID0gZml4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHRvbjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdG9uZTogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG5cdH0sXG5cdG9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7XG5cdFx0dmFyIGhhbmRsZU9iaiwgdHlwZTtcblx0XHRpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHtcblxuXHRcdFx0Ly8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuXHRcdFx0aGFuZGxlT2JqID0gdHlwZXMuaGFuZGxlT2JqO1xuXHRcdFx0alF1ZXJ5KCB0eXBlcy5kZWxlZ2F0ZVRhcmdldCApLm9mZihcblx0XHRcdFx0aGFuZGxlT2JqLm5hbWVzcGFjZSA/XG5cdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDpcblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUsXG5cdFx0XHRcdGhhbmRsZU9iai5zZWxlY3Rvcixcblx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXJcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApXG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHR0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHNlbGVjdG9yID09PSBmYWxzZSB8fCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgdHlwZXMsIGZuLCBzZWxlY3RvciApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbnZhclxuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTAgLSAxMSwgRWRnZSAxMiAtIDEzIG9ubHlcblx0Ly8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy5cblx0Ly8gU2VlIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvMTczNjUxMi9cblx0cm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksXG5cblx0Ly8gY2hlY2tlZD1cImNoZWNrZWRcIiBvciBjaGVja2VkXG5cdHJjaGVja2VkID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO1xuXG4vLyBQcmVmZXIgYSB0Ym9keSBvdmVyIGl0cyBwYXJlbnQgdGFibGUgZm9yIGNvbnRhaW5pbmcgbmV3IHJvd3NcbmZ1bmN0aW9uIG1hbmlwdWxhdGlvblRhcmdldCggZWxlbSwgY29udGVudCApIHtcblx0aWYgKCBub2RlTmFtZSggZWxlbSwgXCJ0YWJsZVwiICkgJiZcblx0XHRub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSApIHtcblxuXHRcdHJldHVybiBqUXVlcnkoIGVsZW0gKS5jaGlsZHJlbiggXCJ0Ym9keVwiIClbIDAgXSB8fCBlbGVtO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIFJlcGxhY2UvcmVzdG9yZSB0aGUgdHlwZSBhdHRyaWJ1dGUgb2Ygc2NyaXB0IGVsZW1lbnRzIGZvciBzYWZlIERPTSBtYW5pcHVsYXRpb25cbmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7XG5cdGVsZW0udHlwZSA9ICggZWxlbS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICkgIT09IG51bGwgKSArIFwiL1wiICsgZWxlbS50eXBlO1xuXHRyZXR1cm4gZWxlbTtcbn1cbmZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoIGVsZW0gKSB7XG5cdGlmICggKCBlbGVtLnR5cGUgfHwgXCJcIiApLnNsaWNlKCAwLCA1ICkgPT09IFwidHJ1ZS9cIiApIHtcblx0XHRlbGVtLnR5cGUgPSBlbGVtLnR5cGUuc2xpY2UoIDUgKTtcblx0fSBlbHNlIHtcblx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggXCJ0eXBlXCIgKTtcblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG5mdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkge1xuXHR2YXIgaSwgbCwgdHlwZSwgcGRhdGFPbGQsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXG5cdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRpZiAoIGRhdGFQcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YVByaXYuZ2V0KCBzcmMgKTtcblx0XHRldmVudHMgPSBwZGF0YU9sZC5ldmVudHM7XG5cblx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdGRhdGFQcml2LnJlbW92ZSggZGVzdCwgXCJoYW5kbGUgZXZlbnRzXCIgKTtcblxuXHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdGlmICggZGF0YVVzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhVXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cblx0XHRkYXRhVXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdH1cbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxuZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkge1xuXG5cdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0YXJncyA9IGZsYXQoIGFyZ3MgKTtcblxuXHR2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuXHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0dmFsdWVJc0Z1bmN0aW9uID0gaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHQvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcblx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gfHxcblx0XHRcdCggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdHJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdHZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTtcblx0XHRcdGlmICggdmFsdWVJc0Z1bmN0aW9uICkge1xuXHRcdFx0XHRhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTtcblx0XHRcdH1cblx0XHRcdGRvbU1hbmlwKCBzZWxmLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApO1xuXHRcdH0gKTtcblx0fVxuXG5cdGlmICggbCApIHtcblx0XHRmcmFnbWVudCA9IGJ1aWxkRnJhZ21lbnQoIGFyZ3MsIGNvbGxlY3Rpb25bIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgY29sbGVjdGlvbiwgaWdub3JlZCApO1xuXHRcdGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdH1cblxuXHRcdC8vIFJlcXVpcmUgZWl0aGVyIG5ldyBjb250ZW50IG9yIGFuIGludGVyZXN0IGluIGlnbm9yZWQgZWxlbWVudHMgdG8gaW52b2tlIHRoZSBjYWxsYmFja1xuXHRcdGlmICggZmlyc3QgfHwgaWdub3JlZCApIHtcblx0XHRcdHNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCBcInNjcmlwdFwiICksIGRpc2FibGVTY3JpcHQgKTtcblx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0Ly8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbVxuXHRcdFx0Ly8gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwXG5cdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRub2RlID0gZnJhZ21lbnQ7XG5cblx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7XG5cblx0XHRcdFx0XHQvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjYWxsYmFjay5jYWxsKCBjb2xsZWN0aW9uWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdC8vIFJlZW5hYmxlIHNjcmlwdHNcblx0XHRcdFx0alF1ZXJ5Lm1hcCggc2NyaXB0cywgcmVzdG9yZVNjcmlwdCApO1xuXG5cdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IHNjcmlwdHNbIGkgXTtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdCFkYXRhUHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiZcblx0XHRcdFx0XHRcdGpRdWVyeS5jb250YWlucyggZG9jLCBub2RlICkgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggbm9kZS5zcmMgJiYgKCBub2RlLnR5cGUgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgICE9PSBcIm1vZHVsZVwiICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICYmICFub2RlLm5vTW9kdWxlICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMsIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5vbmNlOiBub2RlLm5vbmNlIHx8IG5vZGUuZ2V0QXR0cmlidXRlKCBcIm5vbmNlXCIgKVxuXHRcdFx0XHRcdFx0XHRcdH0sIGRvYyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRET01FdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApLCBub2RlLCBkb2MgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY29sbGVjdGlvbjtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7XG5cdHZhciBub2RlLFxuXHRcdG5vZGVzID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSxcblx0XHRpID0gMDtcblxuXHRmb3IgKCA7ICggbm9kZSA9IG5vZGVzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0aWYgKCAha2VlcERhdGEgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggbm9kZSApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBub2RlLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRpZiAoIGtlZXBEYXRhICYmIGlzQXR0YWNoZWQoIG5vZGUgKSApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdH1cblx0XHRcdG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggbm9kZSApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGh0bWxQcmVmaWx0ZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHJldHVybiBodG1sO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBpc0F0dGFjaGVkKCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwczovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRjbGVhbkRhdGE6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblx0XHR2YXIgZGF0YSwgZWxlbSwgdHlwZSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFx0XHRcdGlmICggKCBkYXRhID0gZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbFsgdHlwZSBdICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NStcblx0XHRcdFx0XHQvLyBBc3NpZ24gdW5kZWZpbmVkIGluc3RlYWQgb2YgdXNpbmcgZGVsZXRlLCBzZWUgRGF0YSNyZW1vdmVcblx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0fSxcblxuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoICggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWdub3JlZCA9IFtdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0fSwgaWdub3JlZCApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCB7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0cHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG5cdH07XG59ICk7XG52YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICk7XG5cbnZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seSwgRmlyZWZveCA8PTMwICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHR2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcblxuXHRcdGlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkge1xuXHRcdFx0dmlldyA9IHdpbmRvdztcblx0XHR9XG5cblx0XHRyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cdH07XG5cbnZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrICkge1xuXHR2YXIgcmV0LCBuYW1lLFxuXHRcdG9sZCA9IHt9O1xuXG5cdC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdO1xuXHR9XG5cblx0cmV0ID0gY2FsbGJhY2suY2FsbCggZWxlbSApO1xuXG5cdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcblxuXG52YXIgcmJveFN0eWxlID0gbmV3IFJlZ0V4cCggY3NzRXhwYW5kLmpvaW4oIFwifFwiICksIFwiaVwiICk7XG5cblxuXG4oIGZ1bmN0aW9uKCkge1xuXG5cdC8vIEV4ZWN1dGluZyBib3RoIHBpeGVsUG9zaXRpb24gJiBib3hTaXppbmdSZWxpYWJsZSB0ZXN0cyByZXF1aXJlIG9ubHkgb25lIGxheW91dFxuXHQvLyBzbyB0aGV5J3JlIGV4ZWN1dGVkIGF0IHRoZSBzYW1lIHRpbWUgdG8gc2F2ZSB0aGUgc2Vjb25kIGNvbXB1dGF0aW9uLlxuXHRmdW5jdGlvbiBjb21wdXRlU3R5bGVUZXN0cygpIHtcblxuXHRcdC8vIFRoaXMgaXMgYSBzaW5nbGV0b24sIHdlIG5lZWQgdG8gZXhlY3V0ZSBpdCBvbmx5IG9uY2Vcblx0XHRpZiAoICFkaXYgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHg7d2lkdGg6NjBweDtcIiArXG5cdFx0XHRcIm1hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MFwiO1xuXHRcdGRpdi5zdHlsZS5jc3NUZXh0ID1cblx0XHRcdFwicG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6c2Nyb2xsO1wiICtcblx0XHRcdFwibWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDtcIiArXG5cdFx0XHRcIndpZHRoOjYwJTt0b3A6MSVcIjtcblx0XHRkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApLmFwcGVuZENoaWxkKCBkaXYgKTtcblxuXHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYgKTtcblx0XHRwaXhlbFBvc2l0aW9uVmFsID0gZGl2U3R5bGUudG9wICE9PSBcIjElXCI7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBGaXJlZm94IDw9MyAtIDQ0XG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0VmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS5tYXJnaW5MZWZ0ICkgPT09IDEyO1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seSwgU2FmYXJpIDw9OS4xIC0gMTAuMSwgaU9TIDw9Ny4wIC0gOS4zXG5cdFx0Ly8gU29tZSBzdHlsZXMgY29tZSBiYWNrIHdpdGggcGVyY2VudGFnZSB2YWx1ZXMsIGV2ZW4gdGhvdWdoIHRoZXkgc2hvdWxkbid0XG5cdFx0ZGl2LnN0eWxlLnJpZ2h0ID0gXCI2MCVcIjtcblx0XHRwaXhlbEJveFN0eWxlc1ZhbCA9IHJvdW5kUGl4ZWxNZWFzdXJlcyggZGl2U3R5bGUucmlnaHQgKSA9PT0gMzY7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IC0gMTEgb25seVxuXHRcdC8vIERldGVjdCBtaXNyZXBvcnRpbmcgb2YgY29udGVudCBkaW1lbnNpb25zIGZvciBib3gtc2l6aW5nOmJvcmRlci1ib3ggZWxlbWVudHNcblx0XHRib3hTaXppbmdSZWxpYWJsZVZhbCA9IHJvdW5kUGl4ZWxNZWFzdXJlcyggZGl2U3R5bGUud2lkdGggKSA9PT0gMzY7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IG9ubHlcblx0XHQvLyBEZXRlY3Qgb3ZlcmZsb3c6c2Nyb2xsIHNjcmV3aW5lc3MgKGdoLTM2OTkpXG5cdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9NjRcblx0XHQvLyBEb24ndCBnZXQgdHJpY2tlZCB3aGVuIHpvb20gYWZmZWN0cyBvZmZzZXRXaWR0aCAoZ2gtNDAyOSlcblx0XHRkaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0c2Nyb2xsYm94U2l6ZVZhbCA9IHJvdW5kUGl4ZWxNZWFzdXJlcyggZGl2Lm9mZnNldFdpZHRoIC8gMyApID09PSAxMjtcblxuXHRcdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHQvLyBOdWxsaWZ5IHRoZSBkaXYgc28gaXQgd291bGRuJ3QgYmUgc3RvcmVkIGluIHRoZSBtZW1vcnkgYW5kXG5cdFx0Ly8gaXQgd2lsbCBhbHNvIGJlIGEgc2lnbiB0aGF0IGNoZWNrcyBhbHJlYWR5IHBlcmZvcm1lZFxuXHRcdGRpdiA9IG51bGw7XG5cdH1cblxuXHRmdW5jdGlvbiByb3VuZFBpeGVsTWVhc3VyZXMoIG1lYXN1cmUgKSB7XG5cdFx0cmV0dXJuIE1hdGgucm91bmQoIHBhcnNlRmxvYXQoIG1lYXN1cmUgKSApO1xuXHR9XG5cblx0dmFyIHBpeGVsUG9zaXRpb25WYWwsIGJveFNpemluZ1JlbGlhYmxlVmFsLCBzY3JvbGxib3hTaXplVmFsLCBwaXhlbEJveFN0eWxlc1ZhbCxcblx0XHRyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbCwgcmVsaWFibGVNYXJnaW5MZWZ0VmFsLFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0Ly8gRmluaXNoIGVhcmx5IGluIGxpbWl0ZWQgKG5vbi1icm93c2VyKSBlbnZpcm9ubWVudHNcblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0alF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwge1xuXHRcdGJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0fSxcblx0XHRwaXhlbEJveFN0eWxlczogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsQm94U3R5bGVzVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsUG9zaXRpb25WYWw7XG5cdFx0fSxcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiByZWxpYWJsZU1hcmdpbkxlZnRWYWw7XG5cdFx0fSxcblx0XHRzY3JvbGxib3hTaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gc2Nyb2xsYm94U2l6ZVZhbDtcblx0XHR9LFxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDExKywgRWRnZSAxNSAtIDE4K1xuXHRcdC8vIElFL0VkZ2UgbWlzcmVwb3J0IGBnZXRDb21wdXRlZFN0eWxlYCBvZiB0YWJsZSByb3dzIHdpdGggd2lkdGgvaGVpZ2h0XG5cdFx0Ly8gc2V0IGluIENTUyB3aGlsZSBgb2Zmc2V0KmAgcHJvcGVydGllcyByZXBvcnQgY29ycmVjdCB2YWx1ZXMuXG5cdFx0Ly8gQmVoYXZpb3IgaW4gSUUgOSBpcyBtb3JlIHN1YnRsZSB0aGFuIGluIG5ld2VyIHZlcnNpb25zICYgaXQgcGFzc2VzXG5cdFx0Ly8gc29tZSB2ZXJzaW9ucyBvZiB0aGlzIHRlc3Q7IG1ha2Ugc3VyZSBub3QgdG8gbWFrZSBpdCBwYXNzIHRoZXJlIVxuXHRcdHJlbGlhYmxlVHJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0YWJsZSwgdHIsIHRyQ2hpbGQsIHRyU3R5bGU7XG5cdFx0XHRpZiAoIHJlbGlhYmxlVHJEaW1lbnNpb25zVmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ0YWJsZVwiICk7XG5cdFx0XHRcdHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ0clwiICk7XG5cdFx0XHRcdHRyQ2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0XHRcdFx0dGFibGUuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweFwiO1xuXHRcdFx0XHR0ci5zdHlsZS5oZWlnaHQgPSBcIjFweFwiO1xuXHRcdFx0XHR0ckNoaWxkLnN0eWxlLmhlaWdodCA9IFwiOXB4XCI7XG5cblx0XHRcdFx0ZG9jdW1lbnRFbGVtZW50XG5cdFx0XHRcdFx0LmFwcGVuZENoaWxkKCB0YWJsZSApXG5cdFx0XHRcdFx0LmFwcGVuZENoaWxkKCB0ciApXG5cdFx0XHRcdFx0LmFwcGVuZENoaWxkKCB0ckNoaWxkICk7XG5cblx0XHRcdFx0dHJTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCB0ciApO1xuXHRcdFx0XHRyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbCA9IHBhcnNlSW50KCB0clN0eWxlLmhlaWdodCApID4gMztcblxuXHRcdFx0XHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIHRhYmxlICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVsaWFibGVUckRpbWVuc2lvbnNWYWw7XG5cdFx0fVxuXHR9ICk7XG59ICkoKTtcblxuXG5mdW5jdGlvbiBjdXJDU1MoIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuXHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA1MStcblx0XHQvLyBSZXRyaWV2aW5nIHN0eWxlIGJlZm9yZSBjb21wdXRlZCBzb21laG93XG5cdFx0Ly8gZml4ZXMgYW4gaXNzdWUgd2l0aCBnZXR0aW5nIHdyb25nIHZhbHVlc1xuXHRcdC8vIG9uIGRldGFjaGVkIGVsZW1lbnRzXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBuZWVkZWQgZm9yOlxuXHQvLyAgIC5jc3MoJ2ZpbHRlcicpIChJRSA5IG9ubHksICMxMjUzNylcblx0Ly8gICAuY3NzKCctLWN1c3RvbVByb3BlcnR5KSAoIzMxNDQpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cblx0XHRpZiAoIHJldCA9PT0gXCJcIiAmJiAhaXNBdHRhY2hlZCggZWxlbSApICkge1xuXHRcdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIEFuZHJvaWQgQnJvd3NlciByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIHNvbWUgdmFsdWVzLFxuXHRcdC8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMuXG5cdFx0Ly8gVGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOlxuXHRcdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5waXhlbEJveFN0eWxlcygpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiByYm94U3R5bGUudGVzdCggbmFtZSApICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR3aWR0aCA9IHN0eWxlLndpZHRoO1xuXHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdHJldCA9IGNvbXB1dGVkLndpZHRoO1xuXG5cdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRzdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID9cblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cblx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0cmV0dXJuIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXG5cdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmdldDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdHJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG52YXIgY3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIiBdLFxuXHRlbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLnN0eWxlLFxuXHR2ZW5kb3JQcm9wcyA9IHt9O1xuXG4vLyBSZXR1cm4gYSB2ZW5kb3ItcHJlZml4ZWQgcHJvcGVydHkgb3IgdW5kZWZpbmVkXG5mdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHtcblxuXHQvLyBDaGVjayBmb3IgdmVuZG9yIHByZWZpeGVkIG5hbWVzXG5cdHZhciBjYXBOYW1lID0gbmFtZVsgMCBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksXG5cdFx0aSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRuYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7XG5cdFx0aWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cbn1cblxuLy8gUmV0dXJuIGEgcG90ZW50aWFsbHktbWFwcGVkIGpRdWVyeS5jc3NQcm9wcyBvciB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHlcbmZ1bmN0aW9uIGZpbmFsUHJvcE5hbWUoIG5hbWUgKSB7XG5cdHZhciBmaW5hbCA9IGpRdWVyeS5jc3NQcm9wc1sgbmFtZSBdIHx8IHZlbmRvclByb3BzWyBuYW1lIF07XG5cblx0aWYgKCBmaW5hbCApIHtcblx0XHRyZXR1cm4gZmluYWw7XG5cdH1cblx0aWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cblx0cmV0dXJuIHZlbmRvclByb3BzWyBuYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHx8IG5hbWU7XG59XG5cblxudmFyXG5cblx0Ly8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZVxuXHQvLyBleGNlcHQgXCJ0YWJsZVwiLCBcInRhYmxlLWNlbGxcIiwgb3IgXCJ0YWJsZS1jYXB0aW9uXCJcblx0Ly8gU2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG5cdHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcblx0cmN1c3RvbVByb3AgPSAvXi0tLyxcblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH07XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBfZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICkge1xuXG5cdC8vIEFueSByZWxhdGl2ZSAoKy8tKSB2YWx1ZXMgaGF2ZSBhbHJlYWR5IGJlZW5cblx0Ly8gbm9ybWFsaXplZCBhdCB0aGlzIHBvaW50XG5cdHZhciBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApO1xuXHRyZXR1cm4gbWF0Y2hlcyA/XG5cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAyIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBib3hNb2RlbEFkanVzdG1lbnQoIGVsZW0sIGRpbWVuc2lvbiwgYm94LCBpc0JvcmRlckJveCwgc3R5bGVzLCBjb21wdXRlZFZhbCApIHtcblx0dmFyIGkgPSBkaW1lbnNpb24gPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXHRcdGV4dHJhID0gMCxcblx0XHRkZWx0YSA9IDA7XG5cblx0Ly8gQWRqdXN0bWVudCBtYXkgbm90IGJlIG5lY2Vzc2FyeVxuXHRpZiAoIGJveCA9PT0gKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApICkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0Zm9yICggOyBpIDwgNDsgaSArPSAyICkge1xuXG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luXG5cdFx0aWYgKCBib3ggPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRkZWx0YSArPSBqUXVlcnkuY3NzKCBlbGVtLCBib3ggKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2UgZ2V0IGhlcmUgd2l0aCBhIGNvbnRlbnQtYm94LCB3ZSdyZSBzZWVraW5nIFwicGFkZGluZ1wiIG9yIFwiYm9yZGVyXCIgb3IgXCJtYXJnaW5cIlxuXHRcdGlmICggIWlzQm9yZGVyQm94ICkge1xuXG5cdFx0XHQvLyBBZGQgcGFkZGluZ1xuXHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEZvciBcImJvcmRlclwiIG9yIFwibWFyZ2luXCIsIGFkZCBib3JkZXJcblx0XHRcdGlmICggYm94ICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblxuXHRcdFx0Ly8gQnV0IHN0aWxsIGtlZXAgdHJhY2sgb2YgaXQgb3RoZXJ3aXNlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRleHRyYSArPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSWYgd2UgZ2V0IGhlcmUgd2l0aCBhIGJvcmRlci1ib3ggKGNvbnRlbnQgKyBwYWRkaW5nICsgYm9yZGVyKSwgd2UncmUgc2Vla2luZyBcImNvbnRlbnRcIiBvclxuXHRcdC8vIFwicGFkZGluZ1wiIG9yIFwibWFyZ2luXCJcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBGb3IgXCJjb250ZW50XCIsIHN1YnRyYWN0IHBhZGRpbmdcblx0XHRcdGlmICggYm94ID09PSBcImNvbnRlbnRcIiApIHtcblx0XHRcdFx0ZGVsdGEgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvciBcImNvbnRlbnRcIiBvciBcInBhZGRpbmdcIiwgc3VidHJhY3QgYm9yZGVyXG5cdFx0XHRpZiAoIGJveCAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdFx0ZGVsdGEgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBY2NvdW50IGZvciBwb3NpdGl2ZSBjb250ZW50LWJveCBzY3JvbGwgZ3V0dGVyIHdoZW4gcmVxdWVzdGVkIGJ5IHByb3ZpZGluZyBjb21wdXRlZFZhbFxuXHRpZiAoICFpc0JvcmRlckJveCAmJiBjb21wdXRlZFZhbCA+PSAwICkge1xuXG5cdFx0Ly8gb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGlzIGEgcm91bmRlZCBzdW0gb2YgY29udGVudCwgcGFkZGluZywgc2Nyb2xsIGd1dHRlciwgYW5kIGJvcmRlclxuXHRcdC8vIEFzc3VtaW5nIGludGVnZXIgc2Nyb2xsIGd1dHRlciwgc3VidHJhY3QgdGhlIHJlc3QgYW5kIHJvdW5kIGRvd25cblx0XHRkZWx0YSArPSBNYXRoLm1heCggMCwgTWF0aC5jZWlsKFxuXHRcdFx0ZWxlbVsgXCJvZmZzZXRcIiArIGRpbWVuc2lvblsgMCBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoIDEgKSBdIC1cblx0XHRcdGNvbXB1dGVkVmFsIC1cblx0XHRcdGRlbHRhIC1cblx0XHRcdGV4dHJhIC1cblx0XHRcdDAuNVxuXG5cdFx0Ly8gSWYgb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGlzIHVua25vd24sIHRoZW4gd2UgY2FuJ3QgZGV0ZXJtaW5lIGNvbnRlbnQtYm94IHNjcm9sbCBndXR0ZXJcblx0XHQvLyBVc2UgYW4gZXhwbGljaXQgemVybyB0byBhdm9pZCBOYU4gKGdoLTM5NjQpXG5cdFx0KSApIHx8IDA7XG5cdH1cblxuXHRyZXR1cm4gZGVsdGE7XG59XG5cbmZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBjb21wdXRlZCBzdHlsZVxuXHR2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cblx0XHQvLyBUbyBhdm9pZCBmb3JjaW5nIGEgcmVmbG93LCBvbmx5IGZldGNoIGJveFNpemluZyBpZiB3ZSBuZWVkIGl0IChnaC00MzIyKS5cblx0XHQvLyBGYWtlIGNvbnRlbnQtYm94IHVudGlsIHdlIGtub3cgaXQncyBuZWVkZWQgdG8ga25vdyB0aGUgdHJ1ZSB2YWx1ZS5cblx0XHRib3hTaXppbmdOZWVkZWQgPSAhc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IGV4dHJhLFxuXHRcdGlzQm9yZGVyQm94ID0gYm94U2l6aW5nTmVlZGVkICYmXG5cdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSBpc0JvcmRlckJveCxcblxuXHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgZGltZW5zaW9uLCBzdHlsZXMgKSxcblx0XHRvZmZzZXRQcm9wID0gXCJvZmZzZXRcIiArIGRpbWVuc2lvblsgMCBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoIDEgKTtcblxuXHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NTRcblx0Ly8gUmV0dXJuIGEgY29uZm91bmRpbmcgbm9uLXBpeGVsIHZhbHVlIG9yIGZlaWduIGlnbm9yYW5jZSwgYXMgYXBwcm9wcmlhdGUuXG5cdGlmICggcm51bW5vbnB4LnRlc3QoIHZhbCApICkge1xuXHRcdGlmICggIWV4dHJhICkge1xuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9XG5cdFx0dmFsID0gXCJhdXRvXCI7XG5cdH1cblxuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdC8vIFVzZSBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgZm9yIHdoZW4gYm94IHNpemluZyBpcyB1bnJlbGlhYmxlLlxuXHQvLyBJbiB0aG9zZSBjYXNlcywgdGhlIGNvbXB1dGVkIHZhbHVlIGNhbiBiZSB0cnVzdGVkIHRvIGJlIGJvcmRlci1ib3guXG5cdGlmICggKCAhc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpICYmIGlzQm9yZGVyQm94IHx8XG5cblx0XHQvLyBTdXBwb3J0OiBJRSAxMCAtIDExKywgRWRnZSAxNSAtIDE4K1xuXHRcdC8vIElFL0VkZ2UgbWlzcmVwb3J0IGBnZXRDb21wdXRlZFN0eWxlYCBvZiB0YWJsZSByb3dzIHdpdGggd2lkdGgvaGVpZ2h0XG5cdFx0Ly8gc2V0IGluIENTUyB3aGlsZSBgb2Zmc2V0KmAgcHJvcGVydGllcyByZXBvcnQgY29ycmVjdCB2YWx1ZXMuXG5cdFx0Ly8gSW50ZXJlc3RpbmdseSwgaW4gc29tZSBjYXNlcyBJRSA5IGRvZXNuJ3Qgc3VmZmVyIGZyb20gdGhpcyBpc3N1ZS5cblx0XHQhc3VwcG9ydC5yZWxpYWJsZVRyRGltZW5zaW9ucygpICYmIG5vZGVOYW1lKCBlbGVtLCBcInRyXCIgKSB8fFxuXG5cdFx0Ly8gRmFsbCBiYWNrIHRvIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCB3aGVuIHZhbHVlIGlzIFwiYXV0b1wiXG5cdFx0Ly8gVGhpcyBoYXBwZW5zIGZvciBpbmxpbmUgZWxlbWVudHMgd2l0aCBubyBleHBsaWNpdCBzZXR0aW5nIChnaC0zNTcxKVxuXHRcdHZhbCA9PT0gXCJhdXRvXCIgfHxcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjEgLSA0LjMgb25seVxuXHRcdC8vIEFsc28gdXNlIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBmb3IgbWlzcmVwb3J0ZWQgaW5saW5lIGRpbWVuc2lvbnMgKGdoLTM2MDIpXG5cdFx0IXBhcnNlRmxvYXQoIHZhbCApICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiaW5saW5lXCIgKSAmJlxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSBlbGVtZW50IGlzIHZpc2libGUgJiBjb25uZWN0ZWRcblx0XHRlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICkge1xuXG5cdFx0aXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiO1xuXG5cdFx0Ly8gV2hlcmUgYXZhaWxhYmxlLCBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgYXBwcm94aW1hdGUgYm9yZGVyIGJveCBkaW1lbnNpb25zLlxuXHRcdC8vIFdoZXJlIG5vdCBhdmFpbGFibGUgKGUuZy4sIFNWRyksIGFzc3VtZSB1bnJlbGlhYmxlIGJveC1zaXppbmcgYW5kIGludGVycHJldCB0aGVcblx0XHQvLyByZXRyaWV2ZWQgdmFsdWUgYXMgYSBjb250ZW50IGJveCBkaW1lbnNpb24uXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IG9mZnNldFByb3AgaW4gZWxlbTtcblx0XHRpZiAoIHZhbHVlSXNCb3JkZXJCb3ggKSB7XG5cdFx0XHR2YWwgPSBlbGVtWyBvZmZzZXRQcm9wIF07XG5cdFx0fVxuXHR9XG5cblx0Ly8gTm9ybWFsaXplIFwiXCIgYW5kIGF1dG9cblx0dmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDtcblxuXHQvLyBBZGp1c3QgZm9yIHRoZSBlbGVtZW50J3MgYm94IG1vZGVsXG5cdHJldHVybiAoIHZhbCArXG5cdFx0Ym94TW9kZWxBZGp1c3RtZW50KFxuXHRcdFx0ZWxlbSxcblx0XHRcdGRpbWVuc2lvbixcblx0XHRcdGV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSxcblx0XHRcdHZhbHVlSXNCb3JkZXJCb3gsXG5cdFx0XHRzdHlsZXMsXG5cblx0XHRcdC8vIFByb3ZpZGUgdGhlIGN1cnJlbnQgY29tcHV0ZWQgc2l6ZSB0byByZXF1ZXN0IHNjcm9sbCBndXR0ZXIgY2FsY3VsYXRpb24gKGdoLTM1ODkpXG5cdFx0XHR2YWxcblx0XHQpXG5cdCkgKyBcInB4XCI7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnRcIjogdHJ1ZSxcblx0XHRcImNvbHVtbkNvdW50XCI6IHRydWUsXG5cdFx0XCJmaWxsT3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwiZmxleEdyb3dcIjogdHJ1ZSxcblx0XHRcImZsZXhTaHJpbmtcIjogdHJ1ZSxcblx0XHRcImZvbnRXZWlnaHRcIjogdHJ1ZSxcblx0XHRcImdyaWRBcmVhXCI6IHRydWUsXG5cdFx0XCJncmlkQ29sdW1uXCI6IHRydWUsXG5cdFx0XCJncmlkQ29sdW1uRW5kXCI6IHRydWUsXG5cdFx0XCJncmlkQ29sdW1uU3RhcnRcIjogdHJ1ZSxcblx0XHRcImdyaWRSb3dcIjogdHJ1ZSxcblx0XHRcImdyaWRSb3dFbmRcIjogdHJ1ZSxcblx0XHRcImdyaWRSb3dTdGFydFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHt9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGNhbWVsQ2FzZSggbmFtZSApLFxuXHRcdFx0aXNDdXN0b21Qcm9wID0gcmN1c3RvbVByb3AudGVzdCggbmFtZSApLFxuXHRcdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lLiBXZSBkb24ndFxuXHRcdC8vIHdhbnQgdG8gcXVlcnkgdGhlIHZhbHVlIGlmIGl0IGlzIGEgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuXHRcdC8vIHNpbmNlIHRoZXkgYXJlIHVzZXItZGVmaW5lZC5cblx0XHRpZiAoICFpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRuYW1lID0gZmluYWxQcm9wTmFtZSggb3JpZ05hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBHZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uLCB0aGVuIHVucHJlZml4ZWQgdmVyc2lvblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgc2V0dGluZyBhIHZhbHVlXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdFx0Ly8gQ29udmVydCBcIis9XCIgb3IgXCItPVwiIHRvIHJlbGF0aXZlIG51bWJlcnMgKCM3MzQ1KVxuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICYmICggcmV0ID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiYgcmV0WyAxIF0gKSB7XG5cdFx0XHRcdHZhbHVlID0gYWRqdXN0Q1NTKCBlbGVtLCBuYW1lLCByZXQgKTtcblxuXHRcdFx0XHQvLyBGaXhlcyBidWcgIzkyMzdcblx0XHRcdFx0dHlwZSA9IFwibnVtYmVyXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldCAoIzcxMTYpXG5cdFx0XHRpZiAoIHZhbHVlID09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKVxuXHRcdFx0Ly8gVGhlIGlzQ3VzdG9tUHJvcCBjaGVjayBjYW4gYmUgcmVtb3ZlZCBpbiBqUXVlcnkgNC4wIHdoZW4gd2Ugb25seSBhdXRvLWFwcGVuZFxuXHRcdFx0Ly8gXCJweFwiIHRvIGEgZmV3IGhhcmRjb2RlZCB2YWx1ZXMuXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgIWlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdFx0dmFsdWUgKz0gcmV0ICYmIHJldFsgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8XG5cdFx0XHRcdCggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRpZiAoIGlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdFx0XHRzdHlsZS5zZXRQcm9wZXJ0eSggbmFtZSwgdmFsdWUgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3Rcblx0XHRcdHJldHVybiBzdHlsZVsgbmFtZSBdO1xuXHRcdH1cblx0fSxcblxuXHRjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuXHRcdHZhciB2YWwsIG51bSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGNhbWVsQ2FzZSggbmFtZSApLFxuXHRcdFx0aXNDdXN0b21Qcm9wID0gcmN1c3RvbVByb3AudGVzdCggbmFtZSApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lLiBXZSBkb24ndFxuXHRcdC8vIHdhbnQgdG8gbW9kaWZ5IHRoZSB2YWx1ZSBpZiBpdCBpcyBhIENTUyBjdXN0b20gcHJvcGVydHlcblx0XHQvLyBzaW5jZSB0aGV5IGFyZSB1c2VyLWRlZmluZWQuXG5cdFx0aWYgKCAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0bmFtZSA9IGZpbmFsUHJvcE5hbWUoIG9yaWdOYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcblx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdGlmICggZXh0cmEgPT09IFwiXCIgfHwgZXh0cmEgKSB7XG5cdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiBdLCBmdW5jdGlvbiggX2ksIGRpbWVuc2lvbiApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBkaW1lbnNpb24gXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJlxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrXG5cdFx0XHRcdFx0Ly8gVGFibGUgY29sdW1ucyBpbiBTYWZhcmkgaGF2ZSBub24temVybyBvZmZzZXRXaWR0aCAmIHplcm9cblx0XHRcdFx0XHQvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCB1bmxlc3MgZGlzcGxheSBpcyBjaGFuZ2VkLlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHRcdFx0XHRcdC8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGVcblx0XHRcdFx0XHQvLyBpbiBJRSB0aHJvd3MgYW4gZXJyb3IuXG5cdFx0XHRcdFx0KCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCB8fCAhZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCApID9cblx0XHRcdFx0XHRcdHN3YXAoIGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApO1xuXHRcdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRcdGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIG1hdGNoZXMsXG5cdFx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXG5cdFx0XHRcdC8vIE9ubHkgcmVhZCBzdHlsZXMucG9zaXRpb24gaWYgdGhlIHRlc3QgaGFzIGEgY2hhbmNlIHRvIGZhaWxcblx0XHRcdFx0Ly8gdG8gYXZvaWQgZm9yY2luZyBhIHJlZmxvdy5cblx0XHRcdFx0c2Nyb2xsYm94U2l6ZUJ1Z2d5ID0gIXN1cHBvcnQuc2Nyb2xsYm94U2l6ZSgpICYmXG5cdFx0XHRcdFx0c3R5bGVzLnBvc2l0aW9uID09PSBcImFic29sdXRlXCIsXG5cblx0XHRcdFx0Ly8gVG8gYXZvaWQgZm9yY2luZyBhIHJlZmxvdywgb25seSBmZXRjaCBib3hTaXppbmcgaWYgd2UgbmVlZCBpdCAoZ2gtMzk5MSlcblx0XHRcdFx0Ym94U2l6aW5nTmVlZGVkID0gc2Nyb2xsYm94U2l6ZUJ1Z2d5IHx8IGV4dHJhLFxuXHRcdFx0XHRpc0JvcmRlckJveCA9IGJveFNpemluZ05lZWRlZCAmJlxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG5cdFx0XHRcdHN1YnRyYWN0ID0gZXh0cmEgP1xuXHRcdFx0XHRcdGJveE1vZGVsQWRqdXN0bWVudChcblx0XHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0XHRkaW1lbnNpb24sXG5cdFx0XHRcdFx0XHRleHRyYSxcblx0XHRcdFx0XHRcdGlzQm9yZGVyQm94LFxuXHRcdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdFx0KSA6XG5cdFx0XHRcdFx0MDtcblxuXHRcdFx0Ly8gQWNjb3VudCBmb3IgdW5yZWxpYWJsZSBib3JkZXItYm94IGRpbWVuc2lvbnMgYnkgY29tcGFyaW5nIG9mZnNldCogdG8gY29tcHV0ZWQgYW5kXG5cdFx0XHQvLyBmYWtpbmcgYSBjb250ZW50LWJveCB0byBnZXQgYm9yZGVyIGFuZCBwYWRkaW5nIChnaC0zNjk5KVxuXHRcdFx0aWYgKCBpc0JvcmRlckJveCAmJiBzY3JvbGxib3hTaXplQnVnZ3kgKSB7XG5cdFx0XHRcdHN1YnRyYWN0IC09IE1hdGguY2VpbChcblx0XHRcdFx0XHRlbGVtWyBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApIF0gLVxuXHRcdFx0XHRcdHBhcnNlRmxvYXQoIHN0eWxlc1sgZGltZW5zaW9uIF0gKSAtXG5cdFx0XHRcdFx0Ym94TW9kZWxBZGp1c3RtZW50KCBlbGVtLCBkaW1lbnNpb24sIFwiYm9yZGVyXCIsIGZhbHNlLCBzdHlsZXMgKSAtXG5cdFx0XHRcdFx0MC41XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgdG8gcGl4ZWxzIGlmIHZhbHVlIGFkanVzdG1lbnQgaXMgbmVlZGVkXG5cdFx0XHRpZiAoIHN1YnRyYWN0ICYmICggbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmXG5cdFx0XHRcdCggbWF0Y2hlc1sgMyBdIHx8IFwicHhcIiApICE9PSBcInB4XCIgKSB7XG5cblx0XHRcdFx0ZWxlbS5zdHlsZVsgZGltZW5zaW9uIF0gPSB2YWx1ZTtcblx0XHRcdFx0dmFsdWUgPSBqUXVlcnkuY3NzKCBlbGVtLCBkaW1lbnNpb24gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKTtcblx0XHR9XG5cdH07XG59ICk7XG5cbmpRdWVyeS5jc3NIb29rcy5tYXJnaW5MZWZ0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luTGVmdCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4gKCBwYXJzZUZsb2F0KCBjdXJDU1MoIGVsZW0sIFwibWFyZ2luTGVmdFwiICkgKSB8fFxuXHRcdFx0XHRlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLVxuXHRcdFx0XHRcdHN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG5cdFx0XHRcdFx0fSApXG5cdFx0XHRcdCkgKyBcInB4XCI7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCgge1xuXHRtYXJnaW46IFwiXCIsXG5cdHBhZGRpbmc6IFwiXCIsXG5cdGJvcmRlcjogXCJXaWR0aFwiXG59LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG5cdFx0ZXhwYW5kOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgaSA9IDAsXG5cdFx0XHRcdGV4cGFuZGVkID0ge30sXG5cblx0XHRcdFx0Ly8gQXNzdW1lcyBhIHNpbmdsZSBudW1iZXIgaWYgbm90IGEgc3RyaW5nXG5cdFx0XHRcdHBhcnRzID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUuc3BsaXQoIFwiIFwiICkgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoIHByZWZpeCAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggbmFtZSApICkge1xuXHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdFx0bGVuID0gbmFtZS5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0bWFwWyBuYW1lWyBpIF0gXSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWVbIGkgXSwgZmFsc2UsIHN0eWxlcyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG1hcDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOlxuXHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0fSwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH1cbn0gKTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgalF1ZXJ5LmVhc2luZy5fZGVmYXVsdDtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7XG5cdFx0dGhpcy5lbmQgPSBlbmQ7XG5cdFx0dGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0fSxcblx0Y3VyOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0cmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/XG5cdFx0XHRob29rcy5nZXQoIHRoaXMgKSA6XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7XG5cdH0sXG5cdHJ1bjogZnVuY3Rpb24oIHBlcmNlbnQgKSB7XG5cdFx0dmFyIGVhc2VkLFxuXHRcdFx0aG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXShcblx0XHRcdFx0cGVyY2VudCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICogcGVyY2VudCwgMCwgMSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0gcGVyY2VudDtcblx0XHR9XG5cdFx0dGhpcy5ub3cgPSAoIHRoaXMuZW5kIC0gdGhpcy5zdGFydCApICogZWFzZWQgKyB0aGlzLnN0YXJ0O1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuc3RlcCApIHtcblx0XHRcdHRoaXMub3B0aW9ucy5zdGVwLmNhbGwoIHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHtcblx0XHRcdGhvb2tzLnNldCggdGhpcyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG5Ud2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7XG5cblR3ZWVuLnByb3BIb29rcyA9IHtcblx0X2RlZmF1bHQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRcdHZhciByZXN1bHQ7XG5cblx0XHRcdC8vIFVzZSBhIHByb3BlcnR5IG9uIHRoZSBlbGVtZW50IGRpcmVjdGx5IHdoZW4gaXQgaXMgbm90IGEgRE9NIGVsZW1lbnQsXG5cdFx0XHQvLyBvciB3aGVuIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHN0eWxlIHByb3BlcnR5IHRoYXQgZXhpc3RzLlxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICE9PSAxIHx8XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cblx0XHRcdC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuXHRcdFx0cmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSBcImF1dG9cIiA/IDAgOiByZXN1bHQ7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblxuXHRcdFx0Ly8gVXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQuXG5cdFx0XHQvLyBVc2UgY3NzSG9vayBpZiBpdHMgdGhlcmUuXG5cdFx0XHQvLyBVc2UgLnN0eWxlIGlmIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlLlxuXHRcdFx0aWYgKCBqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdICkge1xuXHRcdFx0XHRqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApO1xuXHRcdFx0fSBlbHNlIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoXG5cdFx0XHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gfHxcblx0XHRcdFx0XHR0d2Vlbi5lbGVtLnN0eWxlWyBmaW5hbFByb3BOYW1lKCB0d2Vlbi5wcm9wICkgXSAhPSBudWxsICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUUgPD05IG9ubHlcbi8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgJiYgdHdlZW4uZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmVhc2luZyA9IHtcblx0bGluZWFyOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gcDtcblx0fSxcblx0c3dpbmc6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7XG5cdH0sXG5cdF9kZWZhdWx0OiBcInN3aW5nXCJcbn07XG5cbmpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0O1xuXG4vLyBCYWNrIGNvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludFxualF1ZXJ5LmZ4LnN0ZXAgPSB7fTtcblxuXG5cblxudmFyXG5cdGZ4Tm93LCBpblByb2dyZXNzLFxuXHRyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxcblx0cnJ1biA9IC9xdWV1ZUhvb2tzJC87XG5cbmZ1bmN0aW9uIHNjaGVkdWxlKCkge1xuXHRpZiAoIGluUHJvZ3Jlc3MgKSB7XG5cdFx0aWYgKCBkb2N1bWVudC5oaWRkZW4gPT09IGZhbHNlICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7XG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzY2hlZHVsZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aW5kb3cuc2V0VGltZW91dCggc2NoZWR1bGUsIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHRcdH1cblxuXHRcdGpRdWVyeS5meC50aWNrKCk7XG5cdH1cbn1cblxuLy8gQW5pbWF0aW9ucyBjcmVhdGVkIHN5bmNocm9ub3VzbHkgd2lsbCBydW4gc3luY2hyb25vdXNseVxuZnVuY3Rpb24gY3JlYXRlRnhOb3coKSB7XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRmeE5vdyA9IHVuZGVmaW5lZDtcblx0fSApO1xuXHRyZXR1cm4gKCBmeE5vdyA9IERhdGUubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkge1xuXHRcdHdoaWNoID0gY3NzRXhwYW5kWyBpIF07XG5cdFx0YXR0cnNbIFwibWFyZ2luXCIgKyB3aGljaCBdID0gYXR0cnNbIFwicGFkZGluZ1wiICsgd2hpY2ggXSA9IHR5cGU7XG5cdH1cblxuXHRpZiAoIGluY2x1ZGVXaWR0aCApIHtcblx0XHRhdHRycy5vcGFjaXR5ID0gYXR0cnMud2lkdGggPSB0eXBlO1xuXHR9XG5cblx0cmV0dXJuIGF0dHJzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUd2VlbiggdmFsdWUsIHByb3AsIGFuaW1hdGlvbiApIHtcblx0dmFyIHR3ZWVuLFxuXHRcdGNvbGxlY3Rpb24gPSAoIEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCBBbmltYXRpb24udHdlZW5lcnNbIFwiKlwiIF0gKSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCAoIHR3ZWVuID0gY29sbGVjdGlvblsgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIHByb3AsIHZhbHVlICkgKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdHZhciBwcm9wLCB2YWx1ZSwgdG9nZ2xlLCBob29rcywgb2xkZmlyZSwgcHJvcFR3ZWVuLCByZXN0b3JlRGlzcGxheSwgZGlzcGxheSxcblx0XHRpc0JveCA9IFwid2lkdGhcIiBpbiBwcm9wcyB8fCBcImhlaWdodFwiIGluIHByb3BzLFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbldpdGhpblRyZWUoIGVsZW0gKSxcblx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIFF1ZXVlLXNraXBwaW5nIGFuaW1hdGlvbnMgaGlqYWNrIHRoZSBmeCBob29rc1xuXHRpZiAoICFvcHRzLnF1ZXVlICkge1xuXHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcblx0XHRpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7XG5cdFx0XHRob29rcy51bnF1ZXVlZCA9IDA7XG5cdFx0XHRvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhaG9va3MudW5xdWV1ZWQgKSB7XG5cdFx0XHRcdFx0b2xkZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRob29rcy51bnF1ZXVlZCsrO1xuXG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBFbnN1cmUgdGhlIGNvbXBsZXRlIGhhbmRsZXIgaXMgY2FsbGVkIGJlZm9yZSB0aGlzIGNvbXBsZXRlc1xuXHRcdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBEZXRlY3Qgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0Zm9yICggcHJvcCBpbiBwcm9wcyApIHtcblx0XHR2YWx1ZSA9IHByb3BzWyBwcm9wIF07XG5cdFx0aWYgKCByZnh0eXBlcy50ZXN0KCB2YWx1ZSApICkge1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBwcm9wIF07XG5cdFx0XHR0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09IFwidG9nZ2xlXCI7XG5cdFx0XHRpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/IFwiaGlkZVwiIDogXCJzaG93XCIgKSApIHtcblxuXHRcdFx0XHQvLyBQcmV0ZW5kIHRvIGJlIGhpZGRlbiBpZiB0aGlzIGlzIGEgXCJzaG93XCIgYW5kXG5cdFx0XHRcdC8vIHRoZXJlIGlzIHN0aWxsIGRhdGEgZnJvbSBhIHN0b3BwZWQgc2hvdy9oaWRlXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXG5cdFx0XHRcdC8vIElnbm9yZSBhbGwgb3RoZXIgbm8tb3Agc2hvdy9oaWRlIGRhdGFcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0b3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBCYWlsIG91dCBpZiB0aGlzIGlzIGEgbm8tb3AgbGlrZSAuaGlkZSgpLmhpZGUoKVxuXHRwcm9wVHdlZW4gPSAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3BzICk7XG5cdGlmICggIXByb3BUd2VlbiAmJiBqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFJlc3RyaWN0IFwib3ZlcmZsb3dcIiBhbmQgXCJkaXNwbGF5XCIgc3R5bGVzIGR1cmluZyBib3ggYW5pbWF0aW9uc1xuXHRpZiAoIGlzQm94ICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDE1XG5cdFx0Ly8gUmVjb3JkIGFsbCAzIG92ZXJmbG93IGF0dHJpYnV0ZXMgYmVjYXVzZSBJRSBkb2VzIG5vdCBpbmZlciB0aGUgc2hvcnRoYW5kXG5cdFx0Ly8gZnJvbSBpZGVudGljYWxseS12YWx1ZWQgb3ZlcmZsb3dYIGFuZCBvdmVyZmxvd1kgYW5kIEVkZ2UganVzdCBtaXJyb3JzXG5cdFx0Ly8gdGhlIG92ZXJmbG93WCB2YWx1ZSB0aGVyZS5cblx0XHRvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTtcblxuXHRcdC8vIElkZW50aWZ5IGEgZGlzcGxheSB0eXBlLCBwcmVmZXJyaW5nIG9sZCBzaG93L2hpZGUgZGF0YSBvdmVyIHRoZSBDU1MgY2FzY2FkZVxuXHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVNob3cgJiYgZGF0YVNob3cuZGlzcGxheTtcblx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7XG5cdFx0XHRyZXN0b3JlRGlzcGxheSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHR9XG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgKSB7XG5cdFx0XHRcdGRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gR2V0IG5vbmVtcHR5IHZhbHVlKHMpIGJ5IHRlbXBvcmFyaWx5IGZvcmNpbmcgdmlzaWJpbGl0eVxuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgfHwgcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBbmltYXRlIGlubGluZSBlbGVtZW50cyBhcyBpbmxpbmUtYmxvY2tcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwiaW5saW5lXCIgfHwgZGlzcGxheSA9PT0gXCJpbmxpbmUtYmxvY2tcIiAmJiByZXN0b3JlRGlzcGxheSAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cblx0XHRcdFx0Ly8gUmVzdG9yZSB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZSBhdCB0aGUgZW5kIG9mIHB1cmUgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0XHRcdFx0aWYgKCAhcHJvcFR3ZWVuICkge1xuXHRcdFx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdGRpc3BsYXkgPSBzdHlsZS5kaXNwbGF5O1xuXHRcdFx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBkaXNwbGF5ID09PSBcIm5vbmVcIiA/IFwiXCIgOiBkaXNwbGF5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdHN0eWxlLm92ZXJmbG93ID0gb3B0cy5vdmVyZmxvd1sgMCBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIEltcGxlbWVudCBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRwcm9wVHdlZW4gPSBmYWxzZTtcblx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXG5cdFx0Ly8gR2VuZXJhbCBzaG93L2hpZGUgc2V0dXAgZm9yIHRoaXMgZWxlbWVudCBhbmltYXRpb25cblx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRpZiAoIGRhdGFTaG93ICkge1xuXHRcdFx0XHRpZiAoIFwiaGlkZGVuXCIgaW4gZGF0YVNob3cgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgXCJmeHNob3dcIiwgeyBkaXNwbGF5OiByZXN0b3JlRGlzcGxheSB9ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0b3JlIGhpZGRlbi92aXNpYmxlIGZvciB0b2dnbGUgc28gYC5zdG9wKCkudG9nZ2xlKClgIFwicmV2ZXJzZXNcIlxuXHRcdFx0aWYgKCB0b2dnbGUgKSB7XG5cdFx0XHRcdGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNob3cgZWxlbWVudHMgYmVmb3JlIGFuaW1hdGluZyB0aGVtXG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLWxvb3AtZnVuYyAqL1xuXG5cdFx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWxvb3AtZnVuYyAqL1xuXG5cdFx0XHRcdC8vIFRoZSBmaW5hbCBzdGVwIG9mIGEgXCJoaWRlXCIgYW5pbWF0aW9uIGlzIGFjdHVhbGx5IGhpZGluZyB0aGUgZWxlbWVudFxuXHRcdFx0XHRpZiAoICFoaWRkZW4gKSB7XG5cdFx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gUGVyLXByb3BlcnR5IHNldHVwXG5cdFx0cHJvcFR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7XG5cdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRkYXRhU2hvd1sgcHJvcCBdID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdHByb3BUd2Vlbi5lbmQgPSBwcm9wVHdlZW4uc3RhcnQ7XG5cdFx0XHRcdHByb3BUd2Vlbi5zdGFydCA9IDA7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHR2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzO1xuXG5cdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRmb3IgKCBpbmRleCBpbiBwcm9wcyApIHtcblx0XHRuYW1lID0gY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdGVhc2luZyA9IHZhbHVlWyAxIF07XG5cdFx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdID0gdmFsdWVbIDAgXTtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ICE9PSBuYW1lICkge1xuXHRcdFx0cHJvcHNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBpbmRleCBdO1xuXHRcdH1cblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF07XG5cdFx0aWYgKCBob29rcyAmJiBcImV4cGFuZFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG5cdFx0XHRkZWxldGUgcHJvcHNbIG5hbWUgXTtcblxuXHRcdFx0Ly8gTm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBrZXlzLlxuXHRcdFx0Ly8gUmV1c2luZyAnaW5kZXgnIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCBcIm5hbWVcIlxuXHRcdFx0Zm9yICggaW5kZXggaW4gdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHtcblx0XHRcdFx0XHRwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyBpbmRleCBdO1xuXHRcdFx0XHRcdHNwZWNpYWxFYXNpbmdbIGluZGV4IF0gPSBlYXNpbmc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0c3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBBbmltYXRpb24oIGVsZW0sIHByb3BlcnRpZXMsIG9wdGlvbnMgKSB7XG5cdHZhciByZXN1bHQsXG5cdFx0c3RvcHBlZCxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yXG5cdFx0XHRkZWxldGUgdGljay5lbGVtO1xuXHRcdH0gKSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMyBvbmx5XG5cdFx0XHRcdC8vIEFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSBgMSAtICggMC41IHx8IDAgKWAgKCMxMjQ5Nylcblx0XHRcdFx0dGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLFxuXHRcdFx0XHRwZXJjZW50ID0gMSAtIHRlbXAsXG5cdFx0XHRcdGluZGV4ID0gMCxcblx0XHRcdFx0bGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7XG5cblx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSApO1xuXG5cdFx0XHQvLyBJZiB0aGVyZSdzIG1vcmUgdG8gZG8sIHlpZWxkXG5cdFx0XHRpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuIHJlbWFpbmluZztcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhpcyB3YXMgYW4gZW1wdHkgYW5pbWF0aW9uLCBzeW50aGVzaXplIGEgZmluYWwgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uXG5cdFx0XHRpZiAoICFsZW5ndGggKSB7XG5cdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVzb2x2ZSB0aGUgYW5pbWF0aW9uIGFuZCByZXBvcnQgaXRzIGNvbmNsdXNpb25cblx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblx0XHRhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7XG5cdFx0XHRcdHNwZWNpYWxFYXNpbmc6IHt9LFxuXHRcdFx0XHRlYXNpbmc6IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHRcblx0XHRcdH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zXG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0XG5cdFx0XHRcdFx0bGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDtcblx0XHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0b3BwZWQgPSB0cnVlO1xuXHRcdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCAxICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lOyBvdGhlcndpc2UsIHJlamVjdFxuXHRcdFx0XHRpZiAoIGdvdG9FbmQgKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcdH0gKSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0cmVzdWx0ID0gQW5pbWF0aW9uLnByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdGlmICggaXNGdW5jdGlvbiggcmVzdWx0LnN0b3AgKSApIHtcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCBhbmltYXRpb24uZWxlbSwgYW5pbWF0aW9uLm9wdHMucXVldWUgKS5zdG9wID1cblx0XHRcdFx0XHRyZXN1bHQuc3RvcC5iaW5kKCByZXN1bHQgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGlzRnVuY3Rpb24oIGFuaW1hdGlvbi5vcHRzLnN0YXJ0ICkgKSB7XG5cdFx0YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbCggZWxlbSwgYW5pbWF0aW9uICk7XG5cdH1cblxuXHQvLyBBdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9uc1xuXHRhbmltYXRpb25cblx0XHQucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcblxuXHRqUXVlcnkuZngudGltZXIoXG5cdFx0alF1ZXJ5LmV4dGVuZCggdGljaywge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdGFuaW06IGFuaW1hdGlvbixcblx0XHRcdHF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZVxuXHRcdH0gKVxuXHQpO1xuXG5cdHJldHVybiBhbmltYXRpb247XG59XG5cbmpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHtcblxuXHR0d2VlbmVyczoge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICk7XG5cdFx0XHRhZGp1c3RDU1MoIHR3ZWVuLmVsZW0sIHByb3AsIHJjc3NOdW0uZXhlYyggdmFsdWUgKSwgdHdlZW4gKTtcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9IF1cblx0fSxcblxuXHR0d2VlbmVyOiBmdW5jdGlvbiggcHJvcHMsIGNhbGxiYWNrICkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdGh0bWx3aGl0ZSApO1xuXHRcdH1cblxuXHRcdHZhciBwcm9wLFxuXHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0bGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdID0gQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG5cdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXJzOiBbIGRlZmF1bHRQcmVmaWx0ZXIgXSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApO1xuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0aXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcblx0XHRkdXJhdGlvbjogc3BlZWQsXG5cdFx0ZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFpc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmdcblx0fTtcblxuXHQvLyBHbyB0byB0aGUgZW5kIHN0YXRlIGlmIGZ4IGFyZSBvZmZcblx0aWYgKCBqUXVlcnkuZngub2ZmICkge1xuXHRcdG9wdC5kdXJhdGlvbiA9IDA7XG5cblx0fSBlbHNlIHtcblx0XHRpZiAoIHR5cGVvZiBvcHQuZHVyYXRpb24gIT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRpZiAoIG9wdC5kdXJhdGlvbiBpbiBqUXVlcnkuZnguc3BlZWRzICkge1xuXHRcdFx0XHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4LnNwZWVkcy5fZGVmYXVsdDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBOb3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiBcImZ4XCJcblx0aWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7XG5cdFx0b3B0LnF1ZXVlID0gXCJmeFwiO1xuXHR9XG5cblx0Ly8gUXVldWVpbmdcblx0b3B0Lm9sZCA9IG9wdC5jb21wbGV0ZTtcblxuXHRvcHQuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIGlzRnVuY3Rpb24oIG9wdC5vbGQgKSApIHtcblx0XHRcdG9wdC5vbGQuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0LnF1ZXVlICkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIG9wdC5xdWV1ZSApO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gb3B0O1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBTaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDBcblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGlzSGlkZGVuV2l0aGluVHJlZSApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSggeyBvcGFjaXR5OiB0byB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9LFxuXHRhbmltYXRlOiBmdW5jdGlvbiggcHJvcCwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0dmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSxcblx0XHRcdG9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSxcblx0XHRcdGRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFQcml2LmdldCggdGhpcywgXCJmaW5pc2hcIiApICkge1xuXHRcdFx0XHRcdGFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0ZG9BbmltYXRpb24uZmluaXNoID0gZG9BbmltYXRpb247XG5cblx0XHRyZXR1cm4gZW1wdHkgfHwgb3B0YWxsLnF1ZXVlID09PSBmYWxzZSA/XG5cdFx0XHR0aGlzLmVhY2goIGRvQW5pbWF0aW9uICkgOlxuXHRcdFx0dGhpcy5xdWV1ZSggb3B0YWxsLnF1ZXVlLCBkb0FuaW1hdGlvbiApO1xuXHR9LFxuXHRzdG9wOiBmdW5jdGlvbiggdHlwZSwgY2xlYXJRdWV1ZSwgZ290b0VuZCApIHtcblx0XHR2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkge1xuXHRcdFx0dmFyIHN0b3AgPSBob29rcy5zdG9wO1xuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRzdG9wKCBnb3RvRW5kICk7XG5cdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRnb3RvRW5kID0gY2xlYXJRdWV1ZTtcblx0XHRcdGNsZWFyUXVldWUgPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBjbGVhclF1ZXVlICkge1xuXHRcdFx0dGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApO1xuXG5cdFx0XHRpZiAoIGluZGV4ICkge1xuXHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICkge1xuXHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpbmRleCBpbiBkYXRhICkge1xuXHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkge1xuXHRcdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiZcblx0XHRcdFx0XHQoIHR5cGUgPT0gbnVsbCB8fCB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSApIHtcblxuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIGdvdG9FbmQgKTtcblx0XHRcdFx0XHRkZXF1ZXVlID0gZmFsc2U7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGFydCB0aGUgbmV4dCBpbiB0aGUgcXVldWUgaWYgdGhlIGxhc3Qgc3RlcCB3YXNuJ3QgZm9yY2VkLlxuXHRcdFx0Ly8gVGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaFxuXHRcdFx0Ly8gd2lsbCBkZXF1ZXVlIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kLlxuXHRcdFx0aWYgKCBkZXF1ZXVlIHx8ICFnb3RvRW5kICkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpbmRleCxcblx0XHRcdFx0ZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBfaSwgbmFtZSApIHtcblx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBzcGVlZCA9PSBudWxsIHx8IHR5cGVvZiBzcGVlZCA9PT0gXCJib29sZWFuXCIgP1xuXHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdHRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxuLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9uc1xualF1ZXJ5LmVhY2goIHtcblx0c2xpZGVEb3duOiBnZW5GeCggXCJzaG93XCIgKSxcblx0c2xpZGVVcDogZ2VuRngoIFwiaGlkZVwiICksXG5cdHNsaWRlVG9nZ2xlOiBnZW5GeCggXCJ0b2dnbGVcIiApLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxualF1ZXJ5LnRpbWVycyA9IFtdO1xualF1ZXJ5LmZ4LnRpY2sgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRpbWVyLFxuXHRcdGkgPSAwLFxuXHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnM7XG5cblx0ZnhOb3cgPSBEYXRlLm5vdygpO1xuXG5cdGZvciAoIDsgaSA8IHRpbWVycy5sZW5ndGg7IGkrKyApIHtcblx0XHR0aW1lciA9IHRpbWVyc1sgaSBdO1xuXG5cdFx0Ly8gUnVuIHRoZSB0aW1lciBhbmQgc2FmZWx5IHJlbW92ZSBpdCB3aGVuIGRvbmUgKGFsbG93aW5nIGZvciBleHRlcm5hbCByZW1vdmFsKVxuXHRcdGlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkge1xuXHRcdFx0dGltZXJzLnNwbGljZSggaS0tLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCAhdGltZXJzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZnguc3RvcCgpO1xuXHR9XG5cdGZ4Tm93ID0gdW5kZWZpbmVkO1xufTtcblxualF1ZXJ5LmZ4LnRpbWVyID0gZnVuY3Rpb24oIHRpbWVyICkge1xuXHRqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7XG5cdGpRdWVyeS5meC5zdGFydCgpO1xufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5qUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHtcblx0aWYgKCBpblByb2dyZXNzICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGluUHJvZ3Jlc3MgPSB0cnVlO1xuXHRzY2hlZHVsZSgpO1xufTtcblxualF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHtcblx0aW5Qcm9ncmVzcyA9IG51bGw7XG59O1xuXG5qUXVlcnkuZnguc3BlZWRzID0ge1xuXHRzbG93OiA2MDAsXG5cdGZhc3Q6IDIwMCxcblxuXHQvLyBEZWZhdWx0IHNwZWVkXG5cdF9kZWZhdWx0OiA0MDBcbn07XG5cblxuLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLlxuLy8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTAwMzI0MDE0NzQ3L2h0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cbmpRdWVyeS5mbi5kZWxheSA9IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkge1xuXHR0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lO1xuXHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcblx0XHR2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApO1xuXHRcdH07XG5cdH0gKTtcbn07XG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4zIG9ubHlcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgYSBjaGVja2JveCBzaG91bGQgYmUgXCJvblwiXG5cdHN1cHBvcnQuY2hlY2tPbiA9IGlucHV0LnZhbHVlICE9PSBcIlwiO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59ICkoKTtcblxuXG52YXIgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggdGhpcywgbmFtZSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgcmV0LCBob29rcyxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrIHRvIHByb3Agd2hlbiBhdHRyaWJ1dGVzIGFyZSBub3Qgc3VwcG9ydGVkXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXR0cmlidXRlIGhvb2tzIGFyZSBkZXRlcm1pbmVkIGJ5IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdGhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0KCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSA/IGJvb2xIb29rIDogdW5kZWZpbmVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0Ly8gTm9uLWV4aXN0ZW50IGF0dHJpYnV0ZXMgcmV0dXJuIG51bGwsIHdlIG5vcm1hbGl6ZSB0byB1bmRlZmluZWRcblx0XHRyZXR1cm4gcmV0ID09IG51bGwgPyB1bmRlZmluZWQgOiByZXQ7XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0bm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgdmFsdWUgKTtcblx0XHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsXG5cdFx0XHRpID0gMCxcblxuXHRcdFx0Ly8gQXR0cmlidXRlIG5hbWVzIGNhbiBjb250YWluIG5vbi1IVE1MIHdoaXRlc3BhY2UgY2hhcmFjdGVyc1xuXHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApO1xuXG5cdFx0aWYgKCBhdHRyTmFtZXMgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdHdoaWxlICggKCBuYW1lID0gYXR0ck5hbWVzWyBpKysgXSApICkge1xuXHRcdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggbmFtZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2Vcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lICk7XG5cdFx0fVxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG59O1xuXG5qUXVlcnkuZWFjaCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goIC9cXHcrL2cgKSwgZnVuY3Rpb24oIF9pLCBuYW1lICkge1xuXHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cblx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciByZXQsIGhhbmRsZSxcblx0XHRcdGxvd2VyY2FzZU5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRpZiAoICFpc1hNTCApIHtcblxuXHRcdFx0Ly8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlclxuXHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gcmV0O1xuXHRcdFx0cmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgP1xuXHRcdFx0XHRsb3dlcmNhc2VOYW1lIDpcblx0XHRcdFx0bnVsbDtcblx0XHRcdGF0dHJIYW5kbGVbIGxvd2VyY2FzZU5hbWUgXSA9IGhhbmRsZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcbn0gKTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3Ncblx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtWyBuYW1lIF07XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdFx0XHQvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGVcblx0XHRcdFx0Ly8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG5cdFx0XHRcdC8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE0MTExNjIzMzM0Ny9odHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0L1xuXHRcdFx0XHQvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKVxuXHRcdFx0XHR2YXIgdGFiaW5kZXggPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInRhYmluZGV4XCIgKTtcblxuXHRcdFx0XHRpZiAoIHRhYmluZGV4ICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXJzZUludCggdGFiaW5kZXgsIDEwICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0cmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHxcblx0XHRcdFx0XHRyY2xpY2thYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSAmJlxuXHRcdFx0XHRcdGVsZW0uaHJlZlxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cHJvcEZpeDoge1xuXHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHR9XG59ICk7XG5cbi8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5XG4vLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkXG4vLyBvbiB0aGUgb3B0aW9uXG4vLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZFxuLy8gd2hlbiBpbiBhbiBvcHRncm91cFxuLy8gZXNsaW50IHJ1bGUgXCJuby11bnVzZWQtZXhwcmVzc2lvbnNcIiBpcyBkaXNhYmxlZCBmb3IgdGhpcyBjb2RlXG4vLyBzaW5jZSBpdCBjb25zaWRlcnMgc3VjaCBhY2Nlc3Npb25zIG5vb3BcbmlmICggIXN1cHBvcnQub3B0U2VsZWN0ZWQgKSB7XG5cdGpRdWVyeS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogXCJvZmZcIiAqL1xuXG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdC8qIGVzbGludCBuby11bnVzZWQtZXhwcmVzc2lvbnM6IFwib2ZmXCIgKi9cblxuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcdFx0XHRwYXJlbnQuc2VsZWN0ZWRJbmRleDtcblxuXHRcdFx0XHRpZiAoIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKCBbXG5cdFwidGFiSW5kZXhcIixcblx0XCJyZWFkT25seVwiLFxuXHRcIm1heExlbmd0aFwiLFxuXHRcImNlbGxTcGFjaW5nXCIsXG5cdFwiY2VsbFBhZGRpbmdcIixcblx0XCJyb3dTcGFuXCIsXG5cdFwiY29sU3BhblwiLFxuXHRcInVzZU1hcFwiLFxuXHRcImZyYW1lQm9yZGVyXCIsXG5cdFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSApO1xuXG5cblxuXG5cdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlIGFjY29yZGluZyB0byBIVE1MIHNwZWNcblx0Ly8gaHR0cHM6Ly9pbmZyYS5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS1hc2NpaS13aGl0ZXNwYWNlXG5cdGZ1bmN0aW9uIHN0cmlwQW5kQ29sbGFwc2UoIHZhbHVlICkge1xuXHRcdHZhciB0b2tlbnMgPSB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXHRcdHJldHVybiB0b2tlbnMuam9pbiggXCIgXCIgKTtcblx0fVxuXG5cbmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkge1xuXHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApIHtcblx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTtcblx0fVxuXHRyZXR1cm4gW107XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0Y2xhc3NlcyA9IGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCBjbGFzc2VzLmxlbmd0aCApIHtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0Y3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApO1xuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBjdXJWYWx1ZSApICsgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hdHRyKCBcImNsYXNzXCIsIFwiXCIgKTtcblx0XHR9XG5cblx0XHRjbGFzc2VzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIGNsYXNzZXMubGVuZ3RoICkge1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cblx0XHRcdFx0Ly8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiIFwiICsgc3RyaXBBbmRDb2xsYXBzZSggY3VyVmFsdWUgKSArIFwiIFwiICk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkge1xuXHRcdHZhciB0eXBlID0gdHlwZW9mIHZhbHVlLFxuXHRcdFx0aXNWYWxpZFZhbHVlID0gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGVWYWwgPT09IFwiYm9vbGVhblwiICYmIGlzVmFsaWRWYWx1ZSApIHtcblx0XHRcdHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcyhcblx0XHRcdFx0XHR2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLFxuXHRcdFx0XHRcdHN0YXRlVmFsXG5cdFx0XHRcdCk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY2xhc3NOYW1lLCBpLCBzZWxmLCBjbGFzc05hbWVzO1xuXG5cdFx0XHRpZiAoIGlzVmFsaWRWYWx1ZSApIHtcblxuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHRpID0gMDtcblx0XHRcdFx0c2VsZiA9IGpRdWVyeSggdGhpcyApO1xuXHRcdFx0XHRjbGFzc05hbWVzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRcdFx0d2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTtcblx0XHRcdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHQvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHQvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdGlmICggdGhpcy5zZXRBdHRyaWJ1dGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcblx0XHRcdFx0XHRcdGNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0XHRcdFx0XCJcIiA6XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgY2xhc3NOYW1lLCBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRjbGFzc05hbWUgPSBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCI7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBnZXRDbGFzcyggZWxlbSApICkgKyBcIiBcIiApLmluZGV4T2YoIGNsYXNzTmFtZSApID4gLTEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59ICk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHZhbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LCB2YWx1ZUlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0XHRpZiAoIGhvb2tzICYmXG5cdFx0XHRcdFx0XCJnZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSApICE9PSB1bmRlZmluZWRcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldCA9IGVsZW0udmFsdWU7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRpZiAoIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldC5yZXBsYWNlKCBycmV0dXJuLCBcIlwiICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhbHVlSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdHZhciB2YWw7XG5cblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZhbHVlSXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggQXJyYXkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIjtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgXCJ2YWx1ZVwiICkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHR2YWxIb29rczoge1xuXHRcdG9wdGlvbjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHR2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ2YWx1ZVwiICk7XG5cdFx0XHRcdHJldHVybiB2YWwgIT0gbnVsbCA/XG5cdFx0XHRcdFx0dmFsIDpcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTAgLSAxMSBvbmx5XG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRzdHJpcEFuZENvbGxhcHNlKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLCBpLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIixcblx0XHRcdFx0XHR2YWx1ZXMgPSBvbmUgPyBudWxsIDogW10sXG5cdFx0XHRcdFx0bWF4ID0gb25lID8gaW5kZXggKyAxIDogb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0aWYgKCBpbmRleCA8IDAgKSB7XG5cdFx0XHRcdFx0aSA9IG1heDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGkgPSBvbmUgPyBpbmRleCA6IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdFx0XHRcdFx0Ly8gSUU4LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG5cdFx0XHRcdFx0aWYgKCAoIG9wdGlvbi5zZWxlY3RlZCB8fCBpID09PSBpbmRleCApICYmXG5cblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0XHRcdFx0XHQhb3B0aW9uLmRpc2FibGVkICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8XG5cdFx0XHRcdFx0XHRcdFx0IW5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gR2V0IHRoZSBzcGVjaWZpYyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxuXHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXG5cdFx0XHRcdFx0XHQvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0c1xuXHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTXVsdGktU2VsZWN0cyByZXR1cm4gYW4gYXJyYXlcblx0XHRcdFx0XHRcdHZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIG9wdGlvblNldCwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRpID0gb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblxuXHRcdFx0XHRcdGlmICggb3B0aW9uLnNlbGVjdGVkID1cblx0XHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTFcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdG9wdGlvblNldCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcblx0XHRcdFx0aWYgKCAhb3B0aW9uU2V0ICkge1xuXHRcdFx0XHRcdGVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaCggWyBcInJhZGlvXCIsIFwiY2hlY2tib3hcIiBdLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoIGVsZW0gKS52YWwoKSwgdmFsdWUgKSA+IC0xICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7XG5cdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBudWxsID8gXCJvblwiIDogZWxlbS52YWx1ZTtcblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFJldHVybiBqUXVlcnkgZm9yIGF0dHJpYnV0ZXMtb25seSBpbmNsdXNpb25cblxuXG5zdXBwb3J0LmZvY3VzaW4gPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXIgcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sXG5cdHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24oIGUgKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0fTtcblxualF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmV2ZW50LCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG5cblx0XHR2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLCBsYXN0RWxlbWVudCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggXCIuXCIgKSA6IFtdO1xuXG5cdFx0Y3VyID0gbGFzdEVsZW1lbnQgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDtcblxuXHRcdC8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG5cdFx0aWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZS5pbmRleE9mKCBcIi5cIiApID4gLTEgKSB7XG5cblx0XHRcdC8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKClcblx0XHRcdG5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KCBcIi5cIiApO1xuXHRcdFx0dHlwZSA9IG5hbWVzcGFjZXMuc2hpZnQoKTtcblx0XHRcdG5hbWVzcGFjZXMuc29ydCgpO1xuXHRcdH1cblx0XHRvbnR5cGUgPSB0eXBlLmluZGV4T2YoIFwiOlwiICkgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKTtcblx0XHRldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApIDpcblx0XHRcdG51bGw7XG5cblx0XHQvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWRcblx0XHRldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZWxlbTtcblx0XHR9XG5cblx0XHQvLyBDbG9uZSBhbnkgaW5jb21pbmcgZGF0YSBhbmQgcHJlcGVuZCB0aGUgZXZlbnQsIGNyZWF0aW5nIHRoZSBoYW5kbGVyIGFyZyBsaXN0XG5cdFx0ZGF0YSA9IGRhdGEgPT0gbnVsbCA/XG5cdFx0XHRbIGV2ZW50IF0gOlxuXHRcdFx0alF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7XG5cblx0XHQvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzXG5cdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpXG5cdFx0Ly8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNClcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdGJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlO1xuXHRcdFx0aWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHtcblx0XHRcdFx0Y3VyID0gY3VyLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0dG1wID0gY3VyO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSlcblx0XHRcdGlmICggdG1wID09PSAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRsYXN0RWxlbWVudCA9IGN1cjtcblx0XHRcdGV2ZW50LnR5cGUgPSBpID4gMSA/XG5cdFx0XHRcdGJ1YmJsZVR5cGUgOlxuXHRcdFx0XHRzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7XG5cblx0XHRcdC8vIGpRdWVyeSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSAoXG5cdFx0XHRcdFx0ZGF0YVByaXYuZ2V0KCBjdXIsIFwiZXZlbnRzXCIgKSB8fCBPYmplY3QuY3JlYXRlKCBudWxsIClcblx0XHRcdFx0KVsgZXZlbnQudHlwZSBdICYmXG5cdFx0XHRcdGRhdGFQcml2LmdldCggY3VyLCBcImhhbmRsZVwiICk7XG5cdFx0XHRpZiAoIGhhbmRsZSApIHtcblx0XHRcdFx0aGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTmF0aXZlIGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdO1xuXHRcdFx0aWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGFjY2VwdERhdGEoIGN1ciApICkge1xuXHRcdFx0XHRldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRldmVudC50eXBlID0gdHlwZTtcblxuXHRcdC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXG5cdFx0XHRpZiAoICggIXNwZWNpYWwuX2RlZmF1bHQgfHxcblx0XHRcdFx0c3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlICkgJiZcblx0XHRcdFx0YWNjZXB0RGF0YSggZWxlbSApICkge1xuXG5cdFx0XHRcdC8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgaXNGdW5jdGlvbiggZWxlbVsgdHlwZSBdICkgJiYgIWlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG5cdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXG5cdFx0XHRcdFx0aWYgKCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0XHRcdFx0bGFzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRlbGVtWyB0eXBlIF0oKTtcblxuXHRcdFx0XHRcdGlmICggZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdFx0XHRcdGxhc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmVcblx0Ly8gVXNlZCBvbmx5IGZvciBgZm9jdXMoaW4gfCBvdXQpYCBldmVudHNcblx0c2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCApIHtcblx0XHR2YXIgZSA9IGpRdWVyeS5leHRlbmQoXG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCksXG5cdFx0XHRldmVudCxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0aXNTaW11bGF0ZWQ6IHRydWVcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTtcblx0fVxuXG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSApO1xuXHR9LFxuXHR0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIGVsZW0gPSB0aGlzWyAwIF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cblxuLy8gU3VwcG9ydDogRmlyZWZveCA8PTQ0XG4vLyBGaXJlZm94IGRvZXNuJ3QgaGF2ZSBmb2N1cyhpbiB8IG91dCkgZXZlbnRzXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY4Nzc4N1xuLy9cbi8vIFN1cHBvcnQ6IENocm9tZSA8PTQ4IC0gNDksIFNhZmFyaSA8PTkuMCAtIDkuMVxuLy8gZm9jdXMoaW4gfCBvdXQpIGV2ZW50cyBmaXJlIGFmdGVyIGZvY3VzICYgYmx1ciBldmVudHMsXG4vLyB3aGljaCBpcyBzcGVjIHZpb2xhdGlvbiAtIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWZvY3VzZXZlbnQtZXZlbnQtb3JkZXJcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ5ODU3XG5pZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7XG5cdGpRdWVyeS5lYWNoKCB7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cblx0XHQvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuXHRcdHZhciBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSApO1xuXHRcdH07XG5cblx0XHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7XG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gSGFuZGxlOiByZWd1bGFyIG5vZGVzICh2aWEgYHRoaXMub3duZXJEb2N1bWVudGApLCB3aW5kb3dcblx0XHRcdFx0Ly8gKHZpYSBgdGhpcy5kb2N1bWVudGApICYgZG9jdW1lbnQgKHZpYSBgdGhpc2ApLlxuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMuZG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApO1xuXHRcdFx0fSxcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLmRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgYXR0YWNoZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0gKTtcbn1cbnZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblxudmFyIG5vbmNlID0geyBndWlkOiBEYXRlLm5vdygpIH07XG5cbnZhciBycXVlcnkgPSAoIC9cXD8vICk7XG5cblxuXG4vLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nXG5qUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0dmFyIHhtbDtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdC8vIElFIHRocm93cyBvbiBwYXJzZUZyb21TdHJpbmcgd2l0aCBpbnZhbGlkIGlucHV0LlxuXHR0cnkge1xuXHRcdHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIEFycmF5LmlzQXJyYXkoIG9iaiApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIGFycmF5IGl0ZW0uXG5cdFx0alF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7XG5cdFx0XHRpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkge1xuXG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBJdGVtIGlzIG5vbi1zY2FsYXIgKGFycmF5IG9yIG9iamVjdCksIGVuY29kZSBpdHMgbnVtZXJpYyBpbmRleC5cblx0XHRcdFx0YnVpbGRQYXJhbXMoXG5cdFx0XHRcdFx0cHJlZml4ICsgXCJbXCIgKyAoIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT0gbnVsbCA/IGkgOiBcIlwiICkgKyBcIl1cIixcblx0XHRcdFx0XHR2LFxuXHRcdFx0XHRcdHRyYWRpdGlvbmFsLFxuXHRcdFx0XHRcdGFkZFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgdG9UeXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRhZGQoIHByZWZpeCwgb2JqICk7XG5cdH1cbn1cblxuLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcbi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xualF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkge1xuXHR2YXIgcHJlZml4LFxuXHRcdHMgPSBbXSxcblx0XHRhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZU9yRnVuY3Rpb24gKSB7XG5cblx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgdXNlIGl0cyByZXR1cm4gdmFsdWVcblx0XHRcdHZhciB2YWx1ZSA9IGlzRnVuY3Rpb24oIHZhbHVlT3JGdW5jdGlvbiApID9cblx0XHRcdFx0dmFsdWVPckZ1bmN0aW9uKCkgOlxuXHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb247XG5cblx0XHRcdHNbIHMubGVuZ3RoIF0gPSBlbmNvZGVVUklDb21wb25lbnQoIGtleSApICsgXCI9XCIgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKTtcblx0XHR9O1xuXG5cdGlmICggYSA9PSBudWxsICkge1xuXHRcdHJldHVybiBcIlwiO1xuXHR9XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBBcnJheS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0alF1ZXJ5LmVhY2goIGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0YWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTtcblx0XHR9ICk7XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlIFwib2xkXCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyXG5cdFx0Ly8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuXG5cdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb25cblx0cmV0dXJuIHMuam9pbiggXCImXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2VyaWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTtcblx0fSxcblx0c2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIENhbiBhZGQgcHJvcEhvb2sgZm9yIFwiZWxlbWVudHNcIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHNcblx0XHRcdHZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCBcImVsZW1lbnRzXCIgKTtcblx0XHRcdHJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzO1xuXHRcdH0gKVxuXHRcdC5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9IClcblx0XHQubWFwKCBmdW5jdGlvbiggX2ksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9ICkuZ2V0KCk7XG5cdH1cbn0gKTtcblxuXG52YXJcblx0cjIwID0gLyUyMC9nLFxuXHRyaGFzaCA9IC8jLiokLyxcblx0cmFudGlDYWNoZSA9IC8oWz8mXSlfPVteJl0qLyxcblx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXG5cdC8qIFByZWZpbHRlcnNcblx0ICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSlcblx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0ICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuXHQgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpXG5cdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0cHJlZmlsdGVycyA9IHt9LFxuXG5cdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0ICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0dHJhbnNwb3J0cyA9IHt9LFxuXG5cdC8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvblxuXHRhbGxUeXBlcyA9IFwiKi9cIi5jb25jYXQoIFwiKlwiICksXG5cblx0Ly8gQW5jaG9yIHRhZyBmb3IgcGFyc2luZyB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9yaWdpbkFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cblx0Ly8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuXHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuXHRcdGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcblx0XHR9XG5cblx0XHR2YXIgZGF0YVR5cGUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkge1xuXG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbIDAgXSA9PT0gXCIrXCIgKSB7XG5cdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkudW5zaGlmdCggZnVuYyApO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXG5cdFx0XHRcdG9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkge1xuXHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdH1cblx0fVxuXHRpZiAoIGRlZXAgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6XG4gKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG5cblx0dmFyIGN0LCB0eXBlLCBmaW5hbERhdGFUeXBlLCBmaXJzdERhdGFUeXBlLFxuXHRcdGNvbnRlbnRzID0gcy5jb250ZW50cyxcblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuXHQvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuXHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRkYXRhVHlwZXMuc2hpZnQoKTtcblx0XHRpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcblx0aWYgKCBjdCApIHtcblx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0aWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcblx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG5cdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdGZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0ZmluYWxEYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhZmlyc3REYXRhVHlwZSApIHtcblx0XHRcdFx0Zmlyc3REYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0ZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTtcblx0fVxuXG5cdC8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGVcblx0Ly8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWRcblx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRpZiAoIGZpbmFsRGF0YVR5cGUgKSB7XG5cdFx0aWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcblx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTtcblx0fVxufVxuXG4vKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG4gKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHR2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldixcblx0XHRjb252ZXJ0ZXJzID0ge30sXG5cblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cblx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cblx0XHRcdC8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnRcblx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXJcblx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cblx0XHRcdFx0Ly8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXJcblx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIHRtcFsgMCBdIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0aWYgKCBjb252ICYmIHMudGhyb3dzICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogXCJwYXJzZXJlcnJvclwiLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudFxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllc1xuXHRhY3RpdmU6IDAsXG5cblx0Ly8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdFxuXHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRldGFnOiB7fSxcblxuXHRhamF4U2V0dGluZ3M6IHtcblx0XHR1cmw6IGxvY2F0aW9uLmhyZWYsXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBsb2NhdGlvbi5wcm90b2NvbCApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblxuXHRcdC8qXG5cdFx0dGltZW91dDogMCxcblx0XHRkYXRhOiBudWxsLFxuXHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdHVzZXJuYW1lOiBudWxsLFxuXHRcdHBhc3N3b3JkOiBudWxsLFxuXHRcdGNhY2hlOiBudWxsLFxuXHRcdHRocm93czogZmFsc2UsXG5cdFx0dHJhZGl0aW9uYWw6IGZhbHNlLFxuXHRcdGhlYWRlcnM6IHt9LFxuXHRcdCovXG5cblx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcIipcIjogYWxsVHlwZXMsXG5cdFx0XHR0ZXh0OiBcInRleHQvcGxhaW5cIixcblx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHR4bWw6IFwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLFxuXHRcdFx0anNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIlxuXHRcdH0sXG5cblx0XHRjb250ZW50czoge1xuXHRcdFx0eG1sOiAvXFxieG1sXFxiLyxcblx0XHRcdGh0bWw6IC9cXGJodG1sLyxcblx0XHRcdGpzb246IC9cXGJqc29uXFxiL1xuXHRcdH0sXG5cblx0XHRyZXNwb25zZUZpZWxkczoge1xuXHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHR0ZXh0OiBcInJlc3BvbnNlVGV4dFwiLFxuXHRcdFx0anNvbjogXCJyZXNwb25zZUpTT05cIlxuXHRcdH0sXG5cblx0XHQvLyBEYXRhIGNvbnZlcnRlcnNcblx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0Y29udmVydGVyczoge1xuXG5cdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFwiKiB0ZXh0XCI6IFN0cmluZyxcblxuXHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcInRleHQgaHRtbFwiOiB0cnVlLFxuXG5cdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcInRleHQganNvblwiOiBKU09OLnBhcnNlLFxuXG5cdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XCJ0ZXh0IHhtbFwiOiBqUXVlcnkucGFyc2VYTUxcblx0XHR9LFxuXG5cdFx0Ly8gRm9yIG9wdGlvbnMgdGhhdCBzaG91bGRuJ3QgYmUgZGVlcCBleHRlbmRlZDpcblx0XHQvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmXG5cdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHQvLyBkZWVwIGV4dGVuZGVkIChzZWUgYWpheEV4dGVuZClcblx0XHRmbGF0T3B0aW9uczoge1xuXHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0Y29udGV4dDogdHJ1ZVxuXHRcdH1cblx0fSxcblxuXHQvLyBDcmVhdGVzIGEgZnVsbCBmbGVkZ2VkIHNldHRpbmdzIG9iamVjdCBpbnRvIHRhcmdldFxuXHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdC8vIElmIHRhcmdldCBpcyBvbWl0dGVkLCB3cml0ZXMgaW50byBhamF4U2V0dGluZ3MuXG5cdGFqYXhTZXR1cDogZnVuY3Rpb24oIHRhcmdldCwgc2V0dGluZ3MgKSB7XG5cdFx0cmV0dXJuIHNldHRpbmdzID9cblxuXHRcdFx0Ly8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3Rcblx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblxuXHRcdFx0Ly8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5nc1xuXHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdH0sXG5cblx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdGFqYXhUcmFuc3BvcnQ6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cyApLFxuXG5cdC8vIE1haW4gbWV0aG9kXG5cdGFqYXg6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdGlmICggdHlwZW9mIHVybCA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdG9wdGlvbnMgPSB1cmw7XG5cdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRcdHZhciB0cmFuc3BvcnQsXG5cblx0XHRcdC8vIFVSTCB3aXRob3V0IGFudGktY2FjaGUgcGFyYW1cblx0XHRcdGNhY2hlVVJMLFxuXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cblx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHR0aW1lb3V0VGltZXIsXG5cblx0XHRcdC8vIFVybCBjbGVhbnVwIHZhclxuXHRcdFx0dXJsQW5jaG9yLFxuXG5cdFx0XHQvLyBSZXF1ZXN0IHN0YXRlIChiZWNvbWVzIGZhbHNlIHVwb24gc2VuZCBhbmQgdHJ1ZSB1cG9uIGNvbXBsZXRpb24pXG5cdFx0XHRjb21wbGV0ZWQsXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cblx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdGksXG5cblx0XHRcdC8vIHVuY2FjaGVkIHBhcnQgb2YgdGhlIHVybFxuXHRcdFx0dW5jYWNoZWQsXG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cblx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJlxuXHRcdFx0XHQoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudCxcblxuXHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblxuXHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdHJlcXVlc3RIZWFkZXJzID0ge30sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cblx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cblx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0cmVhZHlTdGF0ZTogMCxcblxuXHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzID0ge307XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgKyBcIiBcIiBdID1cblx0XHRcdFx0XHRcdFx0XHRcdCggcmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgKyBcIiBcIiBdIHx8IFtdIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmNvbmNhdCggbWF0Y2hbIDIgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHJlc3BvbnNlSGVhZGVyc1sga2V5LnRvTG93ZXJDYXNlKCkgKyBcIiBcIiBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaC5qb2luKCBcIiwgXCIgKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbXBsZXRlZCA/IHJlc3BvbnNlSGVhZGVyc1N0cmluZyA6IG51bGw7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FjaGVzIHRoZSBoZWFkZXJcblx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRuYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gPVxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0cmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2tzIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdGZvciAoIGNvZGUgaW4gbWFwICkge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApO1xuXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgbG9jYXRpb24uaHJlZiApICsgXCJcIiApXG5cdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiApO1xuXG5cdFx0Ly8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0XG5cdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuXHRcdC8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3Rcblx0XHRzLmRhdGFUeXBlcyA9ICggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblxuXHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkge1xuXHRcdFx0dXJsQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEsIEVkZ2UgMTIgLSAxNVxuXHRcdFx0Ly8gSUUgdGhyb3dzIGV4Y2VwdGlvbiBvbiBhY2Nlc3NpbmcgdGhlIGhyZWYgcHJvcGVydHkgaWYgdXJsIGlzIG1hbGZvcm1lZCxcblx0XHRcdC8vIGUuZy4gaHR0cDovL2V4YW1wbGUuY29tOjgweC9cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gcy51cmw7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEgb25seVxuXHRcdFx0XHQvLyBBbmNob3IncyBob3N0IHByb3BlcnR5IGlzbid0IGNvcnJlY3RseSBzZXQgd2hlbiBzLnVybCBpcyByZWxhdGl2ZVxuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHVybEFuY2hvci5ocmVmO1xuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gb3JpZ2luQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgb3JpZ2luQW5jaG9yLmhvc3QgIT09XG5cdFx0XHRcdFx0dXJsQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgdXJsQW5jaG9yLmhvc3Q7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBVUkwsIGFzc3VtZSBpdCBpcyBjcm9zc0RvbWFpbixcblx0XHRcdFx0Ly8gaXQgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSB0cmFuc3BvcnQgaWYgaXQgaXMgaW52YWxpZFxuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdGZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdGlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0YXJ0XCIgKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHQvLyBSZW1vdmUgaGFzaCB0byBzaW1wbGlmeSB1cmwgbWFuaXB1bGF0aW9uXG5cdFx0Y2FjaGVVUkwgPSBzLnVybC5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBoYXNoIHNvIHdlIGNhbiBwdXQgaXQgYmFja1xuXHRcdFx0dW5jYWNoZWQgPSBzLnVybC5zbGljZSggY2FjaGVVUkwubGVuZ3RoICk7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlIGFuZCBzaG91bGQgYmUgcHJvY2Vzc2VkLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICYmICggcy5wcm9jZXNzRGF0YSB8fCB0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICkgKSB7XG5cdFx0XHRcdGNhY2hlVVJMICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGE7XG5cblx0XHRcdFx0Ly8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeVxuXHRcdFx0XHRkZWxldGUgcy5kYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgb3IgdXBkYXRlIGFudGktY2FjaGUgcGFyYW0gaWYgbmVlZGVkXG5cdFx0XHRpZiAoIHMuY2FjaGUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9IGNhY2hlVVJMLnJlcGxhY2UoIHJhbnRpQ2FjaGUsIFwiJDFcIiApO1xuXHRcdFx0XHR1bmNhY2hlZCA9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyAoIG5vbmNlLmd1aWQrKyApICtcblx0XHRcdFx0XHR1bmNhY2hlZDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHV0IGhhc2ggYW5kIGFudGktY2FjaGUgb24gdGhlIFVSTCB0aGF0IHdpbGwgYmUgcmVxdWVzdGVkIChnaC0xNzMyKVxuXHRcdFx0cy51cmwgPSBjYWNoZVVSTCArIHVuY2FjaGVkO1xuXG5cdFx0Ly8gQ2hhbmdlICclMjAnIHRvICcrJyBpZiB0aGlzIGlzIGVuY29kZWQgZm9ybSBib2R5IGNvbnRlbnQgKGdoLTI2NTgpXG5cdFx0fSBlbHNlIGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiZcblx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiICkuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICkge1xuXHRcdFx0cy5kYXRhID0gcy5kYXRhLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0aWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU1vZGlmaWVkLVNpbmNlXCIsIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHRcdGlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTm9uZS1NYXRjaFwiLCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgY29ycmVjdCBoZWFkZXIsIGlmIGRhdGEgaXMgYmVpbmcgc2VudFxuXHRcdGlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkge1xuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJDb250ZW50LVR5cGVcIiwgcy5jb250ZW50VHlwZSApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgQWNjZXB0cyBoZWFkZXIgZm9yIHRoZSBzZXJ2ZXIsIGRlcGVuZGluZyBvbiB0aGUgZGF0YVR5cGVcblx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKFxuXHRcdFx0XCJBY2NlcHRcIixcblx0XHRcdHMuZGF0YVR5cGVzWyAwIF0gJiYgcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSArXG5cdFx0XHRcdFx0KCBzLmRhdGFUeXBlc1sgMCBdICE9PSBcIipcIiA/IFwiLCBcIiArIGFsbFR5cGVzICsgXCI7IHE9MC4wMVwiIDogXCJcIiApIDpcblx0XHRcdFx0cy5hY2NlcHRzWyBcIipcIiBdXG5cdFx0KTtcblxuXHRcdC8vIENoZWNrIGZvciBoZWFkZXJzIG9wdGlvblxuXHRcdGZvciAoIGkgaW4gcy5oZWFkZXJzICkge1xuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTtcblx0XHR9XG5cblx0XHQvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0XG5cdFx0aWYgKCBzLmJlZm9yZVNlbmQgJiZcblx0XHRcdCggcy5iZWZvcmVTZW5kLmNhbGwoIGNhbGxiYWNrQ29udGV4dCwganFYSFIsIHMgKSA9PT0gZmFsc2UgfHwgY29tcGxldGVkICkgKSB7XG5cblx0XHRcdC8vIEFib3J0IGlmIG5vdCBkb25lIGFscmVhZHkgYW5kIHJldHVyblxuXHRcdFx0cmV0dXJuIGpxWEhSLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uXG5cdFx0c3RyQWJvcnQgPSBcImFib3J0XCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHNcblx0XHRjb21wbGV0ZURlZmVycmVkLmFkZCggcy5jb21wbGV0ZSApO1xuXHRcdGpxWEhSLmRvbmUoIHMuc3VjY2VzcyApO1xuXHRcdGpxWEhSLmZhaWwoIHMuZXJyb3IgKTtcblxuXHRcdC8vIEdldCB0cmFuc3BvcnRcblx0XHR0cmFuc3BvcnQgPSBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIG5vIHRyYW5zcG9ydCwgd2UgYXV0by1hYm9ydFxuXHRcdGlmICggIXRyYW5zcG9ydCApIHtcblx0XHRcdGRvbmUoIC0xLCBcIk5vIFRyYW5zcG9ydFwiICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSAxO1xuXG5cdFx0XHQvLyBTZW5kIGdsb2JhbCBldmVudFxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheFNlbmRcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGFqYXhTZW5kLCBzdG9wIHRoZXJlXG5cdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUaW1lb3V0XG5cdFx0XHRpZiAoIHMuYXN5bmMgJiYgcy50aW1lb3V0ID4gMCApIHtcblx0XHRcdFx0dGltZW91dFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KCBcInRpbWVvdXRcIiApO1xuXHRcdFx0XHR9LCBzLnRpbWVvdXQgKTtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHRcdHRyYW5zcG9ydC5zZW5kKCByZXF1ZXN0SGVhZGVycywgZG9uZSApO1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0Ly8gUmV0aHJvdyBwb3N0LWNvbXBsZXRpb24gZXhjZXB0aW9uc1xuXHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUHJvcGFnYXRlIG90aGVycyBhcyByZXN1bHRzXG5cdFx0XHRcdGRvbmUoIC0xLCBlICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gSWdub3JlIHJlcGVhdCBpbnZvY2F0aW9uc1xuXHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29tcGxldGVkID0gdHJ1ZTtcblxuXHRcdFx0Ly8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHNcblx0XHRcdGlmICggdGltZW91dFRpbWVyICkge1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXNlIGEgbm9vcCBjb252ZXJ0ZXIgZm9yIG1pc3Npbmcgc2NyaXB0XG5cdFx0XHRpZiAoICFpc1N1Y2Nlc3MgJiYgalF1ZXJ5LmluQXJyYXkoIFwic2NyaXB0XCIsIHMuZGF0YVR5cGVzICkgPiAtMSApIHtcblx0XHRcdFx0cy5jb252ZXJ0ZXJzWyBcInRleHQgc2NyaXB0XCIgXSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldClcblx0XHRcdHJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7XG5cblx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblxuXHRcdFx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcIkxhc3QtTW9kaWZpZWRcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiZXRhZ1wiICk7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgbm8gY29udGVudFxuXHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gXCJIRUFEXCIgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm9jb250ZW50XCI7XG5cblx0XHRcdFx0Ly8gaWYgbm90IG1vZGlmaWVkXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vdG1vZGlmaWVkXCI7XG5cblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBkYXRhLCBsZXQncyBjb252ZXJ0IGl0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlO1xuXHRcdFx0XHRcdHN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdGVycm9yID0gcmVzcG9uc2UuZXJyb3I7XG5cdFx0XHRcdFx0aXNTdWNjZXNzID0gIWVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0IGFuZCBub3JtYWxpemUgZm9yIG5vbi1hYm9ydHNcblx0XHRcdFx0ZXJyb3IgPSBzdGF0dXNUZXh0O1xuXHRcdFx0XHRpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJlcnJvclwiO1xuXHRcdFx0XHRcdGlmICggc3RhdHVzIDwgMCApIHtcblx0XHRcdFx0XHRcdHN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0XG5cdFx0XHRqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHRqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArIFwiXCI7XG5cblx0XHRcdC8vIFN1Y2Nlc3MvRXJyb3Jcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0anFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApO1xuXHRcdFx0c3RhdHVzQ29kZSA9IHVuZGVmaW5lZDtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG5cdFx0XHRcdFx0WyBqcVhIUiwgcywgaXNTdWNjZXNzID8gc3VjY2VzcyA6IGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29tcGxldGVcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RvcFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ganFYSFI7XG5cdH0sXG5cblx0Z2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG5cdH0sXG5cblx0Z2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCBcInNjcmlwdFwiICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIF9pLCBtZXRob2QgKSB7XG5cdGpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHtcblxuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHtcblx0dmFyIGk7XG5cdGZvciAoIGkgaW4gcy5oZWFkZXJzICkge1xuXHRcdGlmICggaS50b0xvd2VyQ2FzZSgpID09PSBcImNvbnRlbnQtdHlwZVwiICkge1xuXHRcdFx0cy5jb250ZW50VHlwZSA9IHMuaGVhZGVyc1sgaSBdIHx8IFwiXCI7XG5cdFx0fVxuXHR9XG59ICk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCwgb3B0aW9ucywgZG9jICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoIHtcblx0XHR1cmw6IHVybCxcblxuXHRcdC8vIE1ha2UgdGhpcyBleHBsaWNpdCwgc2luY2UgdXNlciBjYW4gb3ZlcnJpZGUgdGhpcyB0aHJvdWdoIGFqYXhTZXR1cCAoIzExMjY0KVxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0Y2FjaGU6IHRydWUsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cblx0XHQvLyBPbmx5IGV2YWx1YXRlIHRoZSByZXNwb25zZSBpZiBpdCBpcyBzdWNjZXNzZnVsIChnaC00MTI2KVxuXHRcdC8vIGRhdGFGaWx0ZXIgaXMgbm90IGludm9rZWQgZm9yIGZhaWx1cmUgcmVzcG9uc2VzLCBzbyB1c2luZyBpdCBpbnN0ZWFkXG5cdFx0Ly8gb2YgdGhlIGRlZmF1bHQgY29udmVydGVyIGlzIGtsdWRneSBidXQgaXQgd29ya3MuXG5cdFx0Y29udmVydGVyczoge1xuXHRcdFx0XCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbigpIHt9XG5cdFx0fSxcblx0XHRkYXRhRmlsdGVyOiBmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggcmVzcG9uc2UsIG9wdGlvbnMsIGRvYyApO1xuXHRcdH1cblx0fSApO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdFx0aHRtbCA9IGh0bWwuY2FsbCggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblxuXHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHR3cmFwLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblxuXHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZWxlbTtcblx0XHRcdH0gKS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpO1xuXG5cdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0Y29udGVudHMud3JhcEFsbCggaHRtbCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmFwcGVuZCggaHRtbCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHR3cmFwOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgaHRtbElzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCBodG1sICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWxJc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdHVud3JhcDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHRoaXMucGFyZW50KCBzZWxlY3RvciApLm5vdCggXCJib2R5XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSggZWxlbSApO1xufTtcbmpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gISEoIGVsZW0ub2Zmc2V0V2lkdGggfHwgZWxlbS5vZmZzZXRIZWlnaHQgfHwgZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApO1xufTtcblxuXG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXHR9IGNhdGNoICggZSApIHt9XG59O1xuXG52YXIgeGhyU3VjY2Vzc1N0YXR1cyA9IHtcblxuXHRcdC8vIEZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0MDogMjAwLFxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHQxMjIzOiAyMDRcblx0fSxcblx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0dmFyIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrO1xuXG5cdC8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Rcblx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCk7XG5cblx0XHRcdFx0eGhyLm9wZW4oXG5cdFx0XHRcdFx0b3B0aW9ucy50eXBlLFxuXHRcdFx0XHRcdG9wdGlvbnMudXJsLFxuXHRcdFx0XHRcdG9wdGlvbnMuYXN5bmMsXG5cdFx0XHRcdFx0b3B0aW9ucy51c2VybmFtZSxcblx0XHRcdFx0XHRvcHRpb25zLnBhc3N3b3JkXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHR4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyXG5cdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0Ly8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApXG5cdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgaGVhZGVyc1xuXHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgPSB4aHIub25sb2FkID1cblx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0geGhyLm9udGltZW91dCA9XG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiYWJvcnRcIiApIHtcblx0XHRcdFx0XHRcdFx0XHR4aHIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gXCJlcnJvclwiICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBPbiBhIG1hbnVhbCBuYXRpdmUgYWJvcnQsIElFOSB0aHJvd3Ncblx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlb2YgeGhyLnN0YXR1cyAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCAwLCBcImVycm9yXCIgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHRcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyU3VjY2Vzc1N0YXR1c1sgeGhyLnN0YXR1cyBdIHx8IHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dCxcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElFOSBoYXMgbm8gWEhSMiBidXQgdGhyb3dzIG9uIGJpbmFyeSAodHJhYy0xMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHQoIHhoci5yZXNwb25zZVR5cGUgfHwgXCJ0ZXh0XCIgKSAhPT0gXCJ0ZXh0XCIgIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgdGV4dDogeGhyLnJlc3BvbnNlVGV4dCB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0ZXJyb3JDYWxsYmFjayA9IHhoci5vbmVycm9yID0geGhyLm9udGltZW91dCA9IGNhbGxiYWNrKCBcImVycm9yXCIgKTtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA5IG9ubHlcblx0XHRcdFx0Ly8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnRcblx0XHRcdFx0Ly8gdG8gaGFuZGxlIHVuY2F1Z2h0IGFib3J0c1xuXHRcdFx0XHRpZiAoIHhoci5vbmFib3J0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0eGhyLm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgcmVhZHlTdGF0ZSBiZWZvcmUgdGltZW91dCBhcyBpdCBjaGFuZ2VzXG5cdFx0XHRcdFx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFsbG93IG9uZXJyb3IgdG8gYmUgY2FsbGVkIGZpcnN0LFxuXHRcdFx0XHRcdFx0XHQvLyBidXQgdGhhdCB3aWxsIG5vdCBoYW5kbGUgYSBuYXRpdmUgYWJvcnRcblx0XHRcdFx0XHRcdFx0Ly8gQWxzbywgc2F2ZSBlcnJvckNhbGxiYWNrIHRvIGEgdmFyaWFibGVcblx0XHRcdFx0XHRcdFx0Ly8gYXMgeGhyLm9uZXJyb3IgY2Fubm90IGJlIGFjY2Vzc2VkXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3JDYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDcmVhdGUgdGhlIGFib3J0IGNhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2soIFwiYWJvcnRcIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHQvLyBEbyBzZW5kIHRoZSByZXF1ZXN0ICh0aGlzIG1heSByYWlzZSBhbiBleGNlcHRpb24pXG5cdFx0XHRcdFx0eGhyLnNlbmQoIG9wdGlvbnMuaGFzQ29udGVudCAmJiBvcHRpb25zLmRhdGEgfHwgbnVsbCApO1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdC8vICMxNDY4MzogT25seSByZXRocm93IGlmIHRoaXMgaGFzbid0IGJlZW4gbm90aWZpZWQgYXMgYW4gZXJyb3IgeWV0XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUHJldmVudCBhdXRvLWV4ZWN1dGlvbiBvZiBzY3JpcHRzIHdoZW4gbm8gZXhwbGljaXQgZGF0YVR5cGUgd2FzIHByb3ZpZGVkIChTZWUgZ2gtMjQzMilcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMuY29udGVudHMuc2NyaXB0ID0gZmFsc2U7XG5cdH1cbn0gKTtcblxuLy8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIFwiICtcblx0XHRcdFwiYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJcblx0fSxcblx0Y29udGVudHM6IHtcblx0XHRzY3JpcHQ6IC9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL1xuXHR9LFxuXHRjb252ZXJ0ZXJzOiB7XG5cdFx0XCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG5cdFx0XHRyZXR1cm4gdGV4dDtcblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0gKTtcblxuLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0XG5qUXVlcnkuYWpheFRyYW5zcG9ydCggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiBvciBmb3JjZWQtYnktYXR0cnMgcmVxdWVzdHNcblx0aWYgKCBzLmNyb3NzRG9tYWluIHx8IHMuc2NyaXB0QXR0cnMgKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KCBcIjxzY3JpcHQ+XCIgKVxuXHRcdFx0XHRcdC5hdHRyKCBzLnNjcmlwdEF0dHJzIHx8IHt9IClcblx0XHRcdFx0XHQucHJvcCggeyBjaGFyc2V0OiBzLnNjcmlwdENoYXJzZXQsIHNyYzogcy51cmwgfSApXG5cdFx0XHRcdFx0Lm9uKCBcImxvYWQgZXJyb3JcIiwgY2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnlcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIG9sZENhbGxiYWNrcyA9IFtdLFxuXHRyanNvbnAgPSAvKD0pXFw/KD89JnwkKXxcXD9cXD8vO1xuXG4vLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzXG5qUXVlcnkuYWpheFNldHVwKCB7XG5cdGpzb25wOiBcImNhbGxiYWNrXCIsXG5cdGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIG5vbmNlLmd1aWQrKyApICk7XG5cdFx0dGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7XG5cdFx0cmV0dXJuIGNhbGxiYWNrO1xuXHR9XG59ICk7XG5cbi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7XG5cblx0dmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuXHRcdGpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/XG5cdFx0XHRcInVybFwiIDpcblx0XHRcdHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKVxuXHRcdFx0XHRcdC5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgJiZcblx0XHRcdFx0cmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID9cblx0XHRcdHMuanNvbnBDYWxsYmFjaygpIDpcblx0XHRcdHMuanNvbnBDYWxsYmFjaztcblxuXHRcdC8vIEluc2VydCBjYWxsYmFjayBpbnRvIHVybCBvciBmb3JtIGRhdGFcblx0XHRpZiAoIGpzb25Qcm9wICkge1xuXHRcdFx0c1sganNvblByb3AgXSA9IHNbIGpzb25Qcm9wIF0ucmVwbGFjZSggcmpzb25wLCBcIiQxXCIgKyBjYWxsYmFja05hbWUgKTtcblx0XHR9IGVsc2UgaWYgKCBzLmpzb25wICE9PSBmYWxzZSApIHtcblx0XHRcdHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIHMudXJsICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmpzb25wICsgXCI9XCIgKyBjYWxsYmFja05hbWU7XG5cdFx0fVxuXG5cdFx0Ly8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvblxuXHRcdHMuY29udmVydGVyc1sgXCJzY3JpcHQganNvblwiIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggIXJlc3BvbnNlQ29udGFpbmVyICkge1xuXHRcdFx0XHRqUXVlcnkuZXJyb3IoIGNhbGxiYWNrTmFtZSArIFwiIHdhcyBub3QgY2FsbGVkXCIgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXNwb25zZUNvbnRhaW5lclsgMCBdO1xuXHRcdH07XG5cblx0XHQvLyBGb3JjZSBqc29uIGRhdGFUeXBlXG5cdFx0cy5kYXRhVHlwZXNbIDAgXSA9IFwianNvblwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja1xuXHRcdG92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTtcblx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IGFyZ3VtZW50cztcblx0XHR9O1xuXG5cdFx0Ly8gQ2xlYW4tdXAgZnVuY3Rpb24gKGZpcmVzIGFmdGVyIGNvbnZlcnRlcnMpXG5cdFx0anFYSFIuYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gSWYgcHJldmlvdXMgdmFsdWUgZGlkbid0IGV4aXN0IC0gcmVtb3ZlIGl0XG5cdFx0XHRpZiAoIG92ZXJ3cml0dGVuID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGpRdWVyeSggd2luZG93ICkucmVtb3ZlUHJvcCggY2FsbGJhY2tOYW1lICk7XG5cblx0XHRcdC8vIE90aGVyd2lzZSByZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHJlLXVzaW5nIHRoZSBvcHRpb25zIGRvZXNuJ3Qgc2NyZXcgdGhpbmdzIGFyb3VuZFxuXHRcdFx0XHRzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHRcdFx0Ly8gU2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZVxuXHRcdFx0XHRvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZVxuXHRcdFx0aWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBpc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkge1xuXHRcdFx0XHRvdmVyd3JpdHRlbiggcmVzcG9uc2VDb250YWluZXJbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkO1xuXHRcdH0gKTtcblxuXHRcdC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuXHRcdHJldHVybiBcInNjcmlwdFwiO1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFN1cHBvcnQ6IFNhZmFyaSA4IG9ubHlcbi8vIEluIFNhZmFyaSA4IGRvY3VtZW50cyBjcmVhdGVkIHZpYSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnRcbi8vIGNvbGxhcHNlIHNpYmxpbmcgZm9ybXM6IHRoZSBzZWNvbmQgb25lIGJlY29tZXMgYSBjaGlsZCBvZiB0aGUgZmlyc3Qgb25lLlxuLy8gQmVjYXVzZSBvZiB0aGF0LCB0aGlzIHNlY3VyaXR5IG1lYXN1cmUgaGFzIHRvIGJlIGRpc2FibGVkIGluIFNhZmFyaSA4LlxuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNzMzN1xuc3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQgPSAoIGZ1bmN0aW9uKCkge1xuXHR2YXIgYm9keSA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggXCJcIiApLmJvZHk7XG5cdGJvZHkuaW5uZXJIVE1MID0gXCI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPlwiO1xuXHRyZXR1cm4gYm9keS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMjtcbn0gKSgpO1xuXG5cbi8vIEFyZ3VtZW50IFwiZGF0YVwiIHNob3VsZCBiZSBzdHJpbmcgb2YgaHRtbFxuLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LFxuLy8gZGVmYXVsdHMgdG8gZG9jdW1lbnRcbi8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmdcbmpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7XG5cdGlmICggdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblxuXHR2YXIgYmFzZSwgcGFyc2VkLCBzY3JpcHRzO1xuXG5cdGlmICggIWNvbnRleHQgKSB7XG5cblx0XHQvLyBTdG9wIHNjcmlwdHMgb3IgaW5saW5lIGV2ZW50IGhhbmRsZXJzIGZyb20gYmVpbmcgZXhlY3V0ZWQgaW1tZWRpYXRlbHlcblx0XHQvLyBieSB1c2luZyBkb2N1bWVudC5pbXBsZW1lbnRhdGlvblxuXHRcdGlmICggc3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQgKSB7XG5cdFx0XHRjb250ZXh0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCBcIlwiICk7XG5cblx0XHRcdC8vIFNldCB0aGUgYmFzZSBocmVmIGZvciB0aGUgY3JlYXRlZCBkb2N1bWVudFxuXHRcdFx0Ly8gc28gYW55IHBhcnNlZCBlbGVtZW50cyB3aXRoIFVSTHNcblx0XHRcdC8vIGFyZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQncyBVUkwgKGdoLTI5NjUpXG5cdFx0XHRiYXNlID0gY29udGV4dC5jcmVhdGVFbGVtZW50KCBcImJhc2VcIiApO1xuXHRcdFx0YmFzZS5ocmVmID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcblx0XHRcdGNvbnRleHQuaGVhZC5hcHBlbmRDaGlsZCggYmFzZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb250ZXh0ID0gZG9jdW1lbnQ7XG5cdFx0fVxuXHR9XG5cblx0cGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICk7XG5cdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsgMSBdICkgXTtcblx0fVxuXG5cdHBhcnNlZCA9IGJ1aWxkRnJhZ21lbnQoIFsgZGF0YSBdLCBjb250ZXh0LCBzY3JpcHRzICk7XG5cblx0aWYgKCBzY3JpcHRzICYmIHNjcmlwdHMubGVuZ3RoICkge1xuXHRcdGpRdWVyeSggc2NyaXB0cyApLnJlbW92ZSgpO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIHBhcnNlZC5jaGlsZE5vZGVzICk7XG59O1xuXG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdHZhciBzZWxlY3RvciwgdHlwZSwgcmVzcG9uc2UsXG5cdFx0c2VsZiA9IHRoaXMsXG5cdFx0b2ZmID0gdXJsLmluZGV4T2YoIFwiIFwiICk7XG5cblx0aWYgKCBvZmYgPiAtMSApIHtcblx0XHRzZWxlY3RvciA9IHN0cmlwQW5kQ29sbGFwc2UoIHVybC5zbGljZSggb2ZmICkgKTtcblx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHR9XG5cblx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdGlmICggaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7XG5cblx0XHQvLyBXZSBhc3N1bWUgdGhhdCBpdCdzIHRoZSBjYWxsYmFja1xuXHRcdGNhbGxiYWNrID0gcGFyYW1zO1xuXHRcdHBhcmFtcyA9IHVuZGVmaW5lZDtcblxuXHQvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG5cdH0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkge1xuXHRcdHR5cGUgPSBcIlBPU1RcIjtcblx0fVxuXG5cdC8vIElmIHdlIGhhdmUgZWxlbWVudHMgdG8gbW9kaWZ5LCBtYWtlIHRoZSByZXF1ZXN0XG5cdGlmICggc2VsZi5sZW5ndGggPiAwICkge1xuXHRcdGpRdWVyeS5hamF4KCB7XG5cdFx0XHR1cmw6IHVybCxcblxuXHRcdFx0Ly8gSWYgXCJ0eXBlXCIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuIFwiR0VUXCIgbWV0aG9kIHdpbGwgYmUgdXNlZC5cblx0XHRcdC8vIE1ha2UgdmFsdWUgb2YgdGhpcyBmaWVsZCBleHBsaWNpdCBzaW5jZVxuXHRcdFx0Ly8gdXNlciBjYW4gb3ZlcnJpZGUgaXQgdGhyb3VnaCBhamF4U2V0dXAgbWV0aG9kXG5cdFx0XHR0eXBlOiB0eXBlIHx8IFwiR0VUXCIsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9ICkuZG9uZSggZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHtcblxuXHRcdFx0Ly8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG5cdFx0XHRyZXNwb25zZSA9IGFyZ3VtZW50cztcblxuXHRcdFx0c2VsZi5odG1sKCBzZWxlY3RvciA/XG5cblx0XHRcdFx0Ly8gSWYgYSBzZWxlY3RvciB3YXMgc3BlY2lmaWVkLCBsb2NhdGUgdGhlIHJpZ2h0IGVsZW1lbnRzIGluIGEgZHVtbXkgZGl2XG5cdFx0XHRcdC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuXHRcdFx0XHRqUXVlcnkoIFwiPGRpdj5cIiApLmFwcGVuZCggalF1ZXJ5LnBhcnNlSFRNTCggcmVzcG9uc2VUZXh0ICkgKS5maW5kKCBzZWxlY3RvciApIDpcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdFxuXHRcdFx0XHRyZXNwb25zZVRleHQgKTtcblxuXHRcdC8vIElmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJkYXRhXCIsIFwic3RhdHVzXCIsIFwianFYSFJcIlxuXHRcdC8vIGJ1dCB0aGV5IGFyZSBpZ25vcmVkIGJlY2F1c2UgcmVzcG9uc2Ugd2FzIHNldCBhYm92ZS5cblx0XHQvLyBJZiBpdCBmYWlscywgdGhpcyBmdW5jdGlvbiBnZXRzIFwianFYSFJcIiwgXCJzdGF0dXNcIiwgXCJlcnJvclwiXG5cdFx0fSApLmFsd2F5cyggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRzZWxmLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuXG5cblxualF1ZXJ5LmV4cHIucHNldWRvcy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTtcblx0fSApLmxlbmd0aDtcbn07XG5cblxuXG5cbmpRdWVyeS5vZmZzZXQgPSB7XG5cdHNldE9mZnNldDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGkgKSB7XG5cdFx0dmFyIGN1clBvc2l0aW9uLCBjdXJMZWZ0LCBjdXJDU1NUb3AsIGN1clRvcCwgY3VyT2Zmc2V0LCBjdXJDU1NMZWZ0LCBjYWxjdWxhdGVQb3NpdGlvbixcblx0XHRcdHBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICksXG5cdFx0XHRjdXJFbGVtID0galF1ZXJ5KCBlbGVtICksXG5cdFx0XHRwcm9wcyA9IHt9O1xuXG5cdFx0Ly8gU2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbVxuXHRcdGlmICggcG9zaXRpb24gPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdH1cblxuXHRcdGN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7XG5cdFx0Y3VyQ1NTVG9wID0galF1ZXJ5LmNzcyggZWxlbSwgXCJ0b3BcIiApO1xuXHRcdGN1ckNTU0xlZnQgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImxlZnRcIiApO1xuXHRcdGNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSAmJlxuXHRcdFx0KCBjdXJDU1NUb3AgKyBjdXJDU1NMZWZ0ICkuaW5kZXhPZiggXCJhdXRvXCIgKSA+IC0xO1xuXG5cdFx0Ly8gTmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXJcblx0XHQvLyB0b3Agb3IgbGVmdCBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWRcblx0XHRpZiAoIGNhbGN1bGF0ZVBvc2l0aW9uICkge1xuXHRcdFx0Y3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRjdXJUb3AgPSBjdXJQb3NpdGlvbi50b3A7XG5cdFx0XHRjdXJMZWZ0ID0gY3VyUG9zaXRpb24ubGVmdDtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJUb3AgPSBwYXJzZUZsb2F0KCBjdXJDU1NUb3AgKSB8fCAwO1xuXHRcdFx0Y3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwO1xuXHRcdH1cblxuXHRcdGlmICggaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXG5cdFx0XHQvLyBVc2UgalF1ZXJ5LmV4dGVuZCBoZXJlIHRvIGFsbG93IG1vZGlmaWNhdGlvbiBvZiBjb29yZGluYXRlcyBhcmd1bWVudCAoZ2gtMTg0OClcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGpRdWVyeS5leHRlbmQoIHt9LCBjdXJPZmZzZXQgKSApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0fVxuXHRcdGlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHR9XG5cblx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0b3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggdHlwZW9mIHByb3BzLnRvcCA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0cHJvcHMudG9wICs9IFwicHhcIjtcblx0XHRcdH1cblx0XHRcdGlmICggdHlwZW9mIHByb3BzLmxlZnQgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHByb3BzLmxlZnQgKz0gXCJweFwiO1xuXHRcdFx0fVxuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0Ly8gb2Zmc2V0KCkgcmVsYXRlcyBhbiBlbGVtZW50J3MgYm9yZGVyIGJveCB0byB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBQcmVzZXJ2ZSBjaGFpbmluZyBmb3Igc2V0dGVyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRcdGpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7XG5cdFx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHR2YXIgcmVjdCwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHplcm9zIGZvciBkaXNjb25uZWN0ZWQgYW5kIGhpZGRlbiAoZGlzcGxheTogbm9uZSkgZWxlbWVudHMgKGdoLTIzMTApXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYVxuXHRcdC8vIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvclxuXHRcdGlmICggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0XHQvLyBHZXQgZG9jdW1lbnQtcmVsYXRpdmUgcG9zaXRpb24gYnkgYWRkaW5nIHZpZXdwb3J0IHNjcm9sbCB0byB2aWV3cG9ydC1yZWxhdGl2ZSBnQkNSXG5cdFx0cmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0d2luID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0LFxuXHRcdFx0bGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0XG5cdFx0fTtcblx0fSxcblxuXHQvLyBwb3NpdGlvbigpIHJlbGF0ZXMgYW4gZWxlbWVudCdzIG1hcmdpbiBib3ggdG8gaXRzIG9mZnNldCBwYXJlbnQncyBwYWRkaW5nIGJveFxuXHQvLyBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBiZWhhdmlvciBvZiBDU1MgYWJzb2x1dGUgcG9zaXRpb25pbmdcblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsIGRvYyxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG5cdFx0Ly8gcG9zaXRpb246Zml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHRoZSB2aWV3cG9ydCwgd2hpY2ggaXRzZWxmIGFsd2F5cyBoYXMgemVybyBvZmZzZXRcblx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIgKSB7XG5cblx0XHRcdC8vIEFzc3VtZSBwb3NpdGlvbjpmaXhlZCBpbXBsaWVzIGF2YWlsYWJpbGl0eSBvZiBnZXRCb3VuZGluZ0NsaWVudFJlY3Rcblx0XHRcdG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblxuXHRcdFx0Ly8gQWNjb3VudCBmb3IgdGhlICpyZWFsKiBvZmZzZXQgcGFyZW50LCB3aGljaCBjYW4gYmUgdGhlIGRvY3VtZW50IG9yIGl0cyByb290IGVsZW1lbnRcblx0XHRcdC8vIHdoZW4gYSBzdGF0aWNhbGx5IHBvc2l0aW9uZWQgZWxlbWVudCBpcyBpZGVudGlmaWVkXG5cdFx0XHRkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRvZmZzZXRQYXJlbnQgPSBlbGVtLm9mZnNldFBhcmVudCB8fCBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiZcblx0XHRcdFx0KCBvZmZzZXRQYXJlbnQgPT09IGRvYy5ib2R5IHx8IG9mZnNldFBhcmVudCA9PT0gZG9jLmRvY3VtZW50RWxlbWVudCApICYmXG5cdFx0XHRcdGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9mZnNldFBhcmVudCAmJiBvZmZzZXRQYXJlbnQgIT09IGVsZW0gJiYgb2Zmc2V0UGFyZW50Lm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIEluY29ycG9yYXRlIGJvcmRlcnMgaW50byBpdHMgb2Zmc2V0LCBzaW5jZSB0aGV5IGFyZSBvdXRzaWRlIGl0cyBjb250ZW50IG9yaWdpblxuXHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBqUXVlcnkoIG9mZnNldFBhcmVudCApLm9mZnNldCgpO1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJib3JkZXJUb3BXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJib3JkZXJMZWZ0V2lkdGhcIiwgdHJ1ZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnNcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luVG9wXCIsIHRydWUgKSxcblx0XHRcdGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiwgdHJ1ZSApXG5cdFx0fTtcblx0fSxcblxuXHQvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcblx0Ly8gMSkgRm9yIHRoZSBlbGVtZW50IGluc2lkZSB0aGUgaWZyYW1lIHdpdGhvdXQgb2Zmc2V0UGFyZW50LCB0aGlzIG1ldGhvZCB3aWxsIHJldHVyblxuXHQvLyAgICBkb2N1bWVudEVsZW1lbnQgb2YgdGhlIHBhcmVudCB3aW5kb3dcblx0Ly8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudFxuXHQvLyAzKSBGb3IgYm9keSBvciBodG1sIGVsZW1lbnQsIGkuZS4gaW4gY2FzZSBvZiB0aGUgaHRtbCBub2RlIC0gaXQgd2lsbCByZXR1cm4gaXRzZWxmXG5cdC8vXG5cdC8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlc1xuXHQvLyBhbmQgbWlnaHQgYmUgY29uc2lkZXJlZCBhcyBtb3JlIHByZWZlcmFibGUgcmVzdWx0cy5cblx0Ly9cblx0Ly8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmVcblx0b2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50O1xuXG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJiBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXG5cdFx0XHQvLyBDb2FsZXNjZSBkb2N1bWVudHMgYW5kIHdpbmRvd3Ncblx0XHRcdHZhciB3aW47XG5cdFx0XHRpZiAoIGlzV2luZG93KCBlbGVtICkgKSB7XG5cdFx0XHRcdHdpbiA9IGVsZW07XG5cdFx0XHR9IGVsc2UgaWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR3aW4gPSBlbGVtLmRlZmF1bHRWaWV3O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luLnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbi5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9O1xufSApO1xuXG4vLyBTdXBwb3J0OiBTYWZhcmkgPD03IC0gOS4xLCBDaHJvbWUgPD0zNyAtIDQ5XG4vLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvblxuLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0XG4vLyBCbGluayBidWc6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU4OTM0N1xuLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodDtcbi8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCBqdXN0IGNoZWNrIGZvciBpdCBoZXJlXG5qUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggX2ksIHByb3AgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdFx0Y29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTtcblxuXHRcdFx0XHQvLyBJZiBjdXJDU1MgcmV0dXJucyBwZXJjZW50YWdlLCBmYWxsYmFjayB0byBvZmZzZXRcblx0XHRcdFx0cmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID9cblx0XHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyBcInB4XCIgOlxuXHRcdFx0XHRcdGNvbXB1dGVkO1xuXHRcdFx0fVxuXHRcdH1cblx0KTtcbn0gKTtcblxuXG4vLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcblx0alF1ZXJ5LmVhY2goIHsgcGFkZGluZzogXCJpbm5lclwiICsgbmFtZSwgY29udGVudDogdHlwZSwgXCJcIjogXCJvdXRlclwiICsgbmFtZSB9LFxuXHRcdGZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkge1xuXG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyAkKCB3aW5kb3cgKS5vdXRlcldpZHRoL0hlaWdodCByZXR1cm4gdy9oIGluY2x1ZGluZyBzY3JvbGxiYXJzIChnaC0xNzI5KVxuXHRcdFx0XHRcdHJldHVybiBmdW5jTmFtZS5pbmRleE9mKCBcIm91dGVyXCIgKSA9PT0gMCA/XG5cdFx0XHRcdFx0XHRlbGVtWyBcImlubmVyXCIgKyBuYW1lIF0gOlxuXHRcdFx0XHRcdFx0ZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIFwiY2xpZW50XCIgKyBuYW1lIF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdFx0XHRcdC8vIEVpdGhlciBzY3JvbGxbV2lkdGgvSGVpZ2h0XSBvciBvZmZzZXRbV2lkdGgvSGVpZ2h0XSBvciBjbGllbnRbV2lkdGgvSGVpZ2h0XSxcblx0XHRcdFx0XHQvLyB3aGljaGV2ZXIgaXMgZ3JlYXRlc3Rcblx0XHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwic2Nyb2xsXCIgKyBuYW1lIF0sIGRvY1sgXCJzY3JvbGxcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJvZmZzZXRcIiArIG5hbWUgXSwgZG9jWyBcIm9mZnNldFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZG9jWyBcImNsaWVudFwiICsgbmFtZSBdXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblxuXHRcdFx0XHRcdC8vIEdldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnQsIHJlcXVlc3RpbmcgYnV0IG5vdCBmb3JjaW5nIHBhcnNlRmxvYXRcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCB0eXBlLCBleHRyYSApIDpcblxuXHRcdFx0XHRcdC8vIFNldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnRcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHR5cGUsIHZhbHVlLCBleHRyYSApO1xuXHRcdFx0fSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUgKTtcblx0XHR9O1xuXHR9ICk7XG59ICk7XG5cblxualF1ZXJ5LmVhY2goIFtcblx0XCJhamF4U3RhcnRcIixcblx0XCJhamF4U3RvcFwiLFxuXHRcImFqYXhDb21wbGV0ZVwiLFxuXHRcImFqYXhFcnJvclwiLFxuXHRcImFqYXhTdWNjZXNzXCIsXG5cdFwiYWpheFNlbmRcIlxuXSwgZnVuY3Rpb24oIF9pLCB0eXBlICkge1xuXHRqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZSwgZm4gKTtcblx0fTtcbn0gKTtcblxuXG5cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdGJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTtcblx0fSxcblxuXHRkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7XG5cblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xuXHRcdFx0dGhpcy5vZmYoIHNlbGVjdG9yLCBcIioqXCIgKSA6XG5cdFx0XHR0aGlzLm9mZiggdHlwZXMsIHNlbGVjdG9yIHx8IFwiKipcIiwgZm4gKTtcblx0fSxcblxuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goICggXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBcIiArXG5cdFwibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgXCIgK1xuXHRcImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnVcIiApLnNwbGl0KCBcIiBcIiApLFxuXHRmdW5jdGlvbiggX2ksIG5hbWUgKSB7XG5cblx0XHQvLyBIYW5kbGUgZXZlbnQgYmluZGluZ1xuXHRcdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdFx0dGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6XG5cdFx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHRcdH07XG5cdH0gKTtcblxuXG5cblxuLy8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG4vLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1BcbnZhciBydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztcblxuLy8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG4vLyBhcmd1bWVudHMuXG4vLyBqUXVlcnkucHJveHkgaXMgZGVwcmVjYXRlZCB0byBwcm9tb3RlIHN0YW5kYXJkcyAoc3BlY2lmaWNhbGx5IEZ1bmN0aW9uI2JpbmQpXG4vLyBIb3dldmVyLCBpdCBpcyBub3Qgc2xhdGVkIGZvciByZW1vdmFsIGFueSB0aW1lIHNvb25cbmpRdWVyeS5wcm94eSA9IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcblx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHR0bXAgPSBmblsgY29udGV4dCBdO1xuXHRcdGNvbnRleHQgPSBmbjtcblx0XHRmbiA9IHRtcDtcblx0fVxuXG5cdC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG5cdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdGlmICggIWlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXG5cdC8vIFNpbXVsYXRlZCBiaW5kXG5cdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcblx0cHJveHkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0fTtcblxuXHQvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcblx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0cmV0dXJuIHByb3h5O1xufTtcblxualF1ZXJ5LmhvbGRSZWFkeSA9IGZ1bmN0aW9uKCBob2xkICkge1xuXHRpZiAoIGhvbGQgKSB7XG5cdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHR9IGVsc2Uge1xuXHRcdGpRdWVyeS5yZWFkeSggdHJ1ZSApO1xuXHR9XG59O1xualF1ZXJ5LmlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xualF1ZXJ5LnBhcnNlSlNPTiA9IEpTT04ucGFyc2U7XG5qUXVlcnkubm9kZU5hbWUgPSBub2RlTmFtZTtcbmpRdWVyeS5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbmpRdWVyeS5pc1dpbmRvdyA9IGlzV2luZG93O1xualF1ZXJ5LmNhbWVsQ2FzZSA9IGNhbWVsQ2FzZTtcbmpRdWVyeS50eXBlID0gdG9UeXBlO1xuXG5qUXVlcnkubm93ID0gRGF0ZS5ub3c7XG5cbmpRdWVyeS5pc051bWVyaWMgPSBmdW5jdGlvbiggb2JqICkge1xuXG5cdC8vIEFzIG9mIGpRdWVyeSAzLjAsIGlzTnVtZXJpYyBpcyBsaW1pdGVkIHRvXG5cdC8vIHN0cmluZ3MgYW5kIG51bWJlcnMgKHByaW1pdGl2ZXMgb3Igb2JqZWN0cylcblx0Ly8gdGhhdCBjYW4gYmUgY29lcmNlZCB0byBmaW5pdGUgbnVtYmVycyAoZ2gtMjY2Milcblx0dmFyIHR5cGUgPSBqUXVlcnkudHlwZSggb2JqICk7XG5cdHJldHVybiAoIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJzdHJpbmdcIiApICYmXG5cblx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAoXCJcIilcblx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0Ly8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdFx0IWlzTmFOKCBvYmogLSBwYXJzZUZsb2F0KCBvYmogKSApO1xufTtcblxualF1ZXJ5LnRyaW0gPSBmdW5jdGlvbiggdGV4dCApIHtcblx0cmV0dXJuIHRleHQgPT0gbnVsbCA/XG5cdFx0XCJcIiA6XG5cdFx0KCB0ZXh0ICsgXCJcIiApLnJlcGxhY2UoIHJ0cmltLCBcIlwiICk7XG59O1xuXG5cblxuLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4vLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG4vLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3Rcbi8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbi8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzXG4vLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cbi8vIE5vdGUgdGhhdCBmb3IgbWF4aW11bSBwb3J0YWJpbGl0eSwgbGlicmFyaWVzIHRoYXQgYXJlIG5vdCBqUXVlcnkgc2hvdWxkXG4vLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG4vLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL3dpa2kvVXBkYXRpbmctZXhpc3RpbmctbGlicmFyaWVzI3dpa2ktYW5vblxuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5O1xuXHR9ICk7XG59XG5cblxuXG5cbnZhclxuXG5cdC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuXHQvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuXHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LiQgPSBfJDtcblx0fVxuXG5cdGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTURcbi8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggdHlwZW9mIG5vR2xvYmFsID09PSBcInVuZGVmaW5lZFwiICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG59ICk7XG4iLCJ0eXBlb2YgbmF2aWdhdG9yID09PSBcIm9iamVjdFwiICYmIChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCdQbHlyJywgZmFjdG9yeSkgOlxuICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5QbHlyID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7XG4gICAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgICAgfSk7XG4gICAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleXM7XG4gIH1cblxuICBmdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307XG5cbiAgICAgIGlmIChpICUgMikge1xuICAgICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgICB2YXIgdGFyZ2V0ID0ge307XG4gICAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICAgIHZhciBrZXksIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICAgIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuXG4gICAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuXG4gICAgdmFyIGtleSwgaTtcblxuICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gICAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHtcbiAgICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG4gIH1cblxuICBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcbiAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjtcbiAgICB2YXIgX2FyciA9IFtdO1xuICAgIHZhciBfbiA9IHRydWU7XG4gICAgdmFyIF9kID0gZmFsc2U7XG4gICAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfZCA9IHRydWU7XG4gICAgICBfZSA9IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gX2FycjtcbiAgfVxuXG4gIGZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgICBpZiAoIW8pIHJldHVybjtcbiAgICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICAgIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gICAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07XG5cbiAgICByZXR1cm4gYXJyMjtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayQxKGUsIHQpIHtcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyQxKGUsIHQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIHtcbiAgICAgIHZhciByID0gdFtuXTtcbiAgICAgIHIuZW51bWVyYWJsZSA9IHIuZW51bWVyYWJsZSB8fCAhMSwgci5jb25maWd1cmFibGUgPSAhMCwgXCJ2YWx1ZVwiIGluIHIgJiYgKHIud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLmtleSwgcik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzJDEoZSwgdCwgbikge1xuICAgIHJldHVybiB0ICYmIF9kZWZpbmVQcm9wZXJ0aWVzJDEoZS5wcm90b3R5cGUsIHQpLCBuICYmIF9kZWZpbmVQcm9wZXJ0aWVzJDEoZSwgbiksIGU7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkkMShlLCB0LCBuKSB7XG4gICAgcmV0dXJuIHQgaW4gZSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7XG4gICAgICB2YWx1ZTogbixcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pIDogZVt0XSA9IG4sIGU7XG4gIH1cblxuICBmdW5jdGlvbiBvd25LZXlzJDEoZSwgdCkge1xuICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7XG5cbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO1xuICAgICAgdCAmJiAociA9IHIuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGU7XG4gICAgICB9KSksIG4ucHVzaC5hcHBseShuLCByKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyJDEoZSkge1xuICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7XG4gICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307XG4gICAgICB0ICUgMiA/IG93bktleXMkMShPYmplY3QobiksICEwKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSQxKGUsIHQsIG5bdF0pO1xuICAgICAgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IG93bktleXMkMShPYmplY3QobikpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgYWRkQ1NTOiAhMCxcbiAgICB0aHVtYldpZHRoOiAxNSxcbiAgICB3YXRjaDogITBcbiAgfTtcblxuICBmdW5jdGlvbiBtYXRjaGVzKGUsIHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSkuaW5jbHVkZXModGhpcyk7XG4gICAgfS5jYWxsKGUsIHQpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpZ2dlcihlLCB0KSB7XG4gICAgaWYgKGUgJiYgdCkge1xuICAgICAgdmFyIG4gPSBuZXcgRXZlbnQodCwge1xuICAgICAgICBidWJibGVzOiAhMFxuICAgICAgfSk7XG4gICAgICBlLmRpc3BhdGNoRXZlbnQobik7XG4gICAgfVxuICB9XG5cbiAgdmFyIGdldENvbnN0cnVjdG9yID0gZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3IoZSkge1xuICAgIHJldHVybiBudWxsICE9IGUgPyBlLmNvbnN0cnVjdG9yIDogbnVsbDtcbiAgfSxcbiAgICAgIGluc3RhbmNlT2YgPSBmdW5jdGlvbiBpbnN0YW5jZU9mKGUsIHQpIHtcbiAgICByZXR1cm4gISEoZSAmJiB0ICYmIGUgaW5zdGFuY2VvZiB0KTtcbiAgfSxcbiAgICAgIGlzTnVsbE9yVW5kZWZpbmVkID0gZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoZSkge1xuICAgIHJldHVybiBudWxsID09IGU7XG4gIH0sXG4gICAgICBpc09iamVjdCA9IGZ1bmN0aW9uIGlzT2JqZWN0KGUpIHtcbiAgICByZXR1cm4gZ2V0Q29uc3RydWN0b3IoZSkgPT09IE9iamVjdDtcbiAgfSxcbiAgICAgIGlzTnVtYmVyID0gZnVuY3Rpb24gaXNOdW1iZXIoZSkge1xuICAgIHJldHVybiBnZXRDb25zdHJ1Y3RvcihlKSA9PT0gTnVtYmVyICYmICFOdW1iZXIuaXNOYU4oZSk7XG4gIH0sXG4gICAgICBpc1N0cmluZyA9IGZ1bmN0aW9uIGlzU3RyaW5nKGUpIHtcbiAgICByZXR1cm4gZ2V0Q29uc3RydWN0b3IoZSkgPT09IFN0cmluZztcbiAgfSxcbiAgICAgIGlzQm9vbGVhbiA9IGZ1bmN0aW9uIGlzQm9vbGVhbihlKSB7XG4gICAgcmV0dXJuIGdldENvbnN0cnVjdG9yKGUpID09PSBCb29sZWFuO1xuICB9LFxuICAgICAgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzRnVuY3Rpb24oZSkge1xuICAgIHJldHVybiBnZXRDb25zdHJ1Y3RvcihlKSA9PT0gRnVuY3Rpb247XG4gIH0sXG4gICAgICBpc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShlKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSk7XG4gIH0sXG4gICAgICBpc05vZGVMaXN0ID0gZnVuY3Rpb24gaXNOb2RlTGlzdChlKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlT2YoZSwgTm9kZUxpc3QpO1xuICB9LFxuICAgICAgaXNFbGVtZW50ID0gZnVuY3Rpb24gaXNFbGVtZW50KGUpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VPZihlLCBFbGVtZW50KTtcbiAgfSxcbiAgICAgIGlzRXZlbnQgPSBmdW5jdGlvbiBpc0V2ZW50KGUpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VPZihlLCBFdmVudCk7XG4gIH0sXG4gICAgICBpc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eShlKSB7XG4gICAgcmV0dXJuIGlzTnVsbE9yVW5kZWZpbmVkKGUpIHx8IChpc1N0cmluZyhlKSB8fCBpc0FycmF5KGUpIHx8IGlzTm9kZUxpc3QoZSkpICYmICFlLmxlbmd0aCB8fCBpc09iamVjdChlKSAmJiAhT2JqZWN0LmtleXMoZSkubGVuZ3RoO1xuICB9LFxuICAgICAgaXMgPSB7XG4gICAgbnVsbE9yVW5kZWZpbmVkOiBpc051bGxPclVuZGVmaW5lZCxcbiAgICBvYmplY3Q6IGlzT2JqZWN0LFxuICAgIG51bWJlcjogaXNOdW1iZXIsXG4gICAgc3RyaW5nOiBpc1N0cmluZyxcbiAgICBib29sZWFuOiBpc0Jvb2xlYW4sXG4gICAgZnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gICAgYXJyYXk6IGlzQXJyYXksXG4gICAgbm9kZUxpc3Q6IGlzTm9kZUxpc3QsXG4gICAgZWxlbWVudDogaXNFbGVtZW50LFxuICAgIGV2ZW50OiBpc0V2ZW50LFxuICAgIGVtcHR5OiBpc0VtcHR5XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0RGVjaW1hbFBsYWNlcyhlKSB7XG4gICAgdmFyIHQgPSBcIlwiLmNvbmNhdChlKS5tYXRjaCgvKD86XFwuKFxcZCspKT8oPzpbZUVdKFsrLV0/XFxkKykpPyQvKTtcbiAgICByZXR1cm4gdCA/IE1hdGgubWF4KDAsICh0WzFdID8gdFsxXS5sZW5ndGggOiAwKSAtICh0WzJdID8gK3RbMl0gOiAwKSkgOiAwO1xuICB9XG5cbiAgZnVuY3Rpb24gcm91bmQoZSwgdCkge1xuICAgIGlmICgxID4gdCkge1xuICAgICAgdmFyIG4gPSBnZXREZWNpbWFsUGxhY2VzKHQpO1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoZS50b0ZpeGVkKG4pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5yb3VuZChlIC8gdCkgKiB0O1xuICB9XG5cbiAgdmFyIFJhbmdlVG91Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZSh0LCBuKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2skMSh0aGlzLCBlKSwgaXMuZWxlbWVudCh0KSA/IHRoaXMuZWxlbWVudCA9IHQgOiBpcy5zdHJpbmcodCkgJiYgKHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCkpLCBpcy5lbGVtZW50KHRoaXMuZWxlbWVudCkgJiYgaXMuZW1wdHkodGhpcy5lbGVtZW50LnJhbmdlVG91Y2gpICYmICh0aGlzLmNvbmZpZyA9IF9vYmplY3RTcHJlYWQyJDEoe30sIGRlZmF1bHRzLCB7fSwgbiksIHRoaXMuaW5pdCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2NyZWF0ZUNsYXNzJDEoZSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7XG4gICAgICAgIGUuZW5hYmxlZCAmJiAodGhpcy5jb25maWcuYWRkQ1NTICYmICh0aGlzLmVsZW1lbnQuc3R5bGUudXNlclNlbGVjdCA9IFwibm9uZVwiLCB0aGlzLmVsZW1lbnQuc3R5bGUud2ViS2l0VXNlclNlbGVjdCA9IFwibm9uZVwiLCB0aGlzLmVsZW1lbnQuc3R5bGUudG91Y2hBY3Rpb24gPSBcIm1hbmlwdWxhdGlvblwiKSwgdGhpcy5saXN0ZW5lcnMoITApLCB0aGlzLmVsZW1lbnQucmFuZ2VUb3VjaCA9IHRoaXMpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7XG4gICAgICAgIGUuZW5hYmxlZCAmJiAodGhpcy5jb25maWcuYWRkQ1NTICYmICh0aGlzLmVsZW1lbnQuc3R5bGUudXNlclNlbGVjdCA9IFwiXCIsIHRoaXMuZWxlbWVudC5zdHlsZS53ZWJLaXRVc2VyU2VsZWN0ID0gXCJcIiwgdGhpcy5lbGVtZW50LnN0eWxlLnRvdWNoQWN0aW9uID0gXCJcIiksIHRoaXMubGlzdGVuZXJzKCExKSwgdGhpcy5lbGVtZW50LnJhbmdlVG91Y2ggPSBudWxsKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwibGlzdGVuZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMsXG4gICAgICAgICAgICBuID0gZSA/IFwiYWRkRXZlbnRMaXN0ZW5lclwiIDogXCJyZW1vdmVFdmVudExpc3RlbmVyXCI7XG4gICAgICAgIFtcInRvdWNoc3RhcnRcIiwgXCJ0b3VjaG1vdmVcIiwgXCJ0b3VjaGVuZFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdC5lbGVtZW50W25dKGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5zZXQoZSk7XG4gICAgICAgICAgfSwgITEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkge1xuICAgICAgICBpZiAoIWUuZW5hYmxlZCB8fCAhaXMuZXZlbnQodCkpIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgbixcbiAgICAgICAgICAgIHIgPSB0LnRhcmdldCxcbiAgICAgICAgICAgIGkgPSB0LmNoYW5nZWRUb3VjaGVzWzBdLFxuICAgICAgICAgICAgbyA9IHBhcnNlRmxvYXQoci5nZXRBdHRyaWJ1dGUoXCJtaW5cIikpIHx8IDAsXG4gICAgICAgICAgICBzID0gcGFyc2VGbG9hdChyLmdldEF0dHJpYnV0ZShcIm1heFwiKSkgfHwgMTAwLFxuICAgICAgICAgICAgdSA9IHBhcnNlRmxvYXQoci5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKSB8fCAxLFxuICAgICAgICAgICAgYyA9IHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBhID0gMTAwIC8gYy53aWR0aCAqICh0aGlzLmNvbmZpZy50aHVtYldpZHRoIC8gMikgLyAxMDA7XG4gICAgICAgIHJldHVybiAwID4gKG4gPSAxMDAgLyBjLndpZHRoICogKGkuY2xpZW50WCAtIGMubGVmdCkpID8gbiA9IDAgOiAxMDAgPCBuICYmIChuID0gMTAwKSwgNTAgPiBuID8gbiAtPSAoMTAwIC0gMiAqIG4pICogYSA6IDUwIDwgbiAmJiAobiArPSAyICogKG4gLSA1MCkgKiBhKSwgbyArIHJvdW5kKG4gLyAxMDAgKiAocyAtIG8pLCB1KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkge1xuICAgICAgICBlLmVuYWJsZWQgJiYgaXMuZXZlbnQodCkgJiYgIXQudGFyZ2V0LmRpc2FibGVkICYmICh0LnByZXZlbnREZWZhdWx0KCksIHQudGFyZ2V0LnZhbHVlID0gdGhpcy5nZXQodCksIHRyaWdnZXIodC50YXJnZXQsIFwidG91Y2hlbmRcIiA9PT0gdC50eXBlID8gXCJjaGFuZ2VcIiA6IFwiaW5wdXRcIikpO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcInNldHVwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkge1xuICAgICAgICB2YXIgbiA9IDEgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDoge30sXG4gICAgICAgICAgICByID0gbnVsbDtcbiAgICAgICAgaWYgKGlzLmVtcHR5KHQpIHx8IGlzLnN0cmluZyh0KSA/IHIgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaXMuc3RyaW5nKHQpID8gdCA6ICdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKSkgOiBpcy5lbGVtZW50KHQpID8gciA9IFt0XSA6IGlzLm5vZGVMaXN0KHQpID8gciA9IEFycmF5LmZyb20odCkgOiBpcy5hcnJheSh0KSAmJiAociA9IHQuZmlsdGVyKGlzLmVsZW1lbnQpKSwgaXMuZW1wdHkocikpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBpID0gX29iamVjdFNwcmVhZDIkMSh7fSwgZGVmYXVsdHMsIHt9LCBuKTtcblxuICAgICAgICBpZiAoaXMuc3RyaW5nKHQpICYmIGkud2F0Y2gpIHtcbiAgICAgICAgICB2YXIgbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICBBcnJheS5mcm9tKG4pLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgQXJyYXkuZnJvbShuLmFkZGVkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICBpcy5lbGVtZW50KG4pICYmIG1hdGNoZXMobiwgdCkgJiYgbmV3IGUobiwgaSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgby5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICAgIGNoaWxkTGlzdDogITAsXG4gICAgICAgICAgICBzdWJ0cmVlOiAhMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHIubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBlKHQsIG4pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW5hYmxlZFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBcIm9udG91Y2hzdGFydFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIH1cbiAgICB9XSksIGU7XG4gIH0oKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBUeXBlIGNoZWNraW5nIHV0aWxzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIHZhciBnZXRDb25zdHJ1Y3RvciQxID0gZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgIT09IG51bGwgJiYgdHlwZW9mIGlucHV0ICE9PSAndW5kZWZpbmVkJyA/IGlucHV0LmNvbnN0cnVjdG9yIDogbnVsbDtcbiAgfTtcblxuICB2YXIgaW5zdGFuY2VPZiQxID0gZnVuY3Rpb24gaW5zdGFuY2VPZihpbnB1dCwgY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gQm9vbGVhbihpbnB1dCAmJiBjb25zdHJ1Y3RvciAmJiBpbnB1dCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKTtcbiAgfTtcblxuICB2YXIgaXNOdWxsT3JVbmRlZmluZWQkMSA9IGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSBudWxsIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCc7XG4gIH07XG5cbiAgdmFyIGlzT2JqZWN0JDEgPSBmdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICAgIHJldHVybiBnZXRDb25zdHJ1Y3RvciQxKGlucHV0KSA9PT0gT2JqZWN0O1xuICB9O1xuXG4gIHZhciBpc051bWJlciQxID0gZnVuY3Rpb24gaXNOdW1iZXIoaW5wdXQpIHtcbiAgICByZXR1cm4gZ2V0Q29uc3RydWN0b3IkMShpbnB1dCkgPT09IE51bWJlciAmJiAhTnVtYmVyLmlzTmFOKGlucHV0KTtcbiAgfTtcblxuICB2YXIgaXNTdHJpbmckMSA9IGZ1bmN0aW9uIGlzU3RyaW5nKGlucHV0KSB7XG4gICAgcmV0dXJuIGdldENvbnN0cnVjdG9yJDEoaW5wdXQpID09PSBTdHJpbmc7XG4gIH07XG5cbiAgdmFyIGlzQm9vbGVhbiQxID0gZnVuY3Rpb24gaXNCb29sZWFuKGlucHV0KSB7XG4gICAgcmV0dXJuIGdldENvbnN0cnVjdG9yJDEoaW5wdXQpID09PSBCb29sZWFuO1xuICB9O1xuXG4gIHZhciBpc0Z1bmN0aW9uJDEgPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKGlucHV0KSB7XG4gICAgcmV0dXJuIGdldENvbnN0cnVjdG9yJDEoaW5wdXQpID09PSBGdW5jdGlvbjtcbiAgfTtcblxuICB2YXIgaXNBcnJheSQxID0gZnVuY3Rpb24gaXNBcnJheShpbnB1dCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGlucHV0KTtcbiAgfTtcblxuICB2YXIgaXNXZWFrTWFwID0gZnVuY3Rpb24gaXNXZWFrTWFwKGlucHV0KSB7XG4gICAgcmV0dXJuIGluc3RhbmNlT2YkMShpbnB1dCwgV2Vha01hcCk7XG4gIH07XG5cbiAgdmFyIGlzTm9kZUxpc3QkMSA9IGZ1bmN0aW9uIGlzTm9kZUxpc3QoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VPZiQxKGlucHV0LCBOb2RlTGlzdCk7XG4gIH07XG5cbiAgdmFyIGlzRWxlbWVudCQxID0gZnVuY3Rpb24gaXNFbGVtZW50KGlucHV0KSB7XG4gICAgcmV0dXJuIGluc3RhbmNlT2YkMShpbnB1dCwgRWxlbWVudCk7XG4gIH07XG5cbiAgdmFyIGlzVGV4dE5vZGUgPSBmdW5jdGlvbiBpc1RleHROb2RlKGlucHV0KSB7XG4gICAgcmV0dXJuIGdldENvbnN0cnVjdG9yJDEoaW5wdXQpID09PSBUZXh0O1xuICB9O1xuXG4gIHZhciBpc0V2ZW50JDEgPSBmdW5jdGlvbiBpc0V2ZW50KGlucHV0KSB7XG4gICAgcmV0dXJuIGluc3RhbmNlT2YkMShpbnB1dCwgRXZlbnQpO1xuICB9O1xuXG4gIHZhciBpc0tleWJvYXJkRXZlbnQgPSBmdW5jdGlvbiBpc0tleWJvYXJkRXZlbnQoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VPZiQxKGlucHV0LCBLZXlib2FyZEV2ZW50KTtcbiAgfTtcblxuICB2YXIgaXNDdWUgPSBmdW5jdGlvbiBpc0N1ZShpbnB1dCkge1xuICAgIHJldHVybiBpbnN0YW5jZU9mJDEoaW5wdXQsIHdpbmRvdy5UZXh0VHJhY2tDdWUpIHx8IGluc3RhbmNlT2YkMShpbnB1dCwgd2luZG93LlZUVEN1ZSk7XG4gIH07XG5cbiAgdmFyIGlzVHJhY2sgPSBmdW5jdGlvbiBpc1RyYWNrKGlucHV0KSB7XG4gICAgcmV0dXJuIGluc3RhbmNlT2YkMShpbnB1dCwgVGV4dFRyYWNrKSB8fCAhaXNOdWxsT3JVbmRlZmluZWQkMShpbnB1dCkgJiYgaXNTdHJpbmckMShpbnB1dC5raW5kKTtcbiAgfTtcblxuICB2YXIgaXNQcm9taXNlID0gZnVuY3Rpb24gaXNQcm9taXNlKGlucHV0KSB7XG4gICAgcmV0dXJuIGluc3RhbmNlT2YkMShpbnB1dCwgUHJvbWlzZSkgJiYgaXNGdW5jdGlvbiQxKGlucHV0LnRoZW4pO1xuICB9O1xuXG4gIHZhciBpc0VtcHR5JDEgPSBmdW5jdGlvbiBpc0VtcHR5KGlucHV0KSB7XG4gICAgcmV0dXJuIGlzTnVsbE9yVW5kZWZpbmVkJDEoaW5wdXQpIHx8IChpc1N0cmluZyQxKGlucHV0KSB8fCBpc0FycmF5JDEoaW5wdXQpIHx8IGlzTm9kZUxpc3QkMShpbnB1dCkpICYmICFpbnB1dC5sZW5ndGggfHwgaXNPYmplY3QkMShpbnB1dCkgJiYgIU9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGg7XG4gIH07XG5cbiAgdmFyIGlzVXJsID0gZnVuY3Rpb24gaXNVcmwoaW5wdXQpIHtcbiAgICAvLyBBY2NlcHQgYSBVUkwgb2JqZWN0XG4gICAgaWYgKGluc3RhbmNlT2YkMShpbnB1dCwgd2luZG93LlVSTCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gLy8gTXVzdCBiZSBzdHJpbmcgZnJvbSBoZXJlXG5cblxuICAgIGlmICghaXNTdHJpbmckMShpbnB1dCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IC8vIEFkZCB0aGUgcHJvdG9jb2wgaWYgcmVxdWlyZWRcblxuXG4gICAgdmFyIHN0cmluZyA9IGlucHV0O1xuXG4gICAgaWYgKCFpbnB1dC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgIWlucHV0LnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcbiAgICAgIHN0cmluZyA9IFwiaHR0cDovL1wiLmNvbmNhdChpbnB1dCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAhaXNFbXB0eSQxKG5ldyBVUkwoc3RyaW5nKS5ob3N0bmFtZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaXMkMSA9IHtcbiAgICBudWxsT3JVbmRlZmluZWQ6IGlzTnVsbE9yVW5kZWZpbmVkJDEsXG4gICAgb2JqZWN0OiBpc09iamVjdCQxLFxuICAgIG51bWJlcjogaXNOdW1iZXIkMSxcbiAgICBzdHJpbmc6IGlzU3RyaW5nJDEsXG4gICAgYm9vbGVhbjogaXNCb29sZWFuJDEsXG4gICAgZnVuY3Rpb246IGlzRnVuY3Rpb24kMSxcbiAgICBhcnJheTogaXNBcnJheSQxLFxuICAgIHdlYWtNYXA6IGlzV2Vha01hcCxcbiAgICBub2RlTGlzdDogaXNOb2RlTGlzdCQxLFxuICAgIGVsZW1lbnQ6IGlzRWxlbWVudCQxLFxuICAgIHRleHROb2RlOiBpc1RleHROb2RlLFxuICAgIGV2ZW50OiBpc0V2ZW50JDEsXG4gICAga2V5Ym9hcmRFdmVudDogaXNLZXlib2FyZEV2ZW50LFxuICAgIGN1ZTogaXNDdWUsXG4gICAgdHJhY2s6IGlzVHJhY2ssXG4gICAgcHJvbWlzZTogaXNQcm9taXNlLFxuICAgIHVybDogaXNVcmwsXG4gICAgZW1wdHk6IGlzRW1wdHkkMVxuICB9O1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdmFyIGV2ZW50cyA9IHtcbiAgICAgIFdlYmtpdFRyYW5zaXRpb246ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcbiAgICAgIE1velRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJyxcbiAgICAgIE9UcmFuc2l0aW9uOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxuICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnXG4gICAgfTtcbiAgICB2YXIgdHlwZSA9IE9iamVjdC5rZXlzKGV2ZW50cykuZmluZChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW2V2ZW50XSAhPT0gdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIHJldHVybiBpcyQxLnN0cmluZyh0eXBlKSA/IGV2ZW50c1t0eXBlXSA6IGZhbHNlO1xuICB9KCk7IC8vIEZvcmNlIHJlcGFpbnQgb2YgZWxlbWVudFxuXG4gIGZ1bmN0aW9uIHJlcGFpbnQoZWxlbWVudCwgZGVsYXkpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBlbGVtZW50LmhpZGRlbiA9IHRydWU7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcblxuICAgICAgICBlbGVtZW50Lm9mZnNldEhlaWdodDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG5cbiAgICAgICAgZWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsvLyBEbyBub3RoaW5nXG4gICAgICB9XG4gICAgfSwgZGVsYXkpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQnJvd3NlciBzbmlmZmluZ1xuICAvLyBVbmZvcnR1bmF0ZWx5LCBkdWUgdG8gbWl4ZWQgc3VwcG9ydCwgVUEgc25pZmZpbmcgaXMgcmVxdWlyZWRcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgdmFyIGJyb3dzZXIgPSB7XG4gICAgaXNJRTpcbiAgICAvKiBAY2Nfb24hQCAqL1xuICAgICAhIWRvY3VtZW50LmRvY3VtZW50TW9kZSxcbiAgICBpc0VkZ2U6IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdFZGdlJyksXG4gICAgaXNXZWJraXQ6ICdXZWJraXRBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgIS9FZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgIGlzSVBob25lOiAvKGlQaG9uZXxpUG9kKS9naS50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSksXG4gICAgaXNJb3M6IC8oaVBhZHxpUGhvbmV8aVBvZCkvZ2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pXG4gIH07XG5cbiAgZnVuY3Rpb24gY2xvbmVEZWVwKG9iamVjdCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xuICB9IC8vIEdldCBhIG5lc3RlZCB2YWx1ZSBpbiBhbiBvYmplY3RcblxuICBmdW5jdGlvbiBnZXREZWVwKG9iamVjdCwgcGF0aCkge1xuICAgIHJldHVybiBwYXRoLnNwbGl0KCcuJykucmVkdWNlKGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmpba2V5XTtcbiAgICB9LCBvYmplY3QpO1xuICB9IC8vIERlZXAgZXh0ZW5kIGRlc3RpbmF0aW9uIG9iamVjdCB3aXRoIE4gbW9yZSBvYmplY3RzXG5cbiAgZnVuY3Rpb24gZXh0ZW5kKCkge1xuICAgIHZhciB0YXJnZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZXMgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgc291cmNlc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICB2YXIgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuXG4gICAgaWYgKCFpcyQxLm9iamVjdChzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoaXMkMS5vYmplY3Qoc291cmNlW2tleV0pKSB7XG4gICAgICAgIGlmICghT2JqZWN0LmtleXModGFyZ2V0KS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCB7fSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXh0ZW5kKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgX2RlZmluZVByb3BlcnR5KHt9LCBrZXksIHNvdXJjZVtrZXldKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGV4dGVuZC5hcHBseSh2b2lkIDAsIFt0YXJnZXRdLmNvbmNhdChzb3VyY2VzKSk7XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwKGVsZW1lbnRzLCB3cmFwcGVyKSB7XG4gICAgLy8gQ29udmVydCBgZWxlbWVudHNgIHRvIGFuIGFycmF5LCBpZiBuZWNlc3NhcnkuXG4gICAgdmFyIHRhcmdldHMgPSBlbGVtZW50cy5sZW5ndGggPyBlbGVtZW50cyA6IFtlbGVtZW50c107IC8vIExvb3BzIGJhY2t3YXJkcyB0byBwcmV2ZW50IGhhdmluZyB0byBjbG9uZSB0aGUgd3JhcHBlciBvbiB0aGVcbiAgICAvLyBmaXJzdCBlbGVtZW50IChzZWUgYGNoaWxkYCBiZWxvdykuXG5cbiAgICBBcnJheS5mcm9tKHRhcmdldHMpLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgdmFyIGNoaWxkID0gaW5kZXggPiAwID8gd3JhcHBlci5jbG9uZU5vZGUodHJ1ZSkgOiB3cmFwcGVyOyAvLyBDYWNoZSB0aGUgY3VycmVudCBwYXJlbnQgYW5kIHNpYmxpbmcuXG5cbiAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB2YXIgc2libGluZyA9IGVsZW1lbnQubmV4dFNpYmxpbmc7IC8vIFdyYXAgdGhlIGVsZW1lbnQgKGlzIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBmcm9tIGl0cyBjdXJyZW50XG4gICAgICAvLyBwYXJlbnQpLlxuXG4gICAgICBjaGlsZC5hcHBlbmRDaGlsZChlbGVtZW50KTsgLy8gSWYgdGhlIGVsZW1lbnQgaGFkIGEgc2libGluZywgaW5zZXJ0IHRoZSB3cmFwcGVyIGJlZm9yZVxuICAgICAgLy8gdGhlIHNpYmxpbmcgdG8gbWFpbnRhaW4gdGhlIEhUTUwgc3RydWN0dXJlOyBvdGhlcndpc2UsIGp1c3RcbiAgICAgIC8vIGFwcGVuZCBpdCB0byB0aGUgcGFyZW50LlxuXG4gICAgICBpZiAoc2libGluZykge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gLy8gU2V0IGF0dHJpYnV0ZXNcblxuICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAoIWlzJDEuZWxlbWVudChlbGVtZW50KSB8fCBpcyQxLmVtcHR5KGF0dHJpYnV0ZXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBBc3N1bWUgbnVsbCBhbmQgdW5kZWZpbmVkIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGxlZnQgb3V0LFxuICAgIC8vIFNldHRpbmcgdGhlbSB3b3VsZCBvdGhlcndpc2UgY29udmVydCB0aGVtIHRvIFwibnVsbFwiIGFuZCBcInVuZGVmaW5lZFwiXG5cblxuICAgIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZpbHRlcihmdW5jdGlvbiAoX3JlZikge1xuICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksXG4gICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTtcblxuICAgICAgcmV0dXJuICFpcyQxLm51bGxPclVuZGVmaW5lZCh2YWx1ZSk7XG4gICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgIHZhciBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYzLCAyKSxcbiAgICAgICAgICBrZXkgPSBfcmVmNFswXSxcbiAgICAgICAgICB2YWx1ZSA9IF9yZWY0WzFdO1xuXG4gICAgICByZXR1cm4gZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgfSk7XG4gIH0gLy8gQ3JlYXRlIGEgRG9jdW1lbnRGcmFnbWVudFxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodHlwZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgIC8vIENyZWF0ZSBhIG5ldyA8ZWxlbWVudD5cbiAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7IC8vIFNldCBhbGwgcGFzc2VkIGF0dHJpYnV0ZXNcblxuICAgIGlmIChpcyQxLm9iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgc2V0QXR0cmlidXRlcyhlbGVtZW50LCBhdHRyaWJ1dGVzKTtcbiAgICB9IC8vIEFkZCB0ZXh0IG5vZGVcblxuXG4gICAgaWYgKGlzJDEuc3RyaW5nKHRleHQpKSB7XG4gICAgICBlbGVtZW50LmlubmVyVGV4dCA9IHRleHQ7XG4gICAgfSAvLyBSZXR1cm4gYnVpbHQgZWxlbWVudFxuXG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSAvLyBJbmFlcnQgYW4gZWxlbWVudCBhZnRlciBhbm90aGVyXG5cbiAgZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoZWxlbWVudCwgdGFyZ2V0KSB7XG4gICAgaWYgKCFpcyQxLmVsZW1lbnQoZWxlbWVudCkgfHwgIWlzJDEuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHRhcmdldC5uZXh0U2libGluZyk7XG4gIH0gLy8gSW5zZXJ0IGEgRG9jdW1lbnRGcmFnbWVudFxuXG4gIGZ1bmN0aW9uIGluc2VydEVsZW1lbnQodHlwZSwgcGFyZW50LCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgaWYgKCFpcyQxLmVsZW1lbnQocGFyZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KHR5cGUsIGF0dHJpYnV0ZXMsIHRleHQpKTtcbiAgfSAvLyBSZW1vdmUgZWxlbWVudChzKVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWxlbWVudCkge1xuICAgIGlmIChpcyQxLm5vZGVMaXN0KGVsZW1lbnQpIHx8IGlzJDEuYXJyYXkoZWxlbWVudCkpIHtcbiAgICAgIEFycmF5LmZyb20oZWxlbWVudCkuZm9yRWFjaChyZW1vdmVFbGVtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzJDEuZWxlbWVudChlbGVtZW50KSB8fCAhaXMkMS5lbGVtZW50KGVsZW1lbnQucGFyZW50Tm9kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gIH0gLy8gUmVtb3ZlIGFsbCBjaGlsZCBlbGVtZW50c1xuXG4gIGZ1bmN0aW9uIGVtcHR5RWxlbWVudChlbGVtZW50KSB7XG4gICAgaWYgKCFpcyQxLmVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGVuZ3RoID0gZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDtcblxuICAgIHdoaWxlIChsZW5ndGggPiAwKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQubGFzdENoaWxkKTtcbiAgICAgIGxlbmd0aCAtPSAxO1xuICAgIH1cbiAgfSAvLyBSZXBsYWNlIGVsZW1lbnRcblxuICBmdW5jdGlvbiByZXBsYWNlRWxlbWVudChuZXdDaGlsZCwgb2xkQ2hpbGQpIHtcbiAgICBpZiAoIWlzJDEuZWxlbWVudChvbGRDaGlsZCkgfHwgIWlzJDEuZWxlbWVudChvbGRDaGlsZC5wYXJlbnROb2RlKSB8fCAhaXMkMS5lbGVtZW50KG5ld0NoaWxkKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgb2xkQ2hpbGQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgICByZXR1cm4gbmV3Q2hpbGQ7XG4gIH0gLy8gR2V0IGFuIGF0dHJpYnV0ZSBvYmplY3QgZnJvbSBhIHN0cmluZyBzZWxlY3RvclxuXG4gIGZ1bmN0aW9uIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3Ioc2VsLCBleGlzdGluZ0F0dHJpYnV0ZXMpIHtcbiAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAvLyAnLnRlc3QnIHRvIHsgY2xhc3M6ICd0ZXN0JyB9XG4gICAgLy8gJyN0ZXN0JyB0byB7IGlkOiAndGVzdCcgfVxuICAgIC8vICdbZGF0YS10ZXN0PVwidGVzdFwiXScgdG8geyAnZGF0YS10ZXN0JzogJ3Rlc3QnIH1cbiAgICBpZiAoIWlzJDEuc3RyaW5nKHNlbCkgfHwgaXMkMS5lbXB0eShzZWwpKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICB2YXIgZXhpc3RpbmcgPSBleHRlbmQoe30sIGV4aXN0aW5nQXR0cmlidXRlcyk7XG4gICAgc2VsLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgLy8gUmVtb3ZlIHdoaXRlc3BhY2VcbiAgICAgIHZhciBzZWxlY3RvciA9IHMudHJpbSgpO1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IHNlbGVjdG9yLnJlcGxhY2UoJy4nLCAnJyk7XG4gICAgICB2YXIgc3RyaXBwZWQgPSBzZWxlY3Rvci5yZXBsYWNlKC9bW1xcXV0vZywgJycpOyAvLyBHZXQgdGhlIHBhcnRzIGFuZCB2YWx1ZVxuXG4gICAgICB2YXIgcGFydHMgPSBzdHJpcHBlZC5zcGxpdCgnPScpO1xuXG4gICAgICB2YXIgX3BhcnRzID0gX3NsaWNlZFRvQXJyYXkocGFydHMsIDEpLFxuICAgICAgICAgIGtleSA9IF9wYXJ0c1swXTtcblxuICAgICAgdmFyIHZhbHVlID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzWzFdLnJlcGxhY2UoL1tcIiddL2csICcnKSA6ICcnOyAvLyBHZXQgdGhlIGZpcnN0IGNoYXJhY3RlclxuXG4gICAgICB2YXIgc3RhcnQgPSBzZWxlY3Rvci5jaGFyQXQoMCk7XG5cbiAgICAgIHN3aXRjaCAoc3RhcnQpIHtcbiAgICAgICAgY2FzZSAnLic6XG4gICAgICAgICAgLy8gQWRkIHRvIGV4aXN0aW5nIGNsYXNzbmFtZVxuICAgICAgICAgIGlmIChpcyQxLnN0cmluZyhleGlzdGluZy5jbGFzcykpIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBcIlwiLmNvbmNhdChleGlzdGluZy5jbGFzcywgXCIgXCIpLmNvbmNhdChjbGFzc05hbWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmNsYXNzID0gY2xhc3NOYW1lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJyMnOlxuICAgICAgICAgIC8vIElEIHNlbGVjdG9yXG4gICAgICAgICAgYXR0cmlidXRlcy5pZCA9IHNlbGVjdG9yLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgLy8gQXR0cmlidXRlIHNlbGVjdG9yXG4gICAgICAgICAgYXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGV4dGVuZChleGlzdGluZywgYXR0cmlidXRlcyk7XG4gIH0gLy8gVG9nZ2xlIGhpZGRlblxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUhpZGRlbihlbGVtZW50LCBoaWRkZW4pIHtcbiAgICBpZiAoIWlzJDEuZWxlbWVudChlbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBoaWRlID0gaGlkZGVuO1xuXG4gICAgaWYgKCFpcyQxLmJvb2xlYW4oaGlkZSkpIHtcbiAgICAgIGhpZGUgPSAhZWxlbWVudC5oaWRkZW47XG4gICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblxuXG4gICAgZWxlbWVudC5oaWRkZW4gPSBoaWRlO1xuICB9IC8vIE1pcnJvciBFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUsIHdpdGggSUUgY29tcGF0aWJpbGl0eSBmb3IgXCJmb3JjZVwiIGFyZ3VtZW50XG5cbiAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lLCBmb3JjZSkge1xuICAgIGlmIChpcyQxLm5vZGVMaXN0KGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50KS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHRvZ2dsZUNsYXNzKGUsIGNsYXNzTmFtZSwgZm9yY2UpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGlzJDEuZWxlbWVudChlbGVtZW50KSkge1xuICAgICAgdmFyIG1ldGhvZCA9ICd0b2dnbGUnO1xuXG4gICAgICBpZiAodHlwZW9mIGZvcmNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBtZXRob2QgPSBmb3JjZSA/ICdhZGQnIDogJ3JlbW92ZSc7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0W21ldGhvZF0oY2xhc3NOYW1lKTtcbiAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSAvLyBIYXMgY2xhc3MgbmFtZVxuXG4gIGZ1bmN0aW9uIGhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgIHJldHVybiBpcyQxLmVsZW1lbnQoZWxlbWVudCkgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgfSAvLyBFbGVtZW50IG1hdGNoZXMgc2VsZWN0b3JcblxuICBmdW5jdGlvbiBtYXRjaGVzJDEoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgX0VsZW1lbnQgPSBFbGVtZW50LFxuICAgICAgICBwcm90b3R5cGUgPSBfRWxlbWVudC5wcm90b3R5cGU7XG5cbiAgICBmdW5jdGlvbiBtYXRjaCgpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5pbmNsdWRlcyh0aGlzKTtcbiAgICB9XG5cbiAgICB2YXIgbWV0aG9kID0gcHJvdG90eXBlLm1hdGNoZXMgfHwgcHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBwcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8IHByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBtYXRjaDtcbiAgICByZXR1cm4gbWV0aG9kLmNhbGwoZWxlbWVudCwgc2VsZWN0b3IpO1xuICB9IC8vIENsb3Nlc3QgYW5jZXN0b3IgZWxlbWVudCBtYXRjaGluZyBzZWxlY3RvciAoYWxzbyB0ZXN0cyBlbGVtZW50IGl0c2VsZilcblxuICBmdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgdmFyIF9FbGVtZW50MiA9IEVsZW1lbnQsXG4gICAgICAgIHByb3RvdHlwZSA9IF9FbGVtZW50Mi5wcm90b3R5cGU7IC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2Nsb3Nlc3QjUG9seWZpbGxcblxuICAgIGZ1bmN0aW9uIGNsb3Nlc3RFbGVtZW50KCkge1xuICAgICAgdmFyIGVsID0gdGhpcztcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAobWF0Y2hlcyQxLm1hdGNoZXMoZWwsIHNlbGVjdG9yKSkgcmV0dXJuIGVsO1xuICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZTtcbiAgICAgIH0gd2hpbGUgKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1ldGhvZCA9IHByb3RvdHlwZS5jbG9zZXN0IHx8IGNsb3Nlc3RFbGVtZW50O1xuICAgIHJldHVybiBtZXRob2QuY2FsbChlbGVtZW50LCBzZWxlY3Rvcik7XG4gIH0gLy8gRmluZCBhbGwgZWxlbWVudHNcblxuICBmdW5jdGlvbiBnZXRFbGVtZW50cyhzZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfSAvLyBGaW5kIGEgc2luZ2xlIGVsZW1lbnRcblxuICBmdW5jdGlvbiBnZXRFbGVtZW50KHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9IC8vIFNldCBmb2N1cyBhbmQgdGFiIGZvY3VzIGNsYXNzXG5cbiAgZnVuY3Rpb24gc2V0Rm9jdXMoKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7XG4gICAgdmFyIHRhYkZvY3VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgIGlmICghaXMkMS5lbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBTZXQgcmVndWxhciBmb2N1c1xuXG5cbiAgICBlbGVtZW50LmZvY3VzKHtcbiAgICAgIHByZXZlbnRTY3JvbGw6IHRydWVcbiAgICB9KTsgLy8gSWYgd2Ugd2FudCB0byBtaW1pYyBrZXlib2FyZCBmb2N1cyB2aWEgdGFiXG5cbiAgICBpZiAodGFiRm9jdXMpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKGVsZW1lbnQsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBkZWZhdWx0Q29kZWNzID0ge1xuICAgICdhdWRpby9vZ2cnOiAndm9yYmlzJyxcbiAgICAnYXVkaW8vd2F2JzogJzEnLFxuICAgICd2aWRlby93ZWJtJzogJ3ZwOCwgdm9yYmlzJyxcbiAgICAndmlkZW8vbXA0JzogJ2F2YzEuNDJFMDFFLCBtcDRhLjQwLjInLFxuICAgICd2aWRlby9vZ2cnOiAndGhlb3JhJ1xuICB9OyAvLyBDaGVjayBmb3IgZmVhdHVyZSBzdXBwb3J0XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgLy8gQmFzaWMgc3VwcG9ydFxuICAgIGF1ZGlvOiAnY2FuUGxheVR5cGUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyksXG4gICAgdmlkZW86ICdjYW5QbGF5VHlwZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKSxcbiAgICAvLyBDaGVjayBmb3Igc3VwcG9ydFxuICAgIC8vIEJhc2ljIGZ1bmN0aW9uYWxpdHkgdnMgZnVsbCBVSVxuICAgIGNoZWNrOiBmdW5jdGlvbiBjaGVjayh0eXBlLCBwcm92aWRlciwgcGxheXNpbmxpbmUpIHtcbiAgICAgIHZhciBjYW5QbGF5SW5saW5lID0gYnJvd3Nlci5pc0lQaG9uZSAmJiBwbGF5c2lubGluZSAmJiBzdXBwb3J0LnBsYXlzaW5saW5lO1xuICAgICAgdmFyIGFwaSA9IHN1cHBvcnRbdHlwZV0gfHwgcHJvdmlkZXIgIT09ICdodG1sNSc7XG4gICAgICB2YXIgdWkgPSBhcGkgJiYgc3VwcG9ydC5yYW5nZUlucHV0ICYmICh0eXBlICE9PSAndmlkZW8nIHx8ICFicm93c2VyLmlzSVBob25lIHx8IGNhblBsYXlJbmxpbmUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBpOiBhcGksXG4gICAgICAgIHVpOiB1aVxuICAgICAgfTtcbiAgICB9LFxuICAgIC8vIFBpY3R1cmUtaW4tcGljdHVyZSBzdXBwb3J0XG4gICAgLy8gU2FmYXJpICYgQ2hyb21lIG9ubHkgY3VycmVudGx5XG4gICAgcGlwOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoYnJvd3Nlci5pc0lQaG9uZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IC8vIFNhZmFyaVxuICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vd2Via2l0anMvYWRkaW5nX3BpY3R1cmVfaW5fcGljdHVyZV90b195b3VyX3NhZmFyaV9tZWRpYV9jb250cm9sc1xuXG5cbiAgICAgIGlmIChpcyQxLmZ1bmN0aW9uKGNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJykud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IC8vIENocm9tZVxuICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxOC8xMC93YXRjaC12aWRlby11c2luZy1waWN0dXJlLWluLXBpY3R1cmVcblxuXG4gICAgICBpZiAoZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVuYWJsZWQgJiYgIWNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJykuZGlzYWJsZVBpY3R1cmVJblBpY3R1cmUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KCksXG4gICAgLy8gQWlycGxheSBzdXBwb3J0XG4gICAgLy8gU2FmYXJpIG9ubHkgY3VycmVudGx5XG4gICAgYWlycGxheTogaXMkMS5mdW5jdGlvbih3aW5kb3cuV2ViS2l0UGxheWJhY2tUYXJnZXRBdmFpbGFiaWxpdHlFdmVudCksXG4gICAgLy8gSW5saW5lIHBsYXliYWNrIHN1cHBvcnRcbiAgICAvLyBodHRwczovL3dlYmtpdC5vcmcvYmxvZy82Nzg0L25ldy12aWRlby1wb2xpY2llcy1mb3ItaW9zL1xuICAgIHBsYXlzaW5saW5lOiAncGxheXNJbmxpbmUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyksXG4gICAgLy8gQ2hlY2sgZm9yIG1pbWUgdHlwZSBzdXBwb3J0IGFnYWluc3QgYSBwbGF5ZXIgaW5zdGFuY2VcbiAgICAvLyBDcmVkaXRzOiBodHRwOi8vZGl2ZWludG9odG1sNS5pbmZvL2V2ZXJ5dGhpbmcuaHRtbFxuICAgIC8vIFJlbGF0ZWQ6IGh0dHA6Ly93d3cubGVhbmJhY2twbGF5ZXIuY29tL3Rlc3QvaDVtdC5odG1sXG4gICAgbWltZTogZnVuY3Rpb24gbWltZShpbnB1dCkge1xuICAgICAgaWYgKGlzJDEuZW1wdHkoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9pbnB1dCRzcGxpdCA9IGlucHV0LnNwbGl0KCcvJyksXG4gICAgICAgICAgX2lucHV0JHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9pbnB1dCRzcGxpdCwgMSksXG4gICAgICAgICAgbWVkaWFUeXBlID0gX2lucHV0JHNwbGl0MlswXTtcblxuICAgICAgdmFyIHR5cGUgPSBpbnB1dDsgLy8gVmVyaWZ5IHdlJ3JlIHVzaW5nIEhUTUw1IGFuZCB0aGVyZSdzIG5vIG1lZGlhIHR5cGUgbWlzbWF0Y2hcblxuICAgICAgaWYgKCF0aGlzLmlzSFRNTDUgfHwgbWVkaWFUeXBlICE9PSB0aGlzLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSAvLyBBZGQgY29kZWMgaWYgcmVxdWlyZWRcblxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZGVmYXVsdENvZGVjcykuaW5jbHVkZXModHlwZSkpIHtcbiAgICAgICAgdHlwZSArPSBcIjsgY29kZWNzPVxcXCJcIi5jb25jYXQoZGVmYXVsdENvZGVjc1tpbnB1dF0sIFwiXFxcIlwiKTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odHlwZSAmJiB0aGlzLm1lZGlhLmNhblBsYXlUeXBlKHR5cGUpLnJlcGxhY2UoL25vLywgJycpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gQ2hlY2sgZm9yIHRleHRUcmFja3Mgc3VwcG9ydFxuICAgIHRleHRUcmFja3M6ICd0ZXh0VHJhY2tzJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpLFxuICAgIC8vIDxpbnB1dCB0eXBlPVwicmFuZ2VcIj4gU2xpZGVyc1xuICAgIHJhbmdlSW5wdXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICByYW5nZS50eXBlID0gJ3JhbmdlJztcbiAgICAgIHJldHVybiByYW5nZS50eXBlID09PSAncmFuZ2UnO1xuICAgIH0oKSxcbiAgICAvLyBUb3VjaFxuICAgIC8vIE5PVEU6IFJlbWVtYmVyIGEgZGV2aWNlIGNhbiBiZSBtb3VzZSArIHRvdWNoIGVuYWJsZWQgc28gd2UgY2hlY2sgb24gZmlyc3QgdG91Y2ggZXZlbnRcbiAgICB0b3VjaDogJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgIC8vIERldGVjdCB0cmFuc2l0aW9ucyBzdXBwb3J0XG4gICAgdHJhbnNpdGlvbnM6IHRyYW5zaXRpb25FbmRFdmVudCAhPT0gZmFsc2UsXG4gICAgLy8gUmVkdWNlZCBtb3Rpb24gaU9TICYgTWFjT1Mgc2V0dGluZ1xuICAgIC8vIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzc1NTEvcmVzcG9uc2l2ZS1kZXNpZ24tZm9yLW1vdGlvbi9cbiAgICByZWR1Y2VkTW90aW9uOiAnbWF0Y2hNZWRpYScgaW4gd2luZG93ICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1yZWR1Y2VkLW1vdGlvbiknKS5tYXRjaGVzXG4gIH07XG5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvRXZlbnRMaXN0ZW5lck9wdGlvbnMvYmxvYi9naC1wYWdlcy9leHBsYWluZXIubWRcbiAgLy8gaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1OUE02MTcySjIyZ1xuXG4gIHZhciBzdXBwb3J0c1Bhc3NpdmVMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gVGVzdCB2aWEgYSBnZXR0ZXIgaW4gdGhlIG9wdGlvbnMgb2JqZWN0IHRvIHNlZSBpZiB0aGUgcGFzc2l2ZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZFxuICAgIHZhciBzdXBwb3J0ZWQgPSBmYWxzZTtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRpb25zKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZSkgey8vIERvIG5vdGhpbmdcbiAgICB9XG5cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xuICB9KCk7IC8vIFRvZ2dsZSBldmVudCBsaXN0ZW5lclxuXG5cbiAgZnVuY3Rpb24gdG9nZ2xlTGlzdGVuZXIoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b2dnbGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlO1xuICAgIHZhciBwYXNzaXZlID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0cnVlO1xuICAgIHZhciBjYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiBmYWxzZTtcblxuICAgIC8vIEJhaWwgaWYgbm8gZWxlbWVudCwgZXZlbnQsIG9yIGNhbGxiYWNrXG4gICAgaWYgKCFlbGVtZW50IHx8ICEoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGVsZW1lbnQpIHx8IGlzJDEuZW1wdHkoZXZlbnQpIHx8ICFpcyQxLmZ1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQWxsb3cgbXVsdGlwbGUgZXZlbnRzXG5cblxuICAgIHZhciBldmVudHMgPSBldmVudC5zcGxpdCgnICcpOyAvLyBCdWlsZCBvcHRpb25zXG4gICAgLy8gRGVmYXVsdCB0byBqdXN0IHRoZSBjYXB0dXJlIGJvb2xlYW4gZm9yIGJyb3dzZXJzIHdpdGggbm8gcGFzc2l2ZSBsaXN0ZW5lciBzdXBwb3J0XG5cbiAgICB2YXIgb3B0aW9ucyA9IGNhcHR1cmU7IC8vIElmIHBhc3NpdmUgZXZlbnRzIGxpc3RlbmVycyBhcmUgc3VwcG9ydGVkXG5cbiAgICBpZiAoc3VwcG9ydHNQYXNzaXZlTGlzdGVuZXJzKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICAvLyBXaGV0aGVyIHRoZSBsaXN0ZW5lciBjYW4gYmUgcGFzc2l2ZSAoaS5lLiBkZWZhdWx0IG5ldmVyIHByZXZlbnRlZClcbiAgICAgICAgcGFzc2l2ZTogcGFzc2l2ZSxcbiAgICAgICAgLy8gV2hldGhlciB0aGUgbGlzdGVuZXIgaXMgYSBjYXB0dXJpbmcgbGlzdGVuZXIgb3Igbm90XG4gICAgICAgIGNhcHR1cmU6IGNhcHR1cmVcbiAgICAgIH07XG4gICAgfSAvLyBJZiBhIHNpbmdsZSBub2RlIGlzIHBhc3NlZCwgYmluZCB0aGUgZXZlbnQgbGlzdGVuZXJcblxuXG4gICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIGlmIChfdGhpcyAmJiBfdGhpcy5ldmVudExpc3RlbmVycyAmJiB0b2dnbGUpIHtcbiAgICAgICAgLy8gQ2FjaGUgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lcnMucHVzaCh7XG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50W3RvZ2dsZSA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdyZW1vdmVFdmVudExpc3RlbmVyJ10odHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9IC8vIEJpbmQgZXZlbnQgaGFuZGxlclxuXG4gIGZ1bmN0aW9uIG9uKGVsZW1lbnQpIHtcbiAgICB2YXIgZXZlbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgcGFzc2l2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogdHJ1ZTtcbiAgICB2YXIgY2FwdHVyZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7XG4gICAgdG9nZ2xlTGlzdGVuZXIuY2FsbCh0aGlzLCBlbGVtZW50LCBldmVudHMsIGNhbGxiYWNrLCB0cnVlLCBwYXNzaXZlLCBjYXB0dXJlKTtcbiAgfSAvLyBVbmJpbmQgZXZlbnQgaGFuZGxlclxuXG4gIGZ1bmN0aW9uIG9mZihlbGVtZW50KSB7XG4gICAgdmFyIGV2ZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7XG4gICAgdmFyIHBhc3NpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHRydWU7XG4gICAgdmFyIGNhcHR1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlO1xuICAgIHRvZ2dsZUxpc3RlbmVyLmNhbGwodGhpcywgZWxlbWVudCwgZXZlbnRzLCBjYWxsYmFjaywgZmFsc2UsIHBhc3NpdmUsIGNhcHR1cmUpO1xuICB9IC8vIEJpbmQgb25jZS1vbmx5IGV2ZW50IGhhbmRsZXJcblxuICBmdW5jdGlvbiBvbmNlKGVsZW1lbnQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBldmVudHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkO1xuICAgIHZhciBwYXNzaXZlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0cnVlO1xuICAgIHZhciBjYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBmYWxzZTtcblxuICAgIHZhciBvbmNlQ2FsbGJhY2sgPSBmdW5jdGlvbiBvbmNlQ2FsbGJhY2soKSB7XG4gICAgICBvZmYoZWxlbWVudCwgZXZlbnRzLCBvbmNlQ2FsbGJhY2ssIHBhc3NpdmUsIGNhcHR1cmUpO1xuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMyLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdG9nZ2xlTGlzdGVuZXIuY2FsbCh0aGlzLCBlbGVtZW50LCBldmVudHMsIG9uY2VDYWxsYmFjaywgdHJ1ZSwgcGFzc2l2ZSwgY2FwdHVyZSk7XG4gIH0gLy8gVHJpZ2dlciBldmVudFxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChlbGVtZW50KSB7XG4gICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICAgIHZhciBidWJibGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcbiAgICB2YXIgZGV0YWlsID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuICAgIC8vIEJhaWwgaWYgbm8gZWxlbWVudFxuICAgIGlmICghaXMkMS5lbGVtZW50KGVsZW1lbnQpIHx8IGlzJDEuZW1wdHkodHlwZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIENyZWF0ZSBhbmQgZGlzcGF0Y2ggdGhlIGV2ZW50XG5cblxuICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCh0eXBlLCB7XG4gICAgICBidWJibGVzOiBidWJibGVzLFxuICAgICAgZGV0YWlsOiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgZGV0YWlsKSwge30sIHtcbiAgICAgICAgcGx5cjogdGhpc1xuICAgICAgfSlcbiAgICB9KTsgLy8gRGlzcGF0Y2ggdGhlIGV2ZW50XG5cbiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9IC8vIFVuYmluZCBhbGwgY2FjaGVkIGV2ZW50IGxpc3RlbmVyc1xuXG4gIGZ1bmN0aW9uIHVuYmluZExpc3RlbmVycygpIHtcbiAgICBpZiAodGhpcyAmJiB0aGlzLmV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBpdGVtLmVsZW1lbnQsXG4gICAgICAgICAgICB0eXBlID0gaXRlbS50eXBlLFxuICAgICAgICAgICAgY2FsbGJhY2sgPSBpdGVtLmNhbGxiYWNrLFxuICAgICAgICAgICAgb3B0aW9ucyA9IGl0ZW0ub3B0aW9ucztcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgfSAvLyBSdW4gbWV0aG9kIHdoZW4gLyBpZiBwbGF5ZXIgaXMgcmVhZHlcblxuICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgcmV0dXJuIF90aGlzMy5yZWFkeSA/IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkgOiBvbi5jYWxsKF90aGlzMywgX3RoaXMzLmVsZW1lbnRzLmNvbnRhaW5lciwgJ3JlYWR5JywgcmVzb2x2ZSk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7fSk7XG4gIH1cblxuICAvKipcbiAgICogU2lsZW5jZSBhIFByb21pc2UtbGlrZSBvYmplY3QuXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBhdm9pZGluZyBub24taGFybWZ1bCwgYnV0IHBvdGVudGlhbGx5IGNvbmZ1c2luZyBcInVuY2F1Z2h0XG4gICAqIHBsYXkgcHJvbWlzZVwiIHJlamVjdGlvbiBlcnJvciBtZXNzYWdlcy5cbiAgICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZSBBbiBvYmplY3QgdGhhdCBtYXkgb3IgbWF5IG5vdCBiZSBgUHJvbWlzZWAtbGlrZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gc2lsZW5jZVByb21pc2UodmFsdWUpIHtcbiAgICBpZiAoaXMkMS5wcm9taXNlKHZhbHVlKSkge1xuICAgICAgdmFsdWUudGhlbihudWxsLCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGVSYXRpbyhpbnB1dCkge1xuICAgIGlmICghaXMkMS5hcnJheShpbnB1dCkgJiYgKCFpcyQxLnN0cmluZyhpbnB1dCkgfHwgIWlucHV0LmluY2x1ZGVzKCc6JykpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHJhdGlvID0gaXMkMS5hcnJheShpbnB1dCkgPyBpbnB1dCA6IGlucHV0LnNwbGl0KCc6Jyk7XG4gICAgcmV0dXJuIHJhdGlvLm1hcChOdW1iZXIpLmV2ZXJ5KGlzJDEubnVtYmVyKTtcbiAgfVxuICBmdW5jdGlvbiByZWR1Y2VBc3BlY3RSYXRpbyhyYXRpbykge1xuICAgIGlmICghaXMkMS5hcnJheShyYXRpbykgfHwgIXJhdGlvLmV2ZXJ5KGlzJDEubnVtYmVyKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIF9yYXRpbyA9IF9zbGljZWRUb0FycmF5KHJhdGlvLCAyKSxcbiAgICAgICAgd2lkdGggPSBfcmF0aW9bMF0sXG4gICAgICAgIGhlaWdodCA9IF9yYXRpb1sxXTtcblxuICAgIHZhciBnZXREaXZpZGVyID0gZnVuY3Rpb24gZ2V0RGl2aWRlcih3LCBoKSB7XG4gICAgICByZXR1cm4gaCA9PT0gMCA/IHcgOiBnZXREaXZpZGVyKGgsIHcgJSBoKTtcbiAgICB9O1xuXG4gICAgdmFyIGRpdmlkZXIgPSBnZXREaXZpZGVyKHdpZHRoLCBoZWlnaHQpO1xuICAgIHJldHVybiBbd2lkdGggLyBkaXZpZGVyLCBoZWlnaHQgLyBkaXZpZGVyXTtcbiAgfVxuICBmdW5jdGlvbiBnZXRBc3BlY3RSYXRpbyhpbnB1dCkge1xuICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKHJhdGlvKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVSYXRpbyhyYXRpbykgPyByYXRpby5zcGxpdCgnOicpLm1hcChOdW1iZXIpIDogbnVsbDtcbiAgICB9OyAvLyBUcnkgcHJvdmlkZWQgcmF0aW9cblxuXG4gICAgdmFyIHJhdGlvID0gcGFyc2UoaW5wdXQpOyAvLyBHZXQgZnJvbSBjb25maWdcblxuICAgIGlmIChyYXRpbyA9PT0gbnVsbCkge1xuICAgICAgcmF0aW8gPSBwYXJzZSh0aGlzLmNvbmZpZy5yYXRpbyk7XG4gICAgfSAvLyBHZXQgZnJvbSBlbWJlZFxuXG5cbiAgICBpZiAocmF0aW8gPT09IG51bGwgJiYgIWlzJDEuZW1wdHkodGhpcy5lbWJlZCkgJiYgaXMkMS5hcnJheSh0aGlzLmVtYmVkLnJhdGlvKSkge1xuICAgICAgcmF0aW8gPSB0aGlzLmVtYmVkLnJhdGlvO1xuICAgIH0gLy8gR2V0IGZyb20gSFRNTDUgdmlkZW9cblxuXG4gICAgaWYgKHJhdGlvID09PSBudWxsICYmIHRoaXMuaXNIVE1MNSkge1xuICAgICAgdmFyIF90aGlzJG1lZGlhID0gdGhpcy5tZWRpYSxcbiAgICAgICAgICB2aWRlb1dpZHRoID0gX3RoaXMkbWVkaWEudmlkZW9XaWR0aCxcbiAgICAgICAgICB2aWRlb0hlaWdodCA9IF90aGlzJG1lZGlhLnZpZGVvSGVpZ2h0O1xuICAgICAgcmF0aW8gPSByZWR1Y2VBc3BlY3RSYXRpbyhbdmlkZW9XaWR0aCwgdmlkZW9IZWlnaHRdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmF0aW87XG4gIH0gLy8gU2V0IGFzcGVjdCByYXRpbyBmb3IgcmVzcG9uc2l2ZSBjb250YWluZXJcblxuICBmdW5jdGlvbiBzZXRBc3BlY3RSYXRpbyhpbnB1dCkge1xuICAgIGlmICghdGhpcy5pc1ZpZGVvKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgdmFyIHdyYXBwZXIgPSB0aGlzLmVsZW1lbnRzLndyYXBwZXI7XG4gICAgdmFyIHJhdGlvID0gZ2V0QXNwZWN0UmF0aW8uY2FsbCh0aGlzLCBpbnB1dCk7XG5cbiAgICB2YXIgX3JlZiA9IGlzJDEuYXJyYXkocmF0aW8pID8gcmF0aW8gOiBbMCwgMF0sXG4gICAgICAgIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksXG4gICAgICAgIHcgPSBfcmVmMlswXSxcbiAgICAgICAgaCA9IF9yZWYyWzFdO1xuXG4gICAgdmFyIHBhZGRpbmcgPSAxMDAgLyB3ICogaDtcbiAgICB3cmFwcGVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIlwiLmNvbmNhdChwYWRkaW5nLCBcIiVcIik7IC8vIEZvciBWaW1lbyB3ZSBoYXZlIGFuIGV4dHJhIDxkaXY+IHRvIGhpZGUgdGhlIHN0YW5kYXJkIGNvbnRyb2xzIGFuZCBVSVxuXG4gICAgaWYgKHRoaXMuaXNWaW1lbyAmJiAhdGhpcy5jb25maWcudmltZW8ucHJlbWl1bSAmJiB0aGlzLnN1cHBvcnRlZC51aSkge1xuICAgICAgdmFyIGhlaWdodCA9IDEwMCAvIHRoaXMubWVkaWEub2Zmc2V0V2lkdGggKiBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lZGlhKS5wYWRkaW5nQm90dG9tLCAxMCk7XG4gICAgICB2YXIgb2Zmc2V0ID0gKGhlaWdodCAtIHBhZGRpbmcpIC8gKGhlaWdodCAvIDUwKTtcbiAgICAgIHRoaXMubWVkaWEuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVZKC1cIi5jb25jYXQob2Zmc2V0LCBcIiUpXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0hUTUw1KSB7XG4gICAgICB3cmFwcGVyLmNsYXNzTGlzdC50b2dnbGUodGhpcy5jb25maWcuY2xhc3NOYW1lcy52aWRlb0ZpeGVkUmF0aW8sIHJhdGlvICE9PSBudWxsKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFkZGluZzogcGFkZGluZyxcbiAgICAgIHJhdGlvOiByYXRpb1xuICAgIH07XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICB2YXIgaHRtbDUgPSB7XG4gICAgZ2V0U291cmNlczogZnVuY3Rpb24gZ2V0U291cmNlcygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5pc0hUTUw1KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZXMgPSBBcnJheS5mcm9tKHRoaXMubWVkaWEucXVlcnlTZWxlY3RvckFsbCgnc291cmNlJykpOyAvLyBGaWx0ZXIgb3V0IHVuc3VwcG9ydGVkIHNvdXJjZXMgKGlmIHR5cGUgaXMgc3BlY2lmaWVkKVxuXG4gICAgICByZXR1cm4gc291cmNlcy5maWx0ZXIoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICB2YXIgdHlwZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcblxuICAgICAgICBpZiAoaXMkMS5lbXB0eSh0eXBlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cHBvcnQubWltZS5jYWxsKF90aGlzLCB0eXBlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gR2V0IHF1YWxpdHkgbGV2ZWxzXG4gICAgZ2V0UXVhbGl0eU9wdGlvbnM6IGZ1bmN0aW9uIGdldFF1YWxpdHlPcHRpb25zKCkge1xuICAgICAgLy8gV2hldGhlciB3ZSdyZSBmb3JjaW5nIGFsbCBvcHRpb25zIChlLmcuIGZvciBzdHJlYW1pbmcpXG4gICAgICBpZiAodGhpcy5jb25maWcucXVhbGl0eS5mb3JjZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnF1YWxpdHkub3B0aW9ucztcbiAgICAgIH0gLy8gR2V0IHNpemVzIGZyb20gPHNvdXJjZT4gZWxlbWVudHNcblxuXG4gICAgICByZXR1cm4gaHRtbDUuZ2V0U291cmNlcy5jYWxsKHRoaXMpLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIoc291cmNlLmdldEF0dHJpYnV0ZSgnc2l6ZScpKTtcbiAgICAgIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgICB9LFxuICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgIGlmICghdGhpcy5pc0hUTUw1KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBsYXllciA9IHRoaXM7IC8vIFNldCBzcGVlZCBvcHRpb25zIGZyb20gY29uZmlnXG5cbiAgICAgIHBsYXllci5vcHRpb25zLnNwZWVkID0gcGxheWVyLmNvbmZpZy5zcGVlZC5vcHRpb25zOyAvLyBTZXQgYXNwZWN0IHJhdGlvIGlmIGZpeGVkXG5cbiAgICAgIGlmICghaXMkMS5lbXB0eSh0aGlzLmNvbmZpZy5yYXRpbykpIHtcbiAgICAgICAgc2V0QXNwZWN0UmF0aW8uY2FsbChwbGF5ZXIpO1xuICAgICAgfSAvLyBRdWFsaXR5XG5cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ3F1YWxpdHknLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIC8vIEdldCBzb3VyY2VzXG4gICAgICAgICAgdmFyIHNvdXJjZXMgPSBodG1sNS5nZXRTb3VyY2VzLmNhbGwocGxheWVyKTtcbiAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlcy5maW5kKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy5nZXRBdHRyaWJ1dGUoJ3NyYycpID09PSBwbGF5ZXIuc291cmNlO1xuICAgICAgICAgIH0pOyAvLyBSZXR1cm4gc2l6ZSwgaWYgbWF0Y2ggaXMgZm91bmRcblxuICAgICAgICAgIHJldHVybiBzb3VyY2UgJiYgTnVtYmVyKHNvdXJjZS5nZXRBdHRyaWJ1dGUoJ3NpemUnKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgICAgaWYgKHBsYXllci5xdWFsaXR5ID09PSBpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gLy8gSWYgd2UncmUgdXNpbmcgYW4gYW4gZXh0ZXJuYWwgaGFuZGxlci4uLlxuXG5cbiAgICAgICAgICBpZiAocGxheWVyLmNvbmZpZy5xdWFsaXR5LmZvcmNlZCAmJiBpcyQxLmZ1bmN0aW9uKHBsYXllci5jb25maWcucXVhbGl0eS5vbkNoYW5nZSkpIHtcbiAgICAgICAgICAgIHBsYXllci5jb25maWcucXVhbGl0eS5vbkNoYW5nZShpbnB1dCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEdldCBzb3VyY2VzXG4gICAgICAgICAgICB2YXIgc291cmNlcyA9IGh0bWw1LmdldFNvdXJjZXMuY2FsbChwbGF5ZXIpOyAvLyBHZXQgZmlyc3QgbWF0Y2ggZm9yIHJlcXVlc3RlZCBzaXplXG5cbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzLmZpbmQoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihzLmdldEF0dHJpYnV0ZSgnc2l6ZScpKSA9PT0gaW5wdXQ7XG4gICAgICAgICAgICB9KTsgLy8gTm8gbWF0Y2hpbmcgc291cmNlIGZvdW5kXG5cbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gLy8gR2V0IGN1cnJlbnQgc3RhdGVcblxuXG4gICAgICAgICAgICB2YXIgX3BsYXllciRtZWRpYSA9IHBsYXllci5tZWRpYSxcbiAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IF9wbGF5ZXIkbWVkaWEuY3VycmVudFRpbWUsXG4gICAgICAgICAgICAgICAgcGF1c2VkID0gX3BsYXllciRtZWRpYS5wYXVzZWQsXG4gICAgICAgICAgICAgICAgcHJlbG9hZCA9IF9wbGF5ZXIkbWVkaWEucHJlbG9hZCxcbiAgICAgICAgICAgICAgICByZWFkeVN0YXRlID0gX3BsYXllciRtZWRpYS5yZWFkeVN0YXRlLFxuICAgICAgICAgICAgICAgIHBsYXliYWNrUmF0ZSA9IF9wbGF5ZXIkbWVkaWEucGxheWJhY2tSYXRlOyAvLyBTZXQgbmV3IHNvdXJjZVxuXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEuc3JjID0gc291cmNlLmdldEF0dHJpYnV0ZSgnc3JjJyk7IC8vIFByZXZlbnQgbG9hZGluZyBpZiBwcmVsb2FkPVwibm9uZVwiIGFuZCB0aGUgY3VycmVudCBzb3VyY2UgaXNuJ3QgbG9hZGVkICgjMTA0NClcblxuICAgICAgICAgICAgaWYgKHByZWxvYWQgIT09ICdub25lJyB8fCByZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAgIC8vIFJlc3RvcmUgdGltZVxuICAgICAgICAgICAgICBwbGF5ZXIub25jZSgnbG9hZGVkbWV0YWRhdGEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNwZWVkID0gcGxheWJhY2tSYXRlO1xuICAgICAgICAgICAgICAgIHBsYXllci5jdXJyZW50VGltZSA9IGN1cnJlbnRUaW1lOyAvLyBSZXN1bWUgcGxheWluZ1xuXG4gICAgICAgICAgICAgICAgaWYgKCFwYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXllci5wbGF5KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7IC8vIExvYWQgbmV3IHNvdXJjZVxuXG4gICAgICAgICAgICAgIHBsYXllci5tZWRpYS5sb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBUcmlnZ2VyIGNoYW5nZSBldmVudFxuXG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3F1YWxpdHljaGFuZ2UnLCBmYWxzZSwge1xuICAgICAgICAgICAgcXVhbGl0eTogaW5wdXRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBDYW5jZWwgY3VycmVudCBuZXR3b3JrIHJlcXVlc3RzXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy8xNzRcbiAgICBjYW5jZWxSZXF1ZXN0czogZnVuY3Rpb24gY2FuY2VsUmVxdWVzdHMoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNIVE1MNSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFJlbW92ZSBjaGlsZCBzb3VyY2VzXG5cblxuICAgICAgcmVtb3ZlRWxlbWVudChodG1sNS5nZXRTb3VyY2VzLmNhbGwodGhpcykpOyAvLyBTZXQgYmxhbmsgdmlkZW8gc3JjIGF0dHJpYnV0ZVxuICAgICAgLy8gVGhpcyBpcyB0byBwcmV2ZW50IGEgTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEIGVycm9yXG4gICAgICAvLyBJbmZvOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMyMjMxNTc5L2hvdy10by1wcm9wZXJseS1kaXNwb3NlLW9mLWFuLWh0bWw1LXZpZGVvLWFuZC1jbG9zZS1zb2NrZXQtb3ItY29ubmVjdGlvblxuXG4gICAgICB0aGlzLm1lZGlhLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5jb25maWcuYmxhbmtWaWRlbyk7IC8vIExvYWQgdGhlIG5ldyBlbXB0eSBzb3VyY2VcbiAgICAgIC8vIFRoaXMgd2lsbCBjYW5jZWwgZXhpc3RpbmcgcmVxdWVzdHNcbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvMTc0XG5cbiAgICAgIHRoaXMubWVkaWEubG9hZCgpOyAvLyBEZWJ1Z2dpbmdcblxuICAgICAgdGhpcy5kZWJ1Zy5sb2coJ0NhbmNlbGxlZCBuZXR3b3JrIHJlcXVlc3RzJyk7XG4gICAgfVxuICB9O1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gZGVkdXBlKGFycmF5KSB7XG4gICAgaWYgKCFpcyQxLmFycmF5KGFycmF5KSkge1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIHJldHVybiBhcnJheS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXg7XG4gICAgfSk7XG4gIH0gLy8gR2V0IHRoZSBjbG9zZXN0IHZhbHVlIGluIGFuIGFycmF5XG5cbiAgZnVuY3Rpb24gY2xvc2VzdCQxKGFycmF5LCB2YWx1ZSkge1xuICAgIGlmICghaXMkMS5hcnJheShhcnJheSkgfHwgIWFycmF5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycmF5LnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3Vycikge1xuICAgICAgcmV0dXJuIE1hdGguYWJzKGN1cnIgLSB2YWx1ZSkgPCBNYXRoLmFicyhwcmV2IC0gdmFsdWUpID8gY3VyciA6IHByZXY7XG4gICAgfSk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlSWQocHJlZml4KSB7XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KHByZWZpeCwgXCItXCIpLmNvbmNhdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkpO1xuICB9IC8vIEZvcm1hdCBzdHJpbmdcblxuICBmdW5jdGlvbiBmb3JtYXQoaW5wdXQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoaXMkMS5lbXB0eShpbnB1dCkpIHtcbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5wdXQudG9TdHJpbmcoKS5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbiAobWF0Y2gsIGkpIHtcbiAgICAgIHJldHVybiBhcmdzW2ldLnRvU3RyaW5nKCk7XG4gICAgfSk7XG4gIH0gLy8gR2V0IHBlcmNlbnRhZ2VcblxuICBmdW5jdGlvbiBnZXRQZXJjZW50YWdlKGN1cnJlbnQsIG1heCkge1xuICAgIGlmIChjdXJyZW50ID09PSAwIHx8IG1heCA9PT0gMCB8fCBOdW1iZXIuaXNOYU4oY3VycmVudCkgfHwgTnVtYmVyLmlzTmFOKG1heCkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAoY3VycmVudCAvIG1heCAqIDEwMCkudG9GaXhlZCgyKTtcbiAgfSAvLyBSZXBsYWNlIGFsbCBvY2N1cmFuY2VzIG9mIGEgc3RyaW5nIGluIGEgc3RyaW5nXG5cbiAgdmFyIHJlcGxhY2VBbGwgPSBmdW5jdGlvbiByZXBsYWNlQWxsKCkge1xuICAgIHZhciBpbnB1dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7XG4gICAgdmFyIGZpbmQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICAgIHZhciByZXBsYWNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnJztcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZShuZXcgUmVnRXhwKGZpbmQudG9TdHJpbmcoKS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xcXS9cXFxcXSkvZywgJ1xcXFwkMScpLCAnZycpLCByZXBsYWNlLnRvU3RyaW5nKCkpO1xuICB9OyAvLyBDb252ZXJ0IHRvIHRpdGxlIGNhc2VcblxuICB2YXIgdG9UaXRsZUNhc2UgPSBmdW5jdGlvbiB0b1RpdGxlQ2FzZSgpIHtcbiAgICB2YXIgaW5wdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgIHJldHVybiBpbnB1dC50b1N0cmluZygpLnJlcGxhY2UoL1xcd1xcUyovZywgZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgIHJldHVybiB0ZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcbiAgfTsgLy8gQ29udmVydCBzdHJpbmcgdG8gcGFzY2FsQ2FzZVxuXG4gIGZ1bmN0aW9uIHRvUGFzY2FsQ2FzZSgpIHtcbiAgICB2YXIgaW5wdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgIHZhciBzdHJpbmcgPSBpbnB1dC50b1N0cmluZygpOyAvLyBDb252ZXJ0IGtlYmFiIGNhc2VcblxuICAgIHN0cmluZyA9IHJlcGxhY2VBbGwoc3RyaW5nLCAnLScsICcgJyk7IC8vIENvbnZlcnQgc25ha2UgY2FzZVxuXG4gICAgc3RyaW5nID0gcmVwbGFjZUFsbChzdHJpbmcsICdfJywgJyAnKTsgLy8gQ29udmVydCB0byB0aXRsZSBjYXNlXG5cbiAgICBzdHJpbmcgPSB0b1RpdGxlQ2FzZShzdHJpbmcpOyAvLyBDb252ZXJ0IHRvIHBhc2NhbCBjYXNlXG5cbiAgICByZXR1cm4gcmVwbGFjZUFsbChzdHJpbmcsICcgJywgJycpO1xuICB9IC8vIENvbnZlcnQgc3RyaW5nIHRvIHBhc2NhbENhc2VcblxuICBmdW5jdGlvbiB0b0NhbWVsQ2FzZSgpIHtcbiAgICB2YXIgaW5wdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgIHZhciBzdHJpbmcgPSBpbnB1dC50b1N0cmluZygpOyAvLyBDb252ZXJ0IHRvIHBhc2NhbCBjYXNlXG5cbiAgICBzdHJpbmcgPSB0b1Bhc2NhbENhc2Uoc3RyaW5nKTsgLy8gQ29udmVydCBmaXJzdCBjaGFyYWN0ZXIgdG8gbG93ZXJjYXNlXG5cbiAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xuICB9IC8vIFJlbW92ZSBIVE1MIGZyb20gYSBzdHJpbmdcblxuICBmdW5jdGlvbiBzdHJpcEhUTUwoc291cmNlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBzb3VyY2U7XG4gICAgcmV0dXJuIGZyYWdtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0O1xuICB9IC8vIExpa2Ugb3V0ZXJIVE1MLCBidXQgYWxzbyB3b3JrcyBmb3IgRG9jdW1lbnRGcmFnbWVudFxuXG4gIGZ1bmN0aW9uIGdldEhUTUwoZWxlbWVudCkge1xuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gd3JhcHBlci5pbm5lckhUTUw7XG4gIH1cblxuICB2YXIgcmVzb3VyY2VzID0ge1xuICAgIHBpcDogJ1BJUCcsXG4gICAgYWlycGxheTogJ0FpclBsYXknLFxuICAgIGh0bWw1OiAnSFRNTDUnLFxuICAgIHZpbWVvOiAnVmltZW8nLFxuICAgIHlvdXR1YmU6ICdZb3VUdWJlJ1xuICB9O1xuICB2YXIgaTE4biA9IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgICAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgIGlmIChpcyQxLmVtcHR5KGtleSkgfHwgaXMkMS5lbXB0eShjb25maWcpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgdmFyIHN0cmluZyA9IGdldERlZXAoY29uZmlnLmkxOG4sIGtleSk7XG5cbiAgICAgIGlmIChpcyQxLmVtcHR5KHN0cmluZykpIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc291cmNlcykuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgIHJldHVybiByZXNvdXJjZXNba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgdmFyIHJlcGxhY2UgPSB7XG4gICAgICAgICd7c2Vla3RpbWV9JzogY29uZmlnLnNlZWtUaW1lLFxuICAgICAgICAne3RpdGxlfSc6IGNvbmZpZy50aXRsZVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKHJlcGxhY2UpLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksXG4gICAgICAgICAgICBrID0gX3JlZjJbMF0sXG4gICAgICAgICAgICB2ID0gX3JlZjJbMV07XG5cbiAgICAgICAgc3RyaW5nID0gcmVwbGFjZUFsbChzdHJpbmcsIGssIHYpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH1cbiAgfTtcblxuICB2YXIgU3RvcmFnZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RvcmFnZShwbGF5ZXIpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdG9yYWdlKTtcblxuICAgICAgdGhpcy5lbmFibGVkID0gcGxheWVyLmNvbmZpZy5zdG9yYWdlLmVuYWJsZWQ7XG4gICAgICB0aGlzLmtleSA9IHBsYXllci5jb25maWcuc3RvcmFnZS5rZXk7XG4gICAgfSAvLyBDaGVjayBmb3IgYWN0dWFsIHN1cHBvcnQgKHNlZSBpZiB3ZSBjYW4gdXNlIGl0KVxuXG5cbiAgICBfY3JlYXRlQ2xhc3MoU3RvcmFnZSwgW3tcbiAgICAgIGtleTogXCJnZXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgICAgIGlmICghU3RvcmFnZS5zdXBwb3J0ZWQgfHwgIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0b3JlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTtcblxuICAgICAgICBpZiAoaXMkMS5lbXB0eShzdG9yZSkpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShzdG9yZSk7XG4gICAgICAgIHJldHVybiBpcyQxLnN0cmluZyhrZXkpICYmIGtleS5sZW5ndGggPyBqc29uW2tleV0gOiBqc29uO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQob2JqZWN0KSB7XG4gICAgICAgIC8vIEJhaWwgaWYgd2UgZG9uJ3QgaGF2ZSBsb2NhbFN0b3JhZ2Ugc3VwcG9ydCBvciBpdCdzIGRpc2FibGVkXG4gICAgICAgIGlmICghU3RvcmFnZS5zdXBwb3J0ZWQgfHwgIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBDYW4gb25seSBzdG9yZSBvYmplY3RzdFxuXG5cbiAgICAgICAgaWYgKCFpcyQxLm9iamVjdChvYmplY3QpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIEdldCBjdXJyZW50IHN0b3JhZ2VcblxuXG4gICAgICAgIHZhciBzdG9yYWdlID0gdGhpcy5nZXQoKTsgLy8gRGVmYXVsdCB0byBlbXB0eSBvYmplY3RcblxuICAgICAgICBpZiAoaXMkMS5lbXB0eShzdG9yYWdlKSkge1xuICAgICAgICAgIHN0b3JhZ2UgPSB7fTtcbiAgICAgICAgfSAvLyBVcGRhdGUgdGhlIHdvcmtpbmcgY29weSBvZiB0aGUgdmFsdWVzXG5cblxuICAgICAgICBleHRlbmQoc3RvcmFnZSwgb2JqZWN0KTsgLy8gVXBkYXRlIHN0b3JhZ2VcblxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5rZXksIEpTT04uc3RyaW5naWZ5KHN0b3JhZ2UpKTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJzdXBwb3J0ZWRcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghKCdsb2NhbFN0b3JhZ2UnIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdGVzdCA9ICdfX190ZXN0JzsgLy8gVHJ5IHRvIHVzZSBpdCAoaXQgbWlnaHQgYmUgZGlzYWJsZWQsIGUuZy4gdXNlciBpcyBpbiBwcml2YXRlIG1vZGUpXG4gICAgICAgICAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvMTMxXG5cbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdCwgdGVzdCk7XG4gICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3QpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFN0b3JhZ2U7XG4gIH0oKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBGZXRjaCB3cmFwcGVyXG4gIC8vIFVzaW5nIFhIUiB0byBhdm9pZCBpc3N1ZXMgd2l0aCBvbGRlciBicm93c2Vyc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBmdW5jdGlvbiBmZXRjaCh1cmwpIHtcbiAgICB2YXIgcmVzcG9uc2VUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAndGV4dCc7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IC8vIENoZWNrIGZvciBDT1JTIHN1cHBvcnRcblxuICAgICAgICBpZiAoISgnd2l0aENyZWRlbnRpYWxzJyBpbiByZXF1ZXN0KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2VUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXF1ZXN0LnN0YXR1cyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7IC8vIFNldCB0aGUgcmVxdWlyZWQgcmVzcG9uc2UgdHlwZVxuXG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBsb2FkU3ByaXRlKHVybCwgaWQpIHtcbiAgICBpZiAoIWlzJDEuc3RyaW5nKHVybCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcHJlZml4ID0gJ2NhY2hlJztcbiAgICB2YXIgaGFzSWQgPSBpcyQxLnN0cmluZyhpZCk7XG4gICAgdmFyIGlzQ2FjaGVkID0gZmFsc2U7XG5cbiAgICB2YXIgZXhpc3RzID0gZnVuY3Rpb24gZXhpc3RzKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSAhPT0gbnVsbDtcbiAgICB9O1xuXG4gICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShjb250YWluZXIsIGRhdGEpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGRhdGE7IC8vIENoZWNrIGFnYWluIGluY2FzZSBvZiByYWNlIGNvbmRpdGlvblxuXG4gICAgICBpZiAoaGFzSWQgJiYgZXhpc3RzKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBJbmplY3QgdGhlIFNWRyB0byB0aGUgYm9keVxuXG5cbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgY29udGFpbmVyKTtcbiAgICB9OyAvLyBPbmx5IGxvYWQgb25jZSBpZiBJRCBzZXRcblxuXG4gICAgaWYgKCFoYXNJZCB8fCAhZXhpc3RzKCkpIHtcbiAgICAgIHZhciB1c2VTdG9yYWdlID0gU3RvcmFnZS5zdXBwb3J0ZWQ7IC8vIENyZWF0ZSBjb250YWluZXJcblxuICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuXG4gICAgICBpZiAoaGFzSWQpIHtcbiAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICB9IC8vIENoZWNrIGluIGNhY2hlXG5cblxuICAgICAgaWYgKHVzZVN0b3JhZ2UpIHtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlwiLmNvbmNhdChwcmVmaXgsIFwiLVwiKS5jb25jYXQoaWQpKTtcbiAgICAgICAgaXNDYWNoZWQgPSBjYWNoZWQgIT09IG51bGw7XG5cbiAgICAgICAgaWYgKGlzQ2FjaGVkKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGNhY2hlZCk7XG4gICAgICAgICAgdXBkYXRlKGNvbnRhaW5lciwgZGF0YS5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBHZXQgdGhlIHNwcml0ZVxuXG5cbiAgICAgIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGlmIChpcyQxLmVtcHR5KHJlc3VsdCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlU3RvcmFnZSkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlwiLmNvbmNhdChwcmVmaXgsIFwiLVwiKS5jb25jYXQoaWQpLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBjb250ZW50OiByZXN1bHRcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGUoY29udGFpbmVyLCByZXN1bHQpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGdldEhvdXJzID0gZnVuY3Rpb24gZ2V0SG91cnModmFsdWUpIHtcbiAgICByZXR1cm4gTWF0aC50cnVuYyh2YWx1ZSAvIDYwIC8gNjAgJSA2MCwgMTApO1xuICB9O1xuICB2YXIgZ2V0TWludXRlcyA9IGZ1bmN0aW9uIGdldE1pbnV0ZXModmFsdWUpIHtcbiAgICByZXR1cm4gTWF0aC50cnVuYyh2YWx1ZSAvIDYwICUgNjAsIDEwKTtcbiAgfTtcbiAgdmFyIGdldFNlY29uZHMgPSBmdW5jdGlvbiBnZXRTZWNvbmRzKHZhbHVlKSB7XG4gICAgcmV0dXJuIE1hdGgudHJ1bmModmFsdWUgJSA2MCwgMTApO1xuICB9OyAvLyBGb3JtYXQgdGltZSB0byBVSSBmcmllbmRseSBzdHJpbmdcblxuICBmdW5jdGlvbiBmb3JtYXRUaW1lKCkge1xuICAgIHZhciB0aW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgIHZhciBkaXNwbGF5SG91cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuICAgIHZhciBpbnZlcnRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7XG5cbiAgICAvLyBCYWlsIGlmIHRoZSB2YWx1ZSBpc24ndCBhIG51bWJlclxuICAgIGlmICghaXMkMS5udW1iZXIodGltZSkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRUaW1lKHVuZGVmaW5lZCwgZGlzcGxheUhvdXJzLCBpbnZlcnRlZCk7XG4gICAgfSAvLyBGb3JtYXQgdGltZSBjb21wb25lbnQgdG8gYWRkIGxlYWRpbmcgemVyb1xuXG5cbiAgICB2YXIgZm9ybWF0ID0gZnVuY3Rpb24gZm9ybWF0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gXCIwXCIuY29uY2F0KHZhbHVlKS5zbGljZSgtMik7XG4gICAgfTsgLy8gQnJlYWtkb3duIHRvIGhvdXJzLCBtaW5zLCBzZWNzXG5cblxuICAgIHZhciBob3VycyA9IGdldEhvdXJzKHRpbWUpO1xuICAgIHZhciBtaW5zID0gZ2V0TWludXRlcyh0aW1lKTtcbiAgICB2YXIgc2VjcyA9IGdldFNlY29uZHModGltZSk7IC8vIERvIHdlIG5lZWQgdG8gZGlzcGxheSBob3Vycz9cblxuICAgIGlmIChkaXNwbGF5SG91cnMgfHwgaG91cnMgPiAwKSB7XG4gICAgICBob3VycyA9IFwiXCIuY29uY2F0KGhvdXJzLCBcIjpcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvdXJzID0gJyc7XG4gICAgfSAvLyBSZW5kZXJcblxuXG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KGludmVydGVkICYmIHRpbWUgPiAwID8gJy0nIDogJycpLmNvbmNhdChob3VycykuY29uY2F0KGZvcm1hdChtaW5zKSwgXCI6XCIpLmNvbmNhdChmb3JtYXQoc2VjcykpO1xuICB9XG5cbiAgdmFyIGNvbnRyb2xzID0ge1xuICAgIC8vIEdldCBpY29uIFVSTFxuICAgIGdldEljb25Vcmw6IGZ1bmN0aW9uIGdldEljb25VcmwoKSB7XG4gICAgICB2YXIgdXJsID0gbmV3IFVSTCh0aGlzLmNvbmZpZy5pY29uVXJsLCB3aW5kb3cubG9jYXRpb24pO1xuICAgICAgdmFyIGNvcnMgPSB1cmwuaG9zdCAhPT0gd2luZG93LmxvY2F0aW9uLmhvc3QgfHwgYnJvd3Nlci5pc0lFICYmICF3aW5kb3cuc3ZnNGV2ZXJ5Ym9keTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVybDogdGhpcy5jb25maWcuaWNvblVybCxcbiAgICAgICAgY29yczogY29yc1xuICAgICAgfTtcbiAgICB9LFxuICAgIC8vIEZpbmQgdGhlIFVJIGNvbnRyb2xzXG4gICAgZmluZEVsZW1lbnRzOiBmdW5jdGlvbiBmaW5kRWxlbWVudHMoKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRyb2xzID0gZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy53cmFwcGVyKTsgLy8gQnV0dG9uc1xuXG4gICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9ucyA9IHtcbiAgICAgICAgICBwbGF5OiBnZXRFbGVtZW50cy5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnBsYXkpLFxuICAgICAgICAgIHBhdXNlOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGF1c2UpLFxuICAgICAgICAgIHJlc3RhcnQ6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5yZXN0YXJ0KSxcbiAgICAgICAgICByZXdpbmQ6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5yZXdpbmQpLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZmFzdEZvcndhcmQpLFxuICAgICAgICAgIG11dGU6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5tdXRlKSxcbiAgICAgICAgICBwaXA6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5waXApLFxuICAgICAgICAgIGFpcnBsYXk6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5haXJwbGF5KSxcbiAgICAgICAgICBzZXR0aW5nczogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnNldHRpbmdzKSxcbiAgICAgICAgICBjYXB0aW9uczogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLmNhcHRpb25zKSxcbiAgICAgICAgICBmdWxsc2NyZWVuOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZnVsbHNjcmVlbilcbiAgICAgICAgfTsgLy8gUHJvZ3Jlc3NcblxuICAgICAgICB0aGlzLmVsZW1lbnRzLnByb2dyZXNzID0gZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5wcm9ncmVzcyk7IC8vIElucHV0c1xuXG4gICAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXRzID0ge1xuICAgICAgICAgIHNlZWs6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnNlZWspLFxuICAgICAgICAgIHZvbHVtZTogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5pbnB1dHMudm9sdW1lKVxuICAgICAgICB9OyAvLyBEaXNwbGF5XG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy5kaXNwbGF5ID0ge1xuICAgICAgICAgIGJ1ZmZlcjogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5kaXNwbGF5LmJ1ZmZlciksXG4gICAgICAgICAgY3VycmVudFRpbWU6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheS5jdXJyZW50VGltZSksXG4gICAgICAgICAgZHVyYXRpb246IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheS5kdXJhdGlvbilcbiAgICAgICAgfTsgLy8gU2VlayB0b29sdGlwXG5cbiAgICAgICAgaWYgKGlzJDEuZWxlbWVudCh0aGlzLmVsZW1lbnRzLnByb2dyZXNzKSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCA9IHRoaXMuZWxlbWVudHMucHJvZ3Jlc3MucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQodGhpcy5jb25maWcuY2xhc3NOYW1lcy50b29sdGlwKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBpdFxuICAgICAgICB0aGlzLmRlYnVnLndhcm4oJ0l0IGxvb2tzIGxpa2UgdGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggeW91ciBjdXN0b20gY29udHJvbHMgSFRNTCcsIGVycm9yKTsgLy8gUmVzdG9yZSBuYXRpdmUgdmlkZW8gY29udHJvbHNcblxuICAgICAgICB0aGlzLnRvZ2dsZU5hdGl2ZUNvbnRyb2xzKHRydWUpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBDcmVhdGUgPHN2Zz4gaWNvblxuICAgIGNyZWF0ZUljb246IGZ1bmN0aW9uIGNyZWF0ZUljb24odHlwZSwgYXR0cmlidXRlcykge1xuICAgICAgdmFyIG5hbWVzcGFjZSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgICB2YXIgaWNvblVybCA9IGNvbnRyb2xzLmdldEljb25VcmwuY2FsbCh0aGlzKTtcbiAgICAgIHZhciBpY29uUGF0aCA9IFwiXCIuY29uY2F0KCFpY29uVXJsLmNvcnMgPyBpY29uVXJsLnVybCA6ICcnLCBcIiNcIikuY29uY2F0KHRoaXMuY29uZmlnLmljb25QcmVmaXgpOyAvLyBDcmVhdGUgPHN2Zz5cblxuICAgICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCAnc3ZnJyk7XG4gICAgICBzZXRBdHRyaWJ1dGVzKGljb24sIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG4gICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcbiAgICAgICAgZm9jdXNhYmxlOiAnZmFsc2UnXG4gICAgICB9KSk7IC8vIENyZWF0ZSB0aGUgPHVzZT4gdG8gcmVmZXJlbmNlIHNwcml0ZVxuXG4gICAgICB2YXIgdXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgJ3VzZScpO1xuICAgICAgdmFyIHBhdGggPSBcIlwiLmNvbmNhdChpY29uUGF0aCwgXCItXCIpLmNvbmNhdCh0eXBlKTsgLy8gU2V0IGBocmVmYCBhdHRyaWJ1dGVzXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvNDYwXG4gICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TVkcvQXR0cmlidXRlL3hsaW5rOmhyZWZcblxuICAgICAgaWYgKCdocmVmJyBpbiB1c2UpIHtcbiAgICAgICAgdXNlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ2hyZWYnLCBwYXRoKTtcbiAgICAgIH0gLy8gQWx3YXlzIHNldCB0aGUgb2xkZXIgYXR0cmlidXRlIGV2ZW4gdGhvdWdoIGl0J3MgXCJkZXByZWNhdGVkXCIgKGl0J2xsIGJlIGFyb3VuZCBmb3IgYWdlcylcblxuXG4gICAgICB1c2Uuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCAneGxpbms6aHJlZicsIHBhdGgpOyAvLyBBZGQgPHVzZT4gdG8gPHN2Zz5cblxuICAgICAgaWNvbi5hcHBlbmRDaGlsZCh1c2UpO1xuICAgICAgcmV0dXJuIGljb247XG4gICAgfSxcbiAgICAvLyBDcmVhdGUgaGlkZGVuIHRleHQgbGFiZWxcbiAgICBjcmVhdGVMYWJlbDogZnVuY3Rpb24gY3JlYXRlTGFiZWwoa2V5KSB7XG4gICAgICB2YXIgYXR0ciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgICB2YXIgdGV4dCA9IGkxOG4uZ2V0KGtleSwgdGhpcy5jb25maWcpO1xuXG4gICAgICB2YXIgYXR0cmlidXRlcyA9IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBhdHRyKSwge30sIHtcbiAgICAgICAgY2xhc3M6IFthdHRyLmNsYXNzLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmhpZGRlbl0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAnKVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KCdzcGFuJywgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfSxcbiAgICAvLyBDcmVhdGUgYSBiYWRnZVxuICAgIGNyZWF0ZUJhZGdlOiBmdW5jdGlvbiBjcmVhdGVCYWRnZSh0ZXh0KSB7XG4gICAgICBpZiAoaXMkMS5lbXB0eSh0ZXh0KSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIGJhZGdlID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgY2xhc3M6IHRoaXMuY29uZmlnLmNsYXNzTmFtZXMubWVudS52YWx1ZVxuICAgICAgfSk7XG4gICAgICBiYWRnZS5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51LmJhZGdlXG4gICAgICB9LCB0ZXh0KSk7XG4gICAgICByZXR1cm4gYmFkZ2U7XG4gICAgfSxcbiAgICAvLyBDcmVhdGUgYSA8YnV0dG9uPlxuICAgIGNyZWF0ZUJ1dHRvbjogZnVuY3Rpb24gY3JlYXRlQnV0dG9uKGJ1dHRvblR5cGUsIGF0dHIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gZXh0ZW5kKHt9LCBhdHRyKTtcbiAgICAgIHZhciB0eXBlID0gdG9DYW1lbENhc2UoYnV0dG9uVHlwZSk7XG4gICAgICB2YXIgcHJvcHMgPSB7XG4gICAgICAgIGVsZW1lbnQ6ICdidXR0b24nLFxuICAgICAgICB0b2dnbGU6IGZhbHNlLFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgaWNvbjogbnVsbCxcbiAgICAgICAgbGFiZWxQcmVzc2VkOiBudWxsLFxuICAgICAgICBpY29uUHJlc3NlZDogbnVsbFxuICAgICAgfTtcbiAgICAgIFsnZWxlbWVudCcsICdpY29uJywgJ2xhYmVsJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgcHJvcHNba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgICBkZWxldGUgYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gRGVmYXVsdCB0byAnYnV0dG9uJyB0eXBlIHRvIHByZXZlbnQgZm9ybSBzdWJtaXNzaW9uXG5cbiAgICAgIGlmIChwcm9wcy5lbGVtZW50ID09PSAnYnV0dG9uJyAmJiAhT2JqZWN0LmtleXMoYXR0cmlidXRlcykuaW5jbHVkZXMoJ3R5cGUnKSkge1xuICAgICAgICBhdHRyaWJ1dGVzLnR5cGUgPSAnYnV0dG9uJztcbiAgICAgIH0gLy8gU2V0IGNsYXNzIG5hbWVcblxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoYXR0cmlidXRlcykuaW5jbHVkZXMoJ2NsYXNzJykpIHtcbiAgICAgICAgaWYgKCFhdHRyaWJ1dGVzLmNsYXNzLnNwbGl0KCcgJykuc29tZShmdW5jdGlvbiAoYykge1xuICAgICAgICAgIHJldHVybiBjID09PSBfdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICBjbGFzczogXCJcIi5jb25jYXQoYXR0cmlidXRlcy5jbGFzcywgXCIgXCIpLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2w7XG4gICAgICB9IC8vIExhcmdlIHBsYXkgYnV0dG9uXG5cblxuICAgICAgc3dpdGNoIChidXR0b25UeXBlKSB7XG4gICAgICAgIGNhc2UgJ3BsYXknOlxuICAgICAgICAgIHByb3BzLnRvZ2dsZSA9IHRydWU7XG4gICAgICAgICAgcHJvcHMubGFiZWwgPSAncGxheSc7XG4gICAgICAgICAgcHJvcHMubGFiZWxQcmVzc2VkID0gJ3BhdXNlJztcbiAgICAgICAgICBwcm9wcy5pY29uID0gJ3BsYXknO1xuICAgICAgICAgIHByb3BzLmljb25QcmVzc2VkID0gJ3BhdXNlJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdtdXRlJzpcbiAgICAgICAgICBwcm9wcy50b2dnbGUgPSB0cnVlO1xuICAgICAgICAgIHByb3BzLmxhYmVsID0gJ211dGUnO1xuICAgICAgICAgIHByb3BzLmxhYmVsUHJlc3NlZCA9ICd1bm11dGUnO1xuICAgICAgICAgIHByb3BzLmljb24gPSAndm9sdW1lJztcbiAgICAgICAgICBwcm9wcy5pY29uUHJlc3NlZCA9ICdtdXRlZCc7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnY2FwdGlvbnMnOlxuICAgICAgICAgIHByb3BzLnRvZ2dsZSA9IHRydWU7XG4gICAgICAgICAgcHJvcHMubGFiZWwgPSAnZW5hYmxlQ2FwdGlvbnMnO1xuICAgICAgICAgIHByb3BzLmxhYmVsUHJlc3NlZCA9ICdkaXNhYmxlQ2FwdGlvbnMnO1xuICAgICAgICAgIHByb3BzLmljb24gPSAnY2FwdGlvbnMtb2ZmJztcbiAgICAgICAgICBwcm9wcy5pY29uUHJlc3NlZCA9ICdjYXB0aW9ucy1vbic7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZnVsbHNjcmVlbic6XG4gICAgICAgICAgcHJvcHMudG9nZ2xlID0gdHJ1ZTtcbiAgICAgICAgICBwcm9wcy5sYWJlbCA9ICdlbnRlckZ1bGxzY3JlZW4nO1xuICAgICAgICAgIHByb3BzLmxhYmVsUHJlc3NlZCA9ICdleGl0RnVsbHNjcmVlbic7XG4gICAgICAgICAgcHJvcHMuaWNvbiA9ICdlbnRlci1mdWxsc2NyZWVuJztcbiAgICAgICAgICBwcm9wcy5pY29uUHJlc3NlZCA9ICdleGl0LWZ1bGxzY3JlZW4nO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3BsYXktbGFyZ2UnOlxuICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gXCIgXCIuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbCwgXCItLW92ZXJsYWlkXCIpO1xuICAgICAgICAgIHR5cGUgPSAncGxheSc7XG4gICAgICAgICAgcHJvcHMubGFiZWwgPSAncGxheSc7XG4gICAgICAgICAgcHJvcHMuaWNvbiA9ICdwbGF5JztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChpcyQxLmVtcHR5KHByb3BzLmxhYmVsKSkge1xuICAgICAgICAgICAgcHJvcHMubGFiZWwgPSB0eXBlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpcyQxLmVtcHR5KHByb3BzLmljb24pKSB7XG4gICAgICAgICAgICBwcm9wcy5pY29uID0gYnV0dG9uVHlwZTtcbiAgICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgdmFyIGJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQocHJvcHMuZWxlbWVudCk7IC8vIFNldHVwIHRvZ2dsZSBpY29uIGFuZCBsYWJlbHNcblxuICAgICAgaWYgKHByb3BzLnRvZ2dsZSkge1xuICAgICAgICAvLyBJY29uXG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChjb250cm9scy5jcmVhdGVJY29uLmNhbGwodGhpcywgcHJvcHMuaWNvblByZXNzZWQsIHtcbiAgICAgICAgICBjbGFzczogJ2ljb24tLXByZXNzZWQnXG4gICAgICAgIH0pKTtcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGNvbnRyb2xzLmNyZWF0ZUljb24uY2FsbCh0aGlzLCBwcm9wcy5pY29uLCB7XG4gICAgICAgICAgY2xhc3M6ICdpY29uLS1ub3QtcHJlc3NlZCdcbiAgICAgICAgfSkpOyAvLyBMYWJlbC9Ub29sdGlwXG5cbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGNvbnRyb2xzLmNyZWF0ZUxhYmVsLmNhbGwodGhpcywgcHJvcHMubGFiZWxQcmVzc2VkLCB7XG4gICAgICAgICAgY2xhc3M6ICdsYWJlbC0tcHJlc3NlZCdcbiAgICAgICAgfSkpO1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoY29udHJvbHMuY3JlYXRlTGFiZWwuY2FsbCh0aGlzLCBwcm9wcy5sYWJlbCwge1xuICAgICAgICAgIGNsYXNzOiAnbGFiZWwtLW5vdC1wcmVzc2VkJ1xuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoY29udHJvbHMuY3JlYXRlSWNvbi5jYWxsKHRoaXMsIHByb3BzLmljb24pKTtcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGNvbnRyb2xzLmNyZWF0ZUxhYmVsLmNhbGwodGhpcywgcHJvcHMubGFiZWwpKTtcbiAgICAgIH0gLy8gTWVyZ2UgYW5kIHNldCBhdHRyaWJ1dGVzXG5cblxuICAgICAgZXh0ZW5kKGF0dHJpYnV0ZXMsIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnNbdHlwZV0sIGF0dHJpYnV0ZXMpKTtcbiAgICAgIHNldEF0dHJpYnV0ZXMoYnV0dG9uLCBhdHRyaWJ1dGVzKTsgLy8gV2UgaGF2ZSBtdWx0aXBsZSBwbGF5IGJ1dHRvbnNcblxuICAgICAgaWYgKHR5cGUgPT09ICdwbGF5Jykge1xuICAgICAgICBpZiAoIWlzJDEuYXJyYXkodGhpcy5lbGVtZW50cy5idXR0b25zW3R5cGVdKSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9uc1t0eXBlXSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b25zW3R5cGVdLnB1c2goYnV0dG9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9uc1t0eXBlXSA9IGJ1dHRvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9LFxuICAgIC8vIENyZWF0ZSBhbiA8aW5wdXQgdHlwZT0ncmFuZ2UnPlxuICAgIGNyZWF0ZVJhbmdlOiBmdW5jdGlvbiBjcmVhdGVSYW5nZSh0eXBlLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAvLyBTZWVrIGlucHV0XG4gICAgICB2YXIgaW5wdXQgPSBjcmVhdGVFbGVtZW50KCdpbnB1dCcsIGV4dGVuZChnZXRBdHRyaWJ1dGVzRnJvbVNlbGVjdG9yKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5pbnB1dHNbdHlwZV0pLCB7XG4gICAgICAgIHR5cGU6ICdyYW5nZScsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAxMDAsXG4gICAgICAgIHN0ZXA6IDAuMDEsXG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICBhdXRvY29tcGxldGU6ICdvZmYnLFxuICAgICAgICAvLyBBMTF5IGZpeGVzIGZvciBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvOTA1XG4gICAgICAgIHJvbGU6ICdzbGlkZXInLFxuICAgICAgICAnYXJpYS1sYWJlbCc6IGkxOG4uZ2V0KHR5cGUsIHRoaXMuY29uZmlnKSxcbiAgICAgICAgJ2FyaWEtdmFsdWVtaW4nOiAwLFxuICAgICAgICAnYXJpYS12YWx1ZW1heCc6IDEwMCxcbiAgICAgICAgJ2FyaWEtdmFsdWVub3cnOiAwXG4gICAgICB9LCBhdHRyaWJ1dGVzKSk7XG4gICAgICB0aGlzLmVsZW1lbnRzLmlucHV0c1t0eXBlXSA9IGlucHV0OyAvLyBTZXQgdGhlIGZpbGwgZm9yIHdlYmtpdCBub3dcblxuICAgICAgY29udHJvbHMudXBkYXRlUmFuZ2VGaWxsLmNhbGwodGhpcywgaW5wdXQpOyAvLyBJbXByb3ZlIHN1cHBvcnQgb24gdG91Y2ggZGV2aWNlc1xuXG4gICAgICBSYW5nZVRvdWNoLnNldHVwKGlucHV0KTtcbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9LFxuICAgIC8vIENyZWF0ZSBhIDxwcm9ncmVzcz5cbiAgICBjcmVhdGVQcm9ncmVzczogZnVuY3Rpb24gY3JlYXRlUHJvZ3Jlc3ModHlwZSwgYXR0cmlidXRlcykge1xuICAgICAgdmFyIHByb2dyZXNzID0gY3JlYXRlRWxlbWVudCgncHJvZ3Jlc3MnLCBleHRlbmQoZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheVt0eXBlXSksIHtcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgIHJvbGU6ICdwcm9ncmVzc2JhcicsXG4gICAgICAgICdhcmlhLWhpZGRlbic6IHRydWVcbiAgICAgIH0sIGF0dHJpYnV0ZXMpKTsgLy8gQ3JlYXRlIHRoZSBsYWJlbCBpbnNpZGVcblxuICAgICAgaWYgKHR5cGUgIT09ICd2b2x1bWUnKSB7XG4gICAgICAgIHByb2dyZXNzLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBudWxsLCAnMCcpKTtcbiAgICAgICAgdmFyIHN1ZmZpeEtleSA9IHtcbiAgICAgICAgICBwbGF5ZWQ6ICdwbGF5ZWQnLFxuICAgICAgICAgIGJ1ZmZlcjogJ2J1ZmZlcmVkJ1xuICAgICAgICB9W3R5cGVdO1xuICAgICAgICB2YXIgc3VmZml4ID0gc3VmZml4S2V5ID8gaTE4bi5nZXQoc3VmZml4S2V5LCB0aGlzLmNvbmZpZykgOiAnJztcbiAgICAgICAgcHJvZ3Jlc3MuaW5uZXJUZXh0ID0gXCIlIFwiLmNvbmNhdChzdWZmaXgudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZWxlbWVudHMuZGlzcGxheVt0eXBlXSA9IHByb2dyZXNzO1xuICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH0sXG4gICAgLy8gQ3JlYXRlIHRpbWUgZGlzcGxheVxuICAgIGNyZWF0ZVRpbWU6IGZ1bmN0aW9uIGNyZWF0ZVRpbWUodHlwZSwgYXR0cnMpIHtcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheVt0eXBlXSwgYXR0cnMpO1xuICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG4gICAgICAgIGNsYXNzOiBcIlwiLmNvbmNhdChhdHRyaWJ1dGVzLmNsYXNzID8gYXR0cmlidXRlcy5jbGFzcyA6ICcnLCBcIiBcIikuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuZGlzcGxheS50aW1lLCBcIiBcIikudHJpbSgpLFxuICAgICAgICAnYXJpYS1sYWJlbCc6IGkxOG4uZ2V0KHR5cGUsIHRoaXMuY29uZmlnKVxuICAgICAgfSksICcwMDowMCcpOyAvLyBSZWZlcmVuY2UgZm9yIHVwZGF0ZXNcblxuICAgICAgdGhpcy5lbGVtZW50cy5kaXNwbGF5W3R5cGVdID0gY29udGFpbmVyO1xuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9LFxuICAgIC8vIEJpbmQga2V5Ym9hcmQgc2hvcnRjdXRzIGZvciBhIG1lbnUgaXRlbVxuICAgIC8vIFdlIGhhdmUgdG8gYmluZCB0byBrZXl1cCBvdGhlcndpc2UgRmlyZWZveCB0cmlnZ2VycyBhIGNsaWNrIHdoZW4gYSBrZXlkb3duIGV2ZW50IGhhbmRsZXIgc2hpZnRzIGZvY3VzXG4gICAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTIyMDE0M1xuICAgIGJpbmRNZW51SXRlbVNob3J0Y3V0czogZnVuY3Rpb24gYmluZE1lbnVJdGVtU2hvcnRjdXRzKG1lbnVJdGVtLCB0eXBlKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgLy8gTmF2aWdhdGUgdGhyb3VnaCBtZW51cyB2aWEgYXJyb3cga2V5cyBhbmQgc3BhY2VcbiAgICAgIG9uLmNhbGwodGhpcywgbWVudUl0ZW0sICdrZXlkb3duIGtleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIFdlIG9ubHkgY2FyZSBhYm91dCBzcGFjZSBhbmQg4qyG77iPIOKsh++4j++4jyDinqHvuI9cbiAgICAgICAgaWYgKCFbMzIsIDM4LCAzOSwgNDBdLmluY2x1ZGVzKGV2ZW50LndoaWNoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBQcmV2ZW50IHBsYXkgLyBzZWVrXG5cblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgLy8gV2UncmUganVzdCBoZXJlIHRvIHByZXZlbnQgdGhlIGtleWRvd24gYnViYmxpbmdcblxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlzUmFkaW9CdXR0b24gPSBtYXRjaGVzJDEobWVudUl0ZW0sICdbcm9sZT1cIm1lbnVpdGVtcmFkaW9cIl0nKTsgLy8gU2hvdyB0aGUgcmVzcGVjdGl2ZSBtZW51XG5cbiAgICAgICAgaWYgKCFpc1JhZGlvQnV0dG9uICYmIFszMiwgMzldLmluY2x1ZGVzKGV2ZW50LndoaWNoKSkge1xuICAgICAgICAgIGNvbnRyb2xzLnNob3dNZW51UGFuZWwuY2FsbChfdGhpczIsIHR5cGUsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0YXJnZXQ7XG5cbiAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDMyKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDQwIHx8IGlzUmFkaW9CdXR0b24gJiYgZXZlbnQud2hpY2ggPT09IDM5KSB7XG4gICAgICAgICAgICAgIHRhcmdldCA9IG1lbnVJdGVtLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICAgICAgICBpZiAoIWlzJDEuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gbWVudUl0ZW0ucGFyZW50Tm9kZS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGFyZ2V0ID0gbWVudUl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgICAgICAgICBpZiAoIWlzJDEuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gbWVudUl0ZW0ucGFyZW50Tm9kZS5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldEZvY3VzLmNhbGwoX3RoaXMyLCB0YXJnZXQsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZmFsc2UpOyAvLyBFbnRlciB3aWxsIGZpcmUgYSBgY2xpY2tgIGV2ZW50IGJ1dCB3ZSBzdGlsbCBuZWVkIHRvIG1hbmFnZSBmb2N1c1xuICAgICAgLy8gU28gd2UgYmluZCB0byBrZXl1cCB3aGljaCBmaXJlcyBhZnRlciBhbmQgc2V0IGZvY3VzIGhlcmVcblxuICAgICAgb24uY2FsbCh0aGlzLCBtZW51SXRlbSwgJ2tleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC53aGljaCAhPT0gMTMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9scy5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbChfdGhpczIsIG51bGwsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBDcmVhdGUgYSBzZXR0aW5ncyBtZW51IGl0ZW1cbiAgICBjcmVhdGVNZW51SXRlbTogZnVuY3Rpb24gY3JlYXRlTWVudUl0ZW0oX3JlZikge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciB2YWx1ZSA9IF9yZWYudmFsdWUsXG4gICAgICAgICAgbGlzdCA9IF9yZWYubGlzdCxcbiAgICAgICAgICB0eXBlID0gX3JlZi50eXBlLFxuICAgICAgICAgIHRpdGxlID0gX3JlZi50aXRsZSxcbiAgICAgICAgICBfcmVmJGJhZGdlID0gX3JlZi5iYWRnZSxcbiAgICAgICAgICBiYWRnZSA9IF9yZWYkYmFkZ2UgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJGJhZGdlLFxuICAgICAgICAgIF9yZWYkY2hlY2tlZCA9IF9yZWYuY2hlY2tlZCxcbiAgICAgICAgICBjaGVja2VkID0gX3JlZiRjaGVja2VkID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkY2hlY2tlZDtcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzW3R5cGVdKTtcbiAgICAgIHZhciBtZW51SXRlbSA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG4gICAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgICByb2xlOiAnbWVudWl0ZW1yYWRpbycsXG4gICAgICAgIGNsYXNzOiBcIlwiLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsIFwiIFwiKS5jb25jYXQoYXR0cmlidXRlcy5jbGFzcyA/IGF0dHJpYnV0ZXMuY2xhc3MgOiAnJykudHJpbSgpLFxuICAgICAgICAnYXJpYS1jaGVja2VkJzogY2hlY2tlZCxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9KSk7XG4gICAgICB2YXIgZmxleCA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsgLy8gV2UgaGF2ZSB0byBzZXQgYXMgSFRNTCBpbmNhc2Ugb2Ygc3BlY2lhbCBjaGFyYWN0ZXJzXG5cbiAgICAgIGZsZXguaW5uZXJIVE1MID0gdGl0bGU7XG5cbiAgICAgIGlmIChpcyQxLmVsZW1lbnQoYmFkZ2UpKSB7XG4gICAgICAgIGZsZXguYXBwZW5kQ2hpbGQoYmFkZ2UpO1xuICAgICAgfVxuXG4gICAgICBtZW51SXRlbS5hcHBlbmRDaGlsZChmbGV4KTsgLy8gUmVwbGljYXRlIHJhZGlvIGJ1dHRvbiBiZWhhdmlvdXJcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1lbnVJdGVtLCAnY2hlY2tlZCcsIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIG1lbnVJdGVtLmdldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJykgPT09ICd0cnVlJztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoY2hlY2spIHtcbiAgICAgICAgICAvLyBFbnN1cmUgZXhjbHVzaXZpdHlcbiAgICAgICAgICBpZiAoY2hlY2spIHtcbiAgICAgICAgICAgIEFycmF5LmZyb20obWVudUl0ZW0ucGFyZW50Tm9kZS5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzJDEobm9kZSwgJ1tyb2xlPVwibWVudWl0ZW1yYWRpb1wiXScpO1xuICAgICAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICByZXR1cm4gbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWVudUl0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBjaGVjayA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMubGlzdGVuZXJzLmJpbmQobWVudUl0ZW0sICdjbGljayBrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoaXMkMS5rZXlib2FyZEV2ZW50KGV2ZW50KSAmJiBldmVudC53aGljaCAhPT0gMzIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgbWVudUl0ZW0uY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSAnbGFuZ3VhZ2UnOlxuICAgICAgICAgICAgX3RoaXMzLmN1cnJlbnRUcmFjayA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3F1YWxpdHknOlxuICAgICAgICAgICAgX3RoaXMzLnF1YWxpdHkgPSB2YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnc3BlZWQnOlxuICAgICAgICAgICAgX3RoaXMzLnNwZWVkID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRyb2xzLnNob3dNZW51UGFuZWwuY2FsbChfdGhpczMsICdob21lJywgaXMkMS5rZXlib2FyZEV2ZW50KGV2ZW50KSk7XG4gICAgICB9LCB0eXBlLCBmYWxzZSk7XG4gICAgICBjb250cm9scy5iaW5kTWVudUl0ZW1TaG9ydGN1dHMuY2FsbCh0aGlzLCBtZW51SXRlbSwgdHlwZSk7XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKG1lbnVJdGVtKTtcbiAgICB9LFxuICAgIC8vIEZvcm1hdCBhIHRpbWUgZm9yIGRpc3BsYXlcbiAgICBmb3JtYXRUaW1lOiBmdW5jdGlvbiBmb3JtYXRUaW1lJDEoKSB7XG4gICAgICB2YXIgdGltZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgICAgIHZhciBpbnZlcnRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgIC8vIEJhaWwgaWYgdGhlIHZhbHVlIGlzbid0IGEgbnVtYmVyXG4gICAgICBpZiAoIWlzJDEubnVtYmVyKHRpbWUpKSB7XG4gICAgICAgIHJldHVybiB0aW1lO1xuICAgICAgfSAvLyBBbHdheXMgZGlzcGxheSBob3VycyBpZiBkdXJhdGlvbiBpcyBvdmVyIGFuIGhvdXJcblxuXG4gICAgICB2YXIgZm9yY2VIb3VycyA9IGdldEhvdXJzKHRoaXMuZHVyYXRpb24pID4gMDtcbiAgICAgIHJldHVybiBmb3JtYXRUaW1lKHRpbWUsIGZvcmNlSG91cnMsIGludmVydGVkKTtcbiAgICB9LFxuICAgIC8vIFVwZGF0ZSB0aGUgZGlzcGxheWVkIHRpbWVcbiAgICB1cGRhdGVUaW1lRGlzcGxheTogZnVuY3Rpb24gdXBkYXRlVGltZURpc3BsYXkoKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsO1xuICAgICAgdmFyIHRpbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG4gICAgICB2YXIgaW52ZXJ0ZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlO1xuXG4gICAgICAvLyBCYWlsIGlmIHRoZXJlJ3Mgbm8gZWxlbWVudCB0byBkaXNwbGF5IG9yIHRoZSB2YWx1ZSBpc24ndCBhIG51bWJlclxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQodGFyZ2V0KSB8fCAhaXMkMS5udW1iZXIodGltZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblxuXG4gICAgICB0YXJnZXQuaW5uZXJUZXh0ID0gY29udHJvbHMuZm9ybWF0VGltZSh0aW1lLCBpbnZlcnRlZCk7XG4gICAgfSxcbiAgICAvLyBVcGRhdGUgdm9sdW1lIFVJIGFuZCBzdG9yYWdlXG4gICAgdXBkYXRlVm9sdW1lOiBmdW5jdGlvbiB1cGRhdGVWb2x1bWUoKSB7XG4gICAgICBpZiAoIXRoaXMuc3VwcG9ydGVkLnVpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gVXBkYXRlIHJhbmdlXG5cblxuICAgICAgaWYgKGlzJDEuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmlucHV0cy52b2x1bWUpKSB7XG4gICAgICAgIGNvbnRyb2xzLnNldFJhbmdlLmNhbGwodGhpcywgdGhpcy5lbGVtZW50cy5pbnB1dHMudm9sdW1lLCB0aGlzLm11dGVkID8gMCA6IHRoaXMudm9sdW1lKTtcbiAgICAgIH0gLy8gVXBkYXRlIG11dGUgc3RhdGVcblxuXG4gICAgICBpZiAoaXMkMS5lbGVtZW50KHRoaXMuZWxlbWVudHMuYnV0dG9ucy5tdXRlKSkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMubXV0ZS5wcmVzc2VkID0gdGhpcy5tdXRlZCB8fCB0aGlzLnZvbHVtZSA9PT0gMDtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFVwZGF0ZSBzZWVrIHZhbHVlIGFuZCBsb3dlciBmaWxsXG4gICAgc2V0UmFuZ2U6IGZ1bmN0aW9uIHNldFJhbmdlKHRhcmdldCkge1xuICAgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuXG4gICAgICBpZiAoIWlzJDEuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cblxuICAgICAgdGFyZ2V0LnZhbHVlID0gdmFsdWU7IC8vIFdlYmtpdCByYW5nZSBmaWxsXG5cbiAgICAgIGNvbnRyb2xzLnVwZGF0ZVJhbmdlRmlsbC5jYWxsKHRoaXMsIHRhcmdldCk7XG4gICAgfSxcbiAgICAvLyBVcGRhdGUgPHByb2dyZXNzPiBlbGVtZW50c1xuICAgIHVwZGF0ZVByb2dyZXNzOiBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhldmVudCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5zdXBwb3J0ZWQudWkgfHwgIWlzJDEuZXZlbnQoZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHZhbHVlID0gMDtcblxuICAgICAgdmFyIHNldFByb2dyZXNzID0gZnVuY3Rpb24gc2V0UHJvZ3Jlc3ModGFyZ2V0LCBpbnB1dCkge1xuICAgICAgICB2YXIgdmFsID0gaXMkMS5udW1iZXIoaW5wdXQpID8gaW5wdXQgOiAwO1xuICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBpcyQxLmVsZW1lbnQodGFyZ2V0KSA/IHRhcmdldCA6IF90aGlzNC5lbGVtZW50cy5kaXNwbGF5LmJ1ZmZlcjsgLy8gVXBkYXRlIHZhbHVlIGFuZCBsYWJlbFxuXG4gICAgICAgIGlmIChpcyQxLmVsZW1lbnQocHJvZ3Jlc3MpKSB7XG4gICAgICAgICAgcHJvZ3Jlc3MudmFsdWUgPSB2YWw7IC8vIFVwZGF0ZSB0ZXh0IGxhYmVsIGluc2lkZVxuXG4gICAgICAgICAgdmFyIGxhYmVsID0gcHJvZ3Jlc3MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKVswXTtcblxuICAgICAgICAgIGlmIChpcyQxLmVsZW1lbnQobGFiZWwpKSB7XG4gICAgICAgICAgICBsYWJlbC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9IHZhbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAvLyBWaWRlbyBwbGF5aW5nXG4gICAgICAgICAgY2FzZSAndGltZXVwZGF0ZSc6XG4gICAgICAgICAgY2FzZSAnc2Vla2luZyc6XG4gICAgICAgICAgY2FzZSAnc2Vla2VkJzpcbiAgICAgICAgICAgIHZhbHVlID0gZ2V0UGVyY2VudGFnZSh0aGlzLmN1cnJlbnRUaW1lLCB0aGlzLmR1cmF0aW9uKTsgLy8gU2V0IHNlZWsgcmFuZ2UgdmFsdWUgb25seSBpZiBpdCdzIGEgJ25hdHVyYWwnIHRpbWUgZXZlbnRcblxuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0aW1ldXBkYXRlJykge1xuICAgICAgICAgICAgICBjb250cm9scy5zZXRSYW5nZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuaW5wdXRzLnNlZWssIHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy8gQ2hlY2sgYnVmZmVyIHN0YXR1c1xuXG4gICAgICAgICAgY2FzZSAncGxheWluZyc6XG4gICAgICAgICAgY2FzZSAncHJvZ3Jlc3MnOlxuICAgICAgICAgICAgc2V0UHJvZ3Jlc3ModGhpcy5lbGVtZW50cy5kaXNwbGF5LmJ1ZmZlciwgdGhpcy5idWZmZXJlZCAqIDEwMCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy8gV2Via2l0IHBvbHlmaWxsIGZvciBsb3dlciBmaWxsIHJhbmdlXG4gICAgdXBkYXRlUmFuZ2VGaWxsOiBmdW5jdGlvbiB1cGRhdGVSYW5nZUZpbGwodGFyZ2V0KSB7XG4gICAgICAvLyBHZXQgcmFuZ2UgZnJvbSBldmVudCBpZiBldmVudCBwYXNzZWRcbiAgICAgIHZhciByYW5nZSA9IGlzJDEuZXZlbnQodGFyZ2V0KSA/IHRhcmdldC50YXJnZXQgOiB0YXJnZXQ7IC8vIE5lZWRzIHRvIGJlIGEgdmFsaWQgPGlucHV0IHR5cGU9J3JhbmdlJz5cblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQocmFuZ2UpIHx8IHJhbmdlLmdldEF0dHJpYnV0ZSgndHlwZScpICE9PSAncmFuZ2UnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gU2V0IGFyaWEgdmFsdWVzIGZvciBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvOTA1XG5cblxuICAgICAgaWYgKG1hdGNoZXMkMShyYW5nZSwgdGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0cy5zZWVrKSkge1xuICAgICAgICByYW5nZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCB0aGlzLmN1cnJlbnRUaW1lKTtcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gY29udHJvbHMuZm9ybWF0VGltZSh0aGlzLmN1cnJlbnRUaW1lKTtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gY29udHJvbHMuZm9ybWF0VGltZSh0aGlzLmR1cmF0aW9uKTtcbiAgICAgICAgdmFyIGZvcm1hdCA9IGkxOG4uZ2V0KCdzZWVrTGFiZWwnLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCBmb3JtYXQucmVwbGFjZSgne2N1cnJlbnRUaW1lfScsIGN1cnJlbnRUaW1lKS5yZXBsYWNlKCd7ZHVyYXRpb259JywgZHVyYXRpb24pKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2hlcyQxKHJhbmdlLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnZvbHVtZSkpIHtcbiAgICAgICAgdmFyIHBlcmNlbnQgPSByYW5nZS52YWx1ZSAqIDEwMDtcbiAgICAgICAgcmFuZ2Uuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgcGVyY2VudCk7XG4gICAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCBcIlwiLmNvbmNhdChwZXJjZW50LnRvRml4ZWQoMSksIFwiJVwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYW5nZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCByYW5nZS52YWx1ZSk7XG4gICAgICB9IC8vIFdlYktpdCBvbmx5XG5cblxuICAgICAgaWYgKCFicm93c2VyLmlzV2Via2l0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gU2V0IENTUyBjdXN0b20gcHJvcGVydHlcblxuXG4gICAgICByYW5nZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12YWx1ZScsIFwiXCIuY29uY2F0KHJhbmdlLnZhbHVlIC8gcmFuZ2UubWF4ICogMTAwLCBcIiVcIikpO1xuICAgIH0sXG4gICAgLy8gVXBkYXRlIGhvdmVyIHRvb2x0aXAgZm9yIHNlZWtpbmdcbiAgICB1cGRhdGVTZWVrVG9vbHRpcDogZnVuY3Rpb24gdXBkYXRlU2Vla1Rvb2x0aXAoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAvLyBCYWlsIGlmIHNldHRpbmcgbm90IHRydWVcbiAgICAgIGlmICghdGhpcy5jb25maWcudG9vbHRpcHMuc2VlayB8fCAhaXMkMS5lbGVtZW50KHRoaXMuZWxlbWVudHMuaW5wdXRzLnNlZWspIHx8ICFpcyQxLmVsZW1lbnQodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwKSB8fCB0aGlzLmR1cmF0aW9uID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHZpc2libGUgPSBcIlwiLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnRvb2x0aXAsIFwiLS12aXNpYmxlXCIpO1xuXG4gICAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKHNob3cpIHtcbiAgICAgICAgcmV0dXJuIHRvZ2dsZUNsYXNzKF90aGlzNS5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLCB2aXNpYmxlLCBzaG93KTtcbiAgICAgIH07IC8vIEhpZGUgb24gdG91Y2hcblxuXG4gICAgICBpZiAodGhpcy50b3VjaCkge1xuICAgICAgICB0b2dnbGUoZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIERldGVybWluZSBwZXJjZW50YWdlLCBpZiBhbHJlYWR5IHZpc2libGVcblxuXG4gICAgICB2YXIgcGVyY2VudCA9IDA7XG4gICAgICB2YXIgY2xpZW50UmVjdCA9IHRoaXMuZWxlbWVudHMucHJvZ3Jlc3MuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgIGlmIChpcyQxLmV2ZW50KGV2ZW50KSkge1xuICAgICAgICBwZXJjZW50ID0gMTAwIC8gY2xpZW50UmVjdC53aWR0aCAqIChldmVudC5wYWdlWCAtIGNsaWVudFJlY3QubGVmdCk7XG4gICAgICB9IGVsc2UgaWYgKGhhc0NsYXNzKHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCwgdmlzaWJsZSkpIHtcbiAgICAgICAgcGVyY2VudCA9IHBhcnNlRmxvYXQodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLnN0eWxlLmxlZnQsIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gU2V0IGJvdW5kc1xuXG5cbiAgICAgIGlmIChwZXJjZW50IDwgMCkge1xuICAgICAgICBwZXJjZW50ID0gMDtcbiAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+IDEwMCkge1xuICAgICAgICBwZXJjZW50ID0gMTAwO1xuICAgICAgfSAvLyBEaXNwbGF5IHRoZSB0aW1lIGEgY2xpY2sgd291bGQgc2VlayB0b1xuXG5cbiAgICAgIGNvbnRyb2xzLnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcywgdGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLCB0aGlzLmR1cmF0aW9uIC8gMTAwICogcGVyY2VudCk7IC8vIFNldCBwb3NpdGlvblxuXG4gICAgICB0aGlzLmVsZW1lbnRzLmRpc3BsYXkuc2Vla1Rvb2x0aXAuc3R5bGUubGVmdCA9IFwiXCIuY29uY2F0KHBlcmNlbnQsIFwiJVwiKTsgLy8gU2hvdy9oaWRlIHRoZSB0b29sdGlwXG4gICAgICAvLyBJZiB0aGUgZXZlbnQgaXMgYSBtb3VlcyBpbi9vdXQgYW5kIHBlcmNlbnRhZ2UgaXMgaW5zaWRlIGJvdW5kc1xuXG4gICAgICBpZiAoaXMkMS5ldmVudChldmVudCkgJiYgWydtb3VzZWVudGVyJywgJ21vdXNlbGVhdmUnXS5pbmNsdWRlcyhldmVudC50eXBlKSkge1xuICAgICAgICB0b2dnbGUoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIEhhbmRsZSB0aW1lIGNoYW5nZSBldmVudFxuICAgIHRpbWVVcGRhdGU6IGZ1bmN0aW9uIHRpbWVVcGRhdGUoZXZlbnQpIHtcbiAgICAgIC8vIE9ubHkgaW52ZXJ0IGlmIG9ubHkgb25lIHRpbWUgZWxlbWVudCBpcyBkaXNwbGF5ZWQgYW5kIHVzZWQgZm9yIGJvdGggZHVyYXRpb24gYW5kIGN1cnJlbnRUaW1lXG4gICAgICB2YXIgaW52ZXJ0ID0gIWlzJDEuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmRpc3BsYXkuZHVyYXRpb24pICYmIHRoaXMuY29uZmlnLmludmVydFRpbWU7IC8vIER1cmF0aW9uXG5cbiAgICAgIGNvbnRyb2xzLnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcywgdGhpcy5lbGVtZW50cy5kaXNwbGF5LmN1cnJlbnRUaW1lLCBpbnZlcnQgPyB0aGlzLmR1cmF0aW9uIC0gdGhpcy5jdXJyZW50VGltZSA6IHRoaXMuY3VycmVudFRpbWUsIGludmVydCk7IC8vIElnbm9yZSB1cGRhdGVzIHdoaWxlIHNlZWtpbmdcblxuICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICd0aW1ldXBkYXRlJyAmJiB0aGlzLm1lZGlhLnNlZWtpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBQbGF5aW5nIHByb2dyZXNzXG5cblxuICAgICAgY29udHJvbHMudXBkYXRlUHJvZ3Jlc3MuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfSxcbiAgICAvLyBTaG93IHRoZSBkdXJhdGlvbiBvbiBtZXRhZGF0YWxvYWRlZCBvciBkdXJhdGlvbmNoYW5nZSBldmVudHNcbiAgICBkdXJhdGlvblVwZGF0ZTogZnVuY3Rpb24gZHVyYXRpb25VcGRhdGUoKSB7XG4gICAgICAvLyBCYWlsIGlmIG5vIFVJIG9yIGR1cmF0aW9uY2hhbmdlIGV2ZW50IHRyaWdnZXJlZCBhZnRlciBwbGF5aW5nL3NlZWsgd2hlbiBpbnZlcnRUaW1lIGlzIGZhbHNlXG4gICAgICBpZiAoIXRoaXMuc3VwcG9ydGVkLnVpIHx8ICF0aGlzLmNvbmZpZy5pbnZlcnRUaW1lICYmIHRoaXMuY3VycmVudFRpbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBJZiBkdXJhdGlvbiBpcyB0aGUgMioqMzIgKHNoYWthKSwgSW5maW5pdHkgKEhMUyksIERBU0gtSUYgKE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIHx8IE51bWJlci5NQVhfVkFMVUUpIGluZGljYXRpbmcgbGl2ZSB3ZSBoaWRlIHRoZSBjdXJyZW50VGltZSBhbmQgcHJvZ3Jlc3NiYXIuXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmlkZW8tZGV2L2hscy5qcy9ibG9iLzU4MjBkMjlkM2M0YzhhNDZlOGI3NWYxZTNhZmEzZTY4YzFhOWEyZGIvc3JjL2NvbnRyb2xsZXIvYnVmZmVyLWNvbnRyb2xsZXIuanMjTDQxNVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9zaGFrYS1wbGF5ZXIvYmxvYi80ZDg4OTA1NDYzMWY0ZTFjZjBmYmQ4MGRkZDJiNzE4ODdjMDJlMjMyL2xpYi9tZWRpYS9zdHJlYW1pbmdfZW5naW5lLmpzI0wxMDYyXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRGFzaC1JbmR1c3RyeS1Gb3J1bS9kYXNoLmpzL2Jsb2IvNjk4NTlmNTFiOTY5NjQ1YjIzNDY2NjgwMGQ0Y2I1OTZkODljNjAyZC9zcmMvZGFzaC9tb2RlbHMvRGFzaE1hbmlmZXN0TW9kZWwuanMjTDMzOFxuXG5cbiAgICAgIGlmICh0aGlzLmR1cmF0aW9uID49IE1hdGgucG93KDIsIDMyKSkge1xuICAgICAgICB0b2dnbGVIaWRkZW4odGhpcy5lbGVtZW50cy5kaXNwbGF5LmN1cnJlbnRUaW1lLCB0cnVlKTtcbiAgICAgICAgdG9nZ2xlSGlkZGVuKHRoaXMuZWxlbWVudHMucHJvZ3Jlc3MsIHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFVwZGF0ZSBBUklBIHZhbHVlc1xuXG5cbiAgICAgIGlmIChpcyQxLmVsZW1lbnQodGhpcy5lbGVtZW50cy5pbnB1dHMuc2VlaykpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dHMuc2Vlay5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnLCB0aGlzLmR1cmF0aW9uKTtcbiAgICAgIH0gLy8gSWYgdGhlcmUncyBhIHNwb3QgdG8gZGlzcGxheSBkdXJhdGlvblxuXG5cbiAgICAgIHZhciBoYXNEdXJhdGlvbiA9IGlzJDEuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmRpc3BsYXkuZHVyYXRpb24pOyAvLyBJZiB0aGVyZSdzIG9ubHkgb25lIHRpbWUgZGlzcGxheSwgZGlzcGxheSBkdXJhdGlvbiB0aGVyZVxuXG4gICAgICBpZiAoIWhhc0R1cmF0aW9uICYmIHRoaXMuY29uZmlnLmRpc3BsYXlEdXJhdGlvbiAmJiB0aGlzLnBhdXNlZCkge1xuICAgICAgICBjb250cm9scy51cGRhdGVUaW1lRGlzcGxheS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuZGlzcGxheS5jdXJyZW50VGltZSwgdGhpcy5kdXJhdGlvbik7XG4gICAgICB9IC8vIElmIHRoZXJlJ3MgYSBkdXJhdGlvbiBlbGVtZW50LCB1cGRhdGUgY29udGVudFxuXG5cbiAgICAgIGlmIChoYXNEdXJhdGlvbikge1xuICAgICAgICBjb250cm9scy51cGRhdGVUaW1lRGlzcGxheS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbiwgdGhpcy5kdXJhdGlvbik7XG4gICAgICB9IC8vIFVwZGF0ZSB0aGUgdG9vbHRpcCAoaWYgdmlzaWJsZSlcblxuXG4gICAgICBjb250cm9scy51cGRhdGVTZWVrVG9vbHRpcC5jYWxsKHRoaXMpO1xuICAgIH0sXG4gICAgLy8gSGlkZS9zaG93IGEgdGFiXG4gICAgdG9nZ2xlTWVudUJ1dHRvbjogZnVuY3Rpb24gdG9nZ2xlTWVudUJ1dHRvbihzZXR0aW5nLCB0b2dnbGUpIHtcbiAgICAgIHRvZ2dsZUhpZGRlbih0aGlzLmVsZW1lbnRzLnNldHRpbmdzLmJ1dHRvbnNbc2V0dGluZ10sICF0b2dnbGUpO1xuICAgIH0sXG4gICAgLy8gVXBkYXRlIHRoZSBzZWxlY3RlZCBzZXR0aW5nXG4gICAgdXBkYXRlU2V0dGluZzogZnVuY3Rpb24gdXBkYXRlU2V0dGluZyhzZXR0aW5nLCBjb250YWluZXIsIGlucHV0KSB7XG4gICAgICB2YXIgcGFuZSA9IHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzW3NldHRpbmddO1xuICAgICAgdmFyIHZhbHVlID0gbnVsbDtcbiAgICAgIHZhciBsaXN0ID0gY29udGFpbmVyO1xuXG4gICAgICBpZiAoc2V0dGluZyA9PT0gJ2NhcHRpb25zJykge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuY3VycmVudFRyYWNrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSAhaXMkMS5lbXB0eShpbnB1dCkgPyBpbnB1dCA6IHRoaXNbc2V0dGluZ107IC8vIEdldCBkZWZhdWx0XG5cbiAgICAgICAgaWYgKGlzJDEuZW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB0aGlzLmNvbmZpZ1tzZXR0aW5nXS5kZWZhdWx0O1xuICAgICAgICB9IC8vIFVuc3VwcG9ydGVkIHZhbHVlXG5cblxuICAgICAgICBpZiAoIWlzJDEuZW1wdHkodGhpcy5vcHRpb25zW3NldHRpbmddKSAmJiAhdGhpcy5vcHRpb25zW3NldHRpbmddLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuZGVidWcud2FybihcIlVuc3VwcG9ydGVkIHZhbHVlIG9mICdcIi5jb25jYXQodmFsdWUsIFwiJyBmb3IgXCIpLmNvbmNhdChzZXR0aW5nKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIERpc2FibGVkIHZhbHVlXG5cblxuICAgICAgICBpZiAoIXRoaXMuY29uZmlnW3NldHRpbmddLm9wdGlvbnMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKFwiRGlzYWJsZWQgdmFsdWUgb2YgJ1wiLmNvbmNhdCh2YWx1ZSwgXCInIGZvciBcIikuY29uY2F0KHNldHRpbmcpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gLy8gR2V0IHRoZSBsaXN0IGlmIHdlIG5lZWQgdG9cblxuXG4gICAgICBpZiAoIWlzJDEuZWxlbWVudChsaXN0KSkge1xuICAgICAgICBsaXN0ID0gcGFuZSAmJiBwYW5lLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwibWVudVwiXScpO1xuICAgICAgfSAvLyBJZiB0aGVyZSdzIG5vIGxpc3QgaXQgbWVhbnMgaXQncyBub3QgYmVlbiByZW5kZXJlZC4uLlxuXG5cbiAgICAgIGlmICghaXMkMS5lbGVtZW50KGxpc3QpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gVXBkYXRlIHRoZSBsYWJlbFxuXG5cbiAgICAgIHZhciBsYWJlbCA9IHRoaXMuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1tzZXR0aW5nXS5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUudmFsdWUpKTtcbiAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNvbnRyb2xzLmdldExhYmVsLmNhbGwodGhpcywgc2V0dGluZywgdmFsdWUpOyAvLyBGaW5kIHRoZSByYWRpbyBvcHRpb24gYW5kIGNoZWNrIGl0XG5cbiAgICAgIHZhciB0YXJnZXQgPSBsaXN0ICYmIGxpc3QucXVlcnlTZWxlY3RvcihcIlt2YWx1ZT1cXFwiXCIuY29uY2F0KHZhbHVlLCBcIlxcXCJdXCIpKTtcblxuICAgICAgaWYgKGlzJDEuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFRyYW5zbGF0ZSBhIHZhbHVlIGludG8gYSBuaWNlIGxhYmVsXG4gICAgZ2V0TGFiZWw6IGZ1bmN0aW9uIGdldExhYmVsKHNldHRpbmcsIHZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKHNldHRpbmcpIHtcbiAgICAgICAgY2FzZSAnc3BlZWQnOlxuICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMSA/IGkxOG4uZ2V0KCdub3JtYWwnLCB0aGlzLmNvbmZpZykgOiBcIlwiLmNvbmNhdCh2YWx1ZSwgXCImdGltZXM7XCIpO1xuXG4gICAgICAgIGNhc2UgJ3F1YWxpdHknOlxuICAgICAgICAgIGlmIChpcyQxLm51bWJlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGkxOG4uZ2V0KFwicXVhbGl0eUxhYmVsLlwiLmNvbmNhdCh2YWx1ZSksIHRoaXMuY29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCFsYWJlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHZhbHVlLCBcInBcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsYWJlbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdG9UaXRsZUNhc2UodmFsdWUpO1xuXG4gICAgICAgIGNhc2UgJ2NhcHRpb25zJzpcbiAgICAgICAgICByZXR1cm4gY2FwdGlvbnMuZ2V0TGFiZWwuY2FsbCh0aGlzKTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gU2V0IHRoZSBxdWFsaXR5IG1lbnVcbiAgICBzZXRRdWFsaXR5TWVudTogZnVuY3Rpb24gc2V0UXVhbGl0eU1lbnUob3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIC8vIE1lbnUgcmVxdWlyZWRcbiAgICAgIGlmICghaXMkMS5lbGVtZW50KHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnF1YWxpdHkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHR5cGUgPSAncXVhbGl0eSc7XG4gICAgICB2YXIgbGlzdCA9IHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnF1YWxpdHkucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJyk7IC8vIFNldCBvcHRpb25zIGlmIHBhc3NlZCBhbmQgZmlsdGVyIGJhc2VkIG9uIHVuaXF1ZW5lc3MgYW5kIGNvbmZpZ1xuXG4gICAgICBpZiAoaXMkMS5hcnJheShvcHRpb25zKSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMucXVhbGl0eSA9IGRlZHVwZShvcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24gKHF1YWxpdHkpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM2LmNvbmZpZy5xdWFsaXR5Lm9wdGlvbnMuaW5jbHVkZXMocXVhbGl0eSk7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBUb2dnbGUgdGhlIHBhbmUgYW5kIHRhYlxuXG5cbiAgICAgIHZhciB0b2dnbGUgPSAhaXMkMS5lbXB0eSh0aGlzLm9wdGlvbnMucXVhbGl0eSkgJiYgdGhpcy5vcHRpb25zLnF1YWxpdHkubGVuZ3RoID4gMTtcbiAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnVCdXR0b24uY2FsbCh0aGlzLCB0eXBlLCB0b2dnbGUpOyAvLyBFbXB0eSB0aGUgbWVudVxuXG4gICAgICBlbXB0eUVsZW1lbnQobGlzdCk7IC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gdG9nZ2xlIHRoZSBwYXJlbnRcblxuICAgICAgY29udHJvbHMuY2hlY2tNZW51LmNhbGwodGhpcyk7IC8vIElmIHdlJ3JlIGhpZGluZywgbm90aGluZyBtb3JlIHRvIGRvXG5cbiAgICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gR2V0IHRoZSBiYWRnZSBIVE1MIGZvciBIRCwgNEsgZXRjXG5cblxuICAgICAgdmFyIGdldEJhZGdlID0gZnVuY3Rpb24gZ2V0QmFkZ2UocXVhbGl0eSkge1xuICAgICAgICB2YXIgbGFiZWwgPSBpMThuLmdldChcInF1YWxpdHlCYWRnZS5cIi5jb25jYXQocXVhbGl0eSksIF90aGlzNi5jb25maWcpO1xuXG4gICAgICAgIGlmICghbGFiZWwubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udHJvbHMuY3JlYXRlQmFkZ2UuY2FsbChfdGhpczYsIGxhYmVsKTtcbiAgICAgIH07IC8vIFNvcnQgb3B0aW9ucyBieSB0aGUgY29uZmlnIGFuZCB0aGVuIHJlbmRlciBvcHRpb25zXG5cblxuICAgICAgdGhpcy5vcHRpb25zLnF1YWxpdHkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2YXIgc29ydGluZyA9IF90aGlzNi5jb25maWcucXVhbGl0eS5vcHRpb25zO1xuICAgICAgICByZXR1cm4gc29ydGluZy5pbmRleE9mKGEpID4gc29ydGluZy5pbmRleE9mKGIpID8gMSA6IC0xO1xuICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAocXVhbGl0eSkge1xuICAgICAgICBjb250cm9scy5jcmVhdGVNZW51SXRlbS5jYWxsKF90aGlzNiwge1xuICAgICAgICAgIHZhbHVlOiBxdWFsaXR5LFxuICAgICAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICB0aXRsZTogY29udHJvbHMuZ2V0TGFiZWwuY2FsbChfdGhpczYsICdxdWFsaXR5JywgcXVhbGl0eSksXG4gICAgICAgICAgYmFkZ2U6IGdldEJhZGdlKHF1YWxpdHkpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb250cm9scy51cGRhdGVTZXR0aW5nLmNhbGwodGhpcywgdHlwZSwgbGlzdCk7XG4gICAgfSxcbiAgICAvLyBTZXQgdGhlIGxvb3Bpbmcgb3B0aW9uc1xuXG4gICAgLyogc2V0TG9vcE1lbnUoKSB7XG4gICAgICAgICAgLy8gTWVudSByZXF1aXJlZFxuICAgICAgICAgIGlmICghaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5sb29wKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgICBjb25zdCBvcHRpb25zID0gWydzdGFydCcsICdlbmQnLCAnYWxsJywgJ3Jlc2V0J107XG4gICAgICAgICAgY29uc3QgbGlzdCA9IHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLmxvb3AucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJyk7XG4gICAgICAgICAgIC8vIFNob3cgdGhlIHBhbmUgYW5kIHRhYlxuICAgICAgICAgIHRvZ2dsZUhpZGRlbih0aGlzLmVsZW1lbnRzLnNldHRpbmdzLmJ1dHRvbnMubG9vcCwgZmFsc2UpO1xuICAgICAgICAgIHRvZ2dsZUhpZGRlbih0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5sb29wLCBmYWxzZSk7XG4gICAgICAgICAgIC8vIFRvZ2dsZSB0aGUgcGFuZSBhbmQgdGFiXG4gICAgICAgICAgY29uc3QgdG9nZ2xlID0gIWlzLmVtcHR5KHRoaXMubG9vcC5vcHRpb25zKTtcbiAgICAgICAgICBjb250cm9scy50b2dnbGVNZW51QnV0dG9uLmNhbGwodGhpcywgJ2xvb3AnLCB0b2dnbGUpO1xuICAgICAgICAgICAvLyBFbXB0eSB0aGUgbWVudVxuICAgICAgICAgIGVtcHR5RWxlbWVudChsaXN0KTtcbiAgICAgICAgICAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBjcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgZXh0ZW5kKGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMubG9vcCksIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLFxuICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXBseXItbG9vcC1hY3Rpb24nOiBvcHRpb24sXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIGkxOG4uZ2V0KG9wdGlvbiwgdGhpcy5jb25maWcpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICBpZiAoWydzdGFydCcsICdlbmQnXS5pbmNsdWRlcyhvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBiYWRnZSA9IGNvbnRyb2xzLmNyZWF0ZUJhZGdlLmNhbGwodGhpcywgJzAwOjAwJyk7XG4gICAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoYmFkZ2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9LCAqL1xuICAgIC8vIEdldCBjdXJyZW50IHNlbGVjdGVkIGNhcHRpb24gbGFuZ3VhZ2VcbiAgICAvLyBUT0RPOiByZXdvcmsgdGhpcyB0byB1c2VyIHRoZSBnZXR0ZXIgaW4gdGhlIEFQST9cbiAgICAvLyBTZXQgYSBsaXN0IG9mIGF2YWlsYWJsZSBjYXB0aW9ucyBsYW5ndWFnZXNcbiAgICBzZXRDYXB0aW9uc01lbnU6IGZ1bmN0aW9uIHNldENhcHRpb25zTWVudSgpIHtcbiAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAvLyBNZW51IHJlcXVpcmVkXG4gICAgICBpZiAoIWlzJDEuZWxlbWVudCh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5jYXB0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBUT0RPOiBDYXB0aW9ucyBvciBsYW5ndWFnZT8gQ3VycmVudGx5IGl0J3MgbWl4ZWRcblxuXG4gICAgICB2YXIgdHlwZSA9ICdjYXB0aW9ucyc7XG4gICAgICB2YXIgbGlzdCA9IHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLmNhcHRpb25zLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwibWVudVwiXScpO1xuICAgICAgdmFyIHRyYWNrcyA9IGNhcHRpb25zLmdldFRyYWNrcy5jYWxsKHRoaXMpO1xuICAgICAgdmFyIHRvZ2dsZSA9IEJvb2xlYW4odHJhY2tzLmxlbmd0aCk7IC8vIFRvZ2dsZSB0aGUgcGFuZSBhbmQgdGFiXG5cbiAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnVCdXR0b24uY2FsbCh0aGlzLCB0eXBlLCB0b2dnbGUpOyAvLyBFbXB0eSB0aGUgbWVudVxuXG4gICAgICBlbXB0eUVsZW1lbnQobGlzdCk7IC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gdG9nZ2xlIHRoZSBwYXJlbnRcblxuICAgICAgY29udHJvbHMuY2hlY2tNZW51LmNhbGwodGhpcyk7IC8vIElmIHRoZXJlJ3Mgbm8gY2FwdGlvbnMsIGJhaWxcblxuICAgICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBHZW5lcmF0ZSBvcHRpb25zIGRhdGFcblxuXG4gICAgICB2YXIgb3B0aW9ucyA9IHRyYWNrcy5tYXAoZnVuY3Rpb24gKHRyYWNrLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBjaGVja2VkOiBfdGhpczcuY2FwdGlvbnMudG9nZ2xlZCAmJiBfdGhpczcuY3VycmVudFRyYWNrID09PSB2YWx1ZSxcbiAgICAgICAgICB0aXRsZTogY2FwdGlvbnMuZ2V0TGFiZWwuY2FsbChfdGhpczcsIHRyYWNrKSxcbiAgICAgICAgICBiYWRnZTogdHJhY2subGFuZ3VhZ2UgJiYgY29udHJvbHMuY3JlYXRlQmFkZ2UuY2FsbChfdGhpczcsIHRyYWNrLmxhbmd1YWdlLnRvVXBwZXJDYXNlKCkpLFxuICAgICAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICAgICAgdHlwZTogJ2xhbmd1YWdlJ1xuICAgICAgICB9O1xuICAgICAgfSk7IC8vIEFkZCB0aGUgXCJEaXNhYmxlZFwiIG9wdGlvbiB0byB0dXJuIG9mZiBjYXB0aW9uc1xuXG4gICAgICBvcHRpb25zLnVuc2hpZnQoe1xuICAgICAgICB2YWx1ZTogLTEsXG4gICAgICAgIGNoZWNrZWQ6ICF0aGlzLmNhcHRpb25zLnRvZ2dsZWQsXG4gICAgICAgIHRpdGxlOiBpMThuLmdldCgnZGlzYWJsZWQnLCB0aGlzLmNvbmZpZyksXG4gICAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICAgIHR5cGU6ICdsYW5ndWFnZSdcbiAgICAgIH0pOyAvLyBHZW5lcmF0ZSBvcHRpb25zXG5cbiAgICAgIG9wdGlvbnMuZm9yRWFjaChjb250cm9scy5jcmVhdGVNZW51SXRlbS5iaW5kKHRoaXMpKTtcbiAgICAgIGNvbnRyb2xzLnVwZGF0ZVNldHRpbmcuY2FsbCh0aGlzLCB0eXBlLCBsaXN0KTtcbiAgICB9LFxuICAgIC8vIFNldCBhIGxpc3Qgb2YgYXZhaWxhYmxlIGNhcHRpb25zIGxhbmd1YWdlc1xuICAgIHNldFNwZWVkTWVudTogZnVuY3Rpb24gc2V0U3BlZWRNZW51KCkge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIC8vIE1lbnUgcmVxdWlyZWRcbiAgICAgIGlmICghaXMkMS5lbGVtZW50KHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnNwZWVkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB0eXBlID0gJ3NwZWVkJztcbiAgICAgIHZhciBsaXN0ID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuc3BlZWQucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJyk7IC8vIEZpbHRlciBvdXQgaW52YWxpZCBzcGVlZHNcblxuICAgICAgdGhpcy5vcHRpb25zLnNwZWVkID0gdGhpcy5vcHRpb25zLnNwZWVkLmZpbHRlcihmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gbyA+PSBfdGhpczgubWluaW11bVNwZWVkICYmIG8gPD0gX3RoaXM4Lm1heGltdW1TcGVlZDtcbiAgICAgIH0pOyAvLyBUb2dnbGUgdGhlIHBhbmUgYW5kIHRhYlxuXG4gICAgICB2YXIgdG9nZ2xlID0gIWlzJDEuZW1wdHkodGhpcy5vcHRpb25zLnNwZWVkKSAmJiB0aGlzLm9wdGlvbnMuc3BlZWQubGVuZ3RoID4gMTtcbiAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnVCdXR0b24uY2FsbCh0aGlzLCB0eXBlLCB0b2dnbGUpOyAvLyBFbXB0eSB0aGUgbWVudVxuXG4gICAgICBlbXB0eUVsZW1lbnQobGlzdCk7IC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gdG9nZ2xlIHRoZSBwYXJlbnRcblxuICAgICAgY29udHJvbHMuY2hlY2tNZW51LmNhbGwodGhpcyk7IC8vIElmIHdlJ3JlIGhpZGluZywgbm90aGluZyBtb3JlIHRvIGRvXG5cbiAgICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQ3JlYXRlIGl0ZW1zXG5cblxuICAgICAgdGhpcy5vcHRpb25zLnNwZWVkLmZvckVhY2goZnVuY3Rpb24gKHNwZWVkKSB7XG4gICAgICAgIGNvbnRyb2xzLmNyZWF0ZU1lbnVJdGVtLmNhbGwoX3RoaXM4LCB7XG4gICAgICAgICAgdmFsdWU6IHNwZWVkLFxuICAgICAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICB0aXRsZTogY29udHJvbHMuZ2V0TGFiZWwuY2FsbChfdGhpczgsICdzcGVlZCcsIHNwZWVkKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29udHJvbHMudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsIHR5cGUsIGxpc3QpO1xuICAgIH0sXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBoaWRlL3Nob3cgdGhlIHNldHRpbmdzIG1lbnVcbiAgICBjaGVja01lbnU6IGZ1bmN0aW9uIGNoZWNrTWVudSgpIHtcbiAgICAgIHZhciBidXR0b25zID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5idXR0b25zO1xuICAgICAgdmFyIHZpc2libGUgPSAhaXMkMS5lbXB0eShidXR0b25zKSAmJiBPYmplY3QudmFsdWVzKGJ1dHRvbnMpLnNvbWUoZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICByZXR1cm4gIWJ1dHRvbi5oaWRkZW47XG4gICAgICB9KTtcbiAgICAgIHRvZ2dsZUhpZGRlbih0aGlzLmVsZW1lbnRzLnNldHRpbmdzLm1lbnUsICF2aXNpYmxlKTtcbiAgICB9LFxuICAgIC8vIEZvY3VzIHRoZSBmaXJzdCBtZW51IGl0ZW0gaW4gYSBnaXZlbiAob3IgdmlzaWJsZSkgbWVudVxuICAgIGZvY3VzRmlyc3RNZW51SXRlbTogZnVuY3Rpb24gZm9jdXNGaXJzdE1lbnVJdGVtKHBhbmUpIHtcbiAgICAgIHZhciB0YWJGb2N1cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBvcHVwLmhpZGRlbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXQgPSBwYW5lO1xuXG4gICAgICBpZiAoIWlzJDEuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldCA9IE9iamVjdC52YWx1ZXModGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMpLmZpbmQoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICByZXR1cm4gIXAuaGlkZGVuO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZpcnN0SXRlbSA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCdbcm9sZV49XCJtZW51aXRlbVwiXScpO1xuICAgICAgc2V0Rm9jdXMuY2FsbCh0aGlzLCBmaXJzdEl0ZW0sIHRhYkZvY3VzKTtcbiAgICB9LFxuICAgIC8vIFNob3cvaGlkZSBtZW51XG4gICAgdG9nZ2xlTWVudTogZnVuY3Rpb24gdG9nZ2xlTWVudShpbnB1dCkge1xuICAgICAgdmFyIHBvcHVwID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wb3B1cDtcbiAgICAgIHZhciBidXR0b24gPSB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMuc2V0dGluZ3M7IC8vIE1lbnUgYW5kIGJ1dHRvbiBhcmUgcmVxdWlyZWRcblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQocG9wdXApIHx8ICFpcyQxLmVsZW1lbnQoYnV0dG9uKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFRydWUgdG9nZ2xlIGJ5IGRlZmF1bHRcblxuXG4gICAgICB2YXIgaGlkZGVuID0gcG9wdXAuaGlkZGVuO1xuICAgICAgdmFyIHNob3cgPSBoaWRkZW47XG5cbiAgICAgIGlmIChpcyQxLmJvb2xlYW4oaW5wdXQpKSB7XG4gICAgICAgIHNob3cgPSBpbnB1dDtcbiAgICAgIH0gZWxzZSBpZiAoaXMkMS5rZXlib2FyZEV2ZW50KGlucHV0KSAmJiBpbnB1dC53aGljaCA9PT0gMjcpIHtcbiAgICAgICAgc2hvdyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpcyQxLmV2ZW50KGlucHV0KSkge1xuICAgICAgICAvLyBJZiBQbHlyIGlzIGluIGEgc2hhZG93RE9NLCB0aGUgZXZlbnQgdGFyZ2V0IGlzIHNldCB0byB0aGUgY29tcG9uZW50LCBpbnN0ZWFkIG9mIHRoZVxuICAgICAgICAvLyBFbGVtZW50IGluIHRoZSBzaGFkb3dET00uIFRoZSBwYXRoLCBpZiBhdmFpbGFibGUsIGlzIGNvbXBsZXRlLlxuICAgICAgICB2YXIgdGFyZ2V0ID0gaXMkMS5mdW5jdGlvbihpbnB1dC5jb21wb3NlZFBhdGgpID8gaW5wdXQuY29tcG9zZWRQYXRoKClbMF0gOiBpbnB1dC50YXJnZXQ7XG4gICAgICAgIHZhciBpc01lbnVJdGVtID0gcG9wdXAuY29udGFpbnModGFyZ2V0KTsgLy8gSWYgdGhlIGNsaWNrIHdhcyBpbnNpZGUgdGhlIG1lbnUgb3IgaWYgdGhlIGNsaWNrXG4gICAgICAgIC8vIHdhc24ndCB0aGUgYnV0dG9uIG9yIG1lbnUgaXRlbSBhbmQgd2UncmUgdHJ5aW5nIHRvXG4gICAgICAgIC8vIHNob3cgdGhlIG1lbnUgKGEgZG9jIGNsaWNrIHNob3VsZG4ndCBzaG93IHRoZSBtZW51KVxuXG4gICAgICAgIGlmIChpc01lbnVJdGVtIHx8ICFpc01lbnVJdGVtICYmIGlucHV0LnRhcmdldCAhPT0gYnV0dG9uICYmIHNob3cpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gLy8gU2V0IGJ1dHRvbiBhdHRyaWJ1dGVzXG5cblxuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHNob3cpOyAvLyBTaG93IHRoZSBhY3R1YWwgcG9wdXBcblxuICAgICAgdG9nZ2xlSGlkZGVuKHBvcHVwLCAhc2hvdyk7IC8vIEFkZCBjbGFzcyBob29rXG5cbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUub3Blbiwgc2hvdyk7IC8vIEZvY3VzIHRoZSBmaXJzdCBpdGVtIGlmIGtleSBpbnRlcmFjdGlvblxuXG4gICAgICBpZiAoc2hvdyAmJiBpcyQxLmtleWJvYXJkRXZlbnQoaW5wdXQpKSB7XG4gICAgICAgIGNvbnRyb2xzLmZvY3VzRmlyc3RNZW51SXRlbS5jYWxsKHRoaXMsIG51bGwsIHRydWUpO1xuICAgICAgfSBlbHNlIGlmICghc2hvdyAmJiAhaGlkZGVuKSB7XG4gICAgICAgIC8vIElmIGNsb3NpbmcsIHJlLWZvY3VzIHRoZSBidXR0b25cbiAgICAgICAgc2V0Rm9jdXMuY2FsbCh0aGlzLCBidXR0b24sIGlzJDEua2V5Ym9hcmRFdmVudChpbnB1dCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gR2V0IHRoZSBuYXR1cmFsIHNpemUgb2YgYSBtZW51IHBhbmVsXG4gICAgZ2V0TWVudVNpemU6IGZ1bmN0aW9uIGdldE1lbnVTaXplKHRhYikge1xuICAgICAgdmFyIGNsb25lID0gdGFiLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIGNsb25lLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgIGNsb25lLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgY2xvbmUucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsgLy8gQXBwZW5kIHRvIHBhcmVudCBzbyB3ZSBnZXQgdGhlIFwicmVhbFwiIHNpemVcblxuICAgICAgdGFiLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoY2xvbmUpOyAvLyBHZXQgdGhlIHNpemVzIGJlZm9yZSB3ZSByZW1vdmVcblxuICAgICAgdmFyIHdpZHRoID0gY2xvbmUuc2Nyb2xsV2lkdGg7XG4gICAgICB2YXIgaGVpZ2h0ID0gY2xvbmUuc2Nyb2xsSGVpZ2h0OyAvLyBSZW1vdmUgZnJvbSB0aGUgRE9NXG5cbiAgICAgIHJlbW92ZUVsZW1lbnQoY2xvbmUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgfTtcbiAgICB9LFxuICAgIC8vIFNob3cgYSBwYW5lbCBpbiB0aGUgbWVudVxuICAgIHNob3dNZW51UGFuZWw6IGZ1bmN0aW9uIHNob3dNZW51UGFuZWwoKSB7XG4gICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgICAgdmFyIHRhYkZvY3VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3BseXItc2V0dGluZ3MtXCIuY29uY2F0KHRoaXMuaWQsIFwiLVwiKS5jb25jYXQodHlwZSkpOyAvLyBOb3RoaW5nIHRvIHNob3csIGJhaWxcblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEhpZGUgYWxsIG90aGVyIHBhbmVsc1xuXG5cbiAgICAgIHZhciBjb250YWluZXIgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgIHZhciBjdXJyZW50ID0gQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZpbmQoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuICFub2RlLmhpZGRlbjtcbiAgICAgIH0pOyAvLyBJZiB3ZSBjYW4gZG8gZmFuY3kgYW5pbWF0aW9ucywgd2UnbGwgYW5pbWF0ZSB0aGUgaGVpZ2h0L3dpZHRoXG5cbiAgICAgIGlmIChzdXBwb3J0LnRyYW5zaXRpb25zICYmICFzdXBwb3J0LnJlZHVjZWRNb3Rpb24pIHtcbiAgICAgICAgLy8gU2V0IHRoZSBjdXJyZW50IHdpZHRoIGFzIGEgYmFzZVxuICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChjdXJyZW50LnNjcm9sbFdpZHRoLCBcInB4XCIpO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCJcIi5jb25jYXQoY3VycmVudC5zY3JvbGxIZWlnaHQsIFwicHhcIik7IC8vIEdldCBwb3RlbnRpYWwgc2l6ZXNcblxuICAgICAgICB2YXIgc2l6ZSA9IGNvbnRyb2xzLmdldE1lbnVTaXplLmNhbGwodGhpcywgdGFyZ2V0KTsgLy8gUmVzdG9yZSBhdXRvIGhlaWdodC93aWR0aFxuXG4gICAgICAgIHZhciByZXN0b3JlID0gZnVuY3Rpb24gcmVzdG9yZShldmVudCkge1xuICAgICAgICAgIC8vIFdlJ3JlIG9ubHkgYm90aGVyZWQgYWJvdXQgaGVpZ2h0IGFuZCB3aWR0aCBvbiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gY29udGFpbmVyIHx8ICFbJ3dpZHRoJywgJ2hlaWdodCddLmluY2x1ZGVzKGV2ZW50LnByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IC8vIFJldmVydCBiYWNrIHRvIGF1dG9cblxuXG4gICAgICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcnOyAvLyBPbmx5IGxpc3RlbiBvbmNlXG5cbiAgICAgICAgICBvZmYuY2FsbChfdGhpczksIGNvbnRhaW5lciwgdHJhbnNpdGlvbkVuZEV2ZW50LCByZXN0b3JlKTtcbiAgICAgICAgfTsgLy8gTGlzdGVuIGZvciB0aGUgdHJhbnNpdGlvbiBmaW5pc2hpbmcgYW5kIHJlc3RvcmUgYXV0byBoZWlnaHQvd2lkdGhcblxuXG4gICAgICAgIG9uLmNhbGwodGhpcywgY29udGFpbmVyLCB0cmFuc2l0aW9uRW5kRXZlbnQsIHJlc3RvcmUpOyAvLyBTZXQgZGltZW5zaW9ucyB0byB0YXJnZXRcblxuICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChzaXplLndpZHRoLCBcInB4XCIpO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCJcIi5jb25jYXQoc2l6ZS5oZWlnaHQsIFwicHhcIik7XG4gICAgICB9IC8vIFNldCBhdHRyaWJ1dGVzIG9uIGN1cnJlbnQgdGFiXG5cblxuICAgICAgdG9nZ2xlSGlkZGVuKGN1cnJlbnQsIHRydWUpOyAvLyBTZXQgYXR0cmlidXRlcyBvbiB0YXJnZXRcblxuICAgICAgdG9nZ2xlSGlkZGVuKHRhcmdldCwgZmFsc2UpOyAvLyBGb2N1cyB0aGUgZmlyc3QgaXRlbVxuXG4gICAgICBjb250cm9scy5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbCh0aGlzLCB0YXJnZXQsIHRhYkZvY3VzKTtcbiAgICB9LFxuICAgIC8vIFNldCB0aGUgZG93bmxvYWQgVVJMXG4gICAgc2V0RG93bmxvYWRVcmw6IGZ1bmN0aW9uIHNldERvd25sb2FkVXJsKCkge1xuICAgICAgdmFyIGJ1dHRvbiA9IHRoaXMuZWxlbWVudHMuYnV0dG9ucy5kb3dubG9hZDsgLy8gQmFpbCBpZiBubyBidXR0b25cblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQoYnV0dG9uKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFNldCBhdHRyaWJ1dGVcblxuXG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdocmVmJywgdGhpcy5kb3dubG9hZCk7XG4gICAgfSxcbiAgICAvLyBCdWlsZCB0aGUgZGVmYXVsdCBIVE1MXG4gICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xuICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICB2YXIgYmluZE1lbnVJdGVtU2hvcnRjdXRzID0gY29udHJvbHMuYmluZE1lbnVJdGVtU2hvcnRjdXRzLFxuICAgICAgICAgIGNyZWF0ZUJ1dHRvbiA9IGNvbnRyb2xzLmNyZWF0ZUJ1dHRvbixcbiAgICAgICAgICBjcmVhdGVQcm9ncmVzcyA9IGNvbnRyb2xzLmNyZWF0ZVByb2dyZXNzLFxuICAgICAgICAgIGNyZWF0ZVJhbmdlID0gY29udHJvbHMuY3JlYXRlUmFuZ2UsXG4gICAgICAgICAgY3JlYXRlVGltZSA9IGNvbnRyb2xzLmNyZWF0ZVRpbWUsXG4gICAgICAgICAgc2V0UXVhbGl0eU1lbnUgPSBjb250cm9scy5zZXRRdWFsaXR5TWVudSxcbiAgICAgICAgICBzZXRTcGVlZE1lbnUgPSBjb250cm9scy5zZXRTcGVlZE1lbnUsXG4gICAgICAgICAgc2hvd01lbnVQYW5lbCA9IGNvbnRyb2xzLnNob3dNZW51UGFuZWw7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRyb2xzID0gbnVsbDsgLy8gTGFyZ2VyIG92ZXJsYWlkIHBsYXkgYnV0dG9uXG5cbiAgICAgIGlmIChpcyQxLmFycmF5KHRoaXMuY29uZmlnLmNvbnRyb2xzKSAmJiB0aGlzLmNvbmZpZy5jb250cm9scy5pbmNsdWRlcygncGxheS1sYXJnZScpKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKHRoaXMsICdwbGF5LWxhcmdlJykpO1xuICAgICAgfSAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lclxuXG5cbiAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBnZXRBdHRyaWJ1dGVzRnJvbVNlbGVjdG9yKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy53cmFwcGVyKSk7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRyb2xzID0gY29udGFpbmVyOyAvLyBEZWZhdWx0IGl0ZW0gYXR0cmlidXRlc1xuXG4gICAgICB2YXIgZGVmYXVsdEF0dHJpYnV0ZXMgPSB7XG4gICAgICAgIGNsYXNzOiAncGx5cl9fY29udHJvbHNfX2l0ZW0nXG4gICAgICB9OyAvLyBMb29wIHRocm91Z2ggY29udHJvbHMgaW4gb3JkZXJcblxuICAgICAgZGVkdXBlKGlzJDEuYXJyYXkodGhpcy5jb25maWcuY29udHJvbHMpID8gdGhpcy5jb25maWcuY29udHJvbHMgOiBbXSkuZm9yRWFjaChmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICAvLyBSZXN0YXJ0IGJ1dHRvblxuICAgICAgICBpZiAoY29udHJvbCA9PT0gJ3Jlc3RhcnQnKSB7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKF90aGlzMTAsICdyZXN0YXJ0JywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfSAvLyBSZXdpbmQgYnV0dG9uXG5cblxuICAgICAgICBpZiAoY29udHJvbCA9PT0gJ3Jld2luZCcpIHtcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwoX3RoaXMxMCwgJ3Jld2luZCcsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICAgIH0gLy8gUGxheS9QYXVzZSBidXR0b25cblxuXG4gICAgICAgIGlmIChjb250cm9sID09PSAncGxheScpIHtcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwoX3RoaXMxMCwgJ3BsYXknLCBkZWZhdWx0QXR0cmlidXRlcykpO1xuICAgICAgICB9IC8vIEZhc3QgZm9yd2FyZCBidXR0b25cblxuXG4gICAgICAgIGlmIChjb250cm9sID09PSAnZmFzdC1mb3J3YXJkJykge1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24uY2FsbChfdGhpczEwLCAnZmFzdC1mb3J3YXJkJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfSAvLyBQcm9ncmVzc1xuXG5cbiAgICAgICAgaWYgKGNvbnRyb2wgPT09ICdwcm9ncmVzcycpIHtcbiAgICAgICAgICB2YXIgcHJvZ3Jlc3NDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICBjbGFzczogXCJcIi5jb25jYXQoZGVmYXVsdEF0dHJpYnV0ZXMuY2xhc3MsIFwiIHBseXJfX3Byb2dyZXNzX19jb250YWluZXJcIilcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBnZXRBdHRyaWJ1dGVzRnJvbVNlbGVjdG9yKF90aGlzMTAuY29uZmlnLnNlbGVjdG9ycy5wcm9ncmVzcykpOyAvLyBTZWVrIHJhbmdlIHNsaWRlclxuXG4gICAgICAgICAgcHJvZ3Jlc3MuYXBwZW5kQ2hpbGQoY3JlYXRlUmFuZ2UuY2FsbChfdGhpczEwLCAnc2VlaycsIHtcbiAgICAgICAgICAgIGlkOiBcInBseXItc2Vlay1cIi5jb25jYXQoZGF0YS5pZClcbiAgICAgICAgICB9KSk7IC8vIEJ1ZmZlciBwcm9ncmVzc1xuXG4gICAgICAgICAgcHJvZ3Jlc3MuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvZ3Jlc3MuY2FsbChfdGhpczEwLCAnYnVmZmVyJykpOyAvLyBUT0RPOiBBZGQgbG9vcCBkaXNwbGF5IGluZGljYXRvclxuICAgICAgICAgIC8vIFNlZWsgdG9vbHRpcFxuXG4gICAgICAgICAgaWYgKF90aGlzMTAuY29uZmlnLnRvb2x0aXBzLnNlZWspIHtcbiAgICAgICAgICAgIHZhciB0b29sdGlwID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgY2xhc3M6IF90aGlzMTAuY29uZmlnLmNsYXNzTmFtZXMudG9vbHRpcFxuICAgICAgICAgICAgfSwgJzAwOjAwJyk7XG4gICAgICAgICAgICBwcm9ncmVzcy5hcHBlbmRDaGlsZCh0b29sdGlwKTtcbiAgICAgICAgICAgIF90aGlzMTAuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMxMC5lbGVtZW50cy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgIHByb2dyZXNzQ29udGFpbmVyLmFwcGVuZENoaWxkKF90aGlzMTAuZWxlbWVudHMucHJvZ3Jlc3MpO1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9ncmVzc0NvbnRhaW5lcik7XG4gICAgICAgIH0gLy8gTWVkaWEgY3VycmVudCB0aW1lIGRpc3BsYXlcblxuXG4gICAgICAgIGlmIChjb250cm9sID09PSAnY3VycmVudC10aW1lJykge1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVUaW1lLmNhbGwoX3RoaXMxMCwgJ2N1cnJlbnRUaW1lJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfSAvLyBNZWRpYSBkdXJhdGlvbiBkaXNwbGF5XG5cblxuICAgICAgICBpZiAoY29udHJvbCA9PT0gJ2R1cmF0aW9uJykge1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVUaW1lLmNhbGwoX3RoaXMxMCwgJ2R1cmF0aW9uJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfSAvLyBWb2x1bWUgY29udHJvbHNcblxuXG4gICAgICAgIGlmIChjb250cm9sID09PSAnbXV0ZScgfHwgY29udHJvbCA9PT0gJ3ZvbHVtZScpIHtcbiAgICAgICAgICB2YXIgdm9sdW1lID0gX3RoaXMxMC5lbGVtZW50cy52b2x1bWU7IC8vIENyZWF0ZSB0aGUgdm9sdW1lIGNvbnRhaW5lciBpZiBuZWVkZWRcblxuICAgICAgICAgIGlmICghaXMkMS5lbGVtZW50KHZvbHVtZSkgfHwgIWNvbnRhaW5lci5jb250YWlucyh2b2x1bWUpKSB7XG4gICAgICAgICAgICB2b2x1bWUgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBleHRlbmQoe30sIGRlZmF1bHRBdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICAgIGNsYXNzOiBcIlwiLmNvbmNhdChkZWZhdWx0QXR0cmlidXRlcy5jbGFzcywgXCIgcGx5cl9fdm9sdW1lXCIpLnRyaW0oKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgX3RoaXMxMC5lbGVtZW50cy52b2x1bWUgPSB2b2x1bWU7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodm9sdW1lKTtcbiAgICAgICAgICB9IC8vIFRvZ2dsZSBtdXRlIGJ1dHRvblxuXG5cbiAgICAgICAgICBpZiAoY29udHJvbCA9PT0gJ211dGUnKSB7XG4gICAgICAgICAgICB2b2x1bWUuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwoX3RoaXMxMCwgJ211dGUnKSk7XG4gICAgICAgICAgfSAvLyBWb2x1bWUgcmFuZ2UgY29udHJvbFxuICAgICAgICAgIC8vIElnbm9yZWQgb24gaU9TIGFzIGl0J3MgaGFuZGxlZCBnbG9iYWxseVxuICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L3NhZmFyaS9kb2N1bWVudGF0aW9uL0F1ZGlvVmlkZW8vQ29uY2VwdHVhbC9Vc2luZ19IVE1MNV9BdWRpb19WaWRlby9EZXZpY2UtU3BlY2lmaWNDb25zaWRlcmF0aW9ucy9EZXZpY2UtU3BlY2lmaWNDb25zaWRlcmF0aW9ucy5odG1sXG5cblxuICAgICAgICAgIGlmIChjb250cm9sID09PSAndm9sdW1lJyAmJiAhYnJvd3Nlci5pc0lvcykge1xuICAgICAgICAgICAgLy8gU2V0IHRoZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICAgbWF4OiAxLFxuICAgICAgICAgICAgICBzdGVwOiAwLjA1LFxuICAgICAgICAgICAgICB2YWx1ZTogX3RoaXMxMC5jb25maWcudm9sdW1lXG4gICAgICAgICAgICB9OyAvLyBDcmVhdGUgdGhlIHZvbHVtZSByYW5nZSBzbGlkZXJcblxuICAgICAgICAgICAgdm9sdW1lLmFwcGVuZENoaWxkKGNyZWF0ZVJhbmdlLmNhbGwoX3RoaXMxMCwgJ3ZvbHVtZScsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICAgIGlkOiBcInBseXItdm9sdW1lLVwiLmNvbmNhdChkYXRhLmlkKVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gVG9nZ2xlIGNhcHRpb25zIGJ1dHRvblxuXG5cbiAgICAgICAgaWYgKGNvbnRyb2wgPT09ICdjYXB0aW9ucycpIHtcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwoX3RoaXMxMCwgJ2NhcHRpb25zJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfSAvLyBTZXR0aW5ncyBidXR0b24gLyBtZW51XG5cblxuICAgICAgICBpZiAoY29udHJvbCA9PT0gJ3NldHRpbmdzJyAmJiAhaXMkMS5lbXB0eShfdGhpczEwLmNvbmZpZy5zZXR0aW5ncykpIHtcbiAgICAgICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIGV4dGVuZCh7fSwgZGVmYXVsdEF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIGNsYXNzOiBcIlwiLmNvbmNhdChkZWZhdWx0QXR0cmlidXRlcy5jbGFzcywgXCIgcGx5cl9fbWVudVwiKS50cmltKCksXG4gICAgICAgICAgICBoaWRkZW46ICcnXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwoX3RoaXMxMCwgJ3NldHRpbmdzJywge1xuICAgICAgICAgICAgJ2FyaWEtaGFzcG9wdXAnOiB0cnVlLFxuICAgICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiBcInBseXItc2V0dGluZ3MtXCIuY29uY2F0KGRhdGEuaWQpLFxuICAgICAgICAgICAgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICB2YXIgcG9wdXAgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICBjbGFzczogJ3BseXJfX21lbnVfX2NvbnRhaW5lcicsXG4gICAgICAgICAgICBpZDogXCJwbHlyLXNldHRpbmdzLVwiLmNvbmNhdChkYXRhLmlkKSxcbiAgICAgICAgICAgIGhpZGRlbjogJydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgaW5uZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB2YXIgaG9tZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgIGlkOiBcInBseXItc2V0dGluZ3MtXCIuY29uY2F0KGRhdGEuaWQsIFwiLWhvbWVcIilcbiAgICAgICAgICB9KTsgLy8gQ3JlYXRlIHRoZSBtZW51XG5cbiAgICAgICAgICB2YXIgbWVudSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgIHJvbGU6ICdtZW51J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGhvbWUuYXBwZW5kQ2hpbGQobWVudSk7XG4gICAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQoaG9tZSk7XG4gICAgICAgICAgX3RoaXMxMC5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuaG9tZSA9IGhvbWU7IC8vIEJ1aWxkIHRoZSBtZW51IGl0ZW1zXG5cbiAgICAgICAgICBfdGhpczEwLmNvbmZpZy5zZXR0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBidW5kbGUgdGhpcyB3aXRoIHRoZSBjcmVhdGVNZW51SXRlbSBoZWxwZXIgYW5kIGJpbmRpbmdzXG4gICAgICAgICAgICB2YXIgbWVudUl0ZW0gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBleHRlbmQoZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3RvcihfdGhpczEwLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5zZXR0aW5ncyksIHtcbiAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgIGNsYXNzOiBcIlwiLmNvbmNhdChfdGhpczEwLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsIFwiIFwiKS5jb25jYXQoX3RoaXMxMC5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLCBcIi0tZm9yd2FyZFwiKSxcbiAgICAgICAgICAgICAgcm9sZTogJ21lbnVpdGVtJyxcbiAgICAgICAgICAgICAgJ2FyaWEtaGFzcG9wdXAnOiB0cnVlLFxuICAgICAgICAgICAgICBoaWRkZW46ICcnXG4gICAgICAgICAgICB9KSk7IC8vIEJpbmQgbWVudSBzaG9ydGN1dHMgZm9yIGtleWJvYXJkIHVzZXJzXG5cbiAgICAgICAgICAgIGJpbmRNZW51SXRlbVNob3J0Y3V0cy5jYWxsKF90aGlzMTAsIG1lbnVJdGVtLCB0eXBlKTsgLy8gU2hvdyBtZW51IG9uIGNsaWNrXG5cbiAgICAgICAgICAgIG9uLmNhbGwoX3RoaXMxMCwgbWVudUl0ZW0sICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc2hvd01lbnVQYW5lbC5jYWxsKF90aGlzMTAsIHR5cGUsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGZsZXggPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgbnVsbCwgaTE4bi5nZXQodHlwZSwgX3RoaXMxMC5jb25maWcpKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgIGNsYXNzOiBfdGhpczEwLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUudmFsdWVcbiAgICAgICAgICAgIH0pOyAvLyBTcGVlZCBjb250YWlucyBIVE1MIGVudGl0aWVzXG5cbiAgICAgICAgICAgIHZhbHVlLmlubmVySFRNTCA9IGRhdGFbdHlwZV07XG4gICAgICAgICAgICBmbGV4LmFwcGVuZENoaWxkKHZhbHVlKTtcbiAgICAgICAgICAgIG1lbnVJdGVtLmFwcGVuZENoaWxkKGZsZXgpO1xuICAgICAgICAgICAgbWVudS5hcHBlbmRDaGlsZChtZW51SXRlbSk7IC8vIEJ1aWxkIHRoZSBwYW5lc1xuXG4gICAgICAgICAgICB2YXIgcGFuZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgaWQ6IFwicGx5ci1zZXR0aW5ncy1cIi5jb25jYXQoZGF0YS5pZCwgXCItXCIpLmNvbmNhdCh0eXBlKSxcbiAgICAgICAgICAgICAgaGlkZGVuOiAnJ1xuICAgICAgICAgICAgfSk7IC8vIEJhY2sgYnV0dG9uXG5cbiAgICAgICAgICAgIHZhciBiYWNrQnV0dG9uID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgY2xhc3M6IFwiXCIuY29uY2F0KF90aGlzMTAuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbCwgXCIgXCIpLmNvbmNhdChfdGhpczEwLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsIFwiLS1iYWNrXCIpXG4gICAgICAgICAgICB9KTsgLy8gVmlzaWJsZSBsYWJlbFxuXG4gICAgICAgICAgICBiYWNrQnV0dG9uLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICdhcmlhLWhpZGRlbic6IHRydWVcbiAgICAgICAgICAgIH0sIGkxOG4uZ2V0KHR5cGUsIF90aGlzMTAuY29uZmlnKSkpOyAvLyBTY3JlZW4gcmVhZGVyIGxhYmVsXG5cbiAgICAgICAgICAgIGJhY2tCdXR0b24uYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgY2xhc3M6IF90aGlzMTAuY29uZmlnLmNsYXNzTmFtZXMuaGlkZGVuXG4gICAgICAgICAgICB9LCBpMThuLmdldCgnbWVudUJhY2snLCBfdGhpczEwLmNvbmZpZykpKTsgLy8gR28gYmFjayB2aWEga2V5Ym9hcmRcblxuICAgICAgICAgICAgb24uY2FsbChfdGhpczEwLCBwYW5lLCAna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAvLyBXZSBvbmx5IGNhcmUgYWJvdXQgPC1cbiAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoICE9PSAzNykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfSAvLyBQcmV2ZW50IHNlZWtcblxuXG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBTaG93IHRoZSByZXNwZWN0aXZlIG1lbnVcblxuICAgICAgICAgICAgICBzaG93TWVudVBhbmVsLmNhbGwoX3RoaXMxMCwgJ2hvbWUnLCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTsgLy8gR28gYmFjayB2aWEgYnV0dG9uIGNsaWNrXG5cbiAgICAgICAgICAgIG9uLmNhbGwoX3RoaXMxMCwgYmFja0J1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzaG93TWVudVBhbmVsLmNhbGwoX3RoaXMxMCwgJ2hvbWUnLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTsgLy8gQWRkIHRvIHBhbmVcblxuICAgICAgICAgICAgcGFuZS5hcHBlbmRDaGlsZChiYWNrQnV0dG9uKTsgLy8gTWVudVxuXG4gICAgICAgICAgICBwYW5lLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgcm9sZTogJ21lbnUnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpbm5lci5hcHBlbmRDaGlsZChwYW5lKTtcbiAgICAgICAgICAgIF90aGlzMTAuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1t0eXBlXSA9IG1lbnVJdGVtO1xuICAgICAgICAgICAgX3RoaXMxMC5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHNbdHlwZV0gPSBwYW5lO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICBfdGhpczEwLmVsZW1lbnRzLnNldHRpbmdzLnBvcHVwID0gcG9wdXA7XG4gICAgICAgICAgX3RoaXMxMC5lbGVtZW50cy5zZXR0aW5ncy5tZW51ID0gd3JhcHBlcjtcbiAgICAgICAgfSAvLyBQaWN0dXJlIGluIHBpY3R1cmUgYnV0dG9uXG5cblxuICAgICAgICBpZiAoY29udHJvbCA9PT0gJ3BpcCcgJiYgc3VwcG9ydC5waXApIHtcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwoX3RoaXMxMCwgJ3BpcCcsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICAgIH0gLy8gQWlycGxheSBidXR0b25cblxuXG4gICAgICAgIGlmIChjb250cm9sID09PSAnYWlycGxheScgJiYgc3VwcG9ydC5haXJwbGF5KSB7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKF90aGlzMTAsICdhaXJwbGF5JywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfSAvLyBEb3dubG9hZCBidXR0b25cblxuXG4gICAgICAgIGlmIChjb250cm9sID09PSAnZG93bmxvYWQnKSB7XG4gICAgICAgICAgdmFyIF9hdHRyaWJ1dGVzID0gZXh0ZW5kKHt9LCBkZWZhdWx0QXR0cmlidXRlcywge1xuICAgICAgICAgICAgZWxlbWVudDogJ2EnLFxuICAgICAgICAgICAgaHJlZjogX3RoaXMxMC5kb3dubG9hZCxcbiAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaydcbiAgICAgICAgICB9KTsgLy8gU2V0IGRvd25sb2FkIGF0dHJpYnV0ZSBmb3IgSFRNTDUgb25seVxuXG5cbiAgICAgICAgICBpZiAoX3RoaXMxMC5pc0hUTUw1KSB7XG4gICAgICAgICAgICBfYXR0cmlidXRlcy5kb3dubG9hZCA9ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkb3dubG9hZCA9IF90aGlzMTAuY29uZmlnLnVybHMuZG93bmxvYWQ7XG5cbiAgICAgICAgICBpZiAoIWlzJDEudXJsKGRvd25sb2FkKSAmJiBfdGhpczEwLmlzRW1iZWQpIHtcbiAgICAgICAgICAgIGV4dGVuZChfYXR0cmlidXRlcywge1xuICAgICAgICAgICAgICBpY29uOiBcImxvZ28tXCIuY29uY2F0KF90aGlzMTAucHJvdmlkZXIpLFxuICAgICAgICAgICAgICBsYWJlbDogX3RoaXMxMC5wcm92aWRlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKF90aGlzMTAsICdkb3dubG9hZCcsIF9hdHRyaWJ1dGVzKSk7XG4gICAgICAgIH0gLy8gVG9nZ2xlIGZ1bGxzY3JlZW4gYnV0dG9uXG5cblxuICAgICAgICBpZiAoY29udHJvbCA9PT0gJ2Z1bGxzY3JlZW4nKSB7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKF90aGlzMTAsICdmdWxsc2NyZWVuJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIFNldCBhdmFpbGFibGUgcXVhbGl0eSBsZXZlbHNcblxuICAgICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgICBzZXRRdWFsaXR5TWVudS5jYWxsKHRoaXMsIGh0bWw1LmdldFF1YWxpdHlPcHRpb25zLmNhbGwodGhpcykpO1xuICAgICAgfVxuXG4gICAgICBzZXRTcGVlZE1lbnUuY2FsbCh0aGlzKTtcbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfSxcbiAgICAvLyBJbnNlcnQgY29udHJvbHNcbiAgICBpbmplY3Q6IGZ1bmN0aW9uIGluamVjdCgpIHtcbiAgICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgICAgLy8gU3ByaXRlXG4gICAgICBpZiAodGhpcy5jb25maWcubG9hZFNwcml0ZSkge1xuICAgICAgICB2YXIgaWNvbiA9IGNvbnRyb2xzLmdldEljb25VcmwuY2FsbCh0aGlzKTsgLy8gT25seSBsb2FkIGV4dGVybmFsIHNwcml0ZSB1c2luZyBBSkFYXG5cbiAgICAgICAgaWYgKGljb24uY29ycykge1xuICAgICAgICAgIGxvYWRTcHJpdGUoaWNvbi51cmwsICdzcHJpdGUtcGx5cicpO1xuICAgICAgICB9XG4gICAgICB9IC8vIENyZWF0ZSBhIHVuaXF1ZSBJRFxuXG5cbiAgICAgIHRoaXMuaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7IC8vIE51bGwgYnkgZGVmYXVsdFxuXG4gICAgICB2YXIgY29udGFpbmVyID0gbnVsbDtcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udHJvbHMgPSBudWxsOyAvLyBTZXQgdGVtcGxhdGUgcHJvcGVydGllc1xuXG4gICAgICB2YXIgcHJvcHMgPSB7XG4gICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICBzZWVrdGltZTogdGhpcy5jb25maWcuc2Vla1RpbWUsXG4gICAgICAgIHRpdGxlOiB0aGlzLmNvbmZpZy50aXRsZVxuICAgICAgfTtcbiAgICAgIHZhciB1cGRhdGUgPSB0cnVlOyAvLyBJZiBmdW5jdGlvbiwgcnVuIGl0IGFuZCB1c2Ugb3V0cHV0XG5cbiAgICAgIGlmIChpcyQxLmZ1bmN0aW9uKHRoaXMuY29uZmlnLmNvbnRyb2xzKSkge1xuICAgICAgICB0aGlzLmNvbmZpZy5jb250cm9scyA9IHRoaXMuY29uZmlnLmNvbnRyb2xzLmNhbGwodGhpcywgcHJvcHMpO1xuICAgICAgfSAvLyBDb252ZXJ0IGZhbHN5IGNvbnRyb2xzIHRvIGVtcHR5IGFycmF5IChwcmltYXJpbHkgZm9yIGVtcHR5IHN0cmluZ3MpXG5cblxuICAgICAgaWYgKCF0aGlzLmNvbmZpZy5jb250cm9scykge1xuICAgICAgICB0aGlzLmNvbmZpZy5jb250cm9scyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXMkMS5lbGVtZW50KHRoaXMuY29uZmlnLmNvbnRyb2xzKSB8fCBpcyQxLnN0cmluZyh0aGlzLmNvbmZpZy5jb250cm9scykpIHtcbiAgICAgICAgLy8gSFRNTEVsZW1lbnQgb3IgTm9uLWVtcHR5IHN0cmluZyBwYXNzZWQgYXMgdGhlIG9wdGlvblxuICAgICAgICBjb250YWluZXIgPSB0aGlzLmNvbmZpZy5jb250cm9scztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENyZWF0ZSBjb250cm9sc1xuICAgICAgICBjb250YWluZXIgPSBjb250cm9scy5jcmVhdGUuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgc2Vla3RpbWU6IHRoaXMuY29uZmlnLnNlZWtUaW1lLFxuICAgICAgICAgIHNwZWVkOiB0aGlzLnNwZWVkLFxuICAgICAgICAgIHF1YWxpdHk6IHRoaXMucXVhbGl0eSxcbiAgICAgICAgICBjYXB0aW9uczogY2FwdGlvbnMuZ2V0TGFiZWwuY2FsbCh0aGlzKSAvLyBUT0RPOiBMb29waW5nXG4gICAgICAgICAgLy8gbG9vcDogJ05vbmUnLFxuXG4gICAgICAgIH0pO1xuICAgICAgICB1cGRhdGUgPSBmYWxzZTtcbiAgICAgIH0gLy8gUmVwbGFjZSBwcm9wcyB3aXRoIHRoZWlyIHZhbHVlXG5cblxuICAgICAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKGlucHV0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBpbnB1dDtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocHJvcHMpLmZvckVhY2goZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICAgICAgdmFyIF9yZWYzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjIsIDIpLFxuICAgICAgICAgICAgICBrZXkgPSBfcmVmM1swXSxcbiAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmM1sxXTtcblxuICAgICAgICAgIHJlc3VsdCA9IHJlcGxhY2VBbGwocmVzdWx0LCBcIntcIi5jb25jYXQoa2V5LCBcIn1cIiksIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9OyAvLyBVcGRhdGUgbWFya3VwXG5cblxuICAgICAgaWYgKHVwZGF0ZSkge1xuICAgICAgICBpZiAoaXMkMS5zdHJpbmcodGhpcy5jb25maWcuY29udHJvbHMpKSB7XG4gICAgICAgICAgY29udGFpbmVyID0gcmVwbGFjZShjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICB9IC8vIENvbnRyb2xzIGNvbnRhaW5lclxuXG5cbiAgICAgIHZhciB0YXJnZXQ7IC8vIEluamVjdCB0byBjdXN0b20gbG9jYXRpb25cblxuICAgICAgaWYgKGlzJDEuc3RyaW5nKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy5jb250YWluZXIpKSB7XG4gICAgICAgIHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmNvbnRyb2xzLmNvbnRhaW5lcik7XG4gICAgICB9IC8vIEluamVjdCBpbnRvIHRoZSBjb250YWluZXIgYnkgZGVmYXVsdFxuXG5cbiAgICAgIGlmICghaXMkMS5lbGVtZW50KHRhcmdldCkpIHtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG4gICAgICB9IC8vIEluamVjdCBjb250cm9scyBIVE1MIChuZWVkcyB0byBiZSBiZWZvcmUgY2FwdGlvbnMsIGhlbmNlIFwiYWZ0ZXJiZWdpblwiKVxuXG5cbiAgICAgIHZhciBpbnNlcnRNZXRob2QgPSBpcyQxLmVsZW1lbnQoY29udGFpbmVyKSA/ICdpbnNlcnRBZGphY2VudEVsZW1lbnQnIDogJ2luc2VydEFkamFjZW50SFRNTCc7XG4gICAgICB0YXJnZXRbaW5zZXJ0TWV0aG9kXSgnYWZ0ZXJiZWdpbicsIGNvbnRhaW5lcik7IC8vIEZpbmQgdGhlIGVsZW1lbnRzIGlmIG5lZWQgYmVcblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQodGhpcy5lbGVtZW50cy5jb250cm9scykpIHtcbiAgICAgICAgY29udHJvbHMuZmluZEVsZW1lbnRzLmNhbGwodGhpcyk7XG4gICAgICB9IC8vIEFkZCBwcmVzc2VkIHByb3BlcnR5IHRvIGJ1dHRvbnNcblxuXG4gICAgICBpZiAoIWlzJDEuZW1wdHkodGhpcy5lbGVtZW50cy5idXR0b25zKSkge1xuICAgICAgICB2YXIgYWRkUHJvcGVydHkgPSBmdW5jdGlvbiBhZGRQcm9wZXJ0eShidXR0b24pIHtcbiAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gX3RoaXMxMS5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sUHJlc3NlZDtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYnV0dG9uLCAncHJlc3NlZCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhc0NsYXNzKGJ1dHRvbiwgY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHtcbiAgICAgICAgICAgICAgdmFyIHByZXNzZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhidXR0b24sIGNsYXNzTmFtZSwgcHJlc3NlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07IC8vIFRvZ2dsZSBjbGFzc25hbWUgd2hlbiBwcmVzc2VkIHByb3BlcnR5IGlzIHNldFxuXG5cbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMpLmZpbHRlcihCb29sZWFuKS5mb3JFYWNoKGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgICBpZiAoaXMkMS5hcnJheShidXR0b24pIHx8IGlzJDEubm9kZUxpc3QoYnV0dG9uKSkge1xuICAgICAgICAgICAgQXJyYXkuZnJvbShidXR0b24pLmZpbHRlcihCb29sZWFuKS5mb3JFYWNoKGFkZFByb3BlcnR5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWRkUHJvcGVydHkoYnV0dG9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBFZGdlIHNvbWV0aW1lcyBkb2Vzbid0IGZpbmlzaCB0aGUgcGFpbnQgc28gZm9yY2UgYSByZXBhaW50XG5cblxuICAgICAgaWYgKGJyb3dzZXIuaXNFZGdlKSB7XG4gICAgICAgIHJlcGFpbnQodGFyZ2V0KTtcbiAgICAgIH0gLy8gU2V0dXAgdG9vbHRpcHNcblxuXG4gICAgICBpZiAodGhpcy5jb25maWcudG9vbHRpcHMuY29udHJvbHMpIHtcbiAgICAgICAgdmFyIF90aGlzJGNvbmZpZyA9IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgY2xhc3NOYW1lcyA9IF90aGlzJGNvbmZpZy5jbGFzc05hbWVzLFxuICAgICAgICAgICAgc2VsZWN0b3JzID0gX3RoaXMkY29uZmlnLnNlbGVjdG9ycztcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gXCJcIi5jb25jYXQoc2VsZWN0b3JzLmNvbnRyb2xzLndyYXBwZXIsIFwiIFwiKS5jb25jYXQoc2VsZWN0b3JzLmxhYmVscywgXCIgLlwiKS5jb25jYXQoY2xhc3NOYW1lcy5oaWRkZW4pO1xuICAgICAgICB2YXIgbGFiZWxzID0gZ2V0RWxlbWVudHMuY2FsbCh0aGlzLCBzZWxlY3Rvcik7XG4gICAgICAgIEFycmF5LmZyb20obGFiZWxzKS5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkge1xuICAgICAgICAgIHRvZ2dsZUNsYXNzKGxhYmVsLCBfdGhpczExLmNvbmZpZy5jbGFzc05hbWVzLmhpZGRlbiwgZmFsc2UpO1xuICAgICAgICAgIHRvZ2dsZUNsYXNzKGxhYmVsLCBfdGhpczExLmNvbmZpZy5jbGFzc05hbWVzLnRvb2x0aXAsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnNlIGEgc3RyaW5nIHRvIGEgVVJMIG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgLSB0aGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNhZmUgLSBmYWlsc2FmZSBwYXJzaW5nXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHBhcnNlVXJsKGlucHV0KSB7XG4gICAgdmFyIHNhZmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7XG4gICAgdmFyIHVybCA9IGlucHV0O1xuXG4gICAgaWYgKHNhZmUpIHtcbiAgICAgIHZhciBwYXJzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBwYXJzZXIuaHJlZiA9IHVybDtcbiAgICAgIHVybCA9IHBhcnNlci5ocmVmO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbmV3IFVSTCh1cmwpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSAvLyBDb252ZXJ0IG9iamVjdCB0byBVUkxTZWFyY2hQYXJhbXNcblxuICBmdW5jdGlvbiBidWlsZFVybFBhcmFtcyhpbnB1dCkge1xuICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cbiAgICBpZiAoaXMkMS5vYmplY3QoaW5wdXQpKSB7XG4gICAgICBPYmplY3QuZW50cmllcyhpbnB1dCkuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSxcbiAgICAgICAgICAgIGtleSA9IF9yZWYyWzBdLFxuICAgICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTtcblxuICAgICAgICBwYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIHZhciBjYXB0aW9ucyA9IHtcbiAgICAvLyBTZXR1cCBjYXB0aW9uc1xuICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgIC8vIFJlcXVpcmVzIFVJIHN1cHBvcnRcbiAgICAgIGlmICghdGhpcy5zdXBwb3J0ZWQudWkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBPbmx5IFZpbWVvIGFuZCBIVE1MNSB2aWRlbyBzdXBwb3J0ZWQgYXQgdGhpcyBwb2ludFxuXG5cbiAgICAgIGlmICghdGhpcy5pc1ZpZGVvIHx8IHRoaXMuaXNZb3VUdWJlIHx8IHRoaXMuaXNIVE1MNSAmJiAhc3VwcG9ydC50ZXh0VHJhY2tzKSB7XG4gICAgICAgIC8vIENsZWFyIG1lbnUgYW5kIGhpZGVcbiAgICAgICAgaWYgKGlzJDEuYXJyYXkodGhpcy5jb25maWcuY29udHJvbHMpICYmIHRoaXMuY29uZmlnLmNvbnRyb2xzLmluY2x1ZGVzKCdzZXR0aW5ncycpICYmIHRoaXMuY29uZmlnLnNldHRpbmdzLmluY2x1ZGVzKCdjYXB0aW9ucycpKSB7XG4gICAgICAgICAgY29udHJvbHMuc2V0Q2FwdGlvbnNNZW51LmNhbGwodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEluamVjdCB0aGUgY29udGFpbmVyXG5cblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQodGhpcy5lbGVtZW50cy5jYXB0aW9ucykpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5jYXB0aW9ucyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmNhcHRpb25zKSk7XG4gICAgICAgIGluc2VydEFmdGVyKHRoaXMuZWxlbWVudHMuY2FwdGlvbnMsIHRoaXMuZWxlbWVudHMud3JhcHBlcik7XG4gICAgICB9IC8vIEZpeCBJRSBjYXB0aW9ucyBpZiBDT1JTIGlzIHVzZWRcbiAgICAgIC8vIEZldGNoIGNhcHRpb25zIGFuZCBpbmplY3QgYXMgYmxvYnMgaW5zdGVhZCAoZGF0YSBVUklzIG5vdCBzdXBwb3J0ZWQhKVxuXG5cbiAgICAgIGlmIChicm93c2VyLmlzSUUgJiYgd2luZG93LlVSTCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLm1lZGlhLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyYWNrJyk7XG4gICAgICAgIEFycmF5LmZyb20oZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgdmFyIHNyYyA9IHRyYWNrLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICAgICAgdmFyIHVybCA9IHBhcnNlVXJsKHNyYyk7XG5cbiAgICAgICAgICBpZiAodXJsICE9PSBudWxsICYmIHVybC5ob3N0bmFtZSAhPT0gd2luZG93LmxvY2F0aW9uLmhyZWYuaG9zdG5hbWUgJiYgWydodHRwOicsICdodHRwczonXS5pbmNsdWRlcyh1cmwucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICBmZXRjaChzcmMsICdibG9iJykudGhlbihmdW5jdGlvbiAoYmxvYikge1xuICAgICAgICAgICAgICB0cmFjay5zZXRBdHRyaWJ1dGUoJ3NyYycsIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudCh0cmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBHZXQgYW5kIHNldCBpbml0aWFsIGRhdGFcbiAgICAgIC8vIFRoZSBcInByZWZlcnJlZFwiIG9wdGlvbnMgYXJlIG5vdCByZWFsaXplZCB1bmxlc3MgLyB1bnRpbCB0aGUgd2FudGVkIGxhbmd1YWdlIGhhcyBhIG1hdGNoXG4gICAgICAvLyAqIGxhbmd1YWdlczogQXJyYXkgb2YgdXNlcidzIGJyb3dzZXIgbGFuZ3VhZ2VzLlxuICAgICAgLy8gKiBsYW5ndWFnZTogIFRoZSBsYW5ndWFnZSBwcmVmZXJyZWQgYnkgdXNlciBzZXR0aW5ncyBvciBjb25maWdcbiAgICAgIC8vICogYWN0aXZlOiAgICBUaGUgc3RhdGUgcHJlZmVycmVkIGJ5IHVzZXIgc2V0dGluZ3Mgb3IgY29uZmlnXG4gICAgICAvLyAqIHRvZ2dsZWQ6ICAgVGhlIHJlYWwgY2FwdGlvbnMgc3RhdGVcblxuXG4gICAgICB2YXIgYnJvd3Nlckxhbmd1YWdlcyA9IG5hdmlnYXRvci5sYW5ndWFnZXMgfHwgW25hdmlnYXRvci5sYW5ndWFnZSB8fCBuYXZpZ2F0b3IudXNlckxhbmd1YWdlIHx8ICdlbiddO1xuICAgICAgdmFyIGxhbmd1YWdlcyA9IGRlZHVwZShicm93c2VyTGFuZ3VhZ2VzLm1hcChmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcbiAgICAgICAgcmV0dXJuIGxhbmd1YWdlLnNwbGl0KCctJylbMF07XG4gICAgICB9KSk7XG4gICAgICB2YXIgbGFuZ3VhZ2UgPSAodGhpcy5zdG9yYWdlLmdldCgnbGFuZ3VhZ2UnKSB8fCB0aGlzLmNvbmZpZy5jYXB0aW9ucy5sYW5ndWFnZSB8fCAnYXV0bycpLnRvTG93ZXJDYXNlKCk7IC8vIFVzZSBmaXJzdCBicm93c2VyIGxhbmd1YWdlIHdoZW4gbGFuZ3VhZ2UgaXMgJ2F1dG8nXG5cbiAgICAgIGlmIChsYW5ndWFnZSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgIHZhciBfbGFuZ3VhZ2VzID0gX3NsaWNlZFRvQXJyYXkobGFuZ3VhZ2VzLCAxKTtcblxuICAgICAgICBsYW5ndWFnZSA9IF9sYW5ndWFnZXNbMF07XG4gICAgICB9XG5cbiAgICAgIHZhciBhY3RpdmUgPSB0aGlzLnN0b3JhZ2UuZ2V0KCdjYXB0aW9ucycpO1xuXG4gICAgICBpZiAoIWlzJDEuYm9vbGVhbihhY3RpdmUpKSB7XG4gICAgICAgIGFjdGl2ZSA9IHRoaXMuY29uZmlnLmNhcHRpb25zLmFjdGl2ZTtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNhcHRpb25zLCB7XG4gICAgICAgIHRvZ2dsZWQ6IGZhbHNlLFxuICAgICAgICBhY3RpdmU6IGFjdGl2ZSxcbiAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlLFxuICAgICAgICBsYW5ndWFnZXM6IGxhbmd1YWdlc1xuICAgICAgfSk7IC8vIFdhdGNoIGNoYW5nZXMgdG8gdGV4dFRyYWNrcyBhbmQgdXBkYXRlIGNhcHRpb25zIG1lbnVcblxuICAgICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgICB2YXIgdHJhY2tFdmVudHMgPSB0aGlzLmNvbmZpZy5jYXB0aW9ucy51cGRhdGUgPyAnYWRkdHJhY2sgcmVtb3ZldHJhY2snIDogJ3JlbW92ZXRyYWNrJztcbiAgICAgICAgb24uY2FsbCh0aGlzLCB0aGlzLm1lZGlhLnRleHRUcmFja3MsIHRyYWNrRXZlbnRzLCBjYXB0aW9ucy51cGRhdGUuYmluZCh0aGlzKSk7XG4gICAgICB9IC8vIFVwZGF0ZSBhdmFpbGFibGUgbGFuZ3VhZ2VzIGluIGxpc3QgbmV4dCB0aWNrICh0aGUgZXZlbnQgbXVzdCBub3QgYmUgdHJpZ2dlcmVkIGJlZm9yZSB0aGUgbGlzdGVuZXJzKVxuXG5cbiAgICAgIHNldFRpbWVvdXQoY2FwdGlvbnMudXBkYXRlLmJpbmQodGhpcyksIDApO1xuICAgIH0sXG4gICAgLy8gVXBkYXRlIGF2YWlsYWJsZSBsYW5ndWFnZSBvcHRpb25zIGluIHNldHRpbmdzIGJhc2VkIG9uIHRyYWNrc1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIHRyYWNrcyA9IGNhcHRpb25zLmdldFRyYWNrcy5jYWxsKHRoaXMsIHRydWUpOyAvLyBHZXQgdGhlIHdhbnRlZCBsYW5ndWFnZVxuXG4gICAgICB2YXIgX3RoaXMkY2FwdGlvbnMgPSB0aGlzLmNhcHRpb25zLFxuICAgICAgICAgIGFjdGl2ZSA9IF90aGlzJGNhcHRpb25zLmFjdGl2ZSxcbiAgICAgICAgICBsYW5ndWFnZSA9IF90aGlzJGNhcHRpb25zLmxhbmd1YWdlLFxuICAgICAgICAgIG1ldGEgPSBfdGhpcyRjYXB0aW9ucy5tZXRhLFxuICAgICAgICAgIGN1cnJlbnRUcmFja05vZGUgPSBfdGhpcyRjYXB0aW9ucy5jdXJyZW50VHJhY2tOb2RlO1xuICAgICAgdmFyIGxhbmd1YWdlRXhpc3RzID0gQm9vbGVhbih0cmFja3MuZmluZChmdW5jdGlvbiAodHJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRyYWNrLmxhbmd1YWdlID09PSBsYW5ndWFnZTtcbiAgICAgIH0pKTsgLy8gSGFuZGxlIHRyYWNrcyAoYWRkIGV2ZW50IGxpc3RlbmVyIGFuZCBcInBzZXVkb1wiLWRlZmF1bHQpXG5cbiAgICAgIGlmICh0aGlzLmlzSFRNTDUgJiYgdGhpcy5pc1ZpZGVvKSB7XG4gICAgICAgIHRyYWNrcy5maWx0ZXIoZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgcmV0dXJuICFtZXRhLmdldCh0cmFjayk7XG4gICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgX3RoaXMuZGVidWcubG9nKCdUcmFjayBhZGRlZCcsIHRyYWNrKTsgLy8gQXR0ZW1wdCB0byBzdG9yZSBpZiB0aGUgb3JpZ2luYWwgZG9tIGVsZW1lbnQgd2FzIFwiZGVmYXVsdFwiXG5cblxuICAgICAgICAgIG1ldGEuc2V0KHRyYWNrLCB7XG4gICAgICAgICAgICBkZWZhdWx0OiB0cmFjay5tb2RlID09PSAnc2hvd2luZydcbiAgICAgICAgICB9KTsgLy8gVHVybiBvZmYgbmF0aXZlIGNhcHRpb24gcmVuZGVyaW5nIHRvIGF2b2lkIGRvdWJsZSBjYXB0aW9uc1xuICAgICAgICAgIC8vIE5vdGU6IG1vZGU9J2hpZGRlbicgZm9yY2VzIGEgdHJhY2sgdG8gZG93bmxvYWQuIFRvIGVuc3VyZSBldmVyeSB0cmFja1xuICAgICAgICAgIC8vIGlzbid0IGRvd25sb2FkZWQgYXQgb25jZSwgb25seSAnc2hvd2luZycgdHJhY2tzIHNob3VsZCBiZSByZWFzc2lnbmVkXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG5cbiAgICAgICAgICBpZiAodHJhY2subW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIHRyYWNrLm1vZGUgPSAnaGlkZGVuJztcbiAgICAgICAgICB9IC8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3IgY3VlIGNoYW5nZXNcblxuXG4gICAgICAgICAgb24uY2FsbChfdGhpcywgdHJhY2ssICdjdWVjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FwdGlvbnMudXBkYXRlQ3Vlcy5jYWxsKF90aGlzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIFVwZGF0ZSBsYW5ndWFnZSBmaXJzdCB0aW1lIGl0IG1hdGNoZXMsIG9yIGlmIHRoZSBwcmV2aW91cyBtYXRjaGluZyB0cmFjayB3YXMgcmVtb3ZlZFxuXG5cbiAgICAgIGlmIChsYW5ndWFnZUV4aXN0cyAmJiB0aGlzLmxhbmd1YWdlICE9PSBsYW5ndWFnZSB8fCAhdHJhY2tzLmluY2x1ZGVzKGN1cnJlbnRUcmFja05vZGUpKSB7XG4gICAgICAgIGNhcHRpb25zLnNldExhbmd1YWdlLmNhbGwodGhpcywgbGFuZ3VhZ2UpO1xuICAgICAgICBjYXB0aW9ucy50b2dnbGUuY2FsbCh0aGlzLCBhY3RpdmUgJiYgbGFuZ3VhZ2VFeGlzdHMpO1xuICAgICAgfSAvLyBFbmFibGUgb3IgZGlzYWJsZSBjYXB0aW9ucyBiYXNlZCBvbiB0cmFjayBsZW5ndGhcblxuXG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jYXB0aW9ucy5lbmFibGVkLCAhaXMkMS5lbXB0eSh0cmFja3MpKTsgLy8gVXBkYXRlIGF2YWlsYWJsZSBsYW5ndWFnZXMgaW4gbGlzdFxuXG4gICAgICBpZiAoaXMkMS5hcnJheSh0aGlzLmNvbmZpZy5jb250cm9scykgJiYgdGhpcy5jb25maWcuY29udHJvbHMuaW5jbHVkZXMoJ3NldHRpbmdzJykgJiYgdGhpcy5jb25maWcuc2V0dGluZ3MuaW5jbHVkZXMoJ2NhcHRpb25zJykpIHtcbiAgICAgICAgY29udHJvbHMuc2V0Q2FwdGlvbnNNZW51LmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBUb2dnbGUgY2FwdGlvbnMgZGlzcGxheVxuICAgIC8vIFVzZWQgaW50ZXJuYWxseSBmb3IgdGhlIHRvZ2dsZUNhcHRpb25zIG1ldGhvZCwgd2l0aCB0aGUgcGFzc2l2ZSBvcHRpb24gZm9yY2VkIHRvIGZhbHNlXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoaW5wdXQpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgcGFzc2l2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTtcblxuICAgICAgLy8gSWYgdGhlcmUncyBubyBmdWxsIHN1cHBvcnRcbiAgICAgIGlmICghdGhpcy5zdXBwb3J0ZWQudWkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG9nZ2xlZCA9IHRoaXMuY2FwdGlvbnMudG9nZ2xlZDsgLy8gQ3VycmVudCBzdGF0ZVxuXG4gICAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNhcHRpb25zLmFjdGl2ZTsgLy8gR2V0IHRoZSBuZXh0IHN0YXRlXG4gICAgICAvLyBJZiB0aGUgbWV0aG9kIGlzIGNhbGxlZCB3aXRob3V0IHBhcmFtZXRlciwgdG9nZ2xlIGJhc2VkIG9uIGN1cnJlbnQgdmFsdWVcblxuICAgICAgdmFyIGFjdGl2ZSA9IGlzJDEubnVsbE9yVW5kZWZpbmVkKGlucHV0KSA/ICF0b2dnbGVkIDogaW5wdXQ7IC8vIFVwZGF0ZSBzdGF0ZSBhbmQgdHJpZ2dlciBldmVudFxuXG4gICAgICBpZiAoYWN0aXZlICE9PSB0b2dnbGVkKSB7XG4gICAgICAgIC8vIFdoZW4gcGFzc2l2ZSwgZG9uJ3Qgb3ZlcnJpZGUgdXNlciBwcmVmZXJlbmNlc1xuICAgICAgICBpZiAoIXBhc3NpdmUpIHtcbiAgICAgICAgICB0aGlzLmNhcHRpb25zLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KHtcbiAgICAgICAgICAgIGNhcHRpb25zOiBhY3RpdmVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBGb3JjZSBsYW5ndWFnZSBpZiB0aGUgY2FsbCBpc24ndCBwYXNzaXZlIGFuZCB0aGVyZSBpcyBubyBtYXRjaGluZyBsYW5ndWFnZSB0byB0b2dnbGUgdG9cblxuXG4gICAgICAgIGlmICghdGhpcy5sYW5ndWFnZSAmJiBhY3RpdmUgJiYgIXBhc3NpdmUpIHtcbiAgICAgICAgICB2YXIgdHJhY2tzID0gY2FwdGlvbnMuZ2V0VHJhY2tzLmNhbGwodGhpcyk7XG4gICAgICAgICAgdmFyIHRyYWNrID0gY2FwdGlvbnMuZmluZFRyYWNrLmNhbGwodGhpcywgW3RoaXMuY2FwdGlvbnMubGFuZ3VhZ2VdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jYXB0aW9ucy5sYW5ndWFnZXMpKSwgdHJ1ZSk7IC8vIE92ZXJyaWRlIHVzZXIgcHJlZmVyZW5jZXMgdG8gYXZvaWQgc3dpdGNoaW5nIGxhbmd1YWdlcyBpZiBhIG1hdGNoaW5nIHRyYWNrIGlzIGFkZGVkXG5cbiAgICAgICAgICB0aGlzLmNhcHRpb25zLmxhbmd1YWdlID0gdHJhY2subGFuZ3VhZ2U7IC8vIFNldCBjYXB0aW9uLCBidXQgZG9uJ3Qgc3RvcmUgaW4gbG9jYWxTdG9yYWdlIGFzIHVzZXIgcHJlZmVyZW5jZVxuXG4gICAgICAgICAgY2FwdGlvbnMuc2V0LmNhbGwodGhpcywgdHJhY2tzLmluZGV4T2YodHJhY2spKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gVG9nZ2xlIGJ1dHRvbiBpZiBpdCdzIGVuYWJsZWRcblxuXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMuY2FwdGlvbnMpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMuY2FwdGlvbnMucHJlc3NlZCA9IGFjdGl2ZTtcbiAgICAgICAgfSAvLyBBZGQgY2xhc3MgaG9va1xuXG5cbiAgICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIGFjdGl2ZUNsYXNzLCBhY3RpdmUpO1xuICAgICAgICB0aGlzLmNhcHRpb25zLnRvZ2dsZWQgPSBhY3RpdmU7IC8vIFVwZGF0ZSBzZXR0aW5ncyBtZW51XG5cbiAgICAgICAgY29udHJvbHMudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsICdjYXB0aW9ucycpOyAvLyBUcmlnZ2VyIGV2ZW50IChub3QgdXNlZCBpbnRlcm5hbGx5KVxuXG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHRoaXMsIHRoaXMubWVkaWEsIGFjdGl2ZSA/ICdjYXB0aW9uc2VuYWJsZWQnIDogJ2NhcHRpb25zZGlzYWJsZWQnKTtcbiAgICAgIH0gLy8gV2FpdCBmb3IgdGhlIGNhbGwgc3RhY2sgdG8gY2xlYXIgYmVmb3JlIHNldHRpbmcgbW9kZT0naGlkZGVuJ1xuICAgICAgLy8gb24gdGhlIGFjdGl2ZSB0cmFjayAtIGZvcmNpbmcgdGhlIGJyb3dzZXIgdG8gZG93bmxvYWQgaXRcblxuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSAmJiBfdGhpczIuY2FwdGlvbnMudG9nZ2xlZCkge1xuICAgICAgICAgIF90aGlzMi5jYXB0aW9ucy5jdXJyZW50VHJhY2tOb2RlLm1vZGUgPSAnaGlkZGVuJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBTZXQgY2FwdGlvbnMgYnkgdHJhY2sgaW5kZXhcbiAgICAvLyBVc2VkIGludGVybmFsbHkgZm9yIHRoZSBjdXJyZW50VHJhY2sgc2V0dGVyIHdpdGggdGhlIHBhc3NpdmUgb3B0aW9uIGZvcmNlZCB0byBmYWxzZVxuICAgIHNldDogZnVuY3Rpb24gc2V0KGluZGV4KSB7XG4gICAgICB2YXIgcGFzc2l2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTtcbiAgICAgIHZhciB0cmFja3MgPSBjYXB0aW9ucy5nZXRUcmFja3MuY2FsbCh0aGlzKTsgLy8gRGlzYWJsZSBjYXB0aW9ucyBpZiBzZXR0aW5nIHRvIC0xXG5cbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgY2FwdGlvbnMudG9nZ2xlLmNhbGwodGhpcywgZmFsc2UsIHBhc3NpdmUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghaXMkMS5udW1iZXIoaW5kZXgpKSB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybignSW52YWxpZCBjYXB0aW9uIGFyZ3VtZW50JywgaW5kZXgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghKGluZGV4IGluIHRyYWNrcykpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdUcmFjayBub3QgZm91bmQnLCBpbmRleCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY2FwdGlvbnMuY3VycmVudFRyYWNrICE9PSBpbmRleCkge1xuICAgICAgICB0aGlzLmNhcHRpb25zLmN1cnJlbnRUcmFjayA9IGluZGV4O1xuICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaW5kZXhdO1xuXG4gICAgICAgIHZhciBfcmVmID0gdHJhY2sgfHwge30sXG4gICAgICAgICAgICBsYW5ndWFnZSA9IF9yZWYubGFuZ3VhZ2U7IC8vIFN0b3JlIHJlZmVyZW5jZSB0byBub2RlIGZvciBpbnZhbGlkYXRpb24gb24gcmVtb3ZlXG5cblxuICAgICAgICB0aGlzLmNhcHRpb25zLmN1cnJlbnRUcmFja05vZGUgPSB0cmFjazsgLy8gVXBkYXRlIHNldHRpbmdzIG1lbnVcblxuICAgICAgICBjb250cm9scy51cGRhdGVTZXR0aW5nLmNhbGwodGhpcywgJ2NhcHRpb25zJyk7IC8vIFdoZW4gcGFzc2l2ZSwgZG9uJ3Qgb3ZlcnJpZGUgdXNlciBwcmVmZXJlbmNlc1xuXG4gICAgICAgIGlmICghcGFzc2l2ZSkge1xuICAgICAgICAgIHRoaXMuY2FwdGlvbnMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KHtcbiAgICAgICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IC8vIEhhbmRsZSBWaW1lbyBjYXB0aW9uc1xuXG5cbiAgICAgICAgaWYgKHRoaXMuaXNWaW1lbykge1xuICAgICAgICAgIHRoaXMuZW1iZWQuZW5hYmxlVGV4dFRyYWNrKGxhbmd1YWdlKTtcbiAgICAgICAgfSAvLyBUcmlnZ2VyIGV2ZW50XG5cblxuICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbCh0aGlzLCB0aGlzLm1lZGlhLCAnbGFuZ3VhZ2VjaGFuZ2UnKTtcbiAgICAgIH0gLy8gU2hvdyBjYXB0aW9uc1xuXG5cbiAgICAgIGNhcHRpb25zLnRvZ2dsZS5jYWxsKHRoaXMsIHRydWUsIHBhc3NpdmUpO1xuXG4gICAgICBpZiAodGhpcy5pc0hUTUw1ICYmIHRoaXMuaXNWaWRlbykge1xuICAgICAgICAvLyBJZiB3ZSBjaGFuZ2UgdGhlIGFjdGl2ZSB0cmFjayB3aGlsZSBhIGN1ZSBpcyBhbHJlYWR5IGRpc3BsYXllZCB3ZSBuZWVkIHRvIHVwZGF0ZSBpdFxuICAgICAgICBjYXB0aW9ucy51cGRhdGVDdWVzLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBTZXQgY2FwdGlvbnMgYnkgbGFuZ3VhZ2VcbiAgICAvLyBVc2VkIGludGVybmFsbHkgZm9yIHRoZSBsYW5ndWFnZSBzZXR0ZXIgd2l0aCB0aGUgcGFzc2l2ZSBvcHRpb24gZm9yY2VkIHRvIGZhbHNlXG4gICAgc2V0TGFuZ3VhZ2U6IGZ1bmN0aW9uIHNldExhbmd1YWdlKGlucHV0KSB7XG4gICAgICB2YXIgcGFzc2l2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTtcblxuICAgICAgaWYgKCFpcyQxLnN0cmluZyhpbnB1dCkpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdJbnZhbGlkIGxhbmd1YWdlIGFyZ3VtZW50JywgaW5wdXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIE5vcm1hbGl6ZVxuXG5cbiAgICAgIHZhciBsYW5ndWFnZSA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLmNhcHRpb25zLmxhbmd1YWdlID0gbGFuZ3VhZ2U7IC8vIFNldCBjdXJyZW50VHJhY2tcblxuICAgICAgdmFyIHRyYWNrcyA9IGNhcHRpb25zLmdldFRyYWNrcy5jYWxsKHRoaXMpO1xuICAgICAgdmFyIHRyYWNrID0gY2FwdGlvbnMuZmluZFRyYWNrLmNhbGwodGhpcywgW2xhbmd1YWdlXSk7XG4gICAgICBjYXB0aW9ucy5zZXQuY2FsbCh0aGlzLCB0cmFja3MuaW5kZXhPZih0cmFjayksIHBhc3NpdmUpO1xuICAgIH0sXG4gICAgLy8gR2V0IGN1cnJlbnQgdmFsaWQgY2FwdGlvbiB0cmFja3NcbiAgICAvLyBJZiB1cGRhdGUgaXMgZmFsc2UgaXQgd2lsbCBhbHNvIGlnbm9yZSB0cmFja3Mgd2l0aG91dCBtZXRhZGF0YVxuICAgIC8vIFRoaXMgaXMgdXNlZCB0byBcImZyZWV6ZVwiIHRoZSBsYW5ndWFnZSBvcHRpb25zIHdoZW4gY2FwdGlvbnMudXBkYXRlIGlzIGZhbHNlXG4gICAgZ2V0VHJhY2tzOiBmdW5jdGlvbiBnZXRUcmFja3MoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHVwZGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgICAvLyBIYW5kbGUgbWVkaWEgb3IgdGV4dFRyYWNrcyBtaXNzaW5nIG9yIG51bGxcbiAgICAgIHZhciB0cmFja3MgPSBBcnJheS5mcm9tKCh0aGlzLm1lZGlhIHx8IHt9KS50ZXh0VHJhY2tzIHx8IFtdKTsgLy8gRm9yIEhUTUw1LCB1c2UgY2FjaGUgaW5zdGVhZCBvZiBjdXJyZW50IHRyYWNrcyB3aGVuIGl0IGV4aXN0cyAoaWYgY2FwdGlvbnMudXBkYXRlIGlzIGZhbHNlKVxuICAgICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHRyYWNrcyBhbmQgdHJhY2tzIHRoYXQgYXJlbid0IGNhcHRpb25zL3N1YnRpdGxlcyAoZm9yIGV4YW1wbGUgbWV0YWRhdGEpXG5cbiAgICAgIHJldHVybiB0cmFja3MuZmlsdGVyKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgICByZXR1cm4gIV90aGlzMy5pc0hUTUw1IHx8IHVwZGF0ZSB8fCBfdGhpczMuY2FwdGlvbnMubWV0YS5oYXModHJhY2spO1xuICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgICByZXR1cm4gWydjYXB0aW9ucycsICdzdWJ0aXRsZXMnXS5pbmNsdWRlcyh0cmFjay5raW5kKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gTWF0Y2ggdHJhY2tzIGJhc2VkIG9uIGxhbmd1YWdlcyBhbmQgZ2V0IHRoZSBmaXJzdFxuICAgIGZpbmRUcmFjazogZnVuY3Rpb24gZmluZFRyYWNrKGxhbmd1YWdlcykge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBmb3JjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG4gICAgICB2YXIgdHJhY2tzID0gY2FwdGlvbnMuZ2V0VHJhY2tzLmNhbGwodGhpcyk7XG5cbiAgICAgIHZhciBzb3J0SXNEZWZhdWx0ID0gZnVuY3Rpb24gc29ydElzRGVmYXVsdCh0cmFjaykge1xuICAgICAgICByZXR1cm4gTnVtYmVyKChfdGhpczQuY2FwdGlvbnMubWV0YS5nZXQodHJhY2spIHx8IHt9KS5kZWZhdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBzb3J0ZWQgPSBBcnJheS5mcm9tKHRyYWNrcykuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gc29ydElzRGVmYXVsdChiKSAtIHNvcnRJc0RlZmF1bHQoYSk7XG4gICAgICB9KTtcbiAgICAgIHZhciB0cmFjaztcbiAgICAgIGxhbmd1YWdlcy5ldmVyeShmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcbiAgICAgICAgdHJhY2sgPSBzb3J0ZWQuZmluZChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB0Lmxhbmd1YWdlID09PSBsYW5ndWFnZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhdHJhY2s7IC8vIEJyZWFrIGl0ZXJhdGlvbiBpZiB0aGVyZSBpcyBhIG1hdGNoXG4gICAgICB9KTsgLy8gSWYgbm8gbWF0Y2ggaXMgZm91bmQgYnV0IGlzIHJlcXVpcmVkLCBnZXQgZmlyc3RcblxuICAgICAgcmV0dXJuIHRyYWNrIHx8IChmb3JjZSA/IHNvcnRlZFswXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdHJhY2tcbiAgICBnZXRDdXJyZW50VHJhY2s6IGZ1bmN0aW9uIGdldEN1cnJlbnRUcmFjaygpIHtcbiAgICAgIHJldHVybiBjYXB0aW9ucy5nZXRUcmFja3MuY2FsbCh0aGlzKVt0aGlzLmN1cnJlbnRUcmFja107XG4gICAgfSxcbiAgICAvLyBHZXQgVUkgbGFiZWwgZm9yIHRyYWNrXG4gICAgZ2V0TGFiZWw6IGZ1bmN0aW9uIGdldExhYmVsKHRyYWNrKSB7XG4gICAgICB2YXIgY3VycmVudFRyYWNrID0gdHJhY2s7XG5cbiAgICAgIGlmICghaXMkMS50cmFjayhjdXJyZW50VHJhY2spICYmIHN1cHBvcnQudGV4dFRyYWNrcyAmJiB0aGlzLmNhcHRpb25zLnRvZ2dsZWQpIHtcbiAgICAgICAgY3VycmVudFRyYWNrID0gY2FwdGlvbnMuZ2V0Q3VycmVudFRyYWNrLmNhbGwodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpcyQxLnRyYWNrKGN1cnJlbnRUcmFjaykpIHtcbiAgICAgICAgaWYgKCFpcyQxLmVtcHR5KGN1cnJlbnRUcmFjay5sYWJlbCkpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudFRyYWNrLmxhYmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpcyQxLmVtcHR5KGN1cnJlbnRUcmFjay5sYW5ndWFnZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhY2subGFuZ3VhZ2UudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpMThuLmdldCgnZW5hYmxlZCcsIHRoaXMuY29uZmlnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGkxOG4uZ2V0KCdkaXNhYmxlZCcsIHRoaXMuY29uZmlnKTtcbiAgICB9LFxuICAgIC8vIFVwZGF0ZSBjYXB0aW9ucyB1c2luZyBjdXJyZW50IHRyYWNrJ3MgYWN0aXZlIGN1ZXNcbiAgICAvLyBBbHNvIG9wdGlvbmFsIGFycmF5IGFyZ3VtZW50IGluIGNhc2UgdGhlcmUgaXNuJ3QgYW55IHRyYWNrIChleDogdmltZW8pXG4gICAgdXBkYXRlQ3VlczogZnVuY3Rpb24gdXBkYXRlQ3VlcyhpbnB1dCkge1xuICAgICAgLy8gUmVxdWlyZXMgVUlcbiAgICAgIGlmICghdGhpcy5zdXBwb3J0ZWQudWkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzJDEuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmNhcHRpb25zKSkge1xuICAgICAgICB0aGlzLmRlYnVnLndhcm4oJ05vIGNhcHRpb25zIGVsZW1lbnQgdG8gcmVuZGVyIHRvJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gT25seSBhY2NlcHQgYXJyYXkgb3IgZW1wdHkgaW5wdXRcblxuXG4gICAgICBpZiAoIWlzJDEubnVsbE9yVW5kZWZpbmVkKGlucHV0KSAmJiAhQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKCd1cGRhdGVDdWVzOiBJbnZhbGlkIGlucHV0JywgaW5wdXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjdWVzID0gaW5wdXQ7IC8vIEdldCBjdWVzIGZyb20gdHJhY2tcblxuICAgICAgaWYgKCFjdWVzKSB7XG4gICAgICAgIHZhciB0cmFjayA9IGNhcHRpb25zLmdldEN1cnJlbnRUcmFjay5jYWxsKHRoaXMpO1xuICAgICAgICBjdWVzID0gQXJyYXkuZnJvbSgodHJhY2sgfHwge30pLmFjdGl2ZUN1ZXMgfHwgW10pLm1hcChmdW5jdGlvbiAoY3VlKSB7XG4gICAgICAgICAgcmV0dXJuIGN1ZS5nZXRDdWVBc0hUTUwoKTtcbiAgICAgICAgfSkubWFwKGdldEhUTUwpO1xuICAgICAgfSAvLyBTZXQgbmV3IGNhcHRpb24gdGV4dFxuXG5cbiAgICAgIHZhciBjb250ZW50ID0gY3Vlcy5tYXAoZnVuY3Rpb24gKGN1ZVRleHQpIHtcbiAgICAgICAgcmV0dXJuIGN1ZVRleHQudHJpbSgpO1xuICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICB2YXIgY2hhbmdlZCA9IGNvbnRlbnQgIT09IHRoaXMuZWxlbWVudHMuY2FwdGlvbnMuaW5uZXJIVE1MO1xuXG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAvLyBFbXB0eSB0aGUgY29udGFpbmVyIGFuZCBjcmVhdGUgYSBuZXcgY2hpbGQgZWxlbWVudFxuICAgICAgICBlbXB0eUVsZW1lbnQodGhpcy5lbGVtZW50cy5jYXB0aW9ucyk7XG4gICAgICAgIHZhciBjYXB0aW9uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmNhcHRpb24pKTtcbiAgICAgICAgY2FwdGlvbi5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmNhcHRpb25zLmFwcGVuZENoaWxkKGNhcHRpb24pOyAvLyBUcmlnZ2VyIGV2ZW50XG5cbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcywgdGhpcy5tZWRpYSwgJ2N1ZWNoYW5nZScpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBQbHlyIGRlZmF1bHQgY29uZmlnXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIHZhciBkZWZhdWx0cyQxID0ge1xuICAgIC8vIERpc2FibGVcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIC8vIEN1c3RvbSBtZWRpYSB0aXRsZVxuICAgIHRpdGxlOiAnJyxcbiAgICAvLyBMb2dnaW5nIHRvIGNvbnNvbGVcbiAgICBkZWJ1ZzogZmFsc2UsXG4gICAgLy8gQXV0byBwbGF5IChpZiBzdXBwb3J0ZWQpXG4gICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgIC8vIE9ubHkgYWxsb3cgb25lIG1lZGlhIHBsYXlpbmcgYXQgb25jZSAodmltZW8gb25seSlcbiAgICBhdXRvcGF1c2U6IHRydWUsXG4gICAgLy8gQWxsb3cgaW5saW5lIHBsYXliYWNrIG9uIGlPUyAodGhpcyBlZmZlY3RzIFlvdVR1YmUvVmltZW8gLSBIVE1MNSByZXF1aXJlcyB0aGUgYXR0cmlidXRlIHByZXNlbnQpXG4gICAgLy8gVE9ETzogUmVtb3ZlIGlvc05hdGl2ZSBmdWxsc2NyZWVuIG9wdGlvbiBpbiBmYXZvdXIgb2YgdGhpcyAobG9naWMgbmVlZHMgd29yaylcbiAgICBwbGF5c2lubGluZTogdHJ1ZSxcbiAgICAvLyBEZWZhdWx0IHRpbWUgdG8gc2tpcCB3aGVuIHJld2luZC9mYXN0IGZvcndhcmRcbiAgICBzZWVrVGltZTogMTAsXG4gICAgLy8gRGVmYXVsdCB2b2x1bWVcbiAgICB2b2x1bWU6IDEsXG4gICAgbXV0ZWQ6IGZhbHNlLFxuICAgIC8vIFBhc3MgYSBjdXN0b20gZHVyYXRpb25cbiAgICBkdXJhdGlvbjogbnVsbCxcbiAgICAvLyBEaXNwbGF5IHRoZSBtZWRpYSBkdXJhdGlvbiBvbiBsb2FkIGluIHRoZSBjdXJyZW50IHRpbWUgcG9zaXRpb25cbiAgICAvLyBJZiB5b3UgaGF2ZSBvcHRlZCB0byBkaXNwbGF5IGJvdGggZHVyYXRpb24gYW5kIGN1cnJlbnRUaW1lLCB0aGlzIGlzIGlnbm9yZWRcbiAgICBkaXNwbGF5RHVyYXRpb246IHRydWUsXG4gICAgLy8gSW52ZXJ0IHRoZSBjdXJyZW50IHRpbWUgdG8gYmUgYSBjb3VudGRvd25cbiAgICBpbnZlcnRUaW1lOiB0cnVlLFxuICAgIC8vIENsaWNraW5nIHRoZSBjdXJyZW50VGltZSBpbnZlcnRzIGl0J3MgdmFsdWUgdG8gc2hvdyB0aW1lIGxlZnQgcmF0aGVyIHRoYW4gZWxhcHNlZFxuICAgIHRvZ2dsZUludmVydDogdHJ1ZSxcbiAgICAvLyBGb3JjZSBhbiBhc3BlY3QgcmF0aW9cbiAgICAvLyBUaGUgZm9ybWF0IG11c3QgYmUgYCd3OmgnYCAoZS5nLiBgJzE2OjknYClcbiAgICByYXRpbzogbnVsbCxcbiAgICAvLyBDbGljayB2aWRlbyBjb250YWluZXIgdG8gcGxheS9wYXVzZVxuICAgIGNsaWNrVG9QbGF5OiB0cnVlLFxuICAgIC8vIEF1dG8gaGlkZSB0aGUgY29udHJvbHNcbiAgICBoaWRlQ29udHJvbHM6IHRydWUsXG4gICAgLy8gUmVzZXQgdG8gc3RhcnQgd2hlbiBwbGF5YmFjayBlbmRlZFxuICAgIHJlc2V0T25FbmQ6IGZhbHNlLFxuICAgIC8vIERpc2FibGUgdGhlIHN0YW5kYXJkIGNvbnRleHQgbWVudVxuICAgIGRpc2FibGVDb250ZXh0TWVudTogdHJ1ZSxcbiAgICAvLyBTcHJpdGUgKGZvciBpY29ucylcbiAgICBsb2FkU3ByaXRlOiB0cnVlLFxuICAgIGljb25QcmVmaXg6ICdwbHlyJyxcbiAgICBpY29uVXJsOiAnaHR0cHM6Ly9jZG4ucGx5ci5pby8zLjYuMi9wbHlyLnN2ZycsXG4gICAgLy8gQmxhbmsgdmlkZW8gKHVzZWQgdG8gcHJldmVudCBlcnJvcnMgb24gc291cmNlIGNoYW5nZSlcbiAgICBibGFua1ZpZGVvOiAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvYmxhbmsubXA0JyxcbiAgICAvLyBRdWFsaXR5IGRlZmF1bHRcbiAgICBxdWFsaXR5OiB7XG4gICAgICBkZWZhdWx0OiA1NzYsXG4gICAgICAvLyBUaGUgb3B0aW9ucyB0byBkaXNwbGF5IGluIHRoZSBVSSwgaWYgYXZhaWxhYmxlIGZvciB0aGUgc291cmNlIG1lZGlhXG4gICAgICBvcHRpb25zOiBbNDMyMCwgMjg4MCwgMjE2MCwgMTQ0MCwgMTA4MCwgNzIwLCA1NzYsIDQ4MCwgMzYwLCAyNDBdLFxuICAgICAgZm9yY2VkOiBmYWxzZSxcbiAgICAgIG9uQ2hhbmdlOiBudWxsXG4gICAgfSxcbiAgICAvLyBTZXQgbG9vcHNcbiAgICBsb29wOiB7XG4gICAgICBhY3RpdmU6IGZhbHNlIC8vIHN0YXJ0OiBudWxsLFxuICAgICAgLy8gZW5kOiBudWxsLFxuXG4gICAgfSxcbiAgICAvLyBTcGVlZCBkZWZhdWx0IGFuZCBvcHRpb25zIHRvIGRpc3BsYXlcbiAgICBzcGVlZDoge1xuICAgICAgc2VsZWN0ZWQ6IDEsXG4gICAgICAvLyBUaGUgb3B0aW9ucyB0byBkaXNwbGF5IGluIHRoZSBVSSwgaWYgYXZhaWxhYmxlIGZvciB0aGUgc291cmNlIG1lZGlhIChlLmcuIFZpbWVvIGFuZCBZb3VUdWJlIG9ubHkgc3VwcG9ydCAwLjV4LTR4KVxuICAgICAgb3B0aW9uczogWzAuNSwgMC43NSwgMSwgMS4yNSwgMS41LCAxLjc1LCAyLCA0XVxuICAgIH0sXG4gICAgLy8gS2V5Ym9hcmQgc2hvcnRjdXQgc2V0dGluZ3NcbiAgICBrZXlib2FyZDoge1xuICAgICAgZm9jdXNlZDogdHJ1ZSxcbiAgICAgIGdsb2JhbDogZmFsc2VcbiAgICB9LFxuICAgIC8vIERpc3BsYXkgdG9vbHRpcHNcbiAgICB0b29sdGlwczoge1xuICAgICAgY29udHJvbHM6IGZhbHNlLFxuICAgICAgc2VlazogdHJ1ZVxuICAgIH0sXG4gICAgLy8gQ2FwdGlvbnMgc2V0dGluZ3NcbiAgICBjYXB0aW9uczoge1xuICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgIGxhbmd1YWdlOiAnYXV0bycsXG4gICAgICAvLyBMaXN0ZW4gdG8gbmV3IHRyYWNrcyBhZGRlZCBhZnRlciBQbHlyIGlzIGluaXRpYWxpemVkLlxuICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIHN0cmVhbWluZyBjYXB0aW9ucywgYnV0IG1heSByZXN1bHQgaW4gdW5zZWxlY3RhYmxlIG9wdGlvbnNcbiAgICAgIHVwZGF0ZTogZmFsc2VcbiAgICB9LFxuICAgIC8vIEZ1bGxzY3JlZW4gc2V0dGluZ3NcbiAgICBmdWxsc2NyZWVuOiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgLy8gQWxsb3cgZnVsbHNjcmVlbj9cbiAgICAgIGZhbGxiYWNrOiB0cnVlLFxuICAgICAgLy8gRmFsbGJhY2sgdXNpbmcgZnVsbCB2aWV3cG9ydC93aW5kb3dcbiAgICAgIGlvc05hdGl2ZTogZmFsc2UgLy8gVXNlIHRoZSBuYXRpdmUgZnVsbHNjcmVlbiBpbiBpT1MgKGRpc2FibGVzIGN1c3RvbSBjb250cm9scylcbiAgICAgIC8vIFNlbGVjdG9yIGZvciB0aGUgZnVsbHNjcmVlbiBjb250YWluZXIgc28gY29udGV4dHVhbCAvIG5vbi1wbGF5ZXIgY29udGVudCBjYW4gcmVtYWluIHZpc2libGUgaW4gZnVsbHNjcmVlbiBtb2RlXG4gICAgICAvLyBOb24tYW5jZXN0b3JzIG9mIHRoZSBwbGF5ZXIgZWxlbWVudCB3aWxsIGJlIGlnbm9yZWRcbiAgICAgIC8vIGNvbnRhaW5lcjogbnVsbCwgLy8gZGVmYXVsdHMgdG8gdGhlIHBsYXllciBlbGVtZW50XG5cbiAgICB9LFxuICAgIC8vIExvY2FsIHN0b3JhZ2VcbiAgICBzdG9yYWdlOiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAga2V5OiAncGx5cidcbiAgICB9LFxuICAgIC8vIERlZmF1bHQgY29udHJvbHNcbiAgICBjb250cm9sczogWydwbGF5LWxhcmdlJywgLy8gJ3Jlc3RhcnQnLFxuICAgIC8vICdyZXdpbmQnLFxuICAgICdwbGF5JywgLy8gJ2Zhc3QtZm9yd2FyZCcsXG4gICAgJ3Byb2dyZXNzJywgJ2N1cnJlbnQtdGltZScsIC8vICdkdXJhdGlvbicsXG4gICAgJ211dGUnLCAndm9sdW1lJywgJ2NhcHRpb25zJywgJ3NldHRpbmdzJywgJ3BpcCcsICdhaXJwbGF5JywgLy8gJ2Rvd25sb2FkJyxcbiAgICAnZnVsbHNjcmVlbiddLFxuICAgIHNldHRpbmdzOiBbJ2NhcHRpb25zJywgJ3F1YWxpdHknLCAnc3BlZWQnXSxcbiAgICAvLyBMb2NhbGlzYXRpb25cbiAgICBpMThuOiB7XG4gICAgICByZXN0YXJ0OiAnUmVzdGFydCcsXG4gICAgICByZXdpbmQ6ICdSZXdpbmQge3NlZWt0aW1lfXMnLFxuICAgICAgcGxheTogJ1BsYXknLFxuICAgICAgcGF1c2U6ICdQYXVzZScsXG4gICAgICBmYXN0Rm9yd2FyZDogJ0ZvcndhcmQge3NlZWt0aW1lfXMnLFxuICAgICAgc2VlazogJ1NlZWsnLFxuICAgICAgc2Vla0xhYmVsOiAne2N1cnJlbnRUaW1lfSBvZiB7ZHVyYXRpb259JyxcbiAgICAgIHBsYXllZDogJ1BsYXllZCcsXG4gICAgICBidWZmZXJlZDogJ0J1ZmZlcmVkJyxcbiAgICAgIGN1cnJlbnRUaW1lOiAnQ3VycmVudCB0aW1lJyxcbiAgICAgIGR1cmF0aW9uOiAnRHVyYXRpb24nLFxuICAgICAgdm9sdW1lOiAnVm9sdW1lJyxcbiAgICAgIG11dGU6ICdNdXRlJyxcbiAgICAgIHVubXV0ZTogJ1VubXV0ZScsXG4gICAgICBlbmFibGVDYXB0aW9uczogJ0VuYWJsZSBjYXB0aW9ucycsXG4gICAgICBkaXNhYmxlQ2FwdGlvbnM6ICdEaXNhYmxlIGNhcHRpb25zJyxcbiAgICAgIGRvd25sb2FkOiAnRG93bmxvYWQnLFxuICAgICAgZW50ZXJGdWxsc2NyZWVuOiAnRW50ZXIgZnVsbHNjcmVlbicsXG4gICAgICBleGl0RnVsbHNjcmVlbjogJ0V4aXQgZnVsbHNjcmVlbicsXG4gICAgICBmcmFtZVRpdGxlOiAnUGxheWVyIGZvciB7dGl0bGV9JyxcbiAgICAgIGNhcHRpb25zOiAnQ2FwdGlvbnMnLFxuICAgICAgc2V0dGluZ3M6ICdTZXR0aW5ncycsXG4gICAgICBwaXA6ICdQSVAnLFxuICAgICAgbWVudUJhY2s6ICdHbyBiYWNrIHRvIHByZXZpb3VzIG1lbnUnLFxuICAgICAgc3BlZWQ6ICdTcGVlZCcsXG4gICAgICBub3JtYWw6ICdOb3JtYWwnLFxuICAgICAgcXVhbGl0eTogJ1F1YWxpdHknLFxuICAgICAgbG9vcDogJ0xvb3AnLFxuICAgICAgc3RhcnQ6ICdTdGFydCcsXG4gICAgICBlbmQ6ICdFbmQnLFxuICAgICAgYWxsOiAnQWxsJyxcbiAgICAgIHJlc2V0OiAnUmVzZXQnLFxuICAgICAgZGlzYWJsZWQ6ICdEaXNhYmxlZCcsXG4gICAgICBlbmFibGVkOiAnRW5hYmxlZCcsXG4gICAgICBhZHZlcnRpc2VtZW50OiAnQWQnLFxuICAgICAgcXVhbGl0eUJhZGdlOiB7XG4gICAgICAgIDIxNjA6ICc0SycsXG4gICAgICAgIDE0NDA6ICdIRCcsXG4gICAgICAgIDEwODA6ICdIRCcsXG4gICAgICAgIDcyMDogJ0hEJyxcbiAgICAgICAgNTc2OiAnU0QnLFxuICAgICAgICA0ODA6ICdTRCdcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFVSTHNcbiAgICB1cmxzOiB7XG4gICAgICBkb3dubG9hZDogbnVsbCxcbiAgICAgIHZpbWVvOiB7XG4gICAgICAgIHNkazogJ2h0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS9hcGkvcGxheWVyLmpzJyxcbiAgICAgICAgaWZyYW1lOiAnaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvL3swfT97MX0nLFxuICAgICAgICBhcGk6ICdodHRwczovL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vezB9Lmpzb24nXG4gICAgICB9LFxuICAgICAgeW91dHViZToge1xuICAgICAgICBzZGs6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpJyxcbiAgICAgICAgYXBpOiAnaHR0cHM6Ly9ub2VtYmVkLmNvbS9lbWJlZD91cmw9aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj17MH0nXG4gICAgICB9LFxuICAgICAgZ29vZ2xlSU1BOiB7XG4gICAgICAgIHNkazogJ2h0dHBzOi8vaW1hc2RrLmdvb2dsZWFwaXMuY29tL2pzL3Nka2xvYWRlci9pbWEzLmpzJ1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gQ3VzdG9tIGNvbnRyb2wgbGlzdGVuZXJzXG4gICAgbGlzdGVuZXJzOiB7XG4gICAgICBzZWVrOiBudWxsLFxuICAgICAgcGxheTogbnVsbCxcbiAgICAgIHBhdXNlOiBudWxsLFxuICAgICAgcmVzdGFydDogbnVsbCxcbiAgICAgIHJld2luZDogbnVsbCxcbiAgICAgIGZhc3RGb3J3YXJkOiBudWxsLFxuICAgICAgbXV0ZTogbnVsbCxcbiAgICAgIHZvbHVtZTogbnVsbCxcbiAgICAgIGNhcHRpb25zOiBudWxsLFxuICAgICAgZG93bmxvYWQ6IG51bGwsXG4gICAgICBmdWxsc2NyZWVuOiBudWxsLFxuICAgICAgcGlwOiBudWxsLFxuICAgICAgYWlycGxheTogbnVsbCxcbiAgICAgIHNwZWVkOiBudWxsLFxuICAgICAgcXVhbGl0eTogbnVsbCxcbiAgICAgIGxvb3A6IG51bGwsXG4gICAgICBsYW5ndWFnZTogbnVsbFxuICAgIH0sXG4gICAgLy8gRXZlbnRzIHRvIHdhdGNoIGFuZCBidWJibGVcbiAgICBldmVudHM6IFsvLyBFdmVudHMgdG8gd2F0Y2ggb24gSFRNTDUgbWVkaWEgZWxlbWVudHMgYW5kIGJ1YmJsZVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0d1aWRlL0V2ZW50cy9NZWRpYV9ldmVudHNcbiAgICAnZW5kZWQnLCAncHJvZ3Jlc3MnLCAnc3RhbGxlZCcsICdwbGF5aW5nJywgJ3dhaXRpbmcnLCAnY2FucGxheScsICdjYW5wbGF5dGhyb3VnaCcsICdsb2Fkc3RhcnQnLCAnbG9hZGVkZGF0YScsICdsb2FkZWRtZXRhZGF0YScsICd0aW1ldXBkYXRlJywgJ3ZvbHVtZWNoYW5nZScsICdwbGF5JywgJ3BhdXNlJywgJ2Vycm9yJywgJ3NlZWtpbmcnLCAnc2Vla2VkJywgJ2VtcHRpZWQnLCAncmF0ZWNoYW5nZScsICdjdWVjaGFuZ2UnLCAvLyBDdXN0b20gZXZlbnRzXG4gICAgJ2Rvd25sb2FkJywgJ2VudGVyZnVsbHNjcmVlbicsICdleGl0ZnVsbHNjcmVlbicsICdjYXB0aW9uc2VuYWJsZWQnLCAnY2FwdGlvbnNkaXNhYmxlZCcsICdsYW5ndWFnZWNoYW5nZScsICdjb250cm9sc2hpZGRlbicsICdjb250cm9sc3Nob3duJywgJ3JlYWR5JywgLy8gWW91VHViZVxuICAgICdzdGF0ZWNoYW5nZScsIC8vIFF1YWxpdHlcbiAgICAncXVhbGl0eWNoYW5nZScsIC8vIEFkc1xuICAgICdhZHNsb2FkZWQnLCAnYWRzY29udGVudHBhdXNlJywgJ2Fkc2NvbnRlbnRyZXN1bWUnLCAnYWRzdGFydGVkJywgJ2Fkc21pZHBvaW50JywgJ2Fkc2NvbXBsZXRlJywgJ2Fkc2FsbGNvbXBsZXRlJywgJ2Fkc2ltcHJlc3Npb24nLCAnYWRzY2xpY2snXSxcbiAgICAvLyBTZWxlY3RvcnNcbiAgICAvLyBDaGFuZ2UgdGhlc2UgdG8gbWF0Y2ggeW91ciB0ZW1wbGF0ZSBpZiB1c2luZyBjdXN0b20gSFRNTFxuICAgIHNlbGVjdG9yczoge1xuICAgICAgZWRpdGFibGU6ICdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgW2NvbnRlbnRlZGl0YWJsZV0nLFxuICAgICAgY29udGFpbmVyOiAnLnBseXInLFxuICAgICAgY29udHJvbHM6IHtcbiAgICAgICAgY29udGFpbmVyOiBudWxsLFxuICAgICAgICB3cmFwcGVyOiAnLnBseXJfX2NvbnRyb2xzJ1xuICAgICAgfSxcbiAgICAgIGxhYmVsczogJ1tkYXRhLXBseXJdJyxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgcGxheTogJ1tkYXRhLXBseXI9XCJwbGF5XCJdJyxcbiAgICAgICAgcGF1c2U6ICdbZGF0YS1wbHlyPVwicGF1c2VcIl0nLFxuICAgICAgICByZXN0YXJ0OiAnW2RhdGEtcGx5cj1cInJlc3RhcnRcIl0nLFxuICAgICAgICByZXdpbmQ6ICdbZGF0YS1wbHlyPVwicmV3aW5kXCJdJyxcbiAgICAgICAgZmFzdEZvcndhcmQ6ICdbZGF0YS1wbHlyPVwiZmFzdC1mb3J3YXJkXCJdJyxcbiAgICAgICAgbXV0ZTogJ1tkYXRhLXBseXI9XCJtdXRlXCJdJyxcbiAgICAgICAgY2FwdGlvbnM6ICdbZGF0YS1wbHlyPVwiY2FwdGlvbnNcIl0nLFxuICAgICAgICBkb3dubG9hZDogJ1tkYXRhLXBseXI9XCJkb3dubG9hZFwiXScsXG4gICAgICAgIGZ1bGxzY3JlZW46ICdbZGF0YS1wbHlyPVwiZnVsbHNjcmVlblwiXScsXG4gICAgICAgIHBpcDogJ1tkYXRhLXBseXI9XCJwaXBcIl0nLFxuICAgICAgICBhaXJwbGF5OiAnW2RhdGEtcGx5cj1cImFpcnBsYXlcIl0nLFxuICAgICAgICBzZXR0aW5nczogJ1tkYXRhLXBseXI9XCJzZXR0aW5nc1wiXScsXG4gICAgICAgIGxvb3A6ICdbZGF0YS1wbHlyPVwibG9vcFwiXSdcbiAgICAgIH0sXG4gICAgICBpbnB1dHM6IHtcbiAgICAgICAgc2VlazogJ1tkYXRhLXBseXI9XCJzZWVrXCJdJyxcbiAgICAgICAgdm9sdW1lOiAnW2RhdGEtcGx5cj1cInZvbHVtZVwiXScsXG4gICAgICAgIHNwZWVkOiAnW2RhdGEtcGx5cj1cInNwZWVkXCJdJyxcbiAgICAgICAgbGFuZ3VhZ2U6ICdbZGF0YS1wbHlyPVwibGFuZ3VhZ2VcIl0nLFxuICAgICAgICBxdWFsaXR5OiAnW2RhdGEtcGx5cj1cInF1YWxpdHlcIl0nXG4gICAgICB9LFxuICAgICAgZGlzcGxheToge1xuICAgICAgICBjdXJyZW50VGltZTogJy5wbHlyX190aW1lLS1jdXJyZW50JyxcbiAgICAgICAgZHVyYXRpb246ICcucGx5cl9fdGltZS0tZHVyYXRpb24nLFxuICAgICAgICBidWZmZXI6ICcucGx5cl9fcHJvZ3Jlc3NfX2J1ZmZlcicsXG4gICAgICAgIGxvb3A6ICcucGx5cl9fcHJvZ3Jlc3NfX2xvb3AnLFxuICAgICAgICAvLyBVc2VkIGxhdGVyXG4gICAgICAgIHZvbHVtZTogJy5wbHlyX192b2x1bWUtLWRpc3BsYXknXG4gICAgICB9LFxuICAgICAgcHJvZ3Jlc3M6ICcucGx5cl9fcHJvZ3Jlc3MnLFxuICAgICAgY2FwdGlvbnM6ICcucGx5cl9fY2FwdGlvbnMnLFxuICAgICAgY2FwdGlvbjogJy5wbHlyX19jYXB0aW9uJ1xuICAgIH0sXG4gICAgLy8gQ2xhc3MgaG9va3MgYWRkZWQgdG8gdGhlIHBsYXllciBpbiBkaWZmZXJlbnQgc3RhdGVzXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgdHlwZTogJ3BseXItLXswfScsXG4gICAgICBwcm92aWRlcjogJ3BseXItLXswfScsXG4gICAgICB2aWRlbzogJ3BseXJfX3ZpZGVvLXdyYXBwZXInLFxuICAgICAgZW1iZWQ6ICdwbHlyX192aWRlby1lbWJlZCcsXG4gICAgICB2aWRlb0ZpeGVkUmF0aW86ICdwbHlyX192aWRlby13cmFwcGVyLS1maXhlZC1yYXRpbycsXG4gICAgICBlbWJlZENvbnRhaW5lcjogJ3BseXJfX3ZpZGVvLWVtYmVkX19jb250YWluZXInLFxuICAgICAgcG9zdGVyOiAncGx5cl9fcG9zdGVyJyxcbiAgICAgIHBvc3RlckVuYWJsZWQ6ICdwbHlyX19wb3N0ZXItZW5hYmxlZCcsXG4gICAgICBhZHM6ICdwbHlyX19hZHMnLFxuICAgICAgY29udHJvbDogJ3BseXJfX2NvbnRyb2wnLFxuICAgICAgY29udHJvbFByZXNzZWQ6ICdwbHlyX19jb250cm9sLS1wcmVzc2VkJyxcbiAgICAgIHBsYXlpbmc6ICdwbHlyLS1wbGF5aW5nJyxcbiAgICAgIHBhdXNlZDogJ3BseXItLXBhdXNlZCcsXG4gICAgICBzdG9wcGVkOiAncGx5ci0tc3RvcHBlZCcsXG4gICAgICBsb2FkaW5nOiAncGx5ci0tbG9hZGluZycsXG4gICAgICBob3ZlcjogJ3BseXItLWhvdmVyJyxcbiAgICAgIHRvb2x0aXA6ICdwbHlyX190b29sdGlwJyxcbiAgICAgIGN1ZXM6ICdwbHlyX19jdWVzJyxcbiAgICAgIGhpZGRlbjogJ3BseXJfX3NyLW9ubHknLFxuICAgICAgaGlkZUNvbnRyb2xzOiAncGx5ci0taGlkZS1jb250cm9scycsXG4gICAgICBpc0lvczogJ3BseXItLWlzLWlvcycsXG4gICAgICBpc1RvdWNoOiAncGx5ci0taXMtdG91Y2gnLFxuICAgICAgdWlTdXBwb3J0ZWQ6ICdwbHlyLS1mdWxsLXVpJyxcbiAgICAgIG5vVHJhbnNpdGlvbjogJ3BseXItLW5vLXRyYW5zaXRpb24nLFxuICAgICAgZGlzcGxheToge1xuICAgICAgICB0aW1lOiAncGx5cl9fdGltZSdcbiAgICAgIH0sXG4gICAgICBtZW51OiB7XG4gICAgICAgIHZhbHVlOiAncGx5cl9fbWVudV9fdmFsdWUnLFxuICAgICAgICBiYWRnZTogJ3BseXJfX2JhZGdlJyxcbiAgICAgICAgb3BlbjogJ3BseXItLW1lbnUtb3BlbidcbiAgICAgIH0sXG4gICAgICBjYXB0aW9uczoge1xuICAgICAgICBlbmFibGVkOiAncGx5ci0tY2FwdGlvbnMtZW5hYmxlZCcsXG4gICAgICAgIGFjdGl2ZTogJ3BseXItLWNhcHRpb25zLWFjdGl2ZSdcbiAgICAgIH0sXG4gICAgICBmdWxsc2NyZWVuOiB7XG4gICAgICAgIGVuYWJsZWQ6ICdwbHlyLS1mdWxsc2NyZWVuLWVuYWJsZWQnLFxuICAgICAgICBmYWxsYmFjazogJ3BseXItLWZ1bGxzY3JlZW4tZmFsbGJhY2snXG4gICAgICB9LFxuICAgICAgcGlwOiB7XG4gICAgICAgIHN1cHBvcnRlZDogJ3BseXItLXBpcC1zdXBwb3J0ZWQnLFxuICAgICAgICBhY3RpdmU6ICdwbHlyLS1waXAtYWN0aXZlJ1xuICAgICAgfSxcbiAgICAgIGFpcnBsYXk6IHtcbiAgICAgICAgc3VwcG9ydGVkOiAncGx5ci0tYWlycGxheS1zdXBwb3J0ZWQnLFxuICAgICAgICBhY3RpdmU6ICdwbHlyLS1haXJwbGF5LWFjdGl2ZSdcbiAgICAgIH0sXG4gICAgICB0YWJGb2N1czogJ3BseXJfX3RhYi1mb2N1cycsXG4gICAgICBwcmV2aWV3VGh1bWJuYWlsczoge1xuICAgICAgICAvLyBUb29sdGlwIHRodW1ic1xuICAgICAgICB0aHVtYkNvbnRhaW5lcjogJ3BseXJfX3ByZXZpZXctdGh1bWInLFxuICAgICAgICB0aHVtYkNvbnRhaW5lclNob3duOiAncGx5cl9fcHJldmlldy10aHVtYi0taXMtc2hvd24nLFxuICAgICAgICBpbWFnZUNvbnRhaW5lcjogJ3BseXJfX3ByZXZpZXctdGh1bWJfX2ltYWdlLWNvbnRhaW5lcicsXG4gICAgICAgIHRpbWVDb250YWluZXI6ICdwbHlyX19wcmV2aWV3LXRodW1iX190aW1lLWNvbnRhaW5lcicsXG4gICAgICAgIC8vIFNjcnViYmluZ1xuICAgICAgICBzY3J1YmJpbmdDb250YWluZXI6ICdwbHlyX19wcmV2aWV3LXNjcnViYmluZycsXG4gICAgICAgIHNjcnViYmluZ0NvbnRhaW5lclNob3duOiAncGx5cl9fcHJldmlldy1zY3J1YmJpbmctLWlzLXNob3duJ1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gRW1iZWQgYXR0cmlidXRlc1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgIGVtYmVkOiB7XG4gICAgICAgIHByb3ZpZGVyOiAnZGF0YS1wbHlyLXByb3ZpZGVyJyxcbiAgICAgICAgaWQ6ICdkYXRhLXBseXItZW1iZWQtaWQnXG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBBZHZlcnRpc2VtZW50cyBwbHVnaW5cbiAgICAvLyBSZWdpc3RlciBmb3IgYW4gYWNjb3VudCBoZXJlOiBodHRwOi8vdmkuYWkvcHVibGlzaGVyLXZpZGVvLW1vbmV0aXphdGlvbi8/YWlkPXBseXJpb1xuICAgIGFkczoge1xuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBwdWJsaXNoZXJJZDogJycsXG4gICAgICB0YWdVcmw6ICcnXG4gICAgfSxcbiAgICAvLyBQcmV2aWV3IFRodW1ibmFpbHMgcGx1Z2luXG4gICAgcHJldmlld1RodW1ibmFpbHM6IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgc3JjOiAnJ1xuICAgIH0sXG4gICAgLy8gVmltZW8gcGx1Z2luXG4gICAgdmltZW86IHtcbiAgICAgIGJ5bGluZTogZmFsc2UsXG4gICAgICBwb3J0cmFpdDogZmFsc2UsXG4gICAgICB0aXRsZTogZmFsc2UsXG4gICAgICBzcGVlZDogdHJ1ZSxcbiAgICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcbiAgICAgIC8vIFdoZXRoZXIgdGhlIG93bmVyIG9mIHRoZSB2aWRlbyBoYXMgYSBQcm8gb3IgQnVzaW5lc3MgYWNjb3VudFxuICAgICAgLy8gKHdoaWNoIGFsbG93cyB1cyB0byBwcm9wZXJseSBoaWRlIGNvbnRyb2xzIHdpdGhvdXQgQ1NTIGhhY2tzLCBldGMpXG4gICAgICBwcmVtaXVtOiBmYWxzZSxcbiAgICAgIC8vIEN1c3RvbSBzZXR0aW5ncyBmcm9tIFBseXJcbiAgICAgIHJlZmVycmVyUG9saWN5OiBudWxsIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MSUZyYW1lRWxlbWVudC9yZWZlcnJlclBvbGljeVxuXG4gICAgfSxcbiAgICAvLyBZb3VUdWJlIHBsdWdpblxuICAgIHlvdXR1YmU6IHtcbiAgICAgIG5vQ29va2llOiB0cnVlLFxuICAgICAgLy8gV2hldGhlciB0byB1c2UgYW4gYWx0ZXJuYXRpdmUgdmVyc2lvbiBvZiBZb3VUdWJlIHdpdGhvdXQgY29va2llc1xuICAgICAgcmVsOiAwLFxuICAgICAgLy8gTm8gcmVsYXRlZCB2aWRzXG4gICAgICBzaG93aW5mbzogMCxcbiAgICAgIC8vIEhpZGUgaW5mb1xuICAgICAgaXZfbG9hZF9wb2xpY3k6IDMsXG4gICAgICAvLyBIaWRlIGFubm90YXRpb25zXG4gICAgICBtb2Rlc3RicmFuZGluZzogMSAvLyBIaWRlIGxvZ29zIGFzIG11Y2ggYXMgcG9zc2libGUgKHRoZXkgc3RpbGwgc2hvdyBvbmUgaW4gdGhlIGNvcm5lciB3aGVuIHBhdXNlZClcblxuICAgIH1cbiAgfTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBQbHlyIHN0YXRlc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICB2YXIgcGlwID0ge1xuICAgIGFjdGl2ZTogJ3BpY3R1cmUtaW4tcGljdHVyZScsXG4gICAgaW5hY3RpdmU6ICdpbmxpbmUnXG4gIH07XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gUGx5ciBzdXBwb3J0ZWQgdHlwZXMgYW5kIHByb3ZpZGVyc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICB2YXIgcHJvdmlkZXJzID0ge1xuICAgIGh0bWw1OiAnaHRtbDUnLFxuICAgIHlvdXR1YmU6ICd5b3V0dWJlJyxcbiAgICB2aW1lbzogJ3ZpbWVvJ1xuICB9O1xuICB2YXIgdHlwZXMgPSB7XG4gICAgYXVkaW86ICdhdWRpbycsXG4gICAgdmlkZW86ICd2aWRlbydcbiAgfTtcbiAgLyoqXG4gICAqIEdldCBwcm92aWRlciBieSBVUkxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRQcm92aWRlckJ5VXJsKHVybCkge1xuICAgIC8vIFlvdVR1YmVcbiAgICBpZiAoL14oaHR0cHM/OlxcL1xcLyk/KHd3d1xcLik/KHlvdXR1YmVcXC5jb218eW91dHViZS1ub2Nvb2tpZVxcLmNvbXx5b3V0dVxcLj9iZSlcXC8uKyQvLnRlc3QodXJsKSkge1xuICAgICAgcmV0dXJuIHByb3ZpZGVycy55b3V0dWJlO1xuICAgIH0gLy8gVmltZW9cblxuXG4gICAgaWYgKC9eaHR0cHM/OlxcL1xcL3BsYXllci52aW1lby5jb21cXC92aWRlb1xcL1xcZHswLDl9KD89XFxifFxcLykvLnRlc3QodXJsKSkge1xuICAgICAgcmV0dXJuIHByb3ZpZGVycy52aW1lbztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENvbnNvbGUgd3JhcHBlclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICB2YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuICB2YXIgQ29uc29sZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29uc29sZSgpIHtcbiAgICAgIHZhciBlbmFibGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnNvbGUpO1xuXG4gICAgICB0aGlzLmVuYWJsZWQgPSB3aW5kb3cuY29uc29sZSAmJiBlbmFibGVkO1xuXG4gICAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICAgIHRoaXMubG9nKCdEZWJ1Z2dpbmcgZW5hYmxlZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDb25zb2xlLCBbe1xuICAgICAga2V5OiBcImxvZ1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZWQgPyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlKSA6IG5vb3A7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIndhcm5cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkID8gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLndhcm4sIGNvbnNvbGUpIDogbm9vcDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZXJyb3JcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkID8gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLCBjb25zb2xlKSA6IG5vb3A7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbnNvbGU7XG4gIH0oKTtcblxuICB2YXIgRnVsbHNjcmVlbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRnVsbHNjcmVlbihwbGF5ZXIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGdWxsc2NyZWVuKTtcblxuICAgICAgLy8gS2VlcCByZWZlcmVuY2UgdG8gcGFyZW50XG4gICAgICB0aGlzLnBsYXllciA9IHBsYXllcjsgLy8gR2V0IHByZWZpeFxuXG4gICAgICB0aGlzLnByZWZpeCA9IEZ1bGxzY3JlZW4ucHJlZml4O1xuICAgICAgdGhpcy5wcm9wZXJ0eSA9IEZ1bGxzY3JlZW4ucHJvcGVydHk7IC8vIFNjcm9sbCBwb3NpdGlvblxuXG4gICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0ge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9OyAvLyBGb3JjZSB0aGUgdXNlIG9mICdmdWxsIHdpbmRvdy9icm93c2VyJyByYXRoZXIgdGhhbiBmdWxsc2NyZWVuXG5cbiAgICAgIHRoaXMuZm9yY2VGYWxsYmFjayA9IHBsYXllci5jb25maWcuZnVsbHNjcmVlbi5mYWxsYmFjayA9PT0gJ2ZvcmNlJzsgLy8gR2V0IHRoZSBmdWxsc2NyZWVuIGVsZW1lbnRcbiAgICAgIC8vIENoZWNrcyBjb250YWluZXIgaXMgYW4gYW5jZXN0b3IsIGRlZmF1bHRzIHRvIG51bGxcblxuICAgICAgdGhpcy5wbGF5ZXIuZWxlbWVudHMuZnVsbHNjcmVlbiA9IHBsYXllci5jb25maWcuZnVsbHNjcmVlbi5jb250YWluZXIgJiYgY2xvc2VzdCh0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsIHBsYXllci5jb25maWcuZnVsbHNjcmVlbi5jb250YWluZXIpOyAvLyBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnNcbiAgICAgIC8vIEhhbmRsZSBldmVudCAoaW5jYXNlIHVzZXIgcHJlc3NlcyBlc2NhcGUgZXRjKVxuXG4gICAgICBvbi5jYWxsKHRoaXMucGxheWVyLCBkb2N1bWVudCwgdGhpcy5wcmVmaXggPT09ICdtcycgPyAnTVNGdWxsc2NyZWVuQ2hhbmdlJyA6IFwiXCIuY29uY2F0KHRoaXMucHJlZml4LCBcImZ1bGxzY3JlZW5jaGFuZ2VcIiksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gVE9ETzogRmlsdGVyIGZvciB0YXJnZXQ/P1xuICAgICAgICBfdGhpcy5vbkNoYW5nZSgpO1xuICAgICAgfSk7IC8vIEZ1bGxzY3JlZW4gdG9nZ2xlIG9uIGRvdWJsZSBjbGlja1xuXG4gICAgICBvbi5jYWxsKHRoaXMucGxheWVyLCB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsICdkYmxjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBJZ25vcmUgZG91YmxlIGNsaWNrIGluIGNvbnRyb2xzXG4gICAgICAgIGlmIChpcyQxLmVsZW1lbnQoX3RoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRyb2xzKSAmJiBfdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udHJvbHMuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLnRvZ2dsZSgpO1xuICAgICAgfSk7IC8vIFRhcCBmb2N1cyB3aGVuIGluIGZ1bGxzY3JlZW5cblxuICAgICAgb24uY2FsbCh0aGlzLCB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsICdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy50cmFwRm9jdXMoZXZlbnQpO1xuICAgICAgfSk7IC8vIFVwZGF0ZSB0aGUgVUlcblxuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9IC8vIERldGVybWluZSBpZiBuYXRpdmUgc3VwcG9ydGVkXG5cblxuICAgIF9jcmVhdGVDbGFzcyhGdWxsc2NyZWVuLCBbe1xuICAgICAga2V5OiBcIm9uQ2hhbmdlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFVwZGF0ZSB0b2dnbGUgYnV0dG9uXG5cblxuICAgICAgICB2YXIgYnV0dG9uID0gdGhpcy5wbGF5ZXIuZWxlbWVudHMuYnV0dG9ucy5mdWxsc2NyZWVuO1xuXG4gICAgICAgIGlmIChpcyQxLmVsZW1lbnQoYnV0dG9uKSkge1xuICAgICAgICAgIGJ1dHRvbi5wcmVzc2VkID0gdGhpcy5hY3RpdmU7XG4gICAgICAgIH0gLy8gVHJpZ2dlciBhbiBldmVudFxuXG5cbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcy5wbGF5ZXIsIHRoaXMudGFyZ2V0LCB0aGlzLmFjdGl2ZSA/ICdlbnRlcmZ1bGxzY3JlZW4nIDogJ2V4aXRmdWxsc2NyZWVuJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInRvZ2dsZUZhbGxiYWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlRmFsbGJhY2soKSB7XG4gICAgICAgIHZhciB0b2dnbGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgICAgIC8vIFN0b3JlIG9yIHJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICAgIGlmICh0b2dnbGUpIHtcbiAgICAgICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0ge1xuICAgICAgICAgICAgeDogd2luZG93LnNjcm9sbFggfHwgMCxcbiAgICAgICAgICAgIHk6IHdpbmRvdy5zY3JvbGxZIHx8IDBcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh0aGlzLnNjcm9sbFBvc2l0aW9uLngsIHRoaXMuc2Nyb2xsUG9zaXRpb24ueSk7XG4gICAgICAgIH0gLy8gVG9nZ2xlIHNjcm9sbFxuXG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IHRvZ2dsZSA/ICdoaWRkZW4nIDogJyc7IC8vIFRvZ2dsZSBjbGFzcyBob29rXG5cbiAgICAgICAgdG9nZ2xlQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLmZ1bGxzY3JlZW4uZmFsbGJhY2ssIHRvZ2dsZSk7IC8vIEZvcmNlIGZ1bGwgdmlld3BvcnQgb24gaVBob25lIFgrXG5cbiAgICAgICAgaWYgKGJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICB2YXIgdmlld3BvcnQgPSBkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJyk7XG4gICAgICAgICAgdmFyIHByb3BlcnR5ID0gJ3ZpZXdwb3J0LWZpdD1jb3Zlcic7IC8vIEluamVjdCB0aGUgdmlld3BvcnQgbWV0YSBpZiByZXF1aXJlZFxuXG4gICAgICAgICAgaWYgKCF2aWV3cG9ydCkge1xuICAgICAgICAgICAgdmlld3BvcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7XG4gICAgICAgICAgICB2aWV3cG9ydC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndmlld3BvcnQnKTtcbiAgICAgICAgICB9IC8vIENoZWNrIGlmIHRoZSBwcm9wZXJ0eSBhbHJlYWR5IGV4aXN0c1xuXG5cbiAgICAgICAgICB2YXIgaGFzUHJvcGVydHkgPSBpcyQxLnN0cmluZyh2aWV3cG9ydC5jb250ZW50KSAmJiB2aWV3cG9ydC5jb250ZW50LmluY2x1ZGVzKHByb3BlcnR5KTtcblxuICAgICAgICAgIGlmICh0b2dnbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cFZpZXdwb3J0ID0gIWhhc1Byb3BlcnR5O1xuXG4gICAgICAgICAgICBpZiAoIWhhc1Byb3BlcnR5KSB7XG4gICAgICAgICAgICAgIHZpZXdwb3J0LmNvbnRlbnQgKz0gXCIsXCIuY29uY2F0KHByb3BlcnR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2xlYW51cFZpZXdwb3J0KSB7XG4gICAgICAgICAgICB2aWV3cG9ydC5jb250ZW50ID0gdmlld3BvcnQuY29udGVudC5zcGxpdCgnLCcpLmZpbHRlcihmdW5jdGlvbiAocGFydCkge1xuICAgICAgICAgICAgICByZXR1cm4gcGFydC50cmltKCkgIT09IHByb3BlcnR5O1xuICAgICAgICAgICAgfSkuam9pbignLCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBUb2dnbGUgYnV0dG9uIGFuZCBmaXJlIGV2ZW50c1xuXG5cbiAgICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgICAgfSAvLyBUcmFwIGZvY3VzIGluc2lkZSBjb250YWluZXJcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ0cmFwRm9jdXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFwRm9jdXMoZXZlbnQpIHtcbiAgICAgICAgLy8gQmFpbCBpZiBpT1MsIG5vdCBhY3RpdmUsIG5vdCB0aGUgdGFiIGtleVxuICAgICAgICBpZiAoYnJvd3Nlci5pc0lvcyB8fCAhdGhpcy5hY3RpdmUgfHwgZXZlbnQua2V5ICE9PSAnVGFiJyB8fCBldmVudC5rZXlDb2RlICE9PSA5KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIEdldCB0aGUgY3VycmVudCBmb2N1c2VkIGVsZW1lbnRcblxuXG4gICAgICAgIHZhciBmb2N1c2VkID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgdmFyIGZvY3VzYWJsZSA9IGdldEVsZW1lbnRzLmNhbGwodGhpcy5wbGF5ZXIsICdhW2hyZWZdLCBidXR0b246bm90KDpkaXNhYmxlZCksIGlucHV0Om5vdCg6ZGlzYWJsZWQpLCBbdGFiaW5kZXhdJyk7XG5cbiAgICAgICAgdmFyIF9mb2N1c2FibGUgPSBfc2xpY2VkVG9BcnJheShmb2N1c2FibGUsIDEpLFxuICAgICAgICAgICAgZmlyc3QgPSBfZm9jdXNhYmxlWzBdO1xuXG4gICAgICAgIHZhciBsYXN0ID0gZm9jdXNhYmxlW2ZvY3VzYWJsZS5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAoZm9jdXNlZCA9PT0gbGFzdCAmJiAhZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAvLyBNb3ZlIGZvY3VzIHRvIGZpcnN0IGVsZW1lbnQgdGhhdCBjYW4gYmUgdGFiYmVkIGlmIFNoaWZ0IGlzbid0IHVzZWRcbiAgICAgICAgICBmaXJzdC5mb2N1cygpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZm9jdXNlZCA9PT0gZmlyc3QgJiYgZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAvLyBNb3ZlIGZvY3VzIHRvIGxhc3QgZWxlbWVudCB0aGF0IGNhbiBiZSB0YWJiZWQgaWYgU2hpZnQgaXMgdXNlZFxuICAgICAgICAgIGxhc3QuZm9jdXMoKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9IC8vIFVwZGF0ZSBVSVxuXG4gICAgfSwge1xuICAgICAga2V5OiBcInVwZGF0ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHZhciBtb2RlO1xuXG4gICAgICAgICAgaWYgKHRoaXMuZm9yY2VGYWxsYmFjaykge1xuICAgICAgICAgICAgbW9kZSA9ICdGYWxsYmFjayAoZm9yY2VkKSc7XG4gICAgICAgICAgfSBlbHNlIGlmIChGdWxsc2NyZWVuLm5hdGl2ZSkge1xuICAgICAgICAgICAgbW9kZSA9ICdOYXRpdmUnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2RlID0gJ0ZhbGxiYWNrJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJcIi5jb25jYXQobW9kZSwgXCIgZnVsbHNjcmVlbiBlbmFibGVkXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coJ0Z1bGxzY3JlZW4gbm90IHN1cHBvcnRlZCBhbmQgZmFsbGJhY2sgZGlzYWJsZWQnKTtcbiAgICAgICAgfSAvLyBBZGQgc3R5bGluZyBob29rIHRvIHNob3cgYnV0dG9uXG5cblxuICAgICAgICB0b2dnbGVDbGFzcyh0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIsIHRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLmZ1bGxzY3JlZW4uZW5hYmxlZCwgdGhpcy5lbmFibGVkKTtcbiAgICAgIH0gLy8gTWFrZSBhbiBlbGVtZW50IGZ1bGxzY3JlZW5cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJlbnRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBpT1MgbmF0aXZlIGZ1bGxzY3JlZW4gZG9lc24ndCBuZWVkIHRoZSByZXF1ZXN0IHN0ZXBcblxuXG4gICAgICAgIGlmIChicm93c2VyLmlzSW9zICYmIHRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZSkge1xuICAgICAgICAgIHRoaXMudGFyZ2V0LndlYmtpdEVudGVyRnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKCFGdWxsc2NyZWVuLm5hdGl2ZSB8fCB0aGlzLmZvcmNlRmFsbGJhY2spIHtcbiAgICAgICAgICB0aGlzLnRvZ2dsZUZhbGxiYWNrKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnByZWZpeCkge1xuICAgICAgICAgIHRoaXMudGFyZ2V0LnJlcXVlc3RGdWxsc2NyZWVuKHtcbiAgICAgICAgICAgIG5hdmlnYXRpb25VSTogJ2hpZGUnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzJDEuZW1wdHkodGhpcy5wcmVmaXgpKSB7XG4gICAgICAgICAgdGhpcy50YXJnZXRbXCJcIi5jb25jYXQodGhpcy5wcmVmaXgsIFwiUmVxdWVzdFwiKS5jb25jYXQodGhpcy5wcm9wZXJ0eSldKCk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gQmFpbCBmcm9tIGZ1bGxzY3JlZW5cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJleGl0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZXhpdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gaU9TIG5hdGl2ZSBmdWxsc2NyZWVuXG5cblxuICAgICAgICBpZiAoYnJvd3Nlci5pc0lvcyAmJiB0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5pb3NOYXRpdmUpIHtcbiAgICAgICAgICB0aGlzLnRhcmdldC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xuICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHRoaXMucGxheWVyLnBsYXkoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIUZ1bGxzY3JlZW4ubmF0aXZlIHx8IHRoaXMuZm9yY2VGYWxsYmFjaykge1xuICAgICAgICAgIHRoaXMudG9nZ2xlRmFsbGJhY2soZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnByZWZpeCkge1xuICAgICAgICAgIChkb2N1bWVudC5jYW5jZWxGdWxsU2NyZWVuIHx8IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKS5jYWxsKGRvY3VtZW50KTtcbiAgICAgICAgfSBlbHNlIGlmICghaXMkMS5lbXB0eSh0aGlzLnByZWZpeCkpIHtcbiAgICAgICAgICB2YXIgYWN0aW9uID0gdGhpcy5wcmVmaXggPT09ICdtb3onID8gJ0NhbmNlbCcgOiAnRXhpdCc7XG4gICAgICAgICAgZG9jdW1lbnRbXCJcIi5jb25jYXQodGhpcy5wcmVmaXgpLmNvbmNhdChhY3Rpb24pLmNvbmNhdCh0aGlzLnByb3BlcnR5KV0oKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBUb2dnbGUgc3RhdGVcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ0b2dnbGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICB0aGlzLmVudGVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5leGl0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXNpbmdOYXRpdmVcIixcbiAgICAgIC8vIElmIHdlJ3JlIGFjdHVhbGx5IHVzaW5nIG5hdGl2ZVxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBGdWxsc2NyZWVuLm5hdGl2ZSAmJiAhdGhpcy5mb3JjZUZhbGxiYWNrO1xuICAgICAgfSAvLyBHZXQgdGhlIHByZWZpeCBmb3IgaGFuZGxlcnNcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJlbmFibGVkXCIsXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgZnVsbHNjcmVlbiBpcyBlbmFibGVkXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIChGdWxsc2NyZWVuLm5hdGl2ZSB8fCB0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5mYWxsYmFjaykgJiYgdGhpcy5wbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uZW5hYmxlZCAmJiB0aGlzLnBsYXllci5zdXBwb3J0ZWQudWkgJiYgdGhpcy5wbGF5ZXIuaXNWaWRlbztcbiAgICAgIH0gLy8gR2V0IGFjdGl2ZSBzdGF0ZVxuXG4gICAgfSwge1xuICAgICAga2V5OiBcImFjdGl2ZVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IC8vIEZhbGxiYWNrIHVzaW5nIGNsYXNzbmFtZVxuXG5cbiAgICAgICAgaWYgKCFGdWxsc2NyZWVuLm5hdGl2ZSB8fCB0aGlzLmZvcmNlRmFsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gaGFzQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLmZ1bGxzY3JlZW4uZmFsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVsZW1lbnQgPSAhdGhpcy5wcmVmaXggPyBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCA6IGRvY3VtZW50W1wiXCIuY29uY2F0KHRoaXMucHJlZml4KS5jb25jYXQodGhpcy5wcm9wZXJ0eSwgXCJFbGVtZW50XCIpXTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5zaGFkb3dSb290ID8gZWxlbWVudCA9PT0gdGhpcy50YXJnZXQuZ2V0Um9vdE5vZGUoKS5ob3N0IDogZWxlbWVudCA9PT0gdGhpcy50YXJnZXQ7XG4gICAgICB9IC8vIEdldCB0YXJnZXQgZWxlbWVudFxuXG4gICAgfSwge1xuICAgICAga2V5OiBcInRhcmdldFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBicm93c2VyLmlzSW9zICYmIHRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZSA/IHRoaXMucGxheWVyLm1lZGlhIDogdGhpcy5wbGF5ZXIuZWxlbWVudHMuZnVsbHNjcmVlbiB8fCB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXI7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwibmF0aXZlXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuICEhKGRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkIHx8IGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkIHx8IGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbmFibGVkIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVuYWJsZWQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwcmVmaXhcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAvLyBObyBwcmVmaXhcbiAgICAgICAgaWYgKGlzJDEuZnVuY3Rpb24oZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9IC8vIENoZWNrIGZvciBmdWxsc2NyZWVuIHN1cHBvcnQgYnkgdmVuZG9yIHByZWZpeFxuXG5cbiAgICAgICAgdmFyIHZhbHVlID0gJyc7XG4gICAgICAgIHZhciBwcmVmaXhlcyA9IFsnd2Via2l0JywgJ21veicsICdtcyddO1xuICAgICAgICBwcmVmaXhlcy5zb21lKGZ1bmN0aW9uIChwcmUpIHtcbiAgICAgICAgICBpZiAoaXMkMS5mdW5jdGlvbihkb2N1bWVudFtcIlwiLmNvbmNhdChwcmUsIFwiRXhpdEZ1bGxzY3JlZW5cIildKSB8fCBpcyQxLmZ1bmN0aW9uKGRvY3VtZW50W1wiXCIuY29uY2F0KHByZSwgXCJDYW5jZWxGdWxsU2NyZWVuXCIpXSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gcHJlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwcm9wZXJ0eVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZWZpeCA9PT0gJ21veicgPyAnRnVsbFNjcmVlbicgOiAnRnVsbHNjcmVlbic7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEZ1bGxzY3JlZW47XG4gIH0oKTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBMb2FkIGltYWdlIGF2b2lkaW5nIHhoci9mZXRjaCBDT1JTIGlzc3Vlc1xuICAvLyBTZXJ2ZXIgc3RhdHVzIGNhbid0IGJlIG9idGFpbmVkIHRoaXMgd2F5IHVuZm9ydHVuYXRlbHksIHNvIHRoaXMgdXNlcyBcIm5hdHVyYWxXaWR0aFwiIHRvIGRldGVybWluZSBpZiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuICAvLyBCeSBkZWZhdWx0IGl0IGNoZWNrcyBpZiBpdCBpcyBhdCBsZWFzdCAxcHgsIGJ1dCB5b3UgY2FuIGFkZCBhIHNlY29uZCBhcmd1bWVudCB0byBjaGFuZ2UgdGhpc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBmdW5jdGlvbiBsb2FkSW1hZ2Uoc3JjKSB7XG4gICAgdmFyIG1pbldpZHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblxuICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBkZWxldGUgaW1hZ2Uub25sb2FkO1xuICAgICAgICBkZWxldGUgaW1hZ2Uub25lcnJvcjtcbiAgICAgICAgKGltYWdlLm5hdHVyYWxXaWR0aCA+PSBtaW5XaWR0aCA/IHJlc29sdmUgOiByZWplY3QpKGltYWdlKTtcbiAgICAgIH07XG5cbiAgICAgIE9iamVjdC5hc3NpZ24oaW1hZ2UsIHtcbiAgICAgICAgb25sb2FkOiBoYW5kbGVyLFxuICAgICAgICBvbmVycm9yOiBoYW5kbGVyLFxuICAgICAgICBzcmM6IHNyY1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdWkgPSB7XG4gICAgYWRkU3R5bGVIb29rOiBmdW5jdGlvbiBhZGRTdHlsZUhvb2soKSB7XG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuc2VsZWN0b3JzLmNvbnRhaW5lci5yZXBsYWNlKCcuJywgJycpLCB0cnVlKTtcbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnVpU3VwcG9ydGVkLCB0aGlzLnN1cHBvcnRlZC51aSk7XG4gICAgfSxcbiAgICAvLyBUb2dnbGUgbmF0aXZlIEhUTUw1IG1lZGlhIGNvbnRyb2xzXG4gICAgdG9nZ2xlTmF0aXZlQ29udHJvbHM6IGZ1bmN0aW9uIHRvZ2dsZU5hdGl2ZUNvbnRyb2xzKCkge1xuICAgICAgdmFyIHRvZ2dsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cbiAgICAgIGlmICh0b2dnbGUgJiYgdGhpcy5pc0hUTUw1KSB7XG4gICAgICAgIHRoaXMubWVkaWEuc2V0QXR0cmlidXRlKCdjb250cm9scycsICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWVkaWEucmVtb3ZlQXR0cmlidXRlKCdjb250cm9scycpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gU2V0dXAgdGhlIFVJXG4gICAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgLy8gUmUtYXR0YWNoIG1lZGlhIGVsZW1lbnQgbGlzdGVuZXJzXG4gICAgICAvLyBUT0RPOiBVc2UgZXZlbnQgYnViYmxpbmc/XG4gICAgICB0aGlzLmxpc3RlbmVycy5tZWRpYSgpOyAvLyBEb24ndCBzZXR1cCBpbnRlcmZhY2UgaWYgbm8gc3VwcG9ydFxuXG4gICAgICBpZiAoIXRoaXMuc3VwcG9ydGVkLnVpKSB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybihcIkJhc2ljIHN1cHBvcnQgb25seSBmb3IgXCIuY29uY2F0KHRoaXMucHJvdmlkZXIsIFwiIFwiKS5jb25jYXQodGhpcy50eXBlKSk7IC8vIFJlc3RvcmUgbmF0aXZlIGNvbnRyb2xzXG5cbiAgICAgICAgdWkudG9nZ2xlTmF0aXZlQ29udHJvbHMuY2FsbCh0aGlzLCB0cnVlKTsgLy8gQmFpbFxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gSW5qZWN0IGN1c3RvbSBjb250cm9scyBpZiBub3QgcHJlc2VudFxuXG5cbiAgICAgIGlmICghaXMkMS5lbGVtZW50KHRoaXMuZWxlbWVudHMuY29udHJvbHMpKSB7XG4gICAgICAgIC8vIEluamVjdCBjdXN0b20gY29udHJvbHNcbiAgICAgICAgY29udHJvbHMuaW5qZWN0LmNhbGwodGhpcyk7IC8vIFJlLWF0dGFjaCBjb250cm9sIGxpc3RlbmVyc1xuXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmNvbnRyb2xzKCk7XG4gICAgICB9IC8vIFJlbW92ZSBuYXRpdmUgY29udHJvbHNcblxuXG4gICAgICB1aS50b2dnbGVOYXRpdmVDb250cm9scy5jYWxsKHRoaXMpOyAvLyBTZXR1cCBjYXB0aW9ucyBmb3IgSFRNTDVcblxuICAgICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgICBjYXB0aW9ucy5zZXR1cC5jYWxsKHRoaXMpO1xuICAgICAgfSAvLyBSZXNldCB2b2x1bWVcblxuXG4gICAgICB0aGlzLnZvbHVtZSA9IG51bGw7IC8vIFJlc2V0IG11dGUgc3RhdGVcblxuICAgICAgdGhpcy5tdXRlZCA9IG51bGw7IC8vIFJlc2V0IGxvb3Agc3RhdGVcblxuICAgICAgdGhpcy5sb29wID0gbnVsbDsgLy8gUmVzZXQgcXVhbGl0eSBzZXR0aW5nXG5cbiAgICAgIHRoaXMucXVhbGl0eSA9IG51bGw7IC8vIFJlc2V0IHNwZWVkXG5cbiAgICAgIHRoaXMuc3BlZWQgPSBudWxsOyAvLyBSZXNldCB2b2x1bWUgZGlzcGxheVxuXG4gICAgICBjb250cm9scy51cGRhdGVWb2x1bWUuY2FsbCh0aGlzKTsgLy8gUmVzZXQgdGltZSBkaXNwbGF5XG5cbiAgICAgIGNvbnRyb2xzLnRpbWVVcGRhdGUuY2FsbCh0aGlzKTsgLy8gVXBkYXRlIHRoZSBVSVxuXG4gICAgICB1aS5jaGVja1BsYXlpbmcuY2FsbCh0aGlzKTsgLy8gQ2hlY2sgZm9yIHBpY3R1cmUtaW4tcGljdHVyZSBzdXBwb3J0XG5cbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnBpcC5zdXBwb3J0ZWQsIHN1cHBvcnQucGlwICYmIHRoaXMuaXNIVE1MNSAmJiB0aGlzLmlzVmlkZW8pOyAvLyBDaGVjayBmb3IgYWlycGxheSBzdXBwb3J0XG5cbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmFpcnBsYXkuc3VwcG9ydGVkLCBzdXBwb3J0LmFpcnBsYXkgJiYgdGhpcy5pc0hUTUw1KTsgLy8gQWRkIGlPUyBjbGFzc1xuXG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5pc0lvcywgYnJvd3Nlci5pc0lvcyk7IC8vIEFkZCB0b3VjaCBjbGFzc1xuXG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5pc1RvdWNoLCB0aGlzLnRvdWNoKTsgLy8gUmVhZHkgZm9yIEFQSSBjYWxsc1xuXG4gICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTsgLy8gUmVhZHkgZXZlbnQgYXQgZW5kIG9mIGV4ZWN1dGlvbiBzdGFja1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwoX3RoaXMsIF90aGlzLm1lZGlhLCAncmVhZHknKTtcbiAgICAgIH0sIDApOyAvLyBTZXQgdGhlIHRpdGxlXG5cbiAgICAgIHVpLnNldFRpdGxlLmNhbGwodGhpcyk7IC8vIEFzc3VyZSB0aGUgcG9zdGVyIGltYWdlIGlzIHNldCwgaWYgdGhlIHByb3BlcnR5IHdhcyBhZGRlZCBiZWZvcmUgdGhlIGVsZW1lbnQgd2FzIGNyZWF0ZWRcblxuICAgICAgaWYgKHRoaXMucG9zdGVyKSB7XG4gICAgICAgIHVpLnNldFBvc3Rlci5jYWxsKHRoaXMsIHRoaXMucG9zdGVyLCBmYWxzZSkuY2F0Y2goZnVuY3Rpb24gKCkge30pO1xuICAgICAgfSAvLyBNYW51YWxseSBzZXQgdGhlIGR1cmF0aW9uIGlmIHVzZXIgaGFzIG92ZXJyaWRkZW4gaXQuXG4gICAgICAvLyBUaGUgZXZlbnQgbGlzdGVuZXJzIGZvciBpdCBkb2Vzbid0IGdldCBjYWxsZWQgaWYgcHJlbG9hZCBpcyBkaXNhYmxlZCAoIzcwMSlcblxuXG4gICAgICBpZiAodGhpcy5jb25maWcuZHVyYXRpb24pIHtcbiAgICAgICAgY29udHJvbHMuZHVyYXRpb25VcGRhdGUuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFNldHVwIGFyaWEgYXR0cmlidXRlIGZvciBwbGF5IGFuZCBpZnJhbWUgdGl0bGVcbiAgICBzZXRUaXRsZTogZnVuY3Rpb24gc2V0VGl0bGUoKSB7XG4gICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IHRleHRcbiAgICAgIHZhciBsYWJlbCA9IGkxOG4uZ2V0KCdwbGF5JywgdGhpcy5jb25maWcpOyAvLyBJZiB0aGVyZSdzIGEgbWVkaWEgdGl0bGUgc2V0LCB1c2UgdGhhdCBmb3IgdGhlIGxhYmVsXG5cbiAgICAgIGlmIChpcyQxLnN0cmluZyh0aGlzLmNvbmZpZy50aXRsZSkgJiYgIWlzJDEuZW1wdHkodGhpcy5jb25maWcudGl0bGUpKSB7XG4gICAgICAgIGxhYmVsICs9IFwiLCBcIi5jb25jYXQodGhpcy5jb25maWcudGl0bGUpO1xuICAgICAgfSAvLyBJZiB0aGVyZSdzIGEgcGxheSBidXR0b24sIHNldCBsYWJlbFxuXG5cbiAgICAgIEFycmF5LmZyb20odGhpcy5lbGVtZW50cy5idXR0b25zLnBsYXkgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbGFiZWwpO1xuICAgICAgfSk7IC8vIFNldCBpZnJhbWUgdGl0bGVcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy8xMjRcblxuICAgICAgaWYgKHRoaXMuaXNFbWJlZCkge1xuICAgICAgICB2YXIgaWZyYW1lID0gZ2V0RWxlbWVudC5jYWxsKHRoaXMsICdpZnJhbWUnKTtcblxuICAgICAgICBpZiAoIWlzJDEuZWxlbWVudChpZnJhbWUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIERlZmF1bHQgdG8gbWVkaWEgdHlwZVxuXG5cbiAgICAgICAgdmFyIHRpdGxlID0gIWlzJDEuZW1wdHkodGhpcy5jb25maWcudGl0bGUpID8gdGhpcy5jb25maWcudGl0bGUgOiAndmlkZW8nO1xuICAgICAgICB2YXIgZm9ybWF0ID0gaTE4bi5nZXQoJ2ZyYW1lVGl0bGUnLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgZm9ybWF0LnJlcGxhY2UoJ3t0aXRsZX0nLCB0aXRsZSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gVG9nZ2xlIHBvc3RlclxuICAgIHRvZ2dsZVBvc3RlcjogZnVuY3Rpb24gdG9nZ2xlUG9zdGVyKGVuYWJsZSkge1xuICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucG9zdGVyRW5hYmxlZCwgZW5hYmxlKTtcbiAgICB9LFxuICAgIC8vIFNldCB0aGUgcG9zdGVyIGltYWdlIChhc3luYylcbiAgICAvLyBVc2VkIGludGVybmFsbHkgZm9yIHRoZSBwb3N0ZXIgc2V0dGVyLCB3aXRoIHRoZSBwYXNzaXZlIG9wdGlvbiBmb3JjZWQgdG8gZmFsc2VcbiAgICBzZXRQb3N0ZXI6IGZ1bmN0aW9uIHNldFBvc3Rlcihwb3N0ZXIpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgcGFzc2l2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTtcblxuICAgICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgaWYgY2FsbCBpcyBwYXNzaXZlXG4gICAgICBpZiAocGFzc2l2ZSAmJiB0aGlzLnBvc3Rlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdQb3N0ZXIgYWxyZWFkeSBzZXQnKSk7XG4gICAgICB9IC8vIFNldCBwcm9wZXJ0eSBzeW5jaHJvbm91c2x5IHRvIHJlc3BlY3QgdGhlIGNhbGwgb3JkZXJcblxuXG4gICAgICB0aGlzLm1lZGlhLnNldEF0dHJpYnV0ZSgnZGF0YS1wb3N0ZXInLCBwb3N0ZXIpOyAvLyBXYWl0IHVudGlsIHVpIGlzIHJlYWR5XG5cbiAgICAgIHJldHVybiByZWFkeS5jYWxsKHRoaXMpIC8vIExvYWQgaW1hZ2VcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxvYWRJbWFnZShwb3N0ZXIpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAvLyBIaWRlIHBvc3RlciBvbiBlcnJvciB1bmxlc3MgaXQncyBiZWVuIHNldCBieSBhbm90aGVyIGNhbGxcbiAgICAgICAgaWYgKHBvc3RlciA9PT0gX3RoaXMyLnBvc3Rlcikge1xuICAgICAgICAgIHVpLnRvZ2dsZVBvc3Rlci5jYWxsKF90aGlzMiwgZmFsc2UpO1xuICAgICAgICB9IC8vIFJldGhyb3dcblxuXG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBQcmV2ZW50IHJhY2UgY29uZGl0aW9uc1xuICAgICAgICBpZiAocG9zdGVyICE9PSBfdGhpczIucG9zdGVyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRQb3N0ZXIgY2FuY2VsbGVkIGJ5IGxhdGVyIGNhbGwgdG8gc2V0UG9zdGVyJyk7XG4gICAgICAgIH1cbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKF90aGlzMi5lbGVtZW50cy5wb3N0ZXIuc3R5bGUsIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCdcIi5jb25jYXQocG9zdGVyLCBcIicpXCIpLFxuICAgICAgICAgIC8vIFJlc2V0IGJhY2tncm91bmRTaXplIGFzIHdlbGwgKHNpbmNlIGl0IGNhbiBiZSBzZXQgdG8gXCJjb3ZlclwiIGZvciBwYWRkZWQgdGh1bWJuYWlscyBmb3IgeW91dHViZSlcbiAgICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJydcbiAgICAgICAgfSk7XG4gICAgICAgIHVpLnRvZ2dsZVBvc3Rlci5jYWxsKF90aGlzMiwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBwb3N0ZXI7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIENoZWNrIHBsYXlpbmcgc3RhdGVcbiAgICBjaGVja1BsYXlpbmc6IGZ1bmN0aW9uIGNoZWNrUGxheWluZyhldmVudCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIC8vIENsYXNzIGhvb2tzXG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wbGF5aW5nLCB0aGlzLnBsYXlpbmcpO1xuICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucGF1c2VkLCB0aGlzLnBhdXNlZCk7XG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5zdG9wcGVkLCB0aGlzLnN0b3BwZWQpOyAvLyBTZXQgc3RhdGVcblxuICAgICAgQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMucGxheSB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7XG4gICAgICAgICAgcHJlc3NlZDogX3RoaXMzLnBsYXlpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpMThuLmdldChfdGhpczMucGxheWluZyA/ICdwYXVzZScgOiAncGxheScsIF90aGlzMy5jb25maWcpKTtcbiAgICAgIH0pOyAvLyBPbmx5IHVwZGF0ZSBjb250cm9scyBvbiBub24gdGltZXVwZGF0ZSBldmVudHNcblxuICAgICAgaWYgKGlzJDEuZXZlbnQoZXZlbnQpICYmIGV2ZW50LnR5cGUgPT09ICd0aW1ldXBkYXRlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFRvZ2dsZSBjb250cm9sc1xuXG5cbiAgICAgIHVpLnRvZ2dsZUNvbnRyb2xzLmNhbGwodGhpcyk7XG4gICAgfSxcbiAgICAvLyBDaGVjayBpZiBtZWRpYSBpcyBsb2FkaW5nXG4gICAgY2hlY2tMb2FkaW5nOiBmdW5jdGlvbiBjaGVja0xvYWRpbmcoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB0aGlzLmxvYWRpbmcgPSBbJ3N0YWxsZWQnLCAnd2FpdGluZyddLmluY2x1ZGVzKGV2ZW50LnR5cGUpOyAvLyBDbGVhciB0aW1lclxuXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcnMubG9hZGluZyk7IC8vIFRpbWVyIHRvIHByZXZlbnQgZmxpY2tlciB3aGVuIHNlZWtpbmdcblxuICAgICAgdGhpcy50aW1lcnMubG9hZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3MgYmFyIGxvYWRpbmcgY2xhc3Mgc3RhdGVcbiAgICAgICAgdG9nZ2xlQ2xhc3MoX3RoaXM0LmVsZW1lbnRzLmNvbnRhaW5lciwgX3RoaXM0LmNvbmZpZy5jbGFzc05hbWVzLmxvYWRpbmcsIF90aGlzNC5sb2FkaW5nKTsgLy8gVXBkYXRlIGNvbnRyb2xzIHZpc2liaWxpdHlcblxuICAgICAgICB1aS50b2dnbGVDb250cm9scy5jYWxsKF90aGlzNCk7XG4gICAgICB9LCB0aGlzLmxvYWRpbmcgPyAyNTAgOiAwKTtcbiAgICB9LFxuICAgIC8vIFRvZ2dsZSBjb250cm9scyBiYXNlZCBvbiBzdGF0ZSBhbmQgYGZvcmNlYCBhcmd1bWVudFxuICAgIHRvZ2dsZUNvbnRyb2xzOiBmdW5jdGlvbiB0b2dnbGVDb250cm9scyhmb3JjZSkge1xuICAgICAgdmFyIGNvbnRyb2xzRWxlbWVudCA9IHRoaXMuZWxlbWVudHMuY29udHJvbHM7XG5cbiAgICAgIGlmIChjb250cm9sc0VsZW1lbnQgJiYgdGhpcy5jb25maWcuaGlkZUNvbnRyb2xzKSB7XG4gICAgICAgIC8vIERvbid0IGhpZGUgY29udHJvbHMgaWYgYSB0b3VjaC1kZXZpY2UgdXNlciByZWNlbnRseSBzZWVrZWQuIChNdXN0IGJlIGxpbWl0ZWQgdG8gdG91Y2ggZGV2aWNlcywgb3IgaXQgb2NjYXNpb25hbGx5IHByZXZlbnRzIGRlc2t0b3AgY29udHJvbHMgZnJvbSBoaWRpbmcuKVxuICAgICAgICB2YXIgcmVjZW50VG91Y2hTZWVrID0gdGhpcy50b3VjaCAmJiB0aGlzLmxhc3RTZWVrVGltZSArIDIwMDAgPiBEYXRlLm5vdygpOyAvLyBTaG93IGNvbnRyb2xzIGlmIGZvcmNlLCBsb2FkaW5nLCBwYXVzZWQsIGJ1dHRvbiBpbnRlcmFjdGlvbiwgb3IgcmVjZW50IHNlZWssIG90aGVyd2lzZSBoaWRlXG5cbiAgICAgICAgdGhpcy50b2dnbGVDb250cm9scyhCb29sZWFuKGZvcmNlIHx8IHRoaXMubG9hZGluZyB8fCB0aGlzLnBhdXNlZCB8fCBjb250cm9sc0VsZW1lbnQucHJlc3NlZCB8fCBjb250cm9sc0VsZW1lbnQuaG92ZXIgfHwgcmVjZW50VG91Y2hTZWVrKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBNaWdyYXRlIGFueSBjdXN0b20gcHJvcGVydGllcyBmcm9tIHRoZSBtZWRpYSB0byB0aGUgcGFyZW50XG4gICAgbWlncmF0ZVN0eWxlczogZnVuY3Rpb24gbWlncmF0ZVN0eWxlcygpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdmFsdWVzIChhcyB0aGV5IGFyZSB0aGUga2V5cyB3aGVuIHRoZSBvYmplY3QgaXMgc3ByZWFkIPCfpJQpXG4gICAgICBPYmplY3QudmFsdWVzKF9vYmplY3RTcHJlYWQyKHt9LCB0aGlzLm1lZGlhLnN0eWxlKSkgLy8gV2UncmUgb25seSBmdXNzZWQgYWJvdXQgUGx5ciBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICFpcyQxLmVtcHR5KGtleSkgJiYga2V5LnN0YXJ0c1dpdGgoJy0tcGx5cicpO1xuICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIC8vIFNldCBvbiB0aGUgY29udGFpbmVyXG4gICAgICAgIF90aGlzNS5lbGVtZW50cy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBfdGhpczUubWVkaWEuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShrZXkpKTsgLy8gQ2xlYW4gdXAgZnJvbSBtZWRpYSBlbGVtZW50XG5cblxuICAgICAgICBfdGhpczUubWVkaWEuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICAgIH0pOyAvLyBSZW1vdmUgYXR0cmlidXRlIGlmIGVtcHR5XG5cbiAgICAgIGlmIChpcyQxLmVtcHR5KHRoaXMubWVkaWEuc3R5bGUpKSB7XG4gICAgICAgIHRoaXMubWVkaWEucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgTGlzdGVuZXJzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMaXN0ZW5lcnMocGxheWVyKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlzdGVuZXJzKTtcblxuICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICB0aGlzLmxhc3RLZXkgPSBudWxsO1xuICAgICAgdGhpcy5mb2N1c1RpbWVyID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdEtleURvd24gPSBudWxsO1xuICAgICAgdGhpcy5oYW5kbGVLZXkgPSB0aGlzLmhhbmRsZUtleS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy50b2dnbGVNZW51ID0gdGhpcy50b2dnbGVNZW51LmJpbmQodGhpcyk7XG4gICAgICB0aGlzLnNldFRhYkZvY3VzID0gdGhpcy5zZXRUYWJGb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5maXJzdFRvdWNoID0gdGhpcy5maXJzdFRvdWNoLmJpbmQodGhpcyk7XG4gICAgfSAvLyBIYW5kbGUga2V5IHByZXNzZXNcblxuXG4gICAgX2NyZWF0ZUNsYXNzKExpc3RlbmVycywgW3tcbiAgICAgIGtleTogXCJoYW5kbGVLZXlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVLZXkoZXZlbnQpIHtcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBwbGF5ZXIuZWxlbWVudHM7XG4gICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSA/IGV2ZW50LmtleUNvZGUgOiBldmVudC53aGljaDtcbiAgICAgICAgdmFyIHByZXNzZWQgPSBldmVudC50eXBlID09PSAna2V5ZG93bic7XG4gICAgICAgIHZhciByZXBlYXQgPSBwcmVzc2VkICYmIGNvZGUgPT09IHRoaXMubGFzdEtleTsgLy8gQmFpbCBpZiBhIG1vZGlmaWVyIGtleSBpcyBzZXRcblxuICAgICAgICBpZiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBJZiB0aGUgZXZlbnQgaXMgYnViYmxlZCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50XG4gICAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBnZXQgdGhlIGtleWNvZGUgZm9yIHdoYXRldmVyIHJlYXNvblxuXG5cbiAgICAgICAgaWYgKCFpcyQxLm51bWJlcihjb2RlKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBTZWVrIGJ5IHRoZSBudW1iZXIga2V5c1xuXG5cbiAgICAgICAgdmFyIHNlZWtCeUtleSA9IGZ1bmN0aW9uIHNlZWtCeUtleSgpIHtcbiAgICAgICAgICAvLyBEaXZpZGUgdGhlIG1heCBkdXJhdGlvbiBpbnRvIDEwdGgncyBhbmQgdGltZXMgYnkgdGhlIG51bWJlciB2YWx1ZVxuICAgICAgICAgIHBsYXllci5jdXJyZW50VGltZSA9IHBsYXllci5kdXJhdGlvbiAvIDEwICogKGNvZGUgLSA0OCk7XG4gICAgICAgIH07IC8vIEhhbmRsZSB0aGUga2V5IG9uIGtleWRvd25cbiAgICAgICAgLy8gUmVzZXQgb24ga2V5dXBcblxuXG4gICAgICAgIGlmIChwcmVzc2VkKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgZm9jdXNlZCBlbGVtZW50XG4gICAgICAgICAgLy8gYW5kIGlmIHRoZSBmb2N1c2VkIGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlIChlLmcuIHRleHQgaW5wdXQpXG4gICAgICAgICAgLy8gYW5kIGFueSB0aGF0IGFjY2VwdCBrZXkgaW5wdXQgaHR0cDovL3dlYmFpbS5vcmcvdGVjaG5pcXVlcy9rZXlib2FyZC9cbiAgICAgICAgICB2YXIgZm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgICAgICAgICBpZiAoaXMkMS5lbGVtZW50KGZvY3VzZWQpKSB7XG4gICAgICAgICAgICB2YXIgZWRpdGFibGUgPSBwbGF5ZXIuY29uZmlnLnNlbGVjdG9ycy5lZGl0YWJsZTtcbiAgICAgICAgICAgIHZhciBzZWVrID0gZWxlbWVudHMuaW5wdXRzLnNlZWs7XG5cbiAgICAgICAgICAgIGlmIChmb2N1c2VkICE9PSBzZWVrICYmIG1hdGNoZXMkMShmb2N1c2VkLCBlZGl0YWJsZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDMyICYmIG1hdGNoZXMkMShmb2N1c2VkLCAnYnV0dG9uLCBbcm9sZV49XCJtZW51aXRlbVwiXScpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vIFdoaWNoIGtleWNvZGVzIHNob3VsZCB3ZSBwcmV2ZW50IGRlZmF1bHRcblxuXG4gICAgICAgICAgdmFyIHByZXZlbnREZWZhdWx0ID0gWzMyLCAzNywgMzgsIDM5LCA0MCwgNDgsIDQ5LCA1MCwgNTEsIDUyLCA1MywgNTQsIDU2LCA1NywgNjcsIDcwLCA3MywgNzUsIDc2LCA3NywgNzldOyAvLyBJZiB0aGUgY29kZSBpcyBmb3VuZCBwcmV2ZW50IGRlZmF1bHQgKGUuZy4gcHJldmVudCBzY3JvbGxpbmcgZm9yIGFycm93cylcblxuICAgICAgICAgIGlmIChwcmV2ZW50RGVmYXVsdC5pbmNsdWRlcyhjb2RlKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgICAgY2FzZSA0ODpcbiAgICAgICAgICAgIGNhc2UgNDk6XG4gICAgICAgICAgICBjYXNlIDUwOlxuICAgICAgICAgICAgY2FzZSA1MTpcbiAgICAgICAgICAgIGNhc2UgNTI6XG4gICAgICAgICAgICBjYXNlIDUzOlxuICAgICAgICAgICAgY2FzZSA1NDpcbiAgICAgICAgICAgIGNhc2UgNTU6XG4gICAgICAgICAgICBjYXNlIDU2OlxuICAgICAgICAgICAgY2FzZSA1NzpcbiAgICAgICAgICAgICAgLy8gMC05XG4gICAgICAgICAgICAgIGlmICghcmVwZWF0KSB7XG4gICAgICAgICAgICAgICAgc2Vla0J5S2V5KCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIGNhc2UgNzU6XG4gICAgICAgICAgICAgIC8vIFNwYWNlIGFuZCBLIGtleVxuICAgICAgICAgICAgICBpZiAoIXJlcGVhdCkge1xuICAgICAgICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXllci50b2dnbGVQbGF5KCkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgIC8vIEFycm93IHVwXG4gICAgICAgICAgICAgIHBsYXllci5pbmNyZWFzZVZvbHVtZSgwLjEpO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgLy8gQXJyb3cgZG93blxuICAgICAgICAgICAgICBwbGF5ZXIuZGVjcmVhc2VWb2x1bWUoMC4xKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgNzc6XG4gICAgICAgICAgICAgIC8vIE0ga2V5XG4gICAgICAgICAgICAgIGlmICghcmVwZWF0KSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLm11dGVkID0gIXBsYXllci5tdXRlZDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAvLyBBcnJvdyBmb3J3YXJkXG4gICAgICAgICAgICAgIHBsYXllci5mb3J3YXJkKCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAvLyBBcnJvdyBiYWNrXG4gICAgICAgICAgICAgIHBsYXllci5yZXdpbmQoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgNzA6XG4gICAgICAgICAgICAgIC8vIEYga2V5XG4gICAgICAgICAgICAgIHBsYXllci5mdWxsc2NyZWVuLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSA2NzpcbiAgICAgICAgICAgICAgLy8gQyBrZXlcbiAgICAgICAgICAgICAgaWYgKCFyZXBlYXQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIudG9nZ2xlQ2FwdGlvbnMoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDc2OlxuICAgICAgICAgICAgICAvLyBMIGtleVxuICAgICAgICAgICAgICBwbGF5ZXIubG9vcCA9ICFwbGF5ZXIubG9vcDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSAvLyBFc2NhcGUgaXMgaGFuZGxlIG5hdGl2ZWx5IHdoZW4gaW4gZnVsbCBzY3JlZW5cbiAgICAgICAgICAvLyBTbyB3ZSBvbmx5IG5lZWQgdG8gd29ycnkgYWJvdXQgbm9uIG5hdGl2ZVxuXG5cbiAgICAgICAgICBpZiAoY29kZSA9PT0gMjcgJiYgIXBsYXllci5mdWxsc2NyZWVuLnVzaW5nTmF0aXZlICYmIHBsYXllci5mdWxsc2NyZWVuLmFjdGl2ZSkge1xuICAgICAgICAgICAgcGxheWVyLmZ1bGxzY3JlZW4udG9nZ2xlKCk7XG4gICAgICAgICAgfSAvLyBTdG9yZSBsYXN0IGNvZGUgZm9yIG5leHQgY3ljbGVcblxuXG4gICAgICAgICAgdGhpcy5sYXN0S2V5ID0gY29kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxhc3RLZXkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IC8vIFRvZ2dsZSBtZW51XG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidG9nZ2xlTWVudVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZU1lbnUoZXZlbnQpIHtcbiAgICAgICAgY29udHJvbHMudG9nZ2xlTWVudS5jYWxsKHRoaXMucGxheWVyLCBldmVudCk7XG4gICAgICB9IC8vIERldmljZSBpcyB0b3VjaCBlbmFibGVkXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZmlyc3RUb3VjaFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpcnN0VG91Y2goKSB7XG4gICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gcGxheWVyLmVsZW1lbnRzO1xuICAgICAgICBwbGF5ZXIudG91Y2ggPSB0cnVlOyAvLyBBZGQgdG91Y2ggY2xhc3NcblxuICAgICAgICB0b2dnbGVDbGFzcyhlbGVtZW50cy5jb250YWluZXIsIHBsYXllci5jb25maWcuY2xhc3NOYW1lcy5pc1RvdWNoLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0VGFiRm9jdXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUYWJGb2N1cyhldmVudCkge1xuICAgICAgICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHBsYXllci5lbGVtZW50cztcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZm9jdXNUaW1lcik7IC8vIElnbm9yZSBhbnkga2V5IG90aGVyIHRoYW4gdGFiXG5cbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyAmJiBldmVudC53aGljaCAhPT0gOSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBTdG9yZSByZWZlcmVuY2UgdG8gZXZlbnQgdGltZVN0YW1wXG5cblxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nKSB7XG4gICAgICAgICAgdGhpcy5sYXN0S2V5RG93biA9IGV2ZW50LnRpbWVTdGFtcDtcbiAgICAgICAgfSAvLyBSZW1vdmUgY3VycmVudCBjbGFzc2VzXG5cblxuICAgICAgICB2YXIgcmVtb3ZlQ3VycmVudCA9IGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnQoKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHBsYXllci5jb25maWcuY2xhc3NOYW1lcy50YWJGb2N1cztcbiAgICAgICAgICB2YXIgY3VycmVudCA9IGdldEVsZW1lbnRzLmNhbGwocGxheWVyLCBcIi5cIi5jb25jYXQoY2xhc3NOYW1lKSk7XG4gICAgICAgICAgdG9nZ2xlQ2xhc3MoY3VycmVudCwgY2xhc3NOYW1lLCBmYWxzZSk7XG4gICAgICAgIH07IC8vIERldGVybWluZSBpZiBhIGtleSB3YXMgcHJlc3NlZCB0byB0cmlnZ2VyIHRoaXMgZXZlbnRcblxuXG4gICAgICAgIHZhciB3YXNLZXlEb3duID0gZXZlbnQudGltZVN0YW1wIC0gdGhpcy5sYXN0S2V5RG93biA8PSAyMDsgLy8gSWdub3JlIGZvY3VzIGV2ZW50cyBpZiBhIGtleSB3YXMgcHJlc3NlZCBwcmlvclxuXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnZm9jdXMnICYmICF3YXNLZXlEb3duKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFJlbW92ZSBhbGwgY3VycmVudFxuXG5cbiAgICAgICAgcmVtb3ZlQ3VycmVudCgpOyAvLyBEZWxheSB0aGUgYWRkaW5nIG9mIGNsYXNzbmFtZSB1bnRpbCB0aGUgZm9jdXMgaGFzIGNoYW5nZWRcbiAgICAgICAgLy8gVGhpcyBldmVudCBmaXJlcyBiZWZvcmUgdGhlIGZvY3VzaW4gZXZlbnRcblxuICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2ZvY3Vzb3V0Jykge1xuICAgICAgICAgIHRoaXMuZm9jdXNUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZvY3VzZWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OyAvLyBJZ25vcmUgaWYgY3VycmVudCBmb2N1cyBlbGVtZW50IGlzbid0IGluc2lkZSB0aGUgcGxheWVyXG5cbiAgICAgICAgICAgIGlmICghZWxlbWVudHMuY29udGFpbmVyLmNvbnRhaW5zKGZvY3VzZWQpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgcGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLnRhYkZvY3VzLCB0cnVlKTtcbiAgICAgICAgICB9LCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gR2xvYmFsIHdpbmRvdyAmIGRvY3VtZW50IGxpc3RlbmVyc1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdsb2JhbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdsb2JhbCgpIHtcbiAgICAgICAgdmFyIHRvZ2dsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTtcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyOyAvLyBLZXlib2FyZCBzaG9ydGN1dHNcblxuICAgICAgICBpZiAocGxheWVyLmNvbmZpZy5rZXlib2FyZC5nbG9iYWwpIHtcbiAgICAgICAgICB0b2dnbGVMaXN0ZW5lci5jYWxsKHBsYXllciwgd2luZG93LCAna2V5ZG93biBrZXl1cCcsIHRoaXMuaGFuZGxlS2V5LCB0b2dnbGUsIGZhbHNlKTtcbiAgICAgICAgfSAvLyBDbGljayBhbnl3aGVyZSBjbG9zZXMgbWVudVxuXG5cbiAgICAgICAgdG9nZ2xlTGlzdGVuZXIuY2FsbChwbGF5ZXIsIGRvY3VtZW50LmJvZHksICdjbGljaycsIHRoaXMudG9nZ2xlTWVudSwgdG9nZ2xlKTsgLy8gRGV0ZWN0IHRvdWNoIGJ5IGV2ZW50c1xuXG4gICAgICAgIG9uY2UuY2FsbChwbGF5ZXIsIGRvY3VtZW50LmJvZHksICd0b3VjaHN0YXJ0JywgdGhpcy5maXJzdFRvdWNoKTsgLy8gVGFiIGZvY3VzIGRldGVjdGlvblxuXG4gICAgICAgIHRvZ2dsZUxpc3RlbmVyLmNhbGwocGxheWVyLCBkb2N1bWVudC5ib2R5LCAna2V5ZG93biBmb2N1cyBibHVyIGZvY3Vzb3V0JywgdGhpcy5zZXRUYWJGb2N1cywgdG9nZ2xlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB9IC8vIENvbnRhaW5lciBsaXN0ZW5lcnNcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjb250YWluZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb250YWluZXIoKSB7XG4gICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHBsYXllci5jb25maWcsXG4gICAgICAgICAgICBlbGVtZW50cyA9IHBsYXllci5lbGVtZW50cyxcbiAgICAgICAgICAgIHRpbWVycyA9IHBsYXllci50aW1lcnM7IC8vIEtleWJvYXJkIHNob3J0Y3V0c1xuXG4gICAgICAgIGlmICghY29uZmlnLmtleWJvYXJkLmdsb2JhbCAmJiBjb25maWcua2V5Ym9hcmQuZm9jdXNlZCkge1xuICAgICAgICAgIG9uLmNhbGwocGxheWVyLCBlbGVtZW50cy5jb250YWluZXIsICdrZXlkb3duIGtleXVwJywgdGhpcy5oYW5kbGVLZXksIGZhbHNlKTtcbiAgICAgICAgfSAvLyBUb2dnbGUgY29udHJvbHMgb24gbW91c2UgZXZlbnRzIGFuZCBlbnRlcmluZyBmdWxsc2NyZWVuXG5cblxuICAgICAgICBvbi5jYWxsKHBsYXllciwgZWxlbWVudHMuY29udGFpbmVyLCAnbW91c2Vtb3ZlIG1vdXNlbGVhdmUgdG91Y2hzdGFydCB0b3VjaG1vdmUgZW50ZXJmdWxsc2NyZWVuIGV4aXRmdWxsc2NyZWVuJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIGNvbnRyb2xzRWxlbWVudCA9IGVsZW1lbnRzLmNvbnRyb2xzOyAvLyBSZW1vdmUgYnV0dG9uIHN0YXRlcyBmb3IgZnVsbHNjcmVlblxuXG4gICAgICAgICAgaWYgKGNvbnRyb2xzRWxlbWVudCAmJiBldmVudC50eXBlID09PSAnZW50ZXJmdWxsc2NyZWVuJykge1xuICAgICAgICAgICAgY29udHJvbHNFbGVtZW50LnByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRyb2xzRWxlbWVudC5ob3ZlciA9IGZhbHNlO1xuICAgICAgICAgIH0gLy8gU2hvdywgdGhlbiBoaWRlIGFmdGVyIGEgdGltZW91dCB1bmxlc3MgYW5vdGhlciBjb250cm9sIGV2ZW50IG9jY3Vyc1xuXG5cbiAgICAgICAgICB2YXIgc2hvdyA9IFsndG91Y2hzdGFydCcsICd0b3VjaG1vdmUnLCAnbW91c2Vtb3ZlJ10uaW5jbHVkZXMoZXZlbnQudHlwZSk7XG4gICAgICAgICAgdmFyIGRlbGF5ID0gMDtcblxuICAgICAgICAgIGlmIChzaG93KSB7XG4gICAgICAgICAgICB1aS50b2dnbGVDb250cm9scy5jYWxsKHBsYXllciwgdHJ1ZSk7IC8vIFVzZSBsb25nZXIgdGltZW91dCBmb3IgdG91Y2ggZGV2aWNlc1xuXG4gICAgICAgICAgICBkZWxheSA9IHBsYXllci50b3VjaCA/IDMwMDAgOiAyMDAwO1xuICAgICAgICAgIH0gLy8gQ2xlYXIgdGltZXJcblxuXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVycy5jb250cm9scyk7IC8vIFNldCBuZXcgdGltZXIgdG8gcHJldmVudCBmbGlja2VyIHdoZW4gc2Vla2luZ1xuXG4gICAgICAgICAgdGltZXJzLmNvbnRyb2xzID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdWkudG9nZ2xlQ29udHJvbHMuY2FsbChwbGF5ZXIsIGZhbHNlKTtcbiAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH0pOyAvLyBTZXQgYSBndXR0ZXIgZm9yIFZpbWVvXG5cbiAgICAgICAgdmFyIHNldEd1dHRlciA9IGZ1bmN0aW9uIHNldEd1dHRlcihyYXRpbywgcGFkZGluZywgdG9nZ2xlKSB7XG4gICAgICAgICAgaWYgKCFwbGF5ZXIuaXNWaW1lbyB8fCBwbGF5ZXIuY29uZmlnLnZpbWVvLnByZW1pdW0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gcGxheWVyLmVsZW1lbnRzLndyYXBwZXIuZmlyc3RDaGlsZDtcblxuICAgICAgICAgIHZhciBfcmF0aW8gPSBfc2xpY2VkVG9BcnJheShyYXRpbywgMiksXG4gICAgICAgICAgICAgIHkgPSBfcmF0aW9bMV07XG5cbiAgICAgICAgICB2YXIgX2dldEFzcGVjdFJhdGlvJGNhbGwgPSBnZXRBc3BlY3RSYXRpby5jYWxsKHBsYXllciksXG4gICAgICAgICAgICAgIF9nZXRBc3BlY3RSYXRpbyRjYWxsMiA9IF9zbGljZWRUb0FycmF5KF9nZXRBc3BlY3RSYXRpbyRjYWxsLCAyKSxcbiAgICAgICAgICAgICAgdmlkZW9YID0gX2dldEFzcGVjdFJhdGlvJGNhbGwyWzBdLFxuICAgICAgICAgICAgICB2aWRlb1kgPSBfZ2V0QXNwZWN0UmF0aW8kY2FsbDJbMV07XG5cbiAgICAgICAgICB0YXJnZXQuc3R5bGUubWF4V2lkdGggPSB0b2dnbGUgPyBcIlwiLmNvbmNhdCh5IC8gdmlkZW9ZICogdmlkZW9YLCBcInB4XCIpIDogbnVsbDtcbiAgICAgICAgICB0YXJnZXQuc3R5bGUubWFyZ2luID0gdG9nZ2xlID8gJzAgYXV0bycgOiBudWxsO1xuICAgICAgICB9OyAvLyBSZXNpemUgb24gZnVsbHNjcmVlbiBjaGFuZ2VcblxuXG4gICAgICAgIHZhciBzZXRQbGF5ZXJTaXplID0gZnVuY3Rpb24gc2V0UGxheWVyU2l6ZShtZWFzdXJlKSB7XG4gICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgbmVlZCB0byBtZWFzdXJlIHRoZSB2aWV3cG9ydFxuICAgICAgICAgIGlmICghbWVhc3VyZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNldEFzcGVjdFJhdGlvLmNhbGwocGxheWVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnRzLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICB2YXIgd2lkdGggPSByZWN0LndpZHRoLFxuICAgICAgICAgICAgICBoZWlnaHQgPSByZWN0LmhlaWdodDtcbiAgICAgICAgICByZXR1cm4gc2V0QXNwZWN0UmF0aW8uY2FsbChwbGF5ZXIsIFwiXCIuY29uY2F0KHdpZHRoLCBcIjpcIikuY29uY2F0KGhlaWdodCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXNpemVkID0gZnVuY3Rpb24gcmVzaXplZCgpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJzLnJlc2l6ZWQpO1xuICAgICAgICAgIHRpbWVycy5yZXNpemVkID0gc2V0VGltZW91dChzZXRQbGF5ZXJTaXplLCA1MCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgb24uY2FsbChwbGF5ZXIsIGVsZW1lbnRzLmNvbnRhaW5lciwgJ2VudGVyZnVsbHNjcmVlbiBleGl0ZnVsbHNjcmVlbicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciBfcGxheWVyJGZ1bGxzY3JlZW4gPSBwbGF5ZXIuZnVsbHNjcmVlbixcbiAgICAgICAgICAgICAgdGFyZ2V0ID0gX3BsYXllciRmdWxsc2NyZWVuLnRhcmdldCxcbiAgICAgICAgICAgICAgdXNpbmdOYXRpdmUgPSBfcGxheWVyJGZ1bGxzY3JlZW4udXNpbmdOYXRpdmU7IC8vIElnbm9yZSBldmVudHMgbm90IGZyb20gdGFyZ2V0XG5cbiAgICAgICAgICBpZiAodGFyZ2V0ICE9PSBlbGVtZW50cy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IC8vIElmIGl0J3Mgbm90IGFuIGVtYmVkIGFuZCBubyByYXRpbyBzcGVjaWZpZWRcblxuXG4gICAgICAgICAgaWYgKCFwbGF5ZXIuaXNFbWJlZCAmJiBpcyQxLmVtcHR5KHBsYXllci5jb25maWcucmF0aW8pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGlzRW50ZXIgPSBldmVudC50eXBlID09PSAnZW50ZXJmdWxsc2NyZWVuJzsgLy8gU2V0IHRoZSBwbGF5ZXIgc2l6ZSB3aGVuIGVudGVyaW5nIGZ1bGxzY3JlZW4gdG8gdmlld3BvcnQgc2l6ZVxuXG4gICAgICAgICAgdmFyIF9zZXRQbGF5ZXJTaXplID0gc2V0UGxheWVyU2l6ZShpc0VudGVyKSxcbiAgICAgICAgICAgICAgcGFkZGluZyA9IF9zZXRQbGF5ZXJTaXplLnBhZGRpbmcsXG4gICAgICAgICAgICAgIHJhdGlvID0gX3NldFBsYXllclNpemUucmF0aW87IC8vIFNldCBWaW1lbyBndXR0ZXJcblxuXG4gICAgICAgICAgc2V0R3V0dGVyKHJhdGlvLCBwYWRkaW5nLCBpc0VudGVyKTsgLy8gSWYgbm90IHVzaW5nIG5hdGl2ZSBicm93c2VyIGZ1bGxzY3JlZW4gQVBJLCB3ZSBuZWVkIHRvIGNoZWNrIGZvciByZXNpemVzIG9mIHZpZXdwb3J0XG5cbiAgICAgICAgICBpZiAoIXVzaW5nTmF0aXZlKSB7XG4gICAgICAgICAgICBpZiAoaXNFbnRlcikge1xuICAgICAgICAgICAgICBvbi5jYWxsKHBsYXllciwgd2luZG93LCAncmVzaXplJywgcmVzaXplZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvZmYuY2FsbChwbGF5ZXIsIHdpbmRvdywgJ3Jlc2l6ZScsIHJlc2l6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IC8vIExpc3RlbiBmb3IgbWVkaWEgZXZlbnRzXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwibWVkaWFcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZWRpYSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHBsYXllci5lbGVtZW50czsgLy8gVGltZSBjaGFuZ2Ugb24gbWVkaWFcblxuICAgICAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndGltZXVwZGF0ZSBzZWVraW5nIHNlZWtlZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHJldHVybiBjb250cm9scy50aW1lVXBkYXRlLmNhbGwocGxheWVyLCBldmVudCk7XG4gICAgICAgIH0pOyAvLyBEaXNwbGF5IGR1cmF0aW9uXG5cbiAgICAgICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2R1cmF0aW9uY2hhbmdlIGxvYWRlZGRhdGEgbG9hZGVkbWV0YWRhdGEnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gY29udHJvbHMuZHVyYXRpb25VcGRhdGUuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICAgICAgfSk7IC8vIEhhbmRsZSB0aGUgbWVkaWEgZmluaXNoaW5nXG5cbiAgICAgICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIFNob3cgcG9zdGVyIG9uIGVuZFxuICAgICAgICAgIGlmIChwbGF5ZXIuaXNIVE1MNSAmJiBwbGF5ZXIuaXNWaWRlbyAmJiBwbGF5ZXIuY29uZmlnLnJlc2V0T25FbmQpIHtcbiAgICAgICAgICAgIC8vIFJlc3RhcnRcbiAgICAgICAgICAgIHBsYXllci5yZXN0YXJ0KCk7IC8vIENhbGwgcGF1c2Ugb3RoZXJ3aXNlIElFMTEgd2lsbCBzdGFydCBwbGF5aW5nIHRoZSB2aWRlbyBhZ2FpblxuXG4gICAgICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pOyAvLyBDaGVjayBmb3IgYnVmZmVyIHByb2dyZXNzXG5cbiAgICAgICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3Byb2dyZXNzIHBsYXlpbmcgc2Vla2luZyBzZWVrZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gY29udHJvbHMudXBkYXRlUHJvZ3Jlc3MuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICAgICAgfSk7IC8vIEhhbmRsZSB2b2x1bWUgY2hhbmdlc1xuXG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd2b2x1bWVjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gY29udHJvbHMudXBkYXRlVm9sdW1lLmNhbGwocGxheWVyLCBldmVudCk7XG4gICAgICAgIH0pOyAvLyBIYW5kbGUgcGxheS9wYXVzZVxuXG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdwbGF5aW5nIHBsYXkgcGF1c2UgZW5kZWQgZW1wdGllZCB0aW1ldXBkYXRlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHVpLmNoZWNrUGxheWluZy5jYWxsKHBsYXllciwgZXZlbnQpO1xuICAgICAgICB9KTsgLy8gTG9hZGluZyBzdGF0ZVxuXG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd3YWl0aW5nIGNhbnBsYXkgc2Vla2VkIHBsYXlpbmcnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gdWkuY2hlY2tMb2FkaW5nLmNhbGwocGxheWVyLCBldmVudCk7XG4gICAgICAgIH0pOyAvLyBDbGljayB2aWRlb1xuXG4gICAgICAgIGlmIChwbGF5ZXIuc3VwcG9ydGVkLnVpICYmIHBsYXllci5jb25maWcuY2xpY2tUb1BsYXkgJiYgIXBsYXllci5pc0F1ZGlvKSB7XG4gICAgICAgICAgLy8gUmUtZmV0Y2ggdGhlIHdyYXBwZXJcbiAgICAgICAgICB2YXIgd3JhcHBlciA9IGdldEVsZW1lbnQuY2FsbChwbGF5ZXIsIFwiLlwiLmNvbmNhdChwbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMudmlkZW8pKTsgLy8gQmFpbCBpZiB0aGVyZSdzIG5vIHdyYXBwZXIgKHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbilcblxuICAgICAgICAgIGlmICghaXMkMS5lbGVtZW50KHdyYXBwZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBPbiBjbGljayBwbGF5LCBwYXVzZSBvciByZXN0YXJ0XG5cblxuICAgICAgICAgIG9uLmNhbGwocGxheWVyLCBlbGVtZW50cy5jb250YWluZXIsICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBbZWxlbWVudHMuY29udGFpbmVyLCB3cmFwcGVyXTsgLy8gSWdub3JlIGlmIGNsaWNrIGlmIG5vdCBjb250YWluZXIgb3IgaW4gdmlkZW8gd3JhcHBlclxuXG4gICAgICAgICAgICBpZiAoIXRhcmdldHMuaW5jbHVkZXMoZXZlbnQudGFyZ2V0KSAmJiAhd3JhcHBlci5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gLy8gVG91Y2ggZGV2aWNlcyB3aWxsIGp1c3Qgc2hvdyBjb250cm9scyAoaWYgaGlkZGVuKVxuXG5cbiAgICAgICAgICAgIGlmIChwbGF5ZXIudG91Y2ggJiYgcGxheWVyLmNvbmZpZy5oaWRlQ29udHJvbHMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGxheWVyLmVuZGVkKSB7XG4gICAgICAgICAgICAgIF90aGlzLnByb3h5KGV2ZW50LCBwbGF5ZXIucmVzdGFydCwgJ3Jlc3RhcnQnKTtcblxuICAgICAgICAgICAgICBfdGhpcy5wcm94eShldmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXllci5wbGF5KCkpO1xuICAgICAgICAgICAgICB9LCAncGxheScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX3RoaXMucHJveHkoZXZlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzaWxlbmNlUHJvbWlzZShwbGF5ZXIudG9nZ2xlUGxheSgpKTtcbiAgICAgICAgICAgICAgfSwgJ3BsYXknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBEaXNhYmxlIHJpZ2h0IGNsaWNrXG5cblxuICAgICAgICBpZiAocGxheWVyLnN1cHBvcnRlZC51aSAmJiBwbGF5ZXIuY29uZmlnLmRpc2FibGVDb250ZXh0TWVudSkge1xuICAgICAgICAgIG9uLmNhbGwocGxheWVyLCBlbGVtZW50cy53cmFwcGVyLCAnY29udGV4dG1lbnUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9IC8vIFZvbHVtZSBjaGFuZ2VcblxuXG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd2b2x1bWVjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gU2F2ZSB0byBzdG9yYWdlXG4gICAgICAgICAgcGxheWVyLnN0b3JhZ2Uuc2V0KHtcbiAgICAgICAgICAgIHZvbHVtZTogcGxheWVyLnZvbHVtZSxcbiAgICAgICAgICAgIG11dGVkOiBwbGF5ZXIubXV0ZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IC8vIFNwZWVkIGNoYW5nZVxuXG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdyYXRlY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIFVwZGF0ZSBVSVxuICAgICAgICAgIGNvbnRyb2xzLnVwZGF0ZVNldHRpbmcuY2FsbChwbGF5ZXIsICdzcGVlZCcpOyAvLyBTYXZlIHRvIHN0b3JhZ2VcblxuXG4gICAgICAgICAgcGxheWVyLnN0b3JhZ2Uuc2V0KHtcbiAgICAgICAgICAgIHNwZWVkOiBwbGF5ZXIuc3BlZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IC8vIFF1YWxpdHkgY2hhbmdlXG5cbiAgICAgICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3F1YWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAvLyBVcGRhdGUgVUlcbiAgICAgICAgICBjb250cm9scy51cGRhdGVTZXR0aW5nLmNhbGwocGxheWVyLCAncXVhbGl0eScsIG51bGwsIGV2ZW50LmRldGFpbC5xdWFsaXR5KTtcbiAgICAgICAgfSk7IC8vIFVwZGF0ZSBkb3dubG9hZCBsaW5rIHdoZW4gcmVhZHkgYW5kIGlmIHF1YWxpdHkgY2hhbmdlc1xuXG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdyZWFkeSBxdWFsaXR5Y2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnRyb2xzLnNldERvd25sb2FkVXJsLmNhbGwocGxheWVyKTtcbiAgICAgICAgfSk7IC8vIFByb3h5IGV2ZW50cyB0byBjb250YWluZXJcbiAgICAgICAgLy8gQnViYmxlIHVwIGtleSBldmVudHMgZm9yIEVkZ2VcblxuICAgICAgICB2YXIgcHJveHlFdmVudHMgPSBwbGF5ZXIuY29uZmlnLmV2ZW50cy5jb25jYXQoWydrZXl1cCcsICdrZXlkb3duJ10pLmpvaW4oJyAnKTtcbiAgICAgICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgcHJveHlFdmVudHMsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciBfZXZlbnQkZGV0YWlsID0gZXZlbnQuZGV0YWlsLFxuICAgICAgICAgICAgICBkZXRhaWwgPSBfZXZlbnQkZGV0YWlsID09PSB2b2lkIDAgPyB7fSA6IF9ldmVudCRkZXRhaWw7IC8vIEdldCBlcnJvciBkZXRhaWxzIGZyb20gbWVkaWFcblxuICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBkZXRhaWwgPSBwbGF5ZXIubWVkaWEuZXJyb3I7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBlbGVtZW50cy5jb250YWluZXIsIGV2ZW50LnR5cGUsIHRydWUsIGRldGFpbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBSdW4gZGVmYXVsdCBhbmQgY3VzdG9tIGhhbmRsZXJzXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicHJveHlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcm94eShldmVudCwgZGVmYXVsdEhhbmRsZXIsIGN1c3RvbUhhbmRsZXJLZXkpIHtcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyO1xuICAgICAgICB2YXIgY3VzdG9tSGFuZGxlciA9IHBsYXllci5jb25maWcubGlzdGVuZXJzW2N1c3RvbUhhbmRsZXJLZXldO1xuICAgICAgICB2YXIgaGFzQ3VzdG9tSGFuZGxlciA9IGlzJDEuZnVuY3Rpb24oY3VzdG9tSGFuZGxlcik7XG4gICAgICAgIHZhciByZXR1cm5lZCA9IHRydWU7IC8vIEV4ZWN1dGUgY3VzdG9tIGhhbmRsZXJcblxuICAgICAgICBpZiAoaGFzQ3VzdG9tSGFuZGxlcikge1xuICAgICAgICAgIHJldHVybmVkID0gY3VzdG9tSGFuZGxlci5jYWxsKHBsYXllciwgZXZlbnQpO1xuICAgICAgICB9IC8vIE9ubHkgY2FsbCBkZWZhdWx0IGhhbmRsZXIgaWYgbm90IHByZXZlbnRlZCBpbiBjdXN0b20gaGFuZGxlclxuXG5cbiAgICAgICAgaWYgKHJldHVybmVkICE9PSBmYWxzZSAmJiBpcyQxLmZ1bmN0aW9uKGRlZmF1bHRIYW5kbGVyKSkge1xuICAgICAgICAgIGRlZmF1bHRIYW5kbGVyLmNhbGwocGxheWVyLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gVHJpZ2dlciBjdXN0b20gYW5kIGRlZmF1bHQgaGFuZGxlcnNcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJiaW5kXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZChlbGVtZW50LCB0eXBlLCBkZWZhdWx0SGFuZGxlciwgY3VzdG9tSGFuZGxlcktleSkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgcGFzc2l2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdHJ1ZTtcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyO1xuICAgICAgICB2YXIgY3VzdG9tSGFuZGxlciA9IHBsYXllci5jb25maWcubGlzdGVuZXJzW2N1c3RvbUhhbmRsZXJLZXldO1xuICAgICAgICB2YXIgaGFzQ3VzdG9tSGFuZGxlciA9IGlzJDEuZnVuY3Rpb24oY3VzdG9tSGFuZGxlcik7XG4gICAgICAgIG9uLmNhbGwocGxheWVyLCBlbGVtZW50LCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLnByb3h5KGV2ZW50LCBkZWZhdWx0SGFuZGxlciwgY3VzdG9tSGFuZGxlcktleSk7XG4gICAgICAgIH0sIHBhc3NpdmUgJiYgIWhhc0N1c3RvbUhhbmRsZXIpO1xuICAgICAgfSAvLyBMaXN0ZW4gZm9yIGNvbnRyb2wgZXZlbnRzXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY29udHJvbHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb250cm9scyQxKCkge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHBsYXllci5lbGVtZW50czsgLy8gSUUgZG9lc24ndCBzdXBwb3J0IGlucHV0IGV2ZW50LCBzbyB3ZSBmYWxsYmFjayB0byBjaGFuZ2VcblxuICAgICAgICB2YXIgaW5wdXRFdmVudCA9IGJyb3dzZXIuaXNJRSA/ICdjaGFuZ2UnIDogJ2lucHV0JzsgLy8gUGxheS9wYXVzZSB0b2dnbGVcblxuICAgICAgICBpZiAoZWxlbWVudHMuYnV0dG9ucy5wbGF5KSB7XG4gICAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50cy5idXR0b25zLnBsYXkpLmZvckVhY2goZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgICAgX3RoaXMzLmJpbmQoYnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXllci50b2dnbGVQbGF5KCkpO1xuICAgICAgICAgICAgfSwgJ3BsYXknKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBQYXVzZVxuXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmJ1dHRvbnMucmVzdGFydCwgJ2NsaWNrJywgcGxheWVyLnJlc3RhcnQsICdyZXN0YXJ0Jyk7IC8vIFJld2luZFxuXG4gICAgICAgIHRoaXMuYmluZChlbGVtZW50cy5idXR0b25zLnJld2luZCwgJ2NsaWNrJywgcGxheWVyLnJld2luZCwgJ3Jld2luZCcpOyAvLyBSZXdpbmRcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuYnV0dG9ucy5mYXN0Rm9yd2FyZCwgJ2NsaWNrJywgcGxheWVyLmZvcndhcmQsICdmYXN0Rm9yd2FyZCcpOyAvLyBNdXRlIHRvZ2dsZVxuXG4gICAgICAgIHRoaXMuYmluZChlbGVtZW50cy5idXR0b25zLm11dGUsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwbGF5ZXIubXV0ZWQgPSAhcGxheWVyLm11dGVkO1xuICAgICAgICB9LCAnbXV0ZScpOyAvLyBDYXB0aW9ucyB0b2dnbGVcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucywgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBwbGF5ZXIudG9nZ2xlQ2FwdGlvbnMoKTtcbiAgICAgICAgfSk7IC8vIERvd25sb2FkXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmJ1dHRvbnMuZG93bmxvYWQsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2Rvd25sb2FkJyk7XG4gICAgICAgIH0sICdkb3dubG9hZCcpOyAvLyBGdWxsc2NyZWVuIHRvZ2dsZVxuXG4gICAgICAgIHRoaXMuYmluZChlbGVtZW50cy5idXR0b25zLmZ1bGxzY3JlZW4sICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwbGF5ZXIuZnVsbHNjcmVlbi50b2dnbGUoKTtcbiAgICAgICAgfSwgJ2Z1bGxzY3JlZW4nKTsgLy8gUGljdHVyZS1pbi1QaWN0dXJlXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmJ1dHRvbnMucGlwLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcGxheWVyLnBpcCA9ICd0b2dnbGUnO1xuICAgICAgICB9LCAncGlwJyk7IC8vIEFpcnBsYXlcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuYnV0dG9ucy5haXJwbGF5LCAnY2xpY2snLCBwbGF5ZXIuYWlycGxheSwgJ2FpcnBsYXknKTsgLy8gU2V0dGluZ3MgbWVudSAtIGNsaWNrIHRvZ2dsZVxuXG4gICAgICAgIHRoaXMuYmluZChlbGVtZW50cy5idXR0b25zLnNldHRpbmdzLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBkb2N1bWVudCBjbGljayBsaXN0ZW5lciBjbG9zaW5nIHRoZSBtZW51XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnUuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICAgICAgfSwgbnVsbCwgZmFsc2UpOyAvLyBDYW4ndCBiZSBwYXNzaXZlIGFzIHdlJ3JlIHByZXZlbnRpbmcgZGVmYXVsdFxuICAgICAgICAvLyBTZXR0aW5ncyBtZW51IC0ga2V5Ym9hcmQgdG9nZ2xlXG4gICAgICAgIC8vIFdlIGhhdmUgdG8gYmluZCB0byBrZXl1cCBvdGhlcndpc2UgRmlyZWZveCB0cmlnZ2VycyBhIGNsaWNrIHdoZW4gYSBrZXlkb3duIGV2ZW50IGhhbmRsZXIgc2hpZnRzIGZvY3VzXG4gICAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEyMjAxNDNcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuYnV0dG9ucy5zZXR0aW5ncywgJ2tleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIGNvZGUgPSBldmVudC53aGljaDsgLy8gV2Ugb25seSBjYXJlIGFib3V0IHNwYWNlIGFuZCByZXR1cm5cblxuICAgICAgICAgIGlmICghWzEzLCAzMl0uaW5jbHVkZXMoY29kZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IC8vIEJlY2F1c2UgcmV0dXJuIHRyaWdnZXJzIGEgY2xpY2sgYW55d2F5LCBhbGwgd2UgbmVlZCB0byBkbyBpcyBzZXQgZm9jdXNcblxuXG4gICAgICAgICAgaWYgKGNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICBjb250cm9scy5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbChwbGF5ZXIsIG51bGwsIHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBQcmV2ZW50IHNjcm9sbFxuXG5cbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHBsYXlpbmcgdmlkZW8gKEZpcmVmb3gpXG5cbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgLy8gVG9nZ2xlIG1lbnVcblxuICAgICAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnUuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICAgICAgfSwgbnVsbCwgZmFsc2UgLy8gQ2FuJ3QgYmUgcGFzc2l2ZSBhcyB3ZSdyZSBwcmV2ZW50aW5nIGRlZmF1bHRcbiAgICAgICAgKTsgLy8gRXNjYXBlIGNsb3NlcyBtZW51XG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLnNldHRpbmdzLm1lbnUsICdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xuICAgICAgICAgICAgY29udHJvbHMudG9nZ2xlTWVudS5jYWxsKHBsYXllciwgZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7IC8vIFNldCByYW5nZSBpbnB1dCBhbHRlcm5hdGl2ZSBcInZhbHVlXCIsIHdoaWNoIG1hdGNoZXMgdGhlIHRvb2x0aXAgdGltZSAoIzk1NClcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuaW5wdXRzLnNlZWssICdtb3VzZWRvd24gbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIHJlY3QgPSBlbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICB2YXIgcGVyY2VudCA9IDEwMCAvIHJlY3Qud2lkdGggKiAoZXZlbnQucGFnZVggLSByZWN0LmxlZnQpO1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc2V0QXR0cmlidXRlKCdzZWVrLXZhbHVlJywgcGVyY2VudCk7XG4gICAgICAgIH0pOyAvLyBQYXVzZSB3aGlsZSBzZWVraW5nXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmlucHV0cy5zZWVrLCAnbW91c2Vkb3duIG1vdXNldXAga2V5ZG93biBrZXl1cCB0b3VjaHN0YXJ0IHRvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIHNlZWsgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSA/IGV2ZW50LmtleUNvZGUgOiBldmVudC53aGljaDtcbiAgICAgICAgICB2YXIgYXR0cmlidXRlID0gJ3BsYXktb24tc2Vla2VkJztcblxuICAgICAgICAgIGlmIChpcyQxLmtleWJvYXJkRXZlbnQoZXZlbnQpICYmIGNvZGUgIT09IDM5ICYmIGNvZGUgIT09IDM3KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBSZWNvcmQgc2VlayB0aW1lIHNvIHdlIGNhbiBwcmV2ZW50IGhpZGluZyBjb250cm9scyBmb3IgYSBmZXcgc2Vjb25kcyBhZnRlciBzZWVrXG5cblxuICAgICAgICAgIHBsYXllci5sYXN0U2Vla1RpbWUgPSBEYXRlLm5vdygpOyAvLyBXYXMgcGxheWluZyBiZWZvcmU/XG5cbiAgICAgICAgICB2YXIgcGxheSA9IHNlZWsuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSk7IC8vIERvbmUgc2Vla2luZ1xuXG4gICAgICAgICAgdmFyIGRvbmUgPSBbJ21vdXNldXAnLCAndG91Y2hlbmQnLCAna2V5dXAnXS5pbmNsdWRlcyhldmVudC50eXBlKTsgLy8gSWYgd2UncmUgZG9uZSBzZWVraW5nIGFuZCBpdCB3YXMgcGxheWluZywgcmVzdW1lIHBsYXliYWNrXG5cbiAgICAgICAgICBpZiAocGxheSAmJiBkb25lKSB7XG4gICAgICAgICAgICBzZWVrLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgc2lsZW5jZVByb21pc2UocGxheWVyLnBsYXkoKSk7XG4gICAgICAgICAgfSBlbHNlIGlmICghZG9uZSAmJiBwbGF5ZXIucGxheWluZykge1xuICAgICAgICAgICAgc2Vlay5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCAnJyk7XG4gICAgICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pOyAvLyBGaXggcmFuZ2UgaW5wdXRzIG9uIGlPU1xuICAgICAgICAvLyBTdXBlciB3ZWlyZCBpT1MgYnVnIHdoZXJlIGFmdGVyIHlvdSBpbnRlcmFjdCB3aXRoIGFuIDxpbnB1dCB0eXBlPVwicmFuZ2VcIj4sXG4gICAgICAgIC8vIGl0IHRha2VzIG92ZXIgZnVydGhlciBpbnRlcmFjdGlvbnMgb24gdGhlIHBhZ2UuIFRoaXMgaXMgYSBoYWNrXG5cbiAgICAgICAgaWYgKGJyb3dzZXIuaXNJb3MpIHtcbiAgICAgICAgICB2YXIgaW5wdXRzID0gZ2V0RWxlbWVudHMuY2FsbChwbGF5ZXIsICdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcbiAgICAgICAgICBBcnJheS5mcm9tKGlucHV0cykuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMuYmluZChpbnB1dCwgaW5wdXRFdmVudCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXBhaW50KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBTZWVrXG5cblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuaW5wdXRzLnNlZWssIGlucHV0RXZlbnQsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciBzZWVrID0gZXZlbnQuY3VycmVudFRhcmdldDsgLy8gSWYgaXQgZXhpc3RzLCB1c2Ugc2Vlay12YWx1ZSBpbnN0ZWFkIG9mIFwidmFsdWVcIiBmb3IgY29uc2lzdGVuY3kgd2l0aCB0b29sdGlwIHRpbWUgKCM5NTQpXG5cbiAgICAgICAgICB2YXIgc2Vla1RvID0gc2Vlay5nZXRBdHRyaWJ1dGUoJ3NlZWstdmFsdWUnKTtcblxuICAgICAgICAgIGlmIChpcyQxLmVtcHR5KHNlZWtUbykpIHtcbiAgICAgICAgICAgIHNlZWtUbyA9IHNlZWsudmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2Vlay5yZW1vdmVBdHRyaWJ1dGUoJ3NlZWstdmFsdWUnKTtcbiAgICAgICAgICBwbGF5ZXIuY3VycmVudFRpbWUgPSBzZWVrVG8gLyBzZWVrLm1heCAqIHBsYXllci5kdXJhdGlvbjtcbiAgICAgICAgfSwgJ3NlZWsnKTsgLy8gU2VlayB0b29sdGlwXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLnByb2dyZXNzLCAnbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHJldHVybiBjb250cm9scy51cGRhdGVTZWVrVG9vbHRpcC5jYWxsKHBsYXllciwgZXZlbnQpO1xuICAgICAgICB9KTsgLy8gUHJldmlldyB0aHVtYm5haWxzIHBsdWdpblxuICAgICAgICAvLyBUT0RPOiBSZWFsbHkgbmVlZCB0byB3b3JrIG9uIHNvbWUgc29ydCBvZiBwbHVnLWluIHdpZGUgZXZlbnQgYnVzIG9yIHB1Yi1zdWIgZm9yIHRoaXNcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMucHJvZ3Jlc3MsICdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIHByZXZpZXdUaHVtYm5haWxzID0gcGxheWVyLnByZXZpZXdUaHVtYm5haWxzO1xuXG4gICAgICAgICAgaWYgKHByZXZpZXdUaHVtYm5haWxzICYmIHByZXZpZXdUaHVtYm5haWxzLmxvYWRlZCkge1xuICAgICAgICAgICAgcHJldmlld1RodW1ibmFpbHMuc3RhcnRNb3ZlKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pOyAvLyBIaWRlIHRodW1ibmFpbCBwcmV2aWV3IC0gb24gbW91c2UgY2xpY2ssIG1vdXNlIGxlYXZlLCBhbmQgdmlkZW8gcGxheS9zZWVrLiBBbGwgZm91ciBhcmUgcmVxdWlyZWQsIGUuZy4sIGZvciBidWZmZXJpbmdcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMucHJvZ3Jlc3MsICdtb3VzZWxlYXZlIHRvdWNoZW5kIGNsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBwcmV2aWV3VGh1bWJuYWlscyA9IHBsYXllci5wcmV2aWV3VGh1bWJuYWlscztcblxuICAgICAgICAgIGlmIChwcmV2aWV3VGh1bWJuYWlscyAmJiBwcmV2aWV3VGh1bWJuYWlscy5sb2FkZWQpIHtcbiAgICAgICAgICAgIHByZXZpZXdUaHVtYm5haWxzLmVuZE1vdmUoZmFsc2UsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7IC8vIFNob3cgc2NydWJiaW5nIHByZXZpZXdcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMucHJvZ3Jlc3MsICdtb3VzZWRvd24gdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciBwcmV2aWV3VGh1bWJuYWlscyA9IHBsYXllci5wcmV2aWV3VGh1bWJuYWlscztcblxuICAgICAgICAgIGlmIChwcmV2aWV3VGh1bWJuYWlscyAmJiBwcmV2aWV3VGh1bWJuYWlscy5sb2FkZWQpIHtcbiAgICAgICAgICAgIHByZXZpZXdUaHVtYm5haWxzLnN0YXJ0U2NydWJiaW5nKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMucHJvZ3Jlc3MsICdtb3VzZXVwIHRvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIHByZXZpZXdUaHVtYm5haWxzID0gcGxheWVyLnByZXZpZXdUaHVtYm5haWxzO1xuXG4gICAgICAgICAgaWYgKHByZXZpZXdUaHVtYm5haWxzICYmIHByZXZpZXdUaHVtYm5haWxzLmxvYWRlZCkge1xuICAgICAgICAgICAgcHJldmlld1RodW1ibmFpbHMuZW5kU2NydWJiaW5nKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pOyAvLyBQb2x5ZmlsbCBmb3IgbG93ZXIgZmlsbCBpbiA8aW5wdXQgdHlwZT1cInJhbmdlXCI+IGZvciB3ZWJraXRcblxuICAgICAgICBpZiAoYnJvd3Nlci5pc1dlYmtpdCkge1xuICAgICAgICAgIEFycmF5LmZyb20oZ2V0RWxlbWVudHMuY2FsbChwbGF5ZXIsICdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgX3RoaXMzLmJpbmQoZWxlbWVudCwgJ2lucHV0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiBjb250cm9scy51cGRhdGVSYW5nZUZpbGwuY2FsbChwbGF5ZXIsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBDdXJyZW50IHRpbWUgaW52ZXJ0XG4gICAgICAgIC8vIE9ubHkgaWYgb25lIHRpbWUgZWxlbWVudCBpcyB1c2VkIGZvciBib3RoIGN1cnJlbnRUaW1lIGFuZCBkdXJhdGlvblxuXG5cbiAgICAgICAgaWYgKHBsYXllci5jb25maWcudG9nZ2xlSW52ZXJ0ICYmICFpcyQxLmVsZW1lbnQoZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbikpIHtcbiAgICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuZGlzcGxheS5jdXJyZW50VGltZSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB3ZSdyZSBhdCB0aGUgc3RhcnRcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuY3VycmVudFRpbWUgPT09IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwbGF5ZXIuY29uZmlnLmludmVydFRpbWUgPSAhcGxheWVyLmNvbmZpZy5pbnZlcnRUaW1lO1xuXG4gICAgICAgICAgICBjb250cm9scy50aW1lVXBkYXRlLmNhbGwocGxheWVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBWb2x1bWVcblxuXG4gICAgICAgIHRoaXMuYmluZChlbGVtZW50cy5pbnB1dHMudm9sdW1lLCBpbnB1dEV2ZW50LCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBwbGF5ZXIudm9sdW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICB9LCAndm9sdW1lJyk7IC8vIFVwZGF0ZSBjb250cm9scy5ob3ZlciBzdGF0ZSAodXNlZCBmb3IgdWkudG9nZ2xlQ29udHJvbHMgdG8gYXZvaWQgaGlkaW5nIHdoZW4gaW50ZXJhY3RpbmcpXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmNvbnRyb2xzLCAnbW91c2VlbnRlciBtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgZWxlbWVudHMuY29udHJvbHMuaG92ZXIgPSAhcGxheWVyLnRvdWNoICYmIGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJztcbiAgICAgICAgfSk7IC8vIEFsc28gdXBkYXRlIGNvbnRyb2xzLmhvdmVyIHN0YXRlIGZvciBhbnkgbm9uLXBsYXllciBjaGlsZHJlbiBvZiBmdWxsc2NyZWVuIGVsZW1lbnQgKGFzIGFib3ZlKVxuXG4gICAgICAgIGlmIChlbGVtZW50cy5mdWxsc2NyZWVuKSB7XG4gICAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50cy5mdWxsc2NyZWVuLmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHJldHVybiAhYy5jb250YWlucyhlbGVtZW50cy5jb250YWluZXIpO1xuICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICBfdGhpczMuYmluZChjaGlsZCwgJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICBlbGVtZW50cy5jb250cm9scy5ob3ZlciA9ICFwbGF5ZXIudG91Y2ggJiYgZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gLy8gVXBkYXRlIGNvbnRyb2xzLnByZXNzZWQgc3RhdGUgKHVzZWQgZm9yIHVpLnRvZ2dsZUNvbnRyb2xzIHRvIGF2b2lkIGhpZGluZyB3aGVuIGludGVyYWN0aW5nKVxuXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmNvbnRyb2xzLCAnbW91c2Vkb3duIG1vdXNldXAgdG91Y2hzdGFydCB0b3VjaGVuZCB0b3VjaGNhbmNlbCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGVsZW1lbnRzLmNvbnRyb2xzLnByZXNzZWQgPSBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10uaW5jbHVkZXMoZXZlbnQudHlwZSk7XG4gICAgICAgIH0pOyAvLyBTaG93IGNvbnRyb2xzIHdoZW4gdGhleSByZWNlaXZlIGZvY3VzIChlLmcuLCB3aGVuIHVzaW5nIGtleWJvYXJkIHRhYiBrZXkpXG5cbiAgICAgICAgdGhpcy5iaW5kKGVsZW1lbnRzLmNvbnRyb2xzLCAnZm9jdXNpbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgY29uZmlnID0gcGxheWVyLmNvbmZpZyxcbiAgICAgICAgICAgICAgdGltZXJzID0gcGxheWVyLnRpbWVyczsgLy8gU2tpcCB0cmFuc2l0aW9uIHRvIHByZXZlbnQgZm9jdXMgZnJvbSBzY3JvbGxpbmcgdGhlIHBhcmVudCBlbGVtZW50XG5cbiAgICAgICAgICB0b2dnbGVDbGFzcyhlbGVtZW50cy5jb250cm9scywgY29uZmlnLmNsYXNzTmFtZXMubm9UcmFuc2l0aW9uLCB0cnVlKTsgLy8gVG9nZ2xlXG5cbiAgICAgICAgICB1aS50b2dnbGVDb250cm9scy5jYWxsKHBsYXllciwgdHJ1ZSk7IC8vIFJlc3RvcmUgdHJhbnNpdGlvblxuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzcyhlbGVtZW50cy5jb250cm9scywgY29uZmlnLmNsYXNzTmFtZXMubm9UcmFuc2l0aW9uLCBmYWxzZSk7XG4gICAgICAgICAgfSwgMCk7IC8vIERlbGF5IGEgbGl0dGxlIG1vcmUgZm9yIG1vdXNlIHVzZXJzXG5cbiAgICAgICAgICB2YXIgZGVsYXkgPSBfdGhpczMudG91Y2ggPyAzMDAwIDogNDAwMDsgLy8gQ2xlYXIgdGltZXJcblxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcnMuY29udHJvbHMpOyAvLyBIaWRlIGFnYWluIGFmdGVyIGRlbGF5XG5cbiAgICAgICAgICB0aW1lcnMuY29udHJvbHMgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1aS50b2dnbGVDb250cm9scy5jYWxsKHBsYXllciwgZmFsc2UpO1xuICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfSk7IC8vIE1vdXNlIHdoZWVsIGZvciB2b2x1bWVcblxuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudHMuaW5wdXRzLnZvbHVtZSwgJ3doZWVsJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgLy8gRGV0ZWN0IFwibmF0dXJhbFwiIHNjcm9sbCAtIHN1cHBvcmVkIG9uIE9TIFggU2FmYXJpIG9ubHlcbiAgICAgICAgICAvLyBPdGhlciBicm93c2VycyBvbiBPUyBYIHdpbGwgYmUgaW52ZXJ0ZWQgdW50aWwgc3VwcG9ydCBpbXByb3Zlc1xuICAgICAgICAgIHZhciBpbnZlcnRlZCA9IGV2ZW50LndlYmtpdERpcmVjdGlvbkludmVydGVkRnJvbURldmljZTsgLy8gR2V0IGRlbHRhIGZyb20gZXZlbnQuIEludmVydCBpZiBgaW52ZXJ0ZWRgIGlzIHRydWVcblxuICAgICAgICAgIHZhciBfbWFwID0gW2V2ZW50LmRlbHRhWCwgLWV2ZW50LmRlbHRhWV0ubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGludmVydGVkID8gLXZhbHVlIDogdmFsdWU7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF9tYXAyID0gX3NsaWNlZFRvQXJyYXkoX21hcCwgMiksXG4gICAgICAgICAgICAgIHggPSBfbWFwMlswXSxcbiAgICAgICAgICAgICAgeSA9IF9tYXAyWzFdOyAvLyBVc2luZyB0aGUgYmlnZ2VzdCBkZWx0YSwgbm9ybWFsaXplIHRvIDEgb3IgLTEgKG9yIDAgaWYgbm8gZGVsdGEpXG5cblxuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBNYXRoLnNpZ24oTWF0aC5hYnMoeCkgPiBNYXRoLmFicyh5KSA/IHggOiB5KTsgLy8gQ2hhbmdlIHRoZSB2b2x1bWUgYnkgMiVcblxuICAgICAgICAgIHBsYXllci5pbmNyZWFzZVZvbHVtZShkaXJlY3Rpb24gLyA1MCk7IC8vIERvbid0IGJyZWFrIHBhZ2Ugc2Nyb2xsaW5nIGF0IG1heCBhbmQgbWluXG5cbiAgICAgICAgICB2YXIgdm9sdW1lID0gcGxheWVyLm1lZGlhLnZvbHVtZTtcblxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IDEgJiYgdm9sdW1lIDwgMSB8fCBkaXJlY3Rpb24gPT09IC0xICYmIHZvbHVtZSA+IDApIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAndm9sdW1lJywgZmFsc2UpO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBMaXN0ZW5lcnM7XG4gIH0oKTtcblxuICB2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxuICBmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7XG4gIFx0cmV0dXJuIG1vZHVsZSA9IHsgZXhwb3J0czoge30gfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xuICB9XG5cbiAgdmFyIGxvYWRqc191bWQgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7XG4gICAgKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgICB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgICAgfVxuICAgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvKipcbiAgICAgICAqIEdsb2JhbCBkZXBlbmRlbmNpZXMuXG4gICAgICAgKiBAZ2xvYmFsIHtPYmplY3R9IGRvY3VtZW50IC0gRE9NXG4gICAgICAgKi9cbiAgICAgIHZhciBkZXZudWxsID0gZnVuY3Rpb24gZGV2bnVsbCgpIHt9LFxuICAgICAgICAgIGJ1bmRsZUlkQ2FjaGUgPSB7fSxcbiAgICAgICAgICBidW5kbGVSZXN1bHRDYWNoZSA9IHt9LFxuICAgICAgICAgIGJ1bmRsZUNhbGxiYWNrUXVldWUgPSB7fTtcbiAgICAgIC8qKlxuICAgICAgICogU3Vic2NyaWJlIHRvIGJ1bmRsZSBsb2FkIGV2ZW50LlxuICAgICAgICogQHBhcmFtIHtzdHJpbmdbXX0gYnVuZGxlSWRzIC0gQnVuZGxlIGlkc1xuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tGbiAtIFRoZSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICovXG5cblxuICAgICAgZnVuY3Rpb24gc3Vic2NyaWJlKGJ1bmRsZUlkcywgY2FsbGJhY2tGbikge1xuICAgICAgICAvLyBsaXN0aWZ5XG4gICAgICAgIGJ1bmRsZUlkcyA9IGJ1bmRsZUlkcy5wdXNoID8gYnVuZGxlSWRzIDogW2J1bmRsZUlkc107XG4gICAgICAgIHZhciBkZXBzTm90Rm91bmQgPSBbXSxcbiAgICAgICAgICAgIGkgPSBidW5kbGVJZHMubGVuZ3RoLFxuICAgICAgICAgICAgbnVtV2FpdGluZyA9IGksXG4gICAgICAgICAgICBmbixcbiAgICAgICAgICAgIGJ1bmRsZUlkLFxuICAgICAgICAgICAgcixcbiAgICAgICAgICAgIHE7IC8vIGRlZmluZSBjYWxsYmFjayBmdW5jdGlvblxuXG4gICAgICAgIGZuID0gZnVuY3Rpb24gZm4oYnVuZGxlSWQsIHBhdGhzTm90Rm91bmQpIHtcbiAgICAgICAgICBpZiAocGF0aHNOb3RGb3VuZC5sZW5ndGgpIGRlcHNOb3RGb3VuZC5wdXNoKGJ1bmRsZUlkKTtcbiAgICAgICAgICBudW1XYWl0aW5nLS07XG4gICAgICAgICAgaWYgKCFudW1XYWl0aW5nKSBjYWxsYmFja0ZuKGRlcHNOb3RGb3VuZCk7XG4gICAgICAgIH07IC8vIHJlZ2lzdGVyIGNhbGxiYWNrXG5cblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgYnVuZGxlSWQgPSBidW5kbGVJZHNbaV07IC8vIGV4ZWN1dGUgY2FsbGJhY2sgaWYgaW4gcmVzdWx0IGNhY2hlXG5cbiAgICAgICAgICByID0gYnVuZGxlUmVzdWx0Q2FjaGVbYnVuZGxlSWRdO1xuXG4gICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgIGZuKGJ1bmRsZUlkLCByKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gLy8gYWRkIHRvIGNhbGxiYWNrIHF1ZXVlXG5cblxuICAgICAgICAgIHEgPSBidW5kbGVDYWxsYmFja1F1ZXVlW2J1bmRsZUlkXSA9IGJ1bmRsZUNhbGxiYWNrUXVldWVbYnVuZGxlSWRdIHx8IFtdO1xuICAgICAgICAgIHEucHVzaChmbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUHVibGlzaCBidW5kbGUgbG9hZCBldmVudC5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBidW5kbGVJZCAtIEJ1bmRsZSBpZFxuICAgICAgICogQHBhcmFtIHtzdHJpbmdbXX0gcGF0aHNOb3RGb3VuZCAtIExpc3Qgb2YgZmlsZXMgbm90IGZvdW5kXG4gICAgICAgKi9cblxuXG4gICAgICBmdW5jdGlvbiBwdWJsaXNoKGJ1bmRsZUlkLCBwYXRoc05vdEZvdW5kKSB7XG4gICAgICAgIC8vIGV4aXQgaWYgaWQgaXNuJ3QgZGVmaW5lZFxuICAgICAgICBpZiAoIWJ1bmRsZUlkKSByZXR1cm47XG4gICAgICAgIHZhciBxID0gYnVuZGxlQ2FsbGJhY2tRdWV1ZVtidW5kbGVJZF07IC8vIGNhY2hlIHJlc3VsdFxuXG4gICAgICAgIGJ1bmRsZVJlc3VsdENhY2hlW2J1bmRsZUlkXSA9IHBhdGhzTm90Rm91bmQ7IC8vIGV4aXQgaWYgcXVldWUgaXMgZW1wdHlcblxuICAgICAgICBpZiAoIXEpIHJldHVybjsgLy8gZW1wdHkgY2FsbGJhY2sgcXVldWVcblxuICAgICAgICB3aGlsZSAocS5sZW5ndGgpIHtcbiAgICAgICAgICBxWzBdKGJ1bmRsZUlkLCBwYXRoc05vdEZvdW5kKTtcbiAgICAgICAgICBxLnNwbGljZSgwLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBFeGVjdXRlIGNhbGxiYWNrcy5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBhcmdzIC0gVGhlIGNhbGxiYWNrIGFyZ3NcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGRlcHNOb3RGb3VuZCAtIExpc3Qgb2YgZGVwZW5kZW5jaWVzIG5vdCBmb3VuZFxuICAgICAgICovXG5cblxuICAgICAgZnVuY3Rpb24gZXhlY3V0ZUNhbGxiYWNrcyhhcmdzLCBkZXBzTm90Rm91bmQpIHtcbiAgICAgICAgLy8gYWNjZXB0IGZ1bmN0aW9uIGFzIGFyZ3VtZW50XG4gICAgICAgIGlmIChhcmdzLmNhbGwpIGFyZ3MgPSB7XG4gICAgICAgICAgc3VjY2VzczogYXJnc1xuICAgICAgICB9OyAvLyBzdWNjZXNzIGFuZCBlcnJvciBjYWxsYmFja3NcblxuICAgICAgICBpZiAoZGVwc05vdEZvdW5kLmxlbmd0aCkgKGFyZ3MuZXJyb3IgfHwgZGV2bnVsbCkoZGVwc05vdEZvdW5kKTtlbHNlIChhcmdzLnN1Y2Nlc3MgfHwgZGV2bnVsbCkoYXJncyk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIExvYWQgaW5kaXZpZHVhbCBmaWxlLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgZmlsZSBwYXRoXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja0ZuIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICAgKi9cblxuXG4gICAgICBmdW5jdGlvbiBsb2FkRmlsZShwYXRoLCBjYWxsYmFja0ZuLCBhcmdzLCBudW1Ucmllcykge1xuICAgICAgICB2YXIgZG9jID0gZG9jdW1lbnQsXG4gICAgICAgICAgICBhc3luYyA9IGFyZ3MuYXN5bmMsXG4gICAgICAgICAgICBtYXhUcmllcyA9IChhcmdzLm51bVJldHJpZXMgfHwgMCkgKyAxLFxuICAgICAgICAgICAgYmVmb3JlQ2FsbGJhY2tGbiA9IGFyZ3MuYmVmb3JlIHx8IGRldm51bGwsXG4gICAgICAgICAgICBwYXRobmFtZSA9IHBhdGgucmVwbGFjZSgvW1xcP3wjXS4qJC8sICcnKSxcbiAgICAgICAgICAgIHBhdGhTdHJpcHBlZCA9IHBhdGgucmVwbGFjZSgvXihjc3N8aW1nKSEvLCAnJyksXG4gICAgICAgICAgICBpc0xlZ2FjeUlFQ3NzLFxuICAgICAgICAgICAgZTtcbiAgICAgICAgbnVtVHJpZXMgPSBudW1UcmllcyB8fCAwO1xuXG4gICAgICAgIGlmICgvKF5jc3MhfFxcLmNzcyQpLy50ZXN0KHBhdGhuYW1lKSkge1xuICAgICAgICAgIC8vIGNzc1xuICAgICAgICAgIGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAgIGUucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgICAgIGUuaHJlZiA9IHBhdGhTdHJpcHBlZDsgLy8gdGFnIElFOStcblxuICAgICAgICAgIGlzTGVnYWN5SUVDc3MgPSAnaGlkZUZvY3VzJyBpbiBlOyAvLyB1c2UgcHJlbG9hZCBpbiBJRSBFZGdlICh0byBkZXRlY3QgbG9hZCBlcnJvcnMpXG5cbiAgICAgICAgICBpZiAoaXNMZWdhY3lJRUNzcyAmJiBlLnJlbExpc3QpIHtcbiAgICAgICAgICAgIGlzTGVnYWN5SUVDc3MgPSAwO1xuICAgICAgICAgICAgZS5yZWwgPSAncHJlbG9hZCc7XG4gICAgICAgICAgICBlLmFzID0gJ3N0eWxlJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoLyheaW1nIXxcXC4ocG5nfGdpZnxqcGd8c3ZnfHdlYnApJCkvLnRlc3QocGF0aG5hbWUpKSB7XG4gICAgICAgICAgLy8gaW1hZ2VcbiAgICAgICAgICBlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgIGUuc3JjID0gcGF0aFN0cmlwcGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGphdmFzY3JpcHRcbiAgICAgICAgICBlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgIGUuc3JjID0gcGF0aDtcbiAgICAgICAgICBlLmFzeW5jID0gYXN5bmMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhc3luYztcbiAgICAgICAgfVxuXG4gICAgICAgIGUub25sb2FkID0gZS5vbmVycm9yID0gZS5vbmJlZm9yZWxvYWQgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gZXYudHlwZVswXTsgLy8gdHJlYXQgZW1wdHkgc3R5bGVzaGVldHMgYXMgZmFpbHVyZXMgdG8gZ2V0IGFyb3VuZCBsYWNrIG9mIG9uZXJyb3JcbiAgICAgICAgICAvLyBzdXBwb3J0IGluIElFOS0xMVxuXG4gICAgICAgICAgaWYgKGlzTGVnYWN5SUVDc3MpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmICghZS5zaGVldC5jc3NUZXh0Lmxlbmd0aCkgcmVzdWx0ID0gJ2UnO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAvLyBzaGVldHMgb2JqZWN0cyBjcmVhdGVkIGZyb20gbG9hZCBlcnJvcnMgZG9uJ3QgYWxsb3cgYWNjZXNzIHRvXG4gICAgICAgICAgICAgIC8vIGBjc3NUZXh0YCAodW5sZXNzIGVycm9yIGlzIENvZGU6MTggU2VjdXJpdHlFcnJvcilcbiAgICAgICAgICAgICAgaWYgKHguY29kZSAhPSAxOCkgcmVzdWx0ID0gJ2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gaGFuZGxlIHJldHJpZXMgaW4gY2FzZSBvZiBsb2FkIGZhaWx1cmVcblxuXG4gICAgICAgICAgaWYgKHJlc3VsdCA9PSAnZScpIHtcbiAgICAgICAgICAgIC8vIGluY3JlbWVudCBjb3VudGVyXG4gICAgICAgICAgICBudW1UcmllcyArPSAxOyAvLyBleGl0IGZ1bmN0aW9uIGFuZCB0cnkgYWdhaW5cblxuICAgICAgICAgICAgaWYgKG51bVRyaWVzIDwgbWF4VHJpZXMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGxvYWRGaWxlKHBhdGgsIGNhbGxiYWNrRm4sIGFyZ3MsIG51bVRyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGUucmVsID09ICdwcmVsb2FkJyAmJiBlLmFzID09ICdzdHlsZScpIHtcbiAgICAgICAgICAgIC8vIGFjdGl2YXRlIHByZWxvYWRlZCBzdHlsZXNoZWV0c1xuICAgICAgICAgICAgcmV0dXJuIGUucmVsID0gJ3N0eWxlc2hlZXQnOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICAgICAgICB9IC8vIGV4ZWN1dGUgY2FsbGJhY2tcblxuXG4gICAgICAgICAgY2FsbGJhY2tGbihwYXRoLCByZXN1bHQsIGV2LmRlZmF1bHRQcmV2ZW50ZWQpO1xuICAgICAgICB9OyAvLyBhZGQgdG8gZG9jdW1lbnQgKHVubGVzcyBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWApXG5cblxuICAgICAgICBpZiAoYmVmb3JlQ2FsbGJhY2tGbihwYXRoLCBlKSAhPT0gZmFsc2UpIGRvYy5oZWFkLmFwcGVuZENoaWxkKGUpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBMb2FkIG11bHRpcGxlIGZpbGVzLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmdbXX0gcGF0aHMgLSBUaGUgZmlsZSBwYXRoc1xuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tGbiAtIFRoZSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICovXG5cblxuICAgICAgZnVuY3Rpb24gbG9hZEZpbGVzKHBhdGhzLCBjYWxsYmFja0ZuLCBhcmdzKSB7XG4gICAgICAgIC8vIGxpc3RpZnkgcGF0aHNcbiAgICAgICAgcGF0aHMgPSBwYXRocy5wdXNoID8gcGF0aHMgOiBbcGF0aHNdO1xuICAgICAgICB2YXIgbnVtV2FpdGluZyA9IHBhdGhzLmxlbmd0aCxcbiAgICAgICAgICAgIHggPSBudW1XYWl0aW5nLFxuICAgICAgICAgICAgcGF0aHNOb3RGb3VuZCA9IFtdLFxuICAgICAgICAgICAgZm4sXG4gICAgICAgICAgICBpOyAvLyBkZWZpbmUgY2FsbGJhY2sgZnVuY3Rpb25cblxuICAgICAgICBmbiA9IGZ1bmN0aW9uIGZuKHBhdGgsIHJlc3VsdCwgZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgIC8vIGhhbmRsZSBlcnJvclxuICAgICAgICAgIGlmIChyZXN1bHQgPT0gJ2UnKSBwYXRoc05vdEZvdW5kLnB1c2gocGF0aCk7IC8vIGhhbmRsZSBiZWZvcmVsb2FkIGV2ZW50LiBJZiBkZWZhdWx0UHJldmVudGVkIHRoZW4gdGhhdCBtZWFucyB0aGUgbG9hZFxuICAgICAgICAgIC8vIHdpbGwgYmUgYmxvY2tlZCAoZXguIEdob3N0ZXJ5L0FCUCBvbiBTYWZhcmkpXG5cbiAgICAgICAgICBpZiAocmVzdWx0ID09ICdiJykge1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHBhdGhzTm90Rm91bmQucHVzaChwYXRoKTtlbHNlIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBudW1XYWl0aW5nLS07XG4gICAgICAgICAgaWYgKCFudW1XYWl0aW5nKSBjYWxsYmFja0ZuKHBhdGhzTm90Rm91bmQpO1xuICAgICAgICB9OyAvLyBsb2FkIHNjcmlwdHNcblxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB4OyBpKyspIHtcbiAgICAgICAgICBsb2FkRmlsZShwYXRoc1tpXSwgZm4sIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEluaXRpYXRlIHNjcmlwdCBsb2FkIGFuZCByZWdpc3RlciBidW5kbGUuXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8c3RyaW5nW10pfSBwYXRocyAtIFRoZSBmaWxlIHBhdGhzXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8RnVuY3Rpb258T2JqZWN0KX0gW2FyZzFdIC0gVGhlICgxKSBidW5kbGVJZCBvciAoMikgc3VjY2Vzc1xuICAgICAgICogICBjYWxsYmFjayBvciAoMykgb2JqZWN0IGxpdGVyYWwgd2l0aCBzdWNjZXNzL2Vycm9yIGFyZ3VtZW50cywgbnVtUmV0cmllcyxcbiAgICAgICAqICAgZXRjLlxuICAgICAgICogQHBhcmFtIHsoRnVuY3Rpb258T2JqZWN0KX0gW2FyZzJdIC0gVGhlICgxKSBzdWNjZXNzIGNhbGxiYWNrIG9yICgyKSBvYmplY3RcbiAgICAgICAqICAgbGl0ZXJhbCB3aXRoIHN1Y2Nlc3MvZXJyb3IgYXJndW1lbnRzLCBudW1SZXRyaWVzLCBldGMuXG4gICAgICAgKi9cblxuXG4gICAgICBmdW5jdGlvbiBsb2FkanMocGF0aHMsIGFyZzEsIGFyZzIpIHtcbiAgICAgICAgdmFyIGJ1bmRsZUlkLCBhcmdzOyAvLyBidW5kbGVJZCAoaWYgc3RyaW5nKVxuXG4gICAgICAgIGlmIChhcmcxICYmIGFyZzEudHJpbSkgYnVuZGxlSWQgPSBhcmcxOyAvLyBhcmdzIChkZWZhdWx0IGlzIHt9KVxuXG4gICAgICAgIGFyZ3MgPSAoYnVuZGxlSWQgPyBhcmcyIDogYXJnMSkgfHwge307IC8vIHRocm93IGVycm9yIGlmIGJ1bmRsZSBpcyBhbHJlYWR5IGRlZmluZWRcblxuICAgICAgICBpZiAoYnVuZGxlSWQpIHtcbiAgICAgICAgICBpZiAoYnVuZGxlSWQgaW4gYnVuZGxlSWRDYWNoZSkge1xuICAgICAgICAgICAgdGhyb3cgXCJMb2FkSlNcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnVuZGxlSWRDYWNoZVtidW5kbGVJZF0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRGbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBsb2FkRmlsZXMocGF0aHMsIGZ1bmN0aW9uIChwYXRoc05vdEZvdW5kKSB7XG4gICAgICAgICAgICAvLyBleGVjdXRlIGNhbGxiYWNrc1xuICAgICAgICAgICAgZXhlY3V0ZUNhbGxiYWNrcyhhcmdzLCBwYXRoc05vdEZvdW5kKTsgLy8gcmVzb2x2ZSBQcm9taXNlXG5cbiAgICAgICAgICAgIGlmIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgIGV4ZWN1dGVDYWxsYmFja3Moe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHJlc29sdmUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHJlamVjdFxuICAgICAgICAgICAgICB9LCBwYXRoc05vdEZvdW5kKTtcbiAgICAgICAgICAgIH0gLy8gcHVibGlzaCBidW5kbGUgbG9hZCBldmVudFxuXG5cbiAgICAgICAgICAgIHB1Ymxpc2goYnVuZGxlSWQsIHBhdGhzTm90Rm91bmQpO1xuICAgICAgICAgIH0sIGFyZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFyZ3MucmV0dXJuUHJvbWlzZSkgcmV0dXJuIG5ldyBQcm9taXNlKGxvYWRGbik7ZWxzZSBsb2FkRm4oKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRXhlY3V0ZSBjYWxsYmFja3Mgd2hlbiBkZXBlbmRlbmNpZXMgaGF2ZSBiZWVuIHNhdGlzZmllZC5cbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xzdHJpbmdbXSl9IGRlcHMgLSBMaXN0IG9mIGJ1bmRsZSBpZHNcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIC0gc3VjY2Vzcy9lcnJvciBhcmd1bWVudHNcbiAgICAgICAqL1xuXG5cbiAgICAgIGxvYWRqcy5yZWFkeSA9IGZ1bmN0aW9uIHJlYWR5KGRlcHMsIGFyZ3MpIHtcbiAgICAgICAgLy8gc3Vic2NyaWJlIHRvIGJ1bmRsZSBsb2FkIGV2ZW50XG4gICAgICAgIHN1YnNjcmliZShkZXBzLCBmdW5jdGlvbiAoZGVwc05vdEZvdW5kKSB7XG4gICAgICAgICAgLy8gZXhlY3V0ZSBjYWxsYmFja3NcbiAgICAgICAgICBleGVjdXRlQ2FsbGJhY2tzKGFyZ3MsIGRlcHNOb3RGb3VuZCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbG9hZGpzO1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogTWFudWFsbHkgc2F0aXNmeSBidW5kbGUgZGVwZW5kZW5jaWVzLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGJ1bmRsZUlkIC0gVGhlIGJ1bmRsZSBpZFxuICAgICAgICovXG5cblxuICAgICAgbG9hZGpzLmRvbmUgPSBmdW5jdGlvbiBkb25lKGJ1bmRsZUlkKSB7XG4gICAgICAgIHB1Ymxpc2goYnVuZGxlSWQsIFtdKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIFJlc2V0IGxvYWRqcyBkZXBlbmRlbmNpZXMgc3RhdHVzZXNcbiAgICAgICAqL1xuXG5cbiAgICAgIGxvYWRqcy5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICBidW5kbGVJZENhY2hlID0ge307XG4gICAgICAgIGJ1bmRsZVJlc3VsdENhY2hlID0ge307XG4gICAgICAgIGJ1bmRsZUNhbGxiYWNrUXVldWUgPSB7fTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIERldGVybWluZSBpZiBidW5kbGUgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkXG4gICAgICAgKiBAcGFyYW0gU3RyaW5nfSBidW5kbGVJZCAtIFRoZSBidW5kbGUgaWRcbiAgICAgICAqL1xuXG5cbiAgICAgIGxvYWRqcy5pc0RlZmluZWQgPSBmdW5jdGlvbiBpc0RlZmluZWQoYnVuZGxlSWQpIHtcbiAgICAgICAgcmV0dXJuIGJ1bmRsZUlkIGluIGJ1bmRsZUlkQ2FjaGU7XG4gICAgICB9OyAvLyBleHBvcnRcblxuXG4gICAgICByZXR1cm4gbG9hZGpzO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBmdW5jdGlvbiBsb2FkU2NyaXB0KHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBsb2FkanNfdW1kKHVybCwge1xuICAgICAgICBzdWNjZXNzOiByZXNvbHZlLFxuICAgICAgICBlcnJvcjogcmVqZWN0XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSWQodXJsKSB7XG4gICAgaWYgKGlzJDEuZW1wdHkodXJsKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGlzJDEubnVtYmVyKE51bWJlcih1cmwpKSkge1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICB2YXIgcmVnZXggPSAvXi4qKHZpbWVvLmNvbVxcL3x2aWRlb1xcLykoXFxkKykuKi87XG4gICAgcmV0dXJuIHVybC5tYXRjaChyZWdleCkgPyBSZWdFeHAuJDIgOiB1cmw7XG4gIH0gLy8gU2V0IHBsYXliYWNrIHN0YXRlIGFuZCB0cmlnZ2VyIGNoYW5nZSAob25seSBvbiBhY3R1YWwgY2hhbmdlKVxuXG5cbiAgZnVuY3Rpb24gYXNzdXJlUGxheWJhY2tTdGF0ZShwbGF5KSB7XG4gICAgaWYgKHBsYXkgJiYgIXRoaXMuZW1iZWQuaGFzUGxheWVkKSB7XG4gICAgICB0aGlzLmVtYmVkLmhhc1BsYXllZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWVkaWEucGF1c2VkID09PSBwbGF5KSB7XG4gICAgICB0aGlzLm1lZGlhLnBhdXNlZCA9ICFwbGF5O1xuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcywgdGhpcy5tZWRpYSwgcGxheSA/ICdwbGF5JyA6ICdwYXVzZScpO1xuICAgIH1cbiAgfVxuXG4gIHZhciB2aW1lbyA9IHtcbiAgICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgICB2YXIgcGxheWVyID0gdGhpczsgLy8gQWRkIGVtYmVkIGNsYXNzIGZvciByZXNwb25zaXZlXG5cbiAgICAgIHRvZ2dsZUNsYXNzKHBsYXllci5lbGVtZW50cy53cmFwcGVyLCBwbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMuZW1iZWQsIHRydWUpOyAvLyBTZXQgc3BlZWQgb3B0aW9ucyBmcm9tIGNvbmZpZ1xuXG4gICAgICBwbGF5ZXIub3B0aW9ucy5zcGVlZCA9IHBsYXllci5jb25maWcuc3BlZWQub3B0aW9uczsgLy8gU2V0IGludGlhbCByYXRpb1xuXG4gICAgICBzZXRBc3BlY3RSYXRpby5jYWxsKHBsYXllcik7IC8vIExvYWQgdGhlIFNESyBpZiBub3QgYWxyZWFkeVxuXG4gICAgICBpZiAoIWlzJDEub2JqZWN0KHdpbmRvdy5WaW1lbykpIHtcbiAgICAgICAgbG9hZFNjcmlwdChwbGF5ZXIuY29uZmlnLnVybHMudmltZW8uc2RrKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2aW1lby5yZWFkeS5jYWxsKHBsYXllcik7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIHBsYXllci5kZWJ1Zy53YXJuKCdWaW1lbyBTREsgKHBsYXllci5qcykgZmFpbGVkIHRvIGxvYWQnLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmltZW8ucmVhZHkuY2FsbChwbGF5ZXIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gQVBJIFJlYWR5XG4gICAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIHBsYXllciA9IHRoaXM7XG4gICAgICB2YXIgY29uZmlnID0gcGxheWVyLmNvbmZpZy52aW1lbztcblxuICAgICAgdmFyIHByZW1pdW0gPSBjb25maWcucHJlbWl1bSxcbiAgICAgICAgICByZWZlcnJlclBvbGljeSA9IGNvbmZpZy5yZWZlcnJlclBvbGljeSxcbiAgICAgICAgICBmcmFtZVBhcmFtcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhjb25maWcsIFtcInByZW1pdW1cIiwgXCJyZWZlcnJlclBvbGljeVwiXSk7IC8vIElmIHRoZSBvd25lciBoYXMgYSBwcm8gb3IgcHJlbWl1bSBhY2NvdW50IHRoZW4gd2UgY2FuIGhpZGUgY29udHJvbHMgZXRjXG5cblxuICAgICAgaWYgKHByZW1pdW0pIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihmcmFtZVBhcmFtcywge1xuICAgICAgICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICAgICAgICBzaWRlZG9jazogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIEdldCBWaW1lbyBwYXJhbXMgZm9yIHRoZSBpZnJhbWVcblxuXG4gICAgICB2YXIgcGFyYW1zID0gYnVpbGRVcmxQYXJhbXMoX29iamVjdFNwcmVhZDIoe1xuICAgICAgICBsb29wOiBwbGF5ZXIuY29uZmlnLmxvb3AuYWN0aXZlLFxuICAgICAgICBhdXRvcGxheTogcGxheWVyLmF1dG9wbGF5LFxuICAgICAgICBtdXRlZDogcGxheWVyLm11dGVkLFxuICAgICAgICBnZXN0dXJlOiAnbWVkaWEnLFxuICAgICAgICBwbGF5c2lubGluZTogIXRoaXMuY29uZmlnLmZ1bGxzY3JlZW4uaW9zTmF0aXZlXG4gICAgICB9LCBmcmFtZVBhcmFtcykpOyAvLyBHZXQgdGhlIHNvdXJjZSBVUkwgb3IgSURcblxuICAgICAgdmFyIHNvdXJjZSA9IHBsYXllci5tZWRpYS5nZXRBdHRyaWJ1dGUoJ3NyYycpOyAvLyBHZXQgZnJvbSA8ZGl2PiBpZiBuZWVkZWRcblxuICAgICAgaWYgKGlzJDEuZW1wdHkoc291cmNlKSkge1xuICAgICAgICBzb3VyY2UgPSBwbGF5ZXIubWVkaWEuZ2V0QXR0cmlidXRlKHBsYXllci5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5pZCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBpZCA9IHBhcnNlSWQoc291cmNlKTsgLy8gQnVpbGQgYW4gaWZyYW1lXG5cbiAgICAgIHZhciBpZnJhbWUgPSBjcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgIHZhciBzcmMgPSBmb3JtYXQocGxheWVyLmNvbmZpZy51cmxzLnZpbWVvLmlmcmFtZSwgaWQsIHBhcmFtcyk7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYWxsb3dmdWxsc2NyZWVuJywgJycpO1xuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYWxsb3cnLCAnYXV0b3BsYXksZnVsbHNjcmVlbixwaWN0dXJlLWluLXBpY3R1cmUnKTsgLy8gU2V0IHRoZSByZWZlcnJlciBwb2xpY3kgaWYgcmVxdWlyZWRcblxuICAgICAgaWYgKCFpcyQxLmVtcHR5KHJlZmVycmVyUG9saWN5KSkge1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdyZWZlcnJlclBvbGljeScsIHJlZmVycmVyUG9saWN5KTtcbiAgICAgIH0gLy8gSW5qZWN0IHRoZSBwYWNrYWdlXG5cblxuICAgICAgdmFyIHBvc3RlciA9IHBsYXllci5wb3N0ZXI7XG5cbiAgICAgIGlmIChwcmVtaXVtKSB7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcG9zdGVyJywgcG9zdGVyKTtcbiAgICAgICAgcGxheWVyLm1lZGlhID0gcmVwbGFjZUVsZW1lbnQoaWZyYW1lLCBwbGF5ZXIubWVkaWEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6IHBsYXllci5jb25maWcuY2xhc3NOYW1lcy5lbWJlZENvbnRhaW5lcixcbiAgICAgICAgICAnZGF0YS1wb3N0ZXInOiBwb3N0ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgcGxheWVyLm1lZGlhID0gcmVwbGFjZUVsZW1lbnQod3JhcHBlciwgcGxheWVyLm1lZGlhKTtcbiAgICAgIH0gLy8gR2V0IHBvc3RlciBpbWFnZVxuXG5cbiAgICAgIGZldGNoKGZvcm1hdChwbGF5ZXIuY29uZmlnLnVybHMudmltZW8uYXBpLCBpZCksICdqc29uJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKGlzJDEuZW1wdHkocmVzcG9uc2UpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIEdldCB0aGUgVVJMIGZvciB0aHVtYm5haWxcblxuXG4gICAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHJlc3BvbnNlWzBdLnRodW1ibmFpbF9sYXJnZSk7IC8vIEdldCBvcmlnaW5hbCBpbWFnZVxuXG4gICAgICAgIHVybC5wYXRobmFtZSA9IFwiXCIuY29uY2F0KHVybC5wYXRobmFtZS5zcGxpdCgnXycpWzBdLCBcIi5qcGdcIik7IC8vIFNldCBhbmQgc2hvdyBwb3N0ZXJcblxuICAgICAgICB1aS5zZXRQb3N0ZXIuY2FsbChwbGF5ZXIsIHVybC5ocmVmKS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7XG4gICAgICB9KTsgLy8gU2V0dXAgaW5zdGFuY2VcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92aW1lby9wbGF5ZXIuanNcblxuICAgICAgcGxheWVyLmVtYmVkID0gbmV3IHdpbmRvdy5WaW1lby5QbGF5ZXIoaWZyYW1lLCB7XG4gICAgICAgIGF1dG9wYXVzZTogcGxheWVyLmNvbmZpZy5hdXRvcGF1c2UsXG4gICAgICAgIG11dGVkOiBwbGF5ZXIubXV0ZWRcbiAgICAgIH0pO1xuICAgICAgcGxheWVyLm1lZGlhLnBhdXNlZCA9IHRydWU7XG4gICAgICBwbGF5ZXIubWVkaWEuY3VycmVudFRpbWUgPSAwOyAvLyBEaXNhYmxlIG5hdGl2ZSB0ZXh0IHRyYWNrIHJlbmRlcmluZ1xuXG4gICAgICBpZiAocGxheWVyLnN1cHBvcnRlZC51aSkge1xuICAgICAgICBwbGF5ZXIuZW1iZWQuZGlzYWJsZVRleHRUcmFjaygpO1xuICAgICAgfSAvLyBDcmVhdGUgYSBmYXV4IEhUTUw1IEFQSSB1c2luZyB0aGUgVmltZW8gQVBJXG5cblxuICAgICAgcGxheWVyLm1lZGlhLnBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUuY2FsbChwbGF5ZXIsIHRydWUpO1xuICAgICAgICByZXR1cm4gcGxheWVyLmVtYmVkLnBsYXkoKTtcbiAgICAgIH07XG5cbiAgICAgIHBsYXllci5tZWRpYS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZS5jYWxsKHBsYXllciwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gcGxheWVyLmVtYmVkLnBhdXNlKCk7XG4gICAgICB9O1xuXG4gICAgICBwbGF5ZXIubWVkaWEuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGxheWVyLnBhdXNlKCk7XG4gICAgICAgIHBsYXllci5jdXJyZW50VGltZSA9IDA7XG4gICAgICB9OyAvLyBTZWVraW5nXG5cblxuICAgICAgdmFyIGN1cnJlbnRUaW1lID0gcGxheWVyLm1lZGlhLmN1cnJlbnRUaW1lO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ2N1cnJlbnRUaW1lJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudFRpbWU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHRpbWUpIHtcbiAgICAgICAgICAvLyBWaW1lbyB3aWxsIGF1dG9tYXRpY2FsbHkgcGxheSBvbiBzZWVrIGlmIHRoZSB2aWRlbyBoYXNuJ3QgYmVlbiBwbGF5ZWQgYmVmb3JlXG4gICAgICAgICAgLy8gR2V0IGN1cnJlbnQgcGF1c2VkIHN0YXRlIGFuZCB2b2x1bWUgZXRjXG4gICAgICAgICAgdmFyIGVtYmVkID0gcGxheWVyLmVtYmVkLFxuICAgICAgICAgICAgICBtZWRpYSA9IHBsYXllci5tZWRpYSxcbiAgICAgICAgICAgICAgcGF1c2VkID0gcGxheWVyLnBhdXNlZCxcbiAgICAgICAgICAgICAgdm9sdW1lID0gcGxheWVyLnZvbHVtZTtcbiAgICAgICAgICB2YXIgcmVzdG9yZVBhdXNlID0gcGF1c2VkICYmICFlbWJlZC5oYXNQbGF5ZWQ7IC8vIFNldCBzZWVraW5nIHN0YXRlIGFuZCB0cmlnZ2VyIGV2ZW50XG5cbiAgICAgICAgICBtZWRpYS5zZWVraW5nID0gdHJ1ZTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIG1lZGlhLCAnc2Vla2luZycpOyAvLyBJZiBwYXVzZWQsIG11dGUgdW50aWwgc2VlayBpcyBjb21wbGV0ZVxuXG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHJlc3RvcmVQYXVzZSAmJiBlbWJlZC5zZXRWb2x1bWUoMCkpIC8vIFNlZWtcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1iZWQuc2V0Q3VycmVudFRpbWUodGltZSk7XG4gICAgICAgICAgfSkgLy8gUmVzdG9yZSBwYXVzZWRcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdG9yZVBhdXNlICYmIGVtYmVkLnBhdXNlKCk7XG4gICAgICAgICAgfSkgLy8gUmVzdG9yZSB2b2x1bWVcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdG9yZVBhdXNlICYmIGVtYmVkLnNldFZvbHVtZSh2b2x1bWUpO1xuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsvLyBEbyBub3RoaW5nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBQbGF5YmFjayBzcGVlZFxuXG4gICAgICB2YXIgc3BlZWQgPSBwbGF5ZXIuY29uZmlnLnNwZWVkLnNlbGVjdGVkO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ3BsYXliYWNrUmF0ZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHNwZWVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAgIHBsYXllci5lbWJlZC5zZXRQbGF5YmFja1JhdGUoaW5wdXQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3BlZWQgPSBpbnB1dDtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncmF0ZWNoYW5nZScpO1xuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIENhbm5vdCBzZXQgUGxheWJhY2sgUmF0ZSwgVmlkZW8gaXMgcHJvYmFibHkgbm90IG9uIFBybyBhY2NvdW50XG4gICAgICAgICAgICBwbGF5ZXIub3B0aW9ucy5zcGVlZCA9IFsxXTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIFZvbHVtZVxuXG4gICAgICB2YXIgdm9sdW1lID0gcGxheWVyLmNvbmZpZy52b2x1bWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocGxheWVyLm1lZGlhLCAndm9sdW1lJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gdm9sdW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAgIHBsYXllci5lbWJlZC5zZXRWb2x1bWUoaW5wdXQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdm9sdW1lID0gaW5wdXQ7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gTXV0ZWRcblxuICAgICAgdmFyIG11dGVkID0gcGxheWVyLmNvbmZpZy5tdXRlZDtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdtdXRlZCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIG11dGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAgIHZhciB0b2dnbGUgPSBpcyQxLmJvb2xlYW4oaW5wdXQpID8gaW5wdXQgOiBmYWxzZTtcbiAgICAgICAgICBwbGF5ZXIuZW1iZWQuc2V0Vm9sdW1lKHRvZ2dsZSA/IDAgOiBwbGF5ZXIuY29uZmlnLnZvbHVtZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtdXRlZCA9IHRvZ2dsZTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndm9sdW1lY2hhbmdlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBMb29wXG5cbiAgICAgIHZhciBsb29wID0gcGxheWVyLmNvbmZpZy5sb29wO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ2xvb3AnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBsb29wO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAgIHZhciB0b2dnbGUgPSBpcyQxLmJvb2xlYW4oaW5wdXQpID8gaW5wdXQgOiBwbGF5ZXIuY29uZmlnLmxvb3AuYWN0aXZlO1xuICAgICAgICAgIHBsYXllci5lbWJlZC5zZXRMb29wKHRvZ2dsZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsb29wID0gdG9nZ2xlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gU291cmNlXG5cbiAgICAgIHZhciBjdXJyZW50U3JjO1xuICAgICAgcGxheWVyLmVtYmVkLmdldFZpZGVvVXJsKCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY3VycmVudFNyYyA9IHZhbHVlO1xuICAgICAgICBjb250cm9scy5zZXREb3dubG9hZFVybC5jYWxsKHBsYXllcik7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgX3RoaXMuZGVidWcud2FybihlcnJvcik7XG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdjdXJyZW50U3JjJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudFNyYztcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIEVuZGVkXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdlbmRlZCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHBsYXllci5jdXJyZW50VGltZSA9PT0gcGxheWVyLmR1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gU2V0IGFzcGVjdCByYXRpbyBiYXNlZCBvbiB2aWRlbyBzaXplXG5cbiAgICAgIFByb21pc2UuYWxsKFtwbGF5ZXIuZW1iZWQuZ2V0VmlkZW9XaWR0aCgpLCBwbGF5ZXIuZW1iZWQuZ2V0VmlkZW9IZWlnaHQoKV0pLnRoZW4oZnVuY3Rpb24gKGRpbWVuc2lvbnMpIHtcbiAgICAgICAgdmFyIF9kaW1lbnNpb25zID0gX3NsaWNlZFRvQXJyYXkoZGltZW5zaW9ucywgMiksXG4gICAgICAgICAgICB3aWR0aCA9IF9kaW1lbnNpb25zWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gX2RpbWVuc2lvbnNbMV07XG5cbiAgICAgICAgcGxheWVyLmVtYmVkLnJhdGlvID0gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICBzZXRBc3BlY3RSYXRpby5jYWxsKF90aGlzKTtcbiAgICAgIH0pOyAvLyBTZXQgYXV0b3BhdXNlXG5cbiAgICAgIHBsYXllci5lbWJlZC5zZXRBdXRvcGF1c2UocGxheWVyLmNvbmZpZy5hdXRvcGF1c2UpLnRoZW4oZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHBsYXllci5jb25maWcuYXV0b3BhdXNlID0gc3RhdGU7XG4gICAgICB9KTsgLy8gR2V0IHRpdGxlXG5cbiAgICAgIHBsYXllci5lbWJlZC5nZXRWaWRlb1RpdGxlKCkudGhlbihmdW5jdGlvbiAodGl0bGUpIHtcbiAgICAgICAgcGxheWVyLmNvbmZpZy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB1aS5zZXRUaXRsZS5jYWxsKF90aGlzKTtcbiAgICAgIH0pOyAvLyBHZXQgY3VycmVudCB0aW1lXG5cbiAgICAgIHBsYXllci5lbWJlZC5nZXRDdXJyZW50VGltZSgpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGN1cnJlbnRUaW1lID0gdmFsdWU7XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndGltZXVwZGF0ZScpO1xuICAgICAgfSk7IC8vIEdldCBkdXJhdGlvblxuXG4gICAgICBwbGF5ZXIuZW1iZWQuZ2V0RHVyYXRpb24oKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBwbGF5ZXIubWVkaWEuZHVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdkdXJhdGlvbmNoYW5nZScpO1xuICAgICAgfSk7IC8vIEdldCBjYXB0aW9uc1xuXG4gICAgICBwbGF5ZXIuZW1iZWQuZ2V0VGV4dFRyYWNrcygpLnRoZW4oZnVuY3Rpb24gKHRyYWNrcykge1xuICAgICAgICBwbGF5ZXIubWVkaWEudGV4dFRyYWNrcyA9IHRyYWNrcztcbiAgICAgICAgY2FwdGlvbnMuc2V0dXAuY2FsbChwbGF5ZXIpO1xuICAgICAgfSk7XG4gICAgICBwbGF5ZXIuZW1iZWQub24oJ2N1ZWNoYW5nZScsIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBfcmVmJGN1ZXMgPSBfcmVmLmN1ZXMsXG4gICAgICAgICAgICBjdWVzID0gX3JlZiRjdWVzID09PSB2b2lkIDAgPyBbXSA6IF9yZWYkY3VlcztcbiAgICAgICAgdmFyIHN0cmlwcGVkQ3VlcyA9IGN1ZXMubWFwKGZ1bmN0aW9uIChjdWUpIHtcbiAgICAgICAgICByZXR1cm4gc3RyaXBIVE1MKGN1ZS50ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhcHRpb25zLnVwZGF0ZUN1ZXMuY2FsbChwbGF5ZXIsIHN0cmlwcGVkQ3Vlcyk7XG4gICAgICB9KTtcbiAgICAgIHBsYXllci5lbWJlZC5vbignbG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBBc3N1cmUgc3RhdGUgYW5kIGV2ZW50cyBhcmUgdXBkYXRlZCBvbiBhdXRvcGxheVxuICAgICAgICBwbGF5ZXIuZW1iZWQuZ2V0UGF1c2VkKCkudGhlbihmdW5jdGlvbiAocGF1c2VkKSB7XG4gICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZS5jYWxsKHBsYXllciwgIXBhdXNlZCk7XG5cbiAgICAgICAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdwbGF5aW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaXMkMS5lbGVtZW50KHBsYXllci5lbWJlZC5lbGVtZW50KSAmJiBwbGF5ZXIuc3VwcG9ydGVkLnVpKSB7XG4gICAgICAgICAgdmFyIGZyYW1lID0gcGxheWVyLmVtYmVkLmVsZW1lbnQ7IC8vIEZpeCBrZXlib2FyZCBmb2N1cyBpc3N1ZXNcbiAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvMzE3XG5cbiAgICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgLTEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHBsYXllci5lbWJlZC5vbignYnVmZmVyc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnd2FpdGluZycpO1xuICAgICAgfSk7XG4gICAgICBwbGF5ZXIuZW1iZWQub24oJ2J1ZmZlcmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdwbGF5aW5nJyk7XG4gICAgICB9KTtcbiAgICAgIHBsYXllci5lbWJlZC5vbigncGxheScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZS5jYWxsKHBsYXllciwgdHJ1ZSk7XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncGxheWluZycpO1xuICAgICAgfSk7XG4gICAgICBwbGF5ZXIuZW1iZWQub24oJ3BhdXNlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhc3N1cmVQbGF5YmFja1N0YXRlLmNhbGwocGxheWVyLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgIHBsYXllci5lbWJlZC5vbigndGltZXVwZGF0ZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHBsYXllci5tZWRpYS5zZWVraW5nID0gZmFsc2U7XG4gICAgICAgIGN1cnJlbnRUaW1lID0gZGF0YS5zZWNvbmRzO1xuICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3RpbWV1cGRhdGUnKTtcbiAgICAgIH0pO1xuICAgICAgcGxheWVyLmVtYmVkLm9uKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHBsYXllci5tZWRpYS5idWZmZXJlZCA9IGRhdGEucGVyY2VudDtcbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdwcm9ncmVzcycpOyAvLyBDaGVjayBhbGwgbG9hZGVkXG5cbiAgICAgICAgaWYgKHBhcnNlSW50KGRhdGEucGVyY2VudCwgMTApID09PSAxKSB7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdjYW5wbGF5dGhyb3VnaCcpO1xuICAgICAgICB9IC8vIEdldCBkdXJhdGlvbiBhcyBpZiB3ZSBkbyBpdCBiZWZvcmUgbG9hZCwgaXQgZ2l2ZXMgYW4gaW5jb3JyZWN0IHZhbHVlXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy84OTFcblxuXG4gICAgICAgIHBsYXllci5lbWJlZC5nZXREdXJhdGlvbigpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSBwbGF5ZXIubWVkaWEuZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHBsYXllci5tZWRpYS5kdXJhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdkdXJhdGlvbmNoYW5nZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHBsYXllci5lbWJlZC5vbignc2Vla2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBwbGF5ZXIubWVkaWEuc2Vla2luZyA9IGZhbHNlO1xuICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3NlZWtlZCcpO1xuICAgICAgfSk7XG4gICAgICBwbGF5ZXIuZW1iZWQub24oJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBwbGF5ZXIubWVkaWEucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdlbmRlZCcpO1xuICAgICAgfSk7XG4gICAgICBwbGF5ZXIuZW1iZWQub24oJ2Vycm9yJywgZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICBwbGF5ZXIubWVkaWEuZXJyb3IgPSBkZXRhaWw7XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnZXJyb3InKTtcbiAgICAgIH0pOyAvLyBSZWJ1aWxkIFVJXG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdWkuYnVpbGQuY2FsbChwbGF5ZXIpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9O1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gcGFyc2VJZCQxKHVybCkge1xuICAgIGlmIChpcyQxLmVtcHR5KHVybCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciByZWdleCA9IC9eLiooeW91dHUuYmVcXC98dlxcL3x1XFwvXFx3XFwvfGVtYmVkXFwvfHdhdGNoXFw/dj18JnY9KShbXiMmP10qKS4qLztcbiAgICByZXR1cm4gdXJsLm1hdGNoKHJlZ2V4KSA/IFJlZ0V4cC4kMiA6IHVybDtcbiAgfSAvLyBTZXQgcGxheWJhY2sgc3RhdGUgYW5kIHRyaWdnZXIgY2hhbmdlIChvbmx5IG9uIGFjdHVhbCBjaGFuZ2UpXG5cblxuICBmdW5jdGlvbiBhc3N1cmVQbGF5YmFja1N0YXRlJDEocGxheSkge1xuICAgIGlmIChwbGF5ICYmICF0aGlzLmVtYmVkLmhhc1BsYXllZCkge1xuICAgICAgdGhpcy5lbWJlZC5oYXNQbGF5ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1lZGlhLnBhdXNlZCA9PT0gcGxheSkge1xuICAgICAgdGhpcy5tZWRpYS5wYXVzZWQgPSAhcGxheTtcbiAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHRoaXMsIHRoaXMubWVkaWEsIHBsYXkgPyAncGxheScgOiAncGF1c2UnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRIb3N0KGNvbmZpZykge1xuICAgIGlmIChjb25maWcubm9Db29raWUpIHtcbiAgICAgIHJldHVybiAnaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb20nO1xuICAgIH1cblxuICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwOicpIHtcbiAgICAgIHJldHVybiAnaHR0cDovL3d3dy55b3V0dWJlLmNvbSc7XG4gICAgfSAvLyBVc2UgWW91VHViZSdzIGRlZmF1bHRcblxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciB5b3V0dWJlID0ge1xuICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIC8vIEFkZCBlbWJlZCBjbGFzcyBmb3IgcmVzcG9uc2l2ZVxuICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy53cmFwcGVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmVtYmVkLCB0cnVlKTsgLy8gU2V0dXAgQVBJXG5cbiAgICAgIGlmIChpcyQxLm9iamVjdCh3aW5kb3cuWVQpICYmIGlzJDEuZnVuY3Rpb24od2luZG93LllULlBsYXllcikpIHtcbiAgICAgICAgeW91dHViZS5yZWFkeS5jYWxsKHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVmZXJlbmNlIGN1cnJlbnQgZ2xvYmFsIGNhbGxiYWNrXG4gICAgICAgIHZhciBjYWxsYmFjayA9IHdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeTsgLy8gU2V0IGNhbGxiYWNrIHRvIHByb2Nlc3MgcXVldWVcblxuICAgICAgICB3aW5kb3cub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gQ2FsbCBnbG9iYWwgY2FsbGJhY2sgaWYgc2V0XG4gICAgICAgICAgaWYgKGlzJDEuZnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHlvdXR1YmUucmVhZHkuY2FsbChfdGhpcyk7XG4gICAgICAgIH07IC8vIExvYWQgdGhlIFNES1xuXG5cbiAgICAgICAgbG9hZFNjcmlwdCh0aGlzLmNvbmZpZy51cmxzLnlvdXR1YmUuc2RrKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICBfdGhpcy5kZWJ1Zy53YXJuKCdZb3VUdWJlIEFQSSBmYWlsZWQgdG8gbG9hZCcsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBHZXQgdGhlIG1lZGlhIHRpdGxlXG4gICAgZ2V0VGl0bGU6IGZ1bmN0aW9uIGdldFRpdGxlKHZpZGVvSWQpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgdXJsID0gZm9ybWF0KHRoaXMuY29uZmlnLnVybHMueW91dHViZS5hcGksIHZpZGVvSWQpO1xuICAgICAgZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChpcyQxLm9iamVjdChkYXRhKSkge1xuICAgICAgICAgIHZhciB0aXRsZSA9IGRhdGEudGl0bGUsXG4gICAgICAgICAgICAgIGhlaWdodCA9IGRhdGEuaGVpZ2h0LFxuICAgICAgICAgICAgICB3aWR0aCA9IGRhdGEud2lkdGg7IC8vIFNldCB0aXRsZVxuXG4gICAgICAgICAgX3RoaXMyLmNvbmZpZy50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgIHVpLnNldFRpdGxlLmNhbGwoX3RoaXMyKTsgLy8gU2V0IGFzcGVjdCByYXRpb1xuXG4gICAgICAgICAgX3RoaXMyLmVtYmVkLnJhdGlvID0gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0QXNwZWN0UmF0aW8uY2FsbChfdGhpczIpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBTZXQgYXNwZWN0IHJhdGlvXG4gICAgICAgIHNldEFzcGVjdFJhdGlvLmNhbGwoX3RoaXMyKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gQVBJIHJlYWR5XG4gICAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgICAgdmFyIHBsYXllciA9IHRoaXM7IC8vIElnbm9yZSBhbHJlYWR5IHNldHVwIChyYWNlIGNvbmRpdGlvbilcblxuICAgICAgdmFyIGN1cnJlbnRJZCA9IHBsYXllci5tZWRpYSAmJiBwbGF5ZXIubWVkaWEuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXG4gICAgICBpZiAoIWlzJDEuZW1wdHkoY3VycmVudElkKSAmJiBjdXJyZW50SWQuc3RhcnRzV2l0aCgneW91dHViZS0nKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEdldCB0aGUgc291cmNlIFVSTCBvciBJRFxuXG5cbiAgICAgIHZhciBzb3VyY2UgPSBwbGF5ZXIubWVkaWEuZ2V0QXR0cmlidXRlKCdzcmMnKTsgLy8gR2V0IGZyb20gPGRpdj4gaWYgbmVlZGVkXG5cbiAgICAgIGlmIChpcyQxLmVtcHR5KHNvdXJjZSkpIHtcbiAgICAgICAgc291cmNlID0gcGxheWVyLm1lZGlhLmdldEF0dHJpYnV0ZSh0aGlzLmNvbmZpZy5hdHRyaWJ1dGVzLmVtYmVkLmlkKTtcbiAgICAgIH0gLy8gUmVwbGFjZSB0aGUgPGlmcmFtZT4gd2l0aCBhIDxkaXY+IGR1ZSB0byBZb3VUdWJlIEFQSSBpc3N1ZXNcblxuXG4gICAgICB2YXIgdmlkZW9JZCA9IHBhcnNlSWQkMShzb3VyY2UpO1xuICAgICAgdmFyIGlkID0gZ2VuZXJhdGVJZChwbGF5ZXIucHJvdmlkZXIpOyAvLyBHZXQgcG9zdGVyLCBpZiBhbHJlYWR5IHNldFxuXG4gICAgICB2YXIgcG9zdGVyID0gcGxheWVyLnBvc3RlcjsgLy8gUmVwbGFjZSBtZWRpYSBlbGVtZW50XG5cbiAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgJ2RhdGEtcG9zdGVyJzogcG9zdGVyXG4gICAgICB9KTtcbiAgICAgIHBsYXllci5tZWRpYSA9IHJlcGxhY2VFbGVtZW50KGNvbnRhaW5lciwgcGxheWVyLm1lZGlhKTsgLy8gSWQgdG8gcG9zdGVyIHdyYXBwZXJcblxuICAgICAgdmFyIHBvc3RlclNyYyA9IGZ1bmN0aW9uIHBvc3RlclNyYyhzKSB7XG4gICAgICAgIHJldHVybiBcImh0dHBzOi8vaS55dGltZy5jb20vdmkvXCIuY29uY2F0KHZpZGVvSWQsIFwiL1wiKS5jb25jYXQocywgXCJkZWZhdWx0LmpwZ1wiKTtcbiAgICAgIH07IC8vIENoZWNrIHRodW1ibmFpbCBpbWFnZXMgaW4gb3JkZXIgb2YgcXVhbGl0eSwgYnV0IHJlamVjdCBmYWxsYmFjayB0aHVtYm5haWxzICgxMjBweCB3aWRlKVxuXG5cbiAgICAgIGxvYWRJbWFnZShwb3N0ZXJTcmMoJ21heHJlcycpLCAxMjEpIC8vIEhpZ2VzdCBxdWFsaXR5IGFuZCB1bnBhZGRlZFxuICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxvYWRJbWFnZShwb3N0ZXJTcmMoJ3NkJyksIDEyMSk7XG4gICAgICB9KSAvLyA0ODBwIHBhZGRlZCA0OjNcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsb2FkSW1hZ2UocG9zdGVyU3JjKCdocScpKTtcbiAgICAgIH0pIC8vIDM2MHAgcGFkZGVkIDQ6My4gQWx3YXlzIGV4aXN0c1xuICAgICAgLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHJldHVybiB1aS5zZXRQb3N0ZXIuY2FsbChwbGF5ZXIsIGltYWdlLnNyYyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChzcmMpIHtcbiAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHBhZGRlZCwgdXNlIGJhY2tncm91bmQtc2l6ZSBcImNvdmVyXCIgaW5zdGVhZCAobGlrZSB5b3V0dWJlIGRvZXMgdG9vIHdpdGggdGhlaXIgcG9zdGVycylcbiAgICAgICAgaWYgKCFzcmMuaW5jbHVkZXMoJ21heHJlcycpKSB7XG4gICAgICAgICAgcGxheWVyLmVsZW1lbnRzLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICdjb3Zlcic7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgIHZhciBjb25maWcgPSBwbGF5ZXIuY29uZmlnLnlvdXR1YmU7IC8vIFNldHVwIGluc3RhbmNlXG4gICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlL2lmcmFtZV9hcGlfcmVmZXJlbmNlXG5cbiAgICAgIHBsYXllci5lbWJlZCA9IG5ldyB3aW5kb3cuWVQuUGxheWVyKGlkLCB7XG4gICAgICAgIHZpZGVvSWQ6IHZpZGVvSWQsXG4gICAgICAgIGhvc3Q6IGdldEhvc3QoY29uZmlnKSxcbiAgICAgICAgcGxheWVyVmFyczogZXh0ZW5kKHt9LCB7XG4gICAgICAgICAgYXV0b3BsYXk6IHBsYXllci5jb25maWcuYXV0b3BsYXkgPyAxIDogMCxcbiAgICAgICAgICAvLyBBdXRvcGxheVxuICAgICAgICAgIGhsOiBwbGF5ZXIuY29uZmlnLmhsLFxuICAgICAgICAgIC8vIGlmcmFtZSBpbnRlcmZhY2UgbGFuZ3VhZ2VcbiAgICAgICAgICBjb250cm9sczogcGxheWVyLnN1cHBvcnRlZC51aSA/IDAgOiAxLFxuICAgICAgICAgIC8vIE9ubHkgc2hvdyBjb250cm9scyBpZiBub3QgZnVsbHkgc3VwcG9ydGVkXG4gICAgICAgICAgZGlzYWJsZWtiOiAxLFxuICAgICAgICAgIC8vIERpc2FibGUga2V5Ym9hcmQgYXMgd2UgaGFuZGxlIGl0XG4gICAgICAgICAgcGxheXNpbmxpbmU6ICFwbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uaW9zTmF0aXZlID8gMSA6IDAsXG4gICAgICAgICAgLy8gQWxsb3cgaU9TIGlubGluZSBwbGF5YmFja1xuICAgICAgICAgIC8vIENhcHRpb25zIGFyZSBmbGFreSBvbiBZb3VUdWJlXG4gICAgICAgICAgY2NfbG9hZF9wb2xpY3k6IHBsYXllci5jYXB0aW9ucy5hY3RpdmUgPyAxIDogMCxcbiAgICAgICAgICBjY19sYW5nX3ByZWY6IHBsYXllci5jb25maWcuY2FwdGlvbnMubGFuZ3VhZ2UsXG4gICAgICAgICAgLy8gVHJhY2tpbmcgZm9yIHN0YXRzXG4gICAgICAgICAgd2lkZ2V0X3JlZmVycmVyOiB3aW5kb3cgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IG51bGxcbiAgICAgICAgfSwgY29uZmlnKSxcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcihldmVudCkge1xuICAgICAgICAgICAgLy8gWW91VHViZSBtYXkgZmlyZSBvbkVycm9yIHR3aWNlLCBzbyBvbmx5IGhhbmRsZSBpdCBvbmNlXG4gICAgICAgICAgICBpZiAoIXBsYXllci5tZWRpYS5lcnJvcikge1xuICAgICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmRhdGE7IC8vIE1lc3NhZ2VzIGNvcGllZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3lvdXR1YmUvaWZyYW1lX2FwaV9yZWZlcmVuY2Ujb25FcnJvclxuXG4gICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIDI6ICdUaGUgcmVxdWVzdCBjb250YWlucyBhbiBpbnZhbGlkIHBhcmFtZXRlciB2YWx1ZS4gRm9yIGV4YW1wbGUsIHRoaXMgZXJyb3Igb2NjdXJzIGlmIHlvdSBzcGVjaWZ5IGEgdmlkZW8gSUQgdGhhdCBkb2VzIG5vdCBoYXZlIDExIGNoYXJhY3RlcnMsIG9yIGlmIHRoZSB2aWRlbyBJRCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMsIHN1Y2ggYXMgZXhjbGFtYXRpb24gcG9pbnRzIG9yIGFzdGVyaXNrcy4nLFxuICAgICAgICAgICAgICAgIDU6ICdUaGUgcmVxdWVzdGVkIGNvbnRlbnQgY2Fubm90IGJlIHBsYXllZCBpbiBhbiBIVE1MNSBwbGF5ZXIgb3IgYW5vdGhlciBlcnJvciByZWxhdGVkIHRvIHRoZSBIVE1MNSBwbGF5ZXIgaGFzIG9jY3VycmVkLicsXG4gICAgICAgICAgICAgICAgMTAwOiAnVGhlIHZpZGVvIHJlcXVlc3RlZCB3YXMgbm90IGZvdW5kLiBUaGlzIGVycm9yIG9jY3VycyB3aGVuIGEgdmlkZW8gaGFzIGJlZW4gcmVtb3ZlZCAoZm9yIGFueSByZWFzb24pIG9yIGhhcyBiZWVuIG1hcmtlZCBhcyBwcml2YXRlLicsXG4gICAgICAgICAgICAgICAgMTAxOiAnVGhlIG93bmVyIG9mIHRoZSByZXF1ZXN0ZWQgdmlkZW8gZG9lcyBub3QgYWxsb3cgaXQgdG8gYmUgcGxheWVkIGluIGVtYmVkZGVkIHBsYXllcnMuJyxcbiAgICAgICAgICAgICAgICAxNTA6ICdUaGUgb3duZXIgb2YgdGhlIHJlcXVlc3RlZCB2aWRlbyBkb2VzIG5vdCBhbGxvdyBpdCB0byBiZSBwbGF5ZWQgaW4gZW1iZWRkZWQgcGxheWVycy4nXG4gICAgICAgICAgICAgIH1bY29kZV0gfHwgJ0FuIHVua25vd24gZXJyb3Igb2NjdXJlZCc7XG4gICAgICAgICAgICAgIHBsYXllci5tZWRpYS5lcnJvciA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25QbGF5YmFja1JhdGVDaGFuZ2U6IGZ1bmN0aW9uIG9uUGxheWJhY2tSYXRlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIGluc3RhbmNlXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBldmVudC50YXJnZXQ7IC8vIEdldCBjdXJyZW50IHNwZWVkXG5cbiAgICAgICAgICAgIHBsYXllci5tZWRpYS5wbGF5YmFja1JhdGUgPSBpbnN0YW5jZS5nZXRQbGF5YmFja1JhdGUoKTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncmF0ZWNoYW5nZScpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25SZWFkeTogZnVuY3Rpb24gb25SZWFkeShldmVudCkge1xuICAgICAgICAgICAgLy8gQmFpbCBpZiBvblJlYWR5IGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkLiBTZWUgaXNzdWUgIzExMDhcbiAgICAgICAgICAgIGlmIChpcyQxLmZ1bmN0aW9uKHBsYXllci5tZWRpYS5wbGF5KSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IC8vIEdldCB0aGUgaW5zdGFuY2VcblxuXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBldmVudC50YXJnZXQ7IC8vIEdldCB0aGUgdGl0bGVcblxuICAgICAgICAgICAgeW91dHViZS5nZXRUaXRsZS5jYWxsKHBsYXllciwgdmlkZW9JZCk7IC8vIENyZWF0ZSBhIGZhdXggSFRNTDUgQVBJIHVzaW5nIHRoZSBZb3VUdWJlIEFQSVxuXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEucGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZSQxLmNhbGwocGxheWVyLCB0cnVlKTtcbiAgICAgICAgICAgICAgaW5zdGFuY2UucGxheVZpZGVvKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUkMS5jYWxsKHBsYXllciwgZmFsc2UpO1xuICAgICAgICAgICAgICBpbnN0YW5jZS5wYXVzZVZpZGVvKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaW5zdGFuY2Uuc3RvcFZpZGVvKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEuZHVyYXRpb24gPSBpbnN0YW5jZS5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgcGxheWVyLm1lZGlhLnBhdXNlZCA9IHRydWU7IC8vIFNlZWtpbmdcblxuICAgICAgICAgICAgcGxheWVyLm1lZGlhLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdjdXJyZW50VGltZScsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihpbnN0YW5jZS5nZXRDdXJyZW50VGltZSgpKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodGltZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhdXNlZCBhbmQgbmV2ZXIgcGxheWVkLCBtdXRlIGF1ZGlvIHByZXZlbnRpdmVseSAoWW91VHViZSBzdGFydHMgcGxheWluZyBvbiBzZWVrIGlmIHRoZSB2aWRlbyBoYXNuJ3QgYmVlbiBwbGF5ZWQgeWV0KS5cbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLnBhdXNlZCAmJiAhcGxheWVyLmVtYmVkLmhhc1BsYXllZCkge1xuICAgICAgICAgICAgICAgICAgcGxheWVyLmVtYmVkLm11dGUoKTtcbiAgICAgICAgICAgICAgICB9IC8vIFNldCBzZWVraW5nIHN0YXRlIGFuZCB0cmlnZ2VyIGV2ZW50XG5cblxuICAgICAgICAgICAgICAgIHBsYXllci5tZWRpYS5zZWVraW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3NlZWtpbmcnKTsgLy8gU2VlayBhZnRlciBldmVudHMgc2VudFxuXG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc2Vla1RvKHRpbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgLy8gUGxheWJhY2sgc3BlZWRcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ3BsYXliYWNrUmF0ZScsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldFBsYXliYWNrUmF0ZSgpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLnNldFBsYXliYWNrUmF0ZShpbnB1dCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pOyAvLyBWb2x1bWVcblxuICAgICAgICAgICAgdmFyIHZvbHVtZSA9IHBsYXllci5jb25maWcudm9sdW1lO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ3ZvbHVtZScsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvbHVtZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICB2b2x1bWUgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5zZXRWb2x1bWUodm9sdW1lICogMTAwKTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgLy8gTXV0ZWRcblxuICAgICAgICAgICAgdmFyIG11dGVkID0gcGxheWVyLmNvbmZpZy5tdXRlZDtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdtdXRlZCcsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG11dGVkO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAgICAgICAgIHZhciB0b2dnbGUgPSBpcyQxLmJvb2xlYW4oaW5wdXQpID8gaW5wdXQgOiBtdXRlZDtcbiAgICAgICAgICAgICAgICBtdXRlZCA9IHRvZ2dsZTtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVt0b2dnbGUgPyAnbXV0ZScgOiAndW5NdXRlJ10oKTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgLy8gU291cmNlXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdjdXJyZW50U3JjJywge1xuICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0VmlkZW9VcmwoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7IC8vIEVuZGVkXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdlbmRlZCcsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5jdXJyZW50VGltZSA9PT0gcGxheWVyLmR1cmF0aW9uO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgLy8gR2V0IGF2YWlsYWJsZSBzcGVlZHNcblxuICAgICAgICAgICAgdmFyIHNwZWVkcyA9IGluc3RhbmNlLmdldEF2YWlsYWJsZVBsYXliYWNrUmF0ZXMoKTsgLy8gRmlsdGVyIGJhc2VkIG9uIGNvbmZpZ1xuXG4gICAgICAgICAgICBwbGF5ZXIub3B0aW9ucy5zcGVlZCA9IHNwZWVkcy5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5jb25maWcuc3BlZWQub3B0aW9ucy5pbmNsdWRlcyhzKTtcbiAgICAgICAgICAgIH0pOyAvLyBTZXQgdGhlIHRhYmluZGV4IHRvIGF2b2lkIGZvY3VzIGVudGVyaW5nIGlmcmFtZVxuXG4gICAgICAgICAgICBpZiAocGxheWVyLnN1cHBvcnRlZC51aSkge1xuICAgICAgICAgICAgICBwbGF5ZXIubWVkaWEuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd0aW1ldXBkYXRlJyk7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2R1cmF0aW9uY2hhbmdlJyk7IC8vIFJlc2V0IHRpbWVyXG5cbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocGxheWVyLnRpbWVycy5idWZmZXJpbmcpOyAvLyBTZXR1cCBidWZmZXJpbmdcblxuICAgICAgICAgICAgcGxheWVyLnRpbWVycy5idWZmZXJpbmcgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIEdldCBsb2FkZWQgJSBmcm9tIFlvdVR1YmVcbiAgICAgICAgICAgICAgcGxheWVyLm1lZGlhLmJ1ZmZlcmVkID0gaW5zdGFuY2UuZ2V0VmlkZW9Mb2FkZWRGcmFjdGlvbigpOyAvLyBUcmlnZ2VyIHByb2dyZXNzIG9ubHkgd2hlbiB3ZSBhY3R1YWxseSBidWZmZXIgc29tZXRoaW5nXG5cbiAgICAgICAgICAgICAgaWYgKHBsYXllci5tZWRpYS5sYXN0QnVmZmVyZWQgPT09IG51bGwgfHwgcGxheWVyLm1lZGlhLmxhc3RCdWZmZXJlZCA8IHBsYXllci5tZWRpYS5idWZmZXJlZCkge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgICAgfSAvLyBTZXQgbGFzdCBidWZmZXIgcG9pbnRcblxuXG4gICAgICAgICAgICAgIHBsYXllci5tZWRpYS5sYXN0QnVmZmVyZWQgPSBwbGF5ZXIubWVkaWEuYnVmZmVyZWQ7IC8vIEJhaWwgaWYgd2UncmUgYXQgMTAwJVxuXG4gICAgICAgICAgICAgIGlmIChwbGF5ZXIubWVkaWEuYnVmZmVyZWQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHBsYXllci50aW1lcnMuYnVmZmVyaW5nKTsgLy8gVHJpZ2dlciBldmVudFxuXG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdjYW5wbGF5dGhyb3VnaCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApOyAvLyBSZWJ1aWxkIFVJXG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdWkuYnVpbGQuY2FsbChwbGF5ZXIpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25TdGF0ZUNoYW5nZShldmVudCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSBpbnN0YW5jZVxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gZXZlbnQudGFyZ2V0OyAvLyBSZXNldCB0aW1lclxuXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHBsYXllci50aW1lcnMucGxheWluZyk7XG4gICAgICAgICAgICB2YXIgc2Vla2VkID0gcGxheWVyLm1lZGlhLnNlZWtpbmcgJiYgWzEsIDJdLmluY2x1ZGVzKGV2ZW50LmRhdGEpO1xuXG4gICAgICAgICAgICBpZiAoc2Vla2VkKSB7XG4gICAgICAgICAgICAgIC8vIFVuc2V0IHNlZWtpbmcgYW5kIGZpcmUgc2Vla2VkIGV2ZW50XG4gICAgICAgICAgICAgIHBsYXllci5tZWRpYS5zZWVraW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnc2Vla2VkJyk7XG4gICAgICAgICAgICB9IC8vIEhhbmRsZSBldmVudHNcbiAgICAgICAgICAgIC8vIC0xICAgVW5zdGFydGVkXG4gICAgICAgICAgICAvLyAwICAgIEVuZGVkXG4gICAgICAgICAgICAvLyAxICAgIFBsYXlpbmdcbiAgICAgICAgICAgIC8vIDIgICAgUGF1c2VkXG4gICAgICAgICAgICAvLyAzICAgIEJ1ZmZlcmluZ1xuICAgICAgICAgICAgLy8gNSAgICBWaWRlbyBjdWVkXG5cblxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5kYXRhKSB7XG4gICAgICAgICAgICAgIGNhc2UgLTE6XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNjcnViYmVyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd0aW1ldXBkYXRlJyk7IC8vIEdldCBsb2FkZWQgJSBmcm9tIFlvdVR1YmVcblxuICAgICAgICAgICAgICAgIHBsYXllci5tZWRpYS5idWZmZXJlZCA9IGluc3RhbmNlLmdldFZpZGVvTG9hZGVkRnJhY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3Byb2dyZXNzJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUkMS5jYWxsKHBsYXllciwgZmFsc2UpOyAvLyBZb3VUdWJlIGRvZXNuJ3Qgc3VwcG9ydCBsb29wIGZvciBhIHNpbmdsZSB2aWRlbywgc28gbWltaWNrIGl0LlxuXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5tZWRpYS5sb29wKSB7XG4gICAgICAgICAgICAgICAgICAvLyBZb3VUdWJlIG5lZWRzIGEgY2FsbCB0byBgc3RvcFZpZGVvYCBiZWZvcmUgcGxheWluZyBhZ2FpblxuICAgICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3RvcFZpZGVvKCk7XG4gICAgICAgICAgICAgICAgICBpbnN0YW5jZS5wbGF5VmlkZW8oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdlbmRlZCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHBhdXNlZCBzdGF0ZSAoWW91VHViZSBzdGFydHMgcGxheWluZyBvbiBzZWVrIGlmIHRoZSB2aWRlbyBoYXNuJ3QgYmVlbiBwbGF5ZWQgeWV0KVxuICAgICAgICAgICAgICAgIGlmICghcGxheWVyLmNvbmZpZy5hdXRvcGxheSAmJiBwbGF5ZXIubWVkaWEucGF1c2VkICYmICFwbGF5ZXIuZW1iZWQuaGFzUGxheWVkKSB7XG4gICAgICAgICAgICAgICAgICBwbGF5ZXIubWVkaWEucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZSQxLmNhbGwocGxheWVyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncGxheWluZycpOyAvLyBQb2xsIHRvIGdldCBwbGF5YmFjayBwcm9ncmVzc1xuXG4gICAgICAgICAgICAgICAgICBwbGF5ZXIudGltZXJzLnBsYXlpbmcgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndGltZXVwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgfSwgNTApOyAvLyBDaGVjayBkdXJhdGlvbiBhZ2FpbiBkdWUgdG8gWW91VHViZSBidWdcbiAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy8zNzRcbiAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvZ2RhdGEtaXNzdWVzL2lzc3Vlcy9kZXRhaWw/aWQ9ODY5MFxuXG4gICAgICAgICAgICAgICAgICBpZiAocGxheWVyLm1lZGlhLmR1cmF0aW9uICE9PSBpbnN0YW5jZS5nZXREdXJhdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5tZWRpYS5kdXJhdGlvbiA9IGluc3RhbmNlLmdldER1cmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnZHVyYXRpb25jaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBhdWRpbyAoWW91VHViZSBzdGFydHMgcGxheWluZyBvbiBzZWVrIGlmIHRoZSB2aWRlbyBoYXNuJ3QgYmVlbiBwbGF5ZWQgeWV0KVxuICAgICAgICAgICAgICAgIGlmICghcGxheWVyLm11dGVkKSB7XG4gICAgICAgICAgICAgICAgICBwbGF5ZXIuZW1iZWQudW5NdXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZSQxLmNhbGwocGxheWVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgd2FpdGluZyBldmVudCB0byBhZGQgbG9hZGluZyBjbGFzc2VzIHRvIGNvbnRhaW5lciBhcyB0aGUgdmlkZW8gYnVmZmVycy5cbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3dhaXRpbmcnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLCAnc3RhdGVjaGFuZ2UnLCBmYWxzZSwge1xuICAgICAgICAgICAgICBjb2RlOiBldmVudC5kYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICB2YXIgbWVkaWEgPSB7XG4gICAgLy8gU2V0dXAgbWVkaWFcbiAgICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIG1lZGlhLCBiYWlsXG4gICAgICBpZiAoIXRoaXMubWVkaWEpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdObyBtZWRpYSBlbGVtZW50IGZvdW5kIScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEFkZCB0eXBlIGNsYXNzXG5cblxuICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudHlwZS5yZXBsYWNlKCd7MH0nLCB0aGlzLnR5cGUpLCB0cnVlKTsgLy8gQWRkIHByb3ZpZGVyIGNsYXNzXG5cbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnByb3ZpZGVyLnJlcGxhY2UoJ3swfScsIHRoaXMucHJvdmlkZXIpLCB0cnVlKTsgLy8gQWRkIHZpZGVvIGNsYXNzIGZvciBlbWJlZHNcbiAgICAgIC8vIFRoaXMgd2lsbCByZXF1aXJlIGNoYW5nZXMgaWYgYXVkaW8gZW1iZWRzIGFyZSBhZGRlZFxuXG4gICAgICBpZiAodGhpcy5pc0VtYmVkKSB7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnR5cGUucmVwbGFjZSgnezB9JywgJ3ZpZGVvJyksIHRydWUpO1xuICAgICAgfSAvLyBJbmplY3QgdGhlIHBsYXllciB3cmFwcGVyXG5cblxuICAgICAgaWYgKHRoaXMuaXNWaWRlbykge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIHdyYXBwZXIgZGl2XG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy52aWRlb1xuICAgICAgICB9KTsgLy8gV3JhcCB0aGUgdmlkZW8gaW4gYSBjb250YWluZXJcblxuICAgICAgICB3cmFwKHRoaXMubWVkaWEsIHRoaXMuZWxlbWVudHMud3JhcHBlcik7IC8vIFBvc3RlciBpbWFnZSBjb250YWluZXJcblxuICAgICAgICB0aGlzLmVsZW1lbnRzLnBvc3RlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wb3N0ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnBvc3Rlcik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICAgICAgaHRtbDUuc2V0dXAuY2FsbCh0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1lvdVR1YmUpIHtcbiAgICAgICAgeW91dHViZS5zZXR1cC5jYWxsKHRoaXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVmltZW8pIHtcbiAgICAgICAgdmltZW8uc2V0dXAuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGRlc3Ryb3kgPSBmdW5jdGlvbiBkZXN0cm95KGluc3RhbmNlKSB7XG4gICAgLy8gRGVzdHJveSBvdXIgYWRzTWFuYWdlclxuICAgIGlmIChpbnN0YW5jZS5tYW5hZ2VyKSB7XG4gICAgICBpbnN0YW5jZS5tYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICB9IC8vIERlc3Ryb3kgb3VyIGFkc01hbmFnZXJcblxuXG4gICAgaWYgKGluc3RhbmNlLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXIpIHtcbiAgICAgIGluc3RhbmNlLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGluc3RhbmNlLmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgfTtcblxuICB2YXIgQWRzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBBZHMgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBsYXllclxuICAgICAqIEByZXR1cm4ge0Fkc31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBZHMocGxheWVyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRzKTtcblxuICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICB0aGlzLmNvbmZpZyA9IHBsYXllci5jb25maWcuYWRzO1xuICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICB0aGlzLmVsZW1lbnRzID0ge1xuICAgICAgICBjb250YWluZXI6IG51bGwsXG4gICAgICAgIGRpc3BsYXlDb250YWluZXI6IG51bGxcbiAgICAgIH07XG4gICAgICB0aGlzLm1hbmFnZXIgPSBudWxsO1xuICAgICAgdGhpcy5sb2FkZXIgPSBudWxsO1xuICAgICAgdGhpcy5jdWVQb2ludHMgPSBudWxsO1xuICAgICAgdGhpcy5ldmVudHMgPSB7fTtcbiAgICAgIHRoaXMuc2FmZXR5VGltZXIgPSBudWxsO1xuICAgICAgdGhpcy5jb3VudGRvd25UaW1lciA9IG51bGw7IC8vIFNldHVwIGEgcHJvbWlzZSB0byByZXNvbHZlIHdoZW4gdGhlIElNQSBtYW5hZ2VyIGlzIHJlYWR5XG5cbiAgICAgIHRoaXMubWFuYWdlclByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIFRoZSBhZCBpcyBsb2FkZWQgYW5kIHJlYWR5XG4gICAgICAgIF90aGlzLm9uKCdsb2FkZWQnLCByZXNvbHZlKTsgLy8gQWRzIGZhaWxlZFxuXG5cbiAgICAgICAgX3RoaXMub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5sb2FkKCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEFkcywgW3tcbiAgICAgIGtleTogXCJsb2FkXCIsXG5cbiAgICAgIC8qKlxuICAgICAgICogTG9hZCB0aGUgSU1BIFNES1xuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIEdvb2dsZSBJTUEzIFNESyBpcyBsb2FkZWQgb3IgbG9hZCBpdCBvdXJzZWx2ZXNcblxuXG4gICAgICAgIGlmICghaXMkMS5vYmplY3Qod2luZG93Lmdvb2dsZSkgfHwgIWlzJDEub2JqZWN0KHdpbmRvdy5nb29nbGUuaW1hKSkge1xuICAgICAgICAgIGxvYWRTY3JpcHQodGhpcy5wbGF5ZXIuY29uZmlnLnVybHMuZ29vZ2xlSU1BLnNkaykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczIucmVhZHkoKTtcbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBTY3JpcHQgZmFpbGVkIHRvIGxvYWQgb3IgaXMgYmxvY2tlZFxuICAgICAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2Vycm9yJywgbmV3IEVycm9yKCdHb29nbGUgSU1BIFNESyBmYWlsZWQgdG8gbG9hZCcpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlYWR5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHRoZSBhZHMgaW5zdGFuY2UgcmVhZHlcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInJlYWR5XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgIC8vIERvdWJsZSBjaGVjayB3ZSdyZSBlbmFibGVkXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgZGVzdHJveSh0aGlzKTtcbiAgICAgICAgfSAvLyBTdGFydCB0aWNraW5nIG91ciBzYWZldHkgdGltZXIuIElmIHRoZSB3aG9sZSBhZHZlcnRpc2VtZW50XG4gICAgICAgIC8vIHRoaW5nIGRvZXNuJ3QgcmVzb2x2ZSB3aXRoaW4gb3VyIHNldCB0aW1lOyB3ZSBiYWlsXG5cblxuICAgICAgICB0aGlzLnN0YXJ0U2FmZXR5VGltZXIoMTIwMDAsICdyZWFkeSgpJyk7IC8vIENsZWFyIHRoZSBzYWZldHkgdGltZXJcblxuICAgICAgICB0aGlzLm1hbmFnZXJQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5jbGVhclNhZmV0eVRpbWVyKCdvbkFkc01hbmFnZXJMb2FkZWQoKScpO1xuICAgICAgICB9KTsgLy8gU2V0IGxpc3RlbmVycyBvbiB0aGUgUGx5ciBpbnN0YW5jZVxuXG4gICAgICAgIHRoaXMubGlzdGVuZXJzKCk7IC8vIFNldHVwIHRoZSBJTUEgU0RLXG5cbiAgICAgICAgdGhpcy5zZXR1cElNQSgpO1xuICAgICAgfSAvLyBCdWlsZCB0aGUgdGFnIFVSTFxuXG4gICAgfSwge1xuICAgICAga2V5OiBcInNldHVwSU1BXCIsXG5cbiAgICAgIC8qKlxuICAgICAgICogSW4gb3JkZXIgZm9yIHRoZSBTREsgdG8gZGlzcGxheSBhZHMgZm9yIG91ciB2aWRlbywgd2UgbmVlZCB0byB0ZWxsIGl0IHdoZXJlIHRvIHB1dCB0aGVtLFxuICAgICAgICogc28gaGVyZSB3ZSBkZWZpbmUgb3VyIGFkIGNvbnRhaW5lci4gVGhpcyBkaXYgaXMgc2V0IHVwIHRvIHJlbmRlciBvbiB0b3Agb2YgdGhlIHZpZGVvIHBsYXllci5cbiAgICAgICAqIFVzaW5nIHRoZSBjb2RlIGJlbG93LCB3ZSB0ZWxsIHRoZSBTREsgdG8gcmVuZGVyIGFkcyB3aXRoaW4gdGhhdCBkaXYuIFdlIGFsc28gcHJvdmlkZSBhXG4gICAgICAgKiBoYW5kbGUgdG8gdGhlIGNvbnRlbnQgdmlkZW8gcGxheWVyIC0gdGhlIFNESyB3aWxsIHBvbGwgdGhlIGN1cnJlbnQgdGltZSBvZiBvdXIgcGxheWVyIHRvXG4gICAgICAgKiBwcm9wZXJseSBwbGFjZSBtaWQtcm9sbHMuIEFmdGVyIHdlIGNyZWF0ZSB0aGUgYWQgZGlzcGxheSBjb250YWluZXIsIHdlIGluaXRpYWxpemUgaXQuIE9uXG4gICAgICAgKiBtb2JpbGUgZGV2aWNlcywgdGhpcyBpbml0aWFsaXphdGlvbiBpcyBkb25lIGFzIHRoZSByZXN1bHQgb2YgYSB1c2VyIGFjdGlvbi5cbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwSU1BKCkge1xuICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciBmb3Igb3VyIGFkdmVydGlzZW1lbnRzXG4gICAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5hZHNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcik7IC8vIFNvIHdlIGNhbiBydW4gVlBBSUQyXG5cbiAgICAgICAgZ29vZ2xlLmltYS5zZXR0aW5ncy5zZXRWcGFpZE1vZGUoZ29vZ2xlLmltYS5JbWFTZGtTZXR0aW5ncy5WcGFpZE1vZGUuRU5BQkxFRCk7IC8vIFNldCBsYW5ndWFnZVxuXG4gICAgICAgIGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0TG9jYWxlKHRoaXMucGxheWVyLmNvbmZpZy5hZHMubGFuZ3VhZ2UpOyAvLyBTZXQgcGxheWJhY2sgZm9yIGlPUzEwK1xuXG4gICAgICAgIGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0RGlzYWJsZUN1c3RvbVBsYXliYWNrRm9ySU9TMTBQbHVzKHRoaXMucGxheWVyLmNvbmZpZy5wbGF5c2lubGluZSk7IC8vIFdlIGFzc3VtZSB0aGUgYWRDb250YWluZXIgaXMgdGhlIHZpZGVvIGNvbnRhaW5lciBvZiB0aGUgcGx5ciBlbGVtZW50IHRoYXQgd2lsbCBob3VzZSB0aGUgYWRzXG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyID0gbmV3IGdvb2dsZS5pbWEuQWREaXNwbGF5Q29udGFpbmVyKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLnBsYXllci5tZWRpYSk7IC8vIENyZWF0ZSBhZHMgbG9hZGVyXG5cbiAgICAgICAgdGhpcy5sb2FkZXIgPSBuZXcgZ29vZ2xlLmltYS5BZHNMb2FkZXIodGhpcy5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyKTsgLy8gTGlzdGVuIGFuZCByZXNwb25kIHRvIGFkcyBsb2FkZWQgYW5kIGVycm9yIGV2ZW50c1xuXG4gICAgICAgIHRoaXMubG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoZ29vZ2xlLmltYS5BZHNNYW5hZ2VyTG9hZGVkRXZlbnQuVHlwZS5BRFNfTUFOQUdFUl9MT0FERUQsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQub25BZHNNYW5hZ2VyTG9hZGVkKGV2ZW50KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB0aGlzLmxvYWRlci5hZGRFdmVudExpc3RlbmVyKGdvb2dsZS5pbWEuQWRFcnJvckV2ZW50LlR5cGUuQURfRVJST1IsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBfdGhpczQub25BZEVycm9yKGVycm9yKTtcbiAgICAgICAgfSwgZmFsc2UpOyAvLyBSZXF1ZXN0IHZpZGVvIGFkcyB0byBiZSBwcmUtbG9hZGVkXG5cbiAgICAgICAgdGhpcy5yZXF1ZXN0QWRzKCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJlcXVlc3QgYWR2ZXJ0aXNlbWVudHNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInJlcXVlc3RBZHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0QWRzKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gUmVxdWVzdCB2aWRlbyBhZHNcbiAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBnb29nbGUuaW1hLkFkc1JlcXVlc3QoKTtcbiAgICAgICAgICByZXF1ZXN0LmFkVGFnVXJsID0gdGhpcy50YWdVcmw7IC8vIFNwZWNpZnkgdGhlIGxpbmVhciBhbmQgbm9ubGluZWFyIHNsb3Qgc2l6ZXMuIFRoaXMgaGVscHMgdGhlIFNES1xuICAgICAgICAgIC8vIHRvIHNlbGVjdCB0aGUgY29ycmVjdCBjcmVhdGl2ZSBpZiBtdWx0aXBsZSBhcmUgcmV0dXJuZWRcblxuICAgICAgICAgIHJlcXVlc3QubGluZWFyQWRTbG90V2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgcmVxdWVzdC5saW5lYXJBZFNsb3RIZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIHJlcXVlc3Qubm9uTGluZWFyQWRTbG90V2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgcmVxdWVzdC5ub25MaW5lYXJBZFNsb3RIZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0OyAvLyBXZSBvbmx5IG92ZXJsYXkgYWRzIGFzIHdlIG9ubHkgc3VwcG9ydCB2aWRlby5cblxuICAgICAgICAgIHJlcXVlc3QuZm9yY2VOb25MaW5lYXJGdWxsU2xvdCA9IGZhbHNlOyAvLyBNdXRlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcblxuICAgICAgICAgIHJlcXVlc3Quc2V0QWRXaWxsUGxheU11dGVkKCF0aGlzLnBsYXllci5tdXRlZCk7XG4gICAgICAgICAgdGhpcy5sb2FkZXIucmVxdWVzdEFkcyhyZXF1ZXN0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXMub25BZEVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZSB0aGUgYWQgY291bnRkb3duXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHN0YXJ0XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwb2xsQ291bnRkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcG9sbENvdW50ZG93bigpIHtcbiAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHN0YXJ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50ZG93blRpbWVyKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtYmFkZ2UtdGV4dCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgdmFyIHRpbWUgPSBmb3JtYXRUaW1lKE1hdGgubWF4KF90aGlzNS5tYW5hZ2VyLmdldFJlbWFpbmluZ1RpbWUoKSwgMCkpO1xuICAgICAgICAgIHZhciBsYWJlbCA9IFwiXCIuY29uY2F0KGkxOG4uZ2V0KCdhZHZlcnRpc2VtZW50JywgX3RoaXM1LnBsYXllci5jb25maWcpLCBcIiAtIFwiKS5jb25jYXQodGltZSk7XG5cbiAgICAgICAgICBfdGhpczUuZWxlbWVudHMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1iYWRnZS10ZXh0JywgbGFiZWwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY291bnRkb3duVGltZXIgPSBzZXRJbnRlcnZhbCh1cGRhdGUsIDEwMCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuZXZlciB0aGUgYWRzIGFyZSByZWFkeSBpbnNpZGUgdGhlIEFkRGlzcGxheUNvbnRhaW5lclxuICAgICAgICogQHBhcmFtIHtFdmVudH0gYWRzTWFuYWdlckxvYWRlZEV2ZW50XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvbkFkc01hbmFnZXJMb2FkZWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkFkc01hbmFnZXJMb2FkZWQoZXZlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgLy8gTG9hZCBjb3VsZCBvY2N1ciBhZnRlciBhIHNvdXJjZSBjaGFuZ2UgKHJhY2UgY29uZGl0aW9uKVxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBHZXQgdGhlIGFkcyBtYW5hZ2VyXG5cblxuICAgICAgICB2YXIgc2V0dGluZ3MgPSBuZXcgZ29vZ2xlLmltYS5BZHNSZW5kZXJpbmdTZXR0aW5ncygpOyAvLyBUZWxsIHRoZSBTREsgdG8gc2F2ZSBhbmQgcmVzdG9yZSBjb250ZW50IHZpZGVvIHN0YXRlIG9uIG91ciBiZWhhbGZcblxuICAgICAgICBzZXR0aW5ncy5yZXN0b3JlQ3VzdG9tUGxheWJhY2tTdGF0ZU9uQWRCcmVha0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgc2V0dGluZ3MuZW5hYmxlUHJlbG9hZGluZyA9IHRydWU7IC8vIFRoZSBTREsgaXMgcG9sbGluZyBjdXJyZW50VGltZSBvbiB0aGUgY29udGVudFBsYXliYWNrLiBBbmQgbmVlZHMgYSBkdXJhdGlvblxuICAgICAgICAvLyBzbyBpdCBjYW4gZGV0ZXJtaW5lIHdoZW4gdG8gc3RhcnQgdGhlIG1pZC0gYW5kIHBvc3Qtcm9sbFxuXG4gICAgICAgIHRoaXMubWFuYWdlciA9IGV2ZW50LmdldEFkc01hbmFnZXIodGhpcy5wbGF5ZXIsIHNldHRpbmdzKTsgLy8gR2V0IHRoZSBjdWUgcG9pbnRzIGZvciBhbnkgbWlkLXJvbGxzIGJ5IGZpbHRlcmluZyBvdXQgdGhlIHByZS0gYW5kIHBvc3Qtcm9sbFxuXG4gICAgICAgIHRoaXMuY3VlUG9pbnRzID0gdGhpcy5tYW5hZ2VyLmdldEN1ZVBvaW50cygpOyAvLyBBZGQgbGlzdGVuZXJzIHRvIHRoZSByZXF1aXJlZCBldmVudHNcbiAgICAgICAgLy8gQWR2ZXJ0aXNlbWVudCBlcnJvciBldmVudHNcblxuICAgICAgICB0aGlzLm1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM2Lm9uQWRFcnJvcihlcnJvcik7XG4gICAgICAgIH0pOyAvLyBBZHZlcnRpc2VtZW50IHJlZ3VsYXIgZXZlbnRzXG5cbiAgICAgICAgT2JqZWN0LmtleXMoZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICBfdGhpczYubWFuYWdlci5hZGRFdmVudExpc3RlbmVyKGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlW3R5cGVdLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5vbkFkRXZlbnQoZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pOyAvLyBSZXNvbHZlIG91ciBhZHNNYW5hZ2VyXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdsb2FkZWQnKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiYWRkQ3VlUG9pbnRzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ3VlUG9pbnRzKCkge1xuICAgICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgICAvLyBBZGQgYWR2ZXJ0aXNlbWVudCBjdWUncyB3aXRoaW4gdGhlIHRpbWUgbGluZSBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKCFpcyQxLmVtcHR5KHRoaXMuY3VlUG9pbnRzKSkge1xuICAgICAgICAgIHRoaXMuY3VlUG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGN1ZVBvaW50KSB7XG4gICAgICAgICAgICBpZiAoY3VlUG9pbnQgIT09IDAgJiYgY3VlUG9pbnQgIT09IC0xICYmIGN1ZVBvaW50IDwgX3RoaXM3LnBsYXllci5kdXJhdGlvbikge1xuICAgICAgICAgICAgICB2YXIgc2Vla0VsZW1lbnQgPSBfdGhpczcucGxheWVyLmVsZW1lbnRzLnByb2dyZXNzO1xuXG4gICAgICAgICAgICAgIGlmIChpcyQxLmVsZW1lbnQoc2Vla0VsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1ZVBlcmNlbnRhZ2UgPSAxMDAgLyBfdGhpczcucGxheWVyLmR1cmF0aW9uICogY3VlUG9pbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGN1ZSA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICBjbGFzczogX3RoaXM3LnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5jdWVzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY3VlLnN0eWxlLmxlZnQgPSBcIlwiLmNvbmNhdChjdWVQZXJjZW50YWdlLnRvU3RyaW5nKCksIFwiJVwiKTtcbiAgICAgICAgICAgICAgICBzZWVrRWxlbWVudC5hcHBlbmRDaGlsZChjdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogVGhpcyBpcyB3aGVyZSBhbGwgdGhlIGV2ZW50IGhhbmRsaW5nIHRha2VzIHBsYWNlLiBSZXRyaWV2ZSB0aGUgYWQgZnJvbSB0aGUgZXZlbnQuIFNvbWVcbiAgICAgICAqIGV2ZW50cyAoZS5nLiBBTExfQURTX0NPTVBMRVRFRCkgZG9uJ3QgaGF2ZSB0aGUgYWQgb2JqZWN0IGFzc29jaWF0ZWRcbiAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2ludGVyYWN0aXZlLW1lZGlhLWFkcy9kb2NzL3Nka3MvaHRtbDUvdjMvYXBpcyNpbWEuQWRFdmVudC5UeXBlXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib25BZEV2ZW50XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb25BZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXI7IC8vIFJldHJpZXZlIHRoZSBhZCBmcm9tIHRoZSBldmVudC4gU29tZSBldmVudHMgKGUuZy4gQUxMX0FEU19DT01QTEVURUQpXG4gICAgICAgIC8vIGRvbid0IGhhdmUgYWQgb2JqZWN0IGFzc29jaWF0ZWRcblxuICAgICAgICB2YXIgYWQgPSBldmVudC5nZXRBZCgpO1xuICAgICAgICB2YXIgYWREYXRhID0gZXZlbnQuZ2V0QWREYXRhKCk7IC8vIFByb3h5IGV2ZW50XG5cbiAgICAgICAgdmFyIGRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KHR5cGUpIHtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChfdGhpczgucGxheWVyLCBfdGhpczgucGxheWVyLm1lZGlhLCBcImFkc1wiLmNvbmNhdCh0eXBlLnJlcGxhY2UoL18vZywgJycpLnRvTG93ZXJDYXNlKCkpKTtcbiAgICAgICAgfTsgLy8gQnViYmxlIHRoZSBldmVudFxuXG5cbiAgICAgICAgZGlzcGF0Y2hFdmVudChldmVudC50eXBlKTtcblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkxPQURFRDpcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IGV2ZW50IHNlbnQgZm9yIGFuIGFkIC0gaXQgaXMgcG9zc2libGUgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gICAgICAgICAgICAvLyBhZCBpcyBhIHZpZGVvIGFkIG9yIGFuIG92ZXJsYXlcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbG9hZGVkJyk7IC8vIFN0YXJ0IGNvdW50ZG93blxuXG4gICAgICAgICAgICB0aGlzLnBvbGxDb3VudGRvd24odHJ1ZSk7XG5cbiAgICAgICAgICAgIGlmICghYWQuaXNMaW5lYXIoKSkge1xuICAgICAgICAgICAgICAvLyBQb3NpdGlvbiBBZERpc3BsYXlDb250YWluZXIgY29ycmVjdGx5IGZvciBvdmVybGF5XG4gICAgICAgICAgICAgIGFkLndpZHRoID0gY29udGFpbmVyLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICBhZC5oZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfSAvLyBjb25zb2xlLmluZm8oJ0FkIHR5cGU6ICcgKyBldmVudC5nZXRBZCgpLmdldEFkUG9kSW5mbygpLmdldFBvZEluZGV4KCkpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5pbmZvKCdBZCB0aW1lOiAnICsgZXZlbnQuZ2V0QWQoKS5nZXRBZFBvZEluZm8oKS5nZXRUaW1lT2Zmc2V0KCkpO1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5TVEFSVEVEOlxuICAgICAgICAgICAgLy8gU2V0IHZvbHVtZSB0byBtYXRjaCBwbGF5ZXJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5zZXRWb2x1bWUodGhpcy5wbGF5ZXIudm9sdW1lKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BTExfQURTX0NPTVBMRVRFRDpcbiAgICAgICAgICAgIC8vIEFsbCBhZHMgZm9yIHRoZSBjdXJyZW50IHZpZGVvcyBhcmUgZG9uZS4gV2UgY2FuIG5vdyByZXF1ZXN0IG5ldyBhZHZlcnRpc2VtZW50c1xuICAgICAgICAgICAgLy8gaW4gY2FzZSB0aGUgdmlkZW8gaXMgcmUtcGxheWVkXG4gICAgICAgICAgICAvLyBUT0RPOiBFeGFtcGxlIGZvciB3aGF0IGhhcHBlbnMgd2hlbiBhIG5leHQgdmlkZW8gaW4gYSBwbGF5bGlzdCB3b3VsZCBiZSBsb2FkZWQuXG4gICAgICAgICAgICAvLyBTbyBoZXJlIHdlIGxvYWQgYSBuZXcgdmlkZW8gd2hlbiBhbGwgYWRzIGFyZSBkb25lLlxuICAgICAgICAgICAgLy8gVGhlbiB3ZSBsb2FkIG5ldyBhZHMgd2l0aGluIGEgbmV3IGFkc01hbmFnZXIuIFdoZW4gdGhlIHZpZGVvXG4gICAgICAgICAgICAvLyBJcyBzdGFydGVkIC0gYWZ0ZXIgLSB0aGUgYWRzIGFyZSBsb2FkZWQsIHRoZW4gd2UgZ2V0IGFkcy5cbiAgICAgICAgICAgIC8vIFlvdSBjYW4gYWxzbyBlYXNpbHkgdGVzdCBjYW5jZWxsaW5nIGFuZCByZWxvYWRpbmcgYnkgcnVubmluZ1xuICAgICAgICAgICAgLy8gcGxheWVyLmFkcy5jYW5jZWwoKSBhbmQgcGxheWVyLmFkcy5wbGF5IGZyb20gdGhlIGNvbnNvbGUgSSBndWVzcy5cbiAgICAgICAgICAgIC8vIHRoaXMucGxheWVyLnNvdXJjZSA9IHtcbiAgICAgICAgICAgIC8vICAgICB0eXBlOiAndmlkZW8nLFxuICAgICAgICAgICAgLy8gICAgIHRpdGxlOiAnVmlldyBGcm9tIEEgQmx1ZSBNb29uJyxcbiAgICAgICAgICAgIC8vICAgICBzb3VyY2VzOiBbe1xuICAgICAgICAgICAgLy8gICAgICAgICBzcmM6XG4gICAgICAgICAgICAvLyAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvZGVtby9WaWV3X0Zyb21fQV9CbHVlX01vb25fVHJhaWxlci1IRC5tcDQnLCB0eXBlOlxuICAgICAgICAgICAgLy8gJ3ZpZGVvL21wNCcsIH1dLCBwb3N0ZXI6XG4gICAgICAgICAgICAvLyAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvZGVtby9WaWV3X0Zyb21fQV9CbHVlX01vb25fVHJhaWxlci1IRC5qcGcnLCB0cmFja3M6XG4gICAgICAgICAgICAvLyBbIHsga2luZDogJ2NhcHRpb25zJywgbGFiZWw6ICdFbmdsaXNoJywgc3JjbGFuZzogJ2VuJywgc3JjOlxuICAgICAgICAgICAgLy8gJ2h0dHBzOi8vY2RuLnBseXIuaW8vc3RhdGljL2RlbW8vVmlld19Gcm9tX0FfQmx1ZV9Nb29uX1RyYWlsZXItSEQuZW4udnR0JyxcbiAgICAgICAgICAgIC8vIGRlZmF1bHQ6IHRydWUsIH0sIHsga2luZDogJ2NhcHRpb25zJywgbGFiZWw6ICdGcmVuY2gnLCBzcmNsYW5nOiAnZnInLCBzcmM6XG4gICAgICAgICAgICAvLyAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvZGVtby9WaWV3X0Zyb21fQV9CbHVlX01vb25fVHJhaWxlci1IRC5mci52dHQnLCB9LCBdLFxuICAgICAgICAgICAgLy8gfTtcbiAgICAgICAgICAgIC8vIFRPRE86IFNvIHRoZXJlIGlzIHN0aWxsIHRoaXMgdGhpbmcgd2hlcmUgYSB2aWRlbyBzaG91bGQgb25seSBiZSBhbGxvd2VkIHRvIHN0YXJ0XG4gICAgICAgICAgICAvLyBwbGF5aW5nIHdoZW4gdGhlIElNQSBTREsgaXMgcmVhZHkgb3IgaGFzIGZhaWxlZFxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLmVuZGVkKSB7XG4gICAgICAgICAgICAgIHRoaXMubG9hZEFkcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhlIFNESyB3b24ndCBhbGxvdyBuZXcgYWRzIHRvIGJlIGNhbGxlZCB3aXRob3V0IHJlY2VpdmluZyBhIGNvbnRlbnRDb21wbGV0ZSgpXG4gICAgICAgICAgICAgIHRoaXMubG9hZGVyLmNvbnRlbnRDb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQ6XG4gICAgICAgICAgICAvLyBUaGlzIGV2ZW50IGluZGljYXRlcyB0aGUgYWQgaGFzIHN0YXJ0ZWQgLSB0aGUgdmlkZW8gcGxheWVyIGNhbiBhZGp1c3QgdGhlIFVJLFxuICAgICAgICAgICAgLy8gZm9yIGV4YW1wbGUgZGlzcGxheSBhIHBhdXNlIGJ1dHRvbiBhbmQgcmVtYWluaW5nIHRpbWUuIEZpcmVkIHdoZW4gY29udGVudCBzaG91bGRcbiAgICAgICAgICAgIC8vIGJlIHBhdXNlZC4gVGhpcyB1c3VhbGx5IGhhcHBlbnMgcmlnaHQgYmVmb3JlIGFuIGFkIGlzIGFib3V0IHRvIGNvdmVyIHRoZSBjb250ZW50XG4gICAgICAgICAgICB0aGlzLnBhdXNlQ29udGVudCgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkNPTlRFTlRfUkVTVU1FX1JFUVVFU1RFRDpcbiAgICAgICAgICAgIC8vIFRoaXMgZXZlbnQgaW5kaWNhdGVzIHRoZSBhZCBoYXMgZmluaXNoZWQgLSB0aGUgdmlkZW8gcGxheWVyIGNhbiBwZXJmb3JtXG4gICAgICAgICAgICAvLyBhcHByb3ByaWF0ZSBVSSBhY3Rpb25zLCBzdWNoIGFzIHJlbW92aW5nIHRoZSB0aW1lciBmb3IgcmVtYWluaW5nIHRpbWUgZGV0ZWN0aW9uLlxuICAgICAgICAgICAgLy8gRmlyZWQgd2hlbiBjb250ZW50IHNob3VsZCBiZSByZXN1bWVkLiBUaGlzIHVzdWFsbHkgaGFwcGVucyB3aGVuIGFuIGFkIGZpbmlzaGVzXG4gICAgICAgICAgICAvLyBvciBjb2xsYXBzZXNcbiAgICAgICAgICAgIHRoaXMucG9sbENvdW50ZG93bigpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bWVDb250ZW50KCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuTE9HOlxuICAgICAgICAgICAgaWYgKGFkRGF0YS5hZEVycm9yKSB7XG4gICAgICAgICAgICAgIHRoaXMucGxheWVyLmRlYnVnLndhcm4oXCJOb24tZmF0YWwgYWQgZXJyb3I6IFwiLmNvbmNhdChhZERhdGEuYWRFcnJvci5nZXRNZXNzYWdlKCkpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQW55IGFkIGVycm9yIGhhbmRsaW5nIGNvbWVzIHRocm91Z2ggaGVyZVxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9uQWRFcnJvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRFcnJvcihldmVudCkge1xuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnBsYXllci5kZWJ1Zy53YXJuKCdBZHMgZXJyb3InLCBldmVudCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGhvb2tzIGZvciBQbHlyIGFuZCB3aW5kb3cgZXZlbnRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAqIHRoZSBtaWQtIGFuZCBwb3N0LXJvbGwgbGF1bmNoIGF0IHRoZSBjb3JyZWN0IHRpbWUuIEFuZFxuICAgICAgICogcmVzaXplIHRoZSBhZHZlcnRpc2VtZW50IHdoZW4gdGhlIHBsYXllciByZXNpemVzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJsaXN0ZW5lcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW5lcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXI7XG4gICAgICAgIHZhciB0aW1lO1xuICAgICAgICB0aGlzLnBsYXllci5vbignY2FucGxheScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczkuYWRkQ3VlUG9pbnRzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBsYXllci5vbignZW5kZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM5LmxvYWRlci5jb250ZW50Q29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGxheWVyLm9uKCd0aW1ldXBkYXRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWUgPSBfdGhpczkucGxheWVyLmN1cnJlbnRUaW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wbGF5ZXIub24oJ3NlZWtlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc2Vla2VkVGltZSA9IF90aGlzOS5wbGF5ZXIuY3VycmVudFRpbWU7XG5cbiAgICAgICAgICBpZiAoaXMkMS5lbXB0eShfdGhpczkuY3VlUG9pbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzOS5jdWVQb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoY3VlUG9pbnQsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGltZSA8IGN1ZVBvaW50ICYmIGN1ZVBvaW50IDwgc2Vla2VkVGltZSkge1xuICAgICAgICAgICAgICBfdGhpczkubWFuYWdlci5kaXNjYXJkQWRCcmVhaygpO1xuXG4gICAgICAgICAgICAgIF90aGlzOS5jdWVQb2ludHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IC8vIExpc3RlbiB0byB0aGUgcmVzaXppbmcgb2YgdGhlIHdpbmRvdy4gQW5kIHJlc2l6ZSBhZCBhY2NvcmRpbmdseVxuICAgICAgICAvLyBUT0RPOiBldmVudHVhbGx5IGltcGxlbWVudCBSZXNpemVPYnNlcnZlclxuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzOS5tYW5hZ2VyKSB7XG4gICAgICAgICAgICBfdGhpczkubWFuYWdlci5yZXNpemUoY29udGFpbmVyLm9mZnNldFdpZHRoLCBjb250YWluZXIub2Zmc2V0SGVpZ2h0LCBnb29nbGUuaW1hLlZpZXdNb2RlLk5PUk1BTCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogSW5pdGlhbGl6ZSB0aGUgYWRzTWFuYWdlciBhbmQgc3RhcnQgcGxheWluZyBhZHZlcnRpc2VtZW50c1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicGxheVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgIGlmICghdGhpcy5tYW5hZ2VyUHJvbWlzZSkge1xuICAgICAgICAgIHRoaXMucmVzdW1lQ29udGVudCgpO1xuICAgICAgICB9IC8vIFBsYXkgdGhlIHJlcXVlc3RlZCBhZHZlcnRpc2VtZW50IHdoZW5ldmVyIHRoZSBhZHNNYW5hZ2VyIGlzIHJlYWR5XG5cblxuICAgICAgICB0aGlzLm1hbmFnZXJQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIFNldCB2b2x1bWUgdG8gbWF0Y2ggcGxheWVyXG4gICAgICAgICAgX3RoaXMxMC5tYW5hZ2VyLnNldFZvbHVtZShfdGhpczEwLnBsYXllci52b2x1bWUpOyAvLyBJbml0aWFsaXplIHRoZSBjb250YWluZXIuIE11c3QgYmUgZG9uZSB2aWEgYSB1c2VyIGFjdGlvbiBvbiBtb2JpbGUgZGV2aWNlc1xuXG5cbiAgICAgICAgICBfdGhpczEwLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghX3RoaXMxMC5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBhZHMgbWFuYWdlci4gQWQgcnVsZXMgcGxheWxpc3Qgd2lsbCBzdGFydCBhdCB0aGlzIHRpbWVcbiAgICAgICAgICAgICAgX3RoaXMxMC5tYW5hZ2VyLmluaXQoY29udGFpbmVyLm9mZnNldFdpZHRoLCBjb250YWluZXIub2Zmc2V0SGVpZ2h0LCBnb29nbGUuaW1hLlZpZXdNb2RlLk5PUk1BTCk7IC8vIENhbGwgcGxheSB0byBzdGFydCBzaG93aW5nIHRoZSBhZC4gU2luZ2xlIHZpZGVvIGFuZCBvdmVybGF5IGFkcyB3aWxsXG4gICAgICAgICAgICAgIC8vIHN0YXJ0IGF0IHRoaXMgdGltZTsgdGhlIGNhbGwgd2lsbCBiZSBpZ25vcmVkIGZvciBhZCBydWxlc1xuXG5cbiAgICAgICAgICAgICAgX3RoaXMxMC5tYW5hZ2VyLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzMTAuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIH0gY2F0Y2ggKGFkRXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEFuIGVycm9yIG1heSBiZSB0aHJvd24gaWYgdGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gVkFTVCByZXNwb25zZVxuICAgICAgICAgICAgX3RoaXMxMC5vbkFkRXJyb3IoYWRFcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJlc3VtZSBvdXIgdmlkZW9cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInJlc3VtZUNvbnRlbnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVDb250ZW50KCkge1xuICAgICAgICAvLyBIaWRlIHRoZSBhZHZlcnRpc2VtZW50IGNvbnRhaW5lclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnJzsgLy8gQWQgaXMgc3RvcHBlZFxuXG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlOyAvLyBQbGF5IHZpZGVvXG5cbiAgICAgICAgc2lsZW5jZVByb21pc2UodGhpcy5wbGF5ZXIubWVkaWEucGxheSgpKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUGF1c2Ugb3VyIHZpZGVvXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwYXVzZUNvbnRlbnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZUNvbnRlbnQoKSB7XG4gICAgICAgIC8vIFNob3cgdGhlIGFkdmVydGlzZW1lbnQgY29udGFpbmVyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLnN0eWxlLnpJbmRleCA9IDM7IC8vIEFkIGlzIHBsYXlpbmdcblxuICAgICAgICB0aGlzLnBsYXlpbmcgPSB0cnVlOyAvLyBQYXVzZSBvdXIgdmlkZW8uXG5cbiAgICAgICAgdGhpcy5wbGF5ZXIubWVkaWEucGF1c2UoKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRGVzdHJveSB0aGUgYWRzTWFuYWdlciBzbyB3ZSBjYW4gZ3JhYiBuZXcgYWRzIGFmdGVyIHRoaXMuIElmIHdlIGRvbid0IHRoZW4gd2UncmUgbm90XG4gICAgICAgKiBhbGxvd2VkIHRvIGNhbGwgbmV3IGFkcyBiYXNlZCBvbiBnb29nbGUgcG9saWNpZXMsIGFzIHRoZXkgaW50ZXJwcmV0IHRoaXMgYXMgYW4gYWNjaWRlbnRhbFxuICAgICAgICogdmlkZW8gcmVxdWVzdHMuIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2ludGVyYWN0aXZlLVxuICAgICAgICogbWVkaWEtYWRzL2RvY3Mvc2Rrcy9hbmRyb2lkL2ZhcSM4XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjYW5jZWxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgICAgIC8vIFBhdXNlIG91ciB2aWRlb1xuICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgIHRoaXMucmVzdW1lQ29udGVudCgpO1xuICAgICAgICB9IC8vIFRlbGwgb3VyIGluc3RhbmNlIHRoYXQgd2UncmUgZG9uZSBmb3Igbm93XG5cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7IC8vIFJlLWNyZWF0ZSBvdXIgYWRzTWFuYWdlclxuXG4gICAgICAgIHRoaXMubG9hZEFkcygpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZS1jcmVhdGUgb3VyIGFkc01hbmFnZXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImxvYWRBZHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkQWRzKCkge1xuICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgICAgLy8gVGVsbCBvdXIgYWRzTWFuYWdlciB0byBnbyBieWUgYnllXG4gICAgICAgIHRoaXMubWFuYWdlclByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gRGVzdHJveSBvdXIgYWRzTWFuYWdlclxuICAgICAgICAgIGlmIChfdGhpczExLm1hbmFnZXIpIHtcbiAgICAgICAgICAgIF90aGlzMTEubWFuYWdlci5kZXN0cm95KCk7XG4gICAgICAgICAgfSAvLyBSZS1zZXQgb3VyIGFkc01hbmFnZXIgcHJvbWlzZXNcblxuXG4gICAgICAgICAgX3RoaXMxMS5tYW5hZ2VyUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICBfdGhpczExLm9uKCdsb2FkZWQnLCByZXNvbHZlKTtcblxuICAgICAgICAgICAgX3RoaXMxMS5wbGF5ZXIuZGVidWcubG9nKF90aGlzMTEubWFuYWdlcik7XG4gICAgICAgICAgfSk7IC8vIE5vdyB0aGF0IHRoZSBtYW5hZ2VyIGhhcyBiZWVuIGRlc3Ryb3llZCBzZXQgaXQgdG8gYWxzbyBiZSB1bi1pbml0aWFsaXplZFxuXG4gICAgICAgICAgX3RoaXMxMS5pbml0aWFsaXplZCA9IGZhbHNlOyAvLyBOb3cgcmVxdWVzdCBzb21lIG5ldyBhZHZlcnRpc2VtZW50c1xuXG4gICAgICAgICAgX3RoaXMxMS5yZXF1ZXN0QWRzKCk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlcyBjYWxsYmFja3MgYWZ0ZXIgYW4gYWQgZXZlbnQgd2FzIGludm9rZWRcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCAtIEV2ZW50IHR5cGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInRyaWdnZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmV2ZW50c1tldmVudF07XG5cbiAgICAgICAgaWYgKGlzJDEuYXJyYXkoaGFuZGxlcnMpKSB7XG4gICAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKGlzJDEuZnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgaGFuZGxlci5hcHBseShfdGhpczEyLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBFdmVudCB0eXBlXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZvciB3aGVuIGV2ZW50IG9jY3Vyc1xuICAgICAgICogQHJldHVybiB7QWRzfVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFpcyQxLmFycmF5KHRoaXMuZXZlbnRzW2V2ZW50XSkpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGEgc2FmZXR5IHRpbWVyIGZvciB3aGVuIHRoZSBhZCBuZXR3b3JrIGRvZXNuJ3QgcmVzcG9uZCBmb3Igd2hhdGV2ZXIgcmVhc29uLlxuICAgICAgICogVGhlIGFkdmVydGlzZW1lbnQgaGFzIDEyIHNlY29uZHMgdG8gZ2V0IGl0cyB0aGluZ3MgdG9nZXRoZXIuIFdlIHN0b3AgdGhpcyB0aW1lciB3aGVuIHRoZVxuICAgICAgICogYWR2ZXJ0aXNlbWVudCBpcyBwbGF5aW5nLCBvciB3aGVuIGEgdXNlciBhY3Rpb24gaXMgcmVxdWlyZWQgdG8gc3RhcnQsIHRoZW4gd2UgY2xlYXIgdGhlXG4gICAgICAgKiB0aW1lciBvbiBhZCByZWFkeVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmcm9tXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzdGFydFNhZmV0eVRpbWVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRTYWZldHlUaW1lcih0aW1lLCBmcm9tKSB7XG4gICAgICAgIHZhciBfdGhpczEzID0gdGhpcztcblxuICAgICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJTYWZldHkgdGltZXIgaW52b2tlZCBmcm9tOiBcIi5jb25jYXQoZnJvbSkpO1xuICAgICAgICB0aGlzLnNhZmV0eVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMxMy5jYW5jZWwoKTtcblxuICAgICAgICAgIF90aGlzMTMuY2xlYXJTYWZldHlUaW1lcignc3RhcnRTYWZldHlUaW1lcigpJyk7XG4gICAgICAgIH0sIHRpbWUpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDbGVhciBvdXIgc2FmZXR5IHRpbWVyKHMpXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZnJvbVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xlYXJTYWZldHlUaW1lclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2FmZXR5VGltZXIoZnJvbSkge1xuICAgICAgICBpZiAoIWlzJDEubnVsbE9yVW5kZWZpbmVkKHRoaXMuc2FmZXR5VGltZXIpKSB7XG4gICAgICAgICAgdGhpcy5wbGF5ZXIuZGVidWcubG9nKFwiU2FmZXR5IHRpbWVyIGNsZWFyZWQgZnJvbTogXCIuY29uY2F0KGZyb20pKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zYWZldHlUaW1lcik7XG4gICAgICAgICAgdGhpcy5zYWZldHlUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW5hYmxlZFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVyLmlzSFRNTDUgJiYgdGhpcy5wbGF5ZXIuaXNWaWRlbyAmJiBjb25maWcuZW5hYmxlZCAmJiAoIWlzJDEuZW1wdHkoY29uZmlnLnB1Ymxpc2hlcklkKSB8fCBpcyQxLnVybChjb25maWcudGFnVXJsKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInRhZ1VybFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcblxuICAgICAgICBpZiAoaXMkMS51cmwoY29uZmlnLnRhZ1VybCkpIHtcbiAgICAgICAgICByZXR1cm4gY29uZmlnLnRhZ1VybDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgQVZfUFVCTElTSEVSSUQ6ICc1OGMyNWJiMDA3M2VmNDQ4YjEwODdhZDYnLFxuICAgICAgICAgIEFWX0NIQU5ORUxJRDogJzVhMDQ1OGRjMjhhMDYxNDVlNDUxOWQyMScsXG4gICAgICAgICAgQVZfVVJMOiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsXG4gICAgICAgICAgY2I6IERhdGUubm93KCksXG4gICAgICAgICAgQVZfV0lEVEg6IDY0MCxcbiAgICAgICAgICBBVl9IRUlHSFQ6IDQ4MCxcbiAgICAgICAgICBBVl9DRElNMjogY29uZmlnLnB1Ymxpc2hlcklkXG4gICAgICAgIH07XG4gICAgICAgIHZhciBiYXNlID0gJ2h0dHBzOi8vZ28uYW5pdmlldy5jb20vYXBpL2Fkc2VydmVyNi92YXN0Lyc7XG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChiYXNlLCBcIj9cIikuY29uY2F0KGJ1aWxkVXJsUGFyYW1zKHBhcmFtcykpO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBZHM7XG4gIH0oKTtcblxuICB2YXIgcGFyc2VWdHQgPSBmdW5jdGlvbiBwYXJzZVZ0dCh2dHREYXRhU3RyaW5nKSB7XG4gICAgdmFyIHByb2Nlc3NlZExpc3QgPSBbXTtcbiAgICB2YXIgZnJhbWVzID0gdnR0RGF0YVN0cmluZy5zcGxpdCgvXFxyXFxuXFxyXFxufFxcblxcbnxcXHJcXHIvKTtcbiAgICBmcmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIHZhciBsaW5lcyA9IGZyYW1lLnNwbGl0KC9cXHJcXG58XFxufFxcci8pO1xuICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBpZiAoIWlzJDEubnVtYmVyKHJlc3VsdC5zdGFydFRpbWUpKSB7XG4gICAgICAgICAgLy8gVGhlIGxpbmUgd2l0aCBzdGFydCBhbmQgZW5kIHRpbWVzIG9uIGl0IGlzIHRoZSBmaXJzdCBsaW5lIG9mIGludGVyZXN0XG4gICAgICAgICAgdmFyIG1hdGNoVGltZXMgPSBsaW5lLm1hdGNoKC8oWzAtOV17Mn0pPzo/KFswLTldezJ9KTooWzAtOV17Mn0pLihbMC05XXsyLDN9KSggPy0tPiA/KShbMC05XXsyfSk/Oj8oWzAtOV17Mn0pOihbMC05XXsyfSkuKFswLTldezIsM30pLyk7IC8vIE5vdGUgdGhhdCB0aGlzIGN1cnJlbnRseSBpZ25vcmVzIGNhcHRpb24gZm9ybWF0dGluZyBkaXJlY3RpdmVzIHRoYXQgYXJlIG9wdGlvbmFsbHkgb24gdGhlIGVuZCBvZiB0aGlzIGxpbmUgLSBmaW5lIGZvciBub24tY2FwdGlvbnMgVlRUXG5cbiAgICAgICAgICBpZiAobWF0Y2hUaW1lcykge1xuICAgICAgICAgICAgcmVzdWx0LnN0YXJ0VGltZSA9IE51bWJlcihtYXRjaFRpbWVzWzFdIHx8IDApICogNjAgKiA2MCArIE51bWJlcihtYXRjaFRpbWVzWzJdKSAqIDYwICsgTnVtYmVyKG1hdGNoVGltZXNbM10pICsgTnVtYmVyKFwiMC5cIi5jb25jYXQobWF0Y2hUaW1lc1s0XSkpO1xuICAgICAgICAgICAgcmVzdWx0LmVuZFRpbWUgPSBOdW1iZXIobWF0Y2hUaW1lc1s2XSB8fCAwKSAqIDYwICogNjAgKyBOdW1iZXIobWF0Y2hUaW1lc1s3XSkgKiA2MCArIE51bWJlcihtYXRjaFRpbWVzWzhdKSArIE51bWJlcihcIjAuXCIuY29uY2F0KG1hdGNoVGltZXNbOV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzJDEuZW1wdHkobGluZS50cmltKCkpICYmIGlzJDEuZW1wdHkocmVzdWx0LnRleHQpKSB7XG4gICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSBzdGFydFRpbWUsIHRoZW4gd2UncmUgZGVmaW5pdGVseSB1cCB0byB0aGUgdGV4dCBsaW5lKHMpXG4gICAgICAgICAgdmFyIGxpbmVTcGxpdCA9IGxpbmUudHJpbSgpLnNwbGl0KCcjeHl3aD0nKTtcblxuICAgICAgICAgIHZhciBfbGluZVNwbGl0ID0gX3NsaWNlZFRvQXJyYXkobGluZVNwbGl0LCAxKTtcblxuICAgICAgICAgIHJlc3VsdC50ZXh0ID0gX2xpbmVTcGxpdFswXTtcblxuICAgICAgICAgIC8vIElmIHRoZXJlJ3MgY29udGVudCBpbiBsaW5lU3BsaXRbMV0sIHRoZW4gd2UgaGF2ZSBzcHJpdGVzLiBJZiBub3QsIHRoZW4gaXQncyBqdXN0IG9uZSBmcmFtZSBwZXIgaW1hZ2VcbiAgICAgICAgICBpZiAobGluZVNwbGl0WzFdKSB7XG4gICAgICAgICAgICB2YXIgX2xpbmVTcGxpdCQxJHNwbGl0ID0gbGluZVNwbGl0WzFdLnNwbGl0KCcsJyk7XG5cbiAgICAgICAgICAgIHZhciBfbGluZVNwbGl0JDEkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX2xpbmVTcGxpdCQxJHNwbGl0LCA0KTtcblxuICAgICAgICAgICAgcmVzdWx0LnggPSBfbGluZVNwbGl0JDEkc3BsaXQyWzBdO1xuICAgICAgICAgICAgcmVzdWx0LnkgPSBfbGluZVNwbGl0JDEkc3BsaXQyWzFdO1xuICAgICAgICAgICAgcmVzdWx0LncgPSBfbGluZVNwbGl0JDEkc3BsaXQyWzJdO1xuICAgICAgICAgICAgcmVzdWx0LmggPSBfbGluZVNwbGl0JDEkc3BsaXQyWzNdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXN1bHQudGV4dCkge1xuICAgICAgICBwcm9jZXNzZWRMaXN0LnB1c2gocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcHJvY2Vzc2VkTGlzdDtcbiAgfTtcbiAgLyoqXG4gICAqIFByZXZpZXcgdGh1bWJuYWlscyBmb3Igc2VlayBob3ZlciBhbmQgc2NydWJiaW5nXG4gICAqIFNlZWtpbmc6IEhvdmVyIG92ZXIgdGhlIHNlZWsgYmFyIChkZXNrdG9wIG9ubHkpOiBzaG93cyBhIHNtYWxsIHByZXZpZXcgY29udGFpbmVyIGFib3ZlIHRoZSBzZWVrIGJhclxuICAgKiBTY3J1YmJpbmc6IENsaWNrIGFuZCBkcmFnIHRoZSBzZWVrIGJhciAoZGVza3RvcCBhbmQgbW9iaWxlKTogc2hvd3MgdGhlIHByZXZpZXcgaW1hZ2Ugb3ZlciB0aGUgZW50aXJlIHZpZGVvLCBhcyBpZiB0aGUgdmlkZW8gaXMgc2NydWJiaW5nIGF0IHZlcnkgaGlnaCBzcGVlZFxuICAgKlxuICAgKiBOb3RlczpcbiAgICogLSBUaHVtYnMgYXJlIHNldCB2aWEgSlMgc2V0dGluZ3Mgb24gUGx5ciBpbml0LCBub3QgSFRNTDUgJ3RyYWNrJyBwcm9wZXJ0eS4gVXNpbmcgdGhlIHRyYWNrIHByb3BlcnR5IHdvdWxkIGJlIGEgYml0IGdyb3NzLCBiZWNhdXNlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBjdXN0b20gJ2tpbmRzJy4ga2luZD1tZXRhZGF0YSBtaWdodCBiZSB1c2VkIGZvciBzb21ldGhpbmcgZWxzZSwgYW5kIHdlIHdhbnQgdG8gYWxsb3cgbXVsdGlwbGUgdGh1bWJuYWlscyB0cmFja3MuIFRyYWNrcyBtdXN0IGhhdmUgYSB1bmlxdWUgY29tYmluYXRpb24gb2YgJ2tpbmQnIGFuZCAnbGFiZWwnLiBXZSB3b3VsZCBoYXZlIHRvIGRvIHNvbWV0aGluZyBsaWtlIGtpbmQ9bWV0YWRhdGEsbGFiZWw9dGh1bWJuYWlsczEgLyBraW5kPW1ldGFkYXRhLGxhYmVsPXRodW1ibmFpbHMyLiBTcXVhcmUgcGVnLCByb3VuZCBob2xlXG4gICAqIC0gVlRUIGluZm86IHRoZSBpbWFnZSBVUkwgaXMgcmVsYXRpdmUgdG8gdGhlIFZUVCwgbm90IHRoZSBjdXJyZW50IGRvY3VtZW50LiBCdXQgaWYgdGhlIHVybCBzdGFydHMgd2l0aCBhIHNsYXNoLCBpdCB3aWxsIG5hdHVyYWxseSBiZSByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBkb21haW4uIGh0dHBzOi8vc3VwcG9ydC5qd3BsYXllci5jb20vYXJ0aWNsZXMvaG93LXRvLWFkZC1wcmV2aWV3LXRodW1ibmFpbHNcbiAgICogLSBUaGlzIGltcGxlbWVudGF0aW9uIHVzZXMgbXVsdGlwbGUgc2VwYXJhdGUgaW1nIGVsZW1lbnRzLiBPdGhlciBpbXBsZW1lbnRhdGlvbnMgdXNlIGJhY2tncm91bmQtaW1hZ2Ugb24gb25lIGVsZW1lbnQuIFRoaXMgd291bGQgYmUgbmljZSBhbmQgc2ltcGxlLCBidXQgRmlyZWZveCBhbmQgU2FmYXJpIGhhdmUgZmxpY2tlcmluZyBpc3N1ZXMgd2l0aCByZXBsYWNpbmcgYmFja2dyb3VuZHMgb2YgbGFyZ2VyIGltYWdlcy4gSXQgc2VlbXMgdGhhdCBZb3VUdWJlIHBlcmhhcHMgb25seSBhdm9pZHMgdGhpcyBiZWNhdXNlIHRoZXkgZG9uJ3QgaGF2ZSB0aGUgb3B0aW9uIGZvciBoaWdoLXJlcyBwcmV2aWV3cyAoZXZlbiB0aGUgZnVsbHNjcmVlbiBvbmVzLCB3aGVuIG1vdXNlZG93bi9zZWVraW5nKS4gSW1hZ2VzIGFwcGVhciBvdmVyIHRoZSB0b3Agb2YgZWFjaCBvdGhlciwgYW5kIHByZXZpb3VzIG9uZXMgYXJlIGRpc2NhcmRlZCBvbmNlIHRoZSBuZXcgb25lcyBoYXZlIGJlZW4gcmVuZGVyZWRcbiAgICovXG5cblxuICB2YXIgZml0UmF0aW8gPSBmdW5jdGlvbiBmaXRSYXRpbyhyYXRpbywgb3V0ZXIpIHtcbiAgICB2YXIgdGFyZ2V0UmF0aW8gPSBvdXRlci53aWR0aCAvIG91dGVyLmhlaWdodDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICBpZiAocmF0aW8gPiB0YXJnZXRSYXRpbykge1xuICAgICAgcmVzdWx0LndpZHRoID0gb3V0ZXIud2lkdGg7XG4gICAgICByZXN1bHQuaGVpZ2h0ID0gMSAvIHJhdGlvICogb3V0ZXIud2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5oZWlnaHQgPSBvdXRlci5oZWlnaHQ7XG4gICAgICByZXN1bHQud2lkdGggPSByYXRpbyAqIG91dGVyLmhlaWdodDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBQcmV2aWV3VGh1bWJuYWlscyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogUHJldmlld1RodW1ibmFpbHMgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIHtQbHlyfSBwbGF5ZXJcbiAgICAgKiBAcmV0dXJuIHtQcmV2aWV3VGh1bWJuYWlsc31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQcmV2aWV3VGh1bWJuYWlscyhwbGF5ZXIpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcmV2aWV3VGh1bWJuYWlscyk7XG5cbiAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgICAgdGhpcy50aHVtYm5haWxzID0gW107XG4gICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5sYXN0TW91c2VNb3ZlVGltZSA9IERhdGUubm93KCk7XG4gICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgdGhpcy5sb2FkZWRJbWFnZXMgPSBbXTtcbiAgICAgIHRoaXMuZWxlbWVudHMgPSB7XG4gICAgICAgIHRodW1iOiB7fSxcbiAgICAgICAgc2NydWJiaW5nOiB7fVxuICAgICAgfTtcbiAgICAgIHRoaXMubG9hZCgpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQcmV2aWV3VGh1bWJuYWlscywgW3tcbiAgICAgIGtleTogXCJsb2FkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAvLyBUb2dnbGUgdGhlIHJlZ3VsYXIgc2VlayB0b29sdGlwXG4gICAgICAgIGlmICh0aGlzLnBsYXllci5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwKSB7XG4gICAgICAgICAgdGhpcy5wbGF5ZXIuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcC5oaWRkZW4gPSB0aGlzLmVuYWJsZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0VGh1bWJuYWlscygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghX3RoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gLy8gUmVuZGVyIERPTSBlbGVtZW50c1xuXG5cbiAgICAgICAgICBfdGhpcy5yZW5kZXIoKTsgLy8gQ2hlY2sgdG8gc2VlIGlmIHRodW1iIGNvbnRhaW5lciBzaXplIHdhcyBzcGVjaWZpZWQgbWFudWFsbHkgaW4gQ1NTXG5cblxuICAgICAgICAgIF90aGlzLmRldGVybWluZUNvbnRhaW5lckF1dG9TaXppbmcoKTtcblxuICAgICAgICAgIF90aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBEb3dubG9hZCBWVFQgZmlsZXMgYW5kIHBhcnNlIHRoZW1cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRUaHVtYm5haWxzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGh1bWJuYWlscygpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgdmFyIHNyYyA9IF90aGlzMi5wbGF5ZXIuY29uZmlnLnByZXZpZXdUaHVtYm5haWxzLnNyYztcblxuICAgICAgICAgIGlmIChpcyQxLmVtcHR5KHNyYykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBwcmV2aWV3VGh1bWJuYWlscy5zcmMgY29uZmlnIGF0dHJpYnV0ZScpO1xuICAgICAgICAgIH0gLy8gUmVzb2x2ZSBwcm9taXNlXG5cblxuICAgICAgICAgIHZhciBzb3J0QW5kUmVzb2x2ZSA9IGZ1bmN0aW9uIHNvcnRBbmRSZXNvbHZlKCkge1xuICAgICAgICAgICAgLy8gU29ydCBzbWFsbGVzdCB0byBiaWdnZXN0IChlLmcuLCBbMTIwcCwgNDgwcCwgMTA4MHBdKVxuICAgICAgICAgICAgX3RoaXMyLnRodW1ibmFpbHMuc29ydChmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgICByZXR1cm4geC5oZWlnaHQgLSB5LmhlaWdodDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfdGhpczIucGxheWVyLmRlYnVnLmxvZygnUHJldmlldyB0aHVtYm5haWxzJywgX3RoaXMyLnRodW1ibmFpbHMpO1xuXG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfTsgLy8gVmlhIGNhbGxiYWNrKClcblxuXG4gICAgICAgICAgaWYgKGlzJDEuZnVuY3Rpb24oc3JjKSkge1xuICAgICAgICAgICAgc3JjKGZ1bmN0aW9uICh0aHVtYm5haWxzKSB7XG4gICAgICAgICAgICAgIF90aGlzMi50aHVtYm5haWxzID0gdGh1bWJuYWlscztcbiAgICAgICAgICAgICAgc29ydEFuZFJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gLy8gVlRUIHVybHNcbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gSWYgc3RyaW5nLCBjb252ZXJ0IGludG8gc2luZ2xlLWVsZW1lbnQgbGlzdFxuICAgICAgICAgICAgICB2YXIgdXJscyA9IGlzJDEuc3RyaW5nKHNyYykgPyBbc3JjXSA6IHNyYzsgLy8gTG9vcCB0aHJvdWdoIGVhY2ggc3JjIFVSTC4gRG93bmxvYWQgYW5kIHByb2Nlc3MgdGhlIFZUVCBmaWxlLCBzdG9yaW5nIHRoZSByZXN1bHRpbmcgZGF0YSBpbiB0aGlzLnRodW1ibmFpbHNcblxuICAgICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSB1cmxzLm1hcChmdW5jdGlvbiAodSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0VGh1bWJuYWlsKHUpO1xuICAgICAgICAgICAgICB9KTsgLy8gUmVzb2x2ZVxuXG4gICAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKHNvcnRBbmRSZXNvbHZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IC8vIFByb2Nlc3MgaW5kaXZpZHVhbCBWVFQgZmlsZVxuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldFRodW1ibmFpbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRodW1ibmFpbCh1cmwpIHtcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIHRodW1ibmFpbCA9IHtcbiAgICAgICAgICAgICAgZnJhbWVzOiBwYXJzZVZ0dChyZXNwb25zZSksXG4gICAgICAgICAgICAgIGhlaWdodDogbnVsbCxcbiAgICAgICAgICAgICAgdXJsUHJlZml4OiAnJ1xuICAgICAgICAgICAgfTsgLy8gSWYgdGhlIFVSTHMgZG9uJ3Qgc3RhcnQgd2l0aCAnLycsIHRoZW4gd2UgbmVlZCB0byBzZXQgdGhlaXIgcmVsYXRpdmUgcGF0aCB0byBiZSB0aGUgbG9jYXRpb24gb2YgdGhlIFZUVCBmaWxlXG4gICAgICAgICAgICAvLyBJZiB0aGUgVVJMcyBkbyBzdGFydCB3aXRoICcvJywgdGhlbiB0aGV5IG9idmlvdXNseSBkb24ndCBuZWVkIGEgcHJlZml4LCBzbyBpdCB3aWxsIHJlbWFpbiBibGFua1xuICAgICAgICAgICAgLy8gSWYgdGhlIHRodW1ibmFpbCBVUkxzIHN0YXJ0IHdpdGggd2l0aCBub25lIG9mICcvJywgJ2h0dHA6Ly8nIG9yICdodHRwczovLycsIHRoZW4gd2UgbmVlZCB0byBzZXQgdGhlaXIgcmVsYXRpdmUgcGF0aCB0byBiZSB0aGUgbG9jYXRpb24gb2YgdGhlIFZUVCBmaWxlXG5cbiAgICAgICAgICAgIGlmICghdGh1bWJuYWlsLmZyYW1lc1swXS50ZXh0LnN0YXJ0c1dpdGgoJy8nKSAmJiAhdGh1bWJuYWlsLmZyYW1lc1swXS50ZXh0LnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSAmJiAhdGh1bWJuYWlsLmZyYW1lc1swXS50ZXh0LnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcbiAgICAgICAgICAgICAgdGh1bWJuYWlsLnVybFByZWZpeCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgICAgICAgIH0gLy8gRG93bmxvYWQgdGhlIGZpcnN0IGZyYW1lLCBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUvc2V0IHRoZSBoZWlnaHQgb2YgdGhpcyB0aHVtYm5haWxzRGVmXG5cblxuICAgICAgICAgICAgdmFyIHRlbXBJbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgICAgICB0ZW1wSW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB0aHVtYm5haWwuaGVpZ2h0ID0gdGVtcEltYWdlLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgICAgICAgIHRodW1ibmFpbC53aWR0aCA9IHRlbXBJbWFnZS5uYXR1cmFsV2lkdGg7XG5cbiAgICAgICAgICAgICAgX3RoaXMzLnRodW1ibmFpbHMucHVzaCh0aHVtYm5haWwpO1xuXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRlbXBJbWFnZS5zcmMgPSB0aHVtYm5haWwudXJsUHJlZml4ICsgdGh1bWJuYWlsLmZyYW1lc1swXS50ZXh0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic3RhcnRNb3ZlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRNb3ZlKGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzJDEuZXZlbnQoZXZlbnQpIHx8ICFbJ3RvdWNobW92ZScsICdtb3VzZW1vdmUnXS5pbmNsdWRlcyhldmVudC50eXBlKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBXYWl0IHVudGlsIG1lZGlhIGhhcyBhIGR1cmF0aW9uXG5cblxuICAgICAgICBpZiAoIXRoaXMucGxheWVyLm1lZGlhLmR1cmF0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaG1vdmUnKSB7XG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHNlZWsgaG92ZXIgcG9zaXRpb24gYXMgYXBwcm94IHZpZGVvIHNlY29uZHNcbiAgICAgICAgICB0aGlzLnNlZWtUaW1lID0gdGhpcy5wbGF5ZXIubWVkaWEuZHVyYXRpb24gKiAodGhpcy5wbGF5ZXIuZWxlbWVudHMuaW5wdXRzLnNlZWsudmFsdWUgLyAxMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENhbGN1bGF0ZSBzZWVrIGhvdmVyIHBvc2l0aW9uIGFzIGFwcHJveCB2aWRlbyBzZWNvbmRzXG4gICAgICAgICAgdmFyIGNsaWVudFJlY3QgPSB0aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICB2YXIgcGVyY2VudGFnZSA9IDEwMCAvIGNsaWVudFJlY3Qud2lkdGggKiAoZXZlbnQucGFnZVggLSBjbGllbnRSZWN0LmxlZnQpO1xuICAgICAgICAgIHRoaXMuc2Vla1RpbWUgPSB0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiAqIChwZXJjZW50YWdlIC8gMTAwKTtcblxuICAgICAgICAgIGlmICh0aGlzLnNlZWtUaW1lIDwgMCkge1xuICAgICAgICAgICAgLy8gVGhlIG1vdXNlbW92ZSBmaXJlcyBmb3IgMTArcHggb3V0IHRvIHRoZSBsZWZ0XG4gICAgICAgICAgICB0aGlzLnNlZWtUaW1lID0gMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5zZWVrVGltZSA+IHRoaXMucGxheWVyLm1lZGlhLmR1cmF0aW9uIC0gMSkge1xuICAgICAgICAgICAgLy8gVG9vayAxIHNlY29uZCBvZmYgdGhlIGR1cmF0aW9uIGZvciBzYWZldHksIGJlY2F1c2UgZGlmZmVyZW50IHBsYXllcnMgY2FuIGRpc2FncmVlIG9uIHRoZSByZWFsIGR1cmF0aW9uIG9mIGEgdmlkZW9cbiAgICAgICAgICAgIHRoaXMuc2Vla1RpbWUgPSB0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiAtIDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5tb3VzZVBvc1ggPSBldmVudC5wYWdlWDsgLy8gU2V0IHRpbWUgdGV4dCBpbnNpZGUgaW1hZ2UgY29udGFpbmVyXG5cbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLnRpbWUuaW5uZXJUZXh0ID0gZm9ybWF0VGltZSh0aGlzLnNlZWtUaW1lKTtcbiAgICAgICAgfSAvLyBEb3dubG9hZCBhbmQgc2hvdyBpbWFnZVxuXG5cbiAgICAgICAgdGhpcy5zaG93SW1hZ2VBdEN1cnJlbnRUaW1lKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImVuZE1vdmVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRNb3ZlKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKGZhbHNlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic3RhcnRTY3J1YmJpbmdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydFNjcnViYmluZyhldmVudCkge1xuICAgICAgICAvLyBPbmx5IGFjdCBvbiBsZWZ0IG1vdXNlIGJ1dHRvbiAoMCksIG9yIHRvdWNoIGRldmljZSAoZXZlbnQuYnV0dG9uIGRvZXMgbm90IGV4aXN0IG9yIGlzIGZhbHNlKVxuICAgICAgICBpZiAoaXMkMS5udWxsT3JVbmRlZmluZWQoZXZlbnQuYnV0dG9uKSB8fCBldmVudC5idXR0b24gPT09IGZhbHNlIHx8IGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTsgLy8gV2FpdCB1bnRpbCBtZWRpYSBoYXMgYSBkdXJhdGlvblxuXG4gICAgICAgICAgaWYgKHRoaXMucGxheWVyLm1lZGlhLmR1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lcih0cnVlKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVGh1bWJDb250YWluZXIoZmFsc2UsIHRydWUpOyAvLyBEb3dubG9hZCBhbmQgc2hvdyBpbWFnZVxuXG4gICAgICAgICAgICB0aGlzLnNob3dJbWFnZUF0Q3VycmVudFRpbWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW5kU2NydWJiaW5nXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW5kU2NydWJiaW5nKCkge1xuICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlOyAvLyBIaWRlIHNjcnViYmluZyBwcmV2aWV3LiBCdXQgd2FpdCB1bnRpbCB0aGUgdmlkZW8gaGFzIHN1Y2Nlc3NmdWxseSBzZWVrZWQgYmVmb3JlIGhpZGluZyB0aGUgc2NydWJiaW5nIHByZXZpZXdcblxuICAgICAgICBpZiAoTWF0aC5jZWlsKHRoaXMubGFzdFRpbWUpID09PSBNYXRoLmNlaWwodGhpcy5wbGF5ZXIubWVkaWEuY3VycmVudFRpbWUpKSB7XG4gICAgICAgICAgLy8gVGhlIHZpZGVvIHdhcyBhbHJlYWR5IHNlZWtlZC9sb2FkZWQgYXQgdGhlIGNob3NlbiB0aW1lIC0gaGlkZSBpbW1lZGlhdGVseVxuICAgICAgICAgIHRoaXMudG9nZ2xlU2NydWJiaW5nQ29udGFpbmVyKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGUgdmlkZW8gaGFzbid0IHNlZWtlZCB5ZXQuIFdhaXQgZm9yIHRoYXRcbiAgICAgICAgICBvbmNlLmNhbGwodGhpcy5wbGF5ZXIsIHRoaXMucGxheWVyLm1lZGlhLCAndGltZXVwZGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFJlLWNoZWNrIG1vdXNlZG93biAtIHdlIG1pZ2h0IGhhdmUgYWxyZWFkeSBzdGFydGVkIHNjcnViYmluZyBhZ2FpblxuICAgICAgICAgICAgaWYgKCFfdGhpczQubW91c2VEb3duKSB7XG4gICAgICAgICAgICAgIF90aGlzNC50b2dnbGVTY3J1YmJpbmdDb250YWluZXIoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGhvb2tzIGZvciBQbHlyIGFuZCB3aW5kb3cgZXZlbnRzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJsaXN0ZW5lcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW5lcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgIC8vIEhpZGUgdGh1bWJuYWlsIHByZXZpZXcgLSBvbiBtb3VzZSBjbGljaywgbW91c2UgbGVhdmUgKGluIGxpc3RlbmVycy5qcyBmb3Igbm93KSwgYW5kIHZpZGVvIHBsYXkvc2Vlay4gQWxsIGZvdXIgYXJlIHJlcXVpcmVkLCBlLmcuLCBmb3IgYnVmZmVyaW5nXG4gICAgICAgIHRoaXMucGxheWVyLm9uKCdwbGF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNS50b2dnbGVUaHVtYkNvbnRhaW5lcihmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBsYXllci5vbignc2Vla2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNS50b2dnbGVUaHVtYkNvbnRhaW5lcihmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBsYXllci5vbigndGltZXVwZGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczUubGFzdFRpbWUgPSBfdGhpczUucGxheWVyLm1lZGlhLmN1cnJlbnRUaW1lO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlIEhUTUwgZWxlbWVudHMgZm9yIGltYWdlIGNvbnRhaW5lcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgLy8gQ3JlYXRlIEhUTUwgZWxlbWVudDogcGx5cl9fcHJldmlldy10aHVtYm5haWwtY29udGFpbmVyXG4gICAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aHVtYkNvbnRhaW5lclxuICAgICAgICB9KTsgLy8gV3JhcHBlciBmb3IgdGhlIGltYWdlIGZvciBzdHlsaW5nXG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMuaW1hZ2VDb250YWluZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIpOyAvLyBDcmVhdGUgSFRNTCBlbGVtZW50LCBwYXJlbnQrc3BhbjogdGltZSB0ZXh0IChlLmcuLCAwMTozMjowMClcblxuICAgICAgICB2YXIgdGltZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMudGltZUNvbnRhaW5lclxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy50aHVtYi50aW1lID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHt9LCAnMDA6MDAnKTtcbiAgICAgICAgdGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnRodW1iLnRpbWUpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aW1lQ29udGFpbmVyKTsgLy8gSW5qZWN0IHRoZSB3aG9sZSB0aHVtYlxuXG4gICAgICAgIGlmIChpcyQxLmVsZW1lbnQodGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MpKSB7XG4gICAgICAgICAgdGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy50aHVtYi5jb250YWluZXIpO1xuICAgICAgICB9IC8vIENyZWF0ZSBIVE1MIGVsZW1lbnQ6IHBseXJfX3ByZXZpZXctc2NydWJiaW5nLWNvbnRhaW5lclxuXG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy5zY3J1YmJpbmdDb250YWluZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGxheWVyLmVsZW1lbnRzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lcikge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMuc2NydWJiaW5nLmNvbnRhaW5lcikge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMuc2NydWJiaW5nLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzaG93SW1hZ2VBdEN1cnJlbnRUaW1lXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0ltYWdlQXRDdXJyZW50VGltZSgpIHtcbiAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XG4gICAgICAgICAgdGhpcy5zZXRTY3J1YmJpbmdDb250YWluZXJTaXplKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZXRUaHVtYkNvbnRhaW5lclNpemVBbmRQb3MoKTtcbiAgICAgICAgfSAvLyBGaW5kIHRoZSBkZXNpcmVkIHRodW1ibmFpbCBpbmRleFxuICAgICAgICAvLyBUT0RPOiBIYW5kbGUgYSB2aWRlbyBsb25nZXIgdGhhbiB0aGUgdGh1bWJzIHdoZXJlIHRodW1iTnVtIGlzIG51bGxcblxuXG4gICAgICAgIHZhciB0aHVtYk51bSA9IHRoaXMudGh1bWJuYWlsc1swXS5mcmFtZXMuZmluZEluZGV4KGZ1bmN0aW9uIChmcmFtZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpczYuc2Vla1RpbWUgPj0gZnJhbWUuc3RhcnRUaW1lICYmIF90aGlzNi5zZWVrVGltZSA8PSBmcmFtZS5lbmRUaW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGhhc1RodW1iID0gdGh1bWJOdW0gPj0gMDtcbiAgICAgICAgdmFyIHF1YWxpdHlJbmRleCA9IDA7IC8vIFNob3cgdGhlIHRodW1iIGNvbnRhaW5lciBpZiB3ZSdyZSBub3Qgc2NydWJiaW5nXG5cbiAgICAgICAgaWYgKCF0aGlzLm1vdXNlRG93bikge1xuICAgICAgICAgIHRoaXMudG9nZ2xlVGh1bWJDb250YWluZXIoaGFzVGh1bWIpO1xuICAgICAgICB9IC8vIE5vIG1hdGNoaW5nIHRodW1iIGZvdW5kXG5cblxuICAgICAgICBpZiAoIWhhc1RodW1iKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIENoZWNrIHRvIHNlZSBpZiB3ZSd2ZSBhbHJlYWR5IGRvd25sb2FkZWQgaGlnaGVyIHF1YWxpdHkgdmVyc2lvbnMgb2YgdGhpcyBpbWFnZVxuXG5cbiAgICAgICAgdGhpcy50aHVtYm5haWxzLmZvckVhY2goZnVuY3Rpb24gKHRodW1ibmFpbCwgaW5kZXgpIHtcbiAgICAgICAgICBpZiAoX3RoaXM2LmxvYWRlZEltYWdlcy5pbmNsdWRlcyh0aHVtYm5haWwuZnJhbWVzW3RodW1iTnVtXS50ZXh0KSkge1xuICAgICAgICAgICAgcXVhbGl0eUluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgfVxuICAgICAgICB9KTsgLy8gT25seSBwcm9jZWVkIGlmIGVpdGhlciB0aHVtYm51bSBvciB0aHVtYmZpbGVuYW1lIGhhcyBjaGFuZ2VkXG5cbiAgICAgICAgaWYgKHRodW1iTnVtICE9PSB0aGlzLnNob3dpbmdUaHVtYikge1xuICAgICAgICAgIHRoaXMuc2hvd2luZ1RodW1iID0gdGh1bWJOdW07XG4gICAgICAgICAgdGhpcy5sb2FkSW1hZ2UocXVhbGl0eUluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBTaG93IHRoZSBpbWFnZSB0aGF0J3MgY3VycmVudGx5IHNwZWNpZmllZCBpbiB0aGlzLnNob3dpbmdUaHVtYlxuXG4gICAgfSwge1xuICAgICAga2V5OiBcImxvYWRJbWFnZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRJbWFnZSgpIHtcbiAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHF1YWxpdHlJbmRleCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgICAgICAgdmFyIHRodW1iTnVtID0gdGhpcy5zaG93aW5nVGh1bWI7XG4gICAgICAgIHZhciB0aHVtYm5haWwgPSB0aGlzLnRodW1ibmFpbHNbcXVhbGl0eUluZGV4XTtcbiAgICAgICAgdmFyIHVybFByZWZpeCA9IHRodW1ibmFpbC51cmxQcmVmaXg7XG4gICAgICAgIHZhciBmcmFtZSA9IHRodW1ibmFpbC5mcmFtZXNbdGh1bWJOdW1dO1xuICAgICAgICB2YXIgdGh1bWJGaWxlbmFtZSA9IHRodW1ibmFpbC5mcmFtZXNbdGh1bWJOdW1dLnRleHQ7XG4gICAgICAgIHZhciB0aHVtYlVybCA9IHVybFByZWZpeCArIHRodW1iRmlsZW5hbWU7XG5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQgfHwgdGhpcy5jdXJyZW50SW1hZ2VFbGVtZW50LmRhdGFzZXQuZmlsZW5hbWUgIT09IHRodW1iRmlsZW5hbWUpIHtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSBhbHJlYWR5IGxvYWRpbmcgYSBwcmV2aW91cyBpbWFnZSwgcmVtb3ZlIGl0cyBvbmxvYWQgaGFuZGxlciAtIHdlIGRvbid0IHdhbnQgaXQgdG8gbG9hZCBhZnRlciB0aGlzIG9uZVxuICAgICAgICAgIC8vIE9ubHkgZG8gdGhpcyBpZiBub3QgdXNpbmcgc3ByaXRlcy4gV2l0aG91dCBzcHJpdGVzIHdlIHJlYWxseSB3YW50IHRvIHNob3cgYXMgbWFueSBpbWFnZXMgYXMgcG9zc2libGUsIGFzIGEgYmVzdC1lZmZvcnRcbiAgICAgICAgICBpZiAodGhpcy5sb2FkaW5nSW1hZ2UgJiYgdGhpcy51c2luZ1Nwcml0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0ltYWdlLm9ubG9hZCA9IG51bGw7XG4gICAgICAgICAgfSAvLyBXZSdyZSBidWlsZGluZyBhbmQgYWRkaW5nIGEgbmV3IGltYWdlLiBJbiBvdGhlciBpbXBsZW1lbnRhdGlvbnMgb2Ygc2ltaWxhciBmdW5jdGlvbmFsaXR5IChZb3VUdWJlKSwgYmFja2dyb3VuZCBpbWFnZVxuICAgICAgICAgIC8vIGlzIGluc3RlYWQgdXNlZC4gQnV0IHRoaXMgY2F1c2VzIGlzc3VlcyB3aXRoIGxhcmdlciBpbWFnZXMgaW4gRmlyZWZveCBhbmQgU2FmYXJpIC0gc3dpdGNoaW5nIGJldHdlZW4gYmFja2dyb3VuZFxuICAgICAgICAgIC8vIGltYWdlcyBjYXVzZXMgYSBmbGlja2VyLiBQdXR0aW5nIGEgbmV3IGltYWdlIG92ZXIgdGhlIHRvcCBkb2VzIG5vdFxuXG5cbiAgICAgICAgICB2YXIgcHJldmlld0ltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgcHJldmlld0ltYWdlLnNyYyA9IHRodW1iVXJsO1xuICAgICAgICAgIHByZXZpZXdJbWFnZS5kYXRhc2V0LmluZGV4ID0gdGh1bWJOdW07XG4gICAgICAgICAgcHJldmlld0ltYWdlLmRhdGFzZXQuZmlsZW5hbWUgPSB0aHVtYkZpbGVuYW1lO1xuICAgICAgICAgIHRoaXMuc2hvd2luZ1RodW1iRmlsZW5hbWUgPSB0aHVtYkZpbGVuYW1lO1xuICAgICAgICAgIHRoaXMucGxheWVyLmRlYnVnLmxvZyhcIkxvYWRpbmcgaW1hZ2U6IFwiLmNvbmNhdCh0aHVtYlVybCkpOyAvLyBGb3Igc29tZSByZWFzb24sIHBhc3NpbmcgdGhlIG5hbWVkIGZ1bmN0aW9uIGRpcmVjdGx5IGNhdXNlcyBpdCB0byBleGVjdXRlIGltbWVkaWF0ZWx5LiBTbyBJJ3ZlIHdyYXBwZWQgaXQgaW4gYW4gYW5vbnltb3VzIGZ1bmN0aW9uLi4uXG5cbiAgICAgICAgICBwcmV2aWV3SW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5zaG93SW1hZ2UocHJldmlld0ltYWdlLCBmcmFtZSwgcXVhbGl0eUluZGV4LCB0aHVtYk51bSwgdGh1bWJGaWxlbmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHRoaXMubG9hZGluZ0ltYWdlID0gcHJldmlld0ltYWdlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlT2xkSW1hZ2VzKHByZXZpZXdJbWFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBpbWFnZVxuICAgICAgICAgIHRoaXMuc2hvd0ltYWdlKHRoaXMuY3VycmVudEltYWdlRWxlbWVudCwgZnJhbWUsIHF1YWxpdHlJbmRleCwgdGh1bWJOdW0sIHRodW1iRmlsZW5hbWUsIGZhbHNlKTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQuZGF0YXNldC5pbmRleCA9IHRodW1iTnVtO1xuICAgICAgICAgIHRoaXMucmVtb3ZlT2xkSW1hZ2VzKHRoaXMuY3VycmVudEltYWdlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2hvd0ltYWdlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0ltYWdlKHByZXZpZXdJbWFnZSwgZnJhbWUsIHF1YWxpdHlJbmRleCwgdGh1bWJOdW0sIHRodW1iRmlsZW5hbWUpIHtcbiAgICAgICAgdmFyIG5ld0ltYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiB0cnVlO1xuICAgICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coXCJTaG93aW5nIHRodW1iOiBcIi5jb25jYXQodGh1bWJGaWxlbmFtZSwgXCIuIG51bTogXCIpLmNvbmNhdCh0aHVtYk51bSwgXCIuIHF1YWw6IFwiKS5jb25jYXQocXVhbGl0eUluZGV4LCBcIi4gbmV3aW1nOiBcIikuY29uY2F0KG5ld0ltYWdlKSk7XG4gICAgICAgIHRoaXMuc2V0SW1hZ2VTaXplQW5kT2Zmc2V0KHByZXZpZXdJbWFnZSwgZnJhbWUpO1xuXG4gICAgICAgIGlmIChuZXdJbWFnZSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHByZXZpZXdJbWFnZSk7XG4gICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VFbGVtZW50ID0gcHJldmlld0ltYWdlO1xuXG4gICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZEltYWdlcy5pbmNsdWRlcyh0aHVtYkZpbGVuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5sb2FkZWRJbWFnZXMucHVzaCh0aHVtYkZpbGVuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gUHJlbG9hZCBpbWFnZXMgYmVmb3JlIGFuZCBhZnRlciB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgLy8gU2hvdyBoaWdoZXIgcXVhbGl0eSBvZiB0aGUgc2FtZSBmcmFtZVxuICAgICAgICAvLyBFYWNoIHN0ZXAgaGVyZSBoYXMgYSBzaG9ydCB0aW1lIGRlbGF5LCBhbmQgb25seSBjb250aW51ZXMgaWYgc3RpbGwgaG92ZXJpbmcvc2Vla2luZyB0aGUgc2FtZSBzcG90LiBUaGlzIGlzIHRvIHByb3RlY3Qgc2xvdyBjb25uZWN0aW9ucyBmcm9tIG92ZXJsb2FkaW5nXG5cblxuICAgICAgICB0aGlzLnByZWxvYWROZWFyYnkodGh1bWJOdW0sIHRydWUpLnRoZW4odGhpcy5wcmVsb2FkTmVhcmJ5KHRodW1iTnVtLCBmYWxzZSkpLnRoZW4odGhpcy5nZXRIaWdoZXJRdWFsaXR5KHF1YWxpdHlJbmRleCwgcHJldmlld0ltYWdlLCBmcmFtZSwgdGh1bWJGaWxlbmFtZSkpO1xuICAgICAgfSAvLyBSZW1vdmUgYWxsIHByZXZpZXcgaW1hZ2VzIHRoYXQgYXJlbid0IHRoZSBkZXNpZ25hdGVkIGN1cnJlbnQgaW1hZ2VcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW1vdmVPbGRJbWFnZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVPbGRJbWFnZXMoY3VycmVudEltYWdlKSB7XG4gICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgIC8vIEdldCBhIGxpc3Qgb2YgYWxsIGltYWdlcywgY29udmVydCBpdCBmcm9tIGEgRE9NIGxpc3QgdG8gYW4gYXJyYXlcbiAgICAgICAgQXJyYXkuZnJvbSh0aGlzLmN1cnJlbnRJbWFnZUNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICBpZiAoaW1hZ2UudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaW1nJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciByZW1vdmVEZWxheSA9IF90aGlzOC51c2luZ1Nwcml0ZXMgPyA1MDAgOiAxMDAwO1xuXG4gICAgICAgICAgaWYgKGltYWdlLmRhdGFzZXQuaW5kZXggIT09IGN1cnJlbnRJbWFnZS5kYXRhc2V0LmluZGV4ICYmICFpbWFnZS5kYXRhc2V0LmRlbGV0aW5nKSB7XG4gICAgICAgICAgICAvLyBXYWl0IDIwMG1zLCBhcyB0aGUgbmV3IGltYWdlIGNhbiB0YWtlIHNvbWUgdGltZSB0byBzaG93IG9uIGNlcnRhaW4gYnJvd3NlcnMgKGV2ZW4gdGhvdWdoIGl0IHdhcyBkb3dubG9hZGVkIGJlZm9yZSBzaG93aW5nKS4gVGhpcyB3aWxsIHByZXZlbnQgZmxpY2tlciwgYW5kIHNob3cgc29tZSBnZW5lcm9zaXR5IHRvd2FyZHMgc2xvd2VyIGNsaWVudHNcbiAgICAgICAgICAgIC8vIEZpcnN0IHNldCBhdHRyaWJ1dGUgJ2RlbGV0aW5nJyB0byBwcmV2ZW50IG11bHRpLWhhbmRsaW5nIG9mIHRoaXMgb24gcmVwZWF0IGZpcmluZyBvZiB0aGlzIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGltYWdlLmRhdGFzZXQuZGVsZXRpbmcgPSB0cnVlOyAvLyBUaGlzIGhhcyB0byBiZSBzZXQgYmVmb3JlIHRoZSB0aW1lb3V0IC0gdG8gcHJldmVudCBpc3N1ZXMgc3dpdGNoaW5nIGJldHdlZW4gaG92ZXIgYW5kIHNjcnViXG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50SW1hZ2VDb250YWluZXIgPSBfdGhpczguY3VycmVudEltYWdlQ29udGFpbmVyO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRJbWFnZUNvbnRhaW5lci5yZW1vdmVDaGlsZChpbWFnZSk7XG5cbiAgICAgICAgICAgICAgX3RoaXM4LnBsYXllci5kZWJ1Zy5sb2coXCJSZW1vdmluZyB0aHVtYjogXCIuY29uY2F0KGltYWdlLmRhdGFzZXQuZmlsZW5hbWUpKTtcbiAgICAgICAgICAgIH0sIHJlbW92ZURlbGF5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBQcmVsb2FkIGltYWdlcyBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjdXJyZW50IG9uZS4gT25seSBpZiB0aGUgdXNlciBpcyBzdGlsbCBob3ZlcmluZy9zZWVraW5nIHRoZSBzYW1lIGZyYW1lXG4gICAgICAvLyBUaGlzIHdpbGwgb25seSBwcmVsb2FkIHRoZSBsb3dlc3QgcXVhbGl0eVxuXG4gICAgfSwge1xuICAgICAga2V5OiBcInByZWxvYWROZWFyYnlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVsb2FkTmVhcmJ5KHRodW1iTnVtKSB7XG4gICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgIHZhciBmb3J3YXJkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvbGRUaHVtYkZpbGVuYW1lID0gX3RoaXM5LnRodW1ibmFpbHNbMF0uZnJhbWVzW3RodW1iTnVtXS50ZXh0O1xuXG4gICAgICAgICAgICBpZiAoX3RoaXM5LnNob3dpbmdUaHVtYkZpbGVuYW1lID09PSBvbGRUaHVtYkZpbGVuYW1lKSB7XG4gICAgICAgICAgICAgIC8vIEZpbmQgdGhlIG5lYXJlc3QgdGh1bWJzIHdpdGggZGlmZmVyZW50IGZpbGVuYW1lcy4gU29tZXRpbWVzIGl0J2xsIGJlIHRoZSBuZXh0IGluZGV4LCBidXQgaW4gdGhlIGNhc2Ugb2Ygc3ByaXRlcywgaXQgbWlnaHQgYmUgMTAwKyBhd2F5XG4gICAgICAgICAgICAgIHZhciB0aHVtYm5haWxzQ2xvbmU7XG5cbiAgICAgICAgICAgICAgaWYgKGZvcndhcmQpIHtcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxzQ2xvbmUgPSBfdGhpczkudGh1bWJuYWlsc1swXS5mcmFtZXMuc2xpY2UodGh1bWJOdW0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRodW1ibmFpbHNDbG9uZSA9IF90aGlzOS50aHVtYm5haWxzWzBdLmZyYW1lcy5zbGljZSgwLCB0aHVtYk51bSkucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIGZvdW5kT25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHRodW1ibmFpbHNDbG9uZS5mb3JFYWNoKGZ1bmN0aW9uIChmcmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdUaHVtYkZpbGVuYW1lID0gZnJhbWUudGV4dDtcblxuICAgICAgICAgICAgICAgIGlmIChuZXdUaHVtYkZpbGVuYW1lICE9PSBvbGRUaHVtYkZpbGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3VuZCBvbmUgd2l0aCBhIGRpZmZlcmVudCBmaWxlbmFtZS4gTWFrZSBzdXJlIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gbG9hZGVkIG9uIHRoaXMgcGFnZSB2aXNpdFxuICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczkubG9hZGVkSW1hZ2VzLmluY2x1ZGVzKG5ld1RodW1iRmlsZW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kT25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBfdGhpczkucGxheWVyLmRlYnVnLmxvZyhcIlByZWxvYWRpbmcgdGh1bWIgZmlsZW5hbWU6IFwiLmNvbmNhdChuZXdUaHVtYkZpbGVuYW1lKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybFByZWZpeCA9IF90aGlzOS50aHVtYm5haWxzWzBdLnVybFByZWZpeDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1iVVJMID0gdXJsUHJlZml4ICsgbmV3VGh1bWJGaWxlbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gdGh1bWJVUkw7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdGhpczkucGxheWVyLmRlYnVnLmxvZyhcIlByZWxvYWRlZCB0aHVtYiBmaWxlbmFtZTogXCIuY29uY2F0KG5ld1RodW1iRmlsZW5hbWUpKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXM5LmxvYWRlZEltYWdlcy5pbmNsdWRlcyhuZXdUaHVtYkZpbGVuYW1lKSkgX3RoaXM5LmxvYWRlZEltYWdlcy5wdXNoKG5ld1RodW1iRmlsZW5hbWUpOyAvLyBXZSBkb24ndCByZXNvbHZlIHVudGlsIHRoZSB0aHVtYiBpcyBsb2FkZWRcblxuICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pOyAvLyBJZiB0aGVyZSBhcmUgbm9uZSB0byBwcmVsb2FkIHRoZW4gd2Ugd2FudCB0byByZXNvbHZlIGltbWVkaWF0ZWx5XG5cbiAgICAgICAgICAgICAgaWYgKCFmb3VuZE9uZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBJZiB1c2VyIGhhcyBiZWVuIGhvdmVyaW5nIGN1cnJlbnQgaW1hZ2UgZm9yIGhhbGYgYSBzZWNvbmQsIGxvb2sgZm9yIGEgaGlnaGVyIHF1YWxpdHkgb25lXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SGlnaGVyUXVhbGl0eVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEhpZ2hlclF1YWxpdHkoY3VycmVudFF1YWxpdHlJbmRleCwgcHJldmlld0ltYWdlLCBmcmFtZSwgdGh1bWJGaWxlbmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRRdWFsaXR5SW5kZXggPCB0aGlzLnRodW1ibmFpbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIC8vIE9ubHkgdXNlIHRoZSBoaWdoZXIgcXVhbGl0eSB2ZXJzaW9uIGlmIGl0J3MgZ29pbmcgdG8gbG9vayBhbnkgYmV0dGVyIC0gaWYgdGhlIGN1cnJlbnQgdGh1bWIgaXMgb2YgYSBsb3dlciBwaXhlbCBkZW5zaXR5IHRoYW4gdGhlIHRodW1ibmFpbCBjb250YWluZXJcbiAgICAgICAgICB2YXIgcHJldmlld0ltYWdlSGVpZ2h0ID0gcHJldmlld0ltYWdlLm5hdHVyYWxIZWlnaHQ7XG5cbiAgICAgICAgICBpZiAodGhpcy51c2luZ1Nwcml0ZXMpIHtcbiAgICAgICAgICAgIHByZXZpZXdJbWFnZUhlaWdodCA9IGZyYW1lLmg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHByZXZpZXdJbWFnZUhlaWdodCA8IHRoaXMudGh1bWJDb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIC8vIFJlY3Vyc2UgYmFjayB0byB0aGUgbG9hZEltYWdlIGZ1bmN0aW9uIC0gc2hvdyBhIGhpZ2hlciBxdWFsaXR5IG9uZSwgYnV0IG9ubHkgaWYgdGhlIHZpZXdlciBpcyBvbiB0aGlzIGZyYW1lIGZvciBhIHdoaWxlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBtb3VzZSBoYXNuJ3QgYWxyZWFkeSBtb3ZlZCBvbiBhbmQgc3RhcnRlZCBob3ZlcmluZyBhdCBhbm90aGVyIGltYWdlXG4gICAgICAgICAgICAgIGlmIChfdGhpczEwLnNob3dpbmdUaHVtYkZpbGVuYW1lID09PSB0aHVtYkZpbGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMxMC5wbGF5ZXIuZGVidWcubG9nKFwiU2hvd2luZyBoaWdoZXIgcXVhbGl0eSB0aHVtYiBmb3I6IFwiLmNvbmNhdCh0aHVtYkZpbGVuYW1lKSk7XG5cbiAgICAgICAgICAgICAgICBfdGhpczEwLmxvYWRJbWFnZShjdXJyZW50UXVhbGl0eUluZGV4ICsgMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInRvZ2dsZVRodW1iQ29udGFpbmVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlVGh1bWJDb250YWluZXIoKSB7XG4gICAgICAgIHZhciB0b2dnbGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgICAgICB2YXIgY2xlYXJTaG93aW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLnByZXZpZXdUaHVtYm5haWxzLnRodW1iQ29udGFpbmVyU2hvd247XG4gICAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCB0b2dnbGUpO1xuXG4gICAgICAgIGlmICghdG9nZ2xlICYmIGNsZWFyU2hvd2luZykge1xuICAgICAgICAgIHRoaXMuc2hvd2luZ1RodW1iID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnNob3dpbmdUaHVtYkZpbGVuYW1lID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ0b2dnbGVTY3J1YmJpbmdDb250YWluZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVTY3J1YmJpbmdDb250YWluZXIoKSB7XG4gICAgICAgIHZhciB0b2dnbGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMuc2NydWJiaW5nQ29udGFpbmVyU2hvd247XG4gICAgICAgIHRoaXMuZWxlbWVudHMuc2NydWJiaW5nLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgdG9nZ2xlKTtcblxuICAgICAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgICAgIHRoaXMuc2hvd2luZ1RodW1iID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnNob3dpbmdUaHVtYkZpbGVuYW1lID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZXRlcm1pbmVDb250YWluZXJBdXRvU2l6aW5nXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGV0ZXJtaW5lQ29udGFpbmVyQXV0b1NpemluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50SGVpZ2h0ID4gMjAgfHwgdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRXaWR0aCA+IDIwKSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHByZXZlbnQgYXV0byBzaXppbmcgaW4gdGhpcy5zZXRUaHVtYkNvbnRhaW5lclNpemVBbmRQb3MoKVxuICAgICAgICAgIHRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBTZXQgdGhlIHNpemUgdG8gYmUgYWJvdXQgYSBxdWFydGVyIG9mIHRoZSBzaXplIG9mIHZpZGVvLiBVbmxlc3Mgb3B0aW9uIGR5bmFtaWNTaXplID09PSBmYWxzZSwgaW4gd2hpY2ggY2FzZSBpdCBuZWVkcyB0byBiZSBzZXQgaW4gQ1NTXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0VGh1bWJDb250YWluZXJTaXplQW5kUG9zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGh1bWJDb250YWluZXJTaXplQW5kUG9zKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTKSB7XG4gICAgICAgICAgdmFyIHRodW1iV2lkdGggPSBNYXRoLmZsb29yKHRoaXMudGh1bWJDb250YWluZXJIZWlnaHQgKiB0aGlzLnRodW1iQXNwZWN0UmF0aW8pO1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCJcIi5jb25jYXQodGhpcy50aHVtYkNvbnRhaW5lckhlaWdodCwgXCJweFwiKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLndpZHRoID0gXCJcIi5jb25jYXQodGh1bWJXaWR0aCwgXCJweFwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudEhlaWdodCA+IDIwICYmIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50V2lkdGggPCAyMCkge1xuICAgICAgICAgIHZhciBfdGh1bWJXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQgKiB0aGlzLnRodW1iQXNwZWN0UmF0aW8pO1xuXG4gICAgICAgICAgdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5zdHlsZS53aWR0aCA9IFwiXCIuY29uY2F0KF90aHVtYldpZHRoLCBcInB4XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50SGVpZ2h0IDwgMjAgJiYgdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRXaWR0aCA+IDIwKSB7XG4gICAgICAgICAgdmFyIHRodW1iSGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudFdpZHRoIC8gdGhpcy50aHVtYkFzcGVjdFJhdGlvKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KHRodW1iSGVpZ2h0LCBcInB4XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRUaHVtYkNvbnRhaW5lclBvcygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRUaHVtYkNvbnRhaW5lclBvc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRodW1iQ29udGFpbmVyUG9zKCkge1xuICAgICAgICB2YXIgc2Vla2JhclJlY3QgPSB0aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHBseXJSZWN0ID0gdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy50aHVtYi5jb250YWluZXI7IC8vIEZpbmQgdGhlIGxvd2VzdCBhbmQgaGlnaGVzdCBkZXNpcmVkIGxlZnQtcG9zaXRpb24sIHNvIHdlIGRvbid0IHNsaWRlIG91dCB0aGUgc2lkZSBvZiB0aGUgdmlkZW8gY29udGFpbmVyXG5cbiAgICAgICAgdmFyIG1pblZhbCA9IHBseXJSZWN0LmxlZnQgLSBzZWVrYmFyUmVjdC5sZWZ0ICsgMTA7XG4gICAgICAgIHZhciBtYXhWYWwgPSBwbHlyUmVjdC5yaWdodCAtIHNlZWtiYXJSZWN0LmxlZnQgLSBjb250YWluZXIuY2xpZW50V2lkdGggLSAxMDsgLy8gU2V0IHByZXZpZXcgY29udGFpbmVyIHBvc2l0aW9uIHRvOiBtb3VzZXBvcywgbWludXMgc2Vla2Jhci5sZWZ0LCBtaW51cyBoYWxmIG9mIHByZXZpZXdDb250YWluZXIuY2xpZW50V2lkdGhcblxuICAgICAgICB2YXIgcHJldmlld1BvcyA9IHRoaXMubW91c2VQb3NYIC0gc2Vla2JhclJlY3QubGVmdCAtIGNvbnRhaW5lci5jbGllbnRXaWR0aCAvIDI7XG5cbiAgICAgICAgaWYgKHByZXZpZXdQb3MgPCBtaW5WYWwpIHtcbiAgICAgICAgICBwcmV2aWV3UG9zID0gbWluVmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZXZpZXdQb3MgPiBtYXhWYWwpIHtcbiAgICAgICAgICBwcmV2aWV3UG9zID0gbWF4VmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIlwiLmNvbmNhdChwcmV2aWV3UG9zLCBcInB4XCIpO1xuICAgICAgfSAvLyBDYW4ndCB1c2UgMTAwJSB3aWR0aCwgaW4gY2FzZSB0aGUgdmlkZW8gaXMgYSBkaWZmZXJlbnQgYXNwZWN0IHJhdGlvIHRvIHRoZSB2aWRlbyBjb250YWluZXJcblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRTY3J1YmJpbmdDb250YWluZXJTaXplXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2NydWJiaW5nQ29udGFpbmVyU2l6ZSgpIHtcbiAgICAgICAgdmFyIF9maXRSYXRpbyA9IGZpdFJhdGlvKHRoaXMudGh1bWJBc3BlY3RSYXRpbywge1xuICAgICAgICAgIHdpZHRoOiB0aGlzLnBsYXllci5tZWRpYS5jbGllbnRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMucGxheWVyLm1lZGlhLmNsaWVudEhlaWdodFxuICAgICAgICB9KSxcbiAgICAgICAgICAgIHdpZHRoID0gX2ZpdFJhdGlvLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gX2ZpdFJhdGlvLmhlaWdodDtcblxuICAgICAgICB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdCh3aWR0aCwgXCJweFwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGhlaWdodCwgXCJweFwiKTtcbiAgICAgIH0gLy8gU3ByaXRlcyBuZWVkIHRvIGJlIG9mZnNldCB0byB0aGUgY29ycmVjdCBsb2NhdGlvblxuXG4gICAgfSwge1xuICAgICAga2V5OiBcInNldEltYWdlU2l6ZUFuZE9mZnNldFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEltYWdlU2l6ZUFuZE9mZnNldChwcmV2aWV3SW1hZ2UsIGZyYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy51c2luZ1Nwcml0ZXMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gRmluZCBkaWZmZXJlbmNlIGJldHdlZW4gaGVpZ2h0IGFuZCBwcmV2aWV3IGNvbnRhaW5lciBoZWlnaHRcblxuXG4gICAgICAgIHZhciBtdWx0aXBsaWVyID0gdGhpcy50aHVtYkNvbnRhaW5lckhlaWdodCAvIGZyYW1lLmg7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuXG4gICAgICAgIHByZXZpZXdJbWFnZS5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChwcmV2aWV3SW1hZ2UubmF0dXJhbEhlaWdodCAqIG11bHRpcGxpZXIsIFwicHhcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuXG4gICAgICAgIHByZXZpZXdJbWFnZS5zdHlsZS53aWR0aCA9IFwiXCIuY29uY2F0KHByZXZpZXdJbWFnZS5uYXR1cmFsV2lkdGggKiBtdWx0aXBsaWVyLCBcInB4XCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblxuICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUubGVmdCA9IFwiLVwiLmNvbmNhdChmcmFtZS54ICogbXVsdGlwbGllciwgXCJweFwiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG5cbiAgICAgICAgcHJldmlld0ltYWdlLnN0eWxlLnRvcCA9IFwiLVwiLmNvbmNhdChmcmFtZS55ICogbXVsdGlwbGllciwgXCJweFwiKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW5hYmxlZFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsYXllci5pc0hUTUw1ICYmIHRoaXMucGxheWVyLmlzVmlkZW8gJiYgdGhpcy5wbGF5ZXIuY29uZmlnLnByZXZpZXdUaHVtYm5haWxzLmVuYWJsZWQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImN1cnJlbnRJbWFnZUNvbnRhaW5lclwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xuICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lcjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXNpbmdTcHJpdGVzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudGh1bWJuYWlsc1swXS5mcmFtZXNbMF0pLmluY2x1ZGVzKCd3Jyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInRodW1iQXNwZWN0UmF0aW9cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy51c2luZ1Nwcml0ZXMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50aHVtYm5haWxzWzBdLmZyYW1lc1swXS53IC8gdGhpcy50aHVtYm5haWxzWzBdLmZyYW1lc1swXS5oO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGh1bWJuYWlsc1swXS53aWR0aCAvIHRoaXMudGh1bWJuYWlsc1swXS5oZWlnaHQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInRodW1iQ29udGFpbmVySGVpZ2h0XCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XG4gICAgICAgICAgdmFyIF9maXRSYXRpbzIgPSBmaXRSYXRpbyh0aGlzLnRodW1iQXNwZWN0UmF0aW8sIHtcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnBsYXllci5tZWRpYS5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50SGVpZ2h0XG4gICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGhlaWdodCA9IF9maXRSYXRpbzIuaGVpZ2h0O1xuXG4gICAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICAgICAgfSAvLyBJZiBjc3MgaXMgdXNlZCB0aGlzIG5lZWRzIHRvIHJldHVybiB0aGUgY3NzIGhlaWdodCBmb3Igc3ByaXRlcyB0byB3b3JrIChzZWUgc2V0SW1hZ2VTaXplQW5kT2Zmc2V0KVxuXG5cbiAgICAgICAgaWYgKHRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50V2lkdGggLyB0aGlzLnRodW1iQXNwZWN0UmF0aW8gLyA0KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY3VycmVudEltYWdlRWxlbWVudFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xuICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTY3J1YmJpbmdJbWFnZUVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50O1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50U2NydWJiaW5nSW1hZ2VFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRUaHVtYm5haWxJbWFnZUVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFByZXZpZXdUaHVtYm5haWxzO1xuICB9KCk7XG5cbiAgdmFyIHNvdXJjZSA9IHtcbiAgICAvLyBBZGQgZWxlbWVudHMgdG8gSFRNTDUgbWVkaWEgKHNvdXJjZSwgdHJhY2tzLCBldGMpXG4gICAgaW5zZXJ0RWxlbWVudHM6IGZ1bmN0aW9uIGluc2VydEVsZW1lbnRzKHR5cGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmIChpcyQxLnN0cmluZyhhdHRyaWJ1dGVzKSkge1xuICAgICAgICBpbnNlcnRFbGVtZW50KHR5cGUsIHRoaXMubWVkaWEsIHtcbiAgICAgICAgICBzcmM6IGF0dHJpYnV0ZXNcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGlzJDEuYXJyYXkoYXR0cmlidXRlcykpIHtcbiAgICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgICBpbnNlcnRFbGVtZW50KHR5cGUsIF90aGlzLm1lZGlhLCBhdHRyaWJ1dGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFVwZGF0ZSBzb3VyY2VcbiAgICAvLyBTb3VyY2VzIGFyZSBub3QgY2hlY2tlZCBmb3Igc3VwcG9ydCBzbyBiZSBjYXJlZnVsXG4gICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoaW5wdXQpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAoIWdldERlZXAoaW5wdXQsICdzb3VyY2VzLmxlbmd0aCcpKSB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybignSW52YWxpZCBzb3VyY2UgZm9ybWF0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQ2FuY2VsIGN1cnJlbnQgbmV0d29yayByZXF1ZXN0c1xuXG5cbiAgICAgIGh0bWw1LmNhbmNlbFJlcXVlc3RzLmNhbGwodGhpcyk7IC8vIERlc3Ryb3kgaW5zdGFuY2UgYW5kIHJlLXNldHVwXG5cbiAgICAgIHRoaXMuZGVzdHJveS5jYWxsKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUmVzZXQgcXVhbGl0eSBvcHRpb25zXG4gICAgICAgIF90aGlzMi5vcHRpb25zLnF1YWxpdHkgPSBbXTsgLy8gUmVtb3ZlIGVsZW1lbnRzXG5cbiAgICAgICAgcmVtb3ZlRWxlbWVudChfdGhpczIubWVkaWEpO1xuICAgICAgICBfdGhpczIubWVkaWEgPSBudWxsOyAvLyBSZXNldCBjbGFzcyBuYW1lXG5cbiAgICAgICAgaWYgKGlzJDEuZWxlbWVudChfdGhpczIuZWxlbWVudHMuY29udGFpbmVyKSkge1xuICAgICAgICAgIF90aGlzMi5lbGVtZW50cy5jb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICAgICAgICB9IC8vIFNldCB0aGUgdHlwZSBhbmQgcHJvdmlkZXJcblxuXG4gICAgICAgIHZhciBzb3VyY2VzID0gaW5wdXQuc291cmNlcyxcbiAgICAgICAgICAgIHR5cGUgPSBpbnB1dC50eXBlO1xuXG4gICAgICAgIHZhciBfc291cmNlcyA9IF9zbGljZWRUb0FycmF5KHNvdXJjZXMsIDEpLFxuICAgICAgICAgICAgX3NvdXJjZXMkID0gX3NvdXJjZXNbMF0sXG4gICAgICAgICAgICBfc291cmNlcyQkcHJvdmlkZXIgPSBfc291cmNlcyQucHJvdmlkZXIsXG4gICAgICAgICAgICBwcm92aWRlciA9IF9zb3VyY2VzJCRwcm92aWRlciA9PT0gdm9pZCAwID8gcHJvdmlkZXJzLmh0bWw1IDogX3NvdXJjZXMkJHByb3ZpZGVyLFxuICAgICAgICAgICAgc3JjID0gX3NvdXJjZXMkLnNyYztcblxuICAgICAgICB2YXIgdGFnTmFtZSA9IHByb3ZpZGVyID09PSAnaHRtbDUnID8gdHlwZSA6ICdkaXYnO1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHByb3ZpZGVyID09PSAnaHRtbDUnID8ge30gOiB7XG4gICAgICAgICAgc3JjOiBzcmNcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihfdGhpczIsIHtcbiAgICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAvLyBDaGVjayBmb3Igc3VwcG9ydFxuICAgICAgICAgIHN1cHBvcnRlZDogc3VwcG9ydC5jaGVjayh0eXBlLCBwcm92aWRlciwgX3RoaXMyLmNvbmZpZy5wbGF5c2lubGluZSksXG4gICAgICAgICAgLy8gQ3JlYXRlIG5ldyBlbGVtZW50XG4gICAgICAgICAgbWVkaWE6IGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwgYXR0cmlidXRlcylcbiAgICAgICAgfSk7IC8vIEluamVjdCB0aGUgbmV3IGVsZW1lbnRcblxuICAgICAgICBfdGhpczIuZWxlbWVudHMuY29udGFpbmVyLmFwcGVuZENoaWxkKF90aGlzMi5tZWRpYSk7IC8vIEF1dG9wbGF5IHRoZSBuZXcgc291cmNlP1xuXG5cbiAgICAgICAgaWYgKGlzJDEuYm9vbGVhbihpbnB1dC5hdXRvcGxheSkpIHtcbiAgICAgICAgICBfdGhpczIuY29uZmlnLmF1dG9wbGF5ID0gaW5wdXQuYXV0b3BsYXk7XG4gICAgICAgIH0gLy8gU2V0IGF0dHJpYnV0ZXMgZm9yIGF1ZGlvIGFuZCB2aWRlb1xuXG5cbiAgICAgICAgaWYgKF90aGlzMi5pc0hUTUw1KSB7XG4gICAgICAgICAgaWYgKF90aGlzMi5jb25maWcuY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIF90aGlzMi5tZWRpYS5zZXRBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJywgJycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfdGhpczIuY29uZmlnLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICBfdGhpczIubWVkaWEuc2V0QXR0cmlidXRlKCdhdXRvcGxheScsICcnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWlzJDEuZW1wdHkoaW5wdXQucG9zdGVyKSkge1xuICAgICAgICAgICAgX3RoaXMyLnBvc3RlciA9IGlucHV0LnBvc3RlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3RoaXMyLmNvbmZpZy5sb29wLmFjdGl2ZSkge1xuICAgICAgICAgICAgX3RoaXMyLm1lZGlhLnNldEF0dHJpYnV0ZSgnbG9vcCcsICcnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3RoaXMyLmNvbmZpZy5tdXRlZCkge1xuICAgICAgICAgICAgX3RoaXMyLm1lZGlhLnNldEF0dHJpYnV0ZSgnbXV0ZWQnLCAnJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF90aGlzMi5jb25maWcucGxheXNpbmxpbmUpIHtcbiAgICAgICAgICAgIF90aGlzMi5tZWRpYS5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBSZXN0b3JlIGNsYXNzIGhvb2tcblxuXG4gICAgICAgIHVpLmFkZFN0eWxlSG9vay5jYWxsKF90aGlzMik7IC8vIFNldCBuZXcgc291cmNlcyBmb3IgaHRtbDVcblxuICAgICAgICBpZiAoX3RoaXMyLmlzSFRNTDUpIHtcbiAgICAgICAgICBzb3VyY2UuaW5zZXJ0RWxlbWVudHMuY2FsbChfdGhpczIsICdzb3VyY2UnLCBzb3VyY2VzKTtcbiAgICAgICAgfSAvLyBTZXQgdmlkZW8gdGl0bGVcblxuXG4gICAgICAgIF90aGlzMi5jb25maWcudGl0bGUgPSBpbnB1dC50aXRsZTsgLy8gU2V0IHVwIGZyb20gc2NyYXRjaFxuXG4gICAgICAgIG1lZGlhLnNldHVwLmNhbGwoX3RoaXMyKTsgLy8gSFRNTDUgc3R1ZmZcblxuICAgICAgICBpZiAoX3RoaXMyLmlzSFRNTDUpIHtcbiAgICAgICAgICAvLyBTZXR1cCBjYXB0aW9uc1xuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dCkuaW5jbHVkZXMoJ3RyYWNrcycpKSB7XG4gICAgICAgICAgICBzb3VyY2UuaW5zZXJ0RWxlbWVudHMuY2FsbChfdGhpczIsICd0cmFjaycsIGlucHV0LnRyYWNrcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIElmIEhUTUw1IG9yIGVtYmVkIGJ1dCBub3QgZnVsbHkgc3VwcG9ydGVkLCBzZXR1cEludGVyZmFjZSBhbmQgY2FsbCByZWFkeSBub3dcblxuXG4gICAgICAgIGlmIChfdGhpczIuaXNIVE1MNSB8fCBfdGhpczIuaXNFbWJlZCAmJiAhX3RoaXMyLnN1cHBvcnRlZC51aSkge1xuICAgICAgICAgIC8vIFNldHVwIGludGVyZmFjZVxuICAgICAgICAgIHVpLmJ1aWxkLmNhbGwoX3RoaXMyKTtcbiAgICAgICAgfSAvLyBMb2FkIEhUTUw1IHNvdXJjZXNcblxuXG4gICAgICAgIGlmIChfdGhpczIuaXNIVE1MNSkge1xuICAgICAgICAgIF90aGlzMi5tZWRpYS5sb2FkKCk7XG4gICAgICAgIH0gLy8gVXBkYXRlIHByZXZpZXdUaHVtYm5haWxzIGNvbmZpZyAmIHJlbG9hZCBwbHVnaW5cblxuXG4gICAgICAgIGlmICghaXMkMS5lbXB0eShpbnB1dC5wcmV2aWV3VGh1bWJuYWlscykpIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKF90aGlzMi5jb25maWcucHJldmlld1RodW1ibmFpbHMsIGlucHV0LnByZXZpZXdUaHVtYm5haWxzKTsgLy8gQ2xlYW51cCBwcmV2aWV3VGh1bWJuYWlscyBwbHVnaW4gaWYgaXQgd2FzIGxvYWRlZFxuXG4gICAgICAgICAgaWYgKF90aGlzMi5wcmV2aWV3VGh1bWJuYWlscyAmJiBfdGhpczIucHJldmlld1RodW1ibmFpbHMubG9hZGVkKSB7XG4gICAgICAgICAgICBfdGhpczIucHJldmlld1RodW1ibmFpbHMuZGVzdHJveSgpO1xuXG4gICAgICAgICAgICBfdGhpczIucHJldmlld1RodW1ibmFpbHMgPSBudWxsO1xuICAgICAgICAgIH0gLy8gQ3JlYXRlIG5ldyBpbnN0YW5jZSBpZiBpdCBpcyBzdGlsbCBlbmFibGVkXG5cblxuICAgICAgICAgIGlmIChfdGhpczIuY29uZmlnLnByZXZpZXdUaHVtYm5haWxzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIF90aGlzMi5wcmV2aWV3VGh1bWJuYWlscyA9IG5ldyBQcmV2aWV3VGh1bWJuYWlscyhfdGhpczIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBVcGRhdGUgdGhlIGZ1bGxzY3JlZW4gc3VwcG9ydFxuXG5cbiAgICAgICAgX3RoaXMyLmZ1bGxzY3JlZW4udXBkYXRlKCk7XG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBudW1iZXIgd2hvc2UgdmFsdWUgaXMgbGltaXRlZCB0byB0aGUgZ2l2ZW4gcmFuZ2UuXG4gICAqXG4gICAqIEV4YW1wbGU6IGxpbWl0IHRoZSBvdXRwdXQgb2YgdGhpcyBjb21wdXRhdGlvbiB0byBiZXR3ZWVuIDAgYW5kIDI1NVxuICAgKiAoeCAqIDI1NSkuY2xhbXAoMCwgMjU1KVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5wdXRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG1pbiBUaGUgbG93ZXIgYm91bmRhcnkgb2YgdGhlIG91dHB1dCByYW5nZVxuICAgKiBAcGFyYW0ge051bWJlcn0gbWF4IFRoZSB1cHBlciBib3VuZGFyeSBvZiB0aGUgb3V0cHV0IHJhbmdlXG4gICAqIEByZXR1cm5zIEEgbnVtYmVyIGluIHRoZSByYW5nZSBbbWluLCBtYXhdXG4gICAqIEB0eXBlIE51bWJlclxuICAgKi9cbiAgZnVuY3Rpb24gY2xhbXAoKSB7XG4gICAgdmFyIGlucHV0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgIHZhciBtaW4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG4gICAgdmFyIG1heCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMjU1O1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChpbnB1dCwgbWluKSwgbWF4KTtcbiAgfVxuXG4gIC8vIFRPRE86IFVzZSBhIFdlYWtNYXAgZm9yIHByaXZhdGUgZ2xvYmFsc1xuICAvLyBjb25zdCBnbG9iYWxzID0gbmV3IFdlYWtNYXAoKTtcbiAgLy8gUGx5ciBpbnN0YW5jZVxuXG4gIHZhciBQbHlyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQbHlyKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBseXIpO1xuXG4gICAgICB0aGlzLnRpbWVycyA9IHt9OyAvLyBTdGF0ZVxuXG4gICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZmFpbGVkID0gZmFsc2U7IC8vIFRvdWNoIGRldmljZVxuXG4gICAgICB0aGlzLnRvdWNoID0gc3VwcG9ydC50b3VjaDsgLy8gU2V0IHRoZSBtZWRpYSBlbGVtZW50XG5cbiAgICAgIHRoaXMubWVkaWEgPSB0YXJnZXQ7IC8vIFN0cmluZyBzZWxlY3RvciBwYXNzZWRcblxuICAgICAgaWYgKGlzJDEuc3RyaW5nKHRoaXMubWVkaWEpKSB7XG4gICAgICAgIHRoaXMubWVkaWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMubWVkaWEpO1xuICAgICAgfSAvLyBqUXVlcnksIE5vZGVMaXN0IG9yIEFycmF5IHBhc3NlZCwgdXNlIGZpcnN0IGVsZW1lbnRcblxuXG4gICAgICBpZiAod2luZG93LmpRdWVyeSAmJiB0aGlzLm1lZGlhIGluc3RhbmNlb2YgalF1ZXJ5IHx8IGlzJDEubm9kZUxpc3QodGhpcy5tZWRpYSkgfHwgaXMkMS5hcnJheSh0aGlzLm1lZGlhKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgdGhpcy5tZWRpYSA9IHRoaXMubWVkaWFbMF07XG4gICAgICB9IC8vIFNldCBjb25maWdcblxuXG4gICAgICB0aGlzLmNvbmZpZyA9IGV4dGVuZCh7fSwgZGVmYXVsdHMkMSwgUGx5ci5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKF90aGlzLm1lZGlhLmdldEF0dHJpYnV0ZSgnZGF0YS1wbHlyLWNvbmZpZycpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgfSgpKTsgLy8gRWxlbWVudHMgY2FjaGVcblxuICAgICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgICAgY29udGFpbmVyOiBudWxsLFxuICAgICAgICBmdWxsc2NyZWVuOiBudWxsLFxuICAgICAgICBjYXB0aW9uczogbnVsbCxcbiAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgIGRpc3BsYXk6IHt9LFxuICAgICAgICBwcm9ncmVzczoge30sXG4gICAgICAgIGlucHV0czoge30sXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgcG9wdXA6IG51bGwsXG4gICAgICAgICAgbWVudTogbnVsbCxcbiAgICAgICAgICBwYW5lbHM6IHt9LFxuICAgICAgICAgIGJ1dHRvbnM6IHt9XG4gICAgICAgIH1cbiAgICAgIH07IC8vIENhcHRpb25zXG5cbiAgICAgIHRoaXMuY2FwdGlvbnMgPSB7XG4gICAgICAgIGFjdGl2ZTogbnVsbCxcbiAgICAgICAgY3VycmVudFRyYWNrOiAtMSxcbiAgICAgICAgbWV0YTogbmV3IFdlYWtNYXAoKVxuICAgICAgfTsgLy8gRnVsbHNjcmVlblxuXG4gICAgICB0aGlzLmZ1bGxzY3JlZW4gPSB7XG4gICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgIH07IC8vIE9wdGlvbnNcblxuICAgICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICBzcGVlZDogW10sXG4gICAgICAgIHF1YWxpdHk6IFtdXG4gICAgICB9OyAvLyBEZWJ1Z2dpbmdcbiAgICAgIC8vIFRPRE86IG1vdmUgdG8gZ2xvYmFsc1xuXG4gICAgICB0aGlzLmRlYnVnID0gbmV3IENvbnNvbGUodGhpcy5jb25maWcuZGVidWcpOyAvLyBMb2cgY29uZmlnIG9wdGlvbnMgYW5kIHN1cHBvcnRcblxuICAgICAgdGhpcy5kZWJ1Zy5sb2coJ0NvbmZpZycsIHRoaXMuY29uZmlnKTtcbiAgICAgIHRoaXMuZGVidWcubG9nKCdTdXBwb3J0Jywgc3VwcG9ydCk7IC8vIFdlIG5lZWQgYW4gZWxlbWVudCB0byBzZXR1cFxuXG4gICAgICBpZiAoaXMkMS5udWxsT3JVbmRlZmluZWQodGhpcy5tZWRpYSkgfHwgIWlzJDEuZWxlbWVudCh0aGlzLm1lZGlhKSkge1xuICAgICAgICB0aGlzLmRlYnVnLmVycm9yKCdTZXR1cCBmYWlsZWQ6IG5vIHN1aXRhYmxlIGVsZW1lbnQgcGFzc2VkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQmFpbCBpZiB0aGUgZWxlbWVudCBpcyBpbml0aWFsaXplZFxuXG5cbiAgICAgIGlmICh0aGlzLm1lZGlhLnBseXIpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdUYXJnZXQgYWxyZWFkeSBzZXR1cCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEJhaWwgaWYgbm90IGVuYWJsZWRcblxuXG4gICAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy5lcnJvcignU2V0dXAgZmFpbGVkOiBkaXNhYmxlZCBieSBjb25maWcnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBCYWlsIGlmIGRpc2FibGVkIG9yIG5vIGJhc2ljIHN1cHBvcnRcbiAgICAgIC8vIFlvdSBtYXkgd2FudCB0byBkaXNhYmxlIGNlcnRhaW4gVUFzIGV0Y1xuXG5cbiAgICAgIGlmICghc3VwcG9ydC5jaGVjaygpLmFwaSkge1xuICAgICAgICB0aGlzLmRlYnVnLmVycm9yKCdTZXR1cCBmYWlsZWQ6IG5vIHN1cHBvcnQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBDYWNoZSBvcmlnaW5hbCBlbGVtZW50IHN0YXRlIGZvciAuZGVzdHJveSgpXG5cblxuICAgICAgdmFyIGNsb25lID0gdGhpcy5tZWRpYS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBjbG9uZS5hdXRvcGxheSA9IGZhbHNlO1xuICAgICAgdGhpcy5lbGVtZW50cy5vcmlnaW5hbCA9IGNsb25lOyAvLyBTZXQgbWVkaWEgdHlwZSBiYXNlZCBvbiB0YWcgb3IgZGF0YSBhdHRyaWJ1dGVcbiAgICAgIC8vIFN1cHBvcnRlZDogdmlkZW8sIGF1ZGlvLCB2aW1lbywgeW91dHViZVxuXG4gICAgICB2YXIgdHlwZSA9IHRoaXMubWVkaWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpOyAvLyBFbWJlZCBwcm9wZXJ0aWVzXG5cbiAgICAgIHZhciBpZnJhbWUgPSBudWxsO1xuICAgICAgdmFyIHVybCA9IG51bGw7IC8vIERpZmZlcmVudCBzZXR1cCBiYXNlZCBvbiB0eXBlXG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdkaXYnOlxuICAgICAgICAgIC8vIEZpbmQgdGhlIGZyYW1lXG4gICAgICAgICAgaWZyYW1lID0gdGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTsgLy8gPGlmcmFtZT4gdHlwZVxuXG4gICAgICAgICAgaWYgKGlzJDEuZWxlbWVudChpZnJhbWUpKSB7XG4gICAgICAgICAgICAvLyBEZXRlY3QgcHJvdmlkZXJcbiAgICAgICAgICAgIHVybCA9IHBhcnNlVXJsKGlmcmFtZS5nZXRBdHRyaWJ1dGUoJ3NyYycpKTtcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXIgPSBnZXRQcm92aWRlckJ5VXJsKHVybC50b1N0cmluZygpKTsgLy8gUmV3b3JrIGVsZW1lbnRzXG5cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gdGhpcy5tZWRpYTtcbiAgICAgICAgICAgIHRoaXMubWVkaWEgPSBpZnJhbWU7IC8vIFJlc2V0IGNsYXNzbmFtZVxuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc05hbWUgPSAnJzsgLy8gR2V0IGF0dHJpYnV0ZXMgZnJvbSBVUkwgYW5kIHNldCBjb25maWdcblxuICAgICAgICAgICAgaWYgKHVybC5zZWFyY2gubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhciB0cnV0aHkgPSBbJzEnLCAndHJ1ZSddO1xuXG4gICAgICAgICAgICAgIGlmICh0cnV0aHkuaW5jbHVkZXModXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2F1dG9wbGF5JykpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHRydXRoeS5pbmNsdWRlcyh1cmwuc2VhcmNoUGFyYW1zLmdldCgnbG9vcCcpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSAvLyBUT0RPOiByZXBsYWNlIGZ1bGxzY3JlZW4uaW9zTmF0aXZlIHdpdGggdGhpcyBwbGF5c2lubGluZSBjb25maWcgb3B0aW9uXG4gICAgICAgICAgICAgIC8vIFlvdVR1YmUgcmVxdWlyZXMgdGhlIHBsYXlzaW5saW5lIGluIHRoZSBVUkxcblxuXG4gICAgICAgICAgICAgIGlmICh0aGlzLmlzWW91VHViZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnBsYXlzaW5saW5lID0gdHJ1dGh5LmluY2x1ZGVzKHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdwbGF5c2lubGluZScpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy55b3V0dWJlLmhsID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2hsJyk7IC8vIFRPRE86IFNob3VsZCB0aGlzIGJlIHNldHRpbmcgbGFuZ3VhZ2U/XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcucGxheXNpbmxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIDxkaXY+IHdpdGggYXR0cmlidXRlc1xuICAgICAgICAgICAgdGhpcy5wcm92aWRlciA9IHRoaXMubWVkaWEuZ2V0QXR0cmlidXRlKHRoaXMuY29uZmlnLmF0dHJpYnV0ZXMuZW1iZWQucHJvdmlkZXIpOyAvLyBSZW1vdmUgYXR0cmlidXRlXG5cbiAgICAgICAgICAgIHRoaXMubWVkaWEucmVtb3ZlQXR0cmlidXRlKHRoaXMuY29uZmlnLmF0dHJpYnV0ZXMuZW1iZWQucHJvdmlkZXIpO1xuICAgICAgICAgIH0gLy8gVW5zdXBwb3J0ZWQgb3IgbWlzc2luZyBwcm92aWRlclxuXG5cbiAgICAgICAgICBpZiAoaXMkMS5lbXB0eSh0aGlzLnByb3ZpZGVyKSB8fCAhT2JqZWN0LmtleXMocHJvdmlkZXJzKS5pbmNsdWRlcyh0aGlzLnByb3ZpZGVyKSkge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Zy5lcnJvcignU2V0dXAgZmFpbGVkOiBJbnZhbGlkIHByb3ZpZGVyJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBBdWRpbyB3aWxsIGNvbWUgbGF0ZXIgZm9yIGV4dGVybmFsIHByb3ZpZGVyc1xuXG5cbiAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlcy52aWRlbztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICd2aWRlbyc6XG4gICAgICAgIGNhc2UgJ2F1ZGlvJzpcbiAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcnMuaHRtbDU7IC8vIEdldCBjb25maWcgZnJvbSBhdHRyaWJ1dGVzXG5cbiAgICAgICAgICBpZiAodGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNyb3Nzb3JpZ2luID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ2F1dG9wbGF5JykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJykgfHwgdGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wbGF5c2lubGluZSA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKCdtdXRlZCcpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5tdXRlZCA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKCdsb29wJykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuZGVidWcuZXJyb3IoJ1NldHVwIGZhaWxlZDogdW5zdXBwb3J0ZWQgdHlwZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQ2hlY2sgZm9yIHN1cHBvcnQgYWdhaW4gYnV0IHdpdGggdHlwZVxuXG5cbiAgICAgIHRoaXMuc3VwcG9ydGVkID0gc3VwcG9ydC5jaGVjayh0aGlzLnR5cGUsIHRoaXMucHJvdmlkZXIsIHRoaXMuY29uZmlnLnBsYXlzaW5saW5lKTsgLy8gSWYgbm8gc3VwcG9ydCBmb3IgZXZlbiBBUEksIGJhaWxcblxuICAgICAgaWYgKCF0aGlzLnN1cHBvcnRlZC5hcGkpIHtcbiAgICAgICAgdGhpcy5kZWJ1Zy5lcnJvcignU2V0dXAgZmFpbGVkOiBubyBzdXBwb3J0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdOyAvLyBDcmVhdGUgbGlzdGVuZXJzXG5cbiAgICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IExpc3RlbmVycyh0aGlzKTsgLy8gU2V0dXAgbG9jYWwgc3RvcmFnZSBmb3IgdXNlciBzZXR0aW5nc1xuXG4gICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgU3RvcmFnZSh0aGlzKTsgLy8gU3RvcmUgcmVmZXJlbmNlXG5cbiAgICAgIHRoaXMubWVkaWEucGx5ciA9IHRoaXM7IC8vIFdyYXAgbWVkaWFcblxuICAgICAgaWYgKCFpcyQxLmVsZW1lbnQodGhpcy5lbGVtZW50cy5jb250YWluZXIpKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgIHRhYmluZGV4OiAwXG4gICAgICAgIH0pO1xuICAgICAgICB3cmFwKHRoaXMubWVkaWEsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyKTtcbiAgICAgIH0gLy8gTWlncmF0ZSBjdXN0b20gcHJvcGVydGllcyBmcm9tIG1lZGlhIHRvIGNvbnRhaW5lciAoc28gdGhleSB3b3JrIPCfmIkpXG5cblxuICAgICAgdWkubWlncmF0ZVN0eWxlcy5jYWxsKHRoaXMpOyAvLyBBZGQgc3R5bGUgaG9va1xuXG4gICAgICB1aS5hZGRTdHlsZUhvb2suY2FsbCh0aGlzKTsgLy8gU2V0dXAgbWVkaWFcblxuICAgICAgbWVkaWEuc2V0dXAuY2FsbCh0aGlzKTsgLy8gTGlzdGVuIGZvciBldmVudHMgaWYgZGVidWdnaW5nXG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgICBvbi5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5ldmVudHMuam9pbignICcpLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBfdGhpcy5kZWJ1Zy5sb2coXCJldmVudDogXCIuY29uY2F0KGV2ZW50LnR5cGUpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIFNldHVwIGZ1bGxzY3JlZW5cblxuXG4gICAgICB0aGlzLmZ1bGxzY3JlZW4gPSBuZXcgRnVsbHNjcmVlbih0aGlzKTsgLy8gU2V0dXAgaW50ZXJmYWNlXG4gICAgICAvLyBJZiBlbWJlZCBidXQgbm90IGZ1bGx5IHN1cHBvcnRlZCwgYnVpbGQgaW50ZXJmYWNlIG5vdyB0byBhdm9pZCBmbGFzaCBvZiBjb250cm9sc1xuXG4gICAgICBpZiAodGhpcy5pc0hUTUw1IHx8IHRoaXMuaXNFbWJlZCAmJiAhdGhpcy5zdXBwb3J0ZWQudWkpIHtcbiAgICAgICAgdWkuYnVpbGQuY2FsbCh0aGlzKTtcbiAgICAgIH0gLy8gQ29udGFpbmVyIGxpc3RlbmVyc1xuXG5cbiAgICAgIHRoaXMubGlzdGVuZXJzLmNvbnRhaW5lcigpOyAvLyBHbG9iYWwgbGlzdGVuZXJzXG5cbiAgICAgIHRoaXMubGlzdGVuZXJzLmdsb2JhbCgpOyAvLyBTZXR1cCBhZHMgaWYgcHJvdmlkZWRcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmFkcy5lbmFibGVkKSB7XG4gICAgICAgIHRoaXMuYWRzID0gbmV3IEFkcyh0aGlzKTtcbiAgICAgIH0gLy8gQXV0b3BsYXkgaWYgcmVxdWlyZWRcblxuXG4gICAgICBpZiAodGhpcy5pc0hUTUw1ICYmIHRoaXMuY29uZmlnLmF1dG9wbGF5KSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzaWxlbmNlUHJvbWlzZShfdGhpcy5wbGF5KCkpO1xuICAgICAgICB9LCAxMCk7XG4gICAgICB9IC8vIFNlZWsgdGltZSB3aWxsIGJlIHJlY29yZGVkIChpbiBsaXN0ZW5lcnMuanMpIHNvIHdlIGNhbiBwcmV2ZW50IGhpZGluZyBjb250cm9scyBmb3IgYSBmZXcgc2Vjb25kcyBhZnRlciBzZWVrXG5cblxuICAgICAgdGhpcy5sYXN0U2Vla1RpbWUgPSAwOyAvLyBTZXR1cCBwcmV2aWV3IHRodW1ibmFpbHMgaWYgZW5hYmxlZFxuXG4gICAgICBpZiAodGhpcy5jb25maWcucHJldmlld1RodW1ibmFpbHMuZW5hYmxlZCkge1xuICAgICAgICB0aGlzLnByZXZpZXdUaHVtYm5haWxzID0gbmV3IFByZXZpZXdUaHVtYm5haWxzKHRoaXMpO1xuICAgICAgfVxuICAgIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQVBJXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvKipcbiAgICAgKiBUeXBlcyBhbmQgcHJvdmlkZXIgaGVscGVyc1xuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoUGx5ciwgW3tcbiAgICAgIGtleTogXCJwbGF5XCIsXG5cbiAgICAgIC8qKlxuICAgICAgICogUGxheSB0aGUgbWVkaWEsIG9yIHBsYXkgdGhlIGFkdmVydGlzZW1lbnQgKGlmIHRoZXkgYXJlIG5vdCBibG9ja2VkKVxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGxheSgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFpcyQxLmZ1bmN0aW9uKHRoaXMubWVkaWEucGxheSkpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSAvLyBJbnRlY2VwdCBwbGF5IHdpdGggYWRzXG5cblxuICAgICAgICBpZiAodGhpcy5hZHMgJiYgdGhpcy5hZHMuZW5hYmxlZCkge1xuICAgICAgICAgIHRoaXMuYWRzLm1hbmFnZXJQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5hZHMucGxheSgpO1xuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaWxlbmNlUHJvbWlzZShfdGhpczIubWVkaWEucGxheSgpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBSZXR1cm4gdGhlIHByb21pc2UgKGZvciBIVE1MNSlcblxuXG4gICAgICAgIHJldHVybiB0aGlzLm1lZGlhLnBsYXkoKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUGF1c2UgdGhlIG1lZGlhXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwYXVzZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgICAgICBpZiAoIXRoaXMucGxheWluZyB8fCAhaXMkMS5mdW5jdGlvbih0aGlzLm1lZGlhLnBhdXNlKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWEucGF1c2UoKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHBsYXlpbmcgc3RhdGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInRvZ2dsZVBsYXlcIixcblxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgcGxheWJhY2sgYmFzZWQgb24gY3VycmVudCBzdGF0dXNcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5wdXRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZVBsYXkoaW5wdXQpIHtcbiAgICAgICAgLy8gVG9nZ2xlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGUgaWYgbm90aGluZyBwYXNzZWRcbiAgICAgICAgdmFyIHRvZ2dsZSA9IGlzJDEuYm9vbGVhbihpbnB1dCkgPyBpbnB1dCA6ICF0aGlzLnBsYXlpbmc7XG5cbiAgICAgICAgaWYgKHRvZ2dsZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBhdXNlKCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFN0b3AgcGxheWJhY2tcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInN0b3BcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5pc0hUTUw1KSB7XG4gICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMucmVzdGFydCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzJDEuZnVuY3Rpb24odGhpcy5tZWRpYS5zdG9wKSkge1xuICAgICAgICAgIHRoaXMubWVkaWEuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJlc3RhcnQgcGxheWJhY2tcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInJlc3RhcnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXN0YXJ0KCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV3aW5kXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gc2Vla1RpbWUgLSBob3cgZmFyIHRvIHJld2luZCBpbiBzZWNvbmRzLiBEZWZhdWx0cyB0byB0aGUgY29uZmlnLnNlZWtUaW1lXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZXdpbmRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXdpbmQoc2Vla1RpbWUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSAtPSBpcyQxLm51bWJlcihzZWVrVGltZSkgPyBzZWVrVGltZSA6IHRoaXMuY29uZmlnLnNlZWtUaW1lO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBGYXN0IGZvcndhcmRcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzZWVrVGltZSAtIGhvdyBmYXIgdG8gZmFzdCBmb3J3YXJkIGluIHNlY29uZHMuIERlZmF1bHRzIHRvIHRoZSBjb25maWcuc2Vla1RpbWVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImZvcndhcmRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb3J3YXJkKHNlZWtUaW1lKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gaXMkMS5udW1iZXIoc2Vla1RpbWUpID8gc2Vla1RpbWUgOiB0aGlzLmNvbmZpZy5zZWVrVGltZTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogU2VlayB0byBhIHRpbWVcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbnB1dCAtIHdoZXJlIHRvIHNlZWsgdG8gaW4gc2Vjb25kcy4gRGVmYXVsdHMgdG8gMCAodGhlIHN0YXJ0KVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaW5jcmVhc2VWb2x1bWVcIixcblxuICAgICAgLyoqXG4gICAgICAgKiBJbmNyZWFzZSB2b2x1bWVcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RlcCAtIEhvdyBtdWNoIHRvIGRlY3JlYXNlIGJ5IChiZXR3ZWVuIDAgYW5kIDEpXG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbmNyZWFzZVZvbHVtZShzdGVwKSB7XG4gICAgICAgIHZhciB2b2x1bWUgPSB0aGlzLm1lZGlhLm11dGVkID8gMCA6IHRoaXMudm9sdW1lO1xuICAgICAgICB0aGlzLnZvbHVtZSA9IHZvbHVtZSArIChpcyQxLm51bWJlcihzdGVwKSA/IHN0ZXAgOiAwKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRGVjcmVhc2Ugdm9sdW1lXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHN0ZXAgLSBIb3cgbXVjaCB0byBkZWNyZWFzZSBieSAoYmV0d2VlbiAwIGFuZCAxKVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVjcmVhc2VWb2x1bWVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWNyZWFzZVZvbHVtZShzdGVwKSB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VWb2x1bWUoLXN0ZXApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgbXV0ZWQgc3RhdGVcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gbXV0ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidG9nZ2xlQ2FwdGlvbnNcIixcblxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgY2FwdGlvbnNcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5wdXQgLSBXaGV0aGVyIHRvIGVuYWJsZSBjYXB0aW9uc1xuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlQ2FwdGlvbnMoaW5wdXQpIHtcbiAgICAgICAgY2FwdGlvbnMudG9nZ2xlLmNhbGwodGhpcywgaW5wdXQsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHRoZSBjYXB0aW9uIHRyYWNrIGJ5IGluZGV4XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gLSBDYXB0aW9uIGluZGV4XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJhaXJwbGF5XCIsXG5cbiAgICAgIC8qKlxuICAgICAgICogVHJpZ2dlciB0aGUgYWlycGxheSBkaWFsb2dcbiAgICAgICAqIFRPRE86IHVwZGF0ZSBwbGF5ZXIgd2l0aCBzdGF0ZSwgc3VwcG9ydCwgZW5hYmxlZFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWlycGxheSgpIHtcbiAgICAgICAgLy8gU2hvdyBkaWFsb2cgaWYgc3VwcG9ydGVkXG4gICAgICAgIGlmIChzdXBwb3J0LmFpcnBsYXkpIHtcbiAgICAgICAgICB0aGlzLm1lZGlhLndlYmtpdFNob3dQbGF5YmFja1RhcmdldFBpY2tlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSB0aGUgcGxheWVyIGNvbnRyb2xzXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt0b2dnbGVdIC0gV2hldGhlciB0byBzaG93IHRoZSBjb250cm9sc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidG9nZ2xlQ29udHJvbHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVDb250cm9scyh0b2dnbGUpIHtcbiAgICAgICAgLy8gRG9uJ3QgdG9nZ2xlIGlmIG1pc3NpbmcgVUkgc3VwcG9ydCBvciBpZiBpdCdzIGF1ZGlvXG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRlZC51aSAmJiAhdGhpcy5pc0F1ZGlvKSB7XG4gICAgICAgICAgLy8gR2V0IHN0YXRlIGJlZm9yZSBjaGFuZ2VcbiAgICAgICAgICB2YXIgaXNIaWRkZW4gPSBoYXNDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5oaWRlQ29udHJvbHMpOyAvLyBOZWdhdGUgdGhlIGFyZ3VtZW50IGlmIG5vdCB1bmRlZmluZWQgc2luY2UgYWRkaW5nIHRoZSBjbGFzcyB0byBoaWRlcyB0aGUgY29udHJvbHNcblxuICAgICAgICAgIHZhciBmb3JjZSA9IHR5cGVvZiB0b2dnbGUgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogIXRvZ2dsZTsgLy8gQXBwbHkgYW5kIGdldCB1cGRhdGVkIHN0YXRlXG5cbiAgICAgICAgICB2YXIgaGlkaW5nID0gdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaGlkZUNvbnRyb2xzLCBmb3JjZSk7IC8vIENsb3NlIG1lbnVcblxuICAgICAgICAgIGlmIChoaWRpbmcgJiYgaXMkMS5hcnJheSh0aGlzLmNvbmZpZy5jb250cm9scykgJiYgdGhpcy5jb25maWcuY29udHJvbHMuaW5jbHVkZXMoJ3NldHRpbmdzJykgJiYgIWlzJDEuZW1wdHkodGhpcy5jb25maWcuc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICBjb250cm9scy50b2dnbGVNZW51LmNhbGwodGhpcywgZmFsc2UpO1xuICAgICAgICAgIH0gLy8gVHJpZ2dlciBldmVudCBvbiBjaGFuZ2VcblxuXG4gICAgICAgICAgaWYgKGhpZGluZyAhPT0gaXNIaWRkZW4pIHtcbiAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBoaWRpbmcgPyAnY29udHJvbHNoaWRkZW4nIDogJ2NvbnRyb2xzc2hvd24nO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcywgdGhpcy5tZWRpYSwgZXZlbnROYW1lKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gIWhpZGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IC0gRXZlbnQgdHlwZVxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmb3Igd2hlbiBldmVudCBvY2N1cnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb24kMShldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgb24uY2FsbCh0aGlzLCB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgZXZlbnQsIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBvbmNlXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBFdmVudCB0eXBlXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZvciB3aGVuIGV2ZW50IG9jY3Vyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib25jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UkMShldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgb25jZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCBldmVudCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBFdmVudCB0eXBlXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZvciB3aGVuIGV2ZW50IG9jY3Vyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib2ZmXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmJDEoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIG9mZih0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgZXZlbnQsIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRGVzdHJveSBhbiBpbnN0YW5jZVxuICAgICAgICogRXZlbnQgbGlzdGVuZXJzIGFyZSByZW1vdmVkIHdoZW4gZWxlbWVudHMgYXJlIHJlbW92ZWRcbiAgICAgICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTI1MjgwNDkvaWYtYS1kb20tZWxlbWVudC1pcy1yZW1vdmVkLWFyZS1pdHMtbGlzdGVuZXJzLWFsc28tcmVtb3ZlZC1mcm9tLW1lbW9yeVxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmb3Igd2hlbiBkZXN0cm95IGlzIGNvbXBsZXRlXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNvZnQgLSBXaGV0aGVyIGl0J3MgYSBzb2Z0IGRlc3Ryb3kgKGZvciBzb3VyY2UgY2hhbmdlcyBldGMpXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveShjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICB2YXIgc29mdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgICAgaWYgKCF0aGlzLnJlYWR5KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRvbmUgPSBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgICAgIC8vIFJlc2V0IG92ZXJmbG93IChpbmNhc2UgZGVzdHJveWVkIHdoaWxlIGluIGZ1bGxzY3JlZW4pXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnOyAvLyBHQyBmb3IgZW1iZWRcblxuICAgICAgICAgIF90aGlzMy5lbWJlZCA9IG51bGw7IC8vIElmIGl0J3MgYSBzb2Z0IGRlc3Ryb3ksIG1ha2UgbWluaW1hbCBjaGFuZ2VzXG5cbiAgICAgICAgICBpZiAoc29mdCkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKF90aGlzMy5lbGVtZW50cykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBlbGVtZW50c1xuICAgICAgICAgICAgICByZW1vdmVFbGVtZW50KF90aGlzMy5lbGVtZW50cy5idXR0b25zLnBsYXkpO1xuICAgICAgICAgICAgICByZW1vdmVFbGVtZW50KF90aGlzMy5lbGVtZW50cy5jYXB0aW9ucyk7XG4gICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQoX3RoaXMzLmVsZW1lbnRzLmNvbnRyb2xzKTtcbiAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudChfdGhpczMuZWxlbWVudHMud3JhcHBlcik7IC8vIENsZWFyIGZvciBHQ1xuXG4gICAgICAgICAgICAgIF90aGlzMy5lbGVtZW50cy5idXR0b25zLnBsYXkgPSBudWxsO1xuICAgICAgICAgICAgICBfdGhpczMuZWxlbWVudHMuY2FwdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgICBfdGhpczMuZWxlbWVudHMuY29udHJvbHMgPSBudWxsO1xuICAgICAgICAgICAgICBfdGhpczMuZWxlbWVudHMud3JhcHBlciA9IG51bGw7XG4gICAgICAgICAgICB9IC8vIENhbGxiYWNrXG5cblxuICAgICAgICAgICAgaWYgKGlzJDEuZnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVuYmluZCBsaXN0ZW5lcnNcbiAgICAgICAgICAgIHVuYmluZExpc3RlbmVycy5jYWxsKF90aGlzMyk7IC8vIFJlcGxhY2UgdGhlIGNvbnRhaW5lciB3aXRoIHRoZSBvcmlnaW5hbCBlbGVtZW50IHByb3ZpZGVkXG5cbiAgICAgICAgICAgIHJlcGxhY2VFbGVtZW50KF90aGlzMy5lbGVtZW50cy5vcmlnaW5hbCwgX3RoaXMzLmVsZW1lbnRzLmNvbnRhaW5lcik7IC8vIEV2ZW50XG5cbiAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKF90aGlzMywgX3RoaXMzLmVsZW1lbnRzLm9yaWdpbmFsLCAnZGVzdHJveWVkJywgdHJ1ZSk7IC8vIENhbGxiYWNrXG5cbiAgICAgICAgICAgIGlmIChpcyQxLmZ1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKF90aGlzMy5lbGVtZW50cy5vcmlnaW5hbCk7XG4gICAgICAgICAgICB9IC8vIFJlc2V0IHN0YXRlXG5cblxuICAgICAgICAgICAgX3RoaXMzLnJlYWR5ID0gZmFsc2U7IC8vIENsZWFyIGZvciBnYXJiYWdlIGNvbGxlY3Rpb25cblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5lbGVtZW50cyA9IG51bGw7XG4gICAgICAgICAgICAgIF90aGlzMy5tZWRpYSA9IG51bGw7XG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTsgLy8gU3RvcCBwbGF5YmFja1xuXG5cbiAgICAgICAgdGhpcy5zdG9wKCk7IC8vIENsZWFyIHRpbWVvdXRzXG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmxvYWRpbmcpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuY29udHJvbHMpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcnMucmVzaXplZCk7IC8vIFByb3ZpZGVyIHNwZWNpZmljIHN0dWZmXG5cbiAgICAgICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgICAgIC8vIFJlc3RvcmUgbmF0aXZlIHZpZGVvIGNvbnRyb2xzXG4gICAgICAgICAgdWkudG9nZ2xlTmF0aXZlQ29udHJvbHMuY2FsbCh0aGlzLCB0cnVlKTsgLy8gQ2xlYW4gdXBcblxuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzWW91VHViZSkge1xuICAgICAgICAgIC8vIENsZWFyIHRpbWVyc1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcnMuYnVmZmVyaW5nKTtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJzLnBsYXlpbmcpOyAvLyBEZXN0cm95IFlvdVR1YmUgQVBJXG5cbiAgICAgICAgICBpZiAodGhpcy5lbWJlZCAhPT0gbnVsbCAmJiBpcyQxLmZ1bmN0aW9uKHRoaXMuZW1iZWQuZGVzdHJveSkpIHtcbiAgICAgICAgICAgIHRoaXMuZW1iZWQuZGVzdHJveSgpO1xuICAgICAgICAgIH0gLy8gQ2xlYW4gdXBcblxuXG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNWaW1lbykge1xuICAgICAgICAgIC8vIERlc3Ryb3kgVmltZW8gQVBJXG4gICAgICAgICAgLy8gdGhlbiBjbGVhbiB1cCAod2FpdCwgdG8gcHJldmVudCBwb3N0bWVzc2FnZSBlcnJvcnMpXG4gICAgICAgICAgaWYgKHRoaXMuZW1iZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZW1iZWQudW5sb2FkKCkudGhlbihkb25lKTtcbiAgICAgICAgICB9IC8vIFZpbWVvIGRvZXMgbm90IGFsd2F5cyByZXR1cm5cblxuXG4gICAgICAgICAgc2V0VGltZW91dChkb25lLCAyMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENoZWNrIGZvciBzdXBwb3J0IGZvciBhIG1pbWUgdHlwZSAoSFRNTDUgb25seSlcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gTWltZSB0eXBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzdXBwb3J0c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1cHBvcnRzKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnQubWltZS5jYWxsKHRoaXMsIHR5cGUpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayBmb3Igc3VwcG9ydFxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBQbGF5ZXIgdHlwZSAoYXVkaW8vdmlkZW8pXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvdmlkZXIgLSBQcm92aWRlciAoaHRtbDUveW91dHViZS92aW1lbylcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5saW5lIC0gV2hlcmUgcGxheWVyIGhhcyBgcGxheXNpbmxpbmVgIHN0dHJpYnV0ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNIVE1MNVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyID09PSBwcm92aWRlcnMuaHRtbDU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzRW1iZWRcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1lvdVR1YmUgfHwgdGhpcy5pc1ZpbWVvO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc1lvdVR1YmVcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlciA9PT0gcHJvdmlkZXJzLnlvdXR1YmU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzVmltZW9cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlciA9PT0gcHJvdmlkZXJzLnZpbWVvO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc1ZpZGVvXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gdHlwZXMudmlkZW87XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzQXVkaW9cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSB0eXBlcy5hdWRpbztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicGxheWluZ1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMucmVhZHkgJiYgIXRoaXMucGF1c2VkICYmICF0aGlzLmVuZGVkKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHBhdXNlZCBzdGF0ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicGF1c2VkXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5wYXVzZWQpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgc3RvcHBlZCBzdGF0ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic3RvcHBlZFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMucGF1c2VkICYmIHRoaXMuY3VycmVudFRpbWUgPT09IDApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgZW5kZWQgc3RhdGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImVuZGVkXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5lbmRlZCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImN1cnJlbnRUaW1lXCIsXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICAvLyBCYWlsIGlmIG1lZGlhIGR1cmF0aW9uIGlzbid0IGF2YWlsYWJsZSB5ZXRcbiAgICAgICAgaWYgKCF0aGlzLmR1cmF0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFZhbGlkYXRlIGlucHV0XG5cblxuICAgICAgICB2YXIgaW5wdXRJc1ZhbGlkID0gaXMkMS5udW1iZXIoaW5wdXQpICYmIGlucHV0ID4gMDsgLy8gU2V0XG5cbiAgICAgICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSA9IGlucHV0SXNWYWxpZCA/IE1hdGgubWluKGlucHV0LCB0aGlzLmR1cmF0aW9uKSA6IDA7IC8vIExvZ2dpbmdcblxuICAgICAgICB0aGlzLmRlYnVnLmxvZyhcIlNlZWtpbmcgdG8gXCIuY29uY2F0KHRoaXMuY3VycmVudFRpbWUsIFwiIHNlY29uZHNcIikpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgY3VycmVudCB0aW1lXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMubWVkaWEuY3VycmVudFRpbWUpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgYnVmZmVyZWRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImJ1ZmZlcmVkXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgdmFyIGJ1ZmZlcmVkID0gdGhpcy5tZWRpYS5idWZmZXJlZDsgLy8gWW91VHViZSAvIFZpbWVvIHJldHVybiBhIGZsb2F0IGJldHdlZW4gMC0xXG5cbiAgICAgICAgaWYgKGlzJDEubnVtYmVyKGJ1ZmZlcmVkKSkge1xuICAgICAgICAgIHJldHVybiBidWZmZXJlZDtcbiAgICAgICAgfSAvLyBIVE1MNVxuICAgICAgICAvLyBUT0RPOiBIYW5kbGUgYnVmZmVyZWQgY2h1bmtzIG9mIHRoZSBtZWRpYVxuICAgICAgICAvLyAoaS5lLiBzZWVrIHRvIGFub3RoZXIgc2VjdGlvbiBidWZmZXJzIG9ubHkgdGhhdCBzZWN0aW9uKVxuXG5cbiAgICAgICAgaWYgKGJ1ZmZlcmVkICYmIGJ1ZmZlcmVkLmxlbmd0aCAmJiB0aGlzLmR1cmF0aW9uID4gMCkge1xuICAgICAgICAgIHJldHVybiBidWZmZXJlZC5lbmQoMCkgLyB0aGlzLmR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCBzZWVraW5nIHN0YXR1c1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2Vla2luZ1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMubWVkaWEuc2Vla2luZyk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhlIGN1cnJlbnQgbWVkaWFcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImR1cmF0aW9uXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgLy8gRmF1eCBkdXJhdGlvbiBzZXQgdmlhIGNvbmZpZ1xuICAgICAgICB2YXIgZmF1eER1cmF0aW9uID0gcGFyc2VGbG9hdCh0aGlzLmNvbmZpZy5kdXJhdGlvbik7IC8vIE1lZGlhIGR1cmF0aW9uIGNhbiBiZSBOYU4gb3IgSW5maW5pdHkgYmVmb3JlIHRoZSBtZWRpYSBoYXMgbG9hZGVkXG5cbiAgICAgICAgdmFyIHJlYWxEdXJhdGlvbiA9ICh0aGlzLm1lZGlhIHx8IHt9KS5kdXJhdGlvbjtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gIWlzJDEubnVtYmVyKHJlYWxEdXJhdGlvbikgfHwgcmVhbER1cmF0aW9uID09PSBJbmZpbml0eSA/IDAgOiByZWFsRHVyYXRpb247IC8vIElmIGNvbmZpZyBkdXJhdGlvbiBpcyBmdW5reSwgdXNlIHJlZ3VsYXIgZHVyYXRpb25cblxuICAgICAgICByZXR1cm4gZmF1eER1cmF0aW9uIHx8IGR1cmF0aW9uO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgdGhlIHBsYXllciB2b2x1bWVcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxLiBEZWZhdWx0cyB0byB0aGUgdmFsdWUgZnJvbSBsb2NhbCBzdG9yYWdlIGFuZCBjb25maWcudm9sdW1lIGlmIG5vdCBzZXQgaW4gc3RvcmFnZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidm9sdW1lXCIsXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICB2YXIgdm9sdW1lID0gdmFsdWU7XG4gICAgICAgIHZhciBtYXggPSAxO1xuICAgICAgICB2YXIgbWluID0gMDtcblxuICAgICAgICBpZiAoaXMkMS5zdHJpbmcodm9sdW1lKSkge1xuICAgICAgICAgIHZvbHVtZSA9IE51bWJlcih2b2x1bWUpO1xuICAgICAgICB9IC8vIExvYWQgdm9sdW1lIGZyb20gc3RvcmFnZSBpZiBubyB2YWx1ZSBzcGVjaWZpZWRcblxuXG4gICAgICAgIGlmICghaXMkMS5udW1iZXIodm9sdW1lKSkge1xuICAgICAgICAgIHZvbHVtZSA9IHRoaXMuc3RvcmFnZS5nZXQoJ3ZvbHVtZScpO1xuICAgICAgICB9IC8vIFVzZSBjb25maWcgaWYgYWxsIGVsc2UgZmFpbHNcblxuXG4gICAgICAgIGlmICghaXMkMS5udW1iZXIodm9sdW1lKSkge1xuICAgICAgICAgIHZvbHVtZSA9IHRoaXMuY29uZmlnLnZvbHVtZTtcbiAgICAgICAgfSAvLyBNYXhpbXVtIGlzIHZvbHVtZU1heFxuXG5cbiAgICAgICAgaWYgKHZvbHVtZSA+IG1heCkge1xuICAgICAgICAgIHZvbHVtZSA9IG1heDtcbiAgICAgICAgfSAvLyBNaW5pbXVtIGlzIHZvbHVtZU1pblxuXG5cbiAgICAgICAgaWYgKHZvbHVtZSA8IG1pbikge1xuICAgICAgICAgIHZvbHVtZSA9IG1pbjtcbiAgICAgICAgfSAvLyBVcGRhdGUgY29uZmlnXG5cblxuICAgICAgICB0aGlzLmNvbmZpZy52b2x1bWUgPSB2b2x1bWU7IC8vIFNldCB0aGUgcGxheWVyIHZvbHVtZVxuXG4gICAgICAgIHRoaXMubWVkaWEudm9sdW1lID0gdm9sdW1lOyAvLyBJZiBtdXRlZCwgYW5kIHdlJ3JlIGluY3JlYXNpbmcgdm9sdW1lIG1hbnVhbGx5LCByZXNldCBtdXRlZCBzdGF0ZVxuXG4gICAgICAgIGlmICghaXMkMS5lbXB0eSh2YWx1ZSkgJiYgdGhpcy5tdXRlZCAmJiB2b2x1bWUgPiAwKSB7XG4gICAgICAgICAgdGhpcy5tdXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCB0aGUgY3VycmVudCBwbGF5ZXIgdm9sdW1lXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMubWVkaWEudm9sdW1lKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwibXV0ZWRcIixcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KG11dGUpIHtcbiAgICAgICAgdmFyIHRvZ2dsZSA9IG11dGU7IC8vIExvYWQgbXV0ZWQgc3RhdGUgZnJvbSBzdG9yYWdlXG5cbiAgICAgICAgaWYgKCFpcyQxLmJvb2xlYW4odG9nZ2xlKSkge1xuICAgICAgICAgIHRvZ2dsZSA9IHRoaXMuc3RvcmFnZS5nZXQoJ211dGVkJyk7XG4gICAgICAgIH0gLy8gVXNlIGNvbmZpZyBpZiBhbGwgZWxzZSBmYWlsc1xuXG5cbiAgICAgICAgaWYgKCFpcyQxLmJvb2xlYW4odG9nZ2xlKSkge1xuICAgICAgICAgIHRvZ2dsZSA9IHRoaXMuY29uZmlnLm11dGVkO1xuICAgICAgICB9IC8vIFVwZGF0ZSBjb25maWdcblxuXG4gICAgICAgIHRoaXMuY29uZmlnLm11dGVkID0gdG9nZ2xlOyAvLyBTZXQgbXV0ZSBvbiB0aGUgcGxheWVyXG5cbiAgICAgICAgdGhpcy5tZWRpYS5tdXRlZCA9IHRvZ2dsZTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IGN1cnJlbnQgbXV0ZWQgc3RhdGVcbiAgICAgICAqL1xuICAgICAgLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMubWVkaWEubXV0ZWQpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayBpZiB0aGUgbWVkaWEgaGFzIGF1ZGlvXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJoYXNBdWRpb1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIC8vIEFzc3VtZSB5ZXMgZm9yIGFsbCBub24gSFRNTDUgKGFzIHdlIGNhbid0IHRlbGwuLi4pXG4gICAgICAgIGlmICghdGhpcy5pc0hUTUw1KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc0F1ZGlvKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gR2V0IGF1ZGlvIHRyYWNrc1xuXG5cbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5tb3pIYXNBdWRpbykgfHwgQm9vbGVhbih0aGlzLm1lZGlhLndlYmtpdEF1ZGlvRGVjb2RlZEJ5dGVDb3VudCkgfHwgQm9vbGVhbih0aGlzLm1lZGlhLmF1ZGlvVHJhY2tzICYmIHRoaXMubWVkaWEuYXVkaW9UcmFja3MubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHBsYXliYWNrIHNwZWVkXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3BlZWQgLSB0aGUgc3BlZWQgb2YgcGxheWJhY2sgKDAuNS0yLjApXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzcGVlZFwiLFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoaW5wdXQpIHtcbiAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHNwZWVkID0gbnVsbDtcblxuICAgICAgICBpZiAoaXMkMS5udW1iZXIoaW5wdXQpKSB7XG4gICAgICAgICAgc3BlZWQgPSBpbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXMkMS5udW1iZXIoc3BlZWQpKSB7XG4gICAgICAgICAgc3BlZWQgPSB0aGlzLnN0b3JhZ2UuZ2V0KCdzcGVlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpcyQxLm51bWJlcihzcGVlZCkpIHtcbiAgICAgICAgICBzcGVlZCA9IHRoaXMuY29uZmlnLnNwZWVkLnNlbGVjdGVkO1xuICAgICAgICB9IC8vIENsYW1wIHRvIG1pbi9tYXhcblxuXG4gICAgICAgIHZhciBtaW4gPSB0aGlzLm1pbmltdW1TcGVlZCxcbiAgICAgICAgICAgIG1heCA9IHRoaXMubWF4aW11bVNwZWVkO1xuICAgICAgICBzcGVlZCA9IGNsYW1wKHNwZWVkLCBtaW4sIG1heCk7IC8vIFVwZGF0ZSBjb25maWdcblxuICAgICAgICB0aGlzLmNvbmZpZy5zcGVlZC5zZWxlY3RlZCA9IHNwZWVkOyAvLyBTZXQgbWVkaWEgc3BlZWRcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczQubWVkaWEucGxheWJhY2tSYXRlID0gc3BlZWQ7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgY3VycmVudCBwbGF5YmFjayBzcGVlZFxuICAgICAgICovXG4gICAgICAsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLm1lZGlhLnBsYXliYWNrUmF0ZSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCB0aGUgbWluaW11bSBhbGxvd2VkIHNwZWVkXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJtaW5pbXVtU3BlZWRcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy5pc1lvdVR1YmUpIHtcbiAgICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlL2lmcmFtZV9hcGlfcmVmZXJlbmNlI3NldFBsYXliYWNrUmF0ZVxuICAgICAgICAgIHJldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5vcHRpb25zLnNwZWVkKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1ZpbWVvKSB7XG4gICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3ZpbWVvL3BsYXllci5qcy8jc2V0cGxheWJhY2tyYXRlcGxheWJhY2tyYXRlLW51bWJlci1wcm9taXNlbnVtYmVyLXJhbmdlZXJyb3JlcnJvclxuICAgICAgICAgIHJldHVybiAwLjU7XG4gICAgICAgIH0gLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMyMzIwMDIwLzExOTEzMTlcblxuXG4gICAgICAgIHJldHVybiAwLjA2MjU7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCB0aGUgbWF4aW11bSBhbGxvd2VkIHNwZWVkXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJtYXhpbXVtU3BlZWRcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy5pc1lvdVR1YmUpIHtcbiAgICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlL2lmcmFtZV9hcGlfcmVmZXJlbmNlI3NldFBsYXliYWNrUmF0ZVxuICAgICAgICAgIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5vcHRpb25zLnNwZWVkKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1ZpbWVvKSB7XG4gICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3ZpbWVvL3BsYXllci5qcy8jc2V0cGxheWJhY2tyYXRlcGxheWJhY2tyYXRlLW51bWJlci1wcm9taXNlbnVtYmVyLXJhbmdlZXJyb3JlcnJvclxuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9IC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMjMyMDAyMC8xMTkxMzE5XG5cblxuICAgICAgICByZXR1cm4gMTY7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFNldCBwbGF5YmFjayBxdWFsaXR5XG4gICAgICAgKiBDdXJyZW50bHkgSFRNTDUgJiBZb3VUdWJlIG9ubHlcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbnB1dCAtIFF1YWxpdHkgbGV2ZWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInF1YWxpdHlcIixcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZy5xdWFsaXR5O1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5xdWFsaXR5O1xuXG4gICAgICAgIGlmICghb3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcXVhbGl0eSA9IFshaXMkMS5lbXB0eShpbnB1dCkgJiYgTnVtYmVyKGlucHV0KSwgdGhpcy5zdG9yYWdlLmdldCgncXVhbGl0eScpLCBjb25maWcuc2VsZWN0ZWQsIGNvbmZpZy5kZWZhdWx0XS5maW5kKGlzJDEubnVtYmVyKTtcbiAgICAgICAgdmFyIHVwZGF0ZVN0b3JhZ2UgPSB0cnVlO1xuXG4gICAgICAgIGlmICghb3B0aW9ucy5pbmNsdWRlcyhxdWFsaXR5KSkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNsb3Nlc3QkMShvcHRpb25zLCBxdWFsaXR5KTtcbiAgICAgICAgICB0aGlzLmRlYnVnLndhcm4oXCJVbnN1cHBvcnRlZCBxdWFsaXR5IG9wdGlvbjogXCIuY29uY2F0KHF1YWxpdHksIFwiLCB1c2luZyBcIikuY29uY2F0KHZhbHVlLCBcIiBpbnN0ZWFkXCIpKTtcbiAgICAgICAgICBxdWFsaXR5ID0gdmFsdWU7IC8vIERvbid0IHVwZGF0ZSBzdG9yYWdlIGlmIHF1YWxpdHkgaXMgbm90IHN1cHBvcnRlZFxuXG4gICAgICAgICAgdXBkYXRlU3RvcmFnZSA9IGZhbHNlO1xuICAgICAgICB9IC8vIFVwZGF0ZSBjb25maWdcblxuXG4gICAgICAgIGNvbmZpZy5zZWxlY3RlZCA9IHF1YWxpdHk7IC8vIFNldCBxdWFsaXR5XG5cbiAgICAgICAgdGhpcy5tZWRpYS5xdWFsaXR5ID0gcXVhbGl0eTsgLy8gU2F2ZSB0byBzdG9yYWdlXG5cbiAgICAgICAgaWYgKHVwZGF0ZVN0b3JhZ2UpIHtcbiAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KHtcbiAgICAgICAgICAgIHF1YWxpdHk6IHF1YWxpdHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgY3VycmVudCBxdWFsaXR5IGxldmVsXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYS5xdWFsaXR5O1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgbG9vcFxuICAgICAgICogVE9ETzogRmluaXNoIGZhbmN5IG5ldyBsb2dpYy4gU2V0IHRoZSBpbmRpY2F0b3Igb24gbG9hZCBhcyB1c2VyIG1heSBwYXNzIGxvb3AgYXMgY29uZmlnXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlucHV0IC0gV2hldGhlciB0byBsb29wIG9yIG5vdFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwibG9vcFwiLFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoaW5wdXQpIHtcbiAgICAgICAgdmFyIHRvZ2dsZSA9IGlzJDEuYm9vbGVhbihpbnB1dCkgPyBpbnB1dCA6IHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlO1xuICAgICAgICB0aGlzLmNvbmZpZy5sb29wLmFjdGl2ZSA9IHRvZ2dsZTtcbiAgICAgICAgdGhpcy5tZWRpYS5sb29wID0gdG9nZ2xlOyAvLyBTZXQgZGVmYXVsdCB0byBiZSBhIHRydWUgdG9nZ2xlXG5cbiAgICAgICAgLyogY29uc3QgdHlwZSA9IFsnc3RhcnQnLCAnZW5kJywgJ2FsbCcsICdub25lJywgJ3RvZ2dsZSddLmluY2x1ZGVzKGlucHV0KSA/IGlucHV0IDogJ3RvZ2dsZSc7XG4gICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcubG9vcC5lbmQgJiYgdGhpcy5jb25maWcubG9vcC5lbmQgPD0gdGhpcy5jdXJyZW50VGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5lbmQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3Auc3RhcnQgPSB0aGlzLmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbmZpZy5sb29wLmluZGljYXRvci5zdGFydCA9IHRoaXMuZWxlbWVudHMuZGlzcGxheS5wbGF5ZWQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcubG9vcC5zdGFydCA+PSB0aGlzLmN1cnJlbnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb29wLmVuZCA9IHRoaXMuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29uZmlnLmxvb3AuaW5kaWNhdG9yLmVuZCA9IHRoaXMuZWxlbWVudHMuZGlzcGxheS5wbGF5ZWQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICBjYXNlICdhbGwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb29wLnN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5lbmQgPSB0aGlzLmR1cmF0aW9uIC0gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5pbmRpY2F0b3Iuc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb29wLmluZGljYXRvci5lbmQgPSAxMDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICBjYXNlICd0b2dnbGUnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcubG9vcC5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3Auc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5lbmQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5zdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb29wLmVuZCA9IHRoaXMuZHVyYXRpb24gLSAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb29wLnN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5lbmQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gKi9cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IGN1cnJlbnQgbG9vcCBzdGF0ZVxuICAgICAgICovXG4gICAgICAsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5sb29wKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogU2V0IG5ldyBtZWRpYSBzb3VyY2VcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dCAtIFRoZSBuZXcgc291cmNlIG9iamVjdCAoc2VlIGRvY3MpXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzb3VyY2VcIixcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgIHNvdXJjZS5jaGFuZ2UuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCBjdXJyZW50IHNvdXJjZVxuICAgICAgICovXG4gICAgICAsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWEuY3VycmVudFNyYztcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IGEgZG93bmxvYWQgVVJMIChlaXRoZXIgc291cmNlIG9yIGN1c3RvbSlcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImRvd25sb2FkXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgdmFyIGRvd25sb2FkID0gdGhpcy5jb25maWcudXJscy5kb3dubG9hZDtcbiAgICAgICAgcmV0dXJuIGlzJDEudXJsKGRvd25sb2FkKSA/IGRvd25sb2FkIDogdGhpcy5zb3VyY2U7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFNldCB0aGUgZG93bmxvYWQgVVJMXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgIGlmICghaXMkMS51cmwoaW5wdXQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb25maWcudXJscy5kb3dubG9hZCA9IGlucHV0O1xuICAgICAgICBjb250cm9scy5zZXREb3dubG9hZFVybC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgdGhlIHBvc3RlciBpbWFnZSBmb3IgYSB2aWRlb1xuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IC0gdGhlIFVSTCBmb3IgdGhlIG5ldyBwb3N0ZXIgaW1hZ2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInBvc3RlclwiLFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoaW5wdXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmlkZW8pIHtcbiAgICAgICAgICB0aGlzLmRlYnVnLndhcm4oJ1Bvc3RlciBjYW4gb25seSBiZSBzZXQgZm9yIHZpZGVvJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdWkuc2V0UG9zdGVyLmNhbGwodGhpcywgaW5wdXQsIGZhbHNlKS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldCB0aGUgY3VycmVudCBwb3N0ZXIgaW1hZ2VcbiAgICAgICAqL1xuICAgICAgLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZpZGVvKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYS5nZXRBdHRyaWJ1dGUoJ3Bvc3RlcicpIHx8IHRoaXMubWVkaWEuZ2V0QXR0cmlidXRlKCdkYXRhLXBvc3RlcicpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgdGhlIGN1cnJlbnQgYXNwZWN0IHJhdGlvIGluIHVzZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmF0aW9cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNWaWRlbykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJhdGlvID0gcmVkdWNlQXNwZWN0UmF0aW8oZ2V0QXNwZWN0UmF0aW8uY2FsbCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBpcyQxLmFycmF5KHJhdGlvKSA/IHJhdGlvLmpvaW4oJzonKSA6IHJhdGlvO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgdmlkZW8gYXNwZWN0IHJhdGlvXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZpZGVvKSB7XG4gICAgICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdBc3BlY3QgcmF0aW8gY2FuIG9ubHkgYmUgc2V0IGZvciB2aWRlbycpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXMkMS5zdHJpbmcoaW5wdXQpIHx8ICF2YWxpZGF0ZVJhdGlvKGlucHV0KSkge1xuICAgICAgICAgIHRoaXMuZGVidWcuZXJyb3IoXCJJbnZhbGlkIGFzcGVjdCByYXRpbyBzcGVjaWZpZWQgKFwiLmNvbmNhdChpbnB1dCwgXCIpXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbmZpZy5yYXRpbyA9IGlucHV0O1xuICAgICAgICBzZXRBc3BlY3RSYXRpby5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgdGhlIGF1dG9wbGF5IHN0YXRlXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlucHV0IC0gV2hldGhlciB0byBhdXRvcGxheSBvciBub3RcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImF1dG9wbGF5XCIsXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICB2YXIgdG9nZ2xlID0gaXMkMS5ib29sZWFuKGlucHV0KSA/IGlucHV0IDogdGhpcy5jb25maWcuYXV0b3BsYXk7XG4gICAgICAgIHRoaXMuY29uZmlnLmF1dG9wbGF5ID0gdG9nZ2xlO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgdGhlIGN1cnJlbnQgYXV0b3BsYXkgc3RhdGVcbiAgICAgICAqL1xuICAgICAgLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuY29uZmlnLmF1dG9wbGF5KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY3VycmVudFRyYWNrXCIsXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpbnB1dCkge1xuICAgICAgICBjYXB0aW9ucy5zZXQuY2FsbCh0aGlzLCBpbnB1dCwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgdGhlIGN1cnJlbnQgY2FwdGlvbiB0cmFjayBpbmRleCAoLTEgaWYgZGlzYWJsZWQpXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICB2YXIgX3RoaXMkY2FwdGlvbnMgPSB0aGlzLmNhcHRpb25zLFxuICAgICAgICAgICAgdG9nZ2xlZCA9IF90aGlzJGNhcHRpb25zLnRvZ2dsZWQsXG4gICAgICAgICAgICBjdXJyZW50VHJhY2sgPSBfdGhpcyRjYXB0aW9ucy5jdXJyZW50VHJhY2s7XG4gICAgICAgIHJldHVybiB0b2dnbGVkID8gY3VycmVudFRyYWNrIDogLTE7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFNldCB0aGUgd2FudGVkIGxhbmd1YWdlIGZvciBjYXB0aW9uc1xuICAgICAgICogU2luY2UgdHJhY2tzIGNhbiBiZSBhZGRlZCBsYXRlciBpdCB3b24ndCB1cGRhdGUgdGhlIGFjdHVhbCBjYXB0aW9uIHRyYWNrIHVudGlsIHRoZXJlIGlzIGEgbWF0Y2hpbmcgdHJhY2tcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSAtIFR3byBjaGFyYWN0ZXIgSVNPIGxhbmd1YWdlIGNvZGUgKGUuZy4gRU4sIEZSLCBQVCwgZXRjKVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwibGFuZ3VhZ2VcIixcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgIGNhcHRpb25zLnNldExhbmd1YWdlLmNhbGwodGhpcywgaW5wdXQsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHRoZSBjdXJyZW50IHRyYWNrJ3MgbGFuZ3VhZ2VcbiAgICAgICAqL1xuICAgICAgLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiAoY2FwdGlvbnMuZ2V0Q3VycmVudFRyYWNrLmNhbGwodGhpcykgfHwge30pLmxhbmd1YWdlO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgcGljdHVyZS1pbi1waWN0dXJlIHBsYXliYWNrIG9uIFdlYktpdC9NYWNPU1xuICAgICAgICogVE9ETzogdXBkYXRlIHBsYXllciB3aXRoIHN0YXRlLCBzdXBwb3J0LCBlbmFibGVkXG4gICAgICAgKiBUT0RPOiBkZXRlY3Qgb3V0c2lkZSBjaGFuZ2VzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwaXBcIixcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGlucHV0KSB7XG4gICAgICAgIC8vIEJhaWwgaWYgbm8gc3VwcG9ydFxuICAgICAgICBpZiAoIXN1cHBvcnQucGlwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFRvZ2dsZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlIGlmIG5vdCBwYXNzZWRcblxuXG4gICAgICAgIHZhciB0b2dnbGUgPSBpcyQxLmJvb2xlYW4oaW5wdXQpID8gaW5wdXQgOiAhdGhpcy5waXA7IC8vIFRvZ2dsZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgICAgIC8vIFNhZmFyaVxuXG4gICAgICAgIGlmIChpcyQxLmZ1bmN0aW9uKHRoaXMubWVkaWEud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSkpIHtcbiAgICAgICAgICB0aGlzLm1lZGlhLndlYmtpdFNldFByZXNlbnRhdGlvbk1vZGUodG9nZ2xlID8gcGlwLmFjdGl2ZSA6IHBpcC5pbmFjdGl2ZSk7XG4gICAgICAgIH0gLy8gQ2hyb21lXG5cblxuICAgICAgICBpZiAoaXMkMS5mdW5jdGlvbih0aGlzLm1lZGlhLnJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlKSkge1xuICAgICAgICAgIGlmICghdGhpcy5waXAgJiYgdG9nZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLnJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBpcCAmJiAhdG9nZ2xlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5leGl0UGljdHVyZUluUGljdHVyZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcGljdHVyZS1pbi1waWN0dXJlIHN0YXRlXG4gICAgICAgKi9cbiAgICAgICxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICBpZiAoIXN1cHBvcnQucGlwKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gLy8gU2FmYXJpXG5cblxuICAgICAgICBpZiAoIWlzJDEuZW1wdHkodGhpcy5tZWRpYS53ZWJraXRQcmVzZW50YXRpb25Nb2RlKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm1lZGlhLndlYmtpdFByZXNlbnRhdGlvbk1vZGUgPT09IHBpcC5hY3RpdmU7XG4gICAgICAgIH0gLy8gQ2hyb21lXG5cblxuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYSA9PT0gZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVsZW1lbnQ7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwic3VwcG9ydGVkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3VwcG9ydGVkKHR5cGUsIHByb3ZpZGVyLCBpbmxpbmUpIHtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnQuY2hlY2sodHlwZSwgcHJvdmlkZXIsIGlubGluZSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIExvYWQgYW4gU1ZHIHNwcml0ZSBpbnRvIHRoZSBwYWdlXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIC0gVVJMIGZvciB0aGUgU1ZHIHNwcml0ZVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IFtpZF0gLSBVbmlxdWUgSURcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImxvYWRTcHJpdGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkU3ByaXRlJDEodXJsLCBpZCkge1xuICAgICAgICByZXR1cm4gbG9hZFNwcml0ZSh1cmwsIGlkKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgbXVsdGlwbGUgaW5zdGFuY2VzXG4gICAgICAgKiBAcGFyYW0geyp9IHNlbGVjdG9yXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0dXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cChzZWxlY3Rvcikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgICAgIHZhciB0YXJnZXRzID0gbnVsbDtcblxuICAgICAgICBpZiAoaXMkMS5zdHJpbmcoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgdGFyZ2V0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzJDEubm9kZUxpc3Qoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgdGFyZ2V0cyA9IEFycmF5LmZyb20oc2VsZWN0b3IpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzJDEuYXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgdGFyZ2V0cyA9IHNlbGVjdG9yLmZpbHRlcihpcyQxLmVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzJDEuZW1wdHkodGFyZ2V0cykpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXRzLm1hcChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiBuZXcgUGx5cih0LCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFBseXI7XG4gIH0oKTtcblxuICBQbHlyLmRlZmF1bHRzID0gY2xvbmVEZWVwKGRlZmF1bHRzJDEpO1xuXG4gIHJldHVybiBQbHlyO1xuXG59KSkpO1xuIiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxuKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksbiYmX2RlZmluZVByb3BlcnRpZXMoZSxuKSxlfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gb3duS2V5cyhlLHQpe3ZhciBuPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKHI9ci5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gX29iamVjdFNwcmVhZDIoZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/b3duS2V5cyhPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe19kZWZpbmVQcm9wZXJ0eShlLHQsblt0XSl9KSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6b3duS2V5cyhPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHQpKX0pKX1yZXR1cm4gZX12YXIgZGVmYXVsdHM9e2FkZENTUzohMCx0aHVtYldpZHRoOjE1LHdhdGNoOiEwfTtmdW5jdGlvbiBtYXRjaGVzKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSkuaW5jbHVkZXModGhpcyl9LmNhbGwoZSx0KX1mdW5jdGlvbiB0cmlnZ2VyKGUsdCl7aWYoZSYmdCl7dmFyIG49bmV3IEV2ZW50KHQse2J1YmJsZXM6ITB9KTtlLmRpc3BhdGNoRXZlbnQobil9fXZhciBnZXRDb25zdHJ1Y3Rvcj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9lLmNvbnN0cnVjdG9yOm51bGx9LGluc3RhbmNlT2Y9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIShlJiZ0JiZlIGluc3RhbmNlb2YgdCl9LGlzTnVsbE9yVW5kZWZpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lfSxpc09iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gZ2V0Q29uc3RydWN0b3IoZSk9PT1PYmplY3R9LGlzTnVtYmVyPWZ1bmN0aW9uKGUpe3JldHVybiBnZXRDb25zdHJ1Y3RvcihlKT09PU51bWJlciYmIU51bWJlci5pc05hTihlKX0saXNTdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIGdldENvbnN0cnVjdG9yKGUpPT09U3RyaW5nfSxpc0Jvb2xlYW49ZnVuY3Rpb24oZSl7cmV0dXJuIGdldENvbnN0cnVjdG9yKGUpPT09Qm9vbGVhbn0saXNGdW5jdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZ2V0Q29uc3RydWN0b3IoZSk9PT1GdW5jdGlvbn0saXNBcnJheT1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX0saXNOb2RlTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gaW5zdGFuY2VPZihlLE5vZGVMaXN0KX0saXNFbGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBpbnN0YW5jZU9mKGUsRWxlbWVudCl9LGlzRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGluc3RhbmNlT2YoZSxFdmVudCl9LGlzRW1wdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTnVsbE9yVW5kZWZpbmVkKGUpfHwoaXNTdHJpbmcoZSl8fGlzQXJyYXkoZSl8fGlzTm9kZUxpc3QoZSkpJiYhZS5sZW5ndGh8fGlzT2JqZWN0KGUpJiYhT2JqZWN0LmtleXMoZSkubGVuZ3RofSxpcz17bnVsbE9yVW5kZWZpbmVkOmlzTnVsbE9yVW5kZWZpbmVkLG9iamVjdDppc09iamVjdCxudW1iZXI6aXNOdW1iZXIsc3RyaW5nOmlzU3RyaW5nLGJvb2xlYW46aXNCb29sZWFuLGZ1bmN0aW9uOmlzRnVuY3Rpb24sYXJyYXk6aXNBcnJheSxub2RlTGlzdDppc05vZGVMaXN0LGVsZW1lbnQ6aXNFbGVtZW50LGV2ZW50OmlzRXZlbnQsZW1wdHk6aXNFbXB0eX07ZnVuY3Rpb24gZ2V0RGVjaW1hbFBsYWNlcyhlKXt2YXIgdD1cIlwiLmNvbmNhdChlKS5tYXRjaCgvKD86XFwuKFxcZCspKT8oPzpbZUVdKFsrLV0/XFxkKykpPyQvKTtyZXR1cm4gdD9NYXRoLm1heCgwLCh0WzFdP3RbMV0ubGVuZ3RoOjApLSh0WzJdPyt0WzJdOjApKTowfWZ1bmN0aW9uIHJvdW5kKGUsdCl7aWYoMT50KXt2YXIgbj1nZXREZWNpbWFsUGxhY2VzKHQpO3JldHVybiBwYXJzZUZsb2F0KGUudG9GaXhlZChuKSl9cmV0dXJuIE1hdGgucm91bmQoZS90KSp0fXZhciBSYW5nZVRvdWNoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4pe19jbGFzc0NhbGxDaGVjayh0aGlzLGUpLGlzLmVsZW1lbnQodCk/dGhpcy5lbGVtZW50PXQ6aXMuc3RyaW5nKHQpJiYodGhpcy5lbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCkpLGlzLmVsZW1lbnQodGhpcy5lbGVtZW50KSYmaXMuZW1wdHkodGhpcy5lbGVtZW50LnJhbmdlVG91Y2gpJiYodGhpcy5jb25maWc9X29iamVjdFNwcmVhZDIoe30sZGVmYXVsdHMse30sbiksdGhpcy5pbml0KCkpfXJldHVybiBfY3JlYXRlQ2xhc3MoZSxbe2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbigpe2UuZW5hYmxlZCYmKHRoaXMuY29uZmlnLmFkZENTUyYmKHRoaXMuZWxlbWVudC5zdHlsZS51c2VyU2VsZWN0PVwibm9uZVwiLHRoaXMuZWxlbWVudC5zdHlsZS53ZWJLaXRVc2VyU2VsZWN0PVwibm9uZVwiLHRoaXMuZWxlbWVudC5zdHlsZS50b3VjaEFjdGlvbj1cIm1hbmlwdWxhdGlvblwiKSx0aGlzLmxpc3RlbmVycyghMCksdGhpcy5lbGVtZW50LnJhbmdlVG91Y2g9dGhpcyl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7ZS5lbmFibGVkJiYodGhpcy5jb25maWcuYWRkQ1NTJiYodGhpcy5lbGVtZW50LnN0eWxlLnVzZXJTZWxlY3Q9XCJcIix0aGlzLmVsZW1lbnQuc3R5bGUud2ViS2l0VXNlclNlbGVjdD1cIlwiLHRoaXMuZWxlbWVudC5zdHlsZS50b3VjaEFjdGlvbj1cIlwiKSx0aGlzLmxpc3RlbmVycyghMSksdGhpcy5lbGVtZW50LnJhbmdlVG91Y2g9bnVsbCl9fSx7a2V5OlwibGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWU/XCJhZGRFdmVudExpc3RlbmVyXCI6XCJyZW1vdmVFdmVudExpc3RlbmVyXCI7W1widG91Y2hzdGFydFwiLFwidG91Y2htb3ZlXCIsXCJ0b3VjaGVuZFwiXS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmVsZW1lbnRbbl0oZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2V0KGUpfSksITEpfSkpfX0se2tleTpcImdldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCFlLmVuYWJsZWR8fCFpcy5ldmVudCh0KSlyZXR1cm4gbnVsbDt2YXIgbixyPXQudGFyZ2V0LGk9dC5jaGFuZ2VkVG91Y2hlc1swXSxvPXBhcnNlRmxvYXQoci5nZXRBdHRyaWJ1dGUoXCJtaW5cIikpfHwwLHM9cGFyc2VGbG9hdChyLmdldEF0dHJpYnV0ZShcIm1heFwiKSl8fDEwMCx1PXBhcnNlRmxvYXQoci5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKXx8MSxjPXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYT0xMDAvYy53aWR0aCoodGhpcy5jb25maWcudGh1bWJXaWR0aC8yKS8xMDA7cmV0dXJuIDA+KG49MTAwL2Mud2lkdGgqKGkuY2xpZW50WC1jLmxlZnQpKT9uPTA6MTAwPG4mJihuPTEwMCksNTA+bj9uLT0oMTAwLTIqbikqYTo1MDxuJiYobis9Mioobi01MCkqYSksbytyb3VuZChuLzEwMCoocy1vKSx1KX19LHtrZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbih0KXtlLmVuYWJsZWQmJmlzLmV2ZW50KHQpJiYhdC50YXJnZXQuZGlzYWJsZWQmJih0LnByZXZlbnREZWZhdWx0KCksdC50YXJnZXQudmFsdWU9dGhpcy5nZXQodCksdHJpZ2dlcih0LnRhcmdldCxcInRvdWNoZW5kXCI9PT10LnR5cGU/XCJjaGFuZ2VcIjpcImlucHV0XCIpKX19XSxbe2tleTpcInNldHVwXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LHI9bnVsbDtpZihpcy5lbXB0eSh0KXx8aXMuc3RyaW5nKHQpP3I9QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGlzLnN0cmluZyh0KT90OidpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKSk6aXMuZWxlbWVudCh0KT9yPVt0XTppcy5ub2RlTGlzdCh0KT9yPUFycmF5LmZyb20odCk6aXMuYXJyYXkodCkmJihyPXQuZmlsdGVyKGlzLmVsZW1lbnQpKSxpcy5lbXB0eShyKSlyZXR1cm4gbnVsbDt2YXIgaT1fb2JqZWN0U3ByZWFkMih7fSxkZWZhdWx0cyx7fSxuKTtpZihpcy5zdHJpbmcodCkmJmkud2F0Y2gpe3ZhciBvPW5ldyBNdXRhdGlvbk9ic2VydmVyKChmdW5jdGlvbihuKXtBcnJheS5mcm9tKG4pLmZvckVhY2goKGZ1bmN0aW9uKG4pe0FycmF5LmZyb20obi5hZGRlZE5vZGVzKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpcy5lbGVtZW50KG4pJiZtYXRjaGVzKG4sdCkmJm5ldyBlKG4saSl9KSl9KSl9KSk7by5vYnNlcnZlKGRvY3VtZW50LmJvZHkse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9cmV0dXJuIHIubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCxuKX0pKX19LHtrZXk6XCJlbmFibGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudH19XSksZX0oKTtleHBvcnQgZGVmYXVsdCBSYW5nZVRvdWNoOyIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUeXBlIGNoZWNraW5nIHV0aWxzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBnZXRDb25zdHJ1Y3RvciA9IGlucHV0ID0+IChpbnB1dCAhPT0gbnVsbCAmJiB0eXBlb2YgaW5wdXQgIT09ICd1bmRlZmluZWQnID8gaW5wdXQuY29uc3RydWN0b3IgOiBudWxsKTtcbmNvbnN0IGluc3RhbmNlT2YgPSAoaW5wdXQsIGNvbnN0cnVjdG9yKSA9PiBCb29sZWFuKGlucHV0ICYmIGNvbnN0cnVjdG9yICYmIGlucHV0IGluc3RhbmNlb2YgY29uc3RydWN0b3IpO1xuY29uc3QgaXNOdWxsT3JVbmRlZmluZWQgPSBpbnB1dCA9PiBpbnB1dCA9PT0gbnVsbCB8fCB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnO1xuY29uc3QgaXNPYmplY3QgPSBpbnB1dCA9PiBnZXRDb25zdHJ1Y3RvcihpbnB1dCkgPT09IE9iamVjdDtcbmNvbnN0IGlzTnVtYmVyID0gaW5wdXQgPT4gZ2V0Q29uc3RydWN0b3IoaW5wdXQpID09PSBOdW1iZXIgJiYgIU51bWJlci5pc05hTihpbnB1dCk7XG5jb25zdCBpc1N0cmluZyA9IGlucHV0ID0+IGdldENvbnN0cnVjdG9yKGlucHV0KSA9PT0gU3RyaW5nO1xuY29uc3QgaXNCb29sZWFuID0gaW5wdXQgPT4gZ2V0Q29uc3RydWN0b3IoaW5wdXQpID09PSBCb29sZWFuO1xuY29uc3QgaXNGdW5jdGlvbiA9IGlucHV0ID0+IGdldENvbnN0cnVjdG9yKGlucHV0KSA9PT0gRnVuY3Rpb247XG5jb25zdCBpc0FycmF5ID0gaW5wdXQgPT4gQXJyYXkuaXNBcnJheShpbnB1dCk7XG5jb25zdCBpc1dlYWtNYXAgPSBpbnB1dCA9PiBpbnN0YW5jZU9mKGlucHV0LCBXZWFrTWFwKTtcbmNvbnN0IGlzTm9kZUxpc3QgPSBpbnB1dCA9PiBpbnN0YW5jZU9mKGlucHV0LCBOb2RlTGlzdCk7XG5jb25zdCBpc0VsZW1lbnQgPSBpbnB1dCA9PiBpbnN0YW5jZU9mKGlucHV0LCBFbGVtZW50KTtcbmNvbnN0IGlzVGV4dE5vZGUgPSBpbnB1dCA9PiBnZXRDb25zdHJ1Y3RvcihpbnB1dCkgPT09IFRleHQ7XG5jb25zdCBpc0V2ZW50ID0gaW5wdXQgPT4gaW5zdGFuY2VPZihpbnB1dCwgRXZlbnQpO1xuY29uc3QgaXNLZXlib2FyZEV2ZW50ID0gaW5wdXQgPT4gaW5zdGFuY2VPZihpbnB1dCwgS2V5Ym9hcmRFdmVudCk7XG5jb25zdCBpc0N1ZSA9IGlucHV0ID0+IGluc3RhbmNlT2YoaW5wdXQsIHdpbmRvdy5UZXh0VHJhY2tDdWUpIHx8IGluc3RhbmNlT2YoaW5wdXQsIHdpbmRvdy5WVFRDdWUpO1xuY29uc3QgaXNUcmFjayA9IGlucHV0ID0+IGluc3RhbmNlT2YoaW5wdXQsIFRleHRUcmFjaykgfHwgKCFpc051bGxPclVuZGVmaW5lZChpbnB1dCkgJiYgaXNTdHJpbmcoaW5wdXQua2luZCkpO1xuY29uc3QgaXNQcm9taXNlID0gaW5wdXQgPT4gaW5zdGFuY2VPZihpbnB1dCwgUHJvbWlzZSkgJiYgaXNGdW5jdGlvbihpbnB1dC50aGVuKTtcblxuY29uc3QgaXNFbXB0eSA9IGlucHV0ID0+XG4gIGlzTnVsbE9yVW5kZWZpbmVkKGlucHV0KSB8fFxuICAoKGlzU3RyaW5nKGlucHV0KSB8fCBpc0FycmF5KGlucHV0KSB8fCBpc05vZGVMaXN0KGlucHV0KSkgJiYgIWlucHV0Lmxlbmd0aCkgfHxcbiAgKGlzT2JqZWN0KGlucHV0KSAmJiAhT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCk7XG5cbmNvbnN0IGlzVXJsID0gaW5wdXQgPT4ge1xuICAvLyBBY2NlcHQgYSBVUkwgb2JqZWN0XG4gIGlmIChpbnN0YW5jZU9mKGlucHV0LCB3aW5kb3cuVVJMKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gTXVzdCBiZSBzdHJpbmcgZnJvbSBoZXJlXG4gIGlmICghaXNTdHJpbmcoaW5wdXQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gQWRkIHRoZSBwcm90b2NvbCBpZiByZXF1aXJlZFxuICBsZXQgc3RyaW5nID0gaW5wdXQ7XG4gIGlmICghaW5wdXQuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8ICFpbnB1dC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7XG4gICAgc3RyaW5nID0gYGh0dHA6Ly8ke2lucHV0fWA7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiAhaXNFbXB0eShuZXcgVVJMKHN0cmluZykuaG9zdG5hbWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG51bGxPclVuZGVmaW5lZDogaXNOdWxsT3JVbmRlZmluZWQsXG4gIG9iamVjdDogaXNPYmplY3QsXG4gIG51bWJlcjogaXNOdW1iZXIsXG4gIHN0cmluZzogaXNTdHJpbmcsXG4gIGJvb2xlYW46IGlzQm9vbGVhbixcbiAgZnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGFycmF5OiBpc0FycmF5LFxuICB3ZWFrTWFwOiBpc1dlYWtNYXAsXG4gIG5vZGVMaXN0OiBpc05vZGVMaXN0LFxuICBlbGVtZW50OiBpc0VsZW1lbnQsXG4gIHRleHROb2RlOiBpc1RleHROb2RlLFxuICBldmVudDogaXNFdmVudCxcbiAga2V5Ym9hcmRFdmVudDogaXNLZXlib2FyZEV2ZW50LFxuICBjdWU6IGlzQ3VlLFxuICB0cmFjazogaXNUcmFjayxcbiAgcHJvbWlzZTogaXNQcm9taXNlLFxuICB1cmw6IGlzVXJsLFxuICBlbXB0eTogaXNFbXB0eSxcbn07XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQW5pbWF0aW9uIHV0aWxzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgaXMgZnJvbSAnLi9pcyc7XG5cbmV4cG9ydCBjb25zdCB0cmFuc2l0aW9uRW5kRXZlbnQgPSAoKCkgPT4ge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXG4gIGNvbnN0IGV2ZW50cyA9IHtcbiAgICBXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgTW96VHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLFxuICAgIE9UcmFuc2l0aW9uOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxuICAgIHRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJyxcbiAgfTtcblxuICBjb25zdCB0eXBlID0gT2JqZWN0LmtleXMoZXZlbnRzKS5maW5kKGV2ZW50ID0+IGVsZW1lbnQuc3R5bGVbZXZlbnRdICE9PSB1bmRlZmluZWQpO1xuXG4gIHJldHVybiBpcy5zdHJpbmcodHlwZSkgPyBldmVudHNbdHlwZV0gOiBmYWxzZTtcbn0pKCk7XG5cbi8vIEZvcmNlIHJlcGFpbnQgb2YgZWxlbWVudFxuZXhwb3J0IGZ1bmN0aW9uIHJlcGFpbnQoZWxlbWVudCwgZGVsYXkpIHtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgZWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gICAgICBlbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBlbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIERvIG5vdGhpbmdcbiAgICB9XG4gIH0sIGRlbGF5KTtcbn1cbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBCcm93c2VyIHNuaWZmaW5nXG4vLyBVbmZvcnR1bmF0ZWx5LCBkdWUgdG8gbWl4ZWQgc3VwcG9ydCwgVUEgc25pZmZpbmcgaXMgcmVxdWlyZWRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IGJyb3dzZXIgPSB7XG4gIGlzSUU6IC8qIEBjY19vbiFAICovIGZhbHNlIHx8ICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlLFxuICBpc0VkZ2U6IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdFZGdlJyksXG4gIGlzV2Via2l0OiAnV2Via2l0QXBwZWFyYW5jZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmICEvRWRnZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcbiAgaXNJUGhvbmU6IC8oaVBob25lfGlQb2QpL2dpLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSxcbiAgaXNJb3M6IC8oaVBhZHxpUGhvbmV8aVBvZCkvZ2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgYnJvd3NlcjtcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBPYmplY3QgdXRpbHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBpcyBmcm9tICcuL2lzJztcblxuLy8gQ2xvbmUgbmVzdGVkIG9iamVjdHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZXAob2JqZWN0KSB7XG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xufVxuXG4vLyBHZXQgYSBuZXN0ZWQgdmFsdWUgaW4gYW4gb2JqZWN0XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVlcChvYmplY3QsIHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguc3BsaXQoJy4nKS5yZWR1Y2UoKG9iaiwga2V5KSA9PiBvYmogJiYgb2JqW2tleV0sIG9iamVjdCk7XG59XG5cbi8vIERlZXAgZXh0ZW5kIGRlc3RpbmF0aW9uIG9iamVjdCB3aXRoIE4gbW9yZSBvYmplY3RzXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCA9IHt9LCAuLi5zb3VyY2VzKSB7XG4gIGlmICghc291cmNlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgY29uc3Qgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuXG4gIGlmICghaXMub2JqZWN0KHNvdXJjZSkpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKGlzLm9iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgIGlmICghT2JqZWN0LmtleXModGFyZ2V0KS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiB7fSB9KTtcbiAgICAgIH1cblxuICAgICAgZXh0ZW5kKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBleHRlbmQodGFyZ2V0LCAuLi5zb3VyY2VzKTtcbn1cbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFbGVtZW50IHV0aWxzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgaXMgZnJvbSAnLi9pcyc7XG5pbXBvcnQgeyBleHRlbmQgfSBmcm9tICcuL29iamVjdHMnO1xuXG4vLyBXcmFwIGFuIGVsZW1lbnRcbmV4cG9ydCBmdW5jdGlvbiB3cmFwKGVsZW1lbnRzLCB3cmFwcGVyKSB7XG4gIC8vIENvbnZlcnQgYGVsZW1lbnRzYCB0byBhbiBhcnJheSwgaWYgbmVjZXNzYXJ5LlxuICBjb25zdCB0YXJnZXRzID0gZWxlbWVudHMubGVuZ3RoID8gZWxlbWVudHMgOiBbZWxlbWVudHNdO1xuXG4gIC8vIExvb3BzIGJhY2t3YXJkcyB0byBwcmV2ZW50IGhhdmluZyB0byBjbG9uZSB0aGUgd3JhcHBlciBvbiB0aGVcbiAgLy8gZmlyc3QgZWxlbWVudCAoc2VlIGBjaGlsZGAgYmVsb3cpLlxuICBBcnJheS5mcm9tKHRhcmdldHMpXG4gICAgLnJldmVyc2UoKVxuICAgIC5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2hpbGQgPSBpbmRleCA+IDAgPyB3cmFwcGVyLmNsb25lTm9kZSh0cnVlKSA6IHdyYXBwZXI7XG4gICAgICAvLyBDYWNoZSB0aGUgY3VycmVudCBwYXJlbnQgYW5kIHNpYmxpbmcuXG4gICAgICBjb25zdCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICBjb25zdCBzaWJsaW5nID0gZWxlbWVudC5uZXh0U2libGluZztcblxuICAgICAgLy8gV3JhcCB0aGUgZWxlbWVudCAoaXMgYXV0b21hdGljYWxseSByZW1vdmVkIGZyb20gaXRzIGN1cnJlbnRcbiAgICAgIC8vIHBhcmVudCkuXG4gICAgICBjaGlsZC5hcHBlbmRDaGlsZChlbGVtZW50KTtcblxuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFkIGEgc2libGluZywgaW5zZXJ0IHRoZSB3cmFwcGVyIGJlZm9yZVxuICAgICAgLy8gdGhlIHNpYmxpbmcgdG8gbWFpbnRhaW4gdGhlIEhUTUwgc3RydWN0dXJlOyBvdGhlcndpc2UsIGp1c3RcbiAgICAgIC8vIGFwcGVuZCBpdCB0byB0aGUgcGFyZW50LlxuICAgICAgaWYgKHNpYmxpbmcpIHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgc2libGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyBTZXQgYXR0cmlidXRlc1xuZXhwb3J0IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoZWxlbWVudCwgYXR0cmlidXRlcykge1xuICBpZiAoIWlzLmVsZW1lbnQoZWxlbWVudCkgfHwgaXMuZW1wdHkoYXR0cmlidXRlcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBBc3N1bWUgbnVsbCBhbmQgdW5kZWZpbmVkIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGxlZnQgb3V0LFxuICAvLyBTZXR0aW5nIHRoZW0gd291bGQgb3RoZXJ3aXNlIGNvbnZlcnQgdGhlbSB0byBcIm51bGxcIiBhbmQgXCJ1bmRlZmluZWRcIlxuICBPYmplY3QuZW50cmllcyhhdHRyaWJ1dGVzKVxuICAgIC5maWx0ZXIoKFssIHZhbHVlXSkgPT4gIWlzLm51bGxPclVuZGVmaW5lZCh2YWx1ZSkpXG4gICAgLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkpO1xufVxuXG4vLyBDcmVhdGUgYSBEb2N1bWVudEZyYWdtZW50XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0eXBlLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gIC8vIENyZWF0ZSBhIG5ldyA8ZWxlbWVudD5cbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG5cbiAgLy8gU2V0IGFsbCBwYXNzZWQgYXR0cmlidXRlc1xuICBpZiAoaXMub2JqZWN0KGF0dHJpYnV0ZXMpKSB7XG4gICAgc2V0QXR0cmlidXRlcyhlbGVtZW50LCBhdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIC8vIEFkZCB0ZXh0IG5vZGVcbiAgaWYgKGlzLnN0cmluZyh0ZXh0KSkge1xuICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gdGV4dDtcbiAgfVxuXG4gIC8vIFJldHVybiBidWlsdCBlbGVtZW50XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vLyBJbmFlcnQgYW4gZWxlbWVudCBhZnRlciBhbm90aGVyXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoZWxlbWVudCwgdGFyZ2V0KSB7XG4gIGlmICghaXMuZWxlbWVudChlbGVtZW50KSB8fCAhaXMuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHRhcmdldC5uZXh0U2libGluZyk7XG59XG5cbi8vIEluc2VydCBhIERvY3VtZW50RnJhZ21lbnRcbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRFbGVtZW50KHR5cGUsIHBhcmVudCwgYXR0cmlidXRlcywgdGV4dCkge1xuICBpZiAoIWlzLmVsZW1lbnQocGFyZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHBhcmVudC5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KHR5cGUsIGF0dHJpYnV0ZXMsIHRleHQpKTtcbn1cblxuLy8gUmVtb3ZlIGVsZW1lbnQocylcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKGlzLm5vZGVMaXN0KGVsZW1lbnQpIHx8IGlzLmFycmF5KGVsZW1lbnQpKSB7XG4gICAgQXJyYXkuZnJvbShlbGVtZW50KS5mb3JFYWNoKHJlbW92ZUVsZW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghaXMuZWxlbWVudChlbGVtZW50KSB8fCAhaXMuZWxlbWVudChlbGVtZW50LnBhcmVudE5vZGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xufVxuXG4vLyBSZW1vdmUgYWxsIGNoaWxkIGVsZW1lbnRzXG5leHBvcnQgZnVuY3Rpb24gZW1wdHlFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKCFpcy5lbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHsgbGVuZ3RoIH0gPSBlbGVtZW50LmNoaWxkTm9kZXM7XG5cbiAgd2hpbGUgKGxlbmd0aCA+IDApIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQubGFzdENoaWxkKTtcbiAgICBsZW5ndGggLT0gMTtcbiAgfVxufVxuXG4vLyBSZXBsYWNlIGVsZW1lbnRcbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlRWxlbWVudChuZXdDaGlsZCwgb2xkQ2hpbGQpIHtcbiAgaWYgKCFpcy5lbGVtZW50KG9sZENoaWxkKSB8fCAhaXMuZWxlbWVudChvbGRDaGlsZC5wYXJlbnROb2RlKSB8fCAhaXMuZWxlbWVudChuZXdDaGlsZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG9sZENoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG5cbiAgcmV0dXJuIG5ld0NoaWxkO1xufVxuXG4vLyBHZXQgYW4gYXR0cmlidXRlIG9iamVjdCBmcm9tIGEgc3RyaW5nIHNlbGVjdG9yXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3RvcihzZWwsIGV4aXN0aW5nQXR0cmlidXRlcykge1xuICAvLyBGb3IgZXhhbXBsZTpcbiAgLy8gJy50ZXN0JyB0byB7IGNsYXNzOiAndGVzdCcgfVxuICAvLyAnI3Rlc3QnIHRvIHsgaWQ6ICd0ZXN0JyB9XG4gIC8vICdbZGF0YS10ZXN0PVwidGVzdFwiXScgdG8geyAnZGF0YS10ZXN0JzogJ3Rlc3QnIH1cblxuICBpZiAoIWlzLnN0cmluZyhzZWwpIHx8IGlzLmVtcHR5KHNlbCkpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBjb25zdCBhdHRyaWJ1dGVzID0ge307XG4gIGNvbnN0IGV4aXN0aW5nID0gZXh0ZW5kKHt9LCBleGlzdGluZ0F0dHJpYnV0ZXMpO1xuXG4gIHNlbC5zcGxpdCgnLCcpLmZvckVhY2gocyA9PiB7XG4gICAgLy8gUmVtb3ZlIHdoaXRlc3BhY2VcbiAgICBjb25zdCBzZWxlY3RvciA9IHMudHJpbSgpO1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHNlbGVjdG9yLnJlcGxhY2UoJy4nLCAnJyk7XG4gICAgY29uc3Qgc3RyaXBwZWQgPSBzZWxlY3Rvci5yZXBsYWNlKC9bW1xcXV0vZywgJycpO1xuICAgIC8vIEdldCB0aGUgcGFydHMgYW5kIHZhbHVlXG4gICAgY29uc3QgcGFydHMgPSBzdHJpcHBlZC5zcGxpdCgnPScpO1xuICAgIGNvbnN0IFtrZXldID0gcGFydHM7XG4gICAgY29uc3QgdmFsdWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0ucmVwbGFjZSgvW1wiJ10vZywgJycpIDogJyc7XG4gICAgLy8gR2V0IHRoZSBmaXJzdCBjaGFyYWN0ZXJcbiAgICBjb25zdCBzdGFydCA9IHNlbGVjdG9yLmNoYXJBdCgwKTtcblxuICAgIHN3aXRjaCAoc3RhcnQpIHtcbiAgICAgIGNhc2UgJy4nOlxuICAgICAgICAvLyBBZGQgdG8gZXhpc3RpbmcgY2xhc3NuYW1lXG4gICAgICAgIGlmIChpcy5zdHJpbmcoZXhpc3RpbmcuY2xhc3MpKSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGAke2V4aXN0aW5nLmNsYXNzfSAke2NsYXNzTmFtZX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBjbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJyMnOlxuICAgICAgICAvLyBJRCBzZWxlY3RvclxuICAgICAgICBhdHRyaWJ1dGVzLmlkID0gc2VsZWN0b3IucmVwbGFjZSgnIycsICcnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ1snOlxuICAgICAgICAvLyBBdHRyaWJ1dGUgc2VsZWN0b3JcbiAgICAgICAgYXR0cmlidXRlc1trZXldID0gdmFsdWU7XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGV4dGVuZChleGlzdGluZywgYXR0cmlidXRlcyk7XG59XG5cbi8vIFRvZ2dsZSBoaWRkZW5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVIaWRkZW4oZWxlbWVudCwgaGlkZGVuKSB7XG4gIGlmICghaXMuZWxlbWVudChlbGVtZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBoaWRlID0gaGlkZGVuO1xuXG4gIGlmICghaXMuYm9vbGVhbihoaWRlKSkge1xuICAgIGhpZGUgPSAhZWxlbWVudC5oaWRkZW47XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgZWxlbWVudC5oaWRkZW4gPSBoaWRlO1xufVxuXG4vLyBNaXJyb3IgRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlLCB3aXRoIElFIGNvbXBhdGliaWxpdHkgZm9yIFwiZm9yY2VcIiBhcmd1bWVudFxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSwgZm9yY2UpIHtcbiAgaWYgKGlzLm5vZGVMaXN0KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudCkubWFwKGUgPT4gdG9nZ2xlQ2xhc3MoZSwgY2xhc3NOYW1lLCBmb3JjZSkpO1xuICB9XG5cbiAgaWYgKGlzLmVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICBsZXQgbWV0aG9kID0gJ3RvZ2dsZSc7XG4gICAgaWYgKHR5cGVvZiBmb3JjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1ldGhvZCA9IGZvcmNlID8gJ2FkZCcgOiAncmVtb3ZlJztcbiAgICB9XG5cbiAgICBlbGVtZW50LmNsYXNzTGlzdFttZXRob2RdKGNsYXNzTmFtZSk7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIEhhcyBjbGFzcyBuYW1lXG5leHBvcnQgZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIHJldHVybiBpcy5lbGVtZW50KGVsZW1lbnQpICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG59XG5cbi8vIEVsZW1lbnQgbWF0Y2hlcyBzZWxlY3RvclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXMoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgY29uc3QgeyBwcm90b3R5cGUgfSA9IEVsZW1lbnQ7XG5cbiAgZnVuY3Rpb24gbWF0Y2goKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmluY2x1ZGVzKHRoaXMpO1xuICB9XG5cbiAgY29uc3QgbWV0aG9kID1cbiAgICBwcm90b3R5cGUubWF0Y2hlcyB8fFxuICAgIHByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICBwcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgcHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgbWF0Y2g7XG5cbiAgcmV0dXJuIG1ldGhvZC5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKTtcbn1cblxuLy8gQ2xvc2VzdCBhbmNlc3RvciBlbGVtZW50IG1hdGNoaW5nIHNlbGVjdG9yIChhbHNvIHRlc3RzIGVsZW1lbnQgaXRzZWxmKVxuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3QoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgY29uc3QgeyBwcm90b3R5cGUgfSA9IEVsZW1lbnQ7XG5cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvY2xvc2VzdCNQb2x5ZmlsbFxuICBmdW5jdGlvbiBjbG9zZXN0RWxlbWVudCgpIHtcbiAgICBsZXQgZWwgPSB0aGlzO1xuXG4gICAgZG8ge1xuICAgICAgaWYgKG1hdGNoZXMubWF0Y2hlcyhlbCwgc2VsZWN0b3IpKSByZXR1cm4gZWw7XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZTtcbiAgICB9IHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBtZXRob2QgPSBwcm90b3R5cGUuY2xvc2VzdCB8fCBjbG9zZXN0RWxlbWVudDtcblxuICByZXR1cm4gbWV0aG9kLmNhbGwoZWxlbWVudCwgc2VsZWN0b3IpO1xufVxuXG4vLyBGaW5kIGFsbCBlbGVtZW50c1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbn1cblxuLy8gRmluZCBhIHNpbmdsZSBlbGVtZW50XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudChzZWxlY3Rvcikge1xuICByZXR1cm4gdGhpcy5lbGVtZW50cy5jb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbi8vIFNldCBmb2N1cyBhbmQgdGFiIGZvY3VzIGNsYXNzXG5leHBvcnQgZnVuY3Rpb24gc2V0Rm9jdXMoZWxlbWVudCA9IG51bGwsIHRhYkZvY3VzID0gZmFsc2UpIHtcbiAgaWYgKCFpcy5lbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU2V0IHJlZ3VsYXIgZm9jdXNcbiAgZWxlbWVudC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG5cbiAgLy8gSWYgd2Ugd2FudCB0byBtaW1pYyBrZXlib2FyZCBmb2N1cyB2aWEgdGFiXG4gIGlmICh0YWJGb2N1cykge1xuICAgIHRvZ2dsZUNsYXNzKGVsZW1lbnQsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXMpO1xuICB9XG59XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBzdXBwb3J0IGNoZWNrc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgdHJhbnNpdGlvbkVuZEV2ZW50IH0gZnJvbSAnLi91dGlscy9hbmltYXRpb24nO1xuaW1wb3J0IGJyb3dzZXIgZnJvbSAnLi91dGlscy9icm93c2VyJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuL3V0aWxzL2VsZW1lbnRzJztcbmltcG9ydCBpcyBmcm9tICcuL3V0aWxzL2lzJztcblxuLy8gRGVmYXVsdCBjb2RlY3MgZm9yIGNoZWNraW5nIG1pbWV0eXBlIHN1cHBvcnRcbmNvbnN0IGRlZmF1bHRDb2RlY3MgPSB7XG4gICdhdWRpby9vZ2cnOiAndm9yYmlzJyxcbiAgJ2F1ZGlvL3dhdic6ICcxJyxcbiAgJ3ZpZGVvL3dlYm0nOiAndnA4LCB2b3JiaXMnLFxuICAndmlkZW8vbXA0JzogJ2F2YzEuNDJFMDFFLCBtcDRhLjQwLjInLFxuICAndmlkZW8vb2dnJzogJ3RoZW9yYScsXG59O1xuXG4vLyBDaGVjayBmb3IgZmVhdHVyZSBzdXBwb3J0XG5jb25zdCBzdXBwb3J0ID0ge1xuICAvLyBCYXNpYyBzdXBwb3J0XG4gIGF1ZGlvOiAnY2FuUGxheVR5cGUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyksXG4gIHZpZGVvOiAnY2FuUGxheVR5cGUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyksXG5cbiAgLy8gQ2hlY2sgZm9yIHN1cHBvcnRcbiAgLy8gQmFzaWMgZnVuY3Rpb25hbGl0eSB2cyBmdWxsIFVJXG4gIGNoZWNrKHR5cGUsIHByb3ZpZGVyLCBwbGF5c2lubGluZSkge1xuICAgIGNvbnN0IGNhblBsYXlJbmxpbmUgPSBicm93c2VyLmlzSVBob25lICYmIHBsYXlzaW5saW5lICYmIHN1cHBvcnQucGxheXNpbmxpbmU7XG4gICAgY29uc3QgYXBpID0gc3VwcG9ydFt0eXBlXSB8fCBwcm92aWRlciAhPT0gJ2h0bWw1JztcbiAgICBjb25zdCB1aSA9IGFwaSAmJiBzdXBwb3J0LnJhbmdlSW5wdXQgJiYgKHR5cGUgIT09ICd2aWRlbycgfHwgIWJyb3dzZXIuaXNJUGhvbmUgfHwgY2FuUGxheUlubGluZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYXBpLFxuICAgICAgdWksXG4gICAgfTtcbiAgfSxcblxuICAvLyBQaWN0dXJlLWluLXBpY3R1cmUgc3VwcG9ydFxuICAvLyBTYWZhcmkgJiBDaHJvbWUgb25seSBjdXJyZW50bHlcbiAgcGlwOiAoKCkgPT4ge1xuICAgIGlmIChicm93c2VyLmlzSVBob25lKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gU2FmYXJpXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vd2Via2l0anMvYWRkaW5nX3BpY3R1cmVfaW5fcGljdHVyZV90b195b3VyX3NhZmFyaV9tZWRpYV9jb250cm9sc1xuICAgIGlmIChpcy5mdW5jdGlvbihjcmVhdGVFbGVtZW50KCd2aWRlbycpLndlYmtpdFNldFByZXNlbnRhdGlvbk1vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBDaHJvbWVcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE4LzEwL3dhdGNoLXZpZGVvLXVzaW5nLXBpY3R1cmUtaW4tcGljdHVyZVxuICAgIGlmIChkb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRW5hYmxlZCAmJiAhY3JlYXRlRWxlbWVudCgndmlkZW8nKS5kaXNhYmxlUGljdHVyZUluUGljdHVyZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KSgpLFxuXG4gIC8vIEFpcnBsYXkgc3VwcG9ydFxuICAvLyBTYWZhcmkgb25seSBjdXJyZW50bHlcbiAgYWlycGxheTogaXMuZnVuY3Rpb24od2luZG93LldlYktpdFBsYXliYWNrVGFyZ2V0QXZhaWxhYmlsaXR5RXZlbnQpLFxuXG4gIC8vIElubGluZSBwbGF5YmFjayBzdXBwb3J0XG4gIC8vIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzY3ODQvbmV3LXZpZGVvLXBvbGljaWVzLWZvci1pb3MvXG4gIHBsYXlzaW5saW5lOiAncGxheXNJbmxpbmUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyksXG5cbiAgLy8gQ2hlY2sgZm9yIG1pbWUgdHlwZSBzdXBwb3J0IGFnYWluc3QgYSBwbGF5ZXIgaW5zdGFuY2VcbiAgLy8gQ3JlZGl0czogaHR0cDovL2RpdmVpbnRvaHRtbDUuaW5mby9ldmVyeXRoaW5nLmh0bWxcbiAgLy8gUmVsYXRlZDogaHR0cDovL3d3dy5sZWFuYmFja3BsYXllci5jb20vdGVzdC9oNW10Lmh0bWxcbiAgbWltZShpbnB1dCkge1xuICAgIGlmIChpcy5lbXB0eShpbnB1dCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBbbWVkaWFUeXBlXSA9IGlucHV0LnNwbGl0KCcvJyk7XG4gICAgbGV0IHR5cGUgPSBpbnB1dDtcblxuICAgIC8vIFZlcmlmeSB3ZSdyZSB1c2luZyBIVE1MNSBhbmQgdGhlcmUncyBubyBtZWRpYSB0eXBlIG1pc21hdGNoXG4gICAgaWYgKCF0aGlzLmlzSFRNTDUgfHwgbWVkaWFUeXBlICE9PSB0aGlzLnR5cGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY29kZWMgaWYgcmVxdWlyZWRcbiAgICBpZiAoT2JqZWN0LmtleXMoZGVmYXVsdENvZGVjcykuaW5jbHVkZXModHlwZSkpIHtcbiAgICAgIHR5cGUgKz0gYDsgY29kZWNzPVwiJHtkZWZhdWx0Q29kZWNzW2lucHV0XX1cImA7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBCb29sZWFuKHR5cGUgJiYgdGhpcy5tZWRpYS5jYW5QbGF5VHlwZSh0eXBlKS5yZXBsYWNlKC9uby8sICcnKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvLyBDaGVjayBmb3IgdGV4dFRyYWNrcyBzdXBwb3J0XG4gIHRleHRUcmFja3M6ICd0ZXh0VHJhY2tzJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpLFxuXG4gIC8vIDxpbnB1dCB0eXBlPVwicmFuZ2VcIj4gU2xpZGVyc1xuICByYW5nZUlucHV0OiAoKCkgPT4ge1xuICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICByYW5nZS50eXBlID0gJ3JhbmdlJztcbiAgICByZXR1cm4gcmFuZ2UudHlwZSA9PT0gJ3JhbmdlJztcbiAgfSkoKSxcblxuICAvLyBUb3VjaFxuICAvLyBOT1RFOiBSZW1lbWJlciBhIGRldmljZSBjYW4gYmUgbW91c2UgKyB0b3VjaCBlbmFibGVkIHNvIHdlIGNoZWNrIG9uIGZpcnN0IHRvdWNoIGV2ZW50XG4gIHRvdWNoOiAnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG5cbiAgLy8gRGV0ZWN0IHRyYW5zaXRpb25zIHN1cHBvcnRcbiAgdHJhbnNpdGlvbnM6IHRyYW5zaXRpb25FbmRFdmVudCAhPT0gZmFsc2UsXG5cbiAgLy8gUmVkdWNlZCBtb3Rpb24gaU9TICYgTWFjT1Mgc2V0dGluZ1xuICAvLyBodHRwczovL3dlYmtpdC5vcmcvYmxvZy83NTUxL3Jlc3BvbnNpdmUtZGVzaWduLWZvci1tb3Rpb24vXG4gIHJlZHVjZWRNb3Rpb246ICdtYXRjaE1lZGlhJyBpbiB3aW5kb3cgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uKScpLm1hdGNoZXMsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzdXBwb3J0O1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEV2ZW50IHV0aWxzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgaXMgZnJvbSAnLi9pcyc7XG5cbi8vIENoZWNrIGZvciBwYXNzaXZlIGV2ZW50IGxpc3RlbmVyIHN1cHBvcnRcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL0V2ZW50TGlzdGVuZXJPcHRpb25zL2Jsb2IvZ2gtcGFnZXMvZXhwbGFpbmVyLm1kXG4vLyBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PU5QTTYxNzJKMjJnXG5jb25zdCBzdXBwb3J0c1Bhc3NpdmVMaXN0ZW5lcnMgPSAoKCkgPT4ge1xuICAvLyBUZXN0IHZpYSBhIGdldHRlciBpbiB0aGUgb3B0aW9ucyBvYmplY3QgdG8gc2VlIGlmIHRoZSBwYXNzaXZlIHByb3BlcnR5IGlzIGFjY2Vzc2VkXG4gIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0aW9ucyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIERvIG5vdGhpbmdcbiAgfVxuXG4gIHJldHVybiBzdXBwb3J0ZWQ7XG59KSgpO1xuXG4vLyBUb2dnbGUgZXZlbnQgbGlzdGVuZXJcbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVMaXN0ZW5lcihlbGVtZW50LCBldmVudCwgY2FsbGJhY2ssIHRvZ2dsZSA9IGZhbHNlLCBwYXNzaXZlID0gdHJ1ZSwgY2FwdHVyZSA9IGZhbHNlKSB7XG4gIC8vIEJhaWwgaWYgbm8gZWxlbWVudCwgZXZlbnQsIG9yIGNhbGxiYWNrXG4gIGlmICghZWxlbWVudCB8fCAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBlbGVtZW50KSB8fCBpcy5lbXB0eShldmVudCkgfHwgIWlzLmZ1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEFsbG93IG11bHRpcGxlIGV2ZW50c1xuICBjb25zdCBldmVudHMgPSBldmVudC5zcGxpdCgnICcpO1xuICAvLyBCdWlsZCBvcHRpb25zXG4gIC8vIERlZmF1bHQgdG8ganVzdCB0aGUgY2FwdHVyZSBib29sZWFuIGZvciBicm93c2VycyB3aXRoIG5vIHBhc3NpdmUgbGlzdGVuZXIgc3VwcG9ydFxuICBsZXQgb3B0aW9ucyA9IGNhcHR1cmU7XG5cbiAgLy8gSWYgcGFzc2l2ZSBldmVudHMgbGlzdGVuZXJzIGFyZSBzdXBwb3J0ZWRcbiAgaWYgKHN1cHBvcnRzUGFzc2l2ZUxpc3RlbmVycykge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICAvLyBXaGV0aGVyIHRoZSBsaXN0ZW5lciBjYW4gYmUgcGFzc2l2ZSAoaS5lLiBkZWZhdWx0IG5ldmVyIHByZXZlbnRlZClcbiAgICAgIHBhc3NpdmUsXG4gICAgICAvLyBXaGV0aGVyIHRoZSBsaXN0ZW5lciBpcyBhIGNhcHR1cmluZyBsaXN0ZW5lciBvciBub3RcbiAgICAgIGNhcHR1cmUsXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIGEgc2luZ2xlIG5vZGUgaXMgcGFzc2VkLCBiaW5kIHRoZSBldmVudCBsaXN0ZW5lclxuICBldmVudHMuZm9yRWFjaCh0eXBlID0+IHtcbiAgICBpZiAodGhpcyAmJiB0aGlzLmV2ZW50TGlzdGVuZXJzICYmIHRvZ2dsZSkge1xuICAgICAgLy8gQ2FjaGUgZXZlbnQgbGlzdGVuZXJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMucHVzaCh7IGVsZW1lbnQsIHR5cGUsIGNhbGxiYWNrLCBvcHRpb25zIH0pO1xuICAgIH1cblxuICAgIGVsZW1lbnRbdG9nZ2xlID8gJ2FkZEV2ZW50TGlzdGVuZXInIDogJ3JlbW92ZUV2ZW50TGlzdGVuZXInXSh0eXBlLCBjYWxsYmFjaywgb3B0aW9ucyk7XG4gIH0pO1xufVxuXG4vLyBCaW5kIGV2ZW50IGhhbmRsZXJcbmV4cG9ydCBmdW5jdGlvbiBvbihlbGVtZW50LCBldmVudHMgPSAnJywgY2FsbGJhY2ssIHBhc3NpdmUgPSB0cnVlLCBjYXB0dXJlID0gZmFsc2UpIHtcbiAgdG9nZ2xlTGlzdGVuZXIuY2FsbCh0aGlzLCBlbGVtZW50LCBldmVudHMsIGNhbGxiYWNrLCB0cnVlLCBwYXNzaXZlLCBjYXB0dXJlKTtcbn1cblxuLy8gVW5iaW5kIGV2ZW50IGhhbmRsZXJcbmV4cG9ydCBmdW5jdGlvbiBvZmYoZWxlbWVudCwgZXZlbnRzID0gJycsIGNhbGxiYWNrLCBwYXNzaXZlID0gdHJ1ZSwgY2FwdHVyZSA9IGZhbHNlKSB7XG4gIHRvZ2dsZUxpc3RlbmVyLmNhbGwodGhpcywgZWxlbWVudCwgZXZlbnRzLCBjYWxsYmFjaywgZmFsc2UsIHBhc3NpdmUsIGNhcHR1cmUpO1xufVxuXG4vLyBCaW5kIG9uY2Utb25seSBldmVudCBoYW5kbGVyXG5leHBvcnQgZnVuY3Rpb24gb25jZShlbGVtZW50LCBldmVudHMgPSAnJywgY2FsbGJhY2ssIHBhc3NpdmUgPSB0cnVlLCBjYXB0dXJlID0gZmFsc2UpIHtcbiAgY29uc3Qgb25jZUNhbGxiYWNrID0gKC4uLmFyZ3MpID0+IHtcbiAgICBvZmYoZWxlbWVudCwgZXZlbnRzLCBvbmNlQ2FsbGJhY2ssIHBhc3NpdmUsIGNhcHR1cmUpO1xuICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuXG4gIHRvZ2dsZUxpc3RlbmVyLmNhbGwodGhpcywgZWxlbWVudCwgZXZlbnRzLCBvbmNlQ2FsbGJhY2ssIHRydWUsIHBhc3NpdmUsIGNhcHR1cmUpO1xufVxuXG4vLyBUcmlnZ2VyIGV2ZW50XG5leHBvcnQgZnVuY3Rpb24gdHJpZ2dlckV2ZW50KGVsZW1lbnQsIHR5cGUgPSAnJywgYnViYmxlcyA9IGZhbHNlLCBkZXRhaWwgPSB7fSkge1xuICAvLyBCYWlsIGlmIG5vIGVsZW1lbnRcbiAgaWYgKCFpcy5lbGVtZW50KGVsZW1lbnQpIHx8IGlzLmVtcHR5KHR5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCB0aGUgZXZlbnRcbiAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwge1xuICAgIGJ1YmJsZXMsXG4gICAgZGV0YWlsOiB7IC4uLmRldGFpbCwgcGx5cjogdGhpcyB9LFxuICB9KTtcblxuICAvLyBEaXNwYXRjaCB0aGUgZXZlbnRcbiAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuLy8gVW5iaW5kIGFsbCBjYWNoZWQgZXZlbnQgbGlzdGVuZXJzXG5leHBvcnQgZnVuY3Rpb24gdW5iaW5kTGlzdGVuZXJzKCkge1xuICBpZiAodGhpcyAmJiB0aGlzLmV2ZW50TGlzdGVuZXJzKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgeyBlbGVtZW50LCB0eXBlLCBjYWxsYmFjaywgb3B0aW9ucyB9ID0gaXRlbTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgb3B0aW9ucyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzID0gW107XG4gIH1cbn1cblxuLy8gUnVuIG1ldGhvZCB3aGVuIC8gaWYgcGxheWVyIGlzIHJlYWR5XG5leHBvcnQgZnVuY3Rpb24gcmVhZHkoKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+XG4gICAgdGhpcy5yZWFkeSA/IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkgOiBvbi5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCAncmVhZHknLCByZXNvbHZlKSxcbiAgKS50aGVuKCgpID0+IHt9KTtcbn1cbiIsImltcG9ydCBpcyBmcm9tICcuL2lzJztcbi8qKlxuICogU2lsZW5jZSBhIFByb21pc2UtbGlrZSBvYmplY3QuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgYXZvaWRpbmcgbm9uLWhhcm1mdWwsIGJ1dCBwb3RlbnRpYWxseSBjb25mdXNpbmcgXCJ1bmNhdWdodFxuICogcGxheSBwcm9taXNlXCIgcmVqZWN0aW9uIGVycm9yIG1lc3NhZ2VzLlxuICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZSBBbiBvYmplY3QgdGhhdCBtYXkgb3IgbWF5IG5vdCBiZSBgUHJvbWlzZWAtbGlrZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbGVuY2VQcm9taXNlKHZhbHVlKSB7XG4gIGlmIChpcy5wcm9taXNlKHZhbHVlKSkge1xuICAgIHZhbHVlLnRoZW4obnVsbCwgKCkgPT4ge30pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgc2lsZW5jZVByb21pc2UgfTtcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTdHlsZSB1dGlsc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGlzIGZyb20gJy4vaXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSYXRpbyhpbnB1dCkge1xuICBpZiAoIWlzLmFycmF5KGlucHV0KSAmJiAoIWlzLnN0cmluZyhpbnB1dCkgfHwgIWlucHV0LmluY2x1ZGVzKCc6JykpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgcmF0aW8gPSBpcy5hcnJheShpbnB1dCkgPyBpbnB1dCA6IGlucHV0LnNwbGl0KCc6Jyk7XG5cbiAgcmV0dXJuIHJhdGlvLm1hcChOdW1iZXIpLmV2ZXJ5KGlzLm51bWJlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VBc3BlY3RSYXRpbyhyYXRpbykge1xuICBpZiAoIWlzLmFycmF5KHJhdGlvKSB8fCAhcmF0aW8uZXZlcnkoaXMubnVtYmVyKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgW3dpZHRoLCBoZWlnaHRdID0gcmF0aW87XG4gIGNvbnN0IGdldERpdmlkZXIgPSAodywgaCkgPT4gKGggPT09IDAgPyB3IDogZ2V0RGl2aWRlcihoLCB3ICUgaCkpO1xuICBjb25zdCBkaXZpZGVyID0gZ2V0RGl2aWRlcih3aWR0aCwgaGVpZ2h0KTtcblxuICByZXR1cm4gW3dpZHRoIC8gZGl2aWRlciwgaGVpZ2h0IC8gZGl2aWRlcl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBc3BlY3RSYXRpbyhpbnB1dCkge1xuICBjb25zdCBwYXJzZSA9IHJhdGlvID0+ICh2YWxpZGF0ZVJhdGlvKHJhdGlvKSA/IHJhdGlvLnNwbGl0KCc6JykubWFwKE51bWJlcikgOiBudWxsKTtcbiAgLy8gVHJ5IHByb3ZpZGVkIHJhdGlvXG4gIGxldCByYXRpbyA9IHBhcnNlKGlucHV0KTtcblxuICAvLyBHZXQgZnJvbSBjb25maWdcbiAgaWYgKHJhdGlvID09PSBudWxsKSB7XG4gICAgcmF0aW8gPSBwYXJzZSh0aGlzLmNvbmZpZy5yYXRpbyk7XG4gIH1cblxuICAvLyBHZXQgZnJvbSBlbWJlZFxuICBpZiAocmF0aW8gPT09IG51bGwgJiYgIWlzLmVtcHR5KHRoaXMuZW1iZWQpICYmIGlzLmFycmF5KHRoaXMuZW1iZWQucmF0aW8pKSB7XG4gICAgKHsgcmF0aW8gfSA9IHRoaXMuZW1iZWQpO1xuICB9XG5cbiAgLy8gR2V0IGZyb20gSFRNTDUgdmlkZW9cbiAgaWYgKHJhdGlvID09PSBudWxsICYmIHRoaXMuaXNIVE1MNSkge1xuICAgIGNvbnN0IHsgdmlkZW9XaWR0aCwgdmlkZW9IZWlnaHQgfSA9IHRoaXMubWVkaWE7XG4gICAgcmF0aW8gPSByZWR1Y2VBc3BlY3RSYXRpbyhbdmlkZW9XaWR0aCwgdmlkZW9IZWlnaHRdKTtcbiAgfVxuXG4gIHJldHVybiByYXRpbztcbn1cblxuLy8gU2V0IGFzcGVjdCByYXRpbyBmb3IgcmVzcG9uc2l2ZSBjb250YWluZXJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBc3BlY3RSYXRpbyhpbnB1dCkge1xuICBpZiAoIXRoaXMuaXNWaWRlbykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIGNvbnN0IHsgd3JhcHBlciB9ID0gdGhpcy5lbGVtZW50cztcbiAgY29uc3QgcmF0aW8gPSBnZXRBc3BlY3RSYXRpby5jYWxsKHRoaXMsIGlucHV0KTtcbiAgY29uc3QgW3csIGhdID0gaXMuYXJyYXkocmF0aW8pID8gcmF0aW8gOiBbMCwgMF07XG4gIGNvbnN0IHBhZGRpbmcgPSAoMTAwIC8gdykgKiBoO1xuXG4gIHdyYXBwZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke3BhZGRpbmd9JWA7XG5cbiAgLy8gRm9yIFZpbWVvIHdlIGhhdmUgYW4gZXh0cmEgPGRpdj4gdG8gaGlkZSB0aGUgc3RhbmRhcmQgY29udHJvbHMgYW5kIFVJXG4gIGlmICh0aGlzLmlzVmltZW8gJiYgIXRoaXMuY29uZmlnLnZpbWVvLnByZW1pdW0gJiYgdGhpcy5zdXBwb3J0ZWQudWkpIHtcbiAgICBjb25zdCBoZWlnaHQgPSAoMTAwIC8gdGhpcy5tZWRpYS5vZmZzZXRXaWR0aCkgKiBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lZGlhKS5wYWRkaW5nQm90dG9tLCAxMCk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKGhlaWdodCAtIHBhZGRpbmcpIC8gKGhlaWdodCAvIDUwKTtcblxuICAgIHRoaXMubWVkaWEuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoLSR7b2Zmc2V0fSUpYDtcbiAgfSBlbHNlIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC50b2dnbGUodGhpcy5jb25maWcuY2xhc3NOYW1lcy52aWRlb0ZpeGVkUmF0aW8sIHJhdGlvICE9PSBudWxsKTtcbiAgfVxuXG4gIHJldHVybiB7IHBhZGRpbmcsIHJhdGlvIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgc2V0QXNwZWN0UmF0aW8gfTtcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQbHlyIEhUTUw1IGhlbHBlcnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBzdXBwb3J0IGZyb20gJy4vc3VwcG9ydCc7XG5pbXBvcnQgeyByZW1vdmVFbGVtZW50IH0gZnJvbSAnLi91dGlscy9lbGVtZW50cyc7XG5pbXBvcnQgeyB0cmlnZ2VyRXZlbnQgfSBmcm9tICcuL3V0aWxzL2V2ZW50cyc7XG5pbXBvcnQgaXMgZnJvbSAnLi91dGlscy9pcyc7XG5pbXBvcnQgeyBzaWxlbmNlUHJvbWlzZSB9IGZyb20gJy4vdXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgeyBzZXRBc3BlY3RSYXRpbyB9IGZyb20gJy4vdXRpbHMvc3R5bGUnO1xuXG5jb25zdCBodG1sNSA9IHtcbiAgZ2V0U291cmNlcygpIHtcbiAgICBpZiAoIXRoaXMuaXNIVE1MNSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNvdXJjZXMgPSBBcnJheS5mcm9tKHRoaXMubWVkaWEucXVlcnlTZWxlY3RvckFsbCgnc291cmNlJykpO1xuXG4gICAgLy8gRmlsdGVyIG91dCB1bnN1cHBvcnRlZCBzb3VyY2VzIChpZiB0eXBlIGlzIHNwZWNpZmllZClcbiAgICByZXR1cm4gc291cmNlcy5maWx0ZXIoc291cmNlID0+IHtcbiAgICAgIGNvbnN0IHR5cGUgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG5cbiAgICAgIGlmIChpcy5lbXB0eSh0eXBlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN1cHBvcnQubWltZS5jYWxsKHRoaXMsIHR5cGUpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIEdldCBxdWFsaXR5IGxldmVsc1xuICBnZXRRdWFsaXR5T3B0aW9ucygpIHtcbiAgICAvLyBXaGV0aGVyIHdlJ3JlIGZvcmNpbmcgYWxsIG9wdGlvbnMgKGUuZy4gZm9yIHN0cmVhbWluZylcbiAgICBpZiAodGhpcy5jb25maWcucXVhbGl0eS5mb3JjZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5xdWFsaXR5Lm9wdGlvbnM7XG4gICAgfVxuXG4gICAgLy8gR2V0IHNpemVzIGZyb20gPHNvdXJjZT4gZWxlbWVudHNcbiAgICByZXR1cm4gaHRtbDUuZ2V0U291cmNlc1xuICAgICAgLmNhbGwodGhpcylcbiAgICAgIC5tYXAoc291cmNlID0+IE51bWJlcihzb3VyY2UuZ2V0QXR0cmlidXRlKCdzaXplJykpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgfSxcblxuICBzZXR1cCgpIHtcbiAgICBpZiAoIXRoaXMuaXNIVE1MNSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYXllciA9IHRoaXM7XG5cbiAgICAvLyBTZXQgc3BlZWQgb3B0aW9ucyBmcm9tIGNvbmZpZ1xuICAgIHBsYXllci5vcHRpb25zLnNwZWVkID0gcGxheWVyLmNvbmZpZy5zcGVlZC5vcHRpb25zO1xuXG4gICAgLy8gU2V0IGFzcGVjdCByYXRpbyBpZiBmaXhlZFxuICAgIGlmICghaXMuZW1wdHkodGhpcy5jb25maWcucmF0aW8pKSB7XG4gICAgICBzZXRBc3BlY3RSYXRpby5jYWxsKHBsYXllcik7XG4gICAgfVxuXG4gICAgLy8gUXVhbGl0eVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdxdWFsaXR5Jywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICAvLyBHZXQgc291cmNlc1xuICAgICAgICBjb25zdCBzb3VyY2VzID0gaHRtbDUuZ2V0U291cmNlcy5jYWxsKHBsYXllcik7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZXMuZmluZChzID0+IHMuZ2V0QXR0cmlidXRlKCdzcmMnKSA9PT0gcGxheWVyLnNvdXJjZSk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHNpemUsIGlmIG1hdGNoIGlzIGZvdW5kXG4gICAgICAgIHJldHVybiBzb3VyY2UgJiYgTnVtYmVyKHNvdXJjZS5nZXRBdHRyaWJ1dGUoJ3NpemUnKSk7XG4gICAgICB9LFxuICAgICAgc2V0KGlucHV0KSB7XG4gICAgICAgIGlmIChwbGF5ZXIucXVhbGl0eSA9PT0gaW5wdXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSdyZSB1c2luZyBhbiBhbiBleHRlcm5hbCBoYW5kbGVyLi4uXG4gICAgICAgIGlmIChwbGF5ZXIuY29uZmlnLnF1YWxpdHkuZm9yY2VkICYmIGlzLmZ1bmN0aW9uKHBsYXllci5jb25maWcucXVhbGl0eS5vbkNoYW5nZSkpIHtcbiAgICAgICAgICBwbGF5ZXIuY29uZmlnLnF1YWxpdHkub25DaGFuZ2UoaW5wdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEdldCBzb3VyY2VzXG4gICAgICAgICAgY29uc3Qgc291cmNlcyA9IGh0bWw1LmdldFNvdXJjZXMuY2FsbChwbGF5ZXIpO1xuICAgICAgICAgIC8vIEdldCBmaXJzdCBtYXRjaCBmb3IgcmVxdWVzdGVkIHNpemVcbiAgICAgICAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLmZpbmQocyA9PiBOdW1iZXIocy5nZXRBdHRyaWJ1dGUoJ3NpemUnKSkgPT09IGlucHV0KTtcblxuICAgICAgICAgIC8vIE5vIG1hdGNoaW5nIHNvdXJjZSBmb3VuZFxuICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gR2V0IGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICBjb25zdCB7IGN1cnJlbnRUaW1lLCBwYXVzZWQsIHByZWxvYWQsIHJlYWR5U3RhdGUsIHBsYXliYWNrUmF0ZSB9ID0gcGxheWVyLm1lZGlhO1xuXG4gICAgICAgICAgLy8gU2V0IG5ldyBzb3VyY2VcbiAgICAgICAgICBwbGF5ZXIubWVkaWEuc3JjID0gc291cmNlLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cbiAgICAgICAgICAvLyBQcmV2ZW50IGxvYWRpbmcgaWYgcHJlbG9hZD1cIm5vbmVcIiBhbmQgdGhlIGN1cnJlbnQgc291cmNlIGlzbid0IGxvYWRlZCAoIzEwNDQpXG4gICAgICAgICAgaWYgKHByZWxvYWQgIT09ICdub25lJyB8fCByZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAvLyBSZXN0b3JlIHRpbWVcbiAgICAgICAgICAgIHBsYXllci5vbmNlKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgICAgICAgcGxheWVyLnNwZWVkID0gcGxheWJhY2tSYXRlO1xuICAgICAgICAgICAgICBwbGF5ZXIuY3VycmVudFRpbWUgPSBjdXJyZW50VGltZTtcblxuICAgICAgICAgICAgICAvLyBSZXN1bWUgcGxheWluZ1xuICAgICAgICAgICAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXllci5wbGF5KCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTG9hZCBuZXcgc291cmNlXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEubG9hZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncXVhbGl0eWNoYW5nZScsIGZhbHNlLCB7XG4gICAgICAgICAgcXVhbGl0eTogaW5wdXQsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcblxuICAvLyBDYW5jZWwgY3VycmVudCBuZXR3b3JrIHJlcXVlc3RzXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvMTc0XG4gIGNhbmNlbFJlcXVlc3RzKCkge1xuICAgIGlmICghdGhpcy5pc0hUTUw1KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGNoaWxkIHNvdXJjZXNcbiAgICByZW1vdmVFbGVtZW50KGh0bWw1LmdldFNvdXJjZXMuY2FsbCh0aGlzKSk7XG5cbiAgICAvLyBTZXQgYmxhbmsgdmlkZW8gc3JjIGF0dHJpYnV0ZVxuICAgIC8vIFRoaXMgaXMgdG8gcHJldmVudCBhIE1FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRCBlcnJvclxuICAgIC8vIEluZm86IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzIyMzE1NzkvaG93LXRvLXByb3Blcmx5LWRpc3Bvc2Utb2YtYW4taHRtbDUtdmlkZW8tYW5kLWNsb3NlLXNvY2tldC1vci1jb25uZWN0aW9uXG4gICAgdGhpcy5tZWRpYS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuY29uZmlnLmJsYW5rVmlkZW8pO1xuXG4gICAgLy8gTG9hZCB0aGUgbmV3IGVtcHR5IHNvdXJjZVxuICAgIC8vIFRoaXMgd2lsbCBjYW5jZWwgZXhpc3RpbmcgcmVxdWVzdHNcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3NhbXBvdHRzL3BseXIvaXNzdWVzLzE3NFxuICAgIHRoaXMubWVkaWEubG9hZCgpO1xuXG4gICAgLy8gRGVidWdnaW5nXG4gICAgdGhpcy5kZWJ1Zy5sb2coJ0NhbmNlbGxlZCBuZXR3b3JrIHJlcXVlc3RzJyk7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBodG1sNTtcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBcnJheSB1dGlsc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGlzIGZyb20gJy4vaXMnO1xuXG4vLyBSZW1vdmUgZHVwbGljYXRlcyBpbiBhbiBhcnJheVxuZXhwb3J0IGZ1bmN0aW9uIGRlZHVwZShhcnJheSkge1xuICBpZiAoIWlzLmFycmF5KGFycmF5KSkge1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIHJldHVybiBhcnJheS5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiBhcnJheS5pbmRleE9mKGl0ZW0pID09PSBpbmRleCk7XG59XG5cbi8vIEdldCB0aGUgY2xvc2VzdCB2YWx1ZSBpbiBhbiBhcnJheVxuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3QoYXJyYXksIHZhbHVlKSB7XG4gIGlmICghaXMuYXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBhcnJheS5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IChNYXRoLmFicyhjdXJyIC0gdmFsdWUpIDwgTWF0aC5hYnMocHJldiAtIHZhbHVlKSA/IGN1cnIgOiBwcmV2KSk7XG59XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU3RyaW5nIHV0aWxzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgaXMgZnJvbSAnLi9pcyc7XG5cbi8vIEdlbmVyYXRlIGEgcmFuZG9tIElEXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVJZChwcmVmaXgpIHtcbiAgcmV0dXJuIGAke3ByZWZpeH0tJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCl9YDtcbn1cblxuLy8gRm9ybWF0IHN0cmluZ1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChpbnB1dCwgLi4uYXJncykge1xuICBpZiAoaXMuZW1wdHkoaW5wdXQpKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgcmV0dXJuIGlucHV0LnRvU3RyaW5nKCkucmVwbGFjZSgveyhcXGQrKX0vZywgKG1hdGNoLCBpKSA9PiBhcmdzW2ldLnRvU3RyaW5nKCkpO1xufVxuXG4vLyBHZXQgcGVyY2VudGFnZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlcmNlbnRhZ2UoY3VycmVudCwgbWF4KSB7XG4gIGlmIChjdXJyZW50ID09PSAwIHx8IG1heCA9PT0gMCB8fCBOdW1iZXIuaXNOYU4oY3VycmVudCkgfHwgTnVtYmVyLmlzTmFOKG1heCkpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiAoKGN1cnJlbnQgLyBtYXgpICogMTAwKS50b0ZpeGVkKDIpO1xufVxuXG4vLyBSZXBsYWNlIGFsbCBvY2N1cmFuY2VzIG9mIGEgc3RyaW5nIGluIGEgc3RyaW5nXG5leHBvcnQgY29uc3QgcmVwbGFjZUFsbCA9IChpbnB1dCA9ICcnLCBmaW5kID0gJycsIHJlcGxhY2UgPSAnJykgPT5cbiAgaW5wdXQucmVwbGFjZShuZXcgUmVnRXhwKGZpbmQudG9TdHJpbmcoKS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xcXS9cXFxcXSkvZywgJ1xcXFwkMScpLCAnZycpLCByZXBsYWNlLnRvU3RyaW5nKCkpO1xuXG4vLyBDb252ZXJ0IHRvIHRpdGxlIGNhc2VcbmV4cG9ydCBjb25zdCB0b1RpdGxlQ2FzZSA9IChpbnB1dCA9ICcnKSA9PlxuICBpbnB1dC50b1N0cmluZygpLnJlcGxhY2UoL1xcd1xcUyovZywgdGV4dCA9PiB0ZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKSk7XG5cbi8vIENvbnZlcnQgc3RyaW5nIHRvIHBhc2NhbENhc2VcbmV4cG9ydCBmdW5jdGlvbiB0b1Bhc2NhbENhc2UoaW5wdXQgPSAnJykge1xuICBsZXQgc3RyaW5nID0gaW5wdXQudG9TdHJpbmcoKTtcblxuICAvLyBDb252ZXJ0IGtlYmFiIGNhc2VcbiAgc3RyaW5nID0gcmVwbGFjZUFsbChzdHJpbmcsICctJywgJyAnKTtcblxuICAvLyBDb252ZXJ0IHNuYWtlIGNhc2VcbiAgc3RyaW5nID0gcmVwbGFjZUFsbChzdHJpbmcsICdfJywgJyAnKTtcblxuICAvLyBDb252ZXJ0IHRvIHRpdGxlIGNhc2VcbiAgc3RyaW5nID0gdG9UaXRsZUNhc2Uoc3RyaW5nKTtcblxuICAvLyBDb252ZXJ0IHRvIHBhc2NhbCBjYXNlXG4gIHJldHVybiByZXBsYWNlQWxsKHN0cmluZywgJyAnLCAnJyk7XG59XG5cbi8vIENvbnZlcnQgc3RyaW5nIHRvIHBhc2NhbENhc2VcbmV4cG9ydCBmdW5jdGlvbiB0b0NhbWVsQ2FzZShpbnB1dCA9ICcnKSB7XG4gIGxldCBzdHJpbmcgPSBpbnB1dC50b1N0cmluZygpO1xuXG4gIC8vIENvbnZlcnQgdG8gcGFzY2FsIGNhc2VcbiAgc3RyaW5nID0gdG9QYXNjYWxDYXNlKHN0cmluZyk7XG5cbiAgLy8gQ29udmVydCBmaXJzdCBjaGFyYWN0ZXIgdG8gbG93ZXJjYXNlXG4gIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG59XG5cbi8vIFJlbW92ZSBIVE1MIGZyb20gYSBzdHJpbmdcbmV4cG9ydCBmdW5jdGlvbiBzdHJpcEhUTUwoc291cmNlKSB7XG4gIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICBlbGVtZW50LmlubmVySFRNTCA9IHNvdXJjZTtcbiAgcmV0dXJuIGZyYWdtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0O1xufVxuXG4vLyBMaWtlIG91dGVySFRNTCwgYnV0IGFsc28gd29ya3MgZm9yIERvY3VtZW50RnJhZ21lbnRcbmV4cG9ydCBmdW5jdGlvbiBnZXRIVE1MKGVsZW1lbnQpIHtcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICByZXR1cm4gd3JhcHBlci5pbm5lckhUTUw7XG59XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBpbnRlcm5hdGlvbmFsaXphdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGlzIGZyb20gJy4vaXMnO1xuaW1wb3J0IHsgZ2V0RGVlcCB9IGZyb20gJy4vb2JqZWN0cyc7XG5pbXBvcnQgeyByZXBsYWNlQWxsIH0gZnJvbSAnLi9zdHJpbmdzJztcblxuLy8gU2tpcCBpMThuIGZvciBhYmJyZXZpYXRpb25zIGFuZCBicmFuZCBuYW1lc1xuY29uc3QgcmVzb3VyY2VzID0ge1xuICBwaXA6ICdQSVAnLFxuICBhaXJwbGF5OiAnQWlyUGxheScsXG4gIGh0bWw1OiAnSFRNTDUnLFxuICB2aW1lbzogJ1ZpbWVvJyxcbiAgeW91dHViZTogJ1lvdVR1YmUnLFxufTtcblxuY29uc3QgaTE4biA9IHtcbiAgZ2V0KGtleSA9ICcnLCBjb25maWcgPSB7fSkge1xuICAgIGlmIChpcy5lbXB0eShrZXkpIHx8IGlzLmVtcHR5KGNvbmZpZykpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBsZXQgc3RyaW5nID0gZ2V0RGVlcChjb25maWcuaTE4biwga2V5KTtcblxuICAgIGlmIChpcy5lbXB0eShzdHJpbmcpKSB7XG4gICAgICBpZiAoT2JqZWN0LmtleXMocmVzb3VyY2VzKS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIHJldHVybiByZXNvdXJjZXNba2V5XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcGxhY2UgPSB7XG4gICAgICAne3NlZWt0aW1lfSc6IGNvbmZpZy5zZWVrVGltZSxcbiAgICAgICd7dGl0bGV9JzogY29uZmlnLnRpdGxlLFxuICAgIH07XG5cbiAgICBPYmplY3QuZW50cmllcyhyZXBsYWNlKS5mb3JFYWNoKChbaywgdl0pID0+IHtcbiAgICAgIHN0cmluZyA9IHJlcGxhY2VBbGwoc3RyaW5nLCBrLCB2KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdHJpbmc7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpMThuO1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBseXIgc3RvcmFnZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGlzIGZyb20gJy4vdXRpbHMvaXMnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi91dGlscy9vYmplY3RzJztcblxuY2xhc3MgU3RvcmFnZSB7XG4gIGNvbnN0cnVjdG9yKHBsYXllcikge1xuICAgIHRoaXMuZW5hYmxlZCA9IHBsYXllci5jb25maWcuc3RvcmFnZS5lbmFibGVkO1xuICAgIHRoaXMua2V5ID0gcGxheWVyLmNvbmZpZy5zdG9yYWdlLmtleTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBhY3R1YWwgc3VwcG9ydCAoc2VlIGlmIHdlIGNhbiB1c2UgaXQpXG4gIHN0YXRpYyBnZXQgc3VwcG9ydGVkKCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISgnbG9jYWxTdG9yYWdlJyBpbiB3aW5kb3cpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGVzdCA9ICdfX190ZXN0JztcblxuICAgICAgLy8gVHJ5IHRvIHVzZSBpdCAoaXQgbWlnaHQgYmUgZGlzYWJsZWQsIGUuZy4gdXNlciBpcyBpbiBwcml2YXRlIG1vZGUpXG4gICAgICAvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy8xMzFcbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0LCB0ZXN0KTtcbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGdldChrZXkpIHtcbiAgICBpZiAoIVN0b3JhZ2Uuc3VwcG9ydGVkIHx8ICF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3JlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTtcblxuICAgIGlmIChpcy5lbXB0eShzdG9yZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHN0b3JlKTtcblxuICAgIHJldHVybiBpcy5zdHJpbmcoa2V5KSAmJiBrZXkubGVuZ3RoID8ganNvbltrZXldIDoganNvbjtcbiAgfVxuXG4gIHNldChvYmplY3QpIHtcbiAgICAvLyBCYWlsIGlmIHdlIGRvbid0IGhhdmUgbG9jYWxTdG9yYWdlIHN1cHBvcnQgb3IgaXQncyBkaXNhYmxlZFxuICAgIGlmICghU3RvcmFnZS5zdXBwb3J0ZWQgfHwgIXRoaXMuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbiBvbmx5IHN0b3JlIG9iamVjdHN0XG4gICAgaWYgKCFpcy5vYmplY3Qob2JqZWN0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCBjdXJyZW50IHN0b3JhZ2VcbiAgICBsZXQgc3RvcmFnZSA9IHRoaXMuZ2V0KCk7XG5cbiAgICAvLyBEZWZhdWx0IHRvIGVtcHR5IG9iamVjdFxuICAgIGlmIChpcy5lbXB0eShzdG9yYWdlKSkge1xuICAgICAgc3RvcmFnZSA9IHt9O1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgd29ya2luZyBjb3B5IG9mIHRoZSB2YWx1ZXNcbiAgICBleHRlbmQoc3RvcmFnZSwgb2JqZWN0KTtcblxuICAgIC8vIFVwZGF0ZSBzdG9yYWdlXG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMua2V5LCBKU09OLnN0cmluZ2lmeShzdG9yYWdlKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcmFnZTtcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGZXRjaCB3cmFwcGVyXG4vLyBVc2luZyBYSFIgdG8gYXZvaWQgaXNzdWVzIHdpdGggb2xkZXIgYnJvd3NlcnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZldGNoKHVybCwgcmVzcG9uc2VUeXBlID0gJ3RleHQnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIENPUlMgc3VwcG9ydFxuICAgICAgaWYgKCEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZVR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXF1ZXN0LnN0YXR1cyk7XG4gICAgICB9KTtcblxuICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gICAgICAvLyBTZXQgdGhlIHJlcXVpcmVkIHJlc3BvbnNlIHR5cGVcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuXG4gICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfVxuICB9KTtcbn1cbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTcHJpdGUgbG9hZGVyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuLi9zdG9yYWdlJztcbmltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJztcbmltcG9ydCBpcyBmcm9tICcuL2lzJztcblxuLy8gTG9hZCBhbiBleHRlcm5hbCBTVkcgc3ByaXRlXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkU3ByaXRlKHVybCwgaWQpIHtcbiAgaWYgKCFpcy5zdHJpbmcodXJsKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHByZWZpeCA9ICdjYWNoZSc7XG4gIGNvbnN0IGhhc0lkID0gaXMuc3RyaW5nKGlkKTtcbiAgbGV0IGlzQ2FjaGVkID0gZmFsc2U7XG4gIGNvbnN0IGV4aXN0cyA9ICgpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSAhPT0gbnVsbDtcblxuICBjb25zdCB1cGRhdGUgPSAoY29udGFpbmVyLCBkYXRhKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGRhdGE7XG5cbiAgICAvLyBDaGVjayBhZ2FpbiBpbmNhc2Ugb2YgcmFjZSBjb25kaXRpb25cbiAgICBpZiAoaGFzSWQgJiYgZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbmplY3QgdGhlIFNWRyB0byB0aGUgYm9keVxuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgY29udGFpbmVyKTtcbiAgfTtcblxuICAvLyBPbmx5IGxvYWQgb25jZSBpZiBJRCBzZXRcbiAgaWYgKCFoYXNJZCB8fCAhZXhpc3RzKCkpIHtcbiAgICBjb25zdCB1c2VTdG9yYWdlID0gU3RvcmFnZS5zdXBwb3J0ZWQ7XG4gICAgLy8gQ3JlYXRlIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTtcblxuICAgIGlmIChoYXNJZCkge1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaW4gY2FjaGVcbiAgICBpZiAodXNlU3RvcmFnZSkge1xuICAgICAgY29uc3QgY2FjaGVkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke3ByZWZpeH0tJHtpZH1gKTtcbiAgICAgIGlzQ2FjaGVkID0gY2FjaGVkICE9PSBudWxsO1xuXG4gICAgICBpZiAoaXNDYWNoZWQpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoY2FjaGVkKTtcbiAgICAgICAgdXBkYXRlKGNvbnRhaW5lciwgZGF0YS5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIHNwcml0ZVxuICAgIGZldGNoKHVybClcbiAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmIChpcy5lbXB0eShyZXN1bHQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZVN0b3JhZ2UpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICBgJHtwcmVmaXh9LSR7aWR9YCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgY29udGVudDogcmVzdWx0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZShjb250YWluZXIsIHJlc3VsdCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxufVxuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRpbWUgdXRpbHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBpcyBmcm9tICcuL2lzJztcblxuLy8gVGltZSBoZWxwZXJzXG5leHBvcnQgY29uc3QgZ2V0SG91cnMgPSB2YWx1ZSA9PiBNYXRoLnRydW5jKCh2YWx1ZSAvIDYwIC8gNjApICUgNjAsIDEwKTtcbmV4cG9ydCBjb25zdCBnZXRNaW51dGVzID0gdmFsdWUgPT4gTWF0aC50cnVuYygodmFsdWUgLyA2MCkgJSA2MCwgMTApO1xuZXhwb3J0IGNvbnN0IGdldFNlY29uZHMgPSB2YWx1ZSA9PiBNYXRoLnRydW5jKHZhbHVlICUgNjAsIDEwKTtcblxuLy8gRm9ybWF0IHRpbWUgdG8gVUkgZnJpZW5kbHkgc3RyaW5nXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lID0gMCwgZGlzcGxheUhvdXJzID0gZmFsc2UsIGludmVydGVkID0gZmFsc2UpIHtcbiAgLy8gQmFpbCBpZiB0aGUgdmFsdWUgaXNuJ3QgYSBudW1iZXJcbiAgaWYgKCFpcy5udW1iZXIodGltZSkpIHtcbiAgICByZXR1cm4gZm9ybWF0VGltZSh1bmRlZmluZWQsIGRpc3BsYXlIb3VycywgaW52ZXJ0ZWQpO1xuICB9XG5cbiAgLy8gRm9ybWF0IHRpbWUgY29tcG9uZW50IHRvIGFkZCBsZWFkaW5nIHplcm9cbiAgY29uc3QgZm9ybWF0ID0gdmFsdWUgPT4gYDAke3ZhbHVlfWAuc2xpY2UoLTIpO1xuICAvLyBCcmVha2Rvd24gdG8gaG91cnMsIG1pbnMsIHNlY3NcbiAgbGV0IGhvdXJzID0gZ2V0SG91cnModGltZSk7XG4gIGNvbnN0IG1pbnMgPSBnZXRNaW51dGVzKHRpbWUpO1xuICBjb25zdCBzZWNzID0gZ2V0U2Vjb25kcyh0aW1lKTtcblxuICAvLyBEbyB3ZSBuZWVkIHRvIGRpc3BsYXkgaG91cnM/XG4gIGlmIChkaXNwbGF5SG91cnMgfHwgaG91cnMgPiAwKSB7XG4gICAgaG91cnMgPSBgJHtob3Vyc306YDtcbiAgfSBlbHNlIHtcbiAgICBob3VycyA9ICcnO1xuICB9XG5cbiAgLy8gUmVuZGVyXG4gIHJldHVybiBgJHtpbnZlcnRlZCAmJiB0aW1lID4gMCA/ICctJyA6ICcnfSR7aG91cnN9JHtmb3JtYXQobWlucyl9OiR7Zm9ybWF0KHNlY3MpfWA7XG59XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBjb250cm9sc1xuLy8gVE9ETzogVGhpcyBuZWVkcyB0byBiZSBzcGxpdCBpbnRvIHNtYWxsZXIgZmlsZXMgYW5kIGNsZWFuZWQgdXBcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBSYW5nZVRvdWNoIGZyb20gJ3JhbmdldG91Y2gnO1xuXG5pbXBvcnQgY2FwdGlvbnMgZnJvbSAnLi9jYXB0aW9ucyc7XG5pbXBvcnQgaHRtbDUgZnJvbSAnLi9odG1sNSc7XG5pbXBvcnQgc3VwcG9ydCBmcm9tICcuL3N1cHBvcnQnO1xuaW1wb3J0IHsgcmVwYWludCwgdHJhbnNpdGlvbkVuZEV2ZW50IH0gZnJvbSAnLi91dGlscy9hbmltYXRpb24nO1xuaW1wb3J0IHsgZGVkdXBlIH0gZnJvbSAnLi91dGlscy9hcnJheXMnO1xuaW1wb3J0IGJyb3dzZXIgZnJvbSAnLi91dGlscy9icm93c2VyJztcbmltcG9ydCB7XG4gIGNyZWF0ZUVsZW1lbnQsXG4gIGVtcHR5RWxlbWVudCxcbiAgZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3RvcixcbiAgZ2V0RWxlbWVudCxcbiAgZ2V0RWxlbWVudHMsXG4gIGhhc0NsYXNzLFxuICBtYXRjaGVzLFxuICByZW1vdmVFbGVtZW50LFxuICBzZXRBdHRyaWJ1dGVzLFxuICBzZXRGb2N1cyxcbiAgdG9nZ2xlQ2xhc3MsXG4gIHRvZ2dsZUhpZGRlbixcbn0gZnJvbSAnLi91dGlscy9lbGVtZW50cyc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi91dGlscy9ldmVudHMnO1xuaW1wb3J0IGkxOG4gZnJvbSAnLi91dGlscy9pMThuJztcbmltcG9ydCBpcyBmcm9tICcuL3V0aWxzL2lzJztcbmltcG9ydCBsb2FkU3ByaXRlIGZyb20gJy4vdXRpbHMvbG9hZC1zcHJpdGUnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi91dGlscy9vYmplY3RzJztcbmltcG9ydCB7IGdldFBlcmNlbnRhZ2UsIHJlcGxhY2VBbGwsIHRvQ2FtZWxDYXNlLCB0b1RpdGxlQ2FzZSB9IGZyb20gJy4vdXRpbHMvc3RyaW5ncyc7XG5pbXBvcnQgeyBmb3JtYXRUaW1lLCBnZXRIb3VycyB9IGZyb20gJy4vdXRpbHMvdGltZSc7XG5cbi8vIFRPRE86IERvbid0IGV4cG9ydCBhIG1hc3NpdmUgb2JqZWN0IC0gYnJlYWsgZG93biBhbmQgY3JlYXRlIGNsYXNzXG5jb25zdCBjb250cm9scyA9IHtcbiAgLy8gR2V0IGljb24gVVJMXG4gIGdldEljb25VcmwoKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmNvbmZpZy5pY29uVXJsLCB3aW5kb3cubG9jYXRpb24pO1xuICAgIGNvbnN0IGNvcnMgPSB1cmwuaG9zdCAhPT0gd2luZG93LmxvY2F0aW9uLmhvc3QgfHwgKGJyb3dzZXIuaXNJRSAmJiAhd2luZG93LnN2ZzRldmVyeWJvZHkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVybDogdGhpcy5jb25maWcuaWNvblVybCxcbiAgICAgIGNvcnMsXG4gICAgfTtcbiAgfSxcblxuICAvLyBGaW5kIHRoZSBVSSBjb250cm9sc1xuICBmaW5kRWxlbWVudHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udHJvbHMgPSBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmNvbnRyb2xzLndyYXBwZXIpO1xuXG4gICAgICAvLyBCdXR0b25zXG4gICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMgPSB7XG4gICAgICAgIHBsYXk6IGdldEVsZW1lbnRzLmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGxheSksXG4gICAgICAgIHBhdXNlOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGF1c2UpLFxuICAgICAgICByZXN0YXJ0OiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucmVzdGFydCksXG4gICAgICAgIHJld2luZDogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnJld2luZCksXG4gICAgICAgIGZhc3RGb3J3YXJkOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZmFzdEZvcndhcmQpLFxuICAgICAgICBtdXRlOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMubXV0ZSksXG4gICAgICAgIHBpcDogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnBpcCksXG4gICAgICAgIGFpcnBsYXk6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5haXJwbGF5KSxcbiAgICAgICAgc2V0dGluZ3M6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5zZXR0aW5ncyksXG4gICAgICAgIGNhcHRpb25zOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuY2FwdGlvbnMpLFxuICAgICAgICBmdWxsc2NyZWVuOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZnVsbHNjcmVlbiksXG4gICAgICB9O1xuXG4gICAgICAvLyBQcm9ncmVzc1xuICAgICAgdGhpcy5lbGVtZW50cy5wcm9ncmVzcyA9IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMucHJvZ3Jlc3MpO1xuXG4gICAgICAvLyBJbnB1dHNcbiAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXRzID0ge1xuICAgICAgICBzZWVrOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0cy5zZWVrKSxcbiAgICAgICAgdm9sdW1lOiBnZXRFbGVtZW50LmNhbGwodGhpcywgdGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0cy52b2x1bWUpLFxuICAgICAgfTtcblxuICAgICAgLy8gRGlzcGxheVxuICAgICAgdGhpcy5lbGVtZW50cy5kaXNwbGF5ID0ge1xuICAgICAgICBidWZmZXI6IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheS5idWZmZXIpLFxuICAgICAgICBjdXJyZW50VGltZTogZ2V0RWxlbWVudC5jYWxsKHRoaXMsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5kaXNwbGF5LmN1cnJlbnRUaW1lKSxcbiAgICAgICAgZHVyYXRpb246IGdldEVsZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheS5kdXJhdGlvbiksXG4gICAgICB9O1xuXG4gICAgICAvLyBTZWVrIHRvb2x0aXBcbiAgICAgIGlmIChpcy5lbGVtZW50KHRoaXMuZWxlbWVudHMucHJvZ3Jlc3MpKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCA9IHRoaXMuZWxlbWVudHMucHJvZ3Jlc3MucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5jb25maWcuY2xhc3NOYW1lcy50b29sdGlwfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gTG9nIGl0XG4gICAgICB0aGlzLmRlYnVnLndhcm4oJ0l0IGxvb2tzIGxpa2UgdGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggeW91ciBjdXN0b20gY29udHJvbHMgSFRNTCcsIGVycm9yKTtcblxuICAgICAgLy8gUmVzdG9yZSBuYXRpdmUgdmlkZW8gY29udHJvbHNcbiAgICAgIHRoaXMudG9nZ2xlTmF0aXZlQ29udHJvbHModHJ1ZSk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQ3JlYXRlIDxzdmc+IGljb25cbiAgY3JlYXRlSWNvbih0eXBlLCBhdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcbiAgICBjb25zdCBpY29uVXJsID0gY29udHJvbHMuZ2V0SWNvblVybC5jYWxsKHRoaXMpO1xuICAgIGNvbnN0IGljb25QYXRoID0gYCR7IWljb25VcmwuY29ycyA/IGljb25VcmwudXJsIDogJyd9IyR7dGhpcy5jb25maWcuaWNvblByZWZpeH1gO1xuICAgIC8vIENyZWF0ZSA8c3ZnPlxuICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCAnc3ZnJyk7XG4gICAgc2V0QXR0cmlidXRlcyhcbiAgICAgIGljb24sXG4gICAgICBleHRlbmQoYXR0cmlidXRlcywge1xuICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXG4gICAgICAgIGZvY3VzYWJsZTogJ2ZhbHNlJyxcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIDx1c2U+IHRvIHJlZmVyZW5jZSBzcHJpdGVcbiAgICBjb25zdCB1c2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCAndXNlJyk7XG4gICAgY29uc3QgcGF0aCA9IGAke2ljb25QYXRofS0ke3R5cGV9YDtcblxuICAgIC8vIFNldCBgaHJlZmAgYXR0cmlidXRlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy80NjBcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TVkcvQXR0cmlidXRlL3hsaW5rOmhyZWZcbiAgICBpZiAoJ2hyZWYnIGluIHVzZSkge1xuICAgICAgdXNlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ2hyZWYnLCBwYXRoKTtcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgc2V0IHRoZSBvbGRlciBhdHRyaWJ1dGUgZXZlbiB0aG91Z2ggaXQncyBcImRlcHJlY2F0ZWRcIiAoaXQnbGwgYmUgYXJvdW5kIGZvciBhZ2VzKVxuICAgIHVzZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsICd4bGluazpocmVmJywgcGF0aCk7XG5cbiAgICAvLyBBZGQgPHVzZT4gdG8gPHN2Zz5cbiAgICBpY29uLmFwcGVuZENoaWxkKHVzZSk7XG5cbiAgICByZXR1cm4gaWNvbjtcbiAgfSxcblxuICAvLyBDcmVhdGUgaGlkZGVuIHRleHQgbGFiZWxcbiAgY3JlYXRlTGFiZWwoa2V5LCBhdHRyID0ge30pIHtcbiAgICBjb25zdCB0ZXh0ID0gaTE4bi5nZXQoa2V5LCB0aGlzLmNvbmZpZyk7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IHsgLi4uYXR0ciwgY2xhc3M6IFthdHRyLmNsYXNzLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmhpZGRlbl0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAnKSB9O1xuXG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgfSxcblxuICAvLyBDcmVhdGUgYSBiYWRnZVxuICBjcmVhdGVCYWRnZSh0ZXh0KSB7XG4gICAgaWYgKGlzLmVtcHR5KHRleHQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBiYWRnZSA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51LnZhbHVlLFxuICAgIH0pO1xuXG4gICAgYmFkZ2UuYXBwZW5kQ2hpbGQoXG4gICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAnc3BhbicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51LmJhZGdlLFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0LFxuICAgICAgKSxcbiAgICApO1xuXG4gICAgcmV0dXJuIGJhZGdlO1xuICB9LFxuXG4gIC8vIENyZWF0ZSBhIDxidXR0b24+XG4gIGNyZWF0ZUJ1dHRvbihidXR0b25UeXBlLCBhdHRyKSB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IGV4dGVuZCh7fSwgYXR0cik7XG4gICAgbGV0IHR5cGUgPSB0b0NhbWVsQ2FzZShidXR0b25UeXBlKTtcblxuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgZWxlbWVudDogJ2J1dHRvbicsXG4gICAgICB0b2dnbGU6IGZhbHNlLFxuICAgICAgbGFiZWw6IG51bGwsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgbGFiZWxQcmVzc2VkOiBudWxsLFxuICAgICAgaWNvblByZXNzZWQ6IG51bGwsXG4gICAgfTtcblxuICAgIFsnZWxlbWVudCcsICdpY29uJywgJ2xhYmVsJ10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgcHJvcHNba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERlZmF1bHQgdG8gJ2J1dHRvbicgdHlwZSB0byBwcmV2ZW50IGZvcm0gc3VibWlzc2lvblxuICAgIGlmIChwcm9wcy5lbGVtZW50ID09PSAnYnV0dG9uJyAmJiAhT2JqZWN0LmtleXMoYXR0cmlidXRlcykuaW5jbHVkZXMoJ3R5cGUnKSkge1xuICAgICAgYXR0cmlidXRlcy50eXBlID0gJ2J1dHRvbic7XG4gICAgfVxuXG4gICAgLy8gU2V0IGNsYXNzIG5hbWVcbiAgICBpZiAoT2JqZWN0LmtleXMoYXR0cmlidXRlcykuaW5jbHVkZXMoJ2NsYXNzJykpIHtcbiAgICAgIGlmICghYXR0cmlidXRlcy5jbGFzcy5zcGxpdCgnICcpLnNvbWUoYyA9PiBjID09PSB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wpKSB7XG4gICAgICAgIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgY2xhc3M6IGAke2F0dHJpYnV0ZXMuY2xhc3N9ICR7dGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhdHRyaWJ1dGVzLmNsYXNzID0gdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sO1xuICAgIH1cblxuICAgIC8vIExhcmdlIHBsYXkgYnV0dG9uXG4gICAgc3dpdGNoIChidXR0b25UeXBlKSB7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgcHJvcHMudG9nZ2xlID0gdHJ1ZTtcbiAgICAgICAgcHJvcHMubGFiZWwgPSAncGxheSc7XG4gICAgICAgIHByb3BzLmxhYmVsUHJlc3NlZCA9ICdwYXVzZSc7XG4gICAgICAgIHByb3BzLmljb24gPSAncGxheSc7XG4gICAgICAgIHByb3BzLmljb25QcmVzc2VkID0gJ3BhdXNlJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ211dGUnOlxuICAgICAgICBwcm9wcy50b2dnbGUgPSB0cnVlO1xuICAgICAgICBwcm9wcy5sYWJlbCA9ICdtdXRlJztcbiAgICAgICAgcHJvcHMubGFiZWxQcmVzc2VkID0gJ3VubXV0ZSc7XG4gICAgICAgIHByb3BzLmljb24gPSAndm9sdW1lJztcbiAgICAgICAgcHJvcHMuaWNvblByZXNzZWQgPSAnbXV0ZWQnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY2FwdGlvbnMnOlxuICAgICAgICBwcm9wcy50b2dnbGUgPSB0cnVlO1xuICAgICAgICBwcm9wcy5sYWJlbCA9ICdlbmFibGVDYXB0aW9ucyc7XG4gICAgICAgIHByb3BzLmxhYmVsUHJlc3NlZCA9ICdkaXNhYmxlQ2FwdGlvbnMnO1xuICAgICAgICBwcm9wcy5pY29uID0gJ2NhcHRpb25zLW9mZic7XG4gICAgICAgIHByb3BzLmljb25QcmVzc2VkID0gJ2NhcHRpb25zLW9uJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Z1bGxzY3JlZW4nOlxuICAgICAgICBwcm9wcy50b2dnbGUgPSB0cnVlO1xuICAgICAgICBwcm9wcy5sYWJlbCA9ICdlbnRlckZ1bGxzY3JlZW4nO1xuICAgICAgICBwcm9wcy5sYWJlbFByZXNzZWQgPSAnZXhpdEZ1bGxzY3JlZW4nO1xuICAgICAgICBwcm9wcy5pY29uID0gJ2VudGVyLWZ1bGxzY3JlZW4nO1xuICAgICAgICBwcm9wcy5pY29uUHJlc3NlZCA9ICdleGl0LWZ1bGxzY3JlZW4nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAncGxheS1sYXJnZSc6XG4gICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gYCAke3RoaXMuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbH0tLW92ZXJsYWlkYDtcbiAgICAgICAgdHlwZSA9ICdwbGF5JztcbiAgICAgICAgcHJvcHMubGFiZWwgPSAncGxheSc7XG4gICAgICAgIHByb3BzLmljb24gPSAncGxheSc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXMuZW1wdHkocHJvcHMubGFiZWwpKSB7XG4gICAgICAgICAgcHJvcHMubGFiZWwgPSB0eXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpcy5lbXB0eShwcm9wcy5pY29uKSkge1xuICAgICAgICAgIHByb3BzLmljb24gPSBidXR0b25UeXBlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYnV0dG9uID0gY3JlYXRlRWxlbWVudChwcm9wcy5lbGVtZW50KTtcblxuICAgIC8vIFNldHVwIHRvZ2dsZSBpY29uIGFuZCBsYWJlbHNcbiAgICBpZiAocHJvcHMudG9nZ2xlKSB7XG4gICAgICAvLyBJY29uXG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNvbnRyb2xzLmNyZWF0ZUljb24uY2FsbCh0aGlzLCBwcm9wcy5pY29uUHJlc3NlZCwge1xuICAgICAgICAgIGNsYXNzOiAnaWNvbi0tcHJlc3NlZCcsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChcbiAgICAgICAgY29udHJvbHMuY3JlYXRlSWNvbi5jYWxsKHRoaXMsIHByb3BzLmljb24sIHtcbiAgICAgICAgICBjbGFzczogJ2ljb24tLW5vdC1wcmVzc2VkJyxcbiAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgICAvLyBMYWJlbC9Ub29sdGlwXG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNvbnRyb2xzLmNyZWF0ZUxhYmVsLmNhbGwodGhpcywgcHJvcHMubGFiZWxQcmVzc2VkLCB7XG4gICAgICAgICAgY2xhc3M6ICdsYWJlbC0tcHJlc3NlZCcsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChcbiAgICAgICAgY29udHJvbHMuY3JlYXRlTGFiZWwuY2FsbCh0aGlzLCBwcm9wcy5sYWJlbCwge1xuICAgICAgICAgIGNsYXNzOiAnbGFiZWwtLW5vdC1wcmVzc2VkJyxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoY29udHJvbHMuY3JlYXRlSWNvbi5jYWxsKHRoaXMsIHByb3BzLmljb24pKTtcbiAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChjb250cm9scy5jcmVhdGVMYWJlbC5jYWxsKHRoaXMsIHByb3BzLmxhYmVsKSk7XG4gICAgfVxuXG4gICAgLy8gTWVyZ2UgYW5kIHNldCBhdHRyaWJ1dGVzXG4gICAgZXh0ZW5kKGF0dHJpYnV0ZXMsIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnNbdHlwZV0sIGF0dHJpYnV0ZXMpKTtcbiAgICBzZXRBdHRyaWJ1dGVzKGJ1dHRvbiwgYXR0cmlidXRlcyk7XG5cbiAgICAvLyBXZSBoYXZlIG11bHRpcGxlIHBsYXkgYnV0dG9uc1xuICAgIGlmICh0eXBlID09PSAncGxheScpIHtcbiAgICAgIGlmICghaXMuYXJyYXkodGhpcy5lbGVtZW50cy5idXR0b25zW3R5cGVdKSkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbnNbdHlwZV0gPSBbXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5lbGVtZW50cy5idXR0b25zW3R5cGVdLnB1c2goYnV0dG9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50cy5idXR0b25zW3R5cGVdID0gYnV0dG9uO1xuICAgIH1cblxuICAgIHJldHVybiBidXR0b247XG4gIH0sXG5cbiAgLy8gQ3JlYXRlIGFuIDxpbnB1dCB0eXBlPSdyYW5nZSc+XG4gIGNyZWF0ZVJhbmdlKHR5cGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAvLyBTZWVrIGlucHV0XG4gICAgY29uc3QgaW5wdXQgPSBjcmVhdGVFbGVtZW50KFxuICAgICAgJ2lucHV0JyxcbiAgICAgIGV4dGVuZChcbiAgICAgICAgZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzW3R5cGVdKSxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdyYW5nZScsXG4gICAgICAgICAgbWluOiAwLFxuICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgIHN0ZXA6IDAuMDEsXG4gICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgYXV0b2NvbXBsZXRlOiAnb2ZmJyxcbiAgICAgICAgICAvLyBBMTF5IGZpeGVzIGZvciBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvOTA1XG4gICAgICAgICAgcm9sZTogJ3NsaWRlcicsXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnOiBpMThuLmdldCh0eXBlLCB0aGlzLmNvbmZpZyksXG4gICAgICAgICAgJ2FyaWEtdmFsdWVtaW4nOiAwLFxuICAgICAgICAgICdhcmlhLXZhbHVlbWF4JzogMTAwLFxuICAgICAgICAgICdhcmlhLXZhbHVlbm93JzogMCxcbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmlidXRlcyxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuZWxlbWVudHMuaW5wdXRzW3R5cGVdID0gaW5wdXQ7XG5cbiAgICAvLyBTZXQgdGhlIGZpbGwgZm9yIHdlYmtpdCBub3dcbiAgICBjb250cm9scy51cGRhdGVSYW5nZUZpbGwuY2FsbCh0aGlzLCBpbnB1dCk7XG5cbiAgICAvLyBJbXByb3ZlIHN1cHBvcnQgb24gdG91Y2ggZGV2aWNlc1xuICAgIFJhbmdlVG91Y2guc2V0dXAoaW5wdXQpO1xuXG4gICAgcmV0dXJuIGlucHV0O1xuICB9LFxuXG4gIC8vIENyZWF0ZSBhIDxwcm9ncmVzcz5cbiAgY3JlYXRlUHJvZ3Jlc3ModHlwZSwgYXR0cmlidXRlcykge1xuICAgIGNvbnN0IHByb2dyZXNzID0gY3JlYXRlRWxlbWVudChcbiAgICAgICdwcm9ncmVzcycsXG4gICAgICBleHRlbmQoXG4gICAgICAgIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLmRpc3BsYXlbdHlwZV0pLFxuICAgICAgICB7XG4gICAgICAgICAgbWluOiAwLFxuICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgIHJvbGU6ICdwcm9ncmVzc2JhcicsXG4gICAgICAgICAgJ2FyaWEtaGlkZGVuJzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmlidXRlcyxcbiAgICAgICksXG4gICAgKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgbGFiZWwgaW5zaWRlXG4gICAgaWYgKHR5cGUgIT09ICd2b2x1bWUnKSB7XG4gICAgICBwcm9ncmVzcy5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCdzcGFuJywgbnVsbCwgJzAnKSk7XG5cbiAgICAgIGNvbnN0IHN1ZmZpeEtleSA9IHtcbiAgICAgICAgcGxheWVkOiAncGxheWVkJyxcbiAgICAgICAgYnVmZmVyOiAnYnVmZmVyZWQnLFxuICAgICAgfVt0eXBlXTtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IHN1ZmZpeEtleSA/IGkxOG4uZ2V0KHN1ZmZpeEtleSwgdGhpcy5jb25maWcpIDogJyc7XG5cbiAgICAgIHByb2dyZXNzLmlubmVyVGV4dCA9IGAlICR7c3VmZml4LnRvTG93ZXJDYXNlKCl9YDtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnRzLmRpc3BsYXlbdHlwZV0gPSBwcm9ncmVzcztcblxuICAgIHJldHVybiBwcm9ncmVzcztcbiAgfSxcblxuICAvLyBDcmVhdGUgdGltZSBkaXNwbGF5XG4gIGNyZWF0ZVRpbWUodHlwZSwgYXR0cnMpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheVt0eXBlXSwgYXR0cnMpO1xuXG4gICAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgY2xhc3M6IGAke2F0dHJpYnV0ZXMuY2xhc3MgPyBhdHRyaWJ1dGVzLmNsYXNzIDogJyd9ICR7dGhpcy5jb25maWcuY2xhc3NOYW1lcy5kaXNwbGF5LnRpbWV9IGAudHJpbSgpLFxuICAgICAgICAnYXJpYS1sYWJlbCc6IGkxOG4uZ2V0KHR5cGUsIHRoaXMuY29uZmlnKSxcbiAgICAgIH0pLFxuICAgICAgJzAwOjAwJyxcbiAgICApO1xuXG4gICAgLy8gUmVmZXJlbmNlIGZvciB1cGRhdGVzXG4gICAgdGhpcy5lbGVtZW50cy5kaXNwbGF5W3R5cGVdID0gY29udGFpbmVyO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfSxcblxuICAvLyBCaW5kIGtleWJvYXJkIHNob3J0Y3V0cyBmb3IgYSBtZW51IGl0ZW1cbiAgLy8gV2UgaGF2ZSB0byBiaW5kIHRvIGtleXVwIG90aGVyd2lzZSBGaXJlZm94IHRyaWdnZXJzIGEgY2xpY2sgd2hlbiBhIGtleWRvd24gZXZlbnQgaGFuZGxlciBzaGlmdHMgZm9jdXNcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTIyMDE0M1xuICBiaW5kTWVudUl0ZW1TaG9ydGN1dHMobWVudUl0ZW0sIHR5cGUpIHtcbiAgICAvLyBOYXZpZ2F0ZSB0aHJvdWdoIG1lbnVzIHZpYSBhcnJvdyBrZXlzIGFuZCBzcGFjZVxuICAgIG9uLmNhbGwoXG4gICAgICB0aGlzLFxuICAgICAgbWVudUl0ZW0sXG4gICAgICAna2V5ZG93biBrZXl1cCcsXG4gICAgICBldmVudCA9PiB7XG4gICAgICAgIC8vIFdlIG9ubHkgY2FyZSBhYm91dCBzcGFjZSBhbmQg4qyG77iPIOKsh++4j++4jyDinqHvuI9cbiAgICAgICAgaWYgKCFbMzIsIDM4LCAzOSwgNDBdLmluY2x1ZGVzKGV2ZW50LndoaWNoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZXZlbnQgcGxheSAvIHNlZWtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgLy8gV2UncmUganVzdCBoZXJlIHRvIHByZXZlbnQgdGhlIGtleWRvd24gYnViYmxpbmdcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzUmFkaW9CdXR0b24gPSBtYXRjaGVzKG1lbnVJdGVtLCAnW3JvbGU9XCJtZW51aXRlbXJhZGlvXCJdJyk7XG5cbiAgICAgICAgLy8gU2hvdyB0aGUgcmVzcGVjdGl2ZSBtZW51XG4gICAgICAgIGlmICghaXNSYWRpb0J1dHRvbiAmJiBbMzIsIDM5XS5pbmNsdWRlcyhldmVudC53aGljaCkpIHtcbiAgICAgICAgICBjb250cm9scy5zaG93TWVudVBhbmVsLmNhbGwodGhpcywgdHlwZSwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHRhcmdldDtcblxuICAgICAgICAgIGlmIChldmVudC53aGljaCAhPT0gMzIpIHtcbiAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gNDAgfHwgKGlzUmFkaW9CdXR0b24gJiYgZXZlbnQud2hpY2ggPT09IDM5KSkge1xuICAgICAgICAgICAgICB0YXJnZXQgPSBtZW51SXRlbS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICAgICAgaWYgKCFpcy5lbGVtZW50KHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBtZW51SXRlbS5wYXJlbnROb2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXQgPSBtZW51SXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgIGlmICghaXMuZWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gbWVudUl0ZW0ucGFyZW50Tm9kZS5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldEZvY3VzLmNhbGwodGhpcywgdGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWxzZSxcbiAgICApO1xuXG4gICAgLy8gRW50ZXIgd2lsbCBmaXJlIGEgYGNsaWNrYCBldmVudCBidXQgd2Ugc3RpbGwgbmVlZCB0byBtYW5hZ2UgZm9jdXNcbiAgICAvLyBTbyB3ZSBiaW5kIHRvIGtleXVwIHdoaWNoIGZpcmVzIGFmdGVyIGFuZCBzZXQgZm9jdXMgaGVyZVxuICAgIG9uLmNhbGwodGhpcywgbWVudUl0ZW0sICdrZXl1cCcsIGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC53aGljaCAhPT0gMTMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb250cm9scy5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbCh0aGlzLCBudWxsLCB0cnVlKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBDcmVhdGUgYSBzZXR0aW5ncyBtZW51IGl0ZW1cbiAgY3JlYXRlTWVudUl0ZW0oeyB2YWx1ZSwgbGlzdCwgdHlwZSwgdGl0bGUsIGJhZGdlID0gbnVsbCwgY2hlY2tlZCA9IGZhbHNlIH0pIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzW3R5cGVdKTtcblxuICAgIGNvbnN0IG1lbnVJdGVtID0gY3JlYXRlRWxlbWVudChcbiAgICAgICdidXR0b24nLFxuICAgICAgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgIHJvbGU6ICdtZW51aXRlbXJhZGlvJyxcbiAgICAgICAgY2xhc3M6IGAke3RoaXMuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbH0gJHthdHRyaWJ1dGVzLmNsYXNzID8gYXR0cmlidXRlcy5jbGFzcyA6ICcnfWAudHJpbSgpLFxuICAgICAgICAnYXJpYS1jaGVja2VkJzogY2hlY2tlZCxcbiAgICAgICAgdmFsdWUsXG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgY29uc3QgZmxleCA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuICAgIC8vIFdlIGhhdmUgdG8gc2V0IGFzIEhUTUwgaW5jYXNlIG9mIHNwZWNpYWwgY2hhcmFjdGVyc1xuICAgIGZsZXguaW5uZXJIVE1MID0gdGl0bGU7XG5cbiAgICBpZiAoaXMuZWxlbWVudChiYWRnZSkpIHtcbiAgICAgIGZsZXguYXBwZW5kQ2hpbGQoYmFkZ2UpO1xuICAgIH1cblxuICAgIG1lbnVJdGVtLmFwcGVuZENoaWxkKGZsZXgpO1xuXG4gICAgLy8gUmVwbGljYXRlIHJhZGlvIGJ1dHRvbiBiZWhhdmlvdXJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobWVudUl0ZW0sICdjaGVja2VkJywge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIG1lbnVJdGVtLmdldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJykgPT09ICd0cnVlJztcbiAgICAgIH0sXG4gICAgICBzZXQoY2hlY2spIHtcbiAgICAgICAgLy8gRW5zdXJlIGV4Y2x1c2l2aXR5XG4gICAgICAgIGlmIChjaGVjaykge1xuICAgICAgICAgIEFycmF5LmZyb20obWVudUl0ZW0ucGFyZW50Tm9kZS5jaGlsZHJlbilcbiAgICAgICAgICAgIC5maWx0ZXIobm9kZSA9PiBtYXRjaGVzKG5vZGUsICdbcm9sZT1cIm1lbnVpdGVtcmFkaW9cIl0nKSlcbiAgICAgICAgICAgIC5mb3JFYWNoKG5vZGUgPT4gbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lbnVJdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgY2hlY2sgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmxpc3RlbmVycy5iaW5kKFxuICAgICAgbWVudUl0ZW0sXG4gICAgICAnY2xpY2sga2V5dXAnLFxuICAgICAgZXZlbnQgPT4ge1xuICAgICAgICBpZiAoaXMua2V5Ym9hcmRFdmVudChldmVudCkgJiYgZXZlbnQud2hpY2ggIT09IDMyKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgbWVudUl0ZW0uY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSAnbGFuZ3VhZ2UnOlxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VHJhY2sgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdxdWFsaXR5JzpcbiAgICAgICAgICAgIHRoaXMucXVhbGl0eSA9IHZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdzcGVlZCc6XG4gICAgICAgICAgICB0aGlzLnNwZWVkID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRyb2xzLnNob3dNZW51UGFuZWwuY2FsbCh0aGlzLCAnaG9tZScsIGlzLmtleWJvYXJkRXZlbnQoZXZlbnQpKTtcbiAgICAgIH0sXG4gICAgICB0eXBlLFxuICAgICAgZmFsc2UsXG4gICAgKTtcblxuICAgIGNvbnRyb2xzLmJpbmRNZW51SXRlbVNob3J0Y3V0cy5jYWxsKHRoaXMsIG1lbnVJdGVtLCB0eXBlKTtcblxuICAgIGxpc3QuYXBwZW5kQ2hpbGQobWVudUl0ZW0pO1xuICB9LFxuXG4gIC8vIEZvcm1hdCBhIHRpbWUgZm9yIGRpc3BsYXlcbiAgZm9ybWF0VGltZSh0aW1lID0gMCwgaW52ZXJ0ZWQgPSBmYWxzZSkge1xuICAgIC8vIEJhaWwgaWYgdGhlIHZhbHVlIGlzbid0IGEgbnVtYmVyXG4gICAgaWYgKCFpcy5udW1iZXIodGltZSkpIHtcbiAgICAgIHJldHVybiB0aW1lO1xuICAgIH1cblxuICAgIC8vIEFsd2F5cyBkaXNwbGF5IGhvdXJzIGlmIGR1cmF0aW9uIGlzIG92ZXIgYW4gaG91clxuICAgIGNvbnN0IGZvcmNlSG91cnMgPSBnZXRIb3Vycyh0aGlzLmR1cmF0aW9uKSA+IDA7XG5cbiAgICByZXR1cm4gZm9ybWF0VGltZSh0aW1lLCBmb3JjZUhvdXJzLCBpbnZlcnRlZCk7XG4gIH0sXG5cbiAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5ZWQgdGltZVxuICB1cGRhdGVUaW1lRGlzcGxheSh0YXJnZXQgPSBudWxsLCB0aW1lID0gMCwgaW52ZXJ0ZWQgPSBmYWxzZSkge1xuICAgIC8vIEJhaWwgaWYgdGhlcmUncyBubyBlbGVtZW50IHRvIGRpc3BsYXkgb3IgdGhlIHZhbHVlIGlzbid0IGEgbnVtYmVyXG4gICAgaWYgKCFpcy5lbGVtZW50KHRhcmdldCkgfHwgIWlzLm51bWJlcih0aW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHRhcmdldC5pbm5lclRleHQgPSBjb250cm9scy5mb3JtYXRUaW1lKHRpbWUsIGludmVydGVkKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgdm9sdW1lIFVJIGFuZCBzdG9yYWdlXG4gIHVwZGF0ZVZvbHVtZSgpIHtcbiAgICBpZiAoIXRoaXMuc3VwcG9ydGVkLnVpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHJhbmdlXG4gICAgaWYgKGlzLmVsZW1lbnQodGhpcy5lbGVtZW50cy5pbnB1dHMudm9sdW1lKSkge1xuICAgICAgY29udHJvbHMuc2V0UmFuZ2UuY2FsbCh0aGlzLCB0aGlzLmVsZW1lbnRzLmlucHV0cy52b2x1bWUsIHRoaXMubXV0ZWQgPyAwIDogdGhpcy52b2x1bWUpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBtdXRlIHN0YXRlXG4gICAgaWYgKGlzLmVsZW1lbnQodGhpcy5lbGVtZW50cy5idXR0b25zLm11dGUpKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMubXV0ZS5wcmVzc2VkID0gdGhpcy5tdXRlZCB8fCB0aGlzLnZvbHVtZSA9PT0gMDtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVXBkYXRlIHNlZWsgdmFsdWUgYW5kIGxvd2VyIGZpbGxcbiAgc2V0UmFuZ2UodGFyZ2V0LCB2YWx1ZSA9IDApIHtcbiAgICBpZiAoIWlzLmVsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHRhcmdldC52YWx1ZSA9IHZhbHVlO1xuXG4gICAgLy8gV2Via2l0IHJhbmdlIGZpbGxcbiAgICBjb250cm9scy51cGRhdGVSYW5nZUZpbGwuY2FsbCh0aGlzLCB0YXJnZXQpO1xuICB9LFxuXG4gIC8vIFVwZGF0ZSA8cHJvZ3Jlc3M+IGVsZW1lbnRzXG4gIHVwZGF0ZVByb2dyZXNzKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnN1cHBvcnRlZC51aSB8fCAhaXMuZXZlbnQoZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHZhbHVlID0gMDtcblxuICAgIGNvbnN0IHNldFByb2dyZXNzID0gKHRhcmdldCwgaW5wdXQpID0+IHtcbiAgICAgIGNvbnN0IHZhbCA9IGlzLm51bWJlcihpbnB1dCkgPyBpbnB1dCA6IDA7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGlzLmVsZW1lbnQodGFyZ2V0KSA/IHRhcmdldCA6IHRoaXMuZWxlbWVudHMuZGlzcGxheS5idWZmZXI7XG5cbiAgICAgIC8vIFVwZGF0ZSB2YWx1ZSBhbmQgbGFiZWxcbiAgICAgIGlmIChpcy5lbGVtZW50KHByb2dyZXNzKSkge1xuICAgICAgICBwcm9ncmVzcy52YWx1ZSA9IHZhbDtcblxuICAgICAgICAvLyBVcGRhdGUgdGV4dCBsYWJlbCBpbnNpZGVcbiAgICAgICAgY29uc3QgbGFiZWwgPSBwcm9ncmVzcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpWzBdO1xuICAgICAgICBpZiAoaXMuZWxlbWVudChsYWJlbCkpIHtcbiAgICAgICAgICBsYWJlbC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgICAvLyBWaWRlbyBwbGF5aW5nXG4gICAgICAgIGNhc2UgJ3RpbWV1cGRhdGUnOlxuICAgICAgICBjYXNlICdzZWVraW5nJzpcbiAgICAgICAgY2FzZSAnc2Vla2VkJzpcbiAgICAgICAgICB2YWx1ZSA9IGdldFBlcmNlbnRhZ2UodGhpcy5jdXJyZW50VGltZSwgdGhpcy5kdXJhdGlvbik7XG5cbiAgICAgICAgICAvLyBTZXQgc2VlayByYW5nZSB2YWx1ZSBvbmx5IGlmIGl0J3MgYSAnbmF0dXJhbCcgdGltZSBldmVudFxuICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAndGltZXVwZGF0ZScpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzLnNldFJhbmdlLmNhbGwodGhpcywgdGhpcy5lbGVtZW50cy5pbnB1dHMuc2VlaywgdmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIENoZWNrIGJ1ZmZlciBzdGF0dXNcbiAgICAgICAgY2FzZSAncGxheWluZyc6XG4gICAgICAgIGNhc2UgJ3Byb2dyZXNzJzpcbiAgICAgICAgICBzZXRQcm9ncmVzcyh0aGlzLmVsZW1lbnRzLmRpc3BsYXkuYnVmZmVyLCB0aGlzLmJ1ZmZlcmVkICogMTAwKTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8vIFdlYmtpdCBwb2x5ZmlsbCBmb3IgbG93ZXIgZmlsbCByYW5nZVxuICB1cGRhdGVSYW5nZUZpbGwodGFyZ2V0KSB7XG4gICAgLy8gR2V0IHJhbmdlIGZyb20gZXZlbnQgaWYgZXZlbnQgcGFzc2VkXG4gICAgY29uc3QgcmFuZ2UgPSBpcy5ldmVudCh0YXJnZXQpID8gdGFyZ2V0LnRhcmdldCA6IHRhcmdldDtcblxuICAgIC8vIE5lZWRzIHRvIGJlIGEgdmFsaWQgPGlucHV0IHR5cGU9J3JhbmdlJz5cbiAgICBpZiAoIWlzLmVsZW1lbnQocmFuZ2UpIHx8IHJhbmdlLmdldEF0dHJpYnV0ZSgndHlwZScpICE9PSAncmFuZ2UnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0IGFyaWEgdmFsdWVzIGZvciBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvOTA1XG4gICAgaWYgKG1hdGNoZXMocmFuZ2UsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5pbnB1dHMuc2VlaykpIHtcbiAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHRoaXMuY3VycmVudFRpbWUpO1xuICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBjb250cm9scy5mb3JtYXRUaW1lKHRoaXMuY3VycmVudFRpbWUpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBjb250cm9scy5mb3JtYXRUaW1lKHRoaXMuZHVyYXRpb24pO1xuICAgICAgY29uc3QgZm9ybWF0ID0gaTE4bi5nZXQoJ3NlZWtMYWJlbCcsIHRoaXMuY29uZmlnKTtcbiAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZShcbiAgICAgICAgJ2FyaWEtdmFsdWV0ZXh0JyxcbiAgICAgICAgZm9ybWF0LnJlcGxhY2UoJ3tjdXJyZW50VGltZX0nLCBjdXJyZW50VGltZSkucmVwbGFjZSgne2R1cmF0aW9ufScsIGR1cmF0aW9uKSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChtYXRjaGVzKHJhbmdlLCB0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnZvbHVtZSkpIHtcbiAgICAgIGNvbnN0IHBlcmNlbnQgPSByYW5nZS52YWx1ZSAqIDEwMDtcbiAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHBlcmNlbnQpO1xuICAgICAgcmFuZ2Uuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVldGV4dCcsIGAke3BlcmNlbnQudG9GaXhlZCgxKX0lYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHJhbmdlLnZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBXZWJLaXQgb25seVxuICAgIGlmICghYnJvd3Nlci5pc1dlYmtpdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCBDU1MgY3VzdG9tIHByb3BlcnR5XG4gICAgcmFuZ2Uuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmFsdWUnLCBgJHsocmFuZ2UudmFsdWUgLyByYW5nZS5tYXgpICogMTAwfSVgKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgaG92ZXIgdG9vbHRpcCBmb3Igc2Vla2luZ1xuICB1cGRhdGVTZWVrVG9vbHRpcChldmVudCkge1xuICAgIC8vIEJhaWwgaWYgc2V0dGluZyBub3QgdHJ1ZVxuICAgIGlmIChcbiAgICAgICF0aGlzLmNvbmZpZy50b29sdGlwcy5zZWVrIHx8XG4gICAgICAhaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmlucHV0cy5zZWVrKSB8fFxuICAgICAgIWlzLmVsZW1lbnQodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwKSB8fFxuICAgICAgdGhpcy5kdXJhdGlvbiA9PT0gMFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZpc2libGUgPSBgJHt0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnRvb2x0aXB9LS12aXNpYmxlYDtcbiAgICBjb25zdCB0b2dnbGUgPSBzaG93ID0+IHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCwgdmlzaWJsZSwgc2hvdyk7XG5cbiAgICAvLyBIaWRlIG9uIHRvdWNoXG4gICAgaWYgKHRoaXMudG91Y2gpIHtcbiAgICAgIHRvZ2dsZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHBlcmNlbnRhZ2UsIGlmIGFscmVhZHkgdmlzaWJsZVxuICAgIGxldCBwZXJjZW50ID0gMDtcbiAgICBjb25zdCBjbGllbnRSZWN0ID0gdGhpcy5lbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmIChpcy5ldmVudChldmVudCkpIHtcbiAgICAgIHBlcmNlbnQgPSAoMTAwIC8gY2xpZW50UmVjdC53aWR0aCkgKiAoZXZlbnQucGFnZVggLSBjbGllbnRSZWN0LmxlZnQpO1xuICAgIH0gZWxzZSBpZiAoaGFzQ2xhc3ModGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLCB2aXNpYmxlKSkge1xuICAgICAgcGVyY2VudCA9IHBhcnNlRmxvYXQodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLnN0eWxlLmxlZnQsIDEwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCBib3VuZHNcbiAgICBpZiAocGVyY2VudCA8IDApIHtcbiAgICAgIHBlcmNlbnQgPSAwO1xuICAgIH0gZWxzZSBpZiAocGVyY2VudCA+IDEwMCkge1xuICAgICAgcGVyY2VudCA9IDEwMDtcbiAgICB9XG5cbiAgICAvLyBEaXNwbGF5IHRoZSB0aW1lIGEgY2xpY2sgd291bGQgc2VlayB0b1xuICAgIGNvbnRyb2xzLnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcywgdGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLCAodGhpcy5kdXJhdGlvbiAvIDEwMCkgKiBwZXJjZW50KTtcblxuICAgIC8vIFNldCBwb3NpdGlvblxuICAgIHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7cGVyY2VudH0lYDtcblxuICAgIC8vIFNob3cvaGlkZSB0aGUgdG9vbHRpcFxuICAgIC8vIElmIHRoZSBldmVudCBpcyBhIG1vdWVzIGluL291dCBhbmQgcGVyY2VudGFnZSBpcyBpbnNpZGUgYm91bmRzXG4gICAgaWYgKGlzLmV2ZW50KGV2ZW50KSAmJiBbJ21vdXNlZW50ZXInLCAnbW91c2VsZWF2ZSddLmluY2x1ZGVzKGV2ZW50LnR5cGUpKSB7XG4gICAgICB0b2dnbGUoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gSGFuZGxlIHRpbWUgY2hhbmdlIGV2ZW50XG4gIHRpbWVVcGRhdGUoZXZlbnQpIHtcbiAgICAvLyBPbmx5IGludmVydCBpZiBvbmx5IG9uZSB0aW1lIGVsZW1lbnQgaXMgZGlzcGxheWVkIGFuZCB1c2VkIGZvciBib3RoIGR1cmF0aW9uIGFuZCBjdXJyZW50VGltZVxuICAgIGNvbnN0IGludmVydCA9ICFpcy5lbGVtZW50KHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbikgJiYgdGhpcy5jb25maWcuaW52ZXJ0VGltZTtcblxuICAgIC8vIER1cmF0aW9uXG4gICAgY29udHJvbHMudXBkYXRlVGltZURpc3BsYXkuY2FsbChcbiAgICAgIHRoaXMsXG4gICAgICB0aGlzLmVsZW1lbnRzLmRpc3BsYXkuY3VycmVudFRpbWUsXG4gICAgICBpbnZlcnQgPyB0aGlzLmR1cmF0aW9uIC0gdGhpcy5jdXJyZW50VGltZSA6IHRoaXMuY3VycmVudFRpbWUsXG4gICAgICBpbnZlcnQsXG4gICAgKTtcblxuICAgIC8vIElnbm9yZSB1cGRhdGVzIHdoaWxlIHNlZWtpbmdcbiAgICBpZiAoZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gJ3RpbWV1cGRhdGUnICYmIHRoaXMubWVkaWEuc2Vla2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBsYXlpbmcgcHJvZ3Jlc3NcbiAgICBjb250cm9scy51cGRhdGVQcm9ncmVzcy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgfSxcblxuICAvLyBTaG93IHRoZSBkdXJhdGlvbiBvbiBtZXRhZGF0YWxvYWRlZCBvciBkdXJhdGlvbmNoYW5nZSBldmVudHNcbiAgZHVyYXRpb25VcGRhdGUoKSB7XG4gICAgLy8gQmFpbCBpZiBubyBVSSBvciBkdXJhdGlvbmNoYW5nZSBldmVudCB0cmlnZ2VyZWQgYWZ0ZXIgcGxheWluZy9zZWVrIHdoZW4gaW52ZXJ0VGltZSBpcyBmYWxzZVxuICAgIGlmICghdGhpcy5zdXBwb3J0ZWQudWkgfHwgKCF0aGlzLmNvbmZpZy5pbnZlcnRUaW1lICYmIHRoaXMuY3VycmVudFRpbWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgZHVyYXRpb24gaXMgdGhlIDIqKjMyIChzaGFrYSksIEluZmluaXR5IChITFMpLCBEQVNILUlGIChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiB8fCBOdW1iZXIuTUFYX1ZBTFVFKSBpbmRpY2F0aW5nIGxpdmUgd2UgaGlkZSB0aGUgY3VycmVudFRpbWUgYW5kIHByb2dyZXNzYmFyLlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlby1kZXYvaGxzLmpzL2Jsb2IvNTgyMGQyOWQzYzRjOGE0NmU4Yjc1ZjFlM2FmYTNlNjhjMWE5YTJkYi9zcmMvY29udHJvbGxlci9idWZmZXItY29udHJvbGxlci5qcyNMNDE1XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9zaGFrYS1wbGF5ZXIvYmxvYi80ZDg4OTA1NDYzMWY0ZTFjZjBmYmQ4MGRkZDJiNzE4ODdjMDJlMjMyL2xpYi9tZWRpYS9zdHJlYW1pbmdfZW5naW5lLmpzI0wxMDYyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0Rhc2gtSW5kdXN0cnktRm9ydW0vZGFzaC5qcy9ibG9iLzY5ODU5ZjUxYjk2OTY0NWIyMzQ2NjY4MDBkNGNiNTk2ZDg5YzYwMmQvc3JjL2Rhc2gvbW9kZWxzL0Rhc2hNYW5pZmVzdE1vZGVsLmpzI0wzMzhcbiAgICBpZiAodGhpcy5kdXJhdGlvbiA+PSAyICoqIDMyKSB7XG4gICAgICB0b2dnbGVIaWRkZW4odGhpcy5lbGVtZW50cy5kaXNwbGF5LmN1cnJlbnRUaW1lLCB0cnVlKTtcbiAgICAgIHRvZ2dsZUhpZGRlbih0aGlzLmVsZW1lbnRzLnByb2dyZXNzLCB0cnVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgQVJJQSB2YWx1ZXNcbiAgICBpZiAoaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmlucHV0cy5zZWVrKSkge1xuICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dHMuc2Vlay5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnLCB0aGlzLmR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIGEgc3BvdCB0byBkaXNwbGF5IGR1cmF0aW9uXG4gICAgY29uc3QgaGFzRHVyYXRpb24gPSBpcy5lbGVtZW50KHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbik7XG5cbiAgICAvLyBJZiB0aGVyZSdzIG9ubHkgb25lIHRpbWUgZGlzcGxheSwgZGlzcGxheSBkdXJhdGlvbiB0aGVyZVxuICAgIGlmICghaGFzRHVyYXRpb24gJiYgdGhpcy5jb25maWcuZGlzcGxheUR1cmF0aW9uICYmIHRoaXMucGF1c2VkKSB7XG4gICAgICBjb250cm9scy51cGRhdGVUaW1lRGlzcGxheS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuZGlzcGxheS5jdXJyZW50VGltZSwgdGhpcy5kdXJhdGlvbik7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUncyBhIGR1cmF0aW9uIGVsZW1lbnQsIHVwZGF0ZSBjb250ZW50XG4gICAgaWYgKGhhc0R1cmF0aW9uKSB7XG4gICAgICBjb250cm9scy51cGRhdGVUaW1lRGlzcGxheS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbiwgdGhpcy5kdXJhdGlvbik7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSB0b29sdGlwIChpZiB2aXNpYmxlKVxuICAgIGNvbnRyb2xzLnVwZGF0ZVNlZWtUb29sdGlwLmNhbGwodGhpcyk7XG4gIH0sXG5cbiAgLy8gSGlkZS9zaG93IGEgdGFiXG4gIHRvZ2dsZU1lbnVCdXR0b24oc2V0dGluZywgdG9nZ2xlKSB7XG4gICAgdG9nZ2xlSGlkZGVuKHRoaXMuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1tzZXR0aW5nXSwgIXRvZ2dsZSk7XG4gIH0sXG5cbiAgLy8gVXBkYXRlIHRoZSBzZWxlY3RlZCBzZXR0aW5nXG4gIHVwZGF0ZVNldHRpbmcoc2V0dGluZywgY29udGFpbmVyLCBpbnB1dCkge1xuICAgIGNvbnN0IHBhbmUgPSB0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVsc1tzZXR0aW5nXTtcbiAgICBsZXQgdmFsdWUgPSBudWxsO1xuICAgIGxldCBsaXN0ID0gY29udGFpbmVyO1xuXG4gICAgaWYgKHNldHRpbmcgPT09ICdjYXB0aW9ucycpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5jdXJyZW50VHJhY2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gIWlzLmVtcHR5KGlucHV0KSA/IGlucHV0IDogdGhpc1tzZXR0aW5nXTtcblxuICAgICAgLy8gR2V0IGRlZmF1bHRcbiAgICAgIGlmIChpcy5lbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmNvbmZpZ1tzZXR0aW5nXS5kZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICAvLyBVbnN1cHBvcnRlZCB2YWx1ZVxuICAgICAgaWYgKCFpcy5lbXB0eSh0aGlzLm9wdGlvbnNbc2V0dGluZ10pICYmICF0aGlzLm9wdGlvbnNbc2V0dGluZ10uaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybihgVW5zdXBwb3J0ZWQgdmFsdWUgb2YgJyR7dmFsdWV9JyBmb3IgJHtzZXR0aW5nfWApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIERpc2FibGVkIHZhbHVlXG4gICAgICBpZiAoIXRoaXMuY29uZmlnW3NldHRpbmddLm9wdGlvbnMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybihgRGlzYWJsZWQgdmFsdWUgb2YgJyR7dmFsdWV9JyBmb3IgJHtzZXR0aW5nfWApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBsaXN0IGlmIHdlIG5lZWQgdG9cbiAgICBpZiAoIWlzLmVsZW1lbnQobGlzdCkpIHtcbiAgICAgIGxpc3QgPSBwYW5lICYmIHBhbmUucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJyk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUncyBubyBsaXN0IGl0IG1lYW5zIGl0J3Mgbm90IGJlZW4gcmVuZGVyZWQuLi5cbiAgICBpZiAoIWlzLmVsZW1lbnQobGlzdCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIGxhYmVsXG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLmVsZW1lbnRzLnNldHRpbmdzLmJ1dHRvbnNbc2V0dGluZ10ucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51LnZhbHVlfWApO1xuICAgIGxhYmVsLmlubmVySFRNTCA9IGNvbnRyb2xzLmdldExhYmVsLmNhbGwodGhpcywgc2V0dGluZywgdmFsdWUpO1xuXG4gICAgLy8gRmluZCB0aGUgcmFkaW8gb3B0aW9uIGFuZCBjaGVjayBpdFxuICAgIGNvbnN0IHRhcmdldCA9IGxpc3QgJiYgbGlzdC5xdWVyeVNlbGVjdG9yKGBbdmFsdWU9XCIke3ZhbHVlfVwiXWApO1xuXG4gICAgaWYgKGlzLmVsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgdGFyZ2V0LmNoZWNrZWQgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICAvLyBUcmFuc2xhdGUgYSB2YWx1ZSBpbnRvIGEgbmljZSBsYWJlbFxuICBnZXRMYWJlbChzZXR0aW5nLCB2YWx1ZSkge1xuICAgIHN3aXRjaCAoc2V0dGluZykge1xuICAgICAgY2FzZSAnc3BlZWQnOlxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IDEgPyBpMThuLmdldCgnbm9ybWFsJywgdGhpcy5jb25maWcpIDogYCR7dmFsdWV9JnRpbWVzO2A7XG5cbiAgICAgIGNhc2UgJ3F1YWxpdHknOlxuICAgICAgICBpZiAoaXMubnVtYmVyKHZhbHVlKSkge1xuICAgICAgICAgIGNvbnN0IGxhYmVsID0gaTE4bi5nZXQoYHF1YWxpdHlMYWJlbC4ke3ZhbHVlfWAsIHRoaXMuY29uZmlnKTtcblxuICAgICAgICAgIGlmICghbGFiZWwubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV9cGA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRvVGl0bGVDYXNlKHZhbHVlKTtcblxuICAgICAgY2FzZSAnY2FwdGlvbnMnOlxuICAgICAgICByZXR1cm4gY2FwdGlvbnMuZ2V0TGFiZWwuY2FsbCh0aGlzKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8vIFNldCB0aGUgcXVhbGl0eSBtZW51XG4gIHNldFF1YWxpdHlNZW51KG9wdGlvbnMpIHtcbiAgICAvLyBNZW51IHJlcXVpcmVkXG4gICAgaWYgKCFpcy5lbGVtZW50KHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnF1YWxpdHkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdHlwZSA9ICdxdWFsaXR5JztcbiAgICBjb25zdCBsaXN0ID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMucXVhbGl0eS5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cIm1lbnVcIl0nKTtcblxuICAgIC8vIFNldCBvcHRpb25zIGlmIHBhc3NlZCBhbmQgZmlsdGVyIGJhc2VkIG9uIHVuaXF1ZW5lc3MgYW5kIGNvbmZpZ1xuICAgIGlmIChpcy5hcnJheShvcHRpb25zKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnF1YWxpdHkgPSBkZWR1cGUob3B0aW9ucykuZmlsdGVyKHF1YWxpdHkgPT4gdGhpcy5jb25maWcucXVhbGl0eS5vcHRpb25zLmluY2x1ZGVzKHF1YWxpdHkpKTtcbiAgICB9XG5cbiAgICAvLyBUb2dnbGUgdGhlIHBhbmUgYW5kIHRhYlxuICAgIGNvbnN0IHRvZ2dsZSA9ICFpcy5lbXB0eSh0aGlzLm9wdGlvbnMucXVhbGl0eSkgJiYgdGhpcy5vcHRpb25zLnF1YWxpdHkubGVuZ3RoID4gMTtcbiAgICBjb250cm9scy50b2dnbGVNZW51QnV0dG9uLmNhbGwodGhpcywgdHlwZSwgdG9nZ2xlKTtcblxuICAgIC8vIEVtcHR5IHRoZSBtZW51XG4gICAgZW1wdHlFbGVtZW50KGxpc3QpO1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byB0b2dnbGUgdGhlIHBhcmVudFxuICAgIGNvbnRyb2xzLmNoZWNrTWVudS5jYWxsKHRoaXMpO1xuXG4gICAgLy8gSWYgd2UncmUgaGlkaW5nLCBub3RoaW5nIG1vcmUgdG8gZG9cbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgYmFkZ2UgSFRNTCBmb3IgSEQsIDRLIGV0Y1xuICAgIGNvbnN0IGdldEJhZGdlID0gcXVhbGl0eSA9PiB7XG4gICAgICBjb25zdCBsYWJlbCA9IGkxOG4uZ2V0KGBxdWFsaXR5QmFkZ2UuJHtxdWFsaXR5fWAsIHRoaXMuY29uZmlnKTtcblxuICAgICAgaWYgKCFsYWJlbC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250cm9scy5jcmVhdGVCYWRnZS5jYWxsKHRoaXMsIGxhYmVsKTtcbiAgICB9O1xuXG4gICAgLy8gU29ydCBvcHRpb25zIGJ5IHRoZSBjb25maWcgYW5kIHRoZW4gcmVuZGVyIG9wdGlvbnNcbiAgICB0aGlzLm9wdGlvbnMucXVhbGl0eVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3Qgc29ydGluZyA9IHRoaXMuY29uZmlnLnF1YWxpdHkub3B0aW9ucztcbiAgICAgICAgcmV0dXJuIHNvcnRpbmcuaW5kZXhPZihhKSA+IHNvcnRpbmcuaW5kZXhPZihiKSA/IDEgOiAtMTtcbiAgICAgIH0pXG4gICAgICAuZm9yRWFjaChxdWFsaXR5ID0+IHtcbiAgICAgICAgY29udHJvbHMuY3JlYXRlTWVudUl0ZW0uY2FsbCh0aGlzLCB7XG4gICAgICAgICAgdmFsdWU6IHF1YWxpdHksXG4gICAgICAgICAgbGlzdCxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHRpdGxlOiBjb250cm9scy5nZXRMYWJlbC5jYWxsKHRoaXMsICdxdWFsaXR5JywgcXVhbGl0eSksXG4gICAgICAgICAgYmFkZ2U6IGdldEJhZGdlKHF1YWxpdHkpLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgY29udHJvbHMudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsIHR5cGUsIGxpc3QpO1xuICB9LFxuXG4gIC8vIFNldCB0aGUgbG9vcGluZyBvcHRpb25zXG4gIC8qIHNldExvb3BNZW51KCkge1xuICAgICAgICAvLyBNZW51IHJlcXVpcmVkXG4gICAgICAgIGlmICghaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5sb29wKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFsnc3RhcnQnLCAnZW5kJywgJ2FsbCcsICdyZXNldCddO1xuICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMubG9vcC5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cIm1lbnVcIl0nKTtcblxuICAgICAgICAvLyBTaG93IHRoZSBwYW5lIGFuZCB0YWJcbiAgICAgICAgdG9nZ2xlSGlkZGVuKHRoaXMuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9ucy5sb29wLCBmYWxzZSk7XG4gICAgICAgIHRvZ2dsZUhpZGRlbih0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5sb29wLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gVG9nZ2xlIHRoZSBwYW5lIGFuZCB0YWJcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gIWlzLmVtcHR5KHRoaXMubG9vcC5vcHRpb25zKTtcbiAgICAgICAgY29udHJvbHMudG9nZ2xlTWVudUJ1dHRvbi5jYWxsKHRoaXMsICdsb29wJywgdG9nZ2xlKTtcblxuICAgICAgICAvLyBFbXB0eSB0aGUgbWVudVxuICAgICAgICBlbXB0eUVsZW1lbnQobGlzdCk7XG5cbiAgICAgICAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICBleHRlbmQoZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5sb29wKSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbCxcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGx5ci1sb29wLWFjdGlvbic6IG9wdGlvbixcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBpMThuLmdldChvcHRpb24sIHRoaXMuY29uZmlnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKFsnc3RhcnQnLCAnZW5kJ10uaW5jbHVkZXMob3B0aW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhZGdlID0gY29udHJvbHMuY3JlYXRlQmFkZ2UuY2FsbCh0aGlzLCAnMDA6MDAnKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoYmFkZ2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9LCAqL1xuXG4gIC8vIEdldCBjdXJyZW50IHNlbGVjdGVkIGNhcHRpb24gbGFuZ3VhZ2VcbiAgLy8gVE9ETzogcmV3b3JrIHRoaXMgdG8gdXNlciB0aGUgZ2V0dGVyIGluIHRoZSBBUEk/XG5cbiAgLy8gU2V0IGEgbGlzdCBvZiBhdmFpbGFibGUgY2FwdGlvbnMgbGFuZ3VhZ2VzXG4gIHNldENhcHRpb25zTWVudSgpIHtcbiAgICAvLyBNZW51IHJlcXVpcmVkXG4gICAgaWYgKCFpcy5lbGVtZW50KHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLmNhcHRpb25zKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRPRE86IENhcHRpb25zIG9yIGxhbmd1YWdlPyBDdXJyZW50bHkgaXQncyBtaXhlZFxuICAgIGNvbnN0IHR5cGUgPSAnY2FwdGlvbnMnO1xuICAgIGNvbnN0IGxpc3QgPSB0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5jYXB0aW9ucy5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cIm1lbnVcIl0nKTtcbiAgICBjb25zdCB0cmFja3MgPSBjYXB0aW9ucy5nZXRUcmFja3MuY2FsbCh0aGlzKTtcbiAgICBjb25zdCB0b2dnbGUgPSBCb29sZWFuKHRyYWNrcy5sZW5ndGgpO1xuXG4gICAgLy8gVG9nZ2xlIHRoZSBwYW5lIGFuZCB0YWJcbiAgICBjb250cm9scy50b2dnbGVNZW51QnV0dG9uLmNhbGwodGhpcywgdHlwZSwgdG9nZ2xlKTtcblxuICAgIC8vIEVtcHR5IHRoZSBtZW51XG4gICAgZW1wdHlFbGVtZW50KGxpc3QpO1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byB0b2dnbGUgdGhlIHBhcmVudFxuICAgIGNvbnRyb2xzLmNoZWNrTWVudS5jYWxsKHRoaXMpO1xuXG4gICAgLy8gSWYgdGhlcmUncyBubyBjYXB0aW9ucywgYmFpbFxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgb3B0aW9ucyBkYXRhXG4gICAgY29uc3Qgb3B0aW9ucyA9IHRyYWNrcy5tYXAoKHRyYWNrLCB2YWx1ZSkgPT4gKHtcbiAgICAgIHZhbHVlLFxuICAgICAgY2hlY2tlZDogdGhpcy5jYXB0aW9ucy50b2dnbGVkICYmIHRoaXMuY3VycmVudFRyYWNrID09PSB2YWx1ZSxcbiAgICAgIHRpdGxlOiBjYXB0aW9ucy5nZXRMYWJlbC5jYWxsKHRoaXMsIHRyYWNrKSxcbiAgICAgIGJhZGdlOiB0cmFjay5sYW5ndWFnZSAmJiBjb250cm9scy5jcmVhdGVCYWRnZS5jYWxsKHRoaXMsIHRyYWNrLmxhbmd1YWdlLnRvVXBwZXJDYXNlKCkpLFxuICAgICAgbGlzdCxcbiAgICAgIHR5cGU6ICdsYW5ndWFnZScsXG4gICAgfSkpO1xuXG4gICAgLy8gQWRkIHRoZSBcIkRpc2FibGVkXCIgb3B0aW9uIHRvIHR1cm4gb2ZmIGNhcHRpb25zXG4gICAgb3B0aW9ucy51bnNoaWZ0KHtcbiAgICAgIHZhbHVlOiAtMSxcbiAgICAgIGNoZWNrZWQ6ICF0aGlzLmNhcHRpb25zLnRvZ2dsZWQsXG4gICAgICB0aXRsZTogaTE4bi5nZXQoJ2Rpc2FibGVkJywgdGhpcy5jb25maWcpLFxuICAgICAgbGlzdCxcbiAgICAgIHR5cGU6ICdsYW5ndWFnZScsXG4gICAgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBvcHRpb25zXG4gICAgb3B0aW9ucy5mb3JFYWNoKGNvbnRyb2xzLmNyZWF0ZU1lbnVJdGVtLmJpbmQodGhpcykpO1xuXG4gICAgY29udHJvbHMudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsIHR5cGUsIGxpc3QpO1xuICB9LFxuXG4gIC8vIFNldCBhIGxpc3Qgb2YgYXZhaWxhYmxlIGNhcHRpb25zIGxhbmd1YWdlc1xuICBzZXRTcGVlZE1lbnUoKSB7XG4gICAgLy8gTWVudSByZXF1aXJlZFxuICAgIGlmICghaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5zcGVlZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0eXBlID0gJ3NwZWVkJztcbiAgICBjb25zdCBsaXN0ID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuc3BlZWQucXVlcnlTZWxlY3RvcignW3JvbGU9XCJtZW51XCJdJyk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGludmFsaWQgc3BlZWRzXG4gICAgdGhpcy5vcHRpb25zLnNwZWVkID0gdGhpcy5vcHRpb25zLnNwZWVkLmZpbHRlcihvID0+IG8gPj0gdGhpcy5taW5pbXVtU3BlZWQgJiYgbyA8PSB0aGlzLm1heGltdW1TcGVlZCk7XG5cbiAgICAvLyBUb2dnbGUgdGhlIHBhbmUgYW5kIHRhYlxuICAgIGNvbnN0IHRvZ2dsZSA9ICFpcy5lbXB0eSh0aGlzLm9wdGlvbnMuc3BlZWQpICYmIHRoaXMub3B0aW9ucy5zcGVlZC5sZW5ndGggPiAxO1xuICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnVCdXR0b24uY2FsbCh0aGlzLCB0eXBlLCB0b2dnbGUpO1xuXG4gICAgLy8gRW1wdHkgdGhlIG1lbnVcbiAgICBlbXB0eUVsZW1lbnQobGlzdCk7XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIHRvZ2dsZSB0aGUgcGFyZW50XG4gICAgY29udHJvbHMuY2hlY2tNZW51LmNhbGwodGhpcyk7XG5cbiAgICAvLyBJZiB3ZSdyZSBoaWRpbmcsIG5vdGhpbmcgbW9yZSB0byBkb1xuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGl0ZW1zXG4gICAgdGhpcy5vcHRpb25zLnNwZWVkLmZvckVhY2goc3BlZWQgPT4ge1xuICAgICAgY29udHJvbHMuY3JlYXRlTWVudUl0ZW0uY2FsbCh0aGlzLCB7XG4gICAgICAgIHZhbHVlOiBzcGVlZCxcbiAgICAgICAgbGlzdCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdGl0bGU6IGNvbnRyb2xzLmdldExhYmVsLmNhbGwodGhpcywgJ3NwZWVkJywgc3BlZWQpLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb250cm9scy51cGRhdGVTZXR0aW5nLmNhbGwodGhpcywgdHlwZSwgbGlzdCk7XG4gIH0sXG5cbiAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBoaWRlL3Nob3cgdGhlIHNldHRpbmdzIG1lbnVcbiAgY2hlY2tNZW51KCkge1xuICAgIGNvbnN0IHsgYnV0dG9ucyB9ID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncztcbiAgICBjb25zdCB2aXNpYmxlID0gIWlzLmVtcHR5KGJ1dHRvbnMpICYmIE9iamVjdC52YWx1ZXMoYnV0dG9ucykuc29tZShidXR0b24gPT4gIWJ1dHRvbi5oaWRkZW4pO1xuXG4gICAgdG9nZ2xlSGlkZGVuKHRoaXMuZWxlbWVudHMuc2V0dGluZ3MubWVudSwgIXZpc2libGUpO1xuICB9LFxuXG4gIC8vIEZvY3VzIHRoZSBmaXJzdCBtZW51IGl0ZW0gaW4gYSBnaXZlbiAob3IgdmlzaWJsZSkgbWVudVxuICBmb2N1c0ZpcnN0TWVudUl0ZW0ocGFuZSwgdGFiRm9jdXMgPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBvcHVwLmhpZGRlbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCB0YXJnZXQgPSBwYW5lO1xuXG4gICAgaWYgKCFpcy5lbGVtZW50KHRhcmdldCkpIHtcbiAgICAgIHRhcmdldCA9IE9iamVjdC52YWx1ZXModGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMpLmZpbmQocCA9PiAhcC5oaWRkZW4pO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCdbcm9sZV49XCJtZW51aXRlbVwiXScpO1xuXG4gICAgc2V0Rm9jdXMuY2FsbCh0aGlzLCBmaXJzdEl0ZW0sIHRhYkZvY3VzKTtcbiAgfSxcblxuICAvLyBTaG93L2hpZGUgbWVudVxuICB0b2dnbGVNZW51KGlucHV0KSB7XG4gICAgY29uc3QgeyBwb3B1cCB9ID0gdGhpcy5lbGVtZW50cy5zZXR0aW5ncztcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMuc2V0dGluZ3M7XG5cbiAgICAvLyBNZW51IGFuZCBidXR0b24gYXJlIHJlcXVpcmVkXG4gICAgaWYgKCFpcy5lbGVtZW50KHBvcHVwKSB8fCAhaXMuZWxlbWVudChidXR0b24pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJ1ZSB0b2dnbGUgYnkgZGVmYXVsdFxuICAgIGNvbnN0IHsgaGlkZGVuIH0gPSBwb3B1cDtcbiAgICBsZXQgc2hvdyA9IGhpZGRlbjtcblxuICAgIGlmIChpcy5ib29sZWFuKGlucHV0KSkge1xuICAgICAgc2hvdyA9IGlucHV0O1xuICAgIH0gZWxzZSBpZiAoaXMua2V5Ym9hcmRFdmVudChpbnB1dCkgJiYgaW5wdXQud2hpY2ggPT09IDI3KSB7XG4gICAgICBzaG93ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChpcy5ldmVudChpbnB1dCkpIHtcbiAgICAgIC8vIElmIFBseXIgaXMgaW4gYSBzaGFkb3dET00sIHRoZSBldmVudCB0YXJnZXQgaXMgc2V0IHRvIHRoZSBjb21wb25lbnQsIGluc3RlYWQgb2YgdGhlXG4gICAgICAvLyBFbGVtZW50IGluIHRoZSBzaGFkb3dET00uIFRoZSBwYXRoLCBpZiBhdmFpbGFibGUsIGlzIGNvbXBsZXRlLlxuICAgICAgY29uc3QgdGFyZ2V0ID0gaXMuZnVuY3Rpb24oaW5wdXQuY29tcG9zZWRQYXRoKSA/IGlucHV0LmNvbXBvc2VkUGF0aCgpWzBdIDogaW5wdXQudGFyZ2V0O1xuICAgICAgY29uc3QgaXNNZW51SXRlbSA9IHBvcHVwLmNvbnRhaW5zKHRhcmdldCk7XG5cbiAgICAgIC8vIElmIHRoZSBjbGljayB3YXMgaW5zaWRlIHRoZSBtZW51IG9yIGlmIHRoZSBjbGlja1xuICAgICAgLy8gd2Fzbid0IHRoZSBidXR0b24gb3IgbWVudSBpdGVtIGFuZCB3ZSdyZSB0cnlpbmcgdG9cbiAgICAgIC8vIHNob3cgdGhlIG1lbnUgKGEgZG9jIGNsaWNrIHNob3VsZG4ndCBzaG93IHRoZSBtZW51KVxuICAgICAgaWYgKGlzTWVudUl0ZW0gfHwgKCFpc01lbnVJdGVtICYmIGlucHV0LnRhcmdldCAhPT0gYnV0dG9uICYmIHNob3cpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgYnV0dG9uIGF0dHJpYnV0ZXNcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgc2hvdyk7XG5cbiAgICAvLyBTaG93IHRoZSBhY3R1YWwgcG9wdXBcbiAgICB0b2dnbGVIaWRkZW4ocG9wdXAsICFzaG93KTtcblxuICAgIC8vIEFkZCBjbGFzcyBob29rXG4gICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMubWVudS5vcGVuLCBzaG93KTtcblxuICAgIC8vIEZvY3VzIHRoZSBmaXJzdCBpdGVtIGlmIGtleSBpbnRlcmFjdGlvblxuICAgIGlmIChzaG93ICYmIGlzLmtleWJvYXJkRXZlbnQoaW5wdXQpKSB7XG4gICAgICBjb250cm9scy5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbCh0aGlzLCBudWxsLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKCFzaG93ICYmICFoaWRkZW4pIHtcbiAgICAgIC8vIElmIGNsb3NpbmcsIHJlLWZvY3VzIHRoZSBidXR0b25cbiAgICAgIHNldEZvY3VzLmNhbGwodGhpcywgYnV0dG9uLCBpcy5rZXlib2FyZEV2ZW50KGlucHV0KSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEdldCB0aGUgbmF0dXJhbCBzaXplIG9mIGEgbWVudSBwYW5lbFxuICBnZXRNZW51U2l6ZSh0YWIpIHtcbiAgICBjb25zdCBjbG9uZSA9IHRhYi5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgY2xvbmUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNsb25lLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgIGNsb25lLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cbiAgICAvLyBBcHBlbmQgdG8gcGFyZW50IHNvIHdlIGdldCB0aGUgXCJyZWFsXCIgc2l6ZVxuICAgIHRhYi5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGNsb25lKTtcblxuICAgIC8vIEdldCB0aGUgc2l6ZXMgYmVmb3JlIHdlIHJlbW92ZVxuICAgIGNvbnN0IHdpZHRoID0gY2xvbmUuc2Nyb2xsV2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gY2xvbmUuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgLy8gUmVtb3ZlIGZyb20gdGhlIERPTVxuICAgIHJlbW92ZUVsZW1lbnQoY2xvbmUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgIH07XG4gIH0sXG5cbiAgLy8gU2hvdyBhIHBhbmVsIGluIHRoZSBtZW51XG4gIHNob3dNZW51UGFuZWwodHlwZSA9ICcnLCB0YWJGb2N1cyA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5lbGVtZW50cy5jb250YWluZXIucXVlcnlTZWxlY3RvcihgI3BseXItc2V0dGluZ3MtJHt0aGlzLmlkfS0ke3R5cGV9YCk7XG5cbiAgICAvLyBOb3RoaW5nIHRvIHNob3csIGJhaWxcbiAgICBpZiAoIWlzLmVsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhpZGUgYWxsIG90aGVyIHBhbmVsc1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZmluZChub2RlID0+ICFub2RlLmhpZGRlbik7XG5cbiAgICAvLyBJZiB3ZSBjYW4gZG8gZmFuY3kgYW5pbWF0aW9ucywgd2UnbGwgYW5pbWF0ZSB0aGUgaGVpZ2h0L3dpZHRoXG4gICAgaWYgKHN1cHBvcnQudHJhbnNpdGlvbnMgJiYgIXN1cHBvcnQucmVkdWNlZE1vdGlvbikge1xuICAgICAgLy8gU2V0IHRoZSBjdXJyZW50IHdpZHRoIGFzIGEgYmFzZVxuICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7Y3VycmVudC5zY3JvbGxXaWR0aH1weGA7XG4gICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7Y3VycmVudC5zY3JvbGxIZWlnaHR9cHhgO1xuXG4gICAgICAvLyBHZXQgcG90ZW50aWFsIHNpemVzXG4gICAgICBjb25zdCBzaXplID0gY29udHJvbHMuZ2V0TWVudVNpemUuY2FsbCh0aGlzLCB0YXJnZXQpO1xuXG4gICAgICAvLyBSZXN0b3JlIGF1dG8gaGVpZ2h0L3dpZHRoXG4gICAgICBjb25zdCByZXN0b3JlID0gZXZlbnQgPT4ge1xuICAgICAgICAvLyBXZSdyZSBvbmx5IGJvdGhlcmVkIGFib3V0IGhlaWdodCBhbmQgd2lkdGggb24gdGhlIGNvbnRhaW5lclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBjb250YWluZXIgfHwgIVsnd2lkdGgnLCAnaGVpZ2h0J10uaW5jbHVkZXMoZXZlbnQucHJvcGVydHlOYW1lKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldmVydCBiYWNrIHRvIGF1dG9cbiAgICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnJztcblxuICAgICAgICAvLyBPbmx5IGxpc3RlbiBvbmNlXG4gICAgICAgIG9mZi5jYWxsKHRoaXMsIGNvbnRhaW5lciwgdHJhbnNpdGlvbkVuZEV2ZW50LCByZXN0b3JlKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIExpc3RlbiBmb3IgdGhlIHRyYW5zaXRpb24gZmluaXNoaW5nIGFuZCByZXN0b3JlIGF1dG8gaGVpZ2h0L3dpZHRoXG4gICAgICBvbi5jYWxsKHRoaXMsIGNvbnRhaW5lciwgdHJhbnNpdGlvbkVuZEV2ZW50LCByZXN0b3JlKTtcblxuICAgICAgLy8gU2V0IGRpbWVuc2lvbnMgdG8gdGFyZ2V0XG4gICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBgJHtzaXplLndpZHRofXB4YDtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtzaXplLmhlaWdodH1weGA7XG4gICAgfVxuXG4gICAgLy8gU2V0IGF0dHJpYnV0ZXMgb24gY3VycmVudCB0YWJcbiAgICB0b2dnbGVIaWRkZW4oY3VycmVudCwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgYXR0cmlidXRlcyBvbiB0YXJnZXRcbiAgICB0b2dnbGVIaWRkZW4odGFyZ2V0LCBmYWxzZSk7XG5cbiAgICAvLyBGb2N1cyB0aGUgZmlyc3QgaXRlbVxuICAgIGNvbnRyb2xzLmZvY3VzRmlyc3RNZW51SXRlbS5jYWxsKHRoaXMsIHRhcmdldCwgdGFiRm9jdXMpO1xuICB9LFxuXG4gIC8vIFNldCB0aGUgZG93bmxvYWQgVVJMXG4gIHNldERvd25sb2FkVXJsKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZWxlbWVudHMuYnV0dG9ucy5kb3dubG9hZDtcblxuICAgIC8vIEJhaWwgaWYgbm8gYnV0dG9uXG4gICAgaWYgKCFpcy5lbGVtZW50KGJ1dHRvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXQgYXR0cmlidXRlXG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnaHJlZicsIHRoaXMuZG93bmxvYWQpO1xuICB9LFxuXG4gIC8vIEJ1aWxkIHRoZSBkZWZhdWx0IEhUTUxcbiAgY3JlYXRlKGRhdGEpIHtcbiAgICBjb25zdCB7XG4gICAgICBiaW5kTWVudUl0ZW1TaG9ydGN1dHMsXG4gICAgICBjcmVhdGVCdXR0b24sXG4gICAgICBjcmVhdGVQcm9ncmVzcyxcbiAgICAgIGNyZWF0ZVJhbmdlLFxuICAgICAgY3JlYXRlVGltZSxcbiAgICAgIHNldFF1YWxpdHlNZW51LFxuICAgICAgc2V0U3BlZWRNZW51LFxuICAgICAgc2hvd01lbnVQYW5lbCxcbiAgICB9ID0gY29udHJvbHM7XG4gICAgdGhpcy5lbGVtZW50cy5jb250cm9scyA9IG51bGw7XG5cbiAgICAvLyBMYXJnZXIgb3ZlcmxhaWQgcGxheSBidXR0b25cbiAgICBpZiAoaXMuYXJyYXkodGhpcy5jb25maWcuY29udHJvbHMpICYmIHRoaXMuY29uZmlnLmNvbnRyb2xzLmluY2x1ZGVzKCdwbGF5LWxhcmdlJykpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKHRoaXMsICdwbGF5LWxhcmdlJykpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgY29udGFpbmVyXG4gICAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2JywgZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuY29udHJvbHMud3JhcHBlcikpO1xuICAgIHRoaXMuZWxlbWVudHMuY29udHJvbHMgPSBjb250YWluZXI7XG5cbiAgICAvLyBEZWZhdWx0IGl0ZW0gYXR0cmlidXRlc1xuICAgIGNvbnN0IGRlZmF1bHRBdHRyaWJ1dGVzID0geyBjbGFzczogJ3BseXJfX2NvbnRyb2xzX19pdGVtJyB9O1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGNvbnRyb2xzIGluIG9yZGVyXG4gICAgZGVkdXBlKGlzLmFycmF5KHRoaXMuY29uZmlnLmNvbnRyb2xzKSA/IHRoaXMuY29uZmlnLmNvbnRyb2xzOiBbXSkuZm9yRWFjaChjb250cm9sID0+IHtcbiAgICAgIC8vIFJlc3RhcnQgYnV0dG9uXG4gICAgICBpZiAoY29udHJvbCA9PT0gJ3Jlc3RhcnQnKSB7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24uY2FsbCh0aGlzLCAncmVzdGFydCcsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJld2luZCBidXR0b25cbiAgICAgIGlmIChjb250cm9sID09PSAncmV3aW5kJykge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ3Jld2luZCcsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBsYXkvUGF1c2UgYnV0dG9uXG4gICAgICBpZiAoY29udHJvbCA9PT0gJ3BsYXknKSB7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24uY2FsbCh0aGlzLCAncGxheScsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZhc3QgZm9yd2FyZCBidXR0b25cbiAgICAgIGlmIChjb250cm9sID09PSAnZmFzdC1mb3J3YXJkJykge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ2Zhc3QtZm9yd2FyZCcsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFByb2dyZXNzXG4gICAgICBpZiAoY29udHJvbCA9PT0gJ3Byb2dyZXNzJykge1xuICAgICAgICBjb25zdCBwcm9ncmVzc0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogYCR7ZGVmYXVsdEF0dHJpYnV0ZXMuY2xhc3N9IHBseXJfX3Byb2dyZXNzX19jb250YWluZXJgLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIGdldEF0dHJpYnV0ZXNGcm9tU2VsZWN0b3IodGhpcy5jb25maWcuc2VsZWN0b3JzLnByb2dyZXNzKSk7XG5cbiAgICAgICAgLy8gU2VlayByYW5nZSBzbGlkZXJcbiAgICAgICAgcHJvZ3Jlc3MuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgY3JlYXRlUmFuZ2UuY2FsbCh0aGlzLCAnc2VlaycsIHtcbiAgICAgICAgICAgIGlkOiBgcGx5ci1zZWVrLSR7ZGF0YS5pZH1gLFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEJ1ZmZlciBwcm9ncmVzc1xuICAgICAgICBwcm9ncmVzcy5hcHBlbmRDaGlsZChjcmVhdGVQcm9ncmVzcy5jYWxsKHRoaXMsICdidWZmZXInKSk7XG5cbiAgICAgICAgLy8gVE9ETzogQWRkIGxvb3AgZGlzcGxheSBpbmRpY2F0b3JcblxuICAgICAgICAvLyBTZWVrIHRvb2x0aXBcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnRvb2x0aXBzLnNlZWspIHtcbiAgICAgICAgICBjb25zdCB0b29sdGlwID0gY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3M6IHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudG9vbHRpcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnMDA6MDAnLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBwcm9ncmVzcy5hcHBlbmRDaGlsZCh0b29sdGlwKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmRpc3BsYXkuc2Vla1Rvb2x0aXAgPSB0b29sdGlwO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50cy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICBwcm9ncmVzc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnByb2dyZXNzKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2dyZXNzQ29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gTWVkaWEgY3VycmVudCB0aW1lIGRpc3BsYXlcbiAgICAgIGlmIChjb250cm9sID09PSAnY3VycmVudC10aW1lJykge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlVGltZS5jYWxsKHRoaXMsICdjdXJyZW50VGltZScsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1lZGlhIGR1cmF0aW9uIGRpc3BsYXlcbiAgICAgIGlmIChjb250cm9sID09PSAnZHVyYXRpb24nKSB7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVUaW1lLmNhbGwodGhpcywgJ2R1cmF0aW9uJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gVm9sdW1lIGNvbnRyb2xzXG4gICAgICBpZiAoY29udHJvbCA9PT0gJ211dGUnIHx8IGNvbnRyb2wgPT09ICd2b2x1bWUnKSB7XG4gICAgICAgIGxldCB7IHZvbHVtZSB9ID0gdGhpcy5lbGVtZW50cztcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIHZvbHVtZSBjb250YWluZXIgaWYgbmVlZGVkXG4gICAgICAgIGlmICghaXMuZWxlbWVudCh2b2x1bWUpIHx8ICFjb250YWluZXIuY29udGFpbnModm9sdW1lKSkge1xuICAgICAgICAgIHZvbHVtZSA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIGV4dGVuZCh7fSwgZGVmYXVsdEF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgICAgY2xhc3M6IGAke2RlZmF1bHRBdHRyaWJ1dGVzLmNsYXNzfSBwbHlyX192b2x1bWVgLnRyaW0oKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLnZvbHVtZSA9IHZvbHVtZTtcblxuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2b2x1bWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVG9nZ2xlIG11dGUgYnV0dG9uXG4gICAgICAgIGlmIChjb250cm9sID09PSAnbXV0ZScpIHtcbiAgICAgICAgICB2b2x1bWUuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ211dGUnKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWb2x1bWUgcmFuZ2UgY29udHJvbFxuICAgICAgICAvLyBJZ25vcmVkIG9uIGlPUyBhcyBpdCdzIGhhbmRsZWQgZ2xvYmFsbHlcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvc2FmYXJpL2RvY3VtZW50YXRpb24vQXVkaW9WaWRlby9Db25jZXB0dWFsL1VzaW5nX0hUTUw1X0F1ZGlvX1ZpZGVvL0RldmljZS1TcGVjaWZpY0NvbnNpZGVyYXRpb25zL0RldmljZS1TcGVjaWZpY0NvbnNpZGVyYXRpb25zLmh0bWxcbiAgICAgICAgaWYgKGNvbnRyb2wgPT09ICd2b2x1bWUnICYmICFicm93c2VyLmlzSW9zKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgIG1heDogMSxcbiAgICAgICAgICAgIHN0ZXA6IDAuMDUsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5jb25maWcudm9sdW1lLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBDcmVhdGUgdGhlIHZvbHVtZSByYW5nZSBzbGlkZXJcbiAgICAgICAgICB2b2x1bWUuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICBjcmVhdGVSYW5nZS5jYWxsKFxuICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAndm9sdW1lJyxcbiAgICAgICAgICAgICAgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgICAgICBpZDogYHBseXItdm9sdW1lLSR7ZGF0YS5pZH1gLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUb2dnbGUgY2FwdGlvbnMgYnV0dG9uXG4gICAgICBpZiAoY29udHJvbCA9PT0gJ2NhcHRpb25zJykge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ2NhcHRpb25zJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dGluZ3MgYnV0dG9uIC8gbWVudVxuICAgICAgaWYgKGNvbnRyb2wgPT09ICdzZXR0aW5ncycgJiYgIWlzLmVtcHR5KHRoaXMuY29uZmlnLnNldHRpbmdzKSkge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICBleHRlbmQoe30sIGRlZmF1bHRBdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICBjbGFzczogYCR7ZGVmYXVsdEF0dHJpYnV0ZXMuY2xhc3N9IHBseXJfX21lbnVgLnRyaW0oKSxcbiAgICAgICAgICAgIGhpZGRlbjogJycsXG4gICAgICAgICAgfSksXG4gICAgICAgICk7XG5cbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChcbiAgICAgICAgICBjcmVhdGVCdXR0b24uY2FsbCh0aGlzLCAnc2V0dGluZ3MnLCB7XG4gICAgICAgICAgICAnYXJpYS1oYXNwb3B1cCc6IHRydWUsXG4gICAgICAgICAgICAnYXJpYS1jb250cm9scyc6IGBwbHlyLXNldHRpbmdzLSR7ZGF0YS5pZH1gLFxuICAgICAgICAgICAgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwb3B1cCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogJ3BseXJfX21lbnVfX2NvbnRhaW5lcicsXG4gICAgICAgICAgaWQ6IGBwbHlyLXNldHRpbmdzLSR7ZGF0YS5pZH1gLFxuICAgICAgICAgIGhpZGRlbjogJycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGlubmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3QgaG9tZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBpZDogYHBseXItc2V0dGluZ3MtJHtkYXRhLmlkfS1ob21lYCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtZW51XG4gICAgICAgIGNvbnN0IG1lbnUgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgcm9sZTogJ21lbnUnLFxuICAgICAgICB9KTtcblxuICAgICAgICBob21lLmFwcGVuZENoaWxkKG1lbnUpO1xuICAgICAgICBpbm5lci5hcHBlbmRDaGlsZChob21lKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuaG9tZSA9IGhvbWU7XG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIG1lbnUgaXRlbXNcbiAgICAgICAgdGhpcy5jb25maWcuc2V0dGluZ3MuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgICAgICAvLyBUT0RPOiBidW5kbGUgdGhpcyB3aXRoIHRoZSBjcmVhdGVNZW51SXRlbSBoZWxwZXIgYW5kIGJpbmRpbmdzXG4gICAgICAgICAgY29uc3QgbWVudUl0ZW0gPSBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICBleHRlbmQoZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5zZXR0aW5ncyksIHtcbiAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgIGNsYXNzOiBgJHt0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2x9ICR7dGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sfS0tZm9yd2FyZGAsXG4gICAgICAgICAgICAgIHJvbGU6ICdtZW51aXRlbScsXG4gICAgICAgICAgICAgICdhcmlhLWhhc3BvcHVwJzogdHJ1ZSxcbiAgICAgICAgICAgICAgaGlkZGVuOiAnJyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBCaW5kIG1lbnUgc2hvcnRjdXRzIGZvciBrZXlib2FyZCB1c2Vyc1xuICAgICAgICAgIGJpbmRNZW51SXRlbVNob3J0Y3V0cy5jYWxsKHRoaXMsIG1lbnVJdGVtLCB0eXBlKTtcblxuICAgICAgICAgIC8vIFNob3cgbWVudSBvbiBjbGlja1xuICAgICAgICAgIG9uLmNhbGwodGhpcywgbWVudUl0ZW0sICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNob3dNZW51UGFuZWwuY2FsbCh0aGlzLCB0eXBlLCBmYWxzZSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCBmbGV4ID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIG51bGwsIGkxOG4uZ2V0KHR5cGUsIHRoaXMuY29uZmlnKSk7XG5cbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51LnZhbHVlLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gU3BlZWQgY29udGFpbnMgSFRNTCBlbnRpdGllc1xuICAgICAgICAgIHZhbHVlLmlubmVySFRNTCA9IGRhdGFbdHlwZV07XG5cbiAgICAgICAgICBmbGV4LmFwcGVuZENoaWxkKHZhbHVlKTtcbiAgICAgICAgICBtZW51SXRlbS5hcHBlbmRDaGlsZChmbGV4KTtcbiAgICAgICAgICBtZW51LmFwcGVuZENoaWxkKG1lbnVJdGVtKTtcblxuICAgICAgICAgIC8vIEJ1aWxkIHRoZSBwYW5lc1xuICAgICAgICAgIGNvbnN0IHBhbmUgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICBpZDogYHBseXItc2V0dGluZ3MtJHtkYXRhLmlkfS0ke3R5cGV9YCxcbiAgICAgICAgICAgIGhpZGRlbjogJycsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBCYWNrIGJ1dHRvblxuICAgICAgICAgIGNvbnN0IGJhY2tCdXR0b24gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XG4gICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgIGNsYXNzOiBgJHt0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2x9ICR7dGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sfS0tYmFja2AsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBWaXNpYmxlIGxhYmVsXG4gICAgICAgICAgYmFja0J1dHRvbi5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICdhcmlhLWhpZGRlbic6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGkxOG4uZ2V0KHR5cGUsIHRoaXMuY29uZmlnKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFNjcmVlbiByZWFkZXIgbGFiZWxcbiAgICAgICAgICBiYWNrQnV0dG9uLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3M6IHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaGlkZGVuLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBpMThuLmdldCgnbWVudUJhY2snLCB0aGlzLmNvbmZpZyksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBHbyBiYWNrIHZpYSBrZXlib2FyZFxuICAgICAgICAgIG9uLmNhbGwoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgcGFuZSxcbiAgICAgICAgICAgICdrZXlkb3duJyxcbiAgICAgICAgICAgIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgLy8gV2Ugb25seSBjYXJlIGFib3V0IDwtXG4gICAgICAgICAgICAgIGlmIChldmVudC53aGljaCAhPT0gMzcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBQcmV2ZW50IHNlZWtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgcmVzcGVjdGl2ZSBtZW51XG4gICAgICAgICAgICAgIHNob3dNZW51UGFuZWwuY2FsbCh0aGlzLCAnaG9tZScsIHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBHbyBiYWNrIHZpYSBidXR0b24gY2xpY2tcbiAgICAgICAgICBvbi5jYWxsKHRoaXMsIGJhY2tCdXR0b24sICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNob3dNZW51UGFuZWwuY2FsbCh0aGlzLCAnaG9tZScsIGZhbHNlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIEFkZCB0byBwYW5lXG4gICAgICAgICAgcGFuZS5hcHBlbmRDaGlsZChiYWNrQnV0dG9uKTtcblxuICAgICAgICAgIC8vIE1lbnVcbiAgICAgICAgICBwYW5lLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICByb2xlOiAnbWVudScsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG5cbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLnNldHRpbmdzLmJ1dHRvbnNbdHlwZV0gPSBtZW51SXRlbTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVsc1t0eXBlXSA9IHBhbmU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBvcHVwLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcblxuICAgICAgICB0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBvcHVwID0gcG9wdXA7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuc2V0dGluZ3MubWVudSA9IHdyYXBwZXI7XG4gICAgICB9XG5cbiAgICAgIC8vIFBpY3R1cmUgaW4gcGljdHVyZSBidXR0b25cbiAgICAgIGlmIChjb250cm9sID09PSAncGlwJyAmJiBzdXBwb3J0LnBpcCkge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ3BpcCcsIGRlZmF1bHRBdHRyaWJ1dGVzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFpcnBsYXkgYnV0dG9uXG4gICAgICBpZiAoY29udHJvbCA9PT0gJ2FpcnBsYXknICYmIHN1cHBvcnQuYWlycGxheSkge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ2FpcnBsYXknLCBkZWZhdWx0QXR0cmlidXRlcykpO1xuICAgICAgfVxuXG4gICAgICAvLyBEb3dubG9hZCBidXR0b25cbiAgICAgIGlmIChjb250cm9sID09PSAnZG93bmxvYWQnKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBleHRlbmQoe30sIGRlZmF1bHRBdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgZWxlbWVudDogJ2EnLFxuICAgICAgICAgIGhyZWY6IHRoaXMuZG93bmxvYWQsXG4gICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2V0IGRvd25sb2FkIGF0dHJpYnV0ZSBmb3IgSFRNTDUgb25seVxuICAgICAgICBpZiAodGhpcy5pc0hUTUw1KSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5kb3dubG9hZCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBkb3dubG9hZCB9ID0gdGhpcy5jb25maWcudXJscztcblxuICAgICAgICBpZiAoIWlzLnVybChkb3dubG9hZCkgJiYgdGhpcy5pc0VtYmVkKSB7XG4gICAgICAgICAgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIGljb246IGBsb2dvLSR7dGhpcy5wcm92aWRlcn1gLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvdmlkZXIsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uLmNhbGwodGhpcywgJ2Rvd25sb2FkJywgYXR0cmlidXRlcykpO1xuICAgICAgfVxuXG4gICAgICAvLyBUb2dnbGUgZnVsbHNjcmVlbiBidXR0b25cbiAgICAgIGlmIChjb250cm9sID09PSAnZnVsbHNjcmVlbicpIHtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbi5jYWxsKHRoaXMsICdmdWxsc2NyZWVuJywgZGVmYXVsdEF0dHJpYnV0ZXMpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFNldCBhdmFpbGFibGUgcXVhbGl0eSBsZXZlbHNcbiAgICBpZiAodGhpcy5pc0hUTUw1KSB7XG4gICAgICBzZXRRdWFsaXR5TWVudS5jYWxsKHRoaXMsIGh0bWw1LmdldFF1YWxpdHlPcHRpb25zLmNhbGwodGhpcykpO1xuICAgIH1cblxuICAgIHNldFNwZWVkTWVudS5jYWxsKHRoaXMpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfSxcblxuICAvLyBJbnNlcnQgY29udHJvbHNcbiAgaW5qZWN0KCkge1xuICAgIC8vIFNwcml0ZVxuICAgIGlmICh0aGlzLmNvbmZpZy5sb2FkU3ByaXRlKSB7XG4gICAgICBjb25zdCBpY29uID0gY29udHJvbHMuZ2V0SWNvblVybC5jYWxsKHRoaXMpO1xuXG4gICAgICAvLyBPbmx5IGxvYWQgZXh0ZXJuYWwgc3ByaXRlIHVzaW5nIEFKQVhcbiAgICAgIGlmIChpY29uLmNvcnMpIHtcbiAgICAgICAgbG9hZFNwcml0ZShpY29uLnVybCwgJ3Nwcml0ZS1wbHlyJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgdW5pcXVlIElEXG4gICAgdGhpcy5pZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcblxuICAgIC8vIE51bGwgYnkgZGVmYXVsdFxuICAgIGxldCBjb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuZWxlbWVudHMuY29udHJvbHMgPSBudWxsO1xuXG4gICAgLy8gU2V0IHRlbXBsYXRlIHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgc2Vla3RpbWU6IHRoaXMuY29uZmlnLnNlZWtUaW1lLFxuICAgICAgdGl0bGU6IHRoaXMuY29uZmlnLnRpdGxlLFxuICAgIH07XG4gICAgbGV0IHVwZGF0ZSA9IHRydWU7XG5cbiAgICAvLyBJZiBmdW5jdGlvbiwgcnVuIGl0IGFuZCB1c2Ugb3V0cHV0XG4gICAgaWYgKGlzLmZ1bmN0aW9uKHRoaXMuY29uZmlnLmNvbnRyb2xzKSkge1xuICAgICAgdGhpcy5jb25maWcuY29udHJvbHMgPSB0aGlzLmNvbmZpZy5jb250cm9scy5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IGZhbHN5IGNvbnRyb2xzIHRvIGVtcHR5IGFycmF5IChwcmltYXJpbHkgZm9yIGVtcHR5IHN0cmluZ3MpXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5jb250cm9scykge1xuICAgICAgdGhpcy5jb25maWcuY29udHJvbHMgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAoaXMuZWxlbWVudCh0aGlzLmNvbmZpZy5jb250cm9scykgfHwgaXMuc3RyaW5nKHRoaXMuY29uZmlnLmNvbnRyb2xzKSkge1xuICAgICAgLy8gSFRNTEVsZW1lbnQgb3IgTm9uLWVtcHR5IHN0cmluZyBwYXNzZWQgYXMgdGhlIG9wdGlvblxuICAgICAgY29udGFpbmVyID0gdGhpcy5jb25maWcuY29udHJvbHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBjb250cm9sc1xuICAgICAgY29udGFpbmVyID0gY29udHJvbHMuY3JlYXRlLmNhbGwodGhpcywge1xuICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgc2Vla3RpbWU6IHRoaXMuY29uZmlnLnNlZWtUaW1lLFxuICAgICAgICBzcGVlZDogdGhpcy5zcGVlZCxcbiAgICAgICAgcXVhbGl0eTogdGhpcy5xdWFsaXR5LFxuICAgICAgICBjYXB0aW9uczogY2FwdGlvbnMuZ2V0TGFiZWwuY2FsbCh0aGlzKSxcbiAgICAgICAgLy8gVE9ETzogTG9vcGluZ1xuICAgICAgICAvLyBsb29wOiAnTm9uZScsXG4gICAgICB9KTtcbiAgICAgIHVwZGF0ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFJlcGxhY2UgcHJvcHMgd2l0aCB0aGVpciB2YWx1ZVxuICAgIGNvbnN0IHJlcGxhY2UgPSBpbnB1dCA9PiB7XG4gICAgICBsZXQgcmVzdWx0ID0gaW5wdXQ7XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKHByb3BzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgcmVzdWx0ID0gcmVwbGFjZUFsbChyZXN1bHQsIGB7JHtrZXl9fWAsIHZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICAvLyBVcGRhdGUgbWFya3VwXG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgaWYgKGlzLnN0cmluZyh0aGlzLmNvbmZpZy5jb250cm9scykpIHtcbiAgICAgICAgY29udGFpbmVyID0gcmVwbGFjZShjb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENvbnRyb2xzIGNvbnRhaW5lclxuICAgIGxldCB0YXJnZXQ7XG5cbiAgICAvLyBJbmplY3QgdG8gY3VzdG9tIGxvY2F0aW9uXG4gICAgaWYgKGlzLnN0cmluZyh0aGlzLmNvbmZpZy5zZWxlY3RvcnMuY29udHJvbHMuY29udGFpbmVyKSkge1xuICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuY29udHJvbHMuY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvLyBJbmplY3QgaW50byB0aGUgY29udGFpbmVyIGJ5IGRlZmF1bHRcbiAgICBpZiAoIWlzLmVsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgdGFyZ2V0ID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG4gICAgfVxuXG4gICAgLy8gSW5qZWN0IGNvbnRyb2xzIEhUTUwgKG5lZWRzIHRvIGJlIGJlZm9yZSBjYXB0aW9ucywgaGVuY2UgXCJhZnRlcmJlZ2luXCIpXG4gICAgY29uc3QgaW5zZXJ0TWV0aG9kID0gaXMuZWxlbWVudChjb250YWluZXIpID8gJ2luc2VydEFkamFjZW50RWxlbWVudCcgOiAnaW5zZXJ0QWRqYWNlbnRIVE1MJztcbiAgICB0YXJnZXRbaW5zZXJ0TWV0aG9kXSgnYWZ0ZXJiZWdpbicsIGNvbnRhaW5lcik7XG5cbiAgICAvLyBGaW5kIHRoZSBlbGVtZW50cyBpZiBuZWVkIGJlXG4gICAgaWYgKCFpcy5lbGVtZW50KHRoaXMuZWxlbWVudHMuY29udHJvbHMpKSB7XG4gICAgICBjb250cm9scy5maW5kRWxlbWVudHMuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgcHJlc3NlZCBwcm9wZXJ0eSB0byBidXR0b25zXG4gICAgaWYgKCFpcy5lbXB0eSh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMpKSB7XG4gICAgICBjb25zdCBhZGRQcm9wZXJ0eSA9IGJ1dHRvbiA9PiB7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuY29udHJvbFByZXNzZWQ7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShidXR0b24sICdwcmVzc2VkJywge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhc0NsYXNzKGJ1dHRvbiwgY2xhc3NOYW1lKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldChwcmVzc2VkID0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGJ1dHRvbiwgY2xhc3NOYW1lLCBwcmVzc2VkKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFRvZ2dsZSBjbGFzc25hbWUgd2hlbiBwcmVzc2VkIHByb3BlcnR5IGlzIHNldFxuICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICBpZiAoaXMuYXJyYXkoYnV0dG9uKSB8fCBpcy5ub2RlTGlzdChidXR0b24pKSB7XG4gICAgICAgICAgICBBcnJheS5mcm9tKGJ1dHRvbilcbiAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgICAgICAuZm9yRWFjaChhZGRQcm9wZXJ0eSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZFByb3BlcnR5KGJ1dHRvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBFZGdlIHNvbWV0aW1lcyBkb2Vzbid0IGZpbmlzaCB0aGUgcGFpbnQgc28gZm9yY2UgYSByZXBhaW50XG4gICAgaWYgKGJyb3dzZXIuaXNFZGdlKSB7XG4gICAgICByZXBhaW50KHRhcmdldCk7XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgdG9vbHRpcHNcbiAgICBpZiAodGhpcy5jb25maWcudG9vbHRpcHMuY29udHJvbHMpIHtcbiAgICAgIGNvbnN0IHsgY2xhc3NOYW1lcywgc2VsZWN0b3JzIH0gPSB0aGlzLmNvbmZpZztcbiAgICAgIGNvbnN0IHNlbGVjdG9yID0gYCR7c2VsZWN0b3JzLmNvbnRyb2xzLndyYXBwZXJ9ICR7c2VsZWN0b3JzLmxhYmVsc30gLiR7Y2xhc3NOYW1lcy5oaWRkZW59YDtcbiAgICAgIGNvbnN0IGxhYmVscyA9IGdldEVsZW1lbnRzLmNhbGwodGhpcywgc2VsZWN0b3IpO1xuXG4gICAgICBBcnJheS5mcm9tKGxhYmVscykuZm9yRWFjaChsYWJlbCA9PiB7XG4gICAgICAgIHRvZ2dsZUNsYXNzKGxhYmVsLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmhpZGRlbiwgZmFsc2UpO1xuICAgICAgICB0b2dnbGVDbGFzcyhsYWJlbCwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy50b29sdGlwLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xzO1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVSTCB1dGlsc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGlzIGZyb20gJy4vaXMnO1xuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIHRvIGEgVVJMIG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IC0gdGhlIFVSTCB0byBiZSBwYXJzZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2FmZSAtIGZhaWxzYWZlIHBhcnNpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsKGlucHV0LCBzYWZlID0gdHJ1ZSkge1xuICBsZXQgdXJsID0gaW5wdXQ7XG5cbiAgaWYgKHNhZmUpIHtcbiAgICBjb25zdCBwYXJzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgcGFyc2VyLmhyZWYgPSB1cmw7XG4gICAgdXJsID0gcGFyc2VyLmhyZWY7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBuZXcgVVJMKHVybCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBDb252ZXJ0IG9iamVjdCB0byBVUkxTZWFyY2hQYXJhbXNcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFVybFBhcmFtcyhpbnB1dCkge1xuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cbiAgaWYgKGlzLm9iamVjdChpbnB1dCkpIHtcbiAgICBPYmplY3QuZW50cmllcyhpbnB1dCkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBwYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtcztcbn1cbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDb25zb2xlIHdyYXBwZXJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc29sZSB7XG4gIGNvbnN0cnVjdG9yKGVuYWJsZWQgPSBmYWxzZSkge1xuICAgIHRoaXMuZW5hYmxlZCA9IHdpbmRvdy5jb25zb2xlICYmIGVuYWJsZWQ7XG5cbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICB0aGlzLmxvZygnRGVidWdnaW5nIGVuYWJsZWQnKTtcbiAgICB9XG4gIH1cblxuICBnZXQgbG9nKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlZCA/IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUpIDogbm9vcDtcbiAgfVxuXG4gIGdldCB3YXJuKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlZCA/IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS53YXJuLCBjb25zb2xlKSA6IG5vb3A7XG4gIH1cblxuICBnZXQgZXJyb3IoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gdGhpcy5lbmFibGVkID8gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLCBjb25zb2xlKSA6IG5vb3A7XG4gIH1cbn1cbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQbHlyIENhcHRpb25zXG4vLyBUT0RPOiBDcmVhdGUgYXMgY2xhc3Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBjb250cm9scyBmcm9tICcuL2NvbnRyb2xzJztcbmltcG9ydCBzdXBwb3J0IGZyb20gJy4vc3VwcG9ydCc7XG5pbXBvcnQgeyBkZWR1cGUgfSBmcm9tICcuL3V0aWxzL2FycmF5cyc7XG5pbXBvcnQgYnJvd3NlciBmcm9tICcuL3V0aWxzL2Jyb3dzZXInO1xuaW1wb3J0IHtcbiAgY3JlYXRlRWxlbWVudCxcbiAgZW1wdHlFbGVtZW50LFxuICBnZXRBdHRyaWJ1dGVzRnJvbVNlbGVjdG9yLFxuICBpbnNlcnRBZnRlcixcbiAgcmVtb3ZlRWxlbWVudCxcbiAgdG9nZ2xlQ2xhc3MsXG59IGZyb20gJy4vdXRpbHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgb24sIHRyaWdnZXJFdmVudCB9IGZyb20gJy4vdXRpbHMvZXZlbnRzJztcbmltcG9ydCBmZXRjaCBmcm9tICcuL3V0aWxzL2ZldGNoJztcbmltcG9ydCBpMThuIGZyb20gJy4vdXRpbHMvaTE4bic7XG5pbXBvcnQgaXMgZnJvbSAnLi91dGlscy9pcyc7XG5pbXBvcnQgeyBnZXRIVE1MIH0gZnJvbSAnLi91dGlscy9zdHJpbmdzJztcbmltcG9ydCB7IHBhcnNlVXJsIH0gZnJvbSAnLi91dGlscy91cmxzJztcblxuY29uc3QgY2FwdGlvbnMgPSB7XG4gIC8vIFNldHVwIGNhcHRpb25zXG4gIHNldHVwKCkge1xuICAgIC8vIFJlcXVpcmVzIFVJIHN1cHBvcnRcbiAgICBpZiAoIXRoaXMuc3VwcG9ydGVkLnVpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gT25seSBWaW1lbyBhbmQgSFRNTDUgdmlkZW8gc3VwcG9ydGVkIGF0IHRoaXMgcG9pbnRcbiAgICBpZiAoIXRoaXMuaXNWaWRlbyB8fCB0aGlzLmlzWW91VHViZSB8fCAodGhpcy5pc0hUTUw1ICYmICFzdXBwb3J0LnRleHRUcmFja3MpKSB7XG4gICAgICAvLyBDbGVhciBtZW51IGFuZCBoaWRlXG4gICAgICBpZiAoXG4gICAgICAgIGlzLmFycmF5KHRoaXMuY29uZmlnLmNvbnRyb2xzKSAmJlxuICAgICAgICB0aGlzLmNvbmZpZy5jb250cm9scy5pbmNsdWRlcygnc2V0dGluZ3MnKSAmJlxuICAgICAgICB0aGlzLmNvbmZpZy5zZXR0aW5ncy5pbmNsdWRlcygnY2FwdGlvbnMnKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRyb2xzLnNldENhcHRpb25zTWVudS5jYWxsKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5qZWN0IHRoZSBjb250YWluZXJcbiAgICBpZiAoIWlzLmVsZW1lbnQodGhpcy5lbGVtZW50cy5jYXB0aW9ucykpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMuY2FwdGlvbnMgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBnZXRBdHRyaWJ1dGVzRnJvbVNlbGVjdG9yKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jYXB0aW9ucykpO1xuXG4gICAgICBpbnNlcnRBZnRlcih0aGlzLmVsZW1lbnRzLmNhcHRpb25zLCB0aGlzLmVsZW1lbnRzLndyYXBwZXIpO1xuICAgIH1cblxuICAgIC8vIEZpeCBJRSBjYXB0aW9ucyBpZiBDT1JTIGlzIHVzZWRcbiAgICAvLyBGZXRjaCBjYXB0aW9ucyBhbmQgaW5qZWN0IGFzIGJsb2JzIGluc3RlYWQgKGRhdGEgVVJJcyBub3Qgc3VwcG9ydGVkISlcbiAgICBpZiAoYnJvd3Nlci5pc0lFICYmIHdpbmRvdy5VUkwpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yQWxsKCd0cmFjaycpO1xuXG4gICAgICBBcnJheS5mcm9tKGVsZW1lbnRzKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgY29uc3Qgc3JjID0gdHJhY2suZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgICAgY29uc3QgdXJsID0gcGFyc2VVcmwoc3JjKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgdXJsICE9PSBudWxsICYmXG4gICAgICAgICAgdXJsLmhvc3RuYW1lICE9PSB3aW5kb3cubG9jYXRpb24uaHJlZi5ob3N0bmFtZSAmJlxuICAgICAgICAgIFsnaHR0cDonLCAnaHR0cHM6J10uaW5jbHVkZXModXJsLnByb3RvY29sKVxuICAgICAgICApIHtcbiAgICAgICAgICBmZXRjaChzcmMsICdibG9iJylcbiAgICAgICAgICAgIC50aGVuKGJsb2IgPT4ge1xuICAgICAgICAgICAgICB0cmFjay5zZXRBdHRyaWJ1dGUoJ3NyYycsIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICByZW1vdmVFbGVtZW50KHRyYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHZXQgYW5kIHNldCBpbml0aWFsIGRhdGFcbiAgICAvLyBUaGUgXCJwcmVmZXJyZWRcIiBvcHRpb25zIGFyZSBub3QgcmVhbGl6ZWQgdW5sZXNzIC8gdW50aWwgdGhlIHdhbnRlZCBsYW5ndWFnZSBoYXMgYSBtYXRjaFxuICAgIC8vICogbGFuZ3VhZ2VzOiBBcnJheSBvZiB1c2VyJ3MgYnJvd3NlciBsYW5ndWFnZXMuXG4gICAgLy8gKiBsYW5ndWFnZTogIFRoZSBsYW5ndWFnZSBwcmVmZXJyZWQgYnkgdXNlciBzZXR0aW5ncyBvciBjb25maWdcbiAgICAvLyAqIGFjdGl2ZTogICAgVGhlIHN0YXRlIHByZWZlcnJlZCBieSB1c2VyIHNldHRpbmdzIG9yIGNvbmZpZ1xuICAgIC8vICogdG9nZ2xlZDogICBUaGUgcmVhbCBjYXB0aW9ucyBzdGF0ZVxuXG4gICAgY29uc3QgYnJvd3Nlckxhbmd1YWdlcyA9IG5hdmlnYXRvci5sYW5ndWFnZXMgfHwgW25hdmlnYXRvci5sYW5ndWFnZSB8fCBuYXZpZ2F0b3IudXNlckxhbmd1YWdlIHx8ICdlbiddO1xuICAgIGNvbnN0IGxhbmd1YWdlcyA9IGRlZHVwZShicm93c2VyTGFuZ3VhZ2VzLm1hcChsYW5ndWFnZSA9PiBsYW5ndWFnZS5zcGxpdCgnLScpWzBdKSk7XG4gICAgbGV0IGxhbmd1YWdlID0gKHRoaXMuc3RvcmFnZS5nZXQoJ2xhbmd1YWdlJykgfHwgdGhpcy5jb25maWcuY2FwdGlvbnMubGFuZ3VhZ2UgfHwgJ2F1dG8nKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gVXNlIGZpcnN0IGJyb3dzZXIgbGFuZ3VhZ2Ugd2hlbiBsYW5ndWFnZSBpcyAnYXV0bydcbiAgICBpZiAobGFuZ3VhZ2UgPT09ICdhdXRvJykge1xuICAgICAgW2xhbmd1YWdlXSA9IGxhbmd1YWdlcztcbiAgICB9XG5cbiAgICBsZXQgYWN0aXZlID0gdGhpcy5zdG9yYWdlLmdldCgnY2FwdGlvbnMnKTtcbiAgICBpZiAoIWlzLmJvb2xlYW4oYWN0aXZlKSkge1xuICAgICAgKHsgYWN0aXZlIH0gPSB0aGlzLmNvbmZpZy5jYXB0aW9ucyk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmNhcHRpb25zLCB7XG4gICAgICB0b2dnbGVkOiBmYWxzZSxcbiAgICAgIGFjdGl2ZSxcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgbGFuZ3VhZ2VzLFxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggY2hhbmdlcyB0byB0ZXh0VHJhY2tzIGFuZCB1cGRhdGUgY2FwdGlvbnMgbWVudVxuICAgIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICAgIGNvbnN0IHRyYWNrRXZlbnRzID0gdGhpcy5jb25maWcuY2FwdGlvbnMudXBkYXRlID8gJ2FkZHRyYWNrIHJlbW92ZXRyYWNrJyA6ICdyZW1vdmV0cmFjayc7XG4gICAgICBvbi5jYWxsKHRoaXMsIHRoaXMubWVkaWEudGV4dFRyYWNrcywgdHJhY2tFdmVudHMsIGNhcHRpb25zLnVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYXZhaWxhYmxlIGxhbmd1YWdlcyBpbiBsaXN0IG5leHQgdGljayAodGhlIGV2ZW50IG11c3Qgbm90IGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGxpc3RlbmVycylcbiAgICBzZXRUaW1lb3V0KGNhcHRpb25zLnVwZGF0ZS5iaW5kKHRoaXMpLCAwKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgYXZhaWxhYmxlIGxhbmd1YWdlIG9wdGlvbnMgaW4gc2V0dGluZ3MgYmFzZWQgb24gdHJhY2tzXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCB0cmFja3MgPSBjYXB0aW9ucy5nZXRUcmFja3MuY2FsbCh0aGlzLCB0cnVlKTtcbiAgICAvLyBHZXQgdGhlIHdhbnRlZCBsYW5ndWFnZVxuICAgIGNvbnN0IHsgYWN0aXZlLCBsYW5ndWFnZSwgbWV0YSwgY3VycmVudFRyYWNrTm9kZSB9ID0gdGhpcy5jYXB0aW9ucztcbiAgICBjb25zdCBsYW5ndWFnZUV4aXN0cyA9IEJvb2xlYW4odHJhY2tzLmZpbmQodHJhY2sgPT4gdHJhY2subGFuZ3VhZ2UgPT09IGxhbmd1YWdlKSk7XG5cbiAgICAvLyBIYW5kbGUgdHJhY2tzIChhZGQgZXZlbnQgbGlzdGVuZXIgYW5kIFwicHNldWRvXCItZGVmYXVsdClcbiAgICBpZiAodGhpcy5pc0hUTUw1ICYmIHRoaXMuaXNWaWRlbykge1xuICAgICAgdHJhY2tzXG4gICAgICAgIC5maWx0ZXIodHJhY2sgPT4gIW1ldGEuZ2V0KHRyYWNrKSlcbiAgICAgICAgLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgIHRoaXMuZGVidWcubG9nKCdUcmFjayBhZGRlZCcsIHRyYWNrKTtcblxuICAgICAgICAgIC8vIEF0dGVtcHQgdG8gc3RvcmUgaWYgdGhlIG9yaWdpbmFsIGRvbSBlbGVtZW50IHdhcyBcImRlZmF1bHRcIlxuICAgICAgICAgIG1ldGEuc2V0KHRyYWNrLCB7XG4gICAgICAgICAgICBkZWZhdWx0OiB0cmFjay5tb2RlID09PSAnc2hvd2luZycsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBUdXJuIG9mZiBuYXRpdmUgY2FwdGlvbiByZW5kZXJpbmcgdG8gYXZvaWQgZG91YmxlIGNhcHRpb25zXG4gICAgICAgICAgLy8gTm90ZTogbW9kZT0naGlkZGVuJyBmb3JjZXMgYSB0cmFjayB0byBkb3dubG9hZC4gVG8gZW5zdXJlIGV2ZXJ5IHRyYWNrXG4gICAgICAgICAgLy8gaXNuJ3QgZG93bmxvYWRlZCBhdCBvbmNlLCBvbmx5ICdzaG93aW5nJyB0cmFja3Mgc2hvdWxkIGJlIHJlYXNzaWduZWRcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICBpZiAodHJhY2subW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIHRyYWNrLm1vZGUgPSAnaGlkZGVuJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgZm9yIGN1ZSBjaGFuZ2VzXG4gICAgICAgICAgb24uY2FsbCh0aGlzLCB0cmFjaywgJ2N1ZWNoYW5nZScsICgpID0+IGNhcHRpb25zLnVwZGF0ZUN1ZXMuY2FsbCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBsYW5ndWFnZSBmaXJzdCB0aW1lIGl0IG1hdGNoZXMsIG9yIGlmIHRoZSBwcmV2aW91cyBtYXRjaGluZyB0cmFjayB3YXMgcmVtb3ZlZFxuICAgIGlmICgobGFuZ3VhZ2VFeGlzdHMgJiYgdGhpcy5sYW5ndWFnZSAhPT0gbGFuZ3VhZ2UpIHx8ICF0cmFja3MuaW5jbHVkZXMoY3VycmVudFRyYWNrTm9kZSkpIHtcbiAgICAgIGNhcHRpb25zLnNldExhbmd1YWdlLmNhbGwodGhpcywgbGFuZ3VhZ2UpO1xuICAgICAgY2FwdGlvbnMudG9nZ2xlLmNhbGwodGhpcywgYWN0aXZlICYmIGxhbmd1YWdlRXhpc3RzKTtcbiAgICB9XG5cbiAgICAvLyBFbmFibGUgb3IgZGlzYWJsZSBjYXB0aW9ucyBiYXNlZCBvbiB0cmFjayBsZW5ndGhcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jYXB0aW9ucy5lbmFibGVkLCAhaXMuZW1wdHkodHJhY2tzKSk7XG5cbiAgICAvLyBVcGRhdGUgYXZhaWxhYmxlIGxhbmd1YWdlcyBpbiBsaXN0XG4gICAgaWYgKFxuICAgICAgaXMuYXJyYXkodGhpcy5jb25maWcuY29udHJvbHMpICYmXG4gICAgICB0aGlzLmNvbmZpZy5jb250cm9scy5pbmNsdWRlcygnc2V0dGluZ3MnKSAmJlxuICAgICAgdGhpcy5jb25maWcuc2V0dGluZ3MuaW5jbHVkZXMoJ2NhcHRpb25zJylcbiAgICApIHtcbiAgICAgIGNvbnRyb2xzLnNldENhcHRpb25zTWVudS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvLyBUb2dnbGUgY2FwdGlvbnMgZGlzcGxheVxuICAvLyBVc2VkIGludGVybmFsbHkgZm9yIHRoZSB0b2dnbGVDYXB0aW9ucyBtZXRob2QsIHdpdGggdGhlIHBhc3NpdmUgb3B0aW9uIGZvcmNlZCB0byBmYWxzZVxuICB0b2dnbGUoaW5wdXQsIHBhc3NpdmUgPSB0cnVlKSB7XG4gICAgLy8gSWYgdGhlcmUncyBubyBmdWxsIHN1cHBvcnRcbiAgICBpZiAoIXRoaXMuc3VwcG9ydGVkLnVpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyB0b2dnbGVkIH0gPSB0aGlzLmNhcHRpb25zOyAvLyBDdXJyZW50IHN0YXRlXG4gICAgY29uc3QgYWN0aXZlQ2xhc3MgPSB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNhcHRpb25zLmFjdGl2ZTtcbiAgICAvLyBHZXQgdGhlIG5leHQgc3RhdGVcbiAgICAvLyBJZiB0aGUgbWV0aG9kIGlzIGNhbGxlZCB3aXRob3V0IHBhcmFtZXRlciwgdG9nZ2xlIGJhc2VkIG9uIGN1cnJlbnQgdmFsdWVcbiAgICBjb25zdCBhY3RpdmUgPSBpcy5udWxsT3JVbmRlZmluZWQoaW5wdXQpID8gIXRvZ2dsZWQgOiBpbnB1dDtcblxuICAgIC8vIFVwZGF0ZSBzdGF0ZSBhbmQgdHJpZ2dlciBldmVudFxuICAgIGlmIChhY3RpdmUgIT09IHRvZ2dsZWQpIHtcbiAgICAgIC8vIFdoZW4gcGFzc2l2ZSwgZG9uJ3Qgb3ZlcnJpZGUgdXNlciBwcmVmZXJlbmNlc1xuICAgICAgaWYgKCFwYXNzaXZlKSB7XG4gICAgICAgIHRoaXMuY2FwdGlvbnMuYWN0aXZlID0gYWN0aXZlO1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KHsgY2FwdGlvbnM6IGFjdGl2ZSB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRm9yY2UgbGFuZ3VhZ2UgaWYgdGhlIGNhbGwgaXNuJ3QgcGFzc2l2ZSBhbmQgdGhlcmUgaXMgbm8gbWF0Y2hpbmcgbGFuZ3VhZ2UgdG8gdG9nZ2xlIHRvXG4gICAgICBpZiAoIXRoaXMubGFuZ3VhZ2UgJiYgYWN0aXZlICYmICFwYXNzaXZlKSB7XG4gICAgICAgIGNvbnN0IHRyYWNrcyA9IGNhcHRpb25zLmdldFRyYWNrcy5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCB0cmFjayA9IGNhcHRpb25zLmZpbmRUcmFjay5jYWxsKHRoaXMsIFt0aGlzLmNhcHRpb25zLmxhbmd1YWdlLCAuLi50aGlzLmNhcHRpb25zLmxhbmd1YWdlc10sIHRydWUpO1xuXG4gICAgICAgIC8vIE92ZXJyaWRlIHVzZXIgcHJlZmVyZW5jZXMgdG8gYXZvaWQgc3dpdGNoaW5nIGxhbmd1YWdlcyBpZiBhIG1hdGNoaW5nIHRyYWNrIGlzIGFkZGVkXG4gICAgICAgIHRoaXMuY2FwdGlvbnMubGFuZ3VhZ2UgPSB0cmFjay5sYW5ndWFnZTtcblxuICAgICAgICAvLyBTZXQgY2FwdGlvbiwgYnV0IGRvbid0IHN0b3JlIGluIGxvY2FsU3RvcmFnZSBhcyB1c2VyIHByZWZlcmVuY2VcbiAgICAgICAgY2FwdGlvbnMuc2V0LmNhbGwodGhpcywgdHJhY2tzLmluZGV4T2YodHJhY2spKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUb2dnbGUgYnV0dG9uIGlmIGl0J3MgZW5hYmxlZFxuICAgICAgaWYgKHRoaXMuZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmJ1dHRvbnMuY2FwdGlvbnMucHJlc3NlZCA9IGFjdGl2ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGNsYXNzIGhvb2tcbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCBhY3RpdmVDbGFzcywgYWN0aXZlKTtcblxuICAgICAgdGhpcy5jYXB0aW9ucy50b2dnbGVkID0gYWN0aXZlO1xuXG4gICAgICAvLyBVcGRhdGUgc2V0dGluZ3MgbWVudVxuICAgICAgY29udHJvbHMudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsICdjYXB0aW9ucycpO1xuXG4gICAgICAvLyBUcmlnZ2VyIGV2ZW50IChub3QgdXNlZCBpbnRlcm5hbGx5KVxuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcywgdGhpcy5tZWRpYSwgYWN0aXZlID8gJ2NhcHRpb25zZW5hYmxlZCcgOiAnY2FwdGlvbnNkaXNhYmxlZCcpO1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIHRoZSBjYWxsIHN0YWNrIHRvIGNsZWFyIGJlZm9yZSBzZXR0aW5nIG1vZGU9J2hpZGRlbidcbiAgICAvLyBvbiB0aGUgYWN0aXZlIHRyYWNrIC0gZm9yY2luZyB0aGUgYnJvd3NlciB0byBkb3dubG9hZCBpdFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKGFjdGl2ZSAmJiB0aGlzLmNhcHRpb25zLnRvZ2dsZWQpIHtcbiAgICAgICAgdGhpcy5jYXB0aW9ucy5jdXJyZW50VHJhY2tOb2RlLm1vZGUgPSAnaGlkZGVuJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvLyBTZXQgY2FwdGlvbnMgYnkgdHJhY2sgaW5kZXhcbiAgLy8gVXNlZCBpbnRlcm5hbGx5IGZvciB0aGUgY3VycmVudFRyYWNrIHNldHRlciB3aXRoIHRoZSBwYXNzaXZlIG9wdGlvbiBmb3JjZWQgdG8gZmFsc2VcbiAgc2V0KGluZGV4LCBwYXNzaXZlID0gdHJ1ZSkge1xuICAgIGNvbnN0IHRyYWNrcyA9IGNhcHRpb25zLmdldFRyYWNrcy5jYWxsKHRoaXMpO1xuXG4gICAgLy8gRGlzYWJsZSBjYXB0aW9ucyBpZiBzZXR0aW5nIHRvIC0xXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgY2FwdGlvbnMudG9nZ2xlLmNhbGwodGhpcywgZmFsc2UsIHBhc3NpdmUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXMubnVtYmVyKGluZGV4KSkge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdJbnZhbGlkIGNhcHRpb24gYXJndW1lbnQnLCBpbmRleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCEoaW5kZXggaW4gdHJhY2tzKSkge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdUcmFjayBub3QgZm91bmQnLCBpbmRleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2FwdGlvbnMuY3VycmVudFRyYWNrICE9PSBpbmRleCkge1xuICAgICAgdGhpcy5jYXB0aW9ucy5jdXJyZW50VHJhY2sgPSBpbmRleDtcbiAgICAgIGNvbnN0IHRyYWNrID0gdHJhY2tzW2luZGV4XTtcbiAgICAgIGNvbnN0IHsgbGFuZ3VhZ2UgfSA9IHRyYWNrIHx8IHt9O1xuXG4gICAgICAvLyBTdG9yZSByZWZlcmVuY2UgdG8gbm9kZSBmb3IgaW52YWxpZGF0aW9uIG9uIHJlbW92ZVxuICAgICAgdGhpcy5jYXB0aW9ucy5jdXJyZW50VHJhY2tOb2RlID0gdHJhY2s7XG5cbiAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBtZW51XG4gICAgICBjb250cm9scy51cGRhdGVTZXR0aW5nLmNhbGwodGhpcywgJ2NhcHRpb25zJyk7XG5cbiAgICAgIC8vIFdoZW4gcGFzc2l2ZSwgZG9uJ3Qgb3ZlcnJpZGUgdXNlciBwcmVmZXJlbmNlc1xuICAgICAgaWYgKCFwYXNzaXZlKSB7XG4gICAgICAgIHRoaXMuY2FwdGlvbnMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldCh7IGxhbmd1YWdlIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgVmltZW8gY2FwdGlvbnNcbiAgICAgIGlmICh0aGlzLmlzVmltZW8pIHtcbiAgICAgICAgdGhpcy5lbWJlZC5lbmFibGVUZXh0VHJhY2sobGFuZ3VhZ2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBUcmlnZ2VyIGV2ZW50XG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbCh0aGlzLCB0aGlzLm1lZGlhLCAnbGFuZ3VhZ2VjaGFuZ2UnKTtcbiAgICB9XG5cbiAgICAvLyBTaG93IGNhcHRpb25zXG4gICAgY2FwdGlvbnMudG9nZ2xlLmNhbGwodGhpcywgdHJ1ZSwgcGFzc2l2ZSk7XG5cbiAgICBpZiAodGhpcy5pc0hUTUw1ICYmIHRoaXMuaXNWaWRlbykge1xuICAgICAgLy8gSWYgd2UgY2hhbmdlIHRoZSBhY3RpdmUgdHJhY2sgd2hpbGUgYSBjdWUgaXMgYWxyZWFkeSBkaXNwbGF5ZWQgd2UgbmVlZCB0byB1cGRhdGUgaXRcbiAgICAgIGNhcHRpb25zLnVwZGF0ZUN1ZXMuY2FsbCh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU2V0IGNhcHRpb25zIGJ5IGxhbmd1YWdlXG4gIC8vIFVzZWQgaW50ZXJuYWxseSBmb3IgdGhlIGxhbmd1YWdlIHNldHRlciB3aXRoIHRoZSBwYXNzaXZlIG9wdGlvbiBmb3JjZWQgdG8gZmFsc2VcbiAgc2V0TGFuZ3VhZ2UoaW5wdXQsIHBhc3NpdmUgPSB0cnVlKSB7XG4gICAgaWYgKCFpcy5zdHJpbmcoaW5wdXQpKSB7XG4gICAgICB0aGlzLmRlYnVnLndhcm4oJ0ludmFsaWQgbGFuZ3VhZ2UgYXJndW1lbnQnLCBpbnB1dCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE5vcm1hbGl6ZVxuICAgIGNvbnN0IGxhbmd1YWdlID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLmNhcHRpb25zLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG5cbiAgICAvLyBTZXQgY3VycmVudFRyYWNrXG4gICAgY29uc3QgdHJhY2tzID0gY2FwdGlvbnMuZ2V0VHJhY2tzLmNhbGwodGhpcyk7XG4gICAgY29uc3QgdHJhY2sgPSBjYXB0aW9ucy5maW5kVHJhY2suY2FsbCh0aGlzLCBbbGFuZ3VhZ2VdKTtcbiAgICBjYXB0aW9ucy5zZXQuY2FsbCh0aGlzLCB0cmFja3MuaW5kZXhPZih0cmFjayksIHBhc3NpdmUpO1xuICB9LFxuXG4gIC8vIEdldCBjdXJyZW50IHZhbGlkIGNhcHRpb24gdHJhY2tzXG4gIC8vIElmIHVwZGF0ZSBpcyBmYWxzZSBpdCB3aWxsIGFsc28gaWdub3JlIHRyYWNrcyB3aXRob3V0IG1ldGFkYXRhXG4gIC8vIFRoaXMgaXMgdXNlZCB0byBcImZyZWV6ZVwiIHRoZSBsYW5ndWFnZSBvcHRpb25zIHdoZW4gY2FwdGlvbnMudXBkYXRlIGlzIGZhbHNlXG4gIGdldFRyYWNrcyh1cGRhdGUgPSBmYWxzZSkge1xuICAgIC8vIEhhbmRsZSBtZWRpYSBvciB0ZXh0VHJhY2tzIG1pc3Npbmcgb3IgbnVsbFxuICAgIGNvbnN0IHRyYWNrcyA9IEFycmF5LmZyb20oKHRoaXMubWVkaWEgfHwge30pLnRleHRUcmFja3MgfHwgW10pO1xuICAgIC8vIEZvciBIVE1MNSwgdXNlIGNhY2hlIGluc3RlYWQgb2YgY3VycmVudCB0cmFja3Mgd2hlbiBpdCBleGlzdHMgKGlmIGNhcHRpb25zLnVwZGF0ZSBpcyBmYWxzZSlcbiAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgdHJhY2tzIGFuZCB0cmFja3MgdGhhdCBhcmVuJ3QgY2FwdGlvbnMvc3VidGl0bGVzIChmb3IgZXhhbXBsZSBtZXRhZGF0YSlcbiAgICByZXR1cm4gdHJhY2tzXG4gICAgICAuZmlsdGVyKHRyYWNrID0+ICF0aGlzLmlzSFRNTDUgfHwgdXBkYXRlIHx8IHRoaXMuY2FwdGlvbnMubWV0YS5oYXModHJhY2spKVxuICAgICAgLmZpbHRlcih0cmFjayA9PiBbJ2NhcHRpb25zJywgJ3N1YnRpdGxlcyddLmluY2x1ZGVzKHRyYWNrLmtpbmQpKTtcbiAgfSxcblxuICAvLyBNYXRjaCB0cmFja3MgYmFzZWQgb24gbGFuZ3VhZ2VzIGFuZCBnZXQgdGhlIGZpcnN0XG4gIGZpbmRUcmFjayhsYW5ndWFnZXMsIGZvcmNlID0gZmFsc2UpIHtcbiAgICBjb25zdCB0cmFja3MgPSBjYXB0aW9ucy5nZXRUcmFja3MuY2FsbCh0aGlzKTtcbiAgICBjb25zdCBzb3J0SXNEZWZhdWx0ID0gdHJhY2sgPT4gTnVtYmVyKCh0aGlzLmNhcHRpb25zLm1ldGEuZ2V0KHRyYWNrKSB8fCB7fSkuZGVmYXVsdCk7XG4gICAgY29uc3Qgc29ydGVkID0gQXJyYXkuZnJvbSh0cmFja3MpLnNvcnQoKGEsIGIpID0+IHNvcnRJc0RlZmF1bHQoYikgLSBzb3J0SXNEZWZhdWx0KGEpKTtcbiAgICBsZXQgdHJhY2s7XG5cbiAgICBsYW5ndWFnZXMuZXZlcnkobGFuZ3VhZ2UgPT4ge1xuICAgICAgdHJhY2sgPSBzb3J0ZWQuZmluZCh0ID0+IHQubGFuZ3VhZ2UgPT09IGxhbmd1YWdlKTtcbiAgICAgIHJldHVybiAhdHJhY2s7IC8vIEJyZWFrIGl0ZXJhdGlvbiBpZiB0aGVyZSBpcyBhIG1hdGNoXG4gICAgfSk7XG5cbiAgICAvLyBJZiBubyBtYXRjaCBpcyBmb3VuZCBidXQgaXMgcmVxdWlyZWQsIGdldCBmaXJzdFxuICAgIHJldHVybiB0cmFjayB8fCAoZm9yY2UgPyBzb3J0ZWRbMF0gOiB1bmRlZmluZWQpO1xuICB9LFxuXG4gIC8vIEdldCB0aGUgY3VycmVudCB0cmFja1xuICBnZXRDdXJyZW50VHJhY2soKSB7XG4gICAgcmV0dXJuIGNhcHRpb25zLmdldFRyYWNrcy5jYWxsKHRoaXMpW3RoaXMuY3VycmVudFRyYWNrXTtcbiAgfSxcblxuICAvLyBHZXQgVUkgbGFiZWwgZm9yIHRyYWNrXG4gIGdldExhYmVsKHRyYWNrKSB7XG4gICAgbGV0IGN1cnJlbnRUcmFjayA9IHRyYWNrO1xuXG4gICAgaWYgKCFpcy50cmFjayhjdXJyZW50VHJhY2spICYmIHN1cHBvcnQudGV4dFRyYWNrcyAmJiB0aGlzLmNhcHRpb25zLnRvZ2dsZWQpIHtcbiAgICAgIGN1cnJlbnRUcmFjayA9IGNhcHRpb25zLmdldEN1cnJlbnRUcmFjay5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGlmIChpcy50cmFjayhjdXJyZW50VHJhY2spKSB7XG4gICAgICBpZiAoIWlzLmVtcHR5KGN1cnJlbnRUcmFjay5sYWJlbCkpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUcmFjay5sYWJlbDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpcy5lbXB0eShjdXJyZW50VHJhY2subGFuZ3VhZ2UpKSB7XG4gICAgICAgIHJldHVybiB0cmFjay5sYW5ndWFnZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaTE4bi5nZXQoJ2VuYWJsZWQnLCB0aGlzLmNvbmZpZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGkxOG4uZ2V0KCdkaXNhYmxlZCcsIHRoaXMuY29uZmlnKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgY2FwdGlvbnMgdXNpbmcgY3VycmVudCB0cmFjaydzIGFjdGl2ZSBjdWVzXG4gIC8vIEFsc28gb3B0aW9uYWwgYXJyYXkgYXJndW1lbnQgaW4gY2FzZSB0aGVyZSBpc24ndCBhbnkgdHJhY2sgKGV4OiB2aW1lbylcbiAgdXBkYXRlQ3VlcyhpbnB1dCkge1xuICAgIC8vIFJlcXVpcmVzIFVJXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRlZC51aSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmNhcHRpb25zKSkge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdObyBjYXB0aW9ucyBlbGVtZW50IHRvIHJlbmRlciB0bycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYWNjZXB0IGFycmF5IG9yIGVtcHR5IGlucHV0XG4gICAgaWYgKCFpcy5udWxsT3JVbmRlZmluZWQoaW5wdXQpICYmICFBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKCd1cGRhdGVDdWVzOiBJbnZhbGlkIGlucHV0JywgaW5wdXQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjdWVzID0gaW5wdXQ7XG5cbiAgICAvLyBHZXQgY3VlcyBmcm9tIHRyYWNrXG4gICAgaWYgKCFjdWVzKSB7XG4gICAgICBjb25zdCB0cmFjayA9IGNhcHRpb25zLmdldEN1cnJlbnRUcmFjay5jYWxsKHRoaXMpO1xuXG4gICAgICBjdWVzID0gQXJyYXkuZnJvbSgodHJhY2sgfHwge30pLmFjdGl2ZUN1ZXMgfHwgW10pXG4gICAgICAgIC5tYXAoY3VlID0+IGN1ZS5nZXRDdWVBc0hUTUwoKSlcbiAgICAgICAgLm1hcChnZXRIVE1MKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgbmV3IGNhcHRpb24gdGV4dFxuICAgIGNvbnN0IGNvbnRlbnQgPSBjdWVzLm1hcChjdWVUZXh0ID0+IGN1ZVRleHQudHJpbSgpKS5qb2luKCdcXG4nKTtcbiAgICBjb25zdCBjaGFuZ2VkID0gY29udGVudCAhPT0gdGhpcy5lbGVtZW50cy5jYXB0aW9ucy5pbm5lckhUTUw7XG5cbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgLy8gRW1wdHkgdGhlIGNvbnRhaW5lciBhbmQgY3JlYXRlIGEgbmV3IGNoaWxkIGVsZW1lbnRcbiAgICAgIGVtcHR5RWxlbWVudCh0aGlzLmVsZW1lbnRzLmNhcHRpb25zKTtcbiAgICAgIGNvbnN0IGNhcHRpb24gPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgZ2V0QXR0cmlidXRlc0Zyb21TZWxlY3Rvcih0aGlzLmNvbmZpZy5zZWxlY3RvcnMuY2FwdGlvbikpO1xuICAgICAgY2FwdGlvbi5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgdGhpcy5lbGVtZW50cy5jYXB0aW9ucy5hcHBlbmRDaGlsZChjYXB0aW9uKTtcblxuICAgICAgLy8gVHJpZ2dlciBldmVudFxuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcywgdGhpcy5tZWRpYSwgJ2N1ZWNoYW5nZScpO1xuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNhcHRpb25zO1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBseXIgZGVmYXVsdCBjb25maWdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IGRlZmF1bHRzID0ge1xuICAvLyBEaXNhYmxlXG4gIGVuYWJsZWQ6IHRydWUsXG5cbiAgLy8gQ3VzdG9tIG1lZGlhIHRpdGxlXG4gIHRpdGxlOiAnJyxcblxuICAvLyBMb2dnaW5nIHRvIGNvbnNvbGVcbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8vIEF1dG8gcGxheSAoaWYgc3VwcG9ydGVkKVxuICBhdXRvcGxheTogZmFsc2UsXG5cbiAgLy8gT25seSBhbGxvdyBvbmUgbWVkaWEgcGxheWluZyBhdCBvbmNlICh2aW1lbyBvbmx5KVxuICBhdXRvcGF1c2U6IHRydWUsXG5cbiAgLy8gQWxsb3cgaW5saW5lIHBsYXliYWNrIG9uIGlPUyAodGhpcyBlZmZlY3RzIFlvdVR1YmUvVmltZW8gLSBIVE1MNSByZXF1aXJlcyB0aGUgYXR0cmlidXRlIHByZXNlbnQpXG4gIC8vIFRPRE86IFJlbW92ZSBpb3NOYXRpdmUgZnVsbHNjcmVlbiBvcHRpb24gaW4gZmF2b3VyIG9mIHRoaXMgKGxvZ2ljIG5lZWRzIHdvcmspXG4gIHBsYXlzaW5saW5lOiB0cnVlLFxuXG4gIC8vIERlZmF1bHQgdGltZSB0byBza2lwIHdoZW4gcmV3aW5kL2Zhc3QgZm9yd2FyZFxuICBzZWVrVGltZTogMTAsXG5cbiAgLy8gRGVmYXVsdCB2b2x1bWVcbiAgdm9sdW1lOiAxLFxuICBtdXRlZDogZmFsc2UsXG5cbiAgLy8gUGFzcyBhIGN1c3RvbSBkdXJhdGlvblxuICBkdXJhdGlvbjogbnVsbCxcblxuICAvLyBEaXNwbGF5IHRoZSBtZWRpYSBkdXJhdGlvbiBvbiBsb2FkIGluIHRoZSBjdXJyZW50IHRpbWUgcG9zaXRpb25cbiAgLy8gSWYgeW91IGhhdmUgb3B0ZWQgdG8gZGlzcGxheSBib3RoIGR1cmF0aW9uIGFuZCBjdXJyZW50VGltZSwgdGhpcyBpcyBpZ25vcmVkXG4gIGRpc3BsYXlEdXJhdGlvbjogdHJ1ZSxcblxuICAvLyBJbnZlcnQgdGhlIGN1cnJlbnQgdGltZSB0byBiZSBhIGNvdW50ZG93blxuICBpbnZlcnRUaW1lOiB0cnVlLFxuXG4gIC8vIENsaWNraW5nIHRoZSBjdXJyZW50VGltZSBpbnZlcnRzIGl0J3MgdmFsdWUgdG8gc2hvdyB0aW1lIGxlZnQgcmF0aGVyIHRoYW4gZWxhcHNlZFxuICB0b2dnbGVJbnZlcnQ6IHRydWUsXG5cbiAgLy8gRm9yY2UgYW4gYXNwZWN0IHJhdGlvXG4gIC8vIFRoZSBmb3JtYXQgbXVzdCBiZSBgJ3c6aCdgIChlLmcuIGAnMTY6OSdgKVxuICByYXRpbzogbnVsbCxcblxuICAvLyBDbGljayB2aWRlbyBjb250YWluZXIgdG8gcGxheS9wYXVzZVxuICBjbGlja1RvUGxheTogdHJ1ZSxcblxuICAvLyBBdXRvIGhpZGUgdGhlIGNvbnRyb2xzXG4gIGhpZGVDb250cm9sczogdHJ1ZSxcblxuICAvLyBSZXNldCB0byBzdGFydCB3aGVuIHBsYXliYWNrIGVuZGVkXG4gIHJlc2V0T25FbmQ6IGZhbHNlLFxuXG4gIC8vIERpc2FibGUgdGhlIHN0YW5kYXJkIGNvbnRleHQgbWVudVxuICBkaXNhYmxlQ29udGV4dE1lbnU6IHRydWUsXG5cbiAgLy8gU3ByaXRlIChmb3IgaWNvbnMpXG4gIGxvYWRTcHJpdGU6IHRydWUsXG4gIGljb25QcmVmaXg6ICdwbHlyJyxcbiAgaWNvblVybDogJ2h0dHBzOi8vY2RuLnBseXIuaW8vMy42LjIvcGx5ci5zdmcnLFxuXG4gIC8vIEJsYW5rIHZpZGVvICh1c2VkIHRvIHByZXZlbnQgZXJyb3JzIG9uIHNvdXJjZSBjaGFuZ2UpXG4gIGJsYW5rVmlkZW86ICdodHRwczovL2Nkbi5wbHlyLmlvL3N0YXRpYy9ibGFuay5tcDQnLFxuXG4gIC8vIFF1YWxpdHkgZGVmYXVsdFxuICBxdWFsaXR5OiB7XG4gICAgZGVmYXVsdDogNTc2LFxuICAgIC8vIFRoZSBvcHRpb25zIHRvIGRpc3BsYXkgaW4gdGhlIFVJLCBpZiBhdmFpbGFibGUgZm9yIHRoZSBzb3VyY2UgbWVkaWFcbiAgICBvcHRpb25zOiBbNDMyMCwgMjg4MCwgMjE2MCwgMTQ0MCwgMTA4MCwgNzIwLCA1NzYsIDQ4MCwgMzYwLCAyNDBdLFxuICAgIGZvcmNlZDogZmFsc2UsXG4gICAgb25DaGFuZ2U6IG51bGwsXG4gIH0sXG5cbiAgLy8gU2V0IGxvb3BzXG4gIGxvb3A6IHtcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIC8vIHN0YXJ0OiBudWxsLFxuICAgIC8vIGVuZDogbnVsbCxcbiAgfSxcblxuICAvLyBTcGVlZCBkZWZhdWx0IGFuZCBvcHRpb25zIHRvIGRpc3BsYXlcbiAgc3BlZWQ6IHtcbiAgICBzZWxlY3RlZDogMSxcbiAgICAvLyBUaGUgb3B0aW9ucyB0byBkaXNwbGF5IGluIHRoZSBVSSwgaWYgYXZhaWxhYmxlIGZvciB0aGUgc291cmNlIG1lZGlhIChlLmcuIFZpbWVvIGFuZCBZb3VUdWJlIG9ubHkgc3VwcG9ydCAwLjV4LTR4KVxuICAgIG9wdGlvbnM6IFswLjUsIDAuNzUsIDEsIDEuMjUsIDEuNSwgMS43NSwgMiwgNF0sXG4gIH0sXG5cbiAgLy8gS2V5Ym9hcmQgc2hvcnRjdXQgc2V0dGluZ3NcbiAga2V5Ym9hcmQ6IHtcbiAgICBmb2N1c2VkOiB0cnVlLFxuICAgIGdsb2JhbDogZmFsc2UsXG4gIH0sXG5cbiAgLy8gRGlzcGxheSB0b29sdGlwc1xuICB0b29sdGlwczoge1xuICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICBzZWVrOiB0cnVlLFxuICB9LFxuXG4gIC8vIENhcHRpb25zIHNldHRpbmdzXG4gIGNhcHRpb25zOiB7XG4gICAgYWN0aXZlOiBmYWxzZSxcbiAgICBsYW5ndWFnZTogJ2F1dG8nLFxuICAgIC8vIExpc3RlbiB0byBuZXcgdHJhY2tzIGFkZGVkIGFmdGVyIFBseXIgaXMgaW5pdGlhbGl6ZWQuXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIHN0cmVhbWluZyBjYXB0aW9ucywgYnV0IG1heSByZXN1bHQgaW4gdW5zZWxlY3RhYmxlIG9wdGlvbnNcbiAgICB1cGRhdGU6IGZhbHNlLFxuICB9LFxuXG4gIC8vIEZ1bGxzY3JlZW4gc2V0dGluZ3NcbiAgZnVsbHNjcmVlbjoge1xuICAgIGVuYWJsZWQ6IHRydWUsIC8vIEFsbG93IGZ1bGxzY3JlZW4/XG4gICAgZmFsbGJhY2s6IHRydWUsIC8vIEZhbGxiYWNrIHVzaW5nIGZ1bGwgdmlld3BvcnQvd2luZG93XG4gICAgaW9zTmF0aXZlOiBmYWxzZSwgLy8gVXNlIHRoZSBuYXRpdmUgZnVsbHNjcmVlbiBpbiBpT1MgKGRpc2FibGVzIGN1c3RvbSBjb250cm9scylcbiAgICAvLyBTZWxlY3RvciBmb3IgdGhlIGZ1bGxzY3JlZW4gY29udGFpbmVyIHNvIGNvbnRleHR1YWwgLyBub24tcGxheWVyIGNvbnRlbnQgY2FuIHJlbWFpbiB2aXNpYmxlIGluIGZ1bGxzY3JlZW4gbW9kZVxuICAgIC8vIE5vbi1hbmNlc3RvcnMgb2YgdGhlIHBsYXllciBlbGVtZW50IHdpbGwgYmUgaWdub3JlZFxuICAgIC8vIGNvbnRhaW5lcjogbnVsbCwgLy8gZGVmYXVsdHMgdG8gdGhlIHBsYXllciBlbGVtZW50XG4gIH0sXG5cbiAgLy8gTG9jYWwgc3RvcmFnZVxuICBzdG9yYWdlOiB7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBrZXk6ICdwbHlyJyxcbiAgfSxcblxuICAvLyBEZWZhdWx0IGNvbnRyb2xzXG4gIGNvbnRyb2xzOiBbXG4gICAgJ3BsYXktbGFyZ2UnLFxuICAgIC8vICdyZXN0YXJ0JyxcbiAgICAvLyAncmV3aW5kJyxcbiAgICAncGxheScsXG4gICAgLy8gJ2Zhc3QtZm9yd2FyZCcsXG4gICAgJ3Byb2dyZXNzJyxcbiAgICAnY3VycmVudC10aW1lJyxcbiAgICAvLyAnZHVyYXRpb24nLFxuICAgICdtdXRlJyxcbiAgICAndm9sdW1lJyxcbiAgICAnY2FwdGlvbnMnLFxuICAgICdzZXR0aW5ncycsXG4gICAgJ3BpcCcsXG4gICAgJ2FpcnBsYXknLFxuICAgIC8vICdkb3dubG9hZCcsXG4gICAgJ2Z1bGxzY3JlZW4nLFxuICBdLFxuICBzZXR0aW5nczogWydjYXB0aW9ucycsICdxdWFsaXR5JywgJ3NwZWVkJ10sXG5cbiAgLy8gTG9jYWxpc2F0aW9uXG4gIGkxOG46IHtcbiAgICByZXN0YXJ0OiAnUmVzdGFydCcsXG4gICAgcmV3aW5kOiAnUmV3aW5kIHtzZWVrdGltZX1zJyxcbiAgICBwbGF5OiAnUGxheScsXG4gICAgcGF1c2U6ICdQYXVzZScsXG4gICAgZmFzdEZvcndhcmQ6ICdGb3J3YXJkIHtzZWVrdGltZX1zJyxcbiAgICBzZWVrOiAnU2VlaycsXG4gICAgc2Vla0xhYmVsOiAne2N1cnJlbnRUaW1lfSBvZiB7ZHVyYXRpb259JyxcbiAgICBwbGF5ZWQ6ICdQbGF5ZWQnLFxuICAgIGJ1ZmZlcmVkOiAnQnVmZmVyZWQnLFxuICAgIGN1cnJlbnRUaW1lOiAnQ3VycmVudCB0aW1lJyxcbiAgICBkdXJhdGlvbjogJ0R1cmF0aW9uJyxcbiAgICB2b2x1bWU6ICdWb2x1bWUnLFxuICAgIG11dGU6ICdNdXRlJyxcbiAgICB1bm11dGU6ICdVbm11dGUnLFxuICAgIGVuYWJsZUNhcHRpb25zOiAnRW5hYmxlIGNhcHRpb25zJyxcbiAgICBkaXNhYmxlQ2FwdGlvbnM6ICdEaXNhYmxlIGNhcHRpb25zJyxcbiAgICBkb3dubG9hZDogJ0Rvd25sb2FkJyxcbiAgICBlbnRlckZ1bGxzY3JlZW46ICdFbnRlciBmdWxsc2NyZWVuJyxcbiAgICBleGl0RnVsbHNjcmVlbjogJ0V4aXQgZnVsbHNjcmVlbicsXG4gICAgZnJhbWVUaXRsZTogJ1BsYXllciBmb3Ige3RpdGxlfScsXG4gICAgY2FwdGlvbnM6ICdDYXB0aW9ucycsXG4gICAgc2V0dGluZ3M6ICdTZXR0aW5ncycsXG4gICAgcGlwOiAnUElQJyxcbiAgICBtZW51QmFjazogJ0dvIGJhY2sgdG8gcHJldmlvdXMgbWVudScsXG4gICAgc3BlZWQ6ICdTcGVlZCcsXG4gICAgbm9ybWFsOiAnTm9ybWFsJyxcbiAgICBxdWFsaXR5OiAnUXVhbGl0eScsXG4gICAgbG9vcDogJ0xvb3AnLFxuICAgIHN0YXJ0OiAnU3RhcnQnLFxuICAgIGVuZDogJ0VuZCcsXG4gICAgYWxsOiAnQWxsJyxcbiAgICByZXNldDogJ1Jlc2V0JyxcbiAgICBkaXNhYmxlZDogJ0Rpc2FibGVkJyxcbiAgICBlbmFibGVkOiAnRW5hYmxlZCcsXG4gICAgYWR2ZXJ0aXNlbWVudDogJ0FkJyxcbiAgICBxdWFsaXR5QmFkZ2U6IHtcbiAgICAgIDIxNjA6ICc0SycsXG4gICAgICAxNDQwOiAnSEQnLFxuICAgICAgMTA4MDogJ0hEJyxcbiAgICAgIDcyMDogJ0hEJyxcbiAgICAgIDU3NjogJ1NEJyxcbiAgICAgIDQ4MDogJ1NEJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIFVSTHNcbiAgdXJsczoge1xuICAgIGRvd25sb2FkOiBudWxsLFxuICAgIHZpbWVvOiB7XG4gICAgICBzZGs6ICdodHRwczovL3BsYXllci52aW1lby5jb20vYXBpL3BsYXllci5qcycsXG4gICAgICBpZnJhbWU6ICdodHRwczovL3BsYXllci52aW1lby5jb20vdmlkZW8vezB9P3sxfScsXG4gICAgICBhcGk6ICdodHRwczovL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vezB9Lmpzb24nLFxuICAgIH0sXG4gICAgeW91dHViZToge1xuICAgICAgc2RrOiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaScsXG4gICAgICBhcGk6ICdodHRwczovL25vZW1iZWQuY29tL2VtYmVkP3VybD1odHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PXswfScsXG4gICAgfSxcbiAgICBnb29nbGVJTUE6IHtcbiAgICAgIHNkazogJ2h0dHBzOi8vaW1hc2RrLmdvb2dsZWFwaXMuY29tL2pzL3Nka2xvYWRlci9pbWEzLmpzJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIEN1c3RvbSBjb250cm9sIGxpc3RlbmVyc1xuICBsaXN0ZW5lcnM6IHtcbiAgICBzZWVrOiBudWxsLFxuICAgIHBsYXk6IG51bGwsXG4gICAgcGF1c2U6IG51bGwsXG4gICAgcmVzdGFydDogbnVsbCxcbiAgICByZXdpbmQ6IG51bGwsXG4gICAgZmFzdEZvcndhcmQ6IG51bGwsXG4gICAgbXV0ZTogbnVsbCxcbiAgICB2b2x1bWU6IG51bGwsXG4gICAgY2FwdGlvbnM6IG51bGwsXG4gICAgZG93bmxvYWQ6IG51bGwsXG4gICAgZnVsbHNjcmVlbjogbnVsbCxcbiAgICBwaXA6IG51bGwsXG4gICAgYWlycGxheTogbnVsbCxcbiAgICBzcGVlZDogbnVsbCxcbiAgICBxdWFsaXR5OiBudWxsLFxuICAgIGxvb3A6IG51bGwsXG4gICAgbGFuZ3VhZ2U6IG51bGwsXG4gIH0sXG5cbiAgLy8gRXZlbnRzIHRvIHdhdGNoIGFuZCBidWJibGVcbiAgZXZlbnRzOiBbXG4gICAgLy8gRXZlbnRzIHRvIHdhdGNoIG9uIEhUTUw1IG1lZGlhIGVsZW1lbnRzIGFuZCBidWJibGVcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9HdWlkZS9FdmVudHMvTWVkaWFfZXZlbnRzXG4gICAgJ2VuZGVkJyxcbiAgICAncHJvZ3Jlc3MnLFxuICAgICdzdGFsbGVkJyxcbiAgICAncGxheWluZycsXG4gICAgJ3dhaXRpbmcnLFxuICAgICdjYW5wbGF5JyxcbiAgICAnY2FucGxheXRocm91Z2gnLFxuICAgICdsb2Fkc3RhcnQnLFxuICAgICdsb2FkZWRkYXRhJyxcbiAgICAnbG9hZGVkbWV0YWRhdGEnLFxuICAgICd0aW1ldXBkYXRlJyxcbiAgICAndm9sdW1lY2hhbmdlJyxcbiAgICAncGxheScsXG4gICAgJ3BhdXNlJyxcbiAgICAnZXJyb3InLFxuICAgICdzZWVraW5nJyxcbiAgICAnc2Vla2VkJyxcbiAgICAnZW1wdGllZCcsXG4gICAgJ3JhdGVjaGFuZ2UnLFxuICAgICdjdWVjaGFuZ2UnLFxuXG4gICAgLy8gQ3VzdG9tIGV2ZW50c1xuICAgICdkb3dubG9hZCcsXG4gICAgJ2VudGVyZnVsbHNjcmVlbicsXG4gICAgJ2V4aXRmdWxsc2NyZWVuJyxcbiAgICAnY2FwdGlvbnNlbmFibGVkJyxcbiAgICAnY2FwdGlvbnNkaXNhYmxlZCcsXG4gICAgJ2xhbmd1YWdlY2hhbmdlJyxcbiAgICAnY29udHJvbHNoaWRkZW4nLFxuICAgICdjb250cm9sc3Nob3duJyxcbiAgICAncmVhZHknLFxuXG4gICAgLy8gWW91VHViZVxuICAgICdzdGF0ZWNoYW5nZScsXG5cbiAgICAvLyBRdWFsaXR5XG4gICAgJ3F1YWxpdHljaGFuZ2UnLFxuXG4gICAgLy8gQWRzXG4gICAgJ2Fkc2xvYWRlZCcsXG4gICAgJ2Fkc2NvbnRlbnRwYXVzZScsXG4gICAgJ2Fkc2NvbnRlbnRyZXN1bWUnLFxuICAgICdhZHN0YXJ0ZWQnLFxuICAgICdhZHNtaWRwb2ludCcsXG4gICAgJ2Fkc2NvbXBsZXRlJyxcbiAgICAnYWRzYWxsY29tcGxldGUnLFxuICAgICdhZHNpbXByZXNzaW9uJyxcbiAgICAnYWRzY2xpY2snLFxuICBdLFxuXG4gIC8vIFNlbGVjdG9yc1xuICAvLyBDaGFuZ2UgdGhlc2UgdG8gbWF0Y2ggeW91ciB0ZW1wbGF0ZSBpZiB1c2luZyBjdXN0b20gSFRNTFxuICBzZWxlY3RvcnM6IHtcbiAgICBlZGl0YWJsZTogJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBbY29udGVudGVkaXRhYmxlXScsXG4gICAgY29udGFpbmVyOiAnLnBseXInLFxuICAgIGNvbnRyb2xzOiB7XG4gICAgICBjb250YWluZXI6IG51bGwsXG4gICAgICB3cmFwcGVyOiAnLnBseXJfX2NvbnRyb2xzJyxcbiAgICB9LFxuICAgIGxhYmVsczogJ1tkYXRhLXBseXJdJyxcbiAgICBidXR0b25zOiB7XG4gICAgICBwbGF5OiAnW2RhdGEtcGx5cj1cInBsYXlcIl0nLFxuICAgICAgcGF1c2U6ICdbZGF0YS1wbHlyPVwicGF1c2VcIl0nLFxuICAgICAgcmVzdGFydDogJ1tkYXRhLXBseXI9XCJyZXN0YXJ0XCJdJyxcbiAgICAgIHJld2luZDogJ1tkYXRhLXBseXI9XCJyZXdpbmRcIl0nLFxuICAgICAgZmFzdEZvcndhcmQ6ICdbZGF0YS1wbHlyPVwiZmFzdC1mb3J3YXJkXCJdJyxcbiAgICAgIG11dGU6ICdbZGF0YS1wbHlyPVwibXV0ZVwiXScsXG4gICAgICBjYXB0aW9uczogJ1tkYXRhLXBseXI9XCJjYXB0aW9uc1wiXScsXG4gICAgICBkb3dubG9hZDogJ1tkYXRhLXBseXI9XCJkb3dubG9hZFwiXScsXG4gICAgICBmdWxsc2NyZWVuOiAnW2RhdGEtcGx5cj1cImZ1bGxzY3JlZW5cIl0nLFxuICAgICAgcGlwOiAnW2RhdGEtcGx5cj1cInBpcFwiXScsXG4gICAgICBhaXJwbGF5OiAnW2RhdGEtcGx5cj1cImFpcnBsYXlcIl0nLFxuICAgICAgc2V0dGluZ3M6ICdbZGF0YS1wbHlyPVwic2V0dGluZ3NcIl0nLFxuICAgICAgbG9vcDogJ1tkYXRhLXBseXI9XCJsb29wXCJdJyxcbiAgICB9LFxuICAgIGlucHV0czoge1xuICAgICAgc2VlazogJ1tkYXRhLXBseXI9XCJzZWVrXCJdJyxcbiAgICAgIHZvbHVtZTogJ1tkYXRhLXBseXI9XCJ2b2x1bWVcIl0nLFxuICAgICAgc3BlZWQ6ICdbZGF0YS1wbHlyPVwic3BlZWRcIl0nLFxuICAgICAgbGFuZ3VhZ2U6ICdbZGF0YS1wbHlyPVwibGFuZ3VhZ2VcIl0nLFxuICAgICAgcXVhbGl0eTogJ1tkYXRhLXBseXI9XCJxdWFsaXR5XCJdJyxcbiAgICB9LFxuICAgIGRpc3BsYXk6IHtcbiAgICAgIGN1cnJlbnRUaW1lOiAnLnBseXJfX3RpbWUtLWN1cnJlbnQnLFxuICAgICAgZHVyYXRpb246ICcucGx5cl9fdGltZS0tZHVyYXRpb24nLFxuICAgICAgYnVmZmVyOiAnLnBseXJfX3Byb2dyZXNzX19idWZmZXInLFxuICAgICAgbG9vcDogJy5wbHlyX19wcm9ncmVzc19fbG9vcCcsIC8vIFVzZWQgbGF0ZXJcbiAgICAgIHZvbHVtZTogJy5wbHlyX192b2x1bWUtLWRpc3BsYXknLFxuICAgIH0sXG4gICAgcHJvZ3Jlc3M6ICcucGx5cl9fcHJvZ3Jlc3MnLFxuICAgIGNhcHRpb25zOiAnLnBseXJfX2NhcHRpb25zJyxcbiAgICBjYXB0aW9uOiAnLnBseXJfX2NhcHRpb24nLFxuICB9LFxuXG4gIC8vIENsYXNzIGhvb2tzIGFkZGVkIHRvIHRoZSBwbGF5ZXIgaW4gZGlmZmVyZW50IHN0YXRlc1xuICBjbGFzc05hbWVzOiB7XG4gICAgdHlwZTogJ3BseXItLXswfScsXG4gICAgcHJvdmlkZXI6ICdwbHlyLS17MH0nLFxuICAgIHZpZGVvOiAncGx5cl9fdmlkZW8td3JhcHBlcicsXG4gICAgZW1iZWQ6ICdwbHlyX192aWRlby1lbWJlZCcsXG4gICAgdmlkZW9GaXhlZFJhdGlvOiAncGx5cl9fdmlkZW8td3JhcHBlci0tZml4ZWQtcmF0aW8nLFxuICAgIGVtYmVkQ29udGFpbmVyOiAncGx5cl9fdmlkZW8tZW1iZWRfX2NvbnRhaW5lcicsXG4gICAgcG9zdGVyOiAncGx5cl9fcG9zdGVyJyxcbiAgICBwb3N0ZXJFbmFibGVkOiAncGx5cl9fcG9zdGVyLWVuYWJsZWQnLFxuICAgIGFkczogJ3BseXJfX2FkcycsXG4gICAgY29udHJvbDogJ3BseXJfX2NvbnRyb2wnLFxuICAgIGNvbnRyb2xQcmVzc2VkOiAncGx5cl9fY29udHJvbC0tcHJlc3NlZCcsXG4gICAgcGxheWluZzogJ3BseXItLXBsYXlpbmcnLFxuICAgIHBhdXNlZDogJ3BseXItLXBhdXNlZCcsXG4gICAgc3RvcHBlZDogJ3BseXItLXN0b3BwZWQnLFxuICAgIGxvYWRpbmc6ICdwbHlyLS1sb2FkaW5nJyxcbiAgICBob3ZlcjogJ3BseXItLWhvdmVyJyxcbiAgICB0b29sdGlwOiAncGx5cl9fdG9vbHRpcCcsXG4gICAgY3VlczogJ3BseXJfX2N1ZXMnLFxuICAgIGhpZGRlbjogJ3BseXJfX3NyLW9ubHknLFxuICAgIGhpZGVDb250cm9sczogJ3BseXItLWhpZGUtY29udHJvbHMnLFxuICAgIGlzSW9zOiAncGx5ci0taXMtaW9zJyxcbiAgICBpc1RvdWNoOiAncGx5ci0taXMtdG91Y2gnLFxuICAgIHVpU3VwcG9ydGVkOiAncGx5ci0tZnVsbC11aScsXG4gICAgbm9UcmFuc2l0aW9uOiAncGx5ci0tbm8tdHJhbnNpdGlvbicsXG4gICAgZGlzcGxheToge1xuICAgICAgdGltZTogJ3BseXJfX3RpbWUnLFxuICAgIH0sXG4gICAgbWVudToge1xuICAgICAgdmFsdWU6ICdwbHlyX19tZW51X192YWx1ZScsXG4gICAgICBiYWRnZTogJ3BseXJfX2JhZGdlJyxcbiAgICAgIG9wZW46ICdwbHlyLS1tZW51LW9wZW4nLFxuICAgIH0sXG4gICAgY2FwdGlvbnM6IHtcbiAgICAgIGVuYWJsZWQ6ICdwbHlyLS1jYXB0aW9ucy1lbmFibGVkJyxcbiAgICAgIGFjdGl2ZTogJ3BseXItLWNhcHRpb25zLWFjdGl2ZScsXG4gICAgfSxcbiAgICBmdWxsc2NyZWVuOiB7XG4gICAgICBlbmFibGVkOiAncGx5ci0tZnVsbHNjcmVlbi1lbmFibGVkJyxcbiAgICAgIGZhbGxiYWNrOiAncGx5ci0tZnVsbHNjcmVlbi1mYWxsYmFjaycsXG4gICAgfSxcbiAgICBwaXA6IHtcbiAgICAgIHN1cHBvcnRlZDogJ3BseXItLXBpcC1zdXBwb3J0ZWQnLFxuICAgICAgYWN0aXZlOiAncGx5ci0tcGlwLWFjdGl2ZScsXG4gICAgfSxcbiAgICBhaXJwbGF5OiB7XG4gICAgICBzdXBwb3J0ZWQ6ICdwbHlyLS1haXJwbGF5LXN1cHBvcnRlZCcsXG4gICAgICBhY3RpdmU6ICdwbHlyLS1haXJwbGF5LWFjdGl2ZScsXG4gICAgfSxcbiAgICB0YWJGb2N1czogJ3BseXJfX3RhYi1mb2N1cycsXG4gICAgcHJldmlld1RodW1ibmFpbHM6IHtcbiAgICAgIC8vIFRvb2x0aXAgdGh1bWJzXG4gICAgICB0aHVtYkNvbnRhaW5lcjogJ3BseXJfX3ByZXZpZXctdGh1bWInLFxuICAgICAgdGh1bWJDb250YWluZXJTaG93bjogJ3BseXJfX3ByZXZpZXctdGh1bWItLWlzLXNob3duJyxcbiAgICAgIGltYWdlQ29udGFpbmVyOiAncGx5cl9fcHJldmlldy10aHVtYl9faW1hZ2UtY29udGFpbmVyJyxcbiAgICAgIHRpbWVDb250YWluZXI6ICdwbHlyX19wcmV2aWV3LXRodW1iX190aW1lLWNvbnRhaW5lcicsXG4gICAgICAvLyBTY3J1YmJpbmdcbiAgICAgIHNjcnViYmluZ0NvbnRhaW5lcjogJ3BseXJfX3ByZXZpZXctc2NydWJiaW5nJyxcbiAgICAgIHNjcnViYmluZ0NvbnRhaW5lclNob3duOiAncGx5cl9fcHJldmlldy1zY3J1YmJpbmctLWlzLXNob3duJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIEVtYmVkIGF0dHJpYnV0ZXNcbiAgYXR0cmlidXRlczoge1xuICAgIGVtYmVkOiB7XG4gICAgICBwcm92aWRlcjogJ2RhdGEtcGx5ci1wcm92aWRlcicsXG4gICAgICBpZDogJ2RhdGEtcGx5ci1lbWJlZC1pZCcsXG4gICAgfSxcbiAgfSxcblxuICAvLyBBZHZlcnRpc2VtZW50cyBwbHVnaW5cbiAgLy8gUmVnaXN0ZXIgZm9yIGFuIGFjY291bnQgaGVyZTogaHR0cDovL3ZpLmFpL3B1Ymxpc2hlci12aWRlby1tb25ldGl6YXRpb24vP2FpZD1wbHlyaW9cbiAgYWRzOiB7XG4gICAgZW5hYmxlZDogZmFsc2UsXG4gICAgcHVibGlzaGVySWQ6ICcnLFxuICAgIHRhZ1VybDogJycsXG4gIH0sXG5cbiAgLy8gUHJldmlldyBUaHVtYm5haWxzIHBsdWdpblxuICBwcmV2aWV3VGh1bWJuYWlsczoge1xuICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgIHNyYzogJycsXG4gIH0sXG5cbiAgLy8gVmltZW8gcGx1Z2luXG4gIHZpbWVvOiB7XG4gICAgYnlsaW5lOiBmYWxzZSxcbiAgICBwb3J0cmFpdDogZmFsc2UsXG4gICAgdGl0bGU6IGZhbHNlLFxuICAgIHNwZWVkOiB0cnVlLFxuICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcbiAgICAvLyBXaGV0aGVyIHRoZSBvd25lciBvZiB0aGUgdmlkZW8gaGFzIGEgUHJvIG9yIEJ1c2luZXNzIGFjY291bnRcbiAgICAvLyAod2hpY2ggYWxsb3dzIHVzIHRvIHByb3Blcmx5IGhpZGUgY29udHJvbHMgd2l0aG91dCBDU1MgaGFja3MsIGV0YylcbiAgICBwcmVtaXVtOiBmYWxzZSxcbiAgICAvLyBDdXN0b20gc2V0dGluZ3MgZnJvbSBQbHlyXG4gICAgcmVmZXJyZXJQb2xpY3k6IG51bGwsIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MSUZyYW1lRWxlbWVudC9yZWZlcnJlclBvbGljeVxuICB9LFxuXG4gIC8vIFlvdVR1YmUgcGx1Z2luXG4gIHlvdXR1YmU6IHtcbiAgICBub0Nvb2tpZTogdHJ1ZSwgLy8gV2hldGhlciB0byB1c2UgYW4gYWx0ZXJuYXRpdmUgdmVyc2lvbiBvZiBZb3VUdWJlIHdpdGhvdXQgY29va2llc1xuICAgIHJlbDogMCwgLy8gTm8gcmVsYXRlZCB2aWRzXG4gICAgc2hvd2luZm86IDAsIC8vIEhpZGUgaW5mb1xuICAgIGl2X2xvYWRfcG9saWN5OiAzLCAvLyBIaWRlIGFubm90YXRpb25zXG4gICAgbW9kZXN0YnJhbmRpbmc6IDEsIC8vIEhpZGUgbG9nb3MgYXMgbXVjaCBhcyBwb3NzaWJsZSAodGhleSBzdGlsbCBzaG93IG9uZSBpbiB0aGUgY29ybmVyIHdoZW4gcGF1c2VkKVxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdHM7XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBzdGF0ZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBwaXAgPSB7XG4gIGFjdGl2ZTogJ3BpY3R1cmUtaW4tcGljdHVyZScsXG4gIGluYWN0aXZlOiAnaW5saW5lJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgcGlwIH07XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBzdXBwb3J0ZWQgdHlwZXMgYW5kIHByb3ZpZGVyc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHByb3ZpZGVycyA9IHtcbiAgaHRtbDU6ICdodG1sNScsXG4gIHlvdXR1YmU6ICd5b3V0dWJlJyxcbiAgdmltZW86ICd2aW1lbycsXG59O1xuXG5leHBvcnQgY29uc3QgdHlwZXMgPSB7XG4gIGF1ZGlvOiAnYXVkaW8nLFxuICB2aWRlbzogJ3ZpZGVvJyxcbn07XG5cbi8qKlxuICogR2V0IHByb3ZpZGVyIGJ5IFVSTFxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvdmlkZXJCeVVybCh1cmwpIHtcbiAgLy8gWW91VHViZVxuICBpZiAoL14oaHR0cHM/OlxcL1xcLyk/KHd3d1xcLik/KHlvdXR1YmVcXC5jb218eW91dHViZS1ub2Nvb2tpZVxcLmNvbXx5b3V0dVxcLj9iZSlcXC8uKyQvLnRlc3QodXJsKSkge1xuICAgIHJldHVybiBwcm92aWRlcnMueW91dHViZTtcbiAgfVxuXG4gIC8vIFZpbWVvXG4gIGlmICgvXmh0dHBzPzpcXC9cXC9wbGF5ZXIudmltZW8uY29tXFwvdmlkZW9cXC9cXGR7MCw5fSg/PVxcYnxcXC8pLy50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gcHJvdmlkZXJzLnZpbWVvO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgcHJvdmlkZXJzLCB0eXBlcyB9O1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZ1bGxzY3JlZW4gd3JhcHBlclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Z1bGxzY3JlZW5fQVBJI3ByZWZpeGluZ1xuLy8gaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvNzkyOS9kZXNpZ25pbmctd2Vic2l0ZXMtZm9yLWlwaG9uZS14L1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGJyb3dzZXIgZnJvbSAnLi91dGlscy9icm93c2VyJztcbmltcG9ydCB7IGNsb3Nlc3QsZ2V0RWxlbWVudHMsIGhhc0NsYXNzLCB0b2dnbGVDbGFzcyB9IGZyb20gJy4vdXRpbHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgb24sIHRyaWdnZXJFdmVudCB9IGZyb20gJy4vdXRpbHMvZXZlbnRzJztcbmltcG9ydCBpcyBmcm9tICcuL3V0aWxzL2lzJztcbmltcG9ydCB7IHNpbGVuY2VQcm9taXNlIH0gZnJvbSAnLi91dGlscy9wcm9taXNlJztcblxuY2xhc3MgRnVsbHNjcmVlbiB7XG4gIGNvbnN0cnVjdG9yKHBsYXllcikge1xuICAgIC8vIEtlZXAgcmVmZXJlbmNlIHRvIHBhcmVudFxuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuXG4gICAgLy8gR2V0IHByZWZpeFxuICAgIHRoaXMucHJlZml4ID0gRnVsbHNjcmVlbi5wcmVmaXg7XG4gICAgdGhpcy5wcm9wZXJ0eSA9IEZ1bGxzY3JlZW4ucHJvcGVydHk7XG5cbiAgICAvLyBTY3JvbGwgcG9zaXRpb25cbiAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0geyB4OiAwLCB5OiAwIH07XG5cbiAgICAvLyBGb3JjZSB0aGUgdXNlIG9mICdmdWxsIHdpbmRvdy9icm93c2VyJyByYXRoZXIgdGhhbiBmdWxsc2NyZWVuXG4gICAgdGhpcy5mb3JjZUZhbGxiYWNrID0gcGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmZhbGxiYWNrID09PSAnZm9yY2UnO1xuXG4gICAgLy8gR2V0IHRoZSBmdWxsc2NyZWVuIGVsZW1lbnRcbiAgICAvLyBDaGVja3MgY29udGFpbmVyIGlzIGFuIGFuY2VzdG9yLCBkZWZhdWx0cyB0byBudWxsXG4gICAgdGhpcy5wbGF5ZXIuZWxlbWVudHMuZnVsbHNjcmVlbiA9XG4gICAgICBwbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uY29udGFpbmVyICYmIGNsb3Nlc3QodGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLCBwbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uY29udGFpbmVyKTtcblxuICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyc1xuICAgIC8vIEhhbmRsZSBldmVudCAoaW5jYXNlIHVzZXIgcHJlc3NlcyBlc2NhcGUgZXRjKVxuICAgIG9uLmNhbGwoXG4gICAgICB0aGlzLnBsYXllcixcbiAgICAgIGRvY3VtZW50LFxuICAgICAgdGhpcy5wcmVmaXggPT09ICdtcycgPyAnTVNGdWxsc2NyZWVuQ2hhbmdlJyA6IGAke3RoaXMucHJlZml4fWZ1bGxzY3JlZW5jaGFuZ2VgLFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBUT0RPOiBGaWx0ZXIgZm9yIHRhcmdldD8/XG4gICAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIC8vIEZ1bGxzY3JlZW4gdG9nZ2xlIG9uIGRvdWJsZSBjbGlja1xuICAgIG9uLmNhbGwodGhpcy5wbGF5ZXIsIHRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lciwgJ2RibGNsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgLy8gSWdub3JlIGRvdWJsZSBjbGljayBpbiBjb250cm9sc1xuICAgICAgaWYgKGlzLmVsZW1lbnQodGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udHJvbHMpICYmIHRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRyb2xzLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gVGFwIGZvY3VzIHdoZW4gaW4gZnVsbHNjcmVlblxuICAgIG9uLmNhbGwodGhpcywgdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLCAna2V5ZG93bicsIGV2ZW50ID0+IHRoaXMudHJhcEZvY3VzKGV2ZW50KSk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIFVJXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIC8vIERldGVybWluZSBpZiBuYXRpdmUgc3VwcG9ydGVkXG4gIHN0YXRpYyBnZXQgbmF0aXZlKCkge1xuICAgIHJldHVybiAhIShcbiAgICAgIGRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkIHx8XG4gICAgICBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCB8fFxuICAgICAgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVuYWJsZWQgfHxcbiAgICAgIGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVuYWJsZWRcbiAgICApO1xuICB9XG5cbiAgLy8gSWYgd2UncmUgYWN0dWFsbHkgdXNpbmcgbmF0aXZlXG4gIGdldCB1c2luZ05hdGl2ZSgpIHtcbiAgICByZXR1cm4gRnVsbHNjcmVlbi5uYXRpdmUgJiYgIXRoaXMuZm9yY2VGYWxsYmFjaztcbiAgfVxuXG4gIC8vIEdldCB0aGUgcHJlZml4IGZvciBoYW5kbGVyc1xuICBzdGF0aWMgZ2V0IHByZWZpeCgpIHtcbiAgICAvLyBObyBwcmVmaXhcbiAgICBpZiAoaXMuZnVuY3Rpb24oZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGZ1bGxzY3JlZW4gc3VwcG9ydCBieSB2ZW5kb3IgcHJlZml4XG4gICAgbGV0IHZhbHVlID0gJyc7XG4gICAgY29uc3QgcHJlZml4ZXMgPSBbJ3dlYmtpdCcsICdtb3onLCAnbXMnXTtcblxuICAgIHByZWZpeGVzLnNvbWUocHJlID0+IHtcbiAgICAgIGlmIChpcy5mdW5jdGlvbihkb2N1bWVudFtgJHtwcmV9RXhpdEZ1bGxzY3JlZW5gXSkgfHwgaXMuZnVuY3Rpb24oZG9jdW1lbnRbYCR7cHJlfUNhbmNlbEZ1bGxTY3JlZW5gXSkpIHtcbiAgICAgICAgdmFsdWUgPSBwcmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHByb3BlcnR5KCkge1xuICAgIHJldHVybiB0aGlzLnByZWZpeCA9PT0gJ21veicgPyAnRnVsbFNjcmVlbicgOiAnRnVsbHNjcmVlbic7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgaWYgZnVsbHNjcmVlbiBpcyBlbmFibGVkXG4gIGdldCBlbmFibGVkKCkge1xuICAgIHJldHVybiAoXG4gICAgICAoRnVsbHNjcmVlbi5uYXRpdmUgfHwgdGhpcy5wbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uZmFsbGJhY2spICYmXG4gICAgICB0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5lbmFibGVkICYmXG4gICAgICB0aGlzLnBsYXllci5zdXBwb3J0ZWQudWkgJiZcbiAgICAgIHRoaXMucGxheWVyLmlzVmlkZW9cbiAgICApO1xuICB9XG5cbiAgLy8gR2V0IGFjdGl2ZSBzdGF0ZVxuICBnZXQgYWN0aXZlKCkge1xuICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdXNpbmcgY2xhc3NuYW1lXG4gICAgaWYgKCFGdWxsc2NyZWVuLm5hdGl2ZSB8fCB0aGlzLmZvcmNlRmFsbGJhY2spIHtcbiAgICAgIHJldHVybiBoYXNDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMuZnVsbHNjcmVlbi5mYWxsYmFjayk7XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudCA9ICF0aGlzLnByZWZpeCA/IGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IDogZG9jdW1lbnRbYCR7dGhpcy5wcmVmaXh9JHt0aGlzLnByb3BlcnR5fUVsZW1lbnRgXTtcblxuICAgIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQuc2hhZG93Um9vdCA/IGVsZW1lbnQgPT09IHRoaXMudGFyZ2V0LmdldFJvb3ROb2RlKCkuaG9zdCA6IGVsZW1lbnQgPT09IHRoaXMudGFyZ2V0O1xuICB9XG5cbiAgLy8gR2V0IHRhcmdldCBlbGVtZW50XG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIGJyb3dzZXIuaXNJb3MgJiYgdGhpcy5wbGF5ZXIuY29uZmlnLmZ1bGxzY3JlZW4uaW9zTmF0aXZlXG4gICAgICA/IHRoaXMucGxheWVyLm1lZGlhXG4gICAgICA6IHRoaXMucGxheWVyLmVsZW1lbnRzLmZ1bGxzY3JlZW4gfHwgdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyO1xuICB9XG5cbiAgb25DaGFuZ2UoKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdG9nZ2xlIGJ1dHRvblxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMucGxheWVyLmVsZW1lbnRzLmJ1dHRvbnMuZnVsbHNjcmVlbjtcbiAgICBpZiAoaXMuZWxlbWVudChidXR0b24pKSB7XG4gICAgICBidXR0b24ucHJlc3NlZCA9IHRoaXMuYWN0aXZlO1xuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgYW4gZXZlbnRcbiAgICB0cmlnZ2VyRXZlbnQuY2FsbCh0aGlzLnBsYXllciwgdGhpcy50YXJnZXQsIHRoaXMuYWN0aXZlID8gJ2VudGVyZnVsbHNjcmVlbicgOiAnZXhpdGZ1bGxzY3JlZW4nLCB0cnVlKTtcbiAgfVxuXG4gIHRvZ2dsZUZhbGxiYWNrKHRvZ2dsZSA9IGZhbHNlKSB7XG4gICAgLy8gU3RvcmUgb3IgcmVzdG9yZSBzY3JvbGwgcG9zaXRpb25cbiAgICBpZiAodG9nZ2xlKSB7XG4gICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0ge1xuICAgICAgICB4OiB3aW5kb3cuc2Nyb2xsWCB8fCAwLFxuICAgICAgICB5OiB3aW5kb3cuc2Nyb2xsWSB8fCAwLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LnNjcm9sbFRvKHRoaXMuc2Nyb2xsUG9zaXRpb24ueCwgdGhpcy5zY3JvbGxQb3NpdGlvbi55KTtcbiAgICB9XG5cbiAgICAvLyBUb2dnbGUgc2Nyb2xsXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IHRvZ2dsZSA/ICdoaWRkZW4nIDogJyc7XG5cbiAgICAvLyBUb2dnbGUgY2xhc3MgaG9va1xuICAgIHRvZ2dsZUNsYXNzKHRoaXMudGFyZ2V0LCB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5mdWxsc2NyZWVuLmZhbGxiYWNrLCB0b2dnbGUpO1xuXG4gICAgLy8gRm9yY2UgZnVsbCB2aWV3cG9ydCBvbiBpUGhvbmUgWCtcbiAgICBpZiAoYnJvd3Nlci5pc0lvcykge1xuICAgICAgbGV0IHZpZXdwb3J0ID0gZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJ2aWV3cG9ydFwiXScpO1xuICAgICAgY29uc3QgcHJvcGVydHkgPSAndmlld3BvcnQtZml0PWNvdmVyJztcblxuICAgICAgLy8gSW5qZWN0IHRoZSB2aWV3cG9ydCBtZXRhIGlmIHJlcXVpcmVkXG4gICAgICBpZiAoIXZpZXdwb3J0KSB7XG4gICAgICAgIHZpZXdwb3J0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuICAgICAgICB2aWV3cG9ydC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndmlld3BvcnQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHByb3BlcnR5IGFscmVhZHkgZXhpc3RzXG4gICAgICBjb25zdCBoYXNQcm9wZXJ0eSA9IGlzLnN0cmluZyh2aWV3cG9ydC5jb250ZW50KSAmJiB2aWV3cG9ydC5jb250ZW50LmluY2x1ZGVzKHByb3BlcnR5KTtcblxuICAgICAgaWYgKHRvZ2dsZSkge1xuICAgICAgICB0aGlzLmNsZWFudXBWaWV3cG9ydCA9ICFoYXNQcm9wZXJ0eTtcblxuICAgICAgICBpZiAoIWhhc1Byb3BlcnR5KSB7XG4gICAgICAgICAgdmlld3BvcnQuY29udGVudCArPSBgLCR7cHJvcGVydHl9YDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNsZWFudXBWaWV3cG9ydCkge1xuICAgICAgICB2aWV3cG9ydC5jb250ZW50ID0gdmlld3BvcnQuY29udGVudFxuICAgICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgICAgLmZpbHRlcihwYXJ0ID0+IHBhcnQudHJpbSgpICE9PSBwcm9wZXJ0eSlcbiAgICAgICAgICAuam9pbignLCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBidXR0b24gYW5kIGZpcmUgZXZlbnRzXG4gICAgdGhpcy5vbkNoYW5nZSgpO1xuICB9XG5cbiAgLy8gVHJhcCBmb2N1cyBpbnNpZGUgY29udGFpbmVyXG4gIHRyYXBGb2N1cyhldmVudCkge1xuICAgIC8vIEJhaWwgaWYgaU9TLCBub3QgYWN0aXZlLCBub3QgdGhlIHRhYiBrZXlcbiAgICBpZiAoYnJvd3Nlci5pc0lvcyB8fCAhdGhpcy5hY3RpdmUgfHwgZXZlbnQua2V5ICE9PSAnVGFiJyB8fCBldmVudC5rZXlDb2RlICE9PSA5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGZvY3VzZWQgZWxlbWVudFxuICAgIGNvbnN0IGZvY3VzZWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIGNvbnN0IGZvY3VzYWJsZSA9IGdldEVsZW1lbnRzLmNhbGwodGhpcy5wbGF5ZXIsICdhW2hyZWZdLCBidXR0b246bm90KDpkaXNhYmxlZCksIGlucHV0Om5vdCg6ZGlzYWJsZWQpLCBbdGFiaW5kZXhdJyk7XG4gICAgY29uc3QgW2ZpcnN0XSA9IGZvY3VzYWJsZTtcbiAgICBjb25zdCBsYXN0ID0gZm9jdXNhYmxlW2ZvY3VzYWJsZS5sZW5ndGggLSAxXTtcblxuICAgIGlmIChmb2N1c2VkID09PSBsYXN0ICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgLy8gTW92ZSBmb2N1cyB0byBmaXJzdCBlbGVtZW50IHRoYXQgY2FuIGJlIHRhYmJlZCBpZiBTaGlmdCBpc24ndCB1c2VkXG4gICAgICBmaXJzdC5mb2N1cygpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGVsc2UgaWYgKGZvY3VzZWQgPT09IGZpcnN0ICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAvLyBNb3ZlIGZvY3VzIHRvIGxhc3QgZWxlbWVudCB0aGF0IGNhbiBiZSB0YWJiZWQgaWYgU2hpZnQgaXMgdXNlZFxuICAgICAgbGFzdC5mb2N1cygpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgVUlcbiAgdXBkYXRlKCkge1xuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIGxldCBtb2RlO1xuXG4gICAgICBpZiAodGhpcy5mb3JjZUZhbGxiYWNrKSB7XG4gICAgICAgIG1vZGUgPSAnRmFsbGJhY2sgKGZvcmNlZCknO1xuICAgICAgfSBlbHNlIGlmIChGdWxsc2NyZWVuLm5hdGl2ZSkge1xuICAgICAgICBtb2RlID0gJ05hdGl2ZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RlID0gJ0ZhbGxiYWNrJztcbiAgICAgIH1cblxuICAgICAgdGhpcy5wbGF5ZXIuZGVidWcubG9nKGAke21vZGV9IGZ1bGxzY3JlZW4gZW5hYmxlZGApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coJ0Z1bGxzY3JlZW4gbm90IHN1cHBvcnRlZCBhbmQgZmFsbGJhY2sgZGlzYWJsZWQnKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc3R5bGluZyBob29rIHRvIHNob3cgYnV0dG9uXG4gICAgdG9nZ2xlQ2xhc3ModGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5mdWxsc2NyZWVuLmVuYWJsZWQsIHRoaXMuZW5hYmxlZCk7XG4gIH1cblxuICAvLyBNYWtlIGFuIGVsZW1lbnQgZnVsbHNjcmVlblxuICBlbnRlcigpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlPUyBuYXRpdmUgZnVsbHNjcmVlbiBkb2Vzbid0IG5lZWQgdGhlIHJlcXVlc3Qgc3RlcFxuICAgIGlmIChicm93c2VyLmlzSW9zICYmIHRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZSkge1xuICAgICAgdGhpcy50YXJnZXQud2Via2l0RW50ZXJGdWxsc2NyZWVuKCk7XG4gICAgfSBlbHNlIGlmICghRnVsbHNjcmVlbi5uYXRpdmUgfHwgdGhpcy5mb3JjZUZhbGxiYWNrKSB7XG4gICAgICB0aGlzLnRvZ2dsZUZhbGxiYWNrKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMucHJlZml4KSB7XG4gICAgICB0aGlzLnRhcmdldC5yZXF1ZXN0RnVsbHNjcmVlbih7IG5hdmlnYXRpb25VSTogJ2hpZGUnIH0pO1xuICAgIH0gZWxzZSBpZiAoIWlzLmVtcHR5KHRoaXMucHJlZml4KSkge1xuICAgICAgdGhpcy50YXJnZXRbYCR7dGhpcy5wcmVmaXh9UmVxdWVzdCR7dGhpcy5wcm9wZXJ0eX1gXSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJhaWwgZnJvbSBmdWxsc2NyZWVuXG4gIGV4aXQoKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpT1MgbmF0aXZlIGZ1bGxzY3JlZW5cbiAgICBpZiAoYnJvd3Nlci5pc0lvcyAmJiB0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5pb3NOYXRpdmUpIHtcbiAgICAgIHRoaXMudGFyZ2V0LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICBzaWxlbmNlUHJvbWlzZSh0aGlzLnBsYXllci5wbGF5KCkpO1xuICAgIH0gZWxzZSBpZiAoIUZ1bGxzY3JlZW4ubmF0aXZlIHx8IHRoaXMuZm9yY2VGYWxsYmFjaykge1xuICAgICAgdGhpcy50b2dnbGVGYWxsYmFjayhmYWxzZSk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5wcmVmaXgpIHtcbiAgICAgIChkb2N1bWVudC5jYW5jZWxGdWxsU2NyZWVuIHx8IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKS5jYWxsKGRvY3VtZW50KTtcbiAgICB9IGVsc2UgaWYgKCFpcy5lbXB0eSh0aGlzLnByZWZpeCkpIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMucHJlZml4ID09PSAnbW96JyA/ICdDYW5jZWwnIDogJ0V4aXQnO1xuICAgICAgZG9jdW1lbnRbYCR7dGhpcy5wcmVmaXh9JHthY3Rpb259JHt0aGlzLnByb3BlcnR5fWBdKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVG9nZ2xlIHN0YXRlXG4gIHRvZ2dsZSgpIHtcbiAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XG4gICAgICB0aGlzLmVudGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXhpdCgpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGdWxsc2NyZWVuO1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExvYWQgaW1hZ2UgYXZvaWRpbmcgeGhyL2ZldGNoIENPUlMgaXNzdWVzXG4vLyBTZXJ2ZXIgc3RhdHVzIGNhbid0IGJlIG9idGFpbmVkIHRoaXMgd2F5IHVuZm9ydHVuYXRlbHksIHNvIHRoaXMgdXNlcyBcIm5hdHVyYWxXaWR0aFwiIHRvIGRldGVybWluZSBpZiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuLy8gQnkgZGVmYXVsdCBpdCBjaGVja3MgaWYgaXQgaXMgYXQgbGVhc3QgMXB4LCBidXQgeW91IGNhbiBhZGQgYSBzZWNvbmQgYXJndW1lbnQgdG8gY2hhbmdlIHRoaXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvYWRJbWFnZShzcmMsIG1pbldpZHRoID0gMSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICBjb25zdCBoYW5kbGVyID0gKCkgPT4ge1xuICAgICAgZGVsZXRlIGltYWdlLm9ubG9hZDtcbiAgICAgIGRlbGV0ZSBpbWFnZS5vbmVycm9yO1xuICAgICAgKGltYWdlLm5hdHVyYWxXaWR0aCA+PSBtaW5XaWR0aCA/IHJlc29sdmUgOiByZWplY3QpKGltYWdlKTtcbiAgICB9O1xuXG4gICAgT2JqZWN0LmFzc2lnbihpbWFnZSwgeyBvbmxvYWQ6IGhhbmRsZXIsIG9uZXJyb3I6IGhhbmRsZXIsIHNyYyB9KTtcbiAgfSk7XG59XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBVSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGNhcHRpb25zIGZyb20gJy4vY2FwdGlvbnMnO1xuaW1wb3J0IGNvbnRyb2xzIGZyb20gJy4vY29udHJvbHMnO1xuaW1wb3J0IHN1cHBvcnQgZnJvbSAnLi9zdXBwb3J0JztcbmltcG9ydCBicm93c2VyIGZyb20gJy4vdXRpbHMvYnJvd3Nlcic7XG5pbXBvcnQgeyBnZXRFbGVtZW50LCB0b2dnbGVDbGFzcyB9IGZyb20gJy4vdXRpbHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgcmVhZHksIHRyaWdnZXJFdmVudCB9IGZyb20gJy4vdXRpbHMvZXZlbnRzJztcbmltcG9ydCBpMThuIGZyb20gJy4vdXRpbHMvaTE4bic7XG5pbXBvcnQgaXMgZnJvbSAnLi91dGlscy9pcyc7XG5pbXBvcnQgbG9hZEltYWdlIGZyb20gJy4vdXRpbHMvbG9hZC1pbWFnZSc7XG5cbmNvbnN0IHVpID0ge1xuICBhZGRTdHlsZUhvb2soKSB7XG4gICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250YWluZXIucmVwbGFjZSgnLicsICcnKSwgdHJ1ZSk7XG4gICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudWlTdXBwb3J0ZWQsIHRoaXMuc3VwcG9ydGVkLnVpKTtcbiAgfSxcblxuICAvLyBUb2dnbGUgbmF0aXZlIEhUTUw1IG1lZGlhIGNvbnRyb2xzXG4gIHRvZ2dsZU5hdGl2ZUNvbnRyb2xzKHRvZ2dsZSA9IGZhbHNlKSB7XG4gICAgaWYgKHRvZ2dsZSAmJiB0aGlzLmlzSFRNTDUpIHtcbiAgICAgIHRoaXMubWVkaWEuc2V0QXR0cmlidXRlKCdjb250cm9scycsICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZWRpYS5yZW1vdmVBdHRyaWJ1dGUoJ2NvbnRyb2xzJyk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFNldHVwIHRoZSBVSVxuICBidWlsZCgpIHtcbiAgICAvLyBSZS1hdHRhY2ggbWVkaWEgZWxlbWVudCBsaXN0ZW5lcnNcbiAgICAvLyBUT0RPOiBVc2UgZXZlbnQgYnViYmxpbmc/XG4gICAgdGhpcy5saXN0ZW5lcnMubWVkaWEoKTtcblxuICAgIC8vIERvbid0IHNldHVwIGludGVyZmFjZSBpZiBubyBzdXBwb3J0XG4gICAgaWYgKCF0aGlzLnN1cHBvcnRlZC51aSkge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKGBCYXNpYyBzdXBwb3J0IG9ubHkgZm9yICR7dGhpcy5wcm92aWRlcn0gJHt0aGlzLnR5cGV9YCk7XG5cbiAgICAgIC8vIFJlc3RvcmUgbmF0aXZlIGNvbnRyb2xzXG4gICAgICB1aS50b2dnbGVOYXRpdmVDb250cm9scy5jYWxsKHRoaXMsIHRydWUpO1xuXG4gICAgICAvLyBCYWlsXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5qZWN0IGN1c3RvbSBjb250cm9scyBpZiBub3QgcHJlc2VudFxuICAgIGlmICghaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmNvbnRyb2xzKSkge1xuICAgICAgLy8gSW5qZWN0IGN1c3RvbSBjb250cm9sc1xuICAgICAgY29udHJvbHMuaW5qZWN0LmNhbGwodGhpcyk7XG5cbiAgICAgIC8vIFJlLWF0dGFjaCBjb250cm9sIGxpc3RlbmVyc1xuICAgICAgdGhpcy5saXN0ZW5lcnMuY29udHJvbHMoKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgbmF0aXZlIGNvbnRyb2xzXG4gICAgdWkudG9nZ2xlTmF0aXZlQ29udHJvbHMuY2FsbCh0aGlzKTtcblxuICAgIC8vIFNldHVwIGNhcHRpb25zIGZvciBIVE1MNVxuICAgIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICAgIGNhcHRpb25zLnNldHVwLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgdm9sdW1lXG4gICAgdGhpcy52b2x1bWUgPSBudWxsO1xuXG4gICAgLy8gUmVzZXQgbXV0ZSBzdGF0ZVxuICAgIHRoaXMubXV0ZWQgPSBudWxsO1xuXG4gICAgLy8gUmVzZXQgbG9vcCBzdGF0ZVxuICAgIHRoaXMubG9vcCA9IG51bGw7XG5cbiAgICAvLyBSZXNldCBxdWFsaXR5IHNldHRpbmdcbiAgICB0aGlzLnF1YWxpdHkgPSBudWxsO1xuXG4gICAgLy8gUmVzZXQgc3BlZWRcbiAgICB0aGlzLnNwZWVkID0gbnVsbDtcblxuICAgIC8vIFJlc2V0IHZvbHVtZSBkaXNwbGF5XG4gICAgY29udHJvbHMudXBkYXRlVm9sdW1lLmNhbGwodGhpcyk7XG5cbiAgICAvLyBSZXNldCB0aW1lIGRpc3BsYXlcbiAgICBjb250cm9scy50aW1lVXBkYXRlLmNhbGwodGhpcyk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIFVJXG4gICAgdWkuY2hlY2tQbGF5aW5nLmNhbGwodGhpcyk7XG5cbiAgICAvLyBDaGVjayBmb3IgcGljdHVyZS1pbi1waWN0dXJlIHN1cHBvcnRcbiAgICB0b2dnbGVDbGFzcyhcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLFxuICAgICAgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5waXAuc3VwcG9ydGVkLFxuICAgICAgc3VwcG9ydC5waXAgJiYgdGhpcy5pc0hUTUw1ICYmIHRoaXMuaXNWaWRlbyxcbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGFpcnBsYXkgc3VwcG9ydFxuICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmFpcnBsYXkuc3VwcG9ydGVkLCBzdXBwb3J0LmFpcnBsYXkgJiYgdGhpcy5pc0hUTUw1KTtcblxuICAgIC8vIEFkZCBpT1MgY2xhc3NcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5pc0lvcywgYnJvd3Nlci5pc0lvcyk7XG5cbiAgICAvLyBBZGQgdG91Y2ggY2xhc3NcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5pc1RvdWNoLCB0aGlzLnRvdWNoKTtcblxuICAgIC8vIFJlYWR5IGZvciBBUEkgY2FsbHNcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcblxuICAgIC8vIFJlYWR5IGV2ZW50IGF0IGVuZCBvZiBleGVjdXRpb24gc3RhY2tcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHRoaXMsIHRoaXMubWVkaWEsICdyZWFkeScpO1xuICAgIH0sIDApO1xuXG4gICAgLy8gU2V0IHRoZSB0aXRsZVxuICAgIHVpLnNldFRpdGxlLmNhbGwodGhpcyk7XG5cbiAgICAvLyBBc3N1cmUgdGhlIHBvc3RlciBpbWFnZSBpcyBzZXQsIGlmIHRoZSBwcm9wZXJ0eSB3YXMgYWRkZWQgYmVmb3JlIHRoZSBlbGVtZW50IHdhcyBjcmVhdGVkXG4gICAgaWYgKHRoaXMucG9zdGVyKSB7XG4gICAgICB1aS5zZXRQb3N0ZXIuY2FsbCh0aGlzLCB0aGlzLnBvc3RlciwgZmFsc2UpLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG5cbiAgICAvLyBNYW51YWxseSBzZXQgdGhlIGR1cmF0aW9uIGlmIHVzZXIgaGFzIG92ZXJyaWRkZW4gaXQuXG4gICAgLy8gVGhlIGV2ZW50IGxpc3RlbmVycyBmb3IgaXQgZG9lc24ndCBnZXQgY2FsbGVkIGlmIHByZWxvYWQgaXMgZGlzYWJsZWQgKCM3MDEpXG4gICAgaWYgKHRoaXMuY29uZmlnLmR1cmF0aW9uKSB7XG4gICAgICBjb250cm9scy5kdXJhdGlvblVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvLyBTZXR1cCBhcmlhIGF0dHJpYnV0ZSBmb3IgcGxheSBhbmQgaWZyYW1lIHRpdGxlXG4gIHNldFRpdGxlKCkge1xuICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdGV4dFxuICAgIGxldCBsYWJlbCA9IGkxOG4uZ2V0KCdwbGF5JywgdGhpcy5jb25maWcpO1xuXG4gICAgLy8gSWYgdGhlcmUncyBhIG1lZGlhIHRpdGxlIHNldCwgdXNlIHRoYXQgZm9yIHRoZSBsYWJlbFxuICAgIGlmIChpcy5zdHJpbmcodGhpcy5jb25maWcudGl0bGUpICYmICFpcy5lbXB0eSh0aGlzLmNvbmZpZy50aXRsZSkpIHtcbiAgICAgIGxhYmVsICs9IGAsICR7dGhpcy5jb25maWcudGl0bGV9YDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIGEgcGxheSBidXR0b24sIHNldCBsYWJlbFxuICAgIEFycmF5LmZyb20odGhpcy5lbGVtZW50cy5idXR0b25zLnBsYXkgfHwgW10pLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgaWZyYW1lIHRpdGxlXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NhbXBvdHRzL3BseXIvaXNzdWVzLzEyNFxuICAgIGlmICh0aGlzLmlzRW1iZWQpIHtcbiAgICAgIGNvbnN0IGlmcmFtZSA9IGdldEVsZW1lbnQuY2FsbCh0aGlzLCAnaWZyYW1lJyk7XG5cbiAgICAgIGlmICghaXMuZWxlbWVudChpZnJhbWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCB0byBtZWRpYSB0eXBlXG4gICAgICBjb25zdCB0aXRsZSA9ICFpcy5lbXB0eSh0aGlzLmNvbmZpZy50aXRsZSkgPyB0aGlzLmNvbmZpZy50aXRsZSA6ICd2aWRlbyc7XG4gICAgICBjb25zdCBmb3JtYXQgPSBpMThuLmdldCgnZnJhbWVUaXRsZScsIHRoaXMuY29uZmlnKTtcblxuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBmb3JtYXQucmVwbGFjZSgne3RpdGxlfScsIHRpdGxlKSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRvZ2dsZSBwb3N0ZXJcbiAgdG9nZ2xlUG9zdGVyKGVuYWJsZSkge1xuICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnBvc3RlckVuYWJsZWQsIGVuYWJsZSk7XG4gIH0sXG5cbiAgLy8gU2V0IHRoZSBwb3N0ZXIgaW1hZ2UgKGFzeW5jKVxuICAvLyBVc2VkIGludGVybmFsbHkgZm9yIHRoZSBwb3N0ZXIgc2V0dGVyLCB3aXRoIHRoZSBwYXNzaXZlIG9wdGlvbiBmb3JjZWQgdG8gZmFsc2VcbiAgc2V0UG9zdGVyKHBvc3RlciwgcGFzc2l2ZSA9IHRydWUpIHtcbiAgICAvLyBEb24ndCBvdmVycmlkZSBpZiBjYWxsIGlzIHBhc3NpdmVcbiAgICBpZiAocGFzc2l2ZSAmJiB0aGlzLnBvc3Rlcikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignUG9zdGVyIGFscmVhZHkgc2V0JykpO1xuICAgIH1cblxuICAgIC8vIFNldCBwcm9wZXJ0eSBzeW5jaHJvbm91c2x5IHRvIHJlc3BlY3QgdGhlIGNhbGwgb3JkZXJcbiAgICB0aGlzLm1lZGlhLnNldEF0dHJpYnV0ZSgnZGF0YS1wb3N0ZXInLCBwb3N0ZXIpO1xuXG4gICAgLy8gV2FpdCB1bnRpbCB1aSBpcyByZWFkeVxuICAgIHJldHVybiAoXG4gICAgICByZWFkeVxuICAgICAgICAuY2FsbCh0aGlzKVxuICAgICAgICAvLyBMb2FkIGltYWdlXG4gICAgICAgIC50aGVuKCgpID0+IGxvYWRJbWFnZShwb3N0ZXIpKVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAvLyBIaWRlIHBvc3RlciBvbiBlcnJvciB1bmxlc3MgaXQncyBiZWVuIHNldCBieSBhbm90aGVyIGNhbGxcbiAgICAgICAgICBpZiAocG9zdGVyID09PSB0aGlzLnBvc3Rlcikge1xuICAgICAgICAgICAgdWkudG9nZ2xlUG9zdGVyLmNhbGwodGhpcywgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBSZXRocm93XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8gUHJldmVudCByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgICBpZiAocG9zdGVyICE9PSB0aGlzLnBvc3Rlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRQb3N0ZXIgY2FuY2VsbGVkIGJ5IGxhdGVyIGNhbGwgdG8gc2V0UG9zdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmVsZW1lbnRzLnBvc3Rlci5zdHlsZSwge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcke3Bvc3Rlcn0nKWAsXG4gICAgICAgICAgICAvLyBSZXNldCBiYWNrZ3JvdW5kU2l6ZSBhcyB3ZWxsIChzaW5jZSBpdCBjYW4gYmUgc2V0IHRvIFwiY292ZXJcIiBmb3IgcGFkZGVkIHRodW1ibmFpbHMgZm9yIHlvdXR1YmUpXG4gICAgICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJycsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB1aS50b2dnbGVQb3N0ZXIuY2FsbCh0aGlzLCB0cnVlKTtcblxuICAgICAgICAgIHJldHVybiBwb3N0ZXI7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfSxcblxuICAvLyBDaGVjayBwbGF5aW5nIHN0YXRlXG4gIGNoZWNrUGxheWluZyhldmVudCkge1xuICAgIC8vIENsYXNzIGhvb2tzXG4gICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucGxheWluZywgdGhpcy5wbGF5aW5nKTtcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wYXVzZWQsIHRoaXMucGF1c2VkKTtcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5zdG9wcGVkLCB0aGlzLnN0b3BwZWQpO1xuXG4gICAgLy8gU2V0IHN0YXRlXG4gICAgQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMucGxheSB8fCBbXSkuZm9yRWFjaCh0YXJnZXQgPT4ge1xuICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgcHJlc3NlZDogdGhpcy5wbGF5aW5nIH0pO1xuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGkxOG4uZ2V0KHRoaXMucGxheWluZyA/ICdwYXVzZScgOiAncGxheScsIHRoaXMuY29uZmlnKSk7XG4gICAgfSk7XG5cbiAgICAvLyBPbmx5IHVwZGF0ZSBjb250cm9scyBvbiBub24gdGltZXVwZGF0ZSBldmVudHNcbiAgICBpZiAoaXMuZXZlbnQoZXZlbnQpICYmIGV2ZW50LnR5cGUgPT09ICd0aW1ldXBkYXRlJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBjb250cm9sc1xuICAgIHVpLnRvZ2dsZUNvbnRyb2xzLmNhbGwodGhpcyk7XG4gIH0sXG5cbiAgLy8gQ2hlY2sgaWYgbWVkaWEgaXMgbG9hZGluZ1xuICBjaGVja0xvYWRpbmcoZXZlbnQpIHtcbiAgICB0aGlzLmxvYWRpbmcgPSBbJ3N0YWxsZWQnLCAnd2FpdGluZyddLmluY2x1ZGVzKGV2ZW50LnR5cGUpO1xuXG4gICAgLy8gQ2xlYXIgdGltZXJcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcnMubG9hZGluZyk7XG5cbiAgICAvLyBUaW1lciB0byBwcmV2ZW50IGZsaWNrZXIgd2hlbiBzZWVraW5nXG4gICAgdGhpcy50aW1lcnMubG9hZGluZyA9IHNldFRpbWVvdXQoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyBiYXIgbG9hZGluZyBjbGFzcyBzdGF0ZVxuICAgICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5sb2FkaW5nLCB0aGlzLmxvYWRpbmcpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBjb250cm9scyB2aXNpYmlsaXR5XG4gICAgICAgIHVpLnRvZ2dsZUNvbnRyb2xzLmNhbGwodGhpcyk7XG4gICAgICB9LFxuICAgICAgdGhpcy5sb2FkaW5nID8gMjUwIDogMCxcbiAgICApO1xuICB9LFxuXG4gIC8vIFRvZ2dsZSBjb250cm9scyBiYXNlZCBvbiBzdGF0ZSBhbmQgYGZvcmNlYCBhcmd1bWVudFxuICB0b2dnbGVDb250cm9scyhmb3JjZSkge1xuICAgIGNvbnN0IHsgY29udHJvbHM6IGNvbnRyb2xzRWxlbWVudCB9ID0gdGhpcy5lbGVtZW50cztcblxuICAgIGlmIChjb250cm9sc0VsZW1lbnQgJiYgdGhpcy5jb25maWcuaGlkZUNvbnRyb2xzKSB7XG4gICAgICAvLyBEb24ndCBoaWRlIGNvbnRyb2xzIGlmIGEgdG91Y2gtZGV2aWNlIHVzZXIgcmVjZW50bHkgc2Vla2VkLiAoTXVzdCBiZSBsaW1pdGVkIHRvIHRvdWNoIGRldmljZXMsIG9yIGl0IG9jY2FzaW9uYWxseSBwcmV2ZW50cyBkZXNrdG9wIGNvbnRyb2xzIGZyb20gaGlkaW5nLilcbiAgICAgIGNvbnN0IHJlY2VudFRvdWNoU2VlayA9IHRoaXMudG91Y2ggJiYgdGhpcy5sYXN0U2Vla1RpbWUgKyAyMDAwID4gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gU2hvdyBjb250cm9scyBpZiBmb3JjZSwgbG9hZGluZywgcGF1c2VkLCBidXR0b24gaW50ZXJhY3Rpb24sIG9yIHJlY2VudCBzZWVrLCBvdGhlcndpc2UgaGlkZVxuICAgICAgdGhpcy50b2dnbGVDb250cm9scyhcbiAgICAgICAgQm9vbGVhbihcbiAgICAgICAgICBmb3JjZSB8fCB0aGlzLmxvYWRpbmcgfHwgdGhpcy5wYXVzZWQgfHwgY29udHJvbHNFbGVtZW50LnByZXNzZWQgfHwgY29udHJvbHNFbGVtZW50LmhvdmVyIHx8IHJlY2VudFRvdWNoU2VlayxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfVxuICB9LFxuXG4gIC8vIE1pZ3JhdGUgYW55IGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gdGhlIG1lZGlhIHRvIHRoZSBwYXJlbnRcbiAgbWlncmF0ZVN0eWxlcygpIHtcbiAgICAvLyBMb29wIHRocm91Z2ggdmFsdWVzIChhcyB0aGV5IGFyZSB0aGUga2V5cyB3aGVuIHRoZSBvYmplY3QgaXMgc3ByZWFkIPCfpJQpXG4gICAgT2JqZWN0LnZhbHVlcyh7IC4uLnRoaXMubWVkaWEuc3R5bGUgfSlcbiAgICAgIC8vIFdlJ3JlIG9ubHkgZnVzc2VkIGFib3V0IFBseXIgc3BlY2lmaWMgcHJvcGVydGllc1xuICAgICAgLmZpbHRlcihrZXkgPT4gIWlzLmVtcHR5KGtleSkgJiYga2V5LnN0YXJ0c1dpdGgoJy0tcGx5cicpKVxuICAgICAgLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgLy8gU2V0IG9uIHRoZSBjb250YWluZXJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB0aGlzLm1lZGlhLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoa2V5KSk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgZnJvbSBtZWRpYSBlbGVtZW50XG4gICAgICAgIHRoaXMubWVkaWEuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZSBpZiBlbXB0eVxuICAgIGlmIChpcy5lbXB0eSh0aGlzLm1lZGlhLnN0eWxlKSkge1xuICAgICAgdGhpcy5tZWRpYS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgfVxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgdWk7XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5ciBFdmVudCBMaXN0ZW5lcnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBjb250cm9scyBmcm9tICcuL2NvbnRyb2xzJztcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCB7IHJlcGFpbnQgfSBmcm9tICcuL3V0aWxzL2FuaW1hdGlvbic7XG5pbXBvcnQgYnJvd3NlciBmcm9tICcuL3V0aWxzL2Jyb3dzZXInO1xuaW1wb3J0IHsgZ2V0RWxlbWVudCwgZ2V0RWxlbWVudHMsIG1hdGNoZXMsIHRvZ2dsZUNsYXNzIH0gZnJvbSAnLi91dGlscy9lbGVtZW50cyc7XG5pbXBvcnQgeyBvZmYsIG9uLCBvbmNlLCB0b2dnbGVMaXN0ZW5lciwgdHJpZ2dlckV2ZW50IH0gZnJvbSAnLi91dGlscy9ldmVudHMnO1xuaW1wb3J0IGlzIGZyb20gJy4vdXRpbHMvaXMnO1xuaW1wb3J0IHsgc2lsZW5jZVByb21pc2UgfSBmcm9tICcuL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHsgZ2V0QXNwZWN0UmF0aW8sIHNldEFzcGVjdFJhdGlvIH0gZnJvbSAnLi91dGlscy9zdHlsZSc7XG5cbmNsYXNzIExpc3RlbmVycyB7XG4gIGNvbnN0cnVjdG9yKHBsYXllcikge1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMubGFzdEtleSA9IG51bGw7XG4gICAgdGhpcy5mb2N1c1RpbWVyID0gbnVsbDtcbiAgICB0aGlzLmxhc3RLZXlEb3duID0gbnVsbDtcblxuICAgIHRoaXMuaGFuZGxlS2V5ID0gdGhpcy5oYW5kbGVLZXkuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZU1lbnUgPSB0aGlzLnRvZ2dsZU1lbnUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFRhYkZvY3VzID0gdGhpcy5zZXRUYWJGb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmlyc3RUb3VjaCA9IHRoaXMuZmlyc3RUb3VjaC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gSGFuZGxlIGtleSBwcmVzc2VzXG4gIGhhbmRsZUtleShldmVudCkge1xuICAgIGNvbnN0IHsgcGxheWVyIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgZWxlbWVudHMgfSA9IHBsYXllcjtcbiAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSA/IGV2ZW50LmtleUNvZGUgOiBldmVudC53aGljaDtcbiAgICBjb25zdCBwcmVzc2VkID0gZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nO1xuICAgIGNvbnN0IHJlcGVhdCA9IHByZXNzZWQgJiYgY29kZSA9PT0gdGhpcy5sYXN0S2V5O1xuXG4gICAgLy8gQmFpbCBpZiBhIG1vZGlmaWVyIGtleSBpcyBzZXRcbiAgICBpZiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBldmVudCBpcyBidWJibGVkIGZyb20gdGhlIG1lZGlhIGVsZW1lbnRcbiAgICAvLyBGaXJlZm94IGRvZXNuJ3QgZ2V0IHRoZSBrZXljb2RlIGZvciB3aGF0ZXZlciByZWFzb25cbiAgICBpZiAoIWlzLm51bWJlcihjb2RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNlZWsgYnkgdGhlIG51bWJlciBrZXlzXG4gICAgY29uc3Qgc2Vla0J5S2V5ID0gKCkgPT4ge1xuICAgICAgLy8gRGl2aWRlIHRoZSBtYXggZHVyYXRpb24gaW50byAxMHRoJ3MgYW5kIHRpbWVzIGJ5IHRoZSBudW1iZXIgdmFsdWVcbiAgICAgIHBsYXllci5jdXJyZW50VGltZSA9IChwbGF5ZXIuZHVyYXRpb24gLyAxMCkgKiAoY29kZSAtIDQ4KTtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRoZSBrZXkgb24ga2V5ZG93blxuICAgIC8vIFJlc2V0IG9uIGtleXVwXG4gICAgaWYgKHByZXNzZWQpIHtcbiAgICAgIC8vIENoZWNrIGZvY3VzZWQgZWxlbWVudFxuICAgICAgLy8gYW5kIGlmIHRoZSBmb2N1c2VkIGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlIChlLmcuIHRleHQgaW5wdXQpXG4gICAgICAvLyBhbmQgYW55IHRoYXQgYWNjZXB0IGtleSBpbnB1dCBodHRwOi8vd2ViYWltLm9yZy90ZWNobmlxdWVzL2tleWJvYXJkL1xuICAgICAgY29uc3QgZm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICBpZiAoaXMuZWxlbWVudChmb2N1c2VkKSkge1xuICAgICAgICBjb25zdCB7IGVkaXRhYmxlIH0gPSBwbGF5ZXIuY29uZmlnLnNlbGVjdG9ycztcbiAgICAgICAgY29uc3QgeyBzZWVrIH0gPSBlbGVtZW50cy5pbnB1dHM7XG5cbiAgICAgICAgaWYgKGZvY3VzZWQgIT09IHNlZWsgJiYgbWF0Y2hlcyhmb2N1c2VkLCBlZGl0YWJsZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDMyICYmIG1hdGNoZXMoZm9jdXNlZCwgJ2J1dHRvbiwgW3JvbGVePVwibWVudWl0ZW1cIl0nKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXaGljaCBrZXljb2RlcyBzaG91bGQgd2UgcHJldmVudCBkZWZhdWx0XG4gICAgICBjb25zdCBwcmV2ZW50RGVmYXVsdCA9IFszMiwgMzcsIDM4LCAzOSwgNDAsIDQ4LCA0OSwgNTAsIDUxLCA1MiwgNTMsIDU0LCA1NiwgNTcsIDY3LCA3MCwgNzMsIDc1LCA3NiwgNzcsIDc5XTtcblxuICAgICAgLy8gSWYgdGhlIGNvZGUgaXMgZm91bmQgcHJldmVudCBkZWZhdWx0IChlLmcuIHByZXZlbnQgc2Nyb2xsaW5nIGZvciBhcnJvd3MpXG4gICAgICBpZiAocHJldmVudERlZmF1bHQuaW5jbHVkZXMoY29kZSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICBjYXNlIDQ4OlxuICAgICAgICBjYXNlIDQ5OlxuICAgICAgICBjYXNlIDUwOlxuICAgICAgICBjYXNlIDUxOlxuICAgICAgICBjYXNlIDUyOlxuICAgICAgICBjYXNlIDUzOlxuICAgICAgICBjYXNlIDU0OlxuICAgICAgICBjYXNlIDU1OlxuICAgICAgICBjYXNlIDU2OlxuICAgICAgICBjYXNlIDU3OlxuICAgICAgICAgIC8vIDAtOVxuICAgICAgICAgIGlmICghcmVwZWF0KSB7XG4gICAgICAgICAgICBzZWVrQnlLZXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgY2FzZSA3NTpcbiAgICAgICAgICAvLyBTcGFjZSBhbmQgSyBrZXlcbiAgICAgICAgICBpZiAoIXJlcGVhdCkge1xuICAgICAgICAgICAgc2lsZW5jZVByb21pc2UocGxheWVyLnRvZ2dsZVBsYXkoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgLy8gQXJyb3cgdXBcbiAgICAgICAgICBwbGF5ZXIuaW5jcmVhc2VWb2x1bWUoMC4xKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgIC8vIEFycm93IGRvd25cbiAgICAgICAgICBwbGF5ZXIuZGVjcmVhc2VWb2x1bWUoMC4xKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDc3OlxuICAgICAgICAgIC8vIE0ga2V5XG4gICAgICAgICAgaWYgKCFyZXBlYXQpIHtcbiAgICAgICAgICAgIHBsYXllci5tdXRlZCA9ICFwbGF5ZXIubXV0ZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgLy8gQXJyb3cgZm9yd2FyZFxuICAgICAgICAgIHBsYXllci5mb3J3YXJkKCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAvLyBBcnJvdyBiYWNrXG4gICAgICAgICAgcGxheWVyLnJld2luZCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgNzA6XG4gICAgICAgICAgLy8gRiBrZXlcbiAgICAgICAgICBwbGF5ZXIuZnVsbHNjcmVlbi50b2dnbGUoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDY3OlxuICAgICAgICAgIC8vIEMga2V5XG4gICAgICAgICAgaWYgKCFyZXBlYXQpIHtcbiAgICAgICAgICAgIHBsYXllci50b2dnbGVDYXB0aW9ucygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDc2OlxuICAgICAgICAgIC8vIEwga2V5XG4gICAgICAgICAgcGxheWVyLmxvb3AgPSAhcGxheWVyLmxvb3A7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgLyogY2FzZSA3MzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMb29wKCdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgNzY6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9vcCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgNzk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9vcCgnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrOyAqL1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIEVzY2FwZSBpcyBoYW5kbGUgbmF0aXZlbHkgd2hlbiBpbiBmdWxsIHNjcmVlblxuICAgICAgLy8gU28gd2Ugb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IG5vbiBuYXRpdmVcbiAgICAgIGlmIChjb2RlID09PSAyNyAmJiAhcGxheWVyLmZ1bGxzY3JlZW4udXNpbmdOYXRpdmUgJiYgcGxheWVyLmZ1bGxzY3JlZW4uYWN0aXZlKSB7XG4gICAgICAgIHBsYXllci5mdWxsc2NyZWVuLnRvZ2dsZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSBsYXN0IGNvZGUgZm9yIG5leHQgY3ljbGVcbiAgICAgIHRoaXMubGFzdEtleSA9IGNvZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFzdEtleSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gVG9nZ2xlIG1lbnVcbiAgdG9nZ2xlTWVudShldmVudCkge1xuICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnUuY2FsbCh0aGlzLnBsYXllciwgZXZlbnQpO1xuICB9XG5cbiAgLy8gRGV2aWNlIGlzIHRvdWNoIGVuYWJsZWRcbiAgZmlyc3RUb3VjaCgpIHtcbiAgICBjb25zdCB7IHBsYXllciB9ID0gdGhpcztcbiAgICBjb25zdCB7IGVsZW1lbnRzIH0gPSBwbGF5ZXI7XG5cbiAgICBwbGF5ZXIudG91Y2ggPSB0cnVlO1xuXG4gICAgLy8gQWRkIHRvdWNoIGNsYXNzXG4gICAgdG9nZ2xlQ2xhc3MoZWxlbWVudHMuY29udGFpbmVyLCBwbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMuaXNUb3VjaCwgdHJ1ZSk7XG4gIH1cblxuICBzZXRUYWJGb2N1cyhldmVudCkge1xuICAgIGNvbnN0IHsgcGxheWVyIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgZWxlbWVudHMgfSA9IHBsYXllcjtcblxuICAgIGNsZWFyVGltZW91dCh0aGlzLmZvY3VzVGltZXIpO1xuXG4gICAgLy8gSWdub3JlIGFueSBrZXkgb3RoZXIgdGhhbiB0YWJcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nICYmIGV2ZW50LndoaWNoICE9PSA5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgcmVmZXJlbmNlIHRvIGV2ZW50IHRpbWVTdGFtcFxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicpIHtcbiAgICAgIHRoaXMubGFzdEtleURvd24gPSBldmVudC50aW1lU3RhbXA7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGN1cnJlbnQgY2xhc3Nlc1xuICAgIGNvbnN0IHJlbW92ZUN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSBwbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXM7XG4gICAgICBjb25zdCBjdXJyZW50ID0gZ2V0RWxlbWVudHMuY2FsbChwbGF5ZXIsIGAuJHtjbGFzc05hbWV9YCk7XG4gICAgICB0b2dnbGVDbGFzcyhjdXJyZW50LCBjbGFzc05hbWUsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIGEga2V5IHdhcyBwcmVzc2VkIHRvIHRyaWdnZXIgdGhpcyBldmVudFxuICAgIGNvbnN0IHdhc0tleURvd24gPSBldmVudC50aW1lU3RhbXAgLSB0aGlzLmxhc3RLZXlEb3duIDw9IDIwO1xuXG4gICAgLy8gSWdub3JlIGZvY3VzIGV2ZW50cyBpZiBhIGtleSB3YXMgcHJlc3NlZCBwcmlvclxuICAgIGlmIChldmVudC50eXBlID09PSAnZm9jdXMnICYmICF3YXNLZXlEb3duKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCBjdXJyZW50XG4gICAgcmVtb3ZlQ3VycmVudCgpO1xuXG4gICAgLy8gRGVsYXkgdGhlIGFkZGluZyBvZiBjbGFzc25hbWUgdW50aWwgdGhlIGZvY3VzIGhhcyBjaGFuZ2VkXG4gICAgLy8gVGhpcyBldmVudCBmaXJlcyBiZWZvcmUgdGhlIGZvY3VzaW4gZXZlbnRcbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2ZvY3Vzb3V0Jykge1xuICAgICAgdGhpcy5mb2N1c1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvY3VzZWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gICAgICAgIC8vIElnbm9yZSBpZiBjdXJyZW50IGZvY3VzIGVsZW1lbnQgaXNuJ3QgaW5zaWRlIHRoZSBwbGF5ZXJcbiAgICAgICAgaWYgKCFlbGVtZW50cy5jb250YWluZXIuY29udGFpbnMoZm9jdXNlZCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0b2dnbGVDbGFzcyhkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBwbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXMsIHRydWUpO1xuICAgICAgfSwgMTApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdsb2JhbCB3aW5kb3cgJiBkb2N1bWVudCBsaXN0ZW5lcnNcbiAgZ2xvYmFsKHRvZ2dsZSA9IHRydWUpIHtcbiAgICBjb25zdCB7IHBsYXllciB9ID0gdGhpcztcblxuICAgIC8vIEtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGlmIChwbGF5ZXIuY29uZmlnLmtleWJvYXJkLmdsb2JhbCkge1xuICAgICAgdG9nZ2xlTGlzdGVuZXIuY2FsbChwbGF5ZXIsIHdpbmRvdywgJ2tleWRvd24ga2V5dXAnLCB0aGlzLmhhbmRsZUtleSwgdG9nZ2xlLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8gQ2xpY2sgYW55d2hlcmUgY2xvc2VzIG1lbnVcbiAgICB0b2dnbGVMaXN0ZW5lci5jYWxsKHBsYXllciwgZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgdGhpcy50b2dnbGVNZW51LCB0b2dnbGUpO1xuXG4gICAgLy8gRGV0ZWN0IHRvdWNoIGJ5IGV2ZW50c1xuICAgIG9uY2UuY2FsbChwbGF5ZXIsIGRvY3VtZW50LmJvZHksICd0b3VjaHN0YXJ0JywgdGhpcy5maXJzdFRvdWNoKTtcblxuICAgIC8vIFRhYiBmb2N1cyBkZXRlY3Rpb25cbiAgICB0b2dnbGVMaXN0ZW5lci5jYWxsKHBsYXllciwgZG9jdW1lbnQuYm9keSwgJ2tleWRvd24gZm9jdXMgYmx1ciBmb2N1c291dCcsIHRoaXMuc2V0VGFiRm9jdXMsIHRvZ2dsZSwgZmFsc2UsIHRydWUpO1xuICB9XG5cbiAgLy8gQ29udGFpbmVyIGxpc3RlbmVyc1xuICBjb250YWluZXIoKSB7XG4gICAgY29uc3QgeyBwbGF5ZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgeyBjb25maWcsIGVsZW1lbnRzLCB0aW1lcnMgfSA9IHBsYXllcjtcblxuICAgIC8vIEtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGlmICghY29uZmlnLmtleWJvYXJkLmdsb2JhbCAmJiBjb25maWcua2V5Ym9hcmQuZm9jdXNlZCkge1xuICAgICAgb24uY2FsbChwbGF5ZXIsIGVsZW1lbnRzLmNvbnRhaW5lciwgJ2tleWRvd24ga2V5dXAnLCB0aGlzLmhhbmRsZUtleSwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBjb250cm9scyBvbiBtb3VzZSBldmVudHMgYW5kIGVudGVyaW5nIGZ1bGxzY3JlZW5cbiAgICBvbi5jYWxsKFxuICAgICAgcGxheWVyLFxuICAgICAgZWxlbWVudHMuY29udGFpbmVyLFxuICAgICAgJ21vdXNlbW92ZSBtb3VzZWxlYXZlIHRvdWNoc3RhcnQgdG91Y2htb3ZlIGVudGVyZnVsbHNjcmVlbiBleGl0ZnVsbHNjcmVlbicsXG4gICAgICBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29udHJvbHM6IGNvbnRyb2xzRWxlbWVudCB9ID0gZWxlbWVudHM7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGJ1dHRvbiBzdGF0ZXMgZm9yIGZ1bGxzY3JlZW5cbiAgICAgICAgaWYgKGNvbnRyb2xzRWxlbWVudCAmJiBldmVudC50eXBlID09PSAnZW50ZXJmdWxsc2NyZWVuJykge1xuICAgICAgICAgIGNvbnRyb2xzRWxlbWVudC5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgICAgY29udHJvbHNFbGVtZW50LmhvdmVyID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93LCB0aGVuIGhpZGUgYWZ0ZXIgYSB0aW1lb3V0IHVubGVzcyBhbm90aGVyIGNvbnRyb2wgZXZlbnQgb2NjdXJzXG4gICAgICAgIGNvbnN0IHNob3cgPSBbJ3RvdWNoc3RhcnQnLCAndG91Y2htb3ZlJywgJ21vdXNlbW92ZSddLmluY2x1ZGVzKGV2ZW50LnR5cGUpO1xuICAgICAgICBsZXQgZGVsYXkgPSAwO1xuXG4gICAgICAgIGlmIChzaG93KSB7XG4gICAgICAgICAgdWkudG9nZ2xlQ29udHJvbHMuY2FsbChwbGF5ZXIsIHRydWUpO1xuICAgICAgICAgIC8vIFVzZSBsb25nZXIgdGltZW91dCBmb3IgdG91Y2ggZGV2aWNlc1xuICAgICAgICAgIGRlbGF5ID0gcGxheWVyLnRvdWNoID8gMzAwMCA6IDIwMDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhciB0aW1lclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZXJzLmNvbnRyb2xzKTtcblxuICAgICAgICAvLyBTZXQgbmV3IHRpbWVyIHRvIHByZXZlbnQgZmxpY2tlciB3aGVuIHNlZWtpbmdcbiAgICAgICAgdGltZXJzLmNvbnRyb2xzID0gc2V0VGltZW91dCgoKSA9PiB1aS50b2dnbGVDb250cm9scy5jYWxsKHBsYXllciwgZmFsc2UpLCBkZWxheSk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICAvLyBTZXQgYSBndXR0ZXIgZm9yIFZpbWVvXG4gICAgY29uc3Qgc2V0R3V0dGVyID0gKHJhdGlvLCBwYWRkaW5nLCB0b2dnbGUpID0+IHtcbiAgICAgIGlmICghcGxheWVyLmlzVmltZW8gfHwgcGxheWVyLmNvbmZpZy52aW1lby5wcmVtaXVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFyZ2V0ID0gcGxheWVyLmVsZW1lbnRzLndyYXBwZXIuZmlyc3RDaGlsZDtcbiAgICAgIGNvbnN0IFssIHldID0gcmF0aW87XG4gICAgICBjb25zdCBbdmlkZW9YLCB2aWRlb1ldID0gZ2V0QXNwZWN0UmF0aW8uY2FsbChwbGF5ZXIpO1xuXG4gICAgICB0YXJnZXQuc3R5bGUubWF4V2lkdGggPSB0b2dnbGUgPyBgJHsoeSAvIHZpZGVvWSkgKiB2aWRlb1h9cHhgIDogbnVsbDtcbiAgICAgIHRhcmdldC5zdHlsZS5tYXJnaW4gPSB0b2dnbGUgPyAnMCBhdXRvJyA6IG51bGw7XG4gICAgfTtcblxuICAgIC8vIFJlc2l6ZSBvbiBmdWxsc2NyZWVuIGNoYW5nZVxuICAgIGNvbnN0IHNldFBsYXllclNpemUgPSBtZWFzdXJlID0+IHtcbiAgICAgIC8vIElmIHdlIGRvbid0IG5lZWQgdG8gbWVhc3VyZSB0aGUgdmlld3BvcnRcbiAgICAgIGlmICghbWVhc3VyZSkge1xuICAgICAgICByZXR1cm4gc2V0QXNwZWN0UmF0aW8uY2FsbChwbGF5ZXIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWN0ID0gZWxlbWVudHMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSByZWN0O1xuXG4gICAgICByZXR1cm4gc2V0QXNwZWN0UmF0aW8uY2FsbChwbGF5ZXIsIGAke3dpZHRofToke2hlaWdodH1gKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzaXplZCA9ICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcnMucmVzaXplZCk7XG4gICAgICB0aW1lcnMucmVzaXplZCA9IHNldFRpbWVvdXQoc2V0UGxheWVyU2l6ZSwgNTApO1xuICAgIH07XG5cbiAgICBvbi5jYWxsKHBsYXllciwgZWxlbWVudHMuY29udGFpbmVyLCAnZW50ZXJmdWxsc2NyZWVuIGV4aXRmdWxsc2NyZWVuJywgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgeyB0YXJnZXQsIHVzaW5nTmF0aXZlIH0gPSBwbGF5ZXIuZnVsbHNjcmVlbjtcblxuICAgICAgLy8gSWdub3JlIGV2ZW50cyBub3QgZnJvbSB0YXJnZXRcbiAgICAgIGlmICh0YXJnZXQgIT09IGVsZW1lbnRzLmNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGl0J3Mgbm90IGFuIGVtYmVkIGFuZCBubyByYXRpbyBzcGVjaWZpZWRcbiAgICAgIGlmICghcGxheWVyLmlzRW1iZWQgJiYgaXMuZW1wdHkocGxheWVyLmNvbmZpZy5yYXRpbykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc0VudGVyID0gZXZlbnQudHlwZSA9PT0gJ2VudGVyZnVsbHNjcmVlbic7XG4gICAgICAvLyBTZXQgdGhlIHBsYXllciBzaXplIHdoZW4gZW50ZXJpbmcgZnVsbHNjcmVlbiB0byB2aWV3cG9ydCBzaXplXG4gICAgICBjb25zdCB7IHBhZGRpbmcsIHJhdGlvIH0gPSBzZXRQbGF5ZXJTaXplKGlzRW50ZXIpO1xuXG4gICAgICAvLyBTZXQgVmltZW8gZ3V0dGVyXG4gICAgICBzZXRHdXR0ZXIocmF0aW8sIHBhZGRpbmcsIGlzRW50ZXIpO1xuXG4gICAgICAvLyBJZiBub3QgdXNpbmcgbmF0aXZlIGJyb3dzZXIgZnVsbHNjcmVlbiBBUEksIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHJlc2l6ZXMgb2Ygdmlld3BvcnRcbiAgICAgIGlmICghdXNpbmdOYXRpdmUpIHtcbiAgICAgICAgaWYgKGlzRW50ZXIpIHtcbiAgICAgICAgICBvbi5jYWxsKHBsYXllciwgd2luZG93LCAncmVzaXplJywgcmVzaXplZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2ZmLmNhbGwocGxheWVyLCB3aW5kb3csICdyZXNpemUnLCByZXNpemVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gTGlzdGVuIGZvciBtZWRpYSBldmVudHNcbiAgbWVkaWEoKSB7XG4gICAgY29uc3QgeyBwbGF5ZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgeyBlbGVtZW50cyB9ID0gcGxheWVyO1xuXG4gICAgLy8gVGltZSBjaGFuZ2Ugb24gbWVkaWFcbiAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndGltZXVwZGF0ZSBzZWVraW5nIHNlZWtlZCcsIGV2ZW50ID0+IGNvbnRyb2xzLnRpbWVVcGRhdGUuY2FsbChwbGF5ZXIsIGV2ZW50KSk7XG5cbiAgICAvLyBEaXNwbGF5IGR1cmF0aW9uXG4gICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2R1cmF0aW9uY2hhbmdlIGxvYWRlZGRhdGEgbG9hZGVkbWV0YWRhdGEnLCBldmVudCA9PlxuICAgICAgY29udHJvbHMuZHVyYXRpb25VcGRhdGUuY2FsbChwbGF5ZXIsIGV2ZW50KSxcbiAgICApO1xuXG4gICAgLy8gSGFuZGxlIHRoZSBtZWRpYSBmaW5pc2hpbmdcbiAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnZW5kZWQnLCAoKSA9PiB7XG4gICAgICAvLyBTaG93IHBvc3RlciBvbiBlbmRcbiAgICAgIGlmIChwbGF5ZXIuaXNIVE1MNSAmJiBwbGF5ZXIuaXNWaWRlbyAmJiBwbGF5ZXIuY29uZmlnLnJlc2V0T25FbmQpIHtcbiAgICAgICAgLy8gUmVzdGFydFxuICAgICAgICBwbGF5ZXIucmVzdGFydCgpO1xuXG4gICAgICAgIC8vIENhbGwgcGF1c2Ugb3RoZXJ3aXNlIElFMTEgd2lsbCBzdGFydCBwbGF5aW5nIHRoZSB2aWRlbyBhZ2FpblxuICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGZvciBidWZmZXIgcHJvZ3Jlc3NcbiAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncHJvZ3Jlc3MgcGxheWluZyBzZWVraW5nIHNlZWtlZCcsIGV2ZW50ID0+XG4gICAgICBjb250cm9scy51cGRhdGVQcm9ncmVzcy5jYWxsKHBsYXllciwgZXZlbnQpLFxuICAgICk7XG5cbiAgICAvLyBIYW5kbGUgdm9sdW1lIGNoYW5nZXNcbiAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndm9sdW1lY2hhbmdlJywgZXZlbnQgPT4gY29udHJvbHMudXBkYXRlVm9sdW1lLmNhbGwocGxheWVyLCBldmVudCkpO1xuXG4gICAgLy8gSGFuZGxlIHBsYXkvcGF1c2VcbiAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncGxheWluZyBwbGF5IHBhdXNlIGVuZGVkIGVtcHRpZWQgdGltZXVwZGF0ZScsIGV2ZW50ID0+XG4gICAgICB1aS5jaGVja1BsYXlpbmcuY2FsbChwbGF5ZXIsIGV2ZW50KSxcbiAgICApO1xuXG4gICAgLy8gTG9hZGluZyBzdGF0ZVxuICAgIG9uLmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd3YWl0aW5nIGNhbnBsYXkgc2Vla2VkIHBsYXlpbmcnLCBldmVudCA9PiB1aS5jaGVja0xvYWRpbmcuY2FsbChwbGF5ZXIsIGV2ZW50KSk7XG5cbiAgICAvLyBDbGljayB2aWRlb1xuICAgIGlmIChwbGF5ZXIuc3VwcG9ydGVkLnVpICYmIHBsYXllci5jb25maWcuY2xpY2tUb1BsYXkgJiYgIXBsYXllci5pc0F1ZGlvKSB7XG4gICAgICAvLyBSZS1mZXRjaCB0aGUgd3JhcHBlclxuICAgICAgY29uc3Qgd3JhcHBlciA9IGdldEVsZW1lbnQuY2FsbChwbGF5ZXIsIGAuJHtwbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMudmlkZW99YCk7XG5cbiAgICAgIC8vIEJhaWwgaWYgdGhlcmUncyBubyB3cmFwcGVyICh0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4pXG4gICAgICBpZiAoIWlzLmVsZW1lbnQod3JhcHBlcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBPbiBjbGljayBwbGF5LCBwYXVzZSBvciByZXN0YXJ0XG4gICAgICBvbi5jYWxsKHBsYXllciwgZWxlbWVudHMuY29udGFpbmVyLCAnY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSBbZWxlbWVudHMuY29udGFpbmVyLCB3cmFwcGVyXTtcblxuICAgICAgICAvLyBJZ25vcmUgaWYgY2xpY2sgaWYgbm90IGNvbnRhaW5lciBvciBpbiB2aWRlbyB3cmFwcGVyXG4gICAgICAgIGlmICghdGFyZ2V0cy5pbmNsdWRlcyhldmVudC50YXJnZXQpICYmICF3cmFwcGVyLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUb3VjaCBkZXZpY2VzIHdpbGwganVzdCBzaG93IGNvbnRyb2xzIChpZiBoaWRkZW4pXG4gICAgICAgIGlmIChwbGF5ZXIudG91Y2ggJiYgcGxheWVyLmNvbmZpZy5oaWRlQ29udHJvbHMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGxheWVyLmVuZGVkKSB7XG4gICAgICAgICAgdGhpcy5wcm94eShldmVudCwgcGxheWVyLnJlc3RhcnQsICdyZXN0YXJ0Jyk7XG4gICAgICAgICAgdGhpcy5wcm94eShcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICBzaWxlbmNlUHJvbWlzZShwbGF5ZXIucGxheSgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGxheScsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByb3h5KFxuICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXllci50b2dnbGVQbGF5KCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwbGF5JyxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBEaXNhYmxlIHJpZ2h0IGNsaWNrXG4gICAgaWYgKHBsYXllci5zdXBwb3J0ZWQudWkgJiYgcGxheWVyLmNvbmZpZy5kaXNhYmxlQ29udGV4dE1lbnUpIHtcbiAgICAgIG9uLmNhbGwoXG4gICAgICAgIHBsYXllcixcbiAgICAgICAgZWxlbWVudHMud3JhcHBlcixcbiAgICAgICAgJ2NvbnRleHRtZW51JyxcbiAgICAgICAgZXZlbnQgPT4ge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBWb2x1bWUgY2hhbmdlXG4gICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIC8vIFNhdmUgdG8gc3RvcmFnZVxuICAgICAgcGxheWVyLnN0b3JhZ2Uuc2V0KHtcbiAgICAgICAgdm9sdW1lOiBwbGF5ZXIudm9sdW1lLFxuICAgICAgICBtdXRlZDogcGxheWVyLm11dGVkLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBTcGVlZCBjaGFuZ2VcbiAgICBvbi5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIC8vIFVwZGF0ZSBVSVxuICAgICAgY29udHJvbHMudXBkYXRlU2V0dGluZy5jYWxsKHBsYXllciwgJ3NwZWVkJyk7XG5cbiAgICAgIC8vIFNhdmUgdG8gc3RvcmFnZVxuICAgICAgcGxheWVyLnN0b3JhZ2Uuc2V0KHsgc3BlZWQ6IHBsYXllci5zcGVlZCB9KTtcbiAgICB9KTtcblxuICAgIC8vIFF1YWxpdHkgY2hhbmdlXG4gICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3F1YWxpdHljaGFuZ2UnLCBldmVudCA9PiB7XG4gICAgICAvLyBVcGRhdGUgVUlcbiAgICAgIGNvbnRyb2xzLnVwZGF0ZVNldHRpbmcuY2FsbChwbGF5ZXIsICdxdWFsaXR5JywgbnVsbCwgZXZlbnQuZGV0YWlsLnF1YWxpdHkpO1xuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGRvd25sb2FkIGxpbmsgd2hlbiByZWFkeSBhbmQgaWYgcXVhbGl0eSBjaGFuZ2VzXG4gICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3JlYWR5IHF1YWxpdHljaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb250cm9scy5zZXREb3dubG9hZFVybC5jYWxsKHBsYXllcik7XG4gICAgfSk7XG5cbiAgICAvLyBQcm94eSBldmVudHMgdG8gY29udGFpbmVyXG4gICAgLy8gQnViYmxlIHVwIGtleSBldmVudHMgZm9yIEVkZ2VcbiAgICBjb25zdCBwcm94eUV2ZW50cyA9IHBsYXllci5jb25maWcuZXZlbnRzLmNvbmNhdChbJ2tleXVwJywgJ2tleWRvd24nXSkuam9pbignICcpO1xuXG4gICAgb24uY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgcHJveHlFdmVudHMsIGV2ZW50ID0+IHtcbiAgICAgIGxldCB7IGRldGFpbCA9IHt9IH0gPSBldmVudDtcblxuICAgICAgLy8gR2V0IGVycm9yIGRldGFpbHMgZnJvbSBtZWRpYVxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgZGV0YWlsID0gcGxheWVyLm1lZGlhLmVycm9yO1xuICAgICAgfVxuXG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIGVsZW1lbnRzLmNvbnRhaW5lciwgZXZlbnQudHlwZSwgdHJ1ZSwgZGV0YWlsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJ1biBkZWZhdWx0IGFuZCBjdXN0b20gaGFuZGxlcnNcbiAgcHJveHkoZXZlbnQsIGRlZmF1bHRIYW5kbGVyLCBjdXN0b21IYW5kbGVyS2V5KSB7XG4gICAgY29uc3QgeyBwbGF5ZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgY3VzdG9tSGFuZGxlciA9IHBsYXllci5jb25maWcubGlzdGVuZXJzW2N1c3RvbUhhbmRsZXJLZXldO1xuICAgIGNvbnN0IGhhc0N1c3RvbUhhbmRsZXIgPSBpcy5mdW5jdGlvbihjdXN0b21IYW5kbGVyKTtcbiAgICBsZXQgcmV0dXJuZWQgPSB0cnVlO1xuXG4gICAgLy8gRXhlY3V0ZSBjdXN0b20gaGFuZGxlclxuICAgIGlmIChoYXNDdXN0b21IYW5kbGVyKSB7XG4gICAgICByZXR1cm5lZCA9IGN1c3RvbUhhbmRsZXIuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGNhbGwgZGVmYXVsdCBoYW5kbGVyIGlmIG5vdCBwcmV2ZW50ZWQgaW4gY3VzdG9tIGhhbmRsZXJcbiAgICBpZiAocmV0dXJuZWQgIT09IGZhbHNlICYmIGlzLmZ1bmN0aW9uKGRlZmF1bHRIYW5kbGVyKSkge1xuICAgICAgZGVmYXVsdEhhbmRsZXIuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBUcmlnZ2VyIGN1c3RvbSBhbmQgZGVmYXVsdCBoYW5kbGVyc1xuICBiaW5kKGVsZW1lbnQsIHR5cGUsIGRlZmF1bHRIYW5kbGVyLCBjdXN0b21IYW5kbGVyS2V5LCBwYXNzaXZlID0gdHJ1ZSkge1xuICAgIGNvbnN0IHsgcGxheWVyIH0gPSB0aGlzO1xuICAgIGNvbnN0IGN1c3RvbUhhbmRsZXIgPSBwbGF5ZXIuY29uZmlnLmxpc3RlbmVyc1tjdXN0b21IYW5kbGVyS2V5XTtcbiAgICBjb25zdCBoYXNDdXN0b21IYW5kbGVyID0gaXMuZnVuY3Rpb24oY3VzdG9tSGFuZGxlcik7XG5cbiAgICBvbi5jYWxsKFxuICAgICAgcGxheWVyLFxuICAgICAgZWxlbWVudCxcbiAgICAgIHR5cGUsXG4gICAgICBldmVudCA9PiB0aGlzLnByb3h5KGV2ZW50LCBkZWZhdWx0SGFuZGxlciwgY3VzdG9tSGFuZGxlcktleSksXG4gICAgICBwYXNzaXZlICYmICFoYXNDdXN0b21IYW5kbGVyLFxuICAgICk7XG4gIH1cblxuICAvLyBMaXN0ZW4gZm9yIGNvbnRyb2wgZXZlbnRzXG4gIGNvbnRyb2xzKCkge1xuICAgIGNvbnN0IHsgcGxheWVyIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgZWxlbWVudHMgfSA9IHBsYXllcjtcbiAgICAvLyBJRSBkb2Vzbid0IHN1cHBvcnQgaW5wdXQgZXZlbnQsIHNvIHdlIGZhbGxiYWNrIHRvIGNoYW5nZVxuICAgIGNvbnN0IGlucHV0RXZlbnQgPSBicm93c2VyLmlzSUUgPyAnY2hhbmdlJyA6ICdpbnB1dCc7XG5cbiAgICAvLyBQbGF5L3BhdXNlIHRvZ2dsZVxuICAgIGlmIChlbGVtZW50cy5idXR0b25zLnBsYXkpIHtcbiAgICAgIEFycmF5LmZyb20oZWxlbWVudHMuYnV0dG9ucy5wbGF5KS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIHRoaXMuYmluZChcbiAgICAgICAgICBidXR0b24sXG4gICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBzaWxlbmNlUHJvbWlzZShwbGF5ZXIudG9nZ2xlUGxheSgpKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgICdwbGF5JyxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFBhdXNlXG4gICAgdGhpcy5iaW5kKGVsZW1lbnRzLmJ1dHRvbnMucmVzdGFydCwgJ2NsaWNrJywgcGxheWVyLnJlc3RhcnQsICdyZXN0YXJ0Jyk7XG5cbiAgICAvLyBSZXdpbmRcbiAgICB0aGlzLmJpbmQoZWxlbWVudHMuYnV0dG9ucy5yZXdpbmQsICdjbGljaycsIHBsYXllci5yZXdpbmQsICdyZXdpbmQnKTtcblxuICAgIC8vIFJld2luZFxuICAgIHRoaXMuYmluZChlbGVtZW50cy5idXR0b25zLmZhc3RGb3J3YXJkLCAnY2xpY2snLCBwbGF5ZXIuZm9yd2FyZCwgJ2Zhc3RGb3J3YXJkJyk7XG5cbiAgICAvLyBNdXRlIHRvZ2dsZVxuICAgIHRoaXMuYmluZChcbiAgICAgIGVsZW1lbnRzLmJ1dHRvbnMubXV0ZSxcbiAgICAgICdjbGljaycsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHBsYXllci5tdXRlZCA9ICFwbGF5ZXIubXV0ZWQ7XG4gICAgICB9LFxuICAgICAgJ211dGUnLFxuICAgICk7XG5cbiAgICAvLyBDYXB0aW9ucyB0b2dnbGVcbiAgICB0aGlzLmJpbmQoZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucywgJ2NsaWNrJywgKCkgPT4gcGxheWVyLnRvZ2dsZUNhcHRpb25zKCkpO1xuXG4gICAgLy8gRG93bmxvYWRcbiAgICB0aGlzLmJpbmQoXG4gICAgICBlbGVtZW50cy5idXR0b25zLmRvd25sb2FkLFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdkb3dubG9hZCcpO1xuICAgICAgfSxcbiAgICAgICdkb3dubG9hZCcsXG4gICAgKTtcblxuICAgIC8vIEZ1bGxzY3JlZW4gdG9nZ2xlXG4gICAgdGhpcy5iaW5kKFxuICAgICAgZWxlbWVudHMuYnV0dG9ucy5mdWxsc2NyZWVuLFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcGxheWVyLmZ1bGxzY3JlZW4udG9nZ2xlKCk7XG4gICAgICB9LFxuICAgICAgJ2Z1bGxzY3JlZW4nLFxuICAgICk7XG5cbiAgICAvLyBQaWN0dXJlLWluLVBpY3R1cmVcbiAgICB0aGlzLmJpbmQoXG4gICAgICBlbGVtZW50cy5idXR0b25zLnBpcCxcbiAgICAgICdjbGljaycsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHBsYXllci5waXAgPSAndG9nZ2xlJztcbiAgICAgIH0sXG4gICAgICAncGlwJyxcbiAgICApO1xuXG4gICAgLy8gQWlycGxheVxuICAgIHRoaXMuYmluZChlbGVtZW50cy5idXR0b25zLmFpcnBsYXksICdjbGljaycsIHBsYXllci5haXJwbGF5LCAnYWlycGxheScpO1xuXG4gICAgLy8gU2V0dGluZ3MgbWVudSAtIGNsaWNrIHRvZ2dsZVxuICAgIHRoaXMuYmluZChcbiAgICAgIGVsZW1lbnRzLmJ1dHRvbnMuc2V0dGluZ3MsXG4gICAgICAnY2xpY2snLFxuICAgICAgZXZlbnQgPT4ge1xuICAgICAgICAvLyBQcmV2ZW50IHRoZSBkb2N1bWVudCBjbGljayBsaXN0ZW5lciBjbG9zaW5nIHRoZSBtZW51XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnUuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgZmFsc2UsXG4gICAgKTsgLy8gQ2FuJ3QgYmUgcGFzc2l2ZSBhcyB3ZSdyZSBwcmV2ZW50aW5nIGRlZmF1bHRcblxuICAgIC8vIFNldHRpbmdzIG1lbnUgLSBrZXlib2FyZCB0b2dnbGVcbiAgICAvLyBXZSBoYXZlIHRvIGJpbmQgdG8ga2V5dXAgb3RoZXJ3aXNlIEZpcmVmb3ggdHJpZ2dlcnMgYSBjbGljayB3aGVuIGEga2V5ZG93biBldmVudCBoYW5kbGVyIHNoaWZ0cyBmb2N1c1xuICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEyMjAxNDNcbiAgICB0aGlzLmJpbmQoXG4gICAgICBlbGVtZW50cy5idXR0b25zLnNldHRpbmdzLFxuICAgICAgJ2tleXVwJyxcbiAgICAgIGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LndoaWNoO1xuXG4gICAgICAgIC8vIFdlIG9ubHkgY2FyZSBhYm91dCBzcGFjZSBhbmQgcmV0dXJuXG4gICAgICAgIGlmICghWzEzLCAzMl0uaW5jbHVkZXMoY29kZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZWNhdXNlIHJldHVybiB0cmlnZ2VycyBhIGNsaWNrIGFueXdheSwgYWxsIHdlIG5lZWQgdG8gZG8gaXMgc2V0IGZvY3VzXG4gICAgICAgIGlmIChjb2RlID09PSAxMykge1xuICAgICAgICAgIGNvbnRyb2xzLmZvY3VzRmlyc3RNZW51SXRlbS5jYWxsKHBsYXllciwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJldmVudCBzY3JvbGxcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAvLyBQcmV2ZW50IHBsYXlpbmcgdmlkZW8gKEZpcmVmb3gpXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIFRvZ2dsZSBtZW51XG4gICAgICAgIGNvbnRyb2xzLnRvZ2dsZU1lbnUuY2FsbChwbGF5ZXIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgZmFsc2UsIC8vIENhbid0IGJlIHBhc3NpdmUgYXMgd2UncmUgcHJldmVudGluZyBkZWZhdWx0XG4gICAgKTtcblxuICAgIC8vIEVzY2FwZSBjbG9zZXMgbWVudVxuICAgIHRoaXMuYmluZChlbGVtZW50cy5zZXR0aW5ncy5tZW51LCAna2V5ZG93bicsIGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gMjcpIHtcbiAgICAgICAgY29udHJvbHMudG9nZ2xlTWVudS5jYWxsKHBsYXllciwgZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU2V0IHJhbmdlIGlucHV0IGFsdGVybmF0aXZlIFwidmFsdWVcIiwgd2hpY2ggbWF0Y2hlcyB0aGUgdG9vbHRpcCB0aW1lICgjOTU0KVxuICAgIHRoaXMuYmluZChlbGVtZW50cy5pbnB1dHMuc2VlaywgJ21vdXNlZG93biBtb3VzZW1vdmUnLCBldmVudCA9PiB7XG4gICAgICBjb25zdCByZWN0ID0gZWxlbWVudHMucHJvZ3Jlc3MuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBwZXJjZW50ID0gKDEwMCAvIHJlY3Qud2lkdGgpICogKGV2ZW50LnBhZ2VYIC0gcmVjdC5sZWZ0KTtcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc2V0QXR0cmlidXRlKCdzZWVrLXZhbHVlJywgcGVyY2VudCk7XG4gICAgfSk7XG5cbiAgICAvLyBQYXVzZSB3aGlsZSBzZWVraW5nXG4gICAgdGhpcy5iaW5kKGVsZW1lbnRzLmlucHV0cy5zZWVrLCAnbW91c2Vkb3duIG1vdXNldXAga2V5ZG93biBrZXl1cCB0b3VjaHN0YXJ0IHRvdWNoZW5kJywgZXZlbnQgPT4ge1xuICAgICAgY29uc3Qgc2VlayA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSA/IGV2ZW50LmtleUNvZGUgOiBldmVudC53aGljaDtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9ICdwbGF5LW9uLXNlZWtlZCc7XG5cbiAgICAgIGlmIChpcy5rZXlib2FyZEV2ZW50KGV2ZW50KSAmJiBjb2RlICE9PSAzOSAmJiBjb2RlICE9PSAzNykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFJlY29yZCBzZWVrIHRpbWUgc28gd2UgY2FuIHByZXZlbnQgaGlkaW5nIGNvbnRyb2xzIGZvciBhIGZldyBzZWNvbmRzIGFmdGVyIHNlZWtcbiAgICAgIHBsYXllci5sYXN0U2Vla1RpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBXYXMgcGxheWluZyBiZWZvcmU/XG4gICAgICBjb25zdCBwbGF5ID0gc2Vlay5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgIC8vIERvbmUgc2Vla2luZ1xuICAgICAgY29uc3QgZG9uZSA9IFsnbW91c2V1cCcsICd0b3VjaGVuZCcsICdrZXl1cCddLmluY2x1ZGVzKGV2ZW50LnR5cGUpO1xuXG4gICAgICAvLyBJZiB3ZSdyZSBkb25lIHNlZWtpbmcgYW5kIGl0IHdhcyBwbGF5aW5nLCByZXN1bWUgcGxheWJhY2tcbiAgICAgIGlmIChwbGF5ICYmIGRvbmUpIHtcbiAgICAgICAgc2Vlay5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgICAgc2lsZW5jZVByb21pc2UocGxheWVyLnBsYXkoKSk7XG4gICAgICB9IGVsc2UgaWYgKCFkb25lICYmIHBsYXllci5wbGF5aW5nKSB7XG4gICAgICAgIHNlZWsuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgJycpO1xuICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEZpeCByYW5nZSBpbnB1dHMgb24gaU9TXG4gICAgLy8gU3VwZXIgd2VpcmQgaU9TIGJ1ZyB3aGVyZSBhZnRlciB5b3UgaW50ZXJhY3Qgd2l0aCBhbiA8aW5wdXQgdHlwZT1cInJhbmdlXCI+LFxuICAgIC8vIGl0IHRha2VzIG92ZXIgZnVydGhlciBpbnRlcmFjdGlvbnMgb24gdGhlIHBhZ2UuIFRoaXMgaXMgYSBoYWNrXG4gICAgaWYgKGJyb3dzZXIuaXNJb3MpIHtcbiAgICAgIGNvbnN0IGlucHV0cyA9IGdldEVsZW1lbnRzLmNhbGwocGxheWVyLCAnaW5wdXRbdHlwZT1cInJhbmdlXCJdJyk7XG4gICAgICBBcnJheS5mcm9tKGlucHV0cykuZm9yRWFjaChpbnB1dCA9PiB0aGlzLmJpbmQoaW5wdXQsIGlucHV0RXZlbnQsIGV2ZW50ID0+IHJlcGFpbnQoZXZlbnQudGFyZ2V0KSkpO1xuICAgIH1cblxuICAgIC8vIFNlZWtcbiAgICB0aGlzLmJpbmQoXG4gICAgICBlbGVtZW50cy5pbnB1dHMuc2VlayxcbiAgICAgIGlucHV0RXZlbnQsXG4gICAgICBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IHNlZWsgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAvLyBJZiBpdCBleGlzdHMsIHVzZSBzZWVrLXZhbHVlIGluc3RlYWQgb2YgXCJ2YWx1ZVwiIGZvciBjb25zaXN0ZW5jeSB3aXRoIHRvb2x0aXAgdGltZSAoIzk1NClcbiAgICAgICAgbGV0IHNlZWtUbyA9IHNlZWsuZ2V0QXR0cmlidXRlKCdzZWVrLXZhbHVlJyk7XG5cbiAgICAgICAgaWYgKGlzLmVtcHR5KHNlZWtUbykpIHtcbiAgICAgICAgICBzZWVrVG8gPSBzZWVrLnZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc2Vlay5yZW1vdmVBdHRyaWJ1dGUoJ3NlZWstdmFsdWUnKTtcblxuICAgICAgICBwbGF5ZXIuY3VycmVudFRpbWUgPSAoc2Vla1RvIC8gc2Vlay5tYXgpICogcGxheWVyLmR1cmF0aW9uO1xuICAgICAgfSxcbiAgICAgICdzZWVrJyxcbiAgICApO1xuXG4gICAgLy8gU2VlayB0b29sdGlwXG4gICAgdGhpcy5iaW5kKGVsZW1lbnRzLnByb2dyZXNzLCAnbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZScsIGV2ZW50ID0+XG4gICAgICBjb250cm9scy51cGRhdGVTZWVrVG9vbHRpcC5jYWxsKHBsYXllciwgZXZlbnQpLFxuICAgICk7XG5cbiAgICAvLyBQcmV2aWV3IHRodW1ibmFpbHMgcGx1Z2luXG4gICAgLy8gVE9ETzogUmVhbGx5IG5lZWQgdG8gd29yayBvbiBzb21lIHNvcnQgb2YgcGx1Zy1pbiB3aWRlIGV2ZW50IGJ1cyBvciBwdWItc3ViIGZvciB0aGlzXG4gICAgdGhpcy5iaW5kKGVsZW1lbnRzLnByb2dyZXNzLCAnbW91c2Vtb3ZlIHRvdWNobW92ZScsIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHsgcHJldmlld1RodW1ibmFpbHMgfSA9IHBsYXllcjtcblxuICAgICAgaWYgKHByZXZpZXdUaHVtYm5haWxzICYmIHByZXZpZXdUaHVtYm5haWxzLmxvYWRlZCkge1xuICAgICAgICBwcmV2aWV3VGh1bWJuYWlscy5zdGFydE1vdmUoZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSGlkZSB0aHVtYm5haWwgcHJldmlldyAtIG9uIG1vdXNlIGNsaWNrLCBtb3VzZSBsZWF2ZSwgYW5kIHZpZGVvIHBsYXkvc2Vlay4gQWxsIGZvdXIgYXJlIHJlcXVpcmVkLCBlLmcuLCBmb3IgYnVmZmVyaW5nXG4gICAgdGhpcy5iaW5kKGVsZW1lbnRzLnByb2dyZXNzLCAnbW91c2VsZWF2ZSB0b3VjaGVuZCBjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcHJldmlld1RodW1ibmFpbHMgfSA9IHBsYXllcjtcblxuICAgICAgaWYgKHByZXZpZXdUaHVtYm5haWxzICYmIHByZXZpZXdUaHVtYm5haWxzLmxvYWRlZCkge1xuICAgICAgICBwcmV2aWV3VGh1bWJuYWlscy5lbmRNb3ZlKGZhbHNlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFNob3cgc2NydWJiaW5nIHByZXZpZXdcbiAgICB0aGlzLmJpbmQoZWxlbWVudHMucHJvZ3Jlc3MsICdtb3VzZWRvd24gdG91Y2hzdGFydCcsIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHsgcHJldmlld1RodW1ibmFpbHMgfSA9IHBsYXllcjtcblxuICAgICAgaWYgKHByZXZpZXdUaHVtYm5haWxzICYmIHByZXZpZXdUaHVtYm5haWxzLmxvYWRlZCkge1xuICAgICAgICBwcmV2aWV3VGh1bWJuYWlscy5zdGFydFNjcnViYmluZyhldmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmJpbmQoZWxlbWVudHMucHJvZ3Jlc3MsICdtb3VzZXVwIHRvdWNoZW5kJywgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgeyBwcmV2aWV3VGh1bWJuYWlscyB9ID0gcGxheWVyO1xuXG4gICAgICBpZiAocHJldmlld1RodW1ibmFpbHMgJiYgcHJldmlld1RodW1ibmFpbHMubG9hZGVkKSB7XG4gICAgICAgIHByZXZpZXdUaHVtYm5haWxzLmVuZFNjcnViYmluZyhldmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBQb2x5ZmlsbCBmb3IgbG93ZXIgZmlsbCBpbiA8aW5wdXQgdHlwZT1cInJhbmdlXCI+IGZvciB3ZWJraXRcbiAgICBpZiAoYnJvd3Nlci5pc1dlYmtpdCkge1xuICAgICAgQXJyYXkuZnJvbShnZXRFbGVtZW50cy5jYWxsKHBsYXllciwgJ2lucHV0W3R5cGU9XCJyYW5nZVwiXScpKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICB0aGlzLmJpbmQoZWxlbWVudCwgJ2lucHV0JywgZXZlbnQgPT4gY29udHJvbHMudXBkYXRlUmFuZ2VGaWxsLmNhbGwocGxheWVyLCBldmVudC50YXJnZXQpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgdGltZSBpbnZlcnRcbiAgICAvLyBPbmx5IGlmIG9uZSB0aW1lIGVsZW1lbnQgaXMgdXNlZCBmb3IgYm90aCBjdXJyZW50VGltZSBhbmQgZHVyYXRpb25cbiAgICBpZiAocGxheWVyLmNvbmZpZy50b2dnbGVJbnZlcnQgJiYgIWlzLmVsZW1lbnQoZWxlbWVudHMuZGlzcGxheS5kdXJhdGlvbikpIHtcbiAgICAgIHRoaXMuYmluZChlbGVtZW50cy5kaXNwbGF5LmN1cnJlbnRUaW1lLCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgd2UncmUgYXQgdGhlIHN0YXJ0XG4gICAgICAgIGlmIChwbGF5ZXIuY3VycmVudFRpbWUgPT09IDApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIuY29uZmlnLmludmVydFRpbWUgPSAhcGxheWVyLmNvbmZpZy5pbnZlcnRUaW1lO1xuXG4gICAgICAgIGNvbnRyb2xzLnRpbWVVcGRhdGUuY2FsbChwbGF5ZXIpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVm9sdW1lXG4gICAgdGhpcy5iaW5kKFxuICAgICAgZWxlbWVudHMuaW5wdXRzLnZvbHVtZSxcbiAgICAgIGlucHV0RXZlbnQsXG4gICAgICBldmVudCA9PiB7XG4gICAgICAgIHBsYXllci52b2x1bWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICB9LFxuICAgICAgJ3ZvbHVtZScsXG4gICAgKTtcblxuICAgIC8vIFVwZGF0ZSBjb250cm9scy5ob3ZlciBzdGF0ZSAodXNlZCBmb3IgdWkudG9nZ2xlQ29udHJvbHMgdG8gYXZvaWQgaGlkaW5nIHdoZW4gaW50ZXJhY3RpbmcpXG4gICAgdGhpcy5iaW5kKGVsZW1lbnRzLmNvbnRyb2xzLCAnbW91c2VlbnRlciBtb3VzZWxlYXZlJywgZXZlbnQgPT4ge1xuICAgICAgZWxlbWVudHMuY29udHJvbHMuaG92ZXIgPSAhcGxheWVyLnRvdWNoICYmIGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJztcbiAgICB9KTtcblxuICAgIC8vIEFsc28gdXBkYXRlIGNvbnRyb2xzLmhvdmVyIHN0YXRlIGZvciBhbnkgbm9uLXBsYXllciBjaGlsZHJlbiBvZiBmdWxsc2NyZWVuIGVsZW1lbnQgKGFzIGFib3ZlKVxuICAgIGlmIChlbGVtZW50cy5mdWxsc2NyZWVuKSB7XG4gICAgICBBcnJheS5mcm9tKGVsZW1lbnRzLmZ1bGxzY3JlZW4uY2hpbGRyZW4pXG4gICAgICAgIC5maWx0ZXIoYyA9PiAhYy5jb250YWlucyhlbGVtZW50cy5jb250YWluZXIpKVxuICAgICAgICAuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgdGhpcy5iaW5kKGNoaWxkLCAnbW91c2VlbnRlciBtb3VzZWxlYXZlJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgZWxlbWVudHMuY29udHJvbHMuaG92ZXIgPSAhcGxheWVyLnRvdWNoICYmIGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNvbnRyb2xzLnByZXNzZWQgc3RhdGUgKHVzZWQgZm9yIHVpLnRvZ2dsZUNvbnRyb2xzIHRvIGF2b2lkIGhpZGluZyB3aGVuIGludGVyYWN0aW5nKVxuICAgIHRoaXMuYmluZChlbGVtZW50cy5jb250cm9scywgJ21vdXNlZG93biBtb3VzZXVwIHRvdWNoc3RhcnQgdG91Y2hlbmQgdG91Y2hjYW5jZWwnLCBldmVudCA9PiB7XG4gICAgICBlbGVtZW50cy5jb250cm9scy5wcmVzc2VkID0gWydtb3VzZWRvd24nLCAndG91Y2hzdGFydCddLmluY2x1ZGVzKGV2ZW50LnR5cGUpO1xuICAgIH0pO1xuXG4gICAgLy8gU2hvdyBjb250cm9scyB3aGVuIHRoZXkgcmVjZWl2ZSBmb2N1cyAoZS5nLiwgd2hlbiB1c2luZyBrZXlib2FyZCB0YWIga2V5KVxuICAgIHRoaXMuYmluZChlbGVtZW50cy5jb250cm9scywgJ2ZvY3VzaW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbmZpZywgdGltZXJzIH0gPSBwbGF5ZXI7XG5cbiAgICAgIC8vIFNraXAgdHJhbnNpdGlvbiB0byBwcmV2ZW50IGZvY3VzIGZyb20gc2Nyb2xsaW5nIHRoZSBwYXJlbnQgZWxlbWVudFxuICAgICAgdG9nZ2xlQ2xhc3MoZWxlbWVudHMuY29udHJvbHMsIGNvbmZpZy5jbGFzc05hbWVzLm5vVHJhbnNpdGlvbiwgdHJ1ZSk7XG5cbiAgICAgIC8vIFRvZ2dsZVxuICAgICAgdWkudG9nZ2xlQ29udHJvbHMuY2FsbChwbGF5ZXIsIHRydWUpO1xuXG4gICAgICAvLyBSZXN0b3JlIHRyYW5zaXRpb25cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0b2dnbGVDbGFzcyhlbGVtZW50cy5jb250cm9scywgY29uZmlnLmNsYXNzTmFtZXMubm9UcmFuc2l0aW9uLCBmYWxzZSk7XG4gICAgICB9LCAwKTtcblxuICAgICAgLy8gRGVsYXkgYSBsaXR0bGUgbW9yZSBmb3IgbW91c2UgdXNlcnNcbiAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy50b3VjaCA/IDMwMDAgOiA0MDAwO1xuXG4gICAgICAvLyBDbGVhciB0aW1lclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVycy5jb250cm9scyk7XG5cbiAgICAgIC8vIEhpZGUgYWdhaW4gYWZ0ZXIgZGVsYXlcbiAgICAgIHRpbWVycy5jb250cm9scyA9IHNldFRpbWVvdXQoKCkgPT4gdWkudG9nZ2xlQ29udHJvbHMuY2FsbChwbGF5ZXIsIGZhbHNlKSwgZGVsYXkpO1xuICAgIH0pO1xuXG4gICAgLy8gTW91c2Ugd2hlZWwgZm9yIHZvbHVtZVxuICAgIHRoaXMuYmluZChcbiAgICAgIGVsZW1lbnRzLmlucHV0cy52b2x1bWUsXG4gICAgICAnd2hlZWwnLFxuICAgICAgZXZlbnQgPT4ge1xuICAgICAgICAvLyBEZXRlY3QgXCJuYXR1cmFsXCIgc2Nyb2xsIC0gc3VwcG9yZWQgb24gT1MgWCBTYWZhcmkgb25seVxuICAgICAgICAvLyBPdGhlciBicm93c2VycyBvbiBPUyBYIHdpbGwgYmUgaW52ZXJ0ZWQgdW50aWwgc3VwcG9ydCBpbXByb3Zlc1xuICAgICAgICBjb25zdCBpbnZlcnRlZCA9IGV2ZW50LndlYmtpdERpcmVjdGlvbkludmVydGVkRnJvbURldmljZTtcbiAgICAgICAgLy8gR2V0IGRlbHRhIGZyb20gZXZlbnQuIEludmVydCBpZiBgaW52ZXJ0ZWRgIGlzIHRydWVcbiAgICAgICAgY29uc3QgW3gsIHldID0gW2V2ZW50LmRlbHRhWCwgLWV2ZW50LmRlbHRhWV0ubWFwKHZhbHVlID0+IChpbnZlcnRlZCA/IC12YWx1ZSA6IHZhbHVlKSk7XG4gICAgICAgIC8vIFVzaW5nIHRoZSBiaWdnZXN0IGRlbHRhLCBub3JtYWxpemUgdG8gMSBvciAtMSAob3IgMCBpZiBubyBkZWx0YSlcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gTWF0aC5zaWduKE1hdGguYWJzKHgpID4gTWF0aC5hYnMoeSkgPyB4IDogeSk7XG5cbiAgICAgICAgLy8gQ2hhbmdlIHRoZSB2b2x1bWUgYnkgMiVcbiAgICAgICAgcGxheWVyLmluY3JlYXNlVm9sdW1lKGRpcmVjdGlvbiAvIDUwKTtcblxuICAgICAgICAvLyBEb24ndCBicmVhayBwYWdlIHNjcm9sbGluZyBhdCBtYXggYW5kIG1pblxuICAgICAgICBjb25zdCB7IHZvbHVtZSB9ID0gcGxheWVyLm1lZGlhO1xuICAgICAgICBpZiAoKGRpcmVjdGlvbiA9PT0gMSAmJiB2b2x1bWUgPCAxKSB8fCAoZGlyZWN0aW9uID09PSAtMSAmJiB2b2x1bWUgPiAwKSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAndm9sdW1lJyxcbiAgICAgIGZhbHNlLFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGlzdGVuZXJzO1xuIiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5sb2FkanMgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKSB7XG4vKipcbiAqIEdsb2JhbCBkZXBlbmRlbmNpZXMuXG4gKiBAZ2xvYmFsIHtPYmplY3R9IGRvY3VtZW50IC0gRE9NXG4gKi9cblxudmFyIGRldm51bGwgPSBmdW5jdGlvbigpIHt9LFxuICAgIGJ1bmRsZUlkQ2FjaGUgPSB7fSxcbiAgICBidW5kbGVSZXN1bHRDYWNoZSA9IHt9LFxuICAgIGJ1bmRsZUNhbGxiYWNrUXVldWUgPSB7fTtcblxuXG4vKipcbiAqIFN1YnNjcmliZSB0byBidW5kbGUgbG9hZCBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nW119IGJ1bmRsZUlkcyAtIEJ1bmRsZSBpZHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrRm4gLSBUaGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gc3Vic2NyaWJlKGJ1bmRsZUlkcywgY2FsbGJhY2tGbikge1xuICAvLyBsaXN0aWZ5XG4gIGJ1bmRsZUlkcyA9IGJ1bmRsZUlkcy5wdXNoID8gYnVuZGxlSWRzIDogW2J1bmRsZUlkc107XG5cbiAgdmFyIGRlcHNOb3RGb3VuZCA9IFtdLFxuICAgICAgaSA9IGJ1bmRsZUlkcy5sZW5ndGgsXG4gICAgICBudW1XYWl0aW5nID0gaSxcbiAgICAgIGZuLFxuICAgICAgYnVuZGxlSWQsXG4gICAgICByLFxuICAgICAgcTtcblxuICAvLyBkZWZpbmUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgZm4gPSBmdW5jdGlvbiAoYnVuZGxlSWQsIHBhdGhzTm90Rm91bmQpIHtcbiAgICBpZiAocGF0aHNOb3RGb3VuZC5sZW5ndGgpIGRlcHNOb3RGb3VuZC5wdXNoKGJ1bmRsZUlkKTtcblxuICAgIG51bVdhaXRpbmctLTtcbiAgICBpZiAoIW51bVdhaXRpbmcpIGNhbGxiYWNrRm4oZGVwc05vdEZvdW5kKTtcbiAgfTtcblxuICAvLyByZWdpc3RlciBjYWxsYmFja1xuICB3aGlsZSAoaS0tKSB7XG4gICAgYnVuZGxlSWQgPSBidW5kbGVJZHNbaV07XG5cbiAgICAvLyBleGVjdXRlIGNhbGxiYWNrIGlmIGluIHJlc3VsdCBjYWNoZVxuICAgIHIgPSBidW5kbGVSZXN1bHRDYWNoZVtidW5kbGVJZF07XG4gICAgaWYgKHIpIHtcbiAgICAgIGZuKGJ1bmRsZUlkLCByKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGFkZCB0byBjYWxsYmFjayBxdWV1ZVxuICAgIHEgPSBidW5kbGVDYWxsYmFja1F1ZXVlW2J1bmRsZUlkXSA9IGJ1bmRsZUNhbGxiYWNrUXVldWVbYnVuZGxlSWRdIHx8IFtdO1xuICAgIHEucHVzaChmbik7XG4gIH1cbn1cblxuXG4vKipcbiAqIFB1Ymxpc2ggYnVuZGxlIGxvYWQgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gYnVuZGxlSWQgLSBCdW5kbGUgaWRcbiAqIEBwYXJhbSB7c3RyaW5nW119IHBhdGhzTm90Rm91bmQgLSBMaXN0IG9mIGZpbGVzIG5vdCBmb3VuZFxuICovXG5mdW5jdGlvbiBwdWJsaXNoKGJ1bmRsZUlkLCBwYXRoc05vdEZvdW5kKSB7XG4gIC8vIGV4aXQgaWYgaWQgaXNuJ3QgZGVmaW5lZFxuICBpZiAoIWJ1bmRsZUlkKSByZXR1cm47XG5cbiAgdmFyIHEgPSBidW5kbGVDYWxsYmFja1F1ZXVlW2J1bmRsZUlkXTtcblxuICAvLyBjYWNoZSByZXN1bHRcbiAgYnVuZGxlUmVzdWx0Q2FjaGVbYnVuZGxlSWRdID0gcGF0aHNOb3RGb3VuZDtcblxuICAvLyBleGl0IGlmIHF1ZXVlIGlzIGVtcHR5XG4gIGlmICghcSkgcmV0dXJuO1xuXG4gIC8vIGVtcHR5IGNhbGxiYWNrIHF1ZXVlXG4gIHdoaWxlIChxLmxlbmd0aCkge1xuICAgIHFbMF0oYnVuZGxlSWQsIHBhdGhzTm90Rm91bmQpO1xuICAgIHEuc3BsaWNlKDAsIDEpO1xuICB9XG59XG5cblxuLyoqXG4gKiBFeGVjdXRlIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBhcmdzIC0gVGhlIGNhbGxiYWNrIGFyZ3NcbiAqIEBwYXJhbSB7c3RyaW5nW119IGRlcHNOb3RGb3VuZCAtIExpc3Qgb2YgZGVwZW5kZW5jaWVzIG5vdCBmb3VuZFxuICovXG5mdW5jdGlvbiBleGVjdXRlQ2FsbGJhY2tzKGFyZ3MsIGRlcHNOb3RGb3VuZCkge1xuICAvLyBhY2NlcHQgZnVuY3Rpb24gYXMgYXJndW1lbnRcbiAgaWYgKGFyZ3MuY2FsbCkgYXJncyA9IHtzdWNjZXNzOiBhcmdzfTtcblxuICAvLyBzdWNjZXNzIGFuZCBlcnJvciBjYWxsYmFja3NcbiAgaWYgKGRlcHNOb3RGb3VuZC5sZW5ndGgpIChhcmdzLmVycm9yIHx8IGRldm51bGwpKGRlcHNOb3RGb3VuZCk7XG4gIGVsc2UgKGFyZ3Muc3VjY2VzcyB8fCBkZXZudWxsKShhcmdzKTtcbn1cblxuXG4vKipcbiAqIExvYWQgaW5kaXZpZHVhbCBmaWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgZmlsZSBwYXRoXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja0ZuIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGxvYWRGaWxlKHBhdGgsIGNhbGxiYWNrRm4sIGFyZ3MsIG51bVRyaWVzKSB7XG4gIHZhciBkb2MgPSBkb2N1bWVudCxcbiAgICAgIGFzeW5jID0gYXJncy5hc3luYyxcbiAgICAgIG1heFRyaWVzID0gKGFyZ3MubnVtUmV0cmllcyB8fCAwKSArIDEsXG4gICAgICBiZWZvcmVDYWxsYmFja0ZuID0gYXJncy5iZWZvcmUgfHwgZGV2bnVsbCxcbiAgICAgIHBhdGhuYW1lID0gcGF0aC5yZXBsYWNlKC9bXFw/fCNdLiokLywgJycpLFxuICAgICAgcGF0aFN0cmlwcGVkID0gcGF0aC5yZXBsYWNlKC9eKGNzc3xpbWcpIS8sICcnKSxcbiAgICAgIGlzTGVnYWN5SUVDc3MsXG4gICAgICBlO1xuXG4gIG51bVRyaWVzID0gbnVtVHJpZXMgfHwgMDtcblxuICBpZiAoLyheY3NzIXxcXC5jc3MkKS8udGVzdChwYXRobmFtZSkpIHtcbiAgICAvLyBjc3NcbiAgICBlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICBlLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICBlLmhyZWYgPSBwYXRoU3RyaXBwZWQ7XG5cbiAgICAvLyB0YWcgSUU5K1xuICAgIGlzTGVnYWN5SUVDc3MgPSAnaGlkZUZvY3VzJyBpbiBlO1xuXG4gICAgLy8gdXNlIHByZWxvYWQgaW4gSUUgRWRnZSAodG8gZGV0ZWN0IGxvYWQgZXJyb3JzKVxuICAgIGlmIChpc0xlZ2FjeUlFQ3NzICYmIGUucmVsTGlzdCkge1xuICAgICAgaXNMZWdhY3lJRUNzcyA9IDA7XG4gICAgICBlLnJlbCA9ICdwcmVsb2FkJztcbiAgICAgIGUuYXMgPSAnc3R5bGUnO1xuICAgIH1cbiAgfSBlbHNlIGlmICgvKF5pbWchfFxcLihwbmd8Z2lmfGpwZ3xzdmd8d2VicCkkKS8udGVzdChwYXRobmFtZSkpIHtcbiAgICAvLyBpbWFnZVxuICAgIGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgZS5zcmMgPSBwYXRoU3RyaXBwZWQ7ICAgIFxuICB9IGVsc2Uge1xuICAgIC8vIGphdmFzY3JpcHRcbiAgICBlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIGUuc3JjID0gcGF0aDtcbiAgICBlLmFzeW5jID0gYXN5bmMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhc3luYztcbiAgfVxuXG4gIGUub25sb2FkID0gZS5vbmVycm9yID0gZS5vbmJlZm9yZWxvYWQgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICB2YXIgcmVzdWx0ID0gZXYudHlwZVswXTtcblxuICAgIC8vIHRyZWF0IGVtcHR5IHN0eWxlc2hlZXRzIGFzIGZhaWx1cmVzIHRvIGdldCBhcm91bmQgbGFjayBvZiBvbmVycm9yXG4gICAgLy8gc3VwcG9ydCBpbiBJRTktMTFcbiAgICBpZiAoaXNMZWdhY3lJRUNzcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFlLnNoZWV0LmNzc1RleHQubGVuZ3RoKSByZXN1bHQgPSAnZSc7XG4gICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgIC8vIHNoZWV0cyBvYmplY3RzIGNyZWF0ZWQgZnJvbSBsb2FkIGVycm9ycyBkb24ndCBhbGxvdyBhY2Nlc3MgdG9cbiAgICAgICAgLy8gYGNzc1RleHRgICh1bmxlc3MgZXJyb3IgaXMgQ29kZToxOCBTZWN1cml0eUVycm9yKVxuICAgICAgICBpZiAoeC5jb2RlICE9IDE4KSByZXN1bHQgPSAnZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIHJldHJpZXMgaW4gY2FzZSBvZiBsb2FkIGZhaWx1cmVcbiAgICBpZiAocmVzdWx0ID09ICdlJykge1xuICAgICAgLy8gaW5jcmVtZW50IGNvdW50ZXJcbiAgICAgIG51bVRyaWVzICs9IDE7XG5cbiAgICAgIC8vIGV4aXQgZnVuY3Rpb24gYW5kIHRyeSBhZ2FpblxuICAgICAgaWYgKG51bVRyaWVzIDwgbWF4VHJpZXMpIHtcbiAgICAgICAgcmV0dXJuIGxvYWRGaWxlKHBhdGgsIGNhbGxiYWNrRm4sIGFyZ3MsIG51bVRyaWVzKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGUucmVsID09ICdwcmVsb2FkJyAmJiBlLmFzID09ICdzdHlsZScpIHtcbiAgICAgIC8vIGFjdGl2YXRlIHByZWxvYWRlZCBzdHlsZXNoZWV0c1xuICAgICAgcmV0dXJuIGUucmVsID0gJ3N0eWxlc2hlZXQnOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICB9XG4gICAgXG4gICAgLy8gZXhlY3V0ZSBjYWxsYmFja1xuICAgIGNhbGxiYWNrRm4ocGF0aCwgcmVzdWx0LCBldi5kZWZhdWx0UHJldmVudGVkKTtcbiAgfTtcblxuICAvLyBhZGQgdG8gZG9jdW1lbnQgKHVubGVzcyBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWApXG4gIGlmIChiZWZvcmVDYWxsYmFja0ZuKHBhdGgsIGUpICE9PSBmYWxzZSkgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoZSk7XG59XG5cblxuLyoqXG4gKiBMb2FkIG11bHRpcGxlIGZpbGVzLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gcGF0aHMgLSBUaGUgZmlsZSBwYXRoc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tGbiAtIFRoZSBjYWxsYmFjayBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBsb2FkRmlsZXMocGF0aHMsIGNhbGxiYWNrRm4sIGFyZ3MpIHtcbiAgLy8gbGlzdGlmeSBwYXRoc1xuICBwYXRocyA9IHBhdGhzLnB1c2ggPyBwYXRocyA6IFtwYXRoc107XG5cbiAgdmFyIG51bVdhaXRpbmcgPSBwYXRocy5sZW5ndGgsXG4gICAgICB4ID0gbnVtV2FpdGluZyxcbiAgICAgIHBhdGhzTm90Rm91bmQgPSBbXSxcbiAgICAgIGZuLFxuICAgICAgaTtcblxuICAvLyBkZWZpbmUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgZm4gPSBmdW5jdGlvbihwYXRoLCByZXN1bHQsIGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAvLyBoYW5kbGUgZXJyb3JcbiAgICBpZiAocmVzdWx0ID09ICdlJykgcGF0aHNOb3RGb3VuZC5wdXNoKHBhdGgpO1xuXG4gICAgLy8gaGFuZGxlIGJlZm9yZWxvYWQgZXZlbnQuIElmIGRlZmF1bHRQcmV2ZW50ZWQgdGhlbiB0aGF0IG1lYW5zIHRoZSBsb2FkXG4gICAgLy8gd2lsbCBiZSBibG9ja2VkIChleC4gR2hvc3RlcnkvQUJQIG9uIFNhZmFyaSlcbiAgICBpZiAocmVzdWx0ID09ICdiJykge1xuICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHBhdGhzTm90Rm91bmQucHVzaChwYXRoKTtcbiAgICAgIGVsc2UgcmV0dXJuO1xuICAgIH1cblxuICAgIG51bVdhaXRpbmctLTtcbiAgICBpZiAoIW51bVdhaXRpbmcpIGNhbGxiYWNrRm4ocGF0aHNOb3RGb3VuZCk7XG4gIH07XG5cbiAgLy8gbG9hZCBzY3JpcHRzXG4gIGZvciAoaT0wOyBpIDwgeDsgaSsrKSBsb2FkRmlsZShwYXRoc1tpXSwgZm4sIGFyZ3MpO1xufVxuXG5cbi8qKlxuICogSW5pdGlhdGUgc2NyaXB0IGxvYWQgYW5kIHJlZ2lzdGVyIGJ1bmRsZS5cbiAqIEBwYXJhbSB7KHN0cmluZ3xzdHJpbmdbXSl9IHBhdGhzIC0gVGhlIGZpbGUgcGF0aHNcbiAqIEBwYXJhbSB7KHN0cmluZ3xGdW5jdGlvbnxPYmplY3QpfSBbYXJnMV0gLSBUaGUgKDEpIGJ1bmRsZUlkIG9yICgyKSBzdWNjZXNzXG4gKiAgIGNhbGxiYWNrIG9yICgzKSBvYmplY3QgbGl0ZXJhbCB3aXRoIHN1Y2Nlc3MvZXJyb3IgYXJndW1lbnRzLCBudW1SZXRyaWVzLFxuICogICBldGMuXG4gKiBAcGFyYW0geyhGdW5jdGlvbnxPYmplY3QpfSBbYXJnMl0gLSBUaGUgKDEpIHN1Y2Nlc3MgY2FsbGJhY2sgb3IgKDIpIG9iamVjdFxuICogICBsaXRlcmFsIHdpdGggc3VjY2Vzcy9lcnJvciBhcmd1bWVudHMsIG51bVJldHJpZXMsIGV0Yy5cbiAqL1xuZnVuY3Rpb24gbG9hZGpzKHBhdGhzLCBhcmcxLCBhcmcyKSB7XG4gIHZhciBidW5kbGVJZCxcbiAgICAgIGFyZ3M7XG5cbiAgLy8gYnVuZGxlSWQgKGlmIHN0cmluZylcbiAgaWYgKGFyZzEgJiYgYXJnMS50cmltKSBidW5kbGVJZCA9IGFyZzE7XG5cbiAgLy8gYXJncyAoZGVmYXVsdCBpcyB7fSlcbiAgYXJncyA9IChidW5kbGVJZCA/IGFyZzIgOiBhcmcxKSB8fCB7fTtcblxuICAvLyB0aHJvdyBlcnJvciBpZiBidW5kbGUgaXMgYWxyZWFkeSBkZWZpbmVkXG4gIGlmIChidW5kbGVJZCkge1xuICAgIGlmIChidW5kbGVJZCBpbiBidW5kbGVJZENhY2hlKSB7XG4gICAgICB0aHJvdyBcIkxvYWRKU1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICBidW5kbGVJZENhY2hlW2J1bmRsZUlkXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEZuKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGxvYWRGaWxlcyhwYXRocywgZnVuY3Rpb24gKHBhdGhzTm90Rm91bmQpIHtcbiAgICAgIC8vIGV4ZWN1dGUgY2FsbGJhY2tzXG4gICAgICBleGVjdXRlQ2FsbGJhY2tzKGFyZ3MsIHBhdGhzTm90Rm91bmQpO1xuICAgICAgXG4gICAgICAvLyByZXNvbHZlIFByb21pc2VcbiAgICAgIGlmIChyZXNvbHZlKSB7XG4gICAgICAgIGV4ZWN1dGVDYWxsYmFja3Moe3N1Y2Nlc3M6IHJlc29sdmUsIGVycm9yOiByZWplY3R9LCBwYXRoc05vdEZvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLy8gcHVibGlzaCBidW5kbGUgbG9hZCBldmVudFxuICAgICAgcHVibGlzaChidW5kbGVJZCwgcGF0aHNOb3RGb3VuZCk7XG4gICAgfSwgYXJncyk7XG4gIH1cbiAgXG4gIGlmIChhcmdzLnJldHVyblByb21pc2UpIHJldHVybiBuZXcgUHJvbWlzZShsb2FkRm4pO1xuICBlbHNlIGxvYWRGbigpO1xufVxuXG5cbi8qKlxuICogRXhlY3V0ZSBjYWxsYmFja3Mgd2hlbiBkZXBlbmRlbmNpZXMgaGF2ZSBiZWVuIHNhdGlzZmllZC5cbiAqIEBwYXJhbSB7KHN0cmluZ3xzdHJpbmdbXSl9IGRlcHMgLSBMaXN0IG9mIGJ1bmRsZSBpZHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIC0gc3VjY2Vzcy9lcnJvciBhcmd1bWVudHNcbiAqL1xubG9hZGpzLnJlYWR5ID0gZnVuY3Rpb24gcmVhZHkoZGVwcywgYXJncykge1xuICAvLyBzdWJzY3JpYmUgdG8gYnVuZGxlIGxvYWQgZXZlbnRcbiAgc3Vic2NyaWJlKGRlcHMsIGZ1bmN0aW9uIChkZXBzTm90Rm91bmQpIHtcbiAgICAvLyBleGVjdXRlIGNhbGxiYWNrc1xuICAgIGV4ZWN1dGVDYWxsYmFja3MoYXJncywgZGVwc05vdEZvdW5kKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGxvYWRqcztcbn07XG5cblxuLyoqXG4gKiBNYW51YWxseSBzYXRpc2Z5IGJ1bmRsZSBkZXBlbmRlbmNpZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gYnVuZGxlSWQgLSBUaGUgYnVuZGxlIGlkXG4gKi9cbmxvYWRqcy5kb25lID0gZnVuY3Rpb24gZG9uZShidW5kbGVJZCkge1xuICBwdWJsaXNoKGJ1bmRsZUlkLCBbXSk7XG59O1xuXG5cbi8qKlxuICogUmVzZXQgbG9hZGpzIGRlcGVuZGVuY2llcyBzdGF0dXNlc1xuICovXG5sb2FkanMucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgYnVuZGxlSWRDYWNoZSA9IHt9O1xuICBidW5kbGVSZXN1bHRDYWNoZSA9IHt9O1xuICBidW5kbGVDYWxsYmFja1F1ZXVlID0ge307XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGJ1bmRsZSBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWRcbiAqIEBwYXJhbSBTdHJpbmd9IGJ1bmRsZUlkIC0gVGhlIGJ1bmRsZSBpZFxuICovXG5sb2FkanMuaXNEZWZpbmVkID0gZnVuY3Rpb24gaXNEZWZpbmVkKGJ1bmRsZUlkKSB7XG4gIHJldHVybiBidW5kbGVJZCBpbiBidW5kbGVJZENhY2hlO1xufTtcblxuXG4vLyBleHBvcnRcbnJldHVybiBsb2FkanM7XG5cbn0pKTtcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkIGFuIGV4dGVybmFsIHNjcmlwdFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IGxvYWRqcyBmcm9tICdsb2FkanMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkU2NyaXB0KHVybCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxvYWRqcyh1cmwsIHtcbiAgICAgIHN1Y2Nlc3M6IHJlc29sdmUsXG4gICAgICBlcnJvcjogcmVqZWN0LFxuICAgIH0pO1xuICB9KTtcbn1cbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWaW1lbyBwbHVnaW5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBjYXB0aW9ucyBmcm9tICcuLi9jYXB0aW9ucyc7XG5pbXBvcnQgY29udHJvbHMgZnJvbSAnLi4vY29udHJvbHMnO1xuaW1wb3J0IHVpIGZyb20gJy4uL3VpJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHJlcGxhY2VFbGVtZW50LCB0b2dnbGVDbGFzcyB9IGZyb20gJy4uL3V0aWxzL2VsZW1lbnRzJztcbmltcG9ydCB7IHRyaWdnZXJFdmVudCB9IGZyb20gJy4uL3V0aWxzL2V2ZW50cyc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnLi4vdXRpbHMvZmV0Y2gnO1xuaW1wb3J0IGlzIGZyb20gJy4uL3V0aWxzL2lzJztcbmltcG9ydCBsb2FkU2NyaXB0IGZyb20gJy4uL3V0aWxzL2xvYWQtc2NyaXB0JztcbmltcG9ydCB7IGZvcm1hdCwgc3RyaXBIVE1MIH0gZnJvbSAnLi4vdXRpbHMvc3RyaW5ncyc7XG5pbXBvcnQgeyBzZXRBc3BlY3RSYXRpbyB9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcbmltcG9ydCB7IGJ1aWxkVXJsUGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMvdXJscyc7XG5cbi8vIFBhcnNlIFZpbWVvIElEIGZyb20gVVJMXG5mdW5jdGlvbiBwYXJzZUlkKHVybCkge1xuICBpZiAoaXMuZW1wdHkodXJsKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGlzLm51bWJlcihOdW1iZXIodXJsKSkpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgY29uc3QgcmVnZXggPSAvXi4qKHZpbWVvLmNvbVxcL3x2aWRlb1xcLykoXFxkKykuKi87XG4gIHJldHVybiB1cmwubWF0Y2gocmVnZXgpID8gUmVnRXhwLiQyIDogdXJsO1xufVxuXG4vLyBTZXQgcGxheWJhY2sgc3RhdGUgYW5kIHRyaWdnZXIgY2hhbmdlIChvbmx5IG9uIGFjdHVhbCBjaGFuZ2UpXG5mdW5jdGlvbiBhc3N1cmVQbGF5YmFja1N0YXRlKHBsYXkpIHtcbiAgaWYgKHBsYXkgJiYgIXRoaXMuZW1iZWQuaGFzUGxheWVkKSB7XG4gICAgdGhpcy5lbWJlZC5oYXNQbGF5ZWQgPSB0cnVlO1xuICB9XG4gIGlmICh0aGlzLm1lZGlhLnBhdXNlZCA9PT0gcGxheSkge1xuICAgIHRoaXMubWVkaWEucGF1c2VkID0gIXBsYXk7XG4gICAgdHJpZ2dlckV2ZW50LmNhbGwodGhpcywgdGhpcy5tZWRpYSwgcGxheSA/ICdwbGF5JyA6ICdwYXVzZScpO1xuICB9XG59XG5cbmNvbnN0IHZpbWVvID0ge1xuICBzZXR1cCgpIHtcbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzO1xuXG4gICAgLy8gQWRkIGVtYmVkIGNsYXNzIGZvciByZXNwb25zaXZlXG4gICAgdG9nZ2xlQ2xhc3MocGxheWVyLmVsZW1lbnRzLndyYXBwZXIsIHBsYXllci5jb25maWcuY2xhc3NOYW1lcy5lbWJlZCwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgc3BlZWQgb3B0aW9ucyBmcm9tIGNvbmZpZ1xuICAgIHBsYXllci5vcHRpb25zLnNwZWVkID0gcGxheWVyLmNvbmZpZy5zcGVlZC5vcHRpb25zO1xuXG4gICAgLy8gU2V0IGludGlhbCByYXRpb1xuICAgIHNldEFzcGVjdFJhdGlvLmNhbGwocGxheWVyKTtcblxuICAgIC8vIExvYWQgdGhlIFNESyBpZiBub3QgYWxyZWFkeVxuICAgIGlmICghaXMub2JqZWN0KHdpbmRvdy5WaW1lbykpIHtcbiAgICAgIGxvYWRTY3JpcHQocGxheWVyLmNvbmZpZy51cmxzLnZpbWVvLnNkaylcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHZpbWVvLnJlYWR5LmNhbGwocGxheWVyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICBwbGF5ZXIuZGVidWcud2FybignVmltZW8gU0RLIChwbGF5ZXIuanMpIGZhaWxlZCB0byBsb2FkJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmltZW8ucmVhZHkuY2FsbChwbGF5ZXIpO1xuICAgIH1cbiAgfSxcblxuICAvLyBBUEkgUmVhZHlcbiAgcmVhZHkoKSB7XG4gICAgY29uc3QgcGxheWVyID0gdGhpcztcbiAgICBjb25zdCBjb25maWcgPSBwbGF5ZXIuY29uZmlnLnZpbWVvO1xuICAgIGNvbnN0IHsgcHJlbWl1bSwgcmVmZXJyZXJQb2xpY3ksIC4uLmZyYW1lUGFyYW1zIH0gPSBjb25maWc7XG5cbiAgICAvLyBJZiB0aGUgb3duZXIgaGFzIGEgcHJvIG9yIHByZW1pdW0gYWNjb3VudCB0aGVuIHdlIGNhbiBoaWRlIGNvbnRyb2xzIGV0Y1xuICAgIGlmIChwcmVtaXVtKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGZyYW1lUGFyYW1zLCB7XG4gICAgICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICAgICAgc2lkZWRvY2s6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gR2V0IFZpbWVvIHBhcmFtcyBmb3IgdGhlIGlmcmFtZVxuICAgIGNvbnN0IHBhcmFtcyA9IGJ1aWxkVXJsUGFyYW1zKHtcbiAgICAgIGxvb3A6IHBsYXllci5jb25maWcubG9vcC5hY3RpdmUsXG4gICAgICBhdXRvcGxheTogcGxheWVyLmF1dG9wbGF5LFxuICAgICAgbXV0ZWQ6IHBsYXllci5tdXRlZCxcbiAgICAgIGdlc3R1cmU6ICdtZWRpYScsXG4gICAgICBwbGF5c2lubGluZTogIXRoaXMuY29uZmlnLmZ1bGxzY3JlZW4uaW9zTmF0aXZlLFxuICAgICAgLi4uZnJhbWVQYXJhbXMsXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgdGhlIHNvdXJjZSBVUkwgb3IgSURcbiAgICBsZXQgc291cmNlID0gcGxheWVyLm1lZGlhLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cbiAgICAvLyBHZXQgZnJvbSA8ZGl2PiBpZiBuZWVkZWRcbiAgICBpZiAoaXMuZW1wdHkoc291cmNlKSkge1xuICAgICAgc291cmNlID0gcGxheWVyLm1lZGlhLmdldEF0dHJpYnV0ZShwbGF5ZXIuY29uZmlnLmF0dHJpYnV0ZXMuZW1iZWQuaWQpO1xuICAgIH1cblxuICAgIGNvbnN0IGlkID0gcGFyc2VJZChzb3VyY2UpO1xuICAgIC8vIEJ1aWxkIGFuIGlmcmFtZVxuICAgIGNvbnN0IGlmcmFtZSA9IGNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGNvbnN0IHNyYyA9IGZvcm1hdChwbGF5ZXIuY29uZmlnLnVybHMudmltZW8uaWZyYW1lLCBpZCwgcGFyYW1zKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FsbG93ZnVsbHNjcmVlbicsICcnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvdycsICdhdXRvcGxheSxmdWxsc2NyZWVuLHBpY3R1cmUtaW4tcGljdHVyZScpO1xuXG4gICAgLy8gU2V0IHRoZSByZWZlcnJlciBwb2xpY3kgaWYgcmVxdWlyZWRcbiAgICBpZiAoIWlzLmVtcHR5KHJlZmVycmVyUG9saWN5KSkge1xuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgncmVmZXJyZXJQb2xpY3knLCByZWZlcnJlclBvbGljeSk7XG4gICAgfVxuXG4gICAgLy8gSW5qZWN0IHRoZSBwYWNrYWdlXG4gICAgY29uc3QgeyBwb3N0ZXIgfSA9IHBsYXllcjtcbiAgICBpZiAocHJlbWl1bSkge1xuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnZGF0YS1wb3N0ZXInLCBwb3N0ZXIpO1xuICAgICAgcGxheWVyLm1lZGlhID0gcmVwbGFjZUVsZW1lbnQoaWZyYW1lLCBwbGF5ZXIubWVkaWEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzczogcGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLmVtYmVkQ29udGFpbmVyLCAnZGF0YS1wb3N0ZXInOiBwb3N0ZXIgfSk7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgICBwbGF5ZXIubWVkaWEgPSByZXBsYWNlRWxlbWVudCh3cmFwcGVyLCBwbGF5ZXIubWVkaWEpO1xuICAgIH1cblxuICAgIC8vIEdldCBwb3N0ZXIgaW1hZ2VcbiAgICBmZXRjaChmb3JtYXQocGxheWVyLmNvbmZpZy51cmxzLnZpbWVvLmFwaSwgaWQpLCAnanNvbicpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgaWYgKGlzLmVtcHR5KHJlc3BvbnNlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgVVJMIGZvciB0aHVtYm5haWxcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVzcG9uc2VbMF0udGh1bWJuYWlsX2xhcmdlKTtcblxuICAgICAgLy8gR2V0IG9yaWdpbmFsIGltYWdlXG4gICAgICB1cmwucGF0aG5hbWUgPSBgJHt1cmwucGF0aG5hbWUuc3BsaXQoJ18nKVswXX0uanBnYDtcblxuICAgICAgLy8gU2V0IGFuZCBzaG93IHBvc3RlclxuICAgICAgdWkuc2V0UG9zdGVyLmNhbGwocGxheWVyLCB1cmwuaHJlZikuY2F0Y2goKCkgPT4ge30pO1xuICAgIH0pO1xuXG4gICAgLy8gU2V0dXAgaW5zdGFuY2VcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmltZW8vcGxheWVyLmpzXG4gICAgcGxheWVyLmVtYmVkID0gbmV3IHdpbmRvdy5WaW1lby5QbGF5ZXIoaWZyYW1lLCB7XG4gICAgICBhdXRvcGF1c2U6IHBsYXllci5jb25maWcuYXV0b3BhdXNlLFxuICAgICAgbXV0ZWQ6IHBsYXllci5tdXRlZCxcbiAgICB9KTtcblxuICAgIHBsYXllci5tZWRpYS5wYXVzZWQgPSB0cnVlO1xuICAgIHBsYXllci5tZWRpYS5jdXJyZW50VGltZSA9IDA7XG5cbiAgICAvLyBEaXNhYmxlIG5hdGl2ZSB0ZXh0IHRyYWNrIHJlbmRlcmluZ1xuICAgIGlmIChwbGF5ZXIuc3VwcG9ydGVkLnVpKSB7XG4gICAgICBwbGF5ZXIuZW1iZWQuZGlzYWJsZVRleHRUcmFjaygpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIGZhdXggSFRNTDUgQVBJIHVzaW5nIHRoZSBWaW1lbyBBUElcbiAgICBwbGF5ZXIubWVkaWEucGxheSA9ICgpID0+IHtcbiAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUuY2FsbChwbGF5ZXIsIHRydWUpO1xuICAgICAgcmV0dXJuIHBsYXllci5lbWJlZC5wbGF5KCk7XG4gICAgfTtcblxuICAgIHBsYXllci5tZWRpYS5wYXVzZSA9ICgpID0+IHtcbiAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUuY2FsbChwbGF5ZXIsIGZhbHNlKTtcbiAgICAgIHJldHVybiBwbGF5ZXIuZW1iZWQucGF1c2UoKTtcbiAgICB9O1xuXG4gICAgcGxheWVyLm1lZGlhLnN0b3AgPSAoKSA9PiB7XG4gICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgIHBsYXllci5jdXJyZW50VGltZSA9IDA7XG4gICAgfTtcblxuICAgIC8vIFNlZWtpbmdcbiAgICBsZXQgeyBjdXJyZW50VGltZSB9ID0gcGxheWVyLm1lZGlhO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdjdXJyZW50VGltZScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUaW1lO1xuICAgICAgfSxcbiAgICAgIHNldCh0aW1lKSB7XG4gICAgICAgIC8vIFZpbWVvIHdpbGwgYXV0b21hdGljYWxseSBwbGF5IG9uIHNlZWsgaWYgdGhlIHZpZGVvIGhhc24ndCBiZWVuIHBsYXllZCBiZWZvcmVcblxuICAgICAgICAvLyBHZXQgY3VycmVudCBwYXVzZWQgc3RhdGUgYW5kIHZvbHVtZSBldGNcbiAgICAgICAgY29uc3QgeyBlbWJlZCwgbWVkaWEsIHBhdXNlZCwgdm9sdW1lIH0gPSBwbGF5ZXI7XG4gICAgICAgIGNvbnN0IHJlc3RvcmVQYXVzZSA9IHBhdXNlZCAmJiAhZW1iZWQuaGFzUGxheWVkO1xuXG4gICAgICAgIC8vIFNldCBzZWVraW5nIHN0YXRlIGFuZCB0cmlnZ2VyIGV2ZW50XG4gICAgICAgIG1lZGlhLnNlZWtpbmcgPSB0cnVlO1xuICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIG1lZGlhLCAnc2Vla2luZycpO1xuXG4gICAgICAgIC8vIElmIHBhdXNlZCwgbXV0ZSB1bnRpbCBzZWVrIGlzIGNvbXBsZXRlXG4gICAgICAgIFByb21pc2UucmVzb2x2ZShyZXN0b3JlUGF1c2UgJiYgZW1iZWQuc2V0Vm9sdW1lKDApKVxuICAgICAgICAgIC8vIFNlZWtcbiAgICAgICAgICAudGhlbigoKSA9PiBlbWJlZC5zZXRDdXJyZW50VGltZSh0aW1lKSlcbiAgICAgICAgICAvLyBSZXN0b3JlIHBhdXNlZFxuICAgICAgICAgIC50aGVuKCgpID0+IHJlc3RvcmVQYXVzZSAmJiBlbWJlZC5wYXVzZSgpKVxuICAgICAgICAgIC8vIFJlc3RvcmUgdm9sdW1lXG4gICAgICAgICAgLnRoZW4oKCkgPT4gcmVzdG9yZVBhdXNlICYmIGVtYmVkLnNldFZvbHVtZSh2b2x1bWUpKVxuICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gUGxheWJhY2sgc3BlZWRcbiAgICBsZXQgc3BlZWQgPSBwbGF5ZXIuY29uZmlnLnNwZWVkLnNlbGVjdGVkO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdwbGF5YmFja1JhdGUnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBzcGVlZDtcbiAgICAgIH0sXG4gICAgICBzZXQoaW5wdXQpIHtcbiAgICAgICAgcGxheWVyLmVtYmVkXG4gICAgICAgICAgLnNldFBsYXliYWNrUmF0ZShpbnB1dClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBzcGVlZCA9IGlucHV0O1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdyYXRlY2hhbmdlJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2Fubm90IHNldCBQbGF5YmFjayBSYXRlLCBWaWRlbyBpcyBwcm9iYWJseSBub3Qgb24gUHJvIGFjY291bnRcbiAgICAgICAgICAgIHBsYXllci5vcHRpb25zLnNwZWVkID0gWzFdO1xuICAgICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFZvbHVtZVxuICAgIGxldCB7IHZvbHVtZSB9ID0gcGxheWVyLmNvbmZpZztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocGxheWVyLm1lZGlhLCAndm9sdW1lJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdm9sdW1lO1xuICAgICAgfSxcbiAgICAgIHNldChpbnB1dCkge1xuICAgICAgICBwbGF5ZXIuZW1iZWQuc2V0Vm9sdW1lKGlucHV0KS50aGVuKCgpID0+IHtcbiAgICAgICAgICB2b2x1bWUgPSBpbnB1dDtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBNdXRlZFxuICAgIGxldCB7IG11dGVkIH0gPSBwbGF5ZXIuY29uZmlnO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdtdXRlZCcsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIG11dGVkO1xuICAgICAgfSxcbiAgICAgIHNldChpbnB1dCkge1xuICAgICAgICBjb25zdCB0b2dnbGUgPSBpcy5ib29sZWFuKGlucHV0KSA/IGlucHV0IDogZmFsc2U7XG5cbiAgICAgICAgcGxheWVyLmVtYmVkLnNldFZvbHVtZSh0b2dnbGUgPyAwIDogcGxheWVyLmNvbmZpZy52b2x1bWUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIG11dGVkID0gdG9nZ2xlO1xuICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAndm9sdW1lY2hhbmdlJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIExvb3BcbiAgICBsZXQgeyBsb29wIH0gPSBwbGF5ZXIuY29uZmlnO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdsb29wJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gbG9vcDtcbiAgICAgIH0sXG4gICAgICBzZXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gaXMuYm9vbGVhbihpbnB1dCkgPyBpbnB1dCA6IHBsYXllci5jb25maWcubG9vcC5hY3RpdmU7XG5cbiAgICAgICAgcGxheWVyLmVtYmVkLnNldExvb3AodG9nZ2xlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBsb29wID0gdG9nZ2xlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBTb3VyY2VcbiAgICBsZXQgY3VycmVudFNyYztcbiAgICBwbGF5ZXIuZW1iZWRcbiAgICAgIC5nZXRWaWRlb1VybCgpXG4gICAgICAudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgIGN1cnJlbnRTcmMgPSB2YWx1ZTtcbiAgICAgICAgY29udHJvbHMuc2V0RG93bmxvYWRVcmwuY2FsbChwbGF5ZXIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybihlcnJvcik7XG4gICAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdjdXJyZW50U3JjJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gY3VycmVudFNyYztcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBFbmRlZFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdlbmRlZCcsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHBsYXllci5jdXJyZW50VGltZSA9PT0gcGxheWVyLmR1cmF0aW9uO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFNldCBhc3BlY3QgcmF0aW8gYmFzZWQgb24gdmlkZW8gc2l6ZVxuICAgIFByb21pc2UuYWxsKFtwbGF5ZXIuZW1iZWQuZ2V0VmlkZW9XaWR0aCgpLCBwbGF5ZXIuZW1iZWQuZ2V0VmlkZW9IZWlnaHQoKV0pLnRoZW4oZGltZW5zaW9ucyA9PiB7XG4gICAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSBkaW1lbnNpb25zO1xuICAgICAgcGxheWVyLmVtYmVkLnJhdGlvID0gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgc2V0QXNwZWN0UmF0aW8uY2FsbCh0aGlzKTtcbiAgICB9KTtcblxuICAgIC8vIFNldCBhdXRvcGF1c2VcbiAgICBwbGF5ZXIuZW1iZWQuc2V0QXV0b3BhdXNlKHBsYXllci5jb25maWcuYXV0b3BhdXNlKS50aGVuKHN0YXRlID0+IHtcbiAgICAgIHBsYXllci5jb25maWcuYXV0b3BhdXNlID0gc3RhdGU7XG4gICAgfSk7XG5cbiAgICAvLyBHZXQgdGl0bGVcbiAgICBwbGF5ZXIuZW1iZWQuZ2V0VmlkZW9UaXRsZSgpLnRoZW4odGl0bGUgPT4ge1xuICAgICAgcGxheWVyLmNvbmZpZy50aXRsZSA9IHRpdGxlO1xuICAgICAgdWkuc2V0VGl0bGUuY2FsbCh0aGlzKTtcbiAgICB9KTtcblxuICAgIC8vIEdldCBjdXJyZW50IHRpbWVcbiAgICBwbGF5ZXIuZW1iZWQuZ2V0Q3VycmVudFRpbWUoKS50aGVuKHZhbHVlID0+IHtcbiAgICAgIGN1cnJlbnRUaW1lID0gdmFsdWU7XG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3RpbWV1cGRhdGUnKTtcbiAgICB9KTtcblxuICAgIC8vIEdldCBkdXJhdGlvblxuICAgIHBsYXllci5lbWJlZC5nZXREdXJhdGlvbigpLnRoZW4odmFsdWUgPT4ge1xuICAgICAgcGxheWVyLm1lZGlhLmR1cmF0aW9uID0gdmFsdWU7XG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBHZXQgY2FwdGlvbnNcbiAgICBwbGF5ZXIuZW1iZWQuZ2V0VGV4dFRyYWNrcygpLnRoZW4odHJhY2tzID0+IHtcbiAgICAgIHBsYXllci5tZWRpYS50ZXh0VHJhY2tzID0gdHJhY2tzO1xuICAgICAgY2FwdGlvbnMuc2V0dXAuY2FsbChwbGF5ZXIpO1xuICAgIH0pO1xuXG4gICAgcGxheWVyLmVtYmVkLm9uKCdjdWVjaGFuZ2UnLCAoeyBjdWVzID0gW10gfSkgPT4ge1xuICAgICAgY29uc3Qgc3RyaXBwZWRDdWVzID0gY3Vlcy5tYXAoY3VlID0+IHN0cmlwSFRNTChjdWUudGV4dCkpO1xuICAgICAgY2FwdGlvbnMudXBkYXRlQ3Vlcy5jYWxsKHBsYXllciwgc3RyaXBwZWRDdWVzKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5lbWJlZC5vbignbG9hZGVkJywgKCkgPT4ge1xuICAgICAgLy8gQXNzdXJlIHN0YXRlIGFuZCBldmVudHMgYXJlIHVwZGF0ZWQgb24gYXV0b3BsYXlcbiAgICAgIHBsYXllci5lbWJlZC5nZXRQYXVzZWQoKS50aGVuKHBhdXNlZCA9PiB7XG4gICAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUuY2FsbChwbGF5ZXIsICFwYXVzZWQpO1xuICAgICAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncGxheWluZycpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGlzLmVsZW1lbnQocGxheWVyLmVtYmVkLmVsZW1lbnQpICYmIHBsYXllci5zdXBwb3J0ZWQudWkpIHtcbiAgICAgICAgY29uc3QgZnJhbWUgPSBwbGF5ZXIuZW1iZWQuZWxlbWVudDtcblxuICAgICAgICAvLyBGaXgga2V5Ym9hcmQgZm9jdXMgaXNzdWVzXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyL2lzc3Vlcy8zMTdcbiAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHBsYXllci5lbWJlZC5vbignYnVmZmVyc3RhcnQnLCAoKSA9PiB7XG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3dhaXRpbmcnKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5lbWJlZC5vbignYnVmZmVyZW5kJywgKCkgPT4ge1xuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdwbGF5aW5nJyk7XG4gICAgfSk7XG5cbiAgICBwbGF5ZXIuZW1iZWQub24oJ3BsYXknLCAoKSA9PiB7XG4gICAgICBhc3N1cmVQbGF5YmFja1N0YXRlLmNhbGwocGxheWVyLCB0cnVlKTtcbiAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncGxheWluZycpO1xuICAgIH0pO1xuXG4gICAgcGxheWVyLmVtYmVkLm9uKCdwYXVzZScsICgpID0+IHtcbiAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUuY2FsbChwbGF5ZXIsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5lbWJlZC5vbigndGltZXVwZGF0ZScsIGRhdGEgPT4ge1xuICAgICAgcGxheWVyLm1lZGlhLnNlZWtpbmcgPSBmYWxzZTtcbiAgICAgIGN1cnJlbnRUaW1lID0gZGF0YS5zZWNvbmRzO1xuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd0aW1ldXBkYXRlJyk7XG4gICAgfSk7XG5cbiAgICBwbGF5ZXIuZW1iZWQub24oJ3Byb2dyZXNzJywgZGF0YSA9PiB7XG4gICAgICBwbGF5ZXIubWVkaWEuYnVmZmVyZWQgPSBkYXRhLnBlcmNlbnQ7XG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3Byb2dyZXNzJyk7XG5cbiAgICAgIC8vIENoZWNrIGFsbCBsb2FkZWRcbiAgICAgIGlmIChwYXJzZUludChkYXRhLnBlcmNlbnQsIDEwKSA9PT0gMSkge1xuICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2NhbnBsYXl0aHJvdWdoJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBkdXJhdGlvbiBhcyBpZiB3ZSBkbyBpdCBiZWZvcmUgbG9hZCwgaXQgZ2l2ZXMgYW4gaW5jb3JyZWN0IHZhbHVlXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc2FtcG90dHMvcGx5ci9pc3N1ZXMvODkxXG4gICAgICBwbGF5ZXIuZW1iZWQuZ2V0RHVyYXRpb24oKS50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBwbGF5ZXIubWVkaWEuZHVyYXRpb24pIHtcbiAgICAgICAgICBwbGF5ZXIubWVkaWEuZHVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcGxheWVyLmVtYmVkLm9uKCdzZWVrZWQnLCAoKSA9PiB7XG4gICAgICBwbGF5ZXIubWVkaWEuc2Vla2luZyA9IGZhbHNlO1xuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdzZWVrZWQnKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5lbWJlZC5vbignZW5kZWQnLCAoKSA9PiB7XG4gICAgICBwbGF5ZXIubWVkaWEucGF1c2VkID0gdHJ1ZTtcbiAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnZW5kZWQnKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5lbWJlZC5vbignZXJyb3InLCBkZXRhaWwgPT4ge1xuICAgICAgcGxheWVyLm1lZGlhLmVycm9yID0gZGV0YWlsO1xuICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdlcnJvcicpO1xuICAgIH0pO1xuXG4gICAgLy8gUmVidWlsZCBVSVxuICAgIHNldFRpbWVvdXQoKCkgPT4gdWkuYnVpbGQuY2FsbChwbGF5ZXIpLCAwKTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHZpbWVvO1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFlvdVR1YmUgcGx1Z2luXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgdWkgZnJvbSAnLi4vdWknO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgcmVwbGFjZUVsZW1lbnQsIHRvZ2dsZUNsYXNzIH0gZnJvbSAnLi4vdXRpbHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgdHJpZ2dlckV2ZW50IH0gZnJvbSAnLi4vdXRpbHMvZXZlbnRzJztcbmltcG9ydCBmZXRjaCBmcm9tICcuLi91dGlscy9mZXRjaCc7XG5pbXBvcnQgaXMgZnJvbSAnLi4vdXRpbHMvaXMnO1xuaW1wb3J0IGxvYWRJbWFnZSBmcm9tICcuLi91dGlscy9sb2FkLWltYWdlJztcbmltcG9ydCBsb2FkU2NyaXB0IGZyb20gJy4uL3V0aWxzL2xvYWQtc2NyaXB0JztcbmltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL3V0aWxzL29iamVjdHMnO1xuaW1wb3J0IHsgZm9ybWF0LCBnZW5lcmF0ZUlkIH0gZnJvbSAnLi4vdXRpbHMvc3RyaW5ncyc7XG5pbXBvcnQgeyBzZXRBc3BlY3RSYXRpbyB9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcblxuLy8gUGFyc2UgWW91VHViZSBJRCBmcm9tIFVSTFxuZnVuY3Rpb24gcGFyc2VJZCh1cmwpIHtcbiAgaWYgKGlzLmVtcHR5KHVybCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHJlZ2V4ID0gL14uKih5b3V0dS5iZVxcL3x2XFwvfHVcXC9cXHdcXC98ZW1iZWRcXC98d2F0Y2hcXD92PXwmdj0pKFteIyY/XSopLiovO1xuICByZXR1cm4gdXJsLm1hdGNoKHJlZ2V4KSA/IFJlZ0V4cC4kMiA6IHVybDtcbn1cblxuLy8gU2V0IHBsYXliYWNrIHN0YXRlIGFuZCB0cmlnZ2VyIGNoYW5nZSAob25seSBvbiBhY3R1YWwgY2hhbmdlKVxuZnVuY3Rpb24gYXNzdXJlUGxheWJhY2tTdGF0ZShwbGF5KSB7XG4gIGlmIChwbGF5ICYmICF0aGlzLmVtYmVkLmhhc1BsYXllZCkge1xuICAgIHRoaXMuZW1iZWQuaGFzUGxheWVkID0gdHJ1ZTtcbiAgfVxuICBpZiAodGhpcy5tZWRpYS5wYXVzZWQgPT09IHBsYXkpIHtcbiAgICB0aGlzLm1lZGlhLnBhdXNlZCA9ICFwbGF5O1xuICAgIHRyaWdnZXJFdmVudC5jYWxsKHRoaXMsIHRoaXMubWVkaWEsIHBsYXkgPyAncGxheScgOiAncGF1c2UnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRIb3N0KGNvbmZpZykge1xuICBpZiAoY29uZmlnLm5vQ29va2llKSB7XG4gICAgcmV0dXJuICdodHRwczovL3d3dy55b3V0dWJlLW5vY29va2llLmNvbSc7XG4gIH1cblxuICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cDonKSB7XG4gICAgcmV0dXJuICdodHRwOi8vd3d3LnlvdXR1YmUuY29tJztcbiAgfVxuXG4gIC8vIFVzZSBZb3VUdWJlJ3MgZGVmYXVsdFxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5jb25zdCB5b3V0dWJlID0ge1xuICBzZXR1cCgpIHtcbiAgICAvLyBBZGQgZW1iZWQgY2xhc3MgZm9yIHJlc3BvbnNpdmVcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLndyYXBwZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuZW1iZWQsIHRydWUpO1xuXG4gICAgLy8gU2V0dXAgQVBJXG4gICAgaWYgKGlzLm9iamVjdCh3aW5kb3cuWVQpICYmIGlzLmZ1bmN0aW9uKHdpbmRvdy5ZVC5QbGF5ZXIpKSB7XG4gICAgICB5b3V0dWJlLnJlYWR5LmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlZmVyZW5jZSBjdXJyZW50IGdsb2JhbCBjYWxsYmFja1xuICAgICAgY29uc3QgY2FsbGJhY2sgPSB3aW5kb3cub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHk7XG5cbiAgICAgIC8vIFNldCBjYWxsYmFjayB0byBwcm9jZXNzIHF1ZXVlXG4gICAgICB3aW5kb3cub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSAoKSA9PiB7XG4gICAgICAgIC8vIENhbGwgZ2xvYmFsIGNhbGxiYWNrIGlmIHNldFxuICAgICAgICBpZiAoaXMuZnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHlvdXR1YmUucmVhZHkuY2FsbCh0aGlzKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIExvYWQgdGhlIFNES1xuICAgICAgbG9hZFNjcmlwdCh0aGlzLmNvbmZpZy51cmxzLnlvdXR1YmUuc2RrKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMuZGVidWcud2FybignWW91VHViZSBBUEkgZmFpbGVkIHRvIGxvYWQnLCBlcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gR2V0IHRoZSBtZWRpYSB0aXRsZVxuICBnZXRUaXRsZSh2aWRlb0lkKSB7XG4gICAgY29uc3QgdXJsID0gZm9ybWF0KHRoaXMuY29uZmlnLnVybHMueW91dHViZS5hcGksIHZpZGVvSWQpO1xuXG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGlmIChpcy5vYmplY3QoZGF0YSkpIHtcbiAgICAgICAgICBjb25zdCB7IHRpdGxlLCBoZWlnaHQsIHdpZHRoIH0gPSBkYXRhO1xuXG4gICAgICAgICAgLy8gU2V0IHRpdGxlXG4gICAgICAgICAgdGhpcy5jb25maWcudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICB1aS5zZXRUaXRsZS5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgLy8gU2V0IGFzcGVjdCByYXRpb1xuICAgICAgICAgIHRoaXMuZW1iZWQucmF0aW8gPSBbd2lkdGgsIGhlaWdodF07XG4gICAgICAgIH1cblxuICAgICAgICBzZXRBc3BlY3RSYXRpby5jYWxsKHRoaXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIFNldCBhc3BlY3QgcmF0aW9cbiAgICAgICAgc2V0QXNwZWN0UmF0aW8uY2FsbCh0aGlzKTtcbiAgICAgIH0pO1xuICB9LFxuXG4gIC8vIEFQSSByZWFkeVxuICByZWFkeSgpIHtcbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzO1xuICAgIC8vIElnbm9yZSBhbHJlYWR5IHNldHVwIChyYWNlIGNvbmRpdGlvbilcbiAgICBjb25zdCBjdXJyZW50SWQgPSBwbGF5ZXIubWVkaWEgJiYgcGxheWVyLm1lZGlhLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICBpZiAoIWlzLmVtcHR5KGN1cnJlbnRJZCkgJiYgY3VycmVudElkLnN0YXJ0c1dpdGgoJ3lvdXR1YmUtJykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIHNvdXJjZSBVUkwgb3IgSURcbiAgICBsZXQgc291cmNlID0gcGxheWVyLm1lZGlhLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cbiAgICAvLyBHZXQgZnJvbSA8ZGl2PiBpZiBuZWVkZWRcbiAgICBpZiAoaXMuZW1wdHkoc291cmNlKSkge1xuICAgICAgc291cmNlID0gcGxheWVyLm1lZGlhLmdldEF0dHJpYnV0ZSh0aGlzLmNvbmZpZy5hdHRyaWJ1dGVzLmVtYmVkLmlkKTtcbiAgICB9XG5cbiAgICAvLyBSZXBsYWNlIHRoZSA8aWZyYW1lPiB3aXRoIGEgPGRpdj4gZHVlIHRvIFlvdVR1YmUgQVBJIGlzc3Vlc1xuICAgIGNvbnN0IHZpZGVvSWQgPSBwYXJzZUlkKHNvdXJjZSk7XG4gICAgY29uc3QgaWQgPSBnZW5lcmF0ZUlkKHBsYXllci5wcm92aWRlcik7XG4gICAgLy8gR2V0IHBvc3RlciwgaWYgYWxyZWFkeSBzZXRcbiAgICBjb25zdCB7IHBvc3RlciB9ID0gcGxheWVyO1xuICAgIC8vIFJlcGxhY2UgbWVkaWEgZWxlbWVudFxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQsICdkYXRhLXBvc3Rlcic6IHBvc3RlciB9KTtcbiAgICBwbGF5ZXIubWVkaWEgPSByZXBsYWNlRWxlbWVudChjb250YWluZXIsIHBsYXllci5tZWRpYSk7XG5cbiAgICAvLyBJZCB0byBwb3N0ZXIgd3JhcHBlclxuICAgIGNvbnN0IHBvc3RlclNyYyA9IHMgPT4gYGh0dHBzOi8vaS55dGltZy5jb20vdmkvJHt2aWRlb0lkfS8ke3N9ZGVmYXVsdC5qcGdgO1xuXG4gICAgLy8gQ2hlY2sgdGh1bWJuYWlsIGltYWdlcyBpbiBvcmRlciBvZiBxdWFsaXR5LCBidXQgcmVqZWN0IGZhbGxiYWNrIHRodW1ibmFpbHMgKDEyMHB4IHdpZGUpXG4gICAgbG9hZEltYWdlKHBvc3RlclNyYygnbWF4cmVzJyksIDEyMSkgLy8gSGlnZXN0IHF1YWxpdHkgYW5kIHVucGFkZGVkXG4gICAgICAuY2F0Y2goKCkgPT4gbG9hZEltYWdlKHBvc3RlclNyYygnc2QnKSwgMTIxKSkgLy8gNDgwcCBwYWRkZWQgNDozXG4gICAgICAuY2F0Y2goKCkgPT4gbG9hZEltYWdlKHBvc3RlclNyYygnaHEnKSkpIC8vIDM2MHAgcGFkZGVkIDQ6My4gQWx3YXlzIGV4aXN0c1xuICAgICAgLnRoZW4oaW1hZ2UgPT4gdWkuc2V0UG9zdGVyLmNhbGwocGxheWVyLCBpbWFnZS5zcmMpKVxuICAgICAgLnRoZW4oc3JjID0+IHtcbiAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHBhZGRlZCwgdXNlIGJhY2tncm91bmQtc2l6ZSBcImNvdmVyXCIgaW5zdGVhZCAobGlrZSB5b3V0dWJlIGRvZXMgdG9vIHdpdGggdGhlaXIgcG9zdGVycylcbiAgICAgICAgaWYgKCFzcmMuaW5jbHVkZXMoJ21heHJlcycpKSB7XG4gICAgICAgICAgcGxheWVyLmVsZW1lbnRzLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICdjb3Zlcic7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge30pO1xuXG4gICAgY29uc3QgY29uZmlnID0gcGxheWVyLmNvbmZpZy55b3V0dWJlO1xuXG4gICAgLy8gU2V0dXAgaW5zdGFuY2VcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlL2lmcmFtZV9hcGlfcmVmZXJlbmNlXG4gICAgcGxheWVyLmVtYmVkID0gbmV3IHdpbmRvdy5ZVC5QbGF5ZXIoaWQsIHtcbiAgICAgIHZpZGVvSWQsXG4gICAgICBob3N0OiBnZXRIb3N0KGNvbmZpZyksXG4gICAgICBwbGF5ZXJWYXJzOiBleHRlbmQoXG4gICAgICAgIHt9LFxuICAgICAgICB7XG4gICAgICAgICAgYXV0b3BsYXk6IHBsYXllci5jb25maWcuYXV0b3BsYXkgPyAxIDogMCwgLy8gQXV0b3BsYXlcbiAgICAgICAgICBobDogcGxheWVyLmNvbmZpZy5obCwgLy8gaWZyYW1lIGludGVyZmFjZSBsYW5ndWFnZVxuICAgICAgICAgIGNvbnRyb2xzOiBwbGF5ZXIuc3VwcG9ydGVkLnVpID8gMCA6IDEsIC8vIE9ubHkgc2hvdyBjb250cm9scyBpZiBub3QgZnVsbHkgc3VwcG9ydGVkXG4gICAgICAgICAgZGlzYWJsZWtiOiAxLCAvLyBEaXNhYmxlIGtleWJvYXJkIGFzIHdlIGhhbmRsZSBpdFxuICAgICAgICAgIHBsYXlzaW5saW5lOiAhcGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZSA/IDEgOiAwLCAvLyBBbGxvdyBpT1MgaW5saW5lIHBsYXliYWNrXG4gICAgICAgICAgLy8gQ2FwdGlvbnMgYXJlIGZsYWt5IG9uIFlvdVR1YmVcbiAgICAgICAgICBjY19sb2FkX3BvbGljeTogcGxheWVyLmNhcHRpb25zLmFjdGl2ZSA/IDEgOiAwLFxuICAgICAgICAgIGNjX2xhbmdfcHJlZjogcGxheWVyLmNvbmZpZy5jYXB0aW9ucy5sYW5ndWFnZSxcbiAgICAgICAgICAvLyBUcmFja2luZyBmb3Igc3RhdHNcbiAgICAgICAgICB3aWRnZXRfcmVmZXJyZXI6IHdpbmRvdyA/IHdpbmRvdy5sb2NhdGlvbi5ocmVmIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgKSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBvbkVycm9yKGV2ZW50KSB7XG4gICAgICAgICAgLy8gWW91VHViZSBtYXkgZmlyZSBvbkVycm9yIHR3aWNlLCBzbyBvbmx5IGhhbmRsZSBpdCBvbmNlXG4gICAgICAgICAgaWYgKCFwbGF5ZXIubWVkaWEuZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgLy8gTWVzc2FnZXMgY29waWVkIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20veW91dHViZS9pZnJhbWVfYXBpX3JlZmVyZW5jZSNvbkVycm9yXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIDI6ICdUaGUgcmVxdWVzdCBjb250YWlucyBhbiBpbnZhbGlkIHBhcmFtZXRlciB2YWx1ZS4gRm9yIGV4YW1wbGUsIHRoaXMgZXJyb3Igb2NjdXJzIGlmIHlvdSBzcGVjaWZ5IGEgdmlkZW8gSUQgdGhhdCBkb2VzIG5vdCBoYXZlIDExIGNoYXJhY3RlcnMsIG9yIGlmIHRoZSB2aWRlbyBJRCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMsIHN1Y2ggYXMgZXhjbGFtYXRpb24gcG9pbnRzIG9yIGFzdGVyaXNrcy4nLFxuICAgICAgICAgICAgICAgIDU6ICdUaGUgcmVxdWVzdGVkIGNvbnRlbnQgY2Fubm90IGJlIHBsYXllZCBpbiBhbiBIVE1MNSBwbGF5ZXIgb3IgYW5vdGhlciBlcnJvciByZWxhdGVkIHRvIHRoZSBIVE1MNSBwbGF5ZXIgaGFzIG9jY3VycmVkLicsXG4gICAgICAgICAgICAgICAgMTAwOiAnVGhlIHZpZGVvIHJlcXVlc3RlZCB3YXMgbm90IGZvdW5kLiBUaGlzIGVycm9yIG9jY3VycyB3aGVuIGEgdmlkZW8gaGFzIGJlZW4gcmVtb3ZlZCAoZm9yIGFueSByZWFzb24pIG9yIGhhcyBiZWVuIG1hcmtlZCBhcyBwcml2YXRlLicsXG4gICAgICAgICAgICAgICAgMTAxOiAnVGhlIG93bmVyIG9mIHRoZSByZXF1ZXN0ZWQgdmlkZW8gZG9lcyBub3QgYWxsb3cgaXQgdG8gYmUgcGxheWVkIGluIGVtYmVkZGVkIHBsYXllcnMuJyxcbiAgICAgICAgICAgICAgICAxNTA6ICdUaGUgb3duZXIgb2YgdGhlIHJlcXVlc3RlZCB2aWRlbyBkb2VzIG5vdCBhbGxvdyBpdCB0byBiZSBwbGF5ZWQgaW4gZW1iZWRkZWQgcGxheWVycy4nLFxuICAgICAgICAgICAgICB9W2NvZGVdIHx8ICdBbiB1bmtub3duIGVycm9yIG9jY3VyZWQnO1xuXG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEuZXJyb3IgPSB7IGNvZGUsIG1lc3NhZ2UgfTtcblxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25QbGF5YmFja1JhdGVDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIGluc3RhbmNlXG4gICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgICAvLyBHZXQgY3VycmVudCBzcGVlZFxuICAgICAgICAgIHBsYXllci5tZWRpYS5wbGF5YmFja1JhdGUgPSBpbnN0YW5jZS5nZXRQbGF5YmFja1JhdGUoKTtcblxuICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncmF0ZWNoYW5nZScpO1xuICAgICAgICB9LFxuICAgICAgICBvblJlYWR5KGV2ZW50KSB7XG4gICAgICAgICAgLy8gQmFpbCBpZiBvblJlYWR5IGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkLiBTZWUgaXNzdWUgIzExMDhcbiAgICAgICAgICBpZiAoaXMuZnVuY3Rpb24ocGxheWVyLm1lZGlhLnBsYXkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEdldCB0aGUgaW5zdGFuY2VcbiAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgIC8vIEdldCB0aGUgdGl0bGVcbiAgICAgICAgICB5b3V0dWJlLmdldFRpdGxlLmNhbGwocGxheWVyLCB2aWRlb0lkKTtcblxuICAgICAgICAgIC8vIENyZWF0ZSBhIGZhdXggSFRNTDUgQVBJIHVzaW5nIHRoZSBZb3VUdWJlIEFQSVxuICAgICAgICAgIHBsYXllci5tZWRpYS5wbGF5ID0gKCkgPT4ge1xuICAgICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZS5jYWxsKHBsYXllciwgdHJ1ZSk7XG4gICAgICAgICAgICBpbnN0YW5jZS5wbGF5VmlkZW8oKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcGxheWVyLm1lZGlhLnBhdXNlID0gKCkgPT4ge1xuICAgICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZS5jYWxsKHBsYXllciwgZmFsc2UpO1xuICAgICAgICAgICAgaW5zdGFuY2UucGF1c2VWaWRlbygpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBwbGF5ZXIubWVkaWEuc3RvcCA9ICgpID0+IHtcbiAgICAgICAgICAgIGluc3RhbmNlLnN0b3BWaWRlbygpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBwbGF5ZXIubWVkaWEuZHVyYXRpb24gPSBpbnN0YW5jZS5nZXREdXJhdGlvbigpO1xuICAgICAgICAgIHBsYXllci5tZWRpYS5wYXVzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU2Vla2luZ1xuICAgICAgICAgIHBsYXllci5tZWRpYS5jdXJyZW50VGltZSA9IDA7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ2N1cnJlbnRUaW1lJywge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKGluc3RhbmNlLmdldEN1cnJlbnRUaW1lKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCh0aW1lKSB7XG4gICAgICAgICAgICAgIC8vIElmIHBhdXNlZCBhbmQgbmV2ZXIgcGxheWVkLCBtdXRlIGF1ZGlvIHByZXZlbnRpdmVseSAoWW91VHViZSBzdGFydHMgcGxheWluZyBvbiBzZWVrIGlmIHRoZSB2aWRlbyBoYXNuJ3QgYmVlbiBwbGF5ZWQgeWV0KS5cbiAgICAgICAgICAgICAgaWYgKHBsYXllci5wYXVzZWQgJiYgIXBsYXllci5lbWJlZC5oYXNQbGF5ZWQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZW1iZWQubXV0ZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gU2V0IHNlZWtpbmcgc3RhdGUgYW5kIHRyaWdnZXIgZXZlbnRcbiAgICAgICAgICAgICAgcGxheWVyLm1lZGlhLnNlZWtpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3NlZWtpbmcnKTtcblxuICAgICAgICAgICAgICAvLyBTZWVrIGFmdGVyIGV2ZW50cyBzZW50XG4gICAgICAgICAgICAgIGluc3RhbmNlLnNlZWtUbyh0aW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBQbGF5YmFjayBzcGVlZFxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdwbGF5YmFja1JhdGUnLCB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5nZXRQbGF5YmFja1JhdGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoaW5wdXQpIHtcbiAgICAgICAgICAgICAgaW5zdGFuY2Uuc2V0UGxheWJhY2tSYXRlKGlucHV0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBWb2x1bWVcbiAgICAgICAgICBsZXQgeyB2b2x1bWUgfSA9IHBsYXllci5jb25maWc7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ3ZvbHVtZScsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZvbHVtZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoaW5wdXQpIHtcbiAgICAgICAgICAgICAgdm9sdW1lID0gaW5wdXQ7XG4gICAgICAgICAgICAgIGluc3RhbmNlLnNldFZvbHVtZSh2b2x1bWUgKiAxMDApO1xuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIE11dGVkXG4gICAgICAgICAgbGV0IHsgbXV0ZWQgfSA9IHBsYXllci5jb25maWc7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXllci5tZWRpYSwgJ211dGVkJywge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICByZXR1cm4gbXV0ZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KGlucHV0KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZSA9IGlzLmJvb2xlYW4oaW5wdXQpID8gaW5wdXQgOiBtdXRlZDtcbiAgICAgICAgICAgICAgbXV0ZWQgPSB0b2dnbGU7XG4gICAgICAgICAgICAgIGluc3RhbmNlW3RvZ2dsZSA/ICdtdXRlJyA6ICd1bk11dGUnXSgpO1xuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3ZvbHVtZWNoYW5nZScpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFNvdXJjZVxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdjdXJyZW50U3JjJywge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0VmlkZW9VcmwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBFbmRlZFxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF5ZXIubWVkaWEsICdlbmRlZCcsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5jdXJyZW50VGltZSA9PT0gcGxheWVyLmR1cmF0aW9uO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIEdldCBhdmFpbGFibGUgc3BlZWRzXG4gICAgICAgICAgY29uc3Qgc3BlZWRzID0gaW5zdGFuY2UuZ2V0QXZhaWxhYmxlUGxheWJhY2tSYXRlcygpO1xuICAgICAgICAgIC8vIEZpbHRlciBiYXNlZCBvbiBjb25maWdcbiAgICAgICAgICBwbGF5ZXIub3B0aW9ucy5zcGVlZCA9IHNwZWVkcy5maWx0ZXIocyA9PiBwbGF5ZXIuY29uZmlnLnNwZWVkLm9wdGlvbnMuaW5jbHVkZXMocykpO1xuXG4gICAgICAgICAgLy8gU2V0IHRoZSB0YWJpbmRleCB0byBhdm9pZCBmb2N1cyBlbnRlcmluZyBpZnJhbWVcbiAgICAgICAgICBpZiAocGxheWVyLnN1cHBvcnRlZC51aSkge1xuICAgICAgICAgICAgcGxheWVyLm1lZGlhLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd0aW1ldXBkYXRlJyk7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdkdXJhdGlvbmNoYW5nZScpO1xuXG4gICAgICAgICAgLy8gUmVzZXQgdGltZXJcbiAgICAgICAgICBjbGVhckludGVydmFsKHBsYXllci50aW1lcnMuYnVmZmVyaW5nKTtcblxuICAgICAgICAgIC8vIFNldHVwIGJ1ZmZlcmluZ1xuICAgICAgICAgIHBsYXllci50aW1lcnMuYnVmZmVyaW5nID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgLy8gR2V0IGxvYWRlZCAlIGZyb20gWW91VHViZVxuICAgICAgICAgICAgcGxheWVyLm1lZGlhLmJ1ZmZlcmVkID0gaW5zdGFuY2UuZ2V0VmlkZW9Mb2FkZWRGcmFjdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIHByb2dyZXNzIG9ubHkgd2hlbiB3ZSBhY3R1YWxseSBidWZmZXIgc29tZXRoaW5nXG4gICAgICAgICAgICBpZiAocGxheWVyLm1lZGlhLmxhc3RCdWZmZXJlZCA9PT0gbnVsbCB8fCBwbGF5ZXIubWVkaWEubGFzdEJ1ZmZlcmVkIDwgcGxheWVyLm1lZGlhLmJ1ZmZlcmVkKSB7XG4gICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAncHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IGxhc3QgYnVmZmVyIHBvaW50XG4gICAgICAgICAgICBwbGF5ZXIubWVkaWEubGFzdEJ1ZmZlcmVkID0gcGxheWVyLm1lZGlhLmJ1ZmZlcmVkO1xuXG4gICAgICAgICAgICAvLyBCYWlsIGlmIHdlJ3JlIGF0IDEwMCVcbiAgICAgICAgICAgIGlmIChwbGF5ZXIubWVkaWEuYnVmZmVyZWQgPT09IDEpIHtcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChwbGF5ZXIudGltZXJzLmJ1ZmZlcmluZyk7XG5cbiAgICAgICAgICAgICAgLy8gVHJpZ2dlciBldmVudFxuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2NhbnBsYXl0aHJvdWdoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMjAwKTtcblxuICAgICAgICAgIC8vIFJlYnVpbGQgVUlcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHVpLmJ1aWxkLmNhbGwocGxheWVyKSwgNTApO1xuICAgICAgICB9LFxuICAgICAgICBvblN0YXRlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBpbnN0YW5jZVxuICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgICAgLy8gUmVzZXQgdGltZXJcbiAgICAgICAgICBjbGVhckludGVydmFsKHBsYXllci50aW1lcnMucGxheWluZyk7XG5cbiAgICAgICAgICBjb25zdCBzZWVrZWQgPSBwbGF5ZXIubWVkaWEuc2Vla2luZyAmJiBbMSwgMl0uaW5jbHVkZXMoZXZlbnQuZGF0YSk7XG5cbiAgICAgICAgICBpZiAoc2Vla2VkKSB7XG4gICAgICAgICAgICAvLyBVbnNldCBzZWVraW5nIGFuZCBmaXJlIHNlZWtlZCBldmVudFxuICAgICAgICAgICAgcGxheWVyLm1lZGlhLnNlZWtpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnc2Vla2VkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSGFuZGxlIGV2ZW50c1xuICAgICAgICAgIC8vIC0xICAgVW5zdGFydGVkXG4gICAgICAgICAgLy8gMCAgICBFbmRlZFxuICAgICAgICAgIC8vIDEgICAgUGxheWluZ1xuICAgICAgICAgIC8vIDIgICAgUGF1c2VkXG4gICAgICAgICAgLy8gMyAgICBCdWZmZXJpbmdcbiAgICAgICAgICAvLyA1ICAgIFZpZGVvIGN1ZWRcbiAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEpIHtcbiAgICAgICAgICAgIGNhc2UgLTE6XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBzY3J1YmJlclxuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3RpbWV1cGRhdGUnKTtcblxuICAgICAgICAgICAgICAvLyBHZXQgbG9hZGVkICUgZnJvbSBZb3VUdWJlXG4gICAgICAgICAgICAgIHBsYXllci5tZWRpYS5idWZmZXJlZCA9IGluc3RhbmNlLmdldFZpZGVvTG9hZGVkRnJhY3Rpb24oKTtcbiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICdwcm9ncmVzcycpO1xuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIGFzc3VyZVBsYXliYWNrU3RhdGUuY2FsbChwbGF5ZXIsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAvLyBZb3VUdWJlIGRvZXNuJ3Qgc3VwcG9ydCBsb29wIGZvciBhIHNpbmdsZSB2aWRlbywgc28gbWltaWNrIGl0LlxuICAgICAgICAgICAgICBpZiAocGxheWVyLm1lZGlhLmxvb3ApIHtcbiAgICAgICAgICAgICAgICAvLyBZb3VUdWJlIG5lZWRzIGEgY2FsbCB0byBgc3RvcFZpZGVvYCBiZWZvcmUgcGxheWluZyBhZ2FpblxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnN0b3BWaWRlbygpO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBsYXlWaWRlbygpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHBsYXllciwgcGxheWVyLm1lZGlhLCAnZW5kZWQnKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgIC8vIFJlc3RvcmUgcGF1c2VkIHN0YXRlIChZb3VUdWJlIHN0YXJ0cyBwbGF5aW5nIG9uIHNlZWsgaWYgdGhlIHZpZGVvIGhhc24ndCBiZWVuIHBsYXllZCB5ZXQpXG4gICAgICAgICAgICAgIGlmICghcGxheWVyLmNvbmZpZy5hdXRvcGxheSAmJiBwbGF5ZXIubWVkaWEucGF1c2VkICYmICFwbGF5ZXIuZW1iZWQuaGFzUGxheWVkKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLm1lZGlhLnBhdXNlKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzdXJlUGxheWJhY2tTdGF0ZS5jYWxsKHBsYXllciwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3BsYXlpbmcnKTtcblxuICAgICAgICAgICAgICAgIC8vIFBvbGwgdG8gZ2V0IHBsYXliYWNrIHByb2dyZXNzXG4gICAgICAgICAgICAgICAgcGxheWVyLnRpbWVycy5wbGF5aW5nID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIubWVkaWEsICd0aW1ldXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgZHVyYXRpb24gYWdhaW4gZHVlIHRvIFlvdVR1YmUgYnVnXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NhbXBvdHRzL3BseXIvaXNzdWVzLzM3NFxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvZ2RhdGEtaXNzdWVzL2lzc3Vlcy9kZXRhaWw/aWQ9ODY5MFxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIubWVkaWEuZHVyYXRpb24gIT09IGluc3RhbmNlLmdldER1cmF0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgIHBsYXllci5tZWRpYS5kdXJhdGlvbiA9IGluc3RhbmNlLmdldER1cmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgLy8gUmVzdG9yZSBhdWRpbyAoWW91VHViZSBzdGFydHMgcGxheWluZyBvbiBzZWVrIGlmIHRoZSB2aWRlbyBoYXNuJ3QgYmVlbiBwbGF5ZWQgeWV0KVxuICAgICAgICAgICAgICBpZiAoIXBsYXllci5tdXRlZCkge1xuICAgICAgICAgICAgICAgIHBsYXllci5lbWJlZC51bk11dGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhc3N1cmVQbGF5YmFja1N0YXRlLmNhbGwocGxheWVyLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgLy8gVHJpZ2dlciB3YWl0aW5nIGV2ZW50IHRvIGFkZCBsb2FkaW5nIGNsYXNzZXMgdG8gY29udGFpbmVyIGFzIHRoZSB2aWRlbyBidWZmZXJzLlxuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQuY2FsbChwbGF5ZXIsIHBsYXllci5tZWRpYSwgJ3dhaXRpbmcnKTtcblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50LmNhbGwocGxheWVyLCBwbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLCAnc3RhdGVjaGFuZ2UnLCBmYWxzZSwge1xuICAgICAgICAgICAgY29kZTogZXZlbnQuZGF0YSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCB5b3V0dWJlO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL2VsZW1lbnRzJztcbmltcG9ydCB7IG9uY2UgfSBmcm9tICcuLi91dGlscy9ldmVudHMnO1xuaW1wb3J0IGZldGNoIGZyb20gJy4uL3V0aWxzL2ZldGNoJztcbmltcG9ydCBpcyBmcm9tICcuLi91dGlscy9pcyc7XG5pbXBvcnQgeyBmb3JtYXRUaW1lIH0gZnJvbSAnLi4vdXRpbHMvdGltZSc7XG5cbi8vIEFyZzogdnR0RGF0YVN0cmluZyBleGFtcGxlOiBcIldFQlZUVFxcblxcbjFcXG4wMDowMDowNS4wMDAgLS0+IDAwOjAwOjEwLjAwMFxcbjEwODBwLTAwMDAxLmpwZ1wiXG5jb25zdCBwYXJzZVZ0dCA9IHZ0dERhdGFTdHJpbmcgPT4ge1xuICBjb25zdCBwcm9jZXNzZWRMaXN0ID0gW107XG4gIGNvbnN0IGZyYW1lcyA9IHZ0dERhdGFTdHJpbmcuc3BsaXQoL1xcclxcblxcclxcbnxcXG5cXG58XFxyXFxyLyk7XG5cbiAgZnJhbWVzLmZvckVhY2goZnJhbWUgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IGxpbmVzID0gZnJhbWUuc3BsaXQoL1xcclxcbnxcXG58XFxyLyk7XG5cbiAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgaWYgKCFpcy5udW1iZXIocmVzdWx0LnN0YXJ0VGltZSkpIHtcbiAgICAgICAgLy8gVGhlIGxpbmUgd2l0aCBzdGFydCBhbmQgZW5kIHRpbWVzIG9uIGl0IGlzIHRoZSBmaXJzdCBsaW5lIG9mIGludGVyZXN0XG4gICAgICAgIGNvbnN0IG1hdGNoVGltZXMgPSBsaW5lLm1hdGNoKFxuICAgICAgICAgIC8oWzAtOV17Mn0pPzo/KFswLTldezJ9KTooWzAtOV17Mn0pLihbMC05XXsyLDN9KSggPy0tPiA/KShbMC05XXsyfSk/Oj8oWzAtOV17Mn0pOihbMC05XXsyfSkuKFswLTldezIsM30pLyxcbiAgICAgICAgKTsgLy8gTm90ZSB0aGF0IHRoaXMgY3VycmVudGx5IGlnbm9yZXMgY2FwdGlvbiBmb3JtYXR0aW5nIGRpcmVjdGl2ZXMgdGhhdCBhcmUgb3B0aW9uYWxseSBvbiB0aGUgZW5kIG9mIHRoaXMgbGluZSAtIGZpbmUgZm9yIG5vbi1jYXB0aW9ucyBWVFRcblxuICAgICAgICBpZiAobWF0Y2hUaW1lcykge1xuICAgICAgICAgIHJlc3VsdC5zdGFydFRpbWUgPVxuICAgICAgICAgICAgTnVtYmVyKG1hdGNoVGltZXNbMV0gfHwgMCkgKiA2MCAqIDYwICtcbiAgICAgICAgICAgIE51bWJlcihtYXRjaFRpbWVzWzJdKSAqIDYwICtcbiAgICAgICAgICAgIE51bWJlcihtYXRjaFRpbWVzWzNdKSArXG4gICAgICAgICAgICBOdW1iZXIoYDAuJHttYXRjaFRpbWVzWzRdfWApO1xuICAgICAgICAgIHJlc3VsdC5lbmRUaW1lID1cbiAgICAgICAgICAgIE51bWJlcihtYXRjaFRpbWVzWzZdIHx8IDApICogNjAgKiA2MCArXG4gICAgICAgICAgICBOdW1iZXIobWF0Y2hUaW1lc1s3XSkgKiA2MCArXG4gICAgICAgICAgICBOdW1iZXIobWF0Y2hUaW1lc1s4XSkgK1xuICAgICAgICAgICAgTnVtYmVyKGAwLiR7bWF0Y2hUaW1lc1s5XX1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXMuZW1wdHkobGluZS50cmltKCkpICYmIGlzLmVtcHR5KHJlc3VsdC50ZXh0KSkge1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIHN0YXJ0VGltZSwgdGhlbiB3ZSdyZSBkZWZpbml0ZWx5IHVwIHRvIHRoZSB0ZXh0IGxpbmUocylcbiAgICAgICAgY29uc3QgbGluZVNwbGl0ID0gbGluZS50cmltKCkuc3BsaXQoJyN4eXdoPScpO1xuICAgICAgICBbcmVzdWx0LnRleHRdID0gbGluZVNwbGl0O1xuXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgY29udGVudCBpbiBsaW5lU3BsaXRbMV0sIHRoZW4gd2UgaGF2ZSBzcHJpdGVzLiBJZiBub3QsIHRoZW4gaXQncyBqdXN0IG9uZSBmcmFtZSBwZXIgaW1hZ2VcbiAgICAgICAgaWYgKGxpbmVTcGxpdFsxXSkge1xuICAgICAgICAgIFtyZXN1bHQueCwgcmVzdWx0LnksIHJlc3VsdC53LCByZXN1bHQuaF0gPSBsaW5lU3BsaXRbMV0uc3BsaXQoJywnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC50ZXh0KSB7XG4gICAgICBwcm9jZXNzZWRMaXN0LnB1c2gocmVzdWx0KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwcm9jZXNzZWRMaXN0O1xufTtcblxuLyoqXG4gKiBQcmV2aWV3IHRodW1ibmFpbHMgZm9yIHNlZWsgaG92ZXIgYW5kIHNjcnViYmluZ1xuICogU2Vla2luZzogSG92ZXIgb3ZlciB0aGUgc2VlayBiYXIgKGRlc2t0b3Agb25seSk6IHNob3dzIGEgc21hbGwgcHJldmlldyBjb250YWluZXIgYWJvdmUgdGhlIHNlZWsgYmFyXG4gKiBTY3J1YmJpbmc6IENsaWNrIGFuZCBkcmFnIHRoZSBzZWVrIGJhciAoZGVza3RvcCBhbmQgbW9iaWxlKTogc2hvd3MgdGhlIHByZXZpZXcgaW1hZ2Ugb3ZlciB0aGUgZW50aXJlIHZpZGVvLCBhcyBpZiB0aGUgdmlkZW8gaXMgc2NydWJiaW5nIGF0IHZlcnkgaGlnaCBzcGVlZFxuICpcbiAqIE5vdGVzOlxuICogLSBUaHVtYnMgYXJlIHNldCB2aWEgSlMgc2V0dGluZ3Mgb24gUGx5ciBpbml0LCBub3QgSFRNTDUgJ3RyYWNrJyBwcm9wZXJ0eS4gVXNpbmcgdGhlIHRyYWNrIHByb3BlcnR5IHdvdWxkIGJlIGEgYml0IGdyb3NzLCBiZWNhdXNlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBjdXN0b20gJ2tpbmRzJy4ga2luZD1tZXRhZGF0YSBtaWdodCBiZSB1c2VkIGZvciBzb21ldGhpbmcgZWxzZSwgYW5kIHdlIHdhbnQgdG8gYWxsb3cgbXVsdGlwbGUgdGh1bWJuYWlscyB0cmFja3MuIFRyYWNrcyBtdXN0IGhhdmUgYSB1bmlxdWUgY29tYmluYXRpb24gb2YgJ2tpbmQnIGFuZCAnbGFiZWwnLiBXZSB3b3VsZCBoYXZlIHRvIGRvIHNvbWV0aGluZyBsaWtlIGtpbmQ9bWV0YWRhdGEsbGFiZWw9dGh1bWJuYWlsczEgLyBraW5kPW1ldGFkYXRhLGxhYmVsPXRodW1ibmFpbHMyLiBTcXVhcmUgcGVnLCByb3VuZCBob2xlXG4gKiAtIFZUVCBpbmZvOiB0aGUgaW1hZ2UgVVJMIGlzIHJlbGF0aXZlIHRvIHRoZSBWVFQsIG5vdCB0aGUgY3VycmVudCBkb2N1bWVudC4gQnV0IGlmIHRoZSB1cmwgc3RhcnRzIHdpdGggYSBzbGFzaCwgaXQgd2lsbCBuYXR1cmFsbHkgYmUgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgZG9tYWluLiBodHRwczovL3N1cHBvcnQuandwbGF5ZXIuY29tL2FydGljbGVzL2hvdy10by1hZGQtcHJldmlldy10aHVtYm5haWxzXG4gKiAtIFRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBtdWx0aXBsZSBzZXBhcmF0ZSBpbWcgZWxlbWVudHMuIE90aGVyIGltcGxlbWVudGF0aW9ucyB1c2UgYmFja2dyb3VuZC1pbWFnZSBvbiBvbmUgZWxlbWVudC4gVGhpcyB3b3VsZCBiZSBuaWNlIGFuZCBzaW1wbGUsIGJ1dCBGaXJlZm94IGFuZCBTYWZhcmkgaGF2ZSBmbGlja2VyaW5nIGlzc3VlcyB3aXRoIHJlcGxhY2luZyBiYWNrZ3JvdW5kcyBvZiBsYXJnZXIgaW1hZ2VzLiBJdCBzZWVtcyB0aGF0IFlvdVR1YmUgcGVyaGFwcyBvbmx5IGF2b2lkcyB0aGlzIGJlY2F1c2UgdGhleSBkb24ndCBoYXZlIHRoZSBvcHRpb24gZm9yIGhpZ2gtcmVzIHByZXZpZXdzIChldmVuIHRoZSBmdWxsc2NyZWVuIG9uZXMsIHdoZW4gbW91c2Vkb3duL3NlZWtpbmcpLiBJbWFnZXMgYXBwZWFyIG92ZXIgdGhlIHRvcCBvZiBlYWNoIG90aGVyLCBhbmQgcHJldmlvdXMgb25lcyBhcmUgZGlzY2FyZGVkIG9uY2UgdGhlIG5ldyBvbmVzIGhhdmUgYmVlbiByZW5kZXJlZFxuICovXG5cbmNvbnN0IGZpdFJhdGlvID0gKHJhdGlvLCBvdXRlcikgPT4ge1xuICBjb25zdCB0YXJnZXRSYXRpbyA9IG91dGVyLndpZHRoIC8gb3V0ZXIuaGVpZ2h0O1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgaWYgKHJhdGlvID4gdGFyZ2V0UmF0aW8pIHtcbiAgICByZXN1bHQud2lkdGggPSBvdXRlci53aWR0aDtcbiAgICByZXN1bHQuaGVpZ2h0ID0gKDEgLyByYXRpbykgKiBvdXRlci53aWR0aDtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQuaGVpZ2h0ID0gb3V0ZXIuaGVpZ2h0O1xuICAgIHJlc3VsdC53aWR0aCA9IHJhdGlvICogb3V0ZXIuaGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmNsYXNzIFByZXZpZXdUaHVtYm5haWxzIHtcbiAgLyoqXG4gICAqIFByZXZpZXdUaHVtYm5haWxzIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge1BseXJ9IHBsYXllclxuICAgKiBAcmV0dXJuIHtQcmV2aWV3VGh1bWJuYWlsc31cbiAgICovXG4gIGNvbnN0cnVjdG9yKHBsYXllcikge1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMudGh1bWJuYWlscyA9IFtdO1xuICAgIHRoaXMubG9hZGVkID0gZmFsc2U7XG4gICAgdGhpcy5sYXN0TW91c2VNb3ZlVGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICB0aGlzLmxvYWRlZEltYWdlcyA9IFtdO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIHRodW1iOiB7fSxcbiAgICAgIHNjcnViYmluZzoge30sXG4gICAgfTtcblxuICAgIHRoaXMubG9hZCgpO1xuICB9XG5cbiAgZ2V0IGVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGxheWVyLmlzSFRNTDUgJiYgdGhpcy5wbGF5ZXIuaXNWaWRlbyAmJiB0aGlzLnBsYXllci5jb25maWcucHJldmlld1RodW1ibmFpbHMuZW5hYmxlZDtcbiAgfVxuXG4gIGxvYWQoKSB7XG4gICAgLy8gVG9nZ2xlIHRoZSByZWd1bGFyIHNlZWsgdG9vbHRpcFxuICAgIGlmICh0aGlzLnBsYXllci5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwKSB7XG4gICAgICB0aGlzLnBsYXllci5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLmhpZGRlbiA9IHRoaXMuZW5hYmxlZDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0VGh1bWJuYWlscygpLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgRE9NIGVsZW1lbnRzXG4gICAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGh1bWIgY29udGFpbmVyIHNpemUgd2FzIHNwZWNpZmllZCBtYW51YWxseSBpbiBDU1NcbiAgICAgIHRoaXMuZGV0ZXJtaW5lQ29udGFpbmVyQXV0b1NpemluZygpO1xuXG4gICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICAvLyBEb3dubG9hZCBWVFQgZmlsZXMgYW5kIHBhcnNlIHRoZW1cbiAgZ2V0VGh1bWJuYWlscygpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCB7IHNyYyB9ID0gdGhpcy5wbGF5ZXIuY29uZmlnLnByZXZpZXdUaHVtYm5haWxzO1xuXG4gICAgICBpZiAoaXMuZW1wdHkoc3JjKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJldmlld1RodW1ibmFpbHMuc3JjIGNvbmZpZyBhdHRyaWJ1dGUnKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVzb2x2ZSBwcm9taXNlXG4gICAgICBjb25zdCBzb3J0QW5kUmVzb2x2ZSA9ICgpID0+IHtcbiAgICAgICAgLy8gU29ydCBzbWFsbGVzdCB0byBiaWdnZXN0IChlLmcuLCBbMTIwcCwgNDgwcCwgMTA4MHBdKVxuICAgICAgICB0aGlzLnRodW1ibmFpbHMuc29ydCgoeCwgeSkgPT4geC5oZWlnaHQgLSB5LmhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5wbGF5ZXIuZGVidWcubG9nKCdQcmV2aWV3IHRodW1ibmFpbHMnLCB0aGlzLnRodW1ibmFpbHMpO1xuXG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFZpYSBjYWxsYmFjaygpXG4gICAgICBpZiAoaXMuZnVuY3Rpb24oc3JjKSkge1xuICAgICAgICBzcmModGh1bWJuYWlscyA9PiB7XG4gICAgICAgICAgdGhpcy50aHVtYm5haWxzID0gdGh1bWJuYWlscztcbiAgICAgICAgICBzb3J0QW5kUmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIFZUVCB1cmxzXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gSWYgc3RyaW5nLCBjb252ZXJ0IGludG8gc2luZ2xlLWVsZW1lbnQgbGlzdFxuICAgICAgICBjb25zdCB1cmxzID0gaXMuc3RyaW5nKHNyYykgPyBbc3JjXSA6IHNyYztcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggc3JjIFVSTC4gRG93bmxvYWQgYW5kIHByb2Nlc3MgdGhlIFZUVCBmaWxlLCBzdG9yaW5nIHRoZSByZXN1bHRpbmcgZGF0YSBpbiB0aGlzLnRodW1ibmFpbHNcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB1cmxzLm1hcCh1ID0+IHRoaXMuZ2V0VGh1bWJuYWlsKHUpKTtcbiAgICAgICAgLy8gUmVzb2x2ZVxuICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihzb3J0QW5kUmVzb2x2ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBQcm9jZXNzIGluZGl2aWR1YWwgVlRUIGZpbGVcbiAgZ2V0VGh1bWJuYWlsKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGZldGNoKHVybCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGNvbnN0IHRodW1ibmFpbCA9IHtcbiAgICAgICAgICBmcmFtZXM6IHBhcnNlVnR0KHJlc3BvbnNlKSxcbiAgICAgICAgICBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgdXJsUHJlZml4OiAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB0aGUgVVJMcyBkb24ndCBzdGFydCB3aXRoICcvJywgdGhlbiB3ZSBuZWVkIHRvIHNldCB0aGVpciByZWxhdGl2ZSBwYXRoIHRvIGJlIHRoZSBsb2NhdGlvbiBvZiB0aGUgVlRUIGZpbGVcbiAgICAgICAgLy8gSWYgdGhlIFVSTHMgZG8gc3RhcnQgd2l0aCAnLycsIHRoZW4gdGhleSBvYnZpb3VzbHkgZG9uJ3QgbmVlZCBhIHByZWZpeCwgc28gaXQgd2lsbCByZW1haW4gYmxhbmtcbiAgICAgICAgLy8gSWYgdGhlIHRodW1ibmFpbCBVUkxzIHN0YXJ0IHdpdGggd2l0aCBub25lIG9mICcvJywgJ2h0dHA6Ly8nIG9yICdodHRwczovLycsIHRoZW4gd2UgbmVlZCB0byBzZXQgdGhlaXIgcmVsYXRpdmUgcGF0aCB0byBiZSB0aGUgbG9jYXRpb24gb2YgdGhlIFZUVCBmaWxlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhdGh1bWJuYWlsLmZyYW1lc1swXS50ZXh0LnN0YXJ0c1dpdGgoJy8nKSAmJlxuICAgICAgICAgICF0aHVtYm5haWwuZnJhbWVzWzBdLnRleHQuc3RhcnRzV2l0aCgnaHR0cDovLycpICYmXG4gICAgICAgICAgIXRodW1ibmFpbC5mcmFtZXNbMF0udGV4dC5zdGFydHNXaXRoKCdodHRwczovLycpXG4gICAgICAgICkge1xuICAgICAgICAgIHRodW1ibmFpbC51cmxQcmVmaXggPSB1cmwuc3Vic3RyaW5nKDAsIHVybC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEb3dubG9hZCB0aGUgZmlyc3QgZnJhbWUsIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZS9zZXQgdGhlIGhlaWdodCBvZiB0aGlzIHRodW1ibmFpbHNEZWZcbiAgICAgICAgY29uc3QgdGVtcEltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICAgICAgdGVtcEltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICB0aHVtYm5haWwuaGVpZ2h0ID0gdGVtcEltYWdlLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgICAgdGh1bWJuYWlsLndpZHRoID0gdGVtcEltYWdlLm5hdHVyYWxXaWR0aDtcblxuICAgICAgICAgIHRoaXMudGh1bWJuYWlscy5wdXNoKHRodW1ibmFpbCk7XG5cbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGVtcEltYWdlLnNyYyA9IHRodW1ibmFpbC51cmxQcmVmaXggKyB0aHVtYm5haWwuZnJhbWVzWzBdLnRleHQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXJ0TW92ZShldmVudCkge1xuICAgIGlmICghdGhpcy5sb2FkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzLmV2ZW50KGV2ZW50KSB8fCAhWyd0b3VjaG1vdmUnLCAnbW91c2Vtb3ZlJ10uaW5jbHVkZXMoZXZlbnQudHlwZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBXYWl0IHVudGlsIG1lZGlhIGhhcyBhIGR1cmF0aW9uXG4gICAgaWYgKCF0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2htb3ZlJykge1xuICAgICAgLy8gQ2FsY3VsYXRlIHNlZWsgaG92ZXIgcG9zaXRpb24gYXMgYXBwcm94IHZpZGVvIHNlY29uZHNcbiAgICAgIHRoaXMuc2Vla1RpbWUgPSB0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiAqICh0aGlzLnBsYXllci5lbGVtZW50cy5pbnB1dHMuc2Vlay52YWx1ZSAvIDEwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhbGN1bGF0ZSBzZWVrIGhvdmVyIHBvc2l0aW9uIGFzIGFwcHJveCB2aWRlbyBzZWNvbmRzXG4gICAgICBjb25zdCBjbGllbnRSZWN0ID0gdGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBwZXJjZW50YWdlID0gKDEwMCAvIGNsaWVudFJlY3Qud2lkdGgpICogKGV2ZW50LnBhZ2VYIC0gY2xpZW50UmVjdC5sZWZ0KTtcbiAgICAgIHRoaXMuc2Vla1RpbWUgPSB0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiAqIChwZXJjZW50YWdlIC8gMTAwKTtcblxuICAgICAgaWYgKHRoaXMuc2Vla1RpbWUgPCAwKSB7XG4gICAgICAgIC8vIFRoZSBtb3VzZW1vdmUgZmlyZXMgZm9yIDEwK3B4IG91dCB0byB0aGUgbGVmdFxuICAgICAgICB0aGlzLnNlZWtUaW1lID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2Vla1RpbWUgPiB0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiAtIDEpIHtcbiAgICAgICAgLy8gVG9vayAxIHNlY29uZCBvZmYgdGhlIGR1cmF0aW9uIGZvciBzYWZldHksIGJlY2F1c2UgZGlmZmVyZW50IHBsYXllcnMgY2FuIGRpc2FncmVlIG9uIHRoZSByZWFsIGR1cmF0aW9uIG9mIGEgdmlkZW9cbiAgICAgICAgdGhpcy5zZWVrVGltZSA9IHRoaXMucGxheWVyLm1lZGlhLmR1cmF0aW9uIC0gMTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tb3VzZVBvc1ggPSBldmVudC5wYWdlWDtcblxuICAgICAgLy8gU2V0IHRpbWUgdGV4dCBpbnNpZGUgaW1hZ2UgY29udGFpbmVyXG4gICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLnRpbWUuaW5uZXJUZXh0ID0gZm9ybWF0VGltZSh0aGlzLnNlZWtUaW1lKTtcbiAgICB9XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgc2hvdyBpbWFnZVxuICAgIHRoaXMuc2hvd0ltYWdlQXRDdXJyZW50VGltZSgpO1xuICB9XG5cbiAgZW5kTW92ZSgpIHtcbiAgICB0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKGZhbHNlLCB0cnVlKTtcbiAgfVxuXG4gIHN0YXJ0U2NydWJiaW5nKGV2ZW50KSB7XG4gICAgLy8gT25seSBhY3Qgb24gbGVmdCBtb3VzZSBidXR0b24gKDApLCBvciB0b3VjaCBkZXZpY2UgKGV2ZW50LmJ1dHRvbiBkb2VzIG5vdCBleGlzdCBvciBpcyBmYWxzZSlcbiAgICBpZiAoaXMubnVsbE9yVW5kZWZpbmVkKGV2ZW50LmJ1dHRvbikgfHwgZXZlbnQuYnV0dG9uID09PSBmYWxzZSB8fCBldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcblxuICAgICAgLy8gV2FpdCB1bnRpbCBtZWRpYSBoYXMgYSBkdXJhdGlvblxuICAgICAgaWYgKHRoaXMucGxheWVyLm1lZGlhLmR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2NydWJiaW5nQ29udGFpbmVyKHRydWUpO1xuICAgICAgICB0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKGZhbHNlLCB0cnVlKTtcblxuICAgICAgICAvLyBEb3dubG9hZCBhbmQgc2hvdyBpbWFnZVxuICAgICAgICB0aGlzLnNob3dJbWFnZUF0Q3VycmVudFRpbWUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBlbmRTY3J1YmJpbmcoKSB7XG4gICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcblxuICAgIC8vIEhpZGUgc2NydWJiaW5nIHByZXZpZXcuIEJ1dCB3YWl0IHVudGlsIHRoZSB2aWRlbyBoYXMgc3VjY2Vzc2Z1bGx5IHNlZWtlZCBiZWZvcmUgaGlkaW5nIHRoZSBzY3J1YmJpbmcgcHJldmlld1xuICAgIGlmIChNYXRoLmNlaWwodGhpcy5sYXN0VGltZSkgPT09IE1hdGguY2VpbCh0aGlzLnBsYXllci5tZWRpYS5jdXJyZW50VGltZSkpIHtcbiAgICAgIC8vIFRoZSB2aWRlbyB3YXMgYWxyZWFkeSBzZWVrZWQvbG9hZGVkIGF0IHRoZSBjaG9zZW4gdGltZSAtIGhpZGUgaW1tZWRpYXRlbHlcbiAgICAgIHRoaXMudG9nZ2xlU2NydWJiaW5nQ29udGFpbmVyKGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIHZpZGVvIGhhc24ndCBzZWVrZWQgeWV0LiBXYWl0IGZvciB0aGF0XG4gICAgICBvbmNlLmNhbGwodGhpcy5wbGF5ZXIsIHRoaXMucGxheWVyLm1lZGlhLCAndGltZXVwZGF0ZScsICgpID0+IHtcbiAgICAgICAgLy8gUmUtY2hlY2sgbW91c2Vkb3duIC0gd2UgbWlnaHQgaGF2ZSBhbHJlYWR5IHN0YXJ0ZWQgc2NydWJiaW5nIGFnYWluXG4gICAgICAgIGlmICghdGhpcy5tb3VzZURvd24pIHtcbiAgICAgICAgICB0aGlzLnRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lcihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBob29rcyBmb3IgUGx5ciBhbmQgd2luZG93IGV2ZW50c1xuICAgKi9cbiAgbGlzdGVuZXJzKCkge1xuICAgIC8vIEhpZGUgdGh1bWJuYWlsIHByZXZpZXcgLSBvbiBtb3VzZSBjbGljaywgbW91c2UgbGVhdmUgKGluIGxpc3RlbmVycy5qcyBmb3Igbm93KSwgYW5kIHZpZGVvIHBsYXkvc2Vlay4gQWxsIGZvdXIgYXJlIHJlcXVpcmVkLCBlLmcuLCBmb3IgYnVmZmVyaW5nXG4gICAgdGhpcy5wbGF5ZXIub24oJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKGZhbHNlLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGxheWVyLm9uKCdzZWVrZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGxheWVyLm9uKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgdGhpcy5sYXN0VGltZSA9IHRoaXMucGxheWVyLm1lZGlhLmN1cnJlbnRUaW1lO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBIVE1MIGVsZW1lbnRzIGZvciBpbWFnZSBjb250YWluZXJzXG4gICAqL1xuICByZW5kZXIoKSB7XG4gICAgLy8gQ3JlYXRlIEhUTUwgZWxlbWVudDogcGx5cl9fcHJldmlldy10aHVtYm5haWwtY29udGFpbmVyXG4gICAgdGhpcy5lbGVtZW50cy50aHVtYi5jb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzczogdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMudGh1bWJDb250YWluZXIsXG4gICAgfSk7XG5cbiAgICAvLyBXcmFwcGVyIGZvciB0aGUgaW1hZ2UgZm9yIHN0eWxpbmdcbiAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3M6IHRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLnByZXZpZXdUaHVtYm5haWxzLmltYWdlQ29udGFpbmVyLFxuICAgIH0pO1xuICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIpO1xuXG4gICAgLy8gQ3JlYXRlIEhUTUwgZWxlbWVudCwgcGFyZW50K3NwYW46IHRpbWUgdGV4dCAoZS5nLiwgMDE6MzI6MDApXG4gICAgY29uc3QgdGltZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzOiB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aW1lQ29udGFpbmVyLFxuICAgIH0pO1xuXG4gICAgdGhpcy5lbGVtZW50cy50aHVtYi50aW1lID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHt9LCAnMDA6MDAnKTtcbiAgICB0aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMudGh1bWIudGltZSk7XG5cbiAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aW1lQ29udGFpbmVyKTtcblxuICAgIC8vIEluamVjdCB0aGUgd2hvbGUgdGh1bWJcbiAgICBpZiAoaXMuZWxlbWVudCh0aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcykpIHtcbiAgICAgIHRoaXMucGxheWVyLmVsZW1lbnRzLnByb2dyZXNzLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgSFRNTCBlbGVtZW50OiBwbHlyX19wcmV2aWV3LXNjcnViYmluZy1jb250YWluZXJcbiAgICB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzczogdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMuc2NydWJiaW5nQ29udGFpbmVyLFxuICAgIH0pO1xuXG4gICAgdGhpcy5wbGF5ZXIuZWxlbWVudHMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50cy50aHVtYi5jb250YWluZXIpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgc2hvd0ltYWdlQXRDdXJyZW50VGltZSgpIHtcbiAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcbiAgICAgIHRoaXMuc2V0U2NydWJiaW5nQ29udGFpbmVyU2l6ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFRodW1iQ29udGFpbmVyU2l6ZUFuZFBvcygpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGRlc2lyZWQgdGh1bWJuYWlsIGluZGV4XG4gICAgLy8gVE9ETzogSGFuZGxlIGEgdmlkZW8gbG9uZ2VyIHRoYW4gdGhlIHRodW1icyB3aGVyZSB0aHVtYk51bSBpcyBudWxsXG4gICAgY29uc3QgdGh1bWJOdW0gPSB0aGlzLnRodW1ibmFpbHNbMF0uZnJhbWVzLmZpbmRJbmRleChcbiAgICAgIGZyYW1lID0+IHRoaXMuc2Vla1RpbWUgPj0gZnJhbWUuc3RhcnRUaW1lICYmIHRoaXMuc2Vla1RpbWUgPD0gZnJhbWUuZW5kVGltZSxcbiAgICApO1xuICAgIGNvbnN0IGhhc1RodW1iID0gdGh1bWJOdW0gPj0gMDtcbiAgICBsZXQgcXVhbGl0eUluZGV4ID0gMDtcblxuICAgIC8vIFNob3cgdGhlIHRodW1iIGNvbnRhaW5lciBpZiB3ZSdyZSBub3Qgc2NydWJiaW5nXG4gICAgaWYgKCF0aGlzLm1vdXNlRG93bikge1xuICAgICAgdGhpcy50b2dnbGVUaHVtYkNvbnRhaW5lcihoYXNUaHVtYik7XG4gICAgfVxuXG4gICAgLy8gTm8gbWF0Y2hpbmcgdGh1bWIgZm91bmRcbiAgICBpZiAoIWhhc1RodW1iKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlJ3ZlIGFscmVhZHkgZG93bmxvYWRlZCBoaWdoZXIgcXVhbGl0eSB2ZXJzaW9ucyBvZiB0aGlzIGltYWdlXG4gICAgdGhpcy50aHVtYm5haWxzLmZvckVhY2goKHRodW1ibmFpbCwgaW5kZXgpID0+IHtcbiAgICAgIGlmICh0aGlzLmxvYWRlZEltYWdlcy5pbmNsdWRlcyh0aHVtYm5haWwuZnJhbWVzW3RodW1iTnVtXS50ZXh0KSkge1xuICAgICAgICBxdWFsaXR5SW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE9ubHkgcHJvY2VlZCBpZiBlaXRoZXIgdGh1bWJudW0gb3IgdGh1bWJmaWxlbmFtZSBoYXMgY2hhbmdlZFxuICAgIGlmICh0aHVtYk51bSAhPT0gdGhpcy5zaG93aW5nVGh1bWIpIHtcbiAgICAgIHRoaXMuc2hvd2luZ1RodW1iID0gdGh1bWJOdW07XG4gICAgICB0aGlzLmxvYWRJbWFnZShxdWFsaXR5SW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNob3cgdGhlIGltYWdlIHRoYXQncyBjdXJyZW50bHkgc3BlY2lmaWVkIGluIHRoaXMuc2hvd2luZ1RodW1iXG4gIGxvYWRJbWFnZShxdWFsaXR5SW5kZXggPSAwKSB7XG4gICAgY29uc3QgdGh1bWJOdW0gPSB0aGlzLnNob3dpbmdUaHVtYjtcbiAgICBjb25zdCB0aHVtYm5haWwgPSB0aGlzLnRodW1ibmFpbHNbcXVhbGl0eUluZGV4XTtcbiAgICBjb25zdCB7IHVybFByZWZpeCB9ID0gdGh1bWJuYWlsO1xuICAgIGNvbnN0IGZyYW1lID0gdGh1bWJuYWlsLmZyYW1lc1t0aHVtYk51bV07XG4gICAgY29uc3QgdGh1bWJGaWxlbmFtZSA9IHRodW1ibmFpbC5mcmFtZXNbdGh1bWJOdW1dLnRleHQ7XG4gICAgY29uc3QgdGh1bWJVcmwgPSB1cmxQcmVmaXggKyB0aHVtYkZpbGVuYW1lO1xuXG4gICAgaWYgKCF0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQgfHwgdGhpcy5jdXJyZW50SW1hZ2VFbGVtZW50LmRhdGFzZXQuZmlsZW5hbWUgIT09IHRodW1iRmlsZW5hbWUpIHtcbiAgICAgIC8vIElmIHdlJ3JlIGFscmVhZHkgbG9hZGluZyBhIHByZXZpb3VzIGltYWdlLCByZW1vdmUgaXRzIG9ubG9hZCBoYW5kbGVyIC0gd2UgZG9uJ3Qgd2FudCBpdCB0byBsb2FkIGFmdGVyIHRoaXMgb25lXG4gICAgICAvLyBPbmx5IGRvIHRoaXMgaWYgbm90IHVzaW5nIHNwcml0ZXMuIFdpdGhvdXQgc3ByaXRlcyB3ZSByZWFsbHkgd2FudCB0byBzaG93IGFzIG1hbnkgaW1hZ2VzIGFzIHBvc3NpYmxlLCBhcyBhIGJlc3QtZWZmb3J0XG4gICAgICBpZiAodGhpcy5sb2FkaW5nSW1hZ2UgJiYgdGhpcy51c2luZ1Nwcml0ZXMpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nSW1hZ2Uub25sb2FkID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gV2UncmUgYnVpbGRpbmcgYW5kIGFkZGluZyBhIG5ldyBpbWFnZS4gSW4gb3RoZXIgaW1wbGVtZW50YXRpb25zIG9mIHNpbWlsYXIgZnVuY3Rpb25hbGl0eSAoWW91VHViZSksIGJhY2tncm91bmQgaW1hZ2VcbiAgICAgIC8vIGlzIGluc3RlYWQgdXNlZC4gQnV0IHRoaXMgY2F1c2VzIGlzc3VlcyB3aXRoIGxhcmdlciBpbWFnZXMgaW4gRmlyZWZveCBhbmQgU2FmYXJpIC0gc3dpdGNoaW5nIGJldHdlZW4gYmFja2dyb3VuZFxuICAgICAgLy8gaW1hZ2VzIGNhdXNlcyBhIGZsaWNrZXIuIFB1dHRpbmcgYSBuZXcgaW1hZ2Ugb3ZlciB0aGUgdG9wIGRvZXMgbm90XG4gICAgICBjb25zdCBwcmV2aWV3SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIHByZXZpZXdJbWFnZS5zcmMgPSB0aHVtYlVybDtcbiAgICAgIHByZXZpZXdJbWFnZS5kYXRhc2V0LmluZGV4ID0gdGh1bWJOdW07XG4gICAgICBwcmV2aWV3SW1hZ2UuZGF0YXNldC5maWxlbmFtZSA9IHRodW1iRmlsZW5hbWU7XG4gICAgICB0aGlzLnNob3dpbmdUaHVtYkZpbGVuYW1lID0gdGh1bWJGaWxlbmFtZTtcblxuICAgICAgdGhpcy5wbGF5ZXIuZGVidWcubG9nKGBMb2FkaW5nIGltYWdlOiAke3RodW1iVXJsfWApO1xuXG4gICAgICAvLyBGb3Igc29tZSByZWFzb24sIHBhc3NpbmcgdGhlIG5hbWVkIGZ1bmN0aW9uIGRpcmVjdGx5IGNhdXNlcyBpdCB0byBleGVjdXRlIGltbWVkaWF0ZWx5LiBTbyBJJ3ZlIHdyYXBwZWQgaXQgaW4gYW4gYW5vbnltb3VzIGZ1bmN0aW9uLi4uXG4gICAgICBwcmV2aWV3SW1hZ2Uub25sb2FkID0gKCkgPT4gdGhpcy5zaG93SW1hZ2UocHJldmlld0ltYWdlLCBmcmFtZSwgcXVhbGl0eUluZGV4LCB0aHVtYk51bSwgdGh1bWJGaWxlbmFtZSwgdHJ1ZSk7XG4gICAgICB0aGlzLmxvYWRpbmdJbWFnZSA9IHByZXZpZXdJbWFnZTtcbiAgICAgIHRoaXMucmVtb3ZlT2xkSW1hZ2VzKHByZXZpZXdJbWFnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZXhpc3RpbmcgaW1hZ2VcbiAgICAgIHRoaXMuc2hvd0ltYWdlKHRoaXMuY3VycmVudEltYWdlRWxlbWVudCwgZnJhbWUsIHF1YWxpdHlJbmRleCwgdGh1bWJOdW0sIHRodW1iRmlsZW5hbWUsIGZhbHNlKTtcbiAgICAgIHRoaXMuY3VycmVudEltYWdlRWxlbWVudC5kYXRhc2V0LmluZGV4ID0gdGh1bWJOdW07XG4gICAgICB0aGlzLnJlbW92ZU9sZEltYWdlcyh0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHNob3dJbWFnZShwcmV2aWV3SW1hZ2UsIGZyYW1lLCBxdWFsaXR5SW5kZXgsIHRodW1iTnVtLCB0aHVtYkZpbGVuYW1lLCBuZXdJbWFnZSA9IHRydWUpIHtcbiAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coXG4gICAgICBgU2hvd2luZyB0aHVtYjogJHt0aHVtYkZpbGVuYW1lfS4gbnVtOiAke3RodW1iTnVtfS4gcXVhbDogJHtxdWFsaXR5SW5kZXh9LiBuZXdpbWc6ICR7bmV3SW1hZ2V9YCxcbiAgICApO1xuICAgIHRoaXMuc2V0SW1hZ2VTaXplQW5kT2Zmc2V0KHByZXZpZXdJbWFnZSwgZnJhbWUpO1xuXG4gICAgaWYgKG5ld0ltYWdlKSB7XG4gICAgICB0aGlzLmN1cnJlbnRJbWFnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmV2aWV3SW1hZ2UpO1xuICAgICAgdGhpcy5jdXJyZW50SW1hZ2VFbGVtZW50ID0gcHJldmlld0ltYWdlO1xuXG4gICAgICBpZiAoIXRoaXMubG9hZGVkSW1hZ2VzLmluY2x1ZGVzKHRodW1iRmlsZW5hbWUpKSB7XG4gICAgICAgIHRoaXMubG9hZGVkSW1hZ2VzLnB1c2godGh1bWJGaWxlbmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJlbG9hZCBpbWFnZXMgYmVmb3JlIGFuZCBhZnRlciB0aGUgY3VycmVudCBvbmVcbiAgICAvLyBTaG93IGhpZ2hlciBxdWFsaXR5IG9mIHRoZSBzYW1lIGZyYW1lXG4gICAgLy8gRWFjaCBzdGVwIGhlcmUgaGFzIGEgc2hvcnQgdGltZSBkZWxheSwgYW5kIG9ubHkgY29udGludWVzIGlmIHN0aWxsIGhvdmVyaW5nL3NlZWtpbmcgdGhlIHNhbWUgc3BvdC4gVGhpcyBpcyB0byBwcm90ZWN0IHNsb3cgY29ubmVjdGlvbnMgZnJvbSBvdmVybG9hZGluZ1xuICAgIHRoaXMucHJlbG9hZE5lYXJieSh0aHVtYk51bSwgdHJ1ZSlcbiAgICAgIC50aGVuKHRoaXMucHJlbG9hZE5lYXJieSh0aHVtYk51bSwgZmFsc2UpKVxuICAgICAgLnRoZW4odGhpcy5nZXRIaWdoZXJRdWFsaXR5KHF1YWxpdHlJbmRleCwgcHJldmlld0ltYWdlLCBmcmFtZSwgdGh1bWJGaWxlbmFtZSkpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFsbCBwcmV2aWV3IGltYWdlcyB0aGF0IGFyZW4ndCB0aGUgZGVzaWduYXRlZCBjdXJyZW50IGltYWdlXG4gIHJlbW92ZU9sZEltYWdlcyhjdXJyZW50SW1hZ2UpIHtcbiAgICAvLyBHZXQgYSBsaXN0IG9mIGFsbCBpbWFnZXMsIGNvbnZlcnQgaXQgZnJvbSBhIERPTSBsaXN0IHRvIGFuIGFycmF5XG4gICAgQXJyYXkuZnJvbSh0aGlzLmN1cnJlbnRJbWFnZUNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChpbWFnZSA9PiB7XG4gICAgICBpZiAoaW1hZ2UudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaW1nJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlbW92ZURlbGF5ID0gdGhpcy51c2luZ1Nwcml0ZXMgPyA1MDAgOiAxMDAwO1xuXG4gICAgICBpZiAoaW1hZ2UuZGF0YXNldC5pbmRleCAhPT0gY3VycmVudEltYWdlLmRhdGFzZXQuaW5kZXggJiYgIWltYWdlLmRhdGFzZXQuZGVsZXRpbmcpIHtcbiAgICAgICAgLy8gV2FpdCAyMDBtcywgYXMgdGhlIG5ldyBpbWFnZSBjYW4gdGFrZSBzb21lIHRpbWUgdG8gc2hvdyBvbiBjZXJ0YWluIGJyb3dzZXJzIChldmVuIHRob3VnaCBpdCB3YXMgZG93bmxvYWRlZCBiZWZvcmUgc2hvd2luZykuIFRoaXMgd2lsbCBwcmV2ZW50IGZsaWNrZXIsIGFuZCBzaG93IHNvbWUgZ2VuZXJvc2l0eSB0b3dhcmRzIHNsb3dlciBjbGllbnRzXG4gICAgICAgIC8vIEZpcnN0IHNldCBhdHRyaWJ1dGUgJ2RlbGV0aW5nJyB0byBwcmV2ZW50IG11bHRpLWhhbmRsaW5nIG9mIHRoaXMgb24gcmVwZWF0IGZpcmluZyBvZiB0aGlzIGZ1bmN0aW9uXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBpbWFnZS5kYXRhc2V0LmRlbGV0aW5nID0gdHJ1ZTtcblxuICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSBzZXQgYmVmb3JlIHRoZSB0aW1lb3V0IC0gdG8gcHJldmVudCBpc3N1ZXMgc3dpdGNoaW5nIGJldHdlZW4gaG92ZXIgYW5kIHNjcnViXG4gICAgICAgIGNvbnN0IHsgY3VycmVudEltYWdlQ29udGFpbmVyIH0gPSB0aGlzO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGN1cnJlbnRJbWFnZUNvbnRhaW5lci5yZW1vdmVDaGlsZChpbWFnZSk7XG4gICAgICAgICAgdGhpcy5wbGF5ZXIuZGVidWcubG9nKGBSZW1vdmluZyB0aHVtYjogJHtpbWFnZS5kYXRhc2V0LmZpbGVuYW1lfWApO1xuICAgICAgICB9LCByZW1vdmVEZWxheSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBQcmVsb2FkIGltYWdlcyBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjdXJyZW50IG9uZS4gT25seSBpZiB0aGUgdXNlciBpcyBzdGlsbCBob3ZlcmluZy9zZWVraW5nIHRoZSBzYW1lIGZyYW1lXG4gIC8vIFRoaXMgd2lsbCBvbmx5IHByZWxvYWQgdGhlIGxvd2VzdCBxdWFsaXR5XG4gIHByZWxvYWROZWFyYnkodGh1bWJOdW0sIGZvcndhcmQgPSB0cnVlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFRodW1iRmlsZW5hbWUgPSB0aGlzLnRodW1ibmFpbHNbMF0uZnJhbWVzW3RodW1iTnVtXS50ZXh0O1xuXG4gICAgICAgIGlmICh0aGlzLnNob3dpbmdUaHVtYkZpbGVuYW1lID09PSBvbGRUaHVtYkZpbGVuYW1lKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgbmVhcmVzdCB0aHVtYnMgd2l0aCBkaWZmZXJlbnQgZmlsZW5hbWVzLiBTb21ldGltZXMgaXQnbGwgYmUgdGhlIG5leHQgaW5kZXgsIGJ1dCBpbiB0aGUgY2FzZSBvZiBzcHJpdGVzLCBpdCBtaWdodCBiZSAxMDArIGF3YXlcbiAgICAgICAgICBsZXQgdGh1bWJuYWlsc0Nsb25lO1xuICAgICAgICAgIGlmIChmb3J3YXJkKSB7XG4gICAgICAgICAgICB0aHVtYm5haWxzQ2xvbmUgPSB0aGlzLnRodW1ibmFpbHNbMF0uZnJhbWVzLnNsaWNlKHRodW1iTnVtKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGh1bWJuYWlsc0Nsb25lID0gdGhpcy50aHVtYm5haWxzWzBdLmZyYW1lcy5zbGljZSgwLCB0aHVtYk51bSkucmV2ZXJzZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBmb3VuZE9uZSA9IGZhbHNlO1xuXG4gICAgICAgICAgdGh1bWJuYWlsc0Nsb25lLmZvckVhY2goZnJhbWUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3VGh1bWJGaWxlbmFtZSA9IGZyYW1lLnRleHQ7XG5cbiAgICAgICAgICAgIGlmIChuZXdUaHVtYkZpbGVuYW1lICE9PSBvbGRUaHVtYkZpbGVuYW1lKSB7XG4gICAgICAgICAgICAgIC8vIEZvdW5kIG9uZSB3aXRoIGEgZGlmZmVyZW50IGZpbGVuYW1lLiBNYWtlIHN1cmUgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBsb2FkZWQgb24gdGhpcyBwYWdlIHZpc2l0XG4gICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkZWRJbWFnZXMuaW5jbHVkZXMobmV3VGh1bWJGaWxlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmb3VuZE9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZGVidWcubG9nKGBQcmVsb2FkaW5nIHRodW1iIGZpbGVuYW1lOiAke25ld1RodW1iRmlsZW5hbWV9YCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IHVybFByZWZpeCB9ID0gdGhpcy50aHVtYm5haWxzWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRodW1iVVJMID0gdXJsUHJlZml4ICsgbmV3VGh1bWJGaWxlbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aWV3SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gdGh1bWJVUkw7XG4gICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmRlYnVnLmxvZyhgUHJlbG9hZGVkIHRodW1iIGZpbGVuYW1lOiAke25ld1RodW1iRmlsZW5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkSW1hZ2VzLmluY2x1ZGVzKG5ld1RodW1iRmlsZW5hbWUpKSB0aGlzLmxvYWRlZEltYWdlcy5wdXNoKG5ld1RodW1iRmlsZW5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCByZXNvbHZlIHVudGlsIHRoZSB0aHVtYiBpcyBsb2FkZWRcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm9uZSB0byBwcmVsb2FkIHRoZW4gd2Ugd2FudCB0byByZXNvbHZlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgaWYgKCFmb3VuZE9uZSkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgMzAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIElmIHVzZXIgaGFzIGJlZW4gaG92ZXJpbmcgY3VycmVudCBpbWFnZSBmb3IgaGFsZiBhIHNlY29uZCwgbG9vayBmb3IgYSBoaWdoZXIgcXVhbGl0eSBvbmVcbiAgZ2V0SGlnaGVyUXVhbGl0eShjdXJyZW50UXVhbGl0eUluZGV4LCBwcmV2aWV3SW1hZ2UsIGZyYW1lLCB0aHVtYkZpbGVuYW1lKSB7XG4gICAgaWYgKGN1cnJlbnRRdWFsaXR5SW5kZXggPCB0aGlzLnRodW1ibmFpbHMubGVuZ3RoIC0gMSkge1xuICAgICAgLy8gT25seSB1c2UgdGhlIGhpZ2hlciBxdWFsaXR5IHZlcnNpb24gaWYgaXQncyBnb2luZyB0byBsb29rIGFueSBiZXR0ZXIgLSBpZiB0aGUgY3VycmVudCB0aHVtYiBpcyBvZiBhIGxvd2VyIHBpeGVsIGRlbnNpdHkgdGhhbiB0aGUgdGh1bWJuYWlsIGNvbnRhaW5lclxuICAgICAgbGV0IHByZXZpZXdJbWFnZUhlaWdodCA9IHByZXZpZXdJbWFnZS5uYXR1cmFsSGVpZ2h0O1xuXG4gICAgICBpZiAodGhpcy51c2luZ1Nwcml0ZXMpIHtcbiAgICAgICAgcHJldmlld0ltYWdlSGVpZ2h0ID0gZnJhbWUuaDtcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZpZXdJbWFnZUhlaWdodCA8IHRoaXMudGh1bWJDb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgLy8gUmVjdXJzZSBiYWNrIHRvIHRoZSBsb2FkSW1hZ2UgZnVuY3Rpb24gLSBzaG93IGEgaGlnaGVyIHF1YWxpdHkgb25lLCBidXQgb25seSBpZiB0aGUgdmlld2VyIGlzIG9uIHRoaXMgZnJhbWUgZm9yIGEgd2hpbGVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBtb3VzZSBoYXNuJ3QgYWxyZWFkeSBtb3ZlZCBvbiBhbmQgc3RhcnRlZCBob3ZlcmluZyBhdCBhbm90aGVyIGltYWdlXG4gICAgICAgICAgaWYgKHRoaXMuc2hvd2luZ1RodW1iRmlsZW5hbWUgPT09IHRodW1iRmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmRlYnVnLmxvZyhgU2hvd2luZyBoaWdoZXIgcXVhbGl0eSB0aHVtYiBmb3I6ICR7dGh1bWJGaWxlbmFtZX1gKTtcbiAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKGN1cnJlbnRRdWFsaXR5SW5kZXggKyAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGN1cnJlbnRJbWFnZUNvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXI7XG4gIH1cblxuICBnZXQgdXNpbmdTcHJpdGVzKCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnRodW1ibmFpbHNbMF0uZnJhbWVzWzBdKS5pbmNsdWRlcygndycpO1xuICB9XG5cbiAgZ2V0IHRodW1iQXNwZWN0UmF0aW8oKSB7XG4gICAgaWYgKHRoaXMudXNpbmdTcHJpdGVzKSB7XG4gICAgICByZXR1cm4gdGhpcy50aHVtYm5haWxzWzBdLmZyYW1lc1swXS53IC8gdGhpcy50aHVtYm5haWxzWzBdLmZyYW1lc1swXS5oO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRodW1ibmFpbHNbMF0ud2lkdGggLyB0aGlzLnRodW1ibmFpbHNbMF0uaGVpZ2h0O1xuICB9XG5cbiAgZ2V0IHRodW1iQ29udGFpbmVySGVpZ2h0KCkge1xuICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xuICAgICAgY29uc3QgeyBoZWlnaHQgfSA9IGZpdFJhdGlvKHRoaXMudGh1bWJBc3BlY3RSYXRpbywge1xuICAgICAgICB3aWR0aDogdGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50V2lkdGgsXG4gICAgICAgIGhlaWdodDogdGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50SGVpZ2h0LFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIElmIGNzcyBpcyB1c2VkIHRoaXMgbmVlZHMgdG8gcmV0dXJuIHRoZSBjc3MgaGVpZ2h0IGZvciBzcHJpdGVzIHRvIHdvcmsgKHNlZSBzZXRJbWFnZVNpemVBbmRPZmZzZXQpXG4gICAgaWYgKHRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50V2lkdGggLyB0aGlzLnRodW1iQXNwZWN0UmF0aW8gLyA0KTtcbiAgfVxuXG4gIGdldCBjdXJyZW50SW1hZ2VFbGVtZW50KCkge1xuICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNjcnViYmluZ0ltYWdlRWxlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50O1xuICB9XG5cbiAgc2V0IGN1cnJlbnRJbWFnZUVsZW1lbnQoZWxlbWVudCkge1xuICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xuICAgICAgdGhpcy5jdXJyZW50U2NydWJiaW5nSW1hZ2VFbGVtZW50ID0gZWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVUaHVtYkNvbnRhaW5lcih0b2dnbGUgPSBmYWxzZSwgY2xlYXJTaG93aW5nID0gZmFsc2UpIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aHVtYkNvbnRhaW5lclNob3duO1xuICAgIHRoaXMuZWxlbWVudHMudGh1bWIuY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCB0b2dnbGUpO1xuXG4gICAgaWYgKCF0b2dnbGUgJiYgY2xlYXJTaG93aW5nKSB7XG4gICAgICB0aGlzLnNob3dpbmdUaHVtYiA9IG51bGw7XG4gICAgICB0aGlzLnNob3dpbmdUaHVtYkZpbGVuYW1lID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVTY3J1YmJpbmdDb250YWluZXIodG9nZ2xlID0gZmFsc2UpIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy5zY3J1YmJpbmdDb250YWluZXJTaG93bjtcbiAgICB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIHRvZ2dsZSk7XG5cbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgdGhpcy5zaG93aW5nVGh1bWIgPSBudWxsO1xuICAgICAgdGhpcy5zaG93aW5nVGh1bWJGaWxlbmFtZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZGV0ZXJtaW5lQ29udGFpbmVyQXV0b1NpemluZygpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQgPiAyMCB8fCB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudFdpZHRoID4gMjApIHtcbiAgICAgIC8vIFRoaXMgd2lsbCBwcmV2ZW50IGF1dG8gc2l6aW5nIGluIHRoaXMuc2V0VGh1bWJDb250YWluZXJTaXplQW5kUG9zKClcbiAgICAgIHRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXQgdGhlIHNpemUgdG8gYmUgYWJvdXQgYSBxdWFydGVyIG9mIHRoZSBzaXplIG9mIHZpZGVvLiBVbmxlc3Mgb3B0aW9uIGR5bmFtaWNTaXplID09PSBmYWxzZSwgaW4gd2hpY2ggY2FzZSBpdCBuZWVkcyB0byBiZSBzZXQgaW4gQ1NTXG4gIHNldFRodW1iQ29udGFpbmVyU2l6ZUFuZFBvcygpIHtcbiAgICBpZiAoIXRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTKSB7XG4gICAgICBjb25zdCB0aHVtYldpZHRoID0gTWF0aC5mbG9vcih0aGlzLnRodW1iQ29udGFpbmVySGVpZ2h0ICogdGhpcy50aHVtYkFzcGVjdFJhdGlvKTtcbiAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy50aHVtYkNvbnRhaW5lckhlaWdodH1weGA7XG4gICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7dGh1bWJXaWR0aH1weGA7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50SGVpZ2h0ID4gMjAgJiZcbiAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuY2xpZW50V2lkdGggPCAyMFxuICAgICkge1xuICAgICAgY29uc3QgdGh1bWJXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQgKiB0aGlzLnRodW1iQXNwZWN0UmF0aW8pO1xuICAgICAgdGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke3RodW1iV2lkdGh9cHhgO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudEhlaWdodCA8IDIwICYmXG4gICAgICB0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudFdpZHRoID4gMjBcbiAgICApIHtcbiAgICAgIGNvbnN0IHRodW1iSGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLmNsaWVudFdpZHRoIC8gdGhpcy50aHVtYkFzcGVjdFJhdGlvKTtcbiAgICAgIHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGh1bWJIZWlnaHR9cHhgO1xuICAgIH1cblxuICAgIHRoaXMuc2V0VGh1bWJDb250YWluZXJQb3MoKTtcbiAgfVxuXG4gIHNldFRodW1iQ29udGFpbmVyUG9zKCkge1xuICAgIGNvbnN0IHNlZWtiYXJSZWN0ID0gdGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgcGx5clJlY3QgPSB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHRoaXMuZWxlbWVudHMudGh1bWI7XG4gICAgLy8gRmluZCB0aGUgbG93ZXN0IGFuZCBoaWdoZXN0IGRlc2lyZWQgbGVmdC1wb3NpdGlvbiwgc28gd2UgZG9uJ3Qgc2xpZGUgb3V0IHRoZSBzaWRlIG9mIHRoZSB2aWRlbyBjb250YWluZXJcbiAgICBjb25zdCBtaW5WYWwgPSBwbHlyUmVjdC5sZWZ0IC0gc2Vla2JhclJlY3QubGVmdCArIDEwO1xuICAgIGNvbnN0IG1heFZhbCA9IHBseXJSZWN0LnJpZ2h0IC0gc2Vla2JhclJlY3QubGVmdCAtIGNvbnRhaW5lci5jbGllbnRXaWR0aCAtIDEwO1xuICAgIC8vIFNldCBwcmV2aWV3IGNvbnRhaW5lciBwb3NpdGlvbiB0bzogbW91c2Vwb3MsIG1pbnVzIHNlZWtiYXIubGVmdCwgbWludXMgaGFsZiBvZiBwcmV2aWV3Q29udGFpbmVyLmNsaWVudFdpZHRoXG4gICAgbGV0IHByZXZpZXdQb3MgPSB0aGlzLm1vdXNlUG9zWCAtIHNlZWtiYXJSZWN0LmxlZnQgLSBjb250YWluZXIuY2xpZW50V2lkdGggLyAyO1xuXG4gICAgaWYgKHByZXZpZXdQb3MgPCBtaW5WYWwpIHtcbiAgICAgIHByZXZpZXdQb3MgPSBtaW5WYWw7XG4gICAgfVxuXG4gICAgaWYgKHByZXZpZXdQb3MgPiBtYXhWYWwpIHtcbiAgICAgIHByZXZpZXdQb3MgPSBtYXhWYWw7XG4gICAgfVxuXG4gICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtwcmV2aWV3UG9zfXB4YDtcbiAgfVxuXG4gIC8vIENhbid0IHVzZSAxMDAlIHdpZHRoLCBpbiBjYXNlIHRoZSB2aWRlbyBpcyBhIGRpZmZlcmVudCBhc3BlY3QgcmF0aW8gdG8gdGhlIHZpZGVvIGNvbnRhaW5lclxuICBzZXRTY3J1YmJpbmdDb250YWluZXJTaXplKCkge1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZml0UmF0aW8odGhpcy50aHVtYkFzcGVjdFJhdGlvLCB7XG4gICAgICB3aWR0aDogdGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50V2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMucGxheWVyLm1lZGlhLmNsaWVudEhlaWdodCxcbiAgICB9KTtcbiAgICB0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgdGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gIH1cblxuICAvLyBTcHJpdGVzIG5lZWQgdG8gYmUgb2Zmc2V0IHRvIHRoZSBjb3JyZWN0IGxvY2F0aW9uXG4gIHNldEltYWdlU2l6ZUFuZE9mZnNldChwcmV2aWV3SW1hZ2UsIGZyYW1lKSB7XG4gICAgaWYgKCF0aGlzLnVzaW5nU3ByaXRlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgZGlmZmVyZW5jZSBiZXR3ZWVuIGhlaWdodCBhbmQgcHJldmlldyBjb250YWluZXIgaGVpZ2h0XG4gICAgY29uc3QgbXVsdGlwbGllciA9IHRoaXMudGh1bWJDb250YWluZXJIZWlnaHQgLyBmcmFtZS5oO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcHJldmlld0ltYWdlLnN0eWxlLmhlaWdodCA9IGAke3ByZXZpZXdJbWFnZS5uYXR1cmFsSGVpZ2h0ICogbXVsdGlwbGllcn1weGA7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcHJldmlld0ltYWdlLnN0eWxlLndpZHRoID0gYCR7cHJldmlld0ltYWdlLm5hdHVyYWxXaWR0aCAqIG11bHRpcGxpZXJ9cHhgO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHByZXZpZXdJbWFnZS5zdHlsZS5sZWZ0ID0gYC0ke2ZyYW1lLnggKiBtdWx0aXBsaWVyfXB4YDtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUudG9wID0gYC0ke2ZyYW1lLnkgKiBtdWx0aXBsaWVyfXB4YDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmV2aWV3VGh1bWJuYWlscztcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQbHlyIE1lZGlhXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgaHRtbDUgZnJvbSAnLi9odG1sNSc7XG5pbXBvcnQgdmltZW8gZnJvbSAnLi9wbHVnaW5zL3ZpbWVvJztcbmltcG9ydCB5b3V0dWJlIGZyb20gJy4vcGx1Z2lucy95b3V0dWJlJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHRvZ2dsZUNsYXNzLCB3cmFwIH0gZnJvbSAnLi91dGlscy9lbGVtZW50cyc7XG5cbmNvbnN0IG1lZGlhID0ge1xuICAvLyBTZXR1cCBtZWRpYVxuICBzZXR1cCgpIHtcbiAgICAvLyBJZiB0aGVyZSdzIG5vIG1lZGlhLCBiYWlsXG4gICAgaWYgKCF0aGlzLm1lZGlhKSB7XG4gICAgICB0aGlzLmRlYnVnLndhcm4oJ05vIG1lZGlhIGVsZW1lbnQgZm91bmQhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWRkIHR5cGUgY2xhc3NcbiAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy50eXBlLnJlcGxhY2UoJ3swfScsIHRoaXMudHlwZSksIHRydWUpO1xuXG4gICAgLy8gQWRkIHByb3ZpZGVyIGNsYXNzXG4gICAgdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucHJvdmlkZXIucmVwbGFjZSgnezB9JywgdGhpcy5wcm92aWRlciksIHRydWUpO1xuXG4gICAgLy8gQWRkIHZpZGVvIGNsYXNzIGZvciBlbWJlZHNcbiAgICAvLyBUaGlzIHdpbGwgcmVxdWlyZSBjaGFuZ2VzIGlmIGF1ZGlvIGVtYmVkcyBhcmUgYWRkZWRcbiAgICBpZiAodGhpcy5pc0VtYmVkKSB7XG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy50eXBlLnJlcGxhY2UoJ3swfScsICd2aWRlbycpLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBJbmplY3QgdGhlIHBsYXllciB3cmFwcGVyXG4gICAgaWYgKHRoaXMuaXNWaWRlbykge1xuICAgICAgLy8gQ3JlYXRlIHRoZSB3cmFwcGVyIGRpdlxuICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICBjbGFzczogdGhpcy5jb25maWcuY2xhc3NOYW1lcy52aWRlbyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBXcmFwIHRoZSB2aWRlbyBpbiBhIGNvbnRhaW5lclxuICAgICAgd3JhcCh0aGlzLm1lZGlhLCB0aGlzLmVsZW1lbnRzLndyYXBwZXIpO1xuXG4gICAgICAvLyBQb3N0ZXIgaW1hZ2UgY29udGFpbmVyXG4gICAgICB0aGlzLmVsZW1lbnRzLnBvc3RlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucG9zdGVyLFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnBvc3Rlcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgaHRtbDUuc2V0dXAuY2FsbCh0aGlzKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNZb3VUdWJlKSB7XG4gICAgICB5b3V0dWJlLnNldHVwLmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzVmltZW8pIHtcbiAgICAgIHZpbWVvLnNldHVwLmNhbGwodGhpcyk7XG4gICAgfVxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgbWVkaWE7XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQWR2ZXJ0aXNlbWVudCBwbHVnaW4gdXNpbmcgR29vZ2xlIElNQSBIVE1MNSBTREtcbi8vIENyZWF0ZSBhbiBhY2NvdW50IHdpdGggb3VyIGFkIHBhcnRuZXIsIHZpIGhlcmU6XG4vLyBodHRwczovL3d3dy52aS5haS9wdWJsaXNoZXItdmlkZW8tbW9uZXRpemF0aW9uL1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyogZ2xvYmFsIGdvb2dsZSAqL1xuXG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAnLi4vdXRpbHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgdHJpZ2dlckV2ZW50IH0gZnJvbSAnLi4vdXRpbHMvZXZlbnRzJztcbmltcG9ydCBpMThuIGZyb20gJy4uL3V0aWxzL2kxOG4nO1xuaW1wb3J0IGlzIGZyb20gJy4uL3V0aWxzL2lzJztcbmltcG9ydCBsb2FkU2NyaXB0IGZyb20gJy4uL3V0aWxzL2xvYWQtc2NyaXB0JztcbmltcG9ydCB7IHNpbGVuY2VQcm9taXNlIH0gZnJvbSAnLi4vdXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgeyBmb3JtYXRUaW1lIH0gZnJvbSAnLi4vdXRpbHMvdGltZSc7XG5pbXBvcnQgeyBidWlsZFVybFBhcmFtcyB9IGZyb20gJy4uL3V0aWxzL3VybHMnO1xuXG5jb25zdCBkZXN0cm95ID0gaW5zdGFuY2UgPT4ge1xuICAvLyBEZXN0cm95IG91ciBhZHNNYW5hZ2VyXG4gIGlmIChpbnN0YW5jZS5tYW5hZ2VyKSB7XG4gICAgaW5zdGFuY2UubWFuYWdlci5kZXN0cm95KCk7XG4gIH1cblxuICAvLyBEZXN0cm95IG91ciBhZHNNYW5hZ2VyXG4gIGlmIChpbnN0YW5jZS5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyKSB7XG4gICAgaW5zdGFuY2UuZWxlbWVudHMuZGlzcGxheUNvbnRhaW5lci5kZXN0cm95KCk7XG4gIH1cblxuICBpbnN0YW5jZS5lbGVtZW50cy5jb250YWluZXIucmVtb3ZlKCk7XG59O1xuXG5jbGFzcyBBZHMge1xuICAvKipcbiAgICogQWRzIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWVyXG4gICAqIEByZXR1cm4ge0Fkc31cbiAgICovXG4gIGNvbnN0cnVjdG9yKHBsYXllcikge1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMuY29uZmlnID0gcGxheWVyLmNvbmZpZy5hZHM7XG4gICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHRoaXMuZWxlbWVudHMgPSB7XG4gICAgICBjb250YWluZXI6IG51bGwsXG4gICAgICBkaXNwbGF5Q29udGFpbmVyOiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcbiAgICB0aGlzLmxvYWRlciA9IG51bGw7XG4gICAgdGhpcy5jdWVQb2ludHMgPSBudWxsO1xuICAgIHRoaXMuZXZlbnRzID0ge307XG4gICAgdGhpcy5zYWZldHlUaW1lciA9IG51bGw7XG4gICAgdGhpcy5jb3VudGRvd25UaW1lciA9IG51bGw7XG5cbiAgICAvLyBTZXR1cCBhIHByb21pc2UgdG8gcmVzb2x2ZSB3aGVuIHRoZSBJTUEgbWFuYWdlciBpcyByZWFkeVxuICAgIHRoaXMubWFuYWdlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyBUaGUgYWQgaXMgbG9hZGVkIGFuZCByZWFkeVxuICAgICAgdGhpcy5vbignbG9hZGVkJywgcmVzb2x2ZSk7XG5cbiAgICAgIC8vIEFkcyBmYWlsZWRcbiAgICAgIHRoaXMub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHRoaXMubG9hZCgpO1xuICB9XG5cbiAgZ2V0IGVuYWJsZWQoKSB7XG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5wbGF5ZXIuaXNIVE1MNSAmJlxuICAgICAgdGhpcy5wbGF5ZXIuaXNWaWRlbyAmJlxuICAgICAgY29uZmlnLmVuYWJsZWQgJiZcbiAgICAgICghaXMuZW1wdHkoY29uZmlnLnB1Ymxpc2hlcklkKSB8fCBpcy51cmwoY29uZmlnLnRhZ1VybCkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSBJTUEgU0RLXG4gICAqL1xuICBsb2FkKCkge1xuICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIEdvb2dsZSBJTUEzIFNESyBpcyBsb2FkZWQgb3IgbG9hZCBpdCBvdXJzZWx2ZXNcbiAgICBpZiAoIWlzLm9iamVjdCh3aW5kb3cuZ29vZ2xlKSB8fCAhaXMub2JqZWN0KHdpbmRvdy5nb29nbGUuaW1hKSkge1xuICAgICAgbG9hZFNjcmlwdCh0aGlzLnBsYXllci5jb25maWcudXJscy5nb29nbGVJTUEuc2RrKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZWFkeSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIC8vIFNjcmlwdCBmYWlsZWQgdG8gbG9hZCBvciBpcyBibG9ja2VkXG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsIG5ldyBFcnJvcignR29vZ2xlIElNQSBTREsgZmFpbGVkIHRvIGxvYWQnKSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlYWR5KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYWRzIGluc3RhbmNlIHJlYWR5XG4gICAqL1xuICByZWFkeSgpIHtcbiAgICAvLyBEb3VibGUgY2hlY2sgd2UncmUgZW5hYmxlZFxuICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICBkZXN0cm95KHRoaXMpO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IHRpY2tpbmcgb3VyIHNhZmV0eSB0aW1lci4gSWYgdGhlIHdob2xlIGFkdmVydGlzZW1lbnRcbiAgICAvLyB0aGluZyBkb2Vzbid0IHJlc29sdmUgd2l0aGluIG91ciBzZXQgdGltZTsgd2UgYmFpbFxuICAgIHRoaXMuc3RhcnRTYWZldHlUaW1lcigxMjAwMCwgJ3JlYWR5KCknKTtcblxuICAgIC8vIENsZWFyIHRoZSBzYWZldHkgdGltZXJcbiAgICB0aGlzLm1hbmFnZXJQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhclNhZmV0eVRpbWVyKCdvbkFkc01hbmFnZXJMb2FkZWQoKScpO1xuICAgIH0pO1xuXG4gICAgLy8gU2V0IGxpc3RlbmVycyBvbiB0aGUgUGx5ciBpbnN0YW5jZVxuICAgIHRoaXMubGlzdGVuZXJzKCk7XG5cbiAgICAvLyBTZXR1cCB0aGUgSU1BIFNES1xuICAgIHRoaXMuc2V0dXBJTUEoKTtcbiAgfVxuXG4gIC8vIEJ1aWxkIHRoZSB0YWcgVVJMXG4gIGdldCB0YWdVcmwoKSB7XG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXM7XG5cbiAgICBpZiAoaXMudXJsKGNvbmZpZy50YWdVcmwpKSB7XG4gICAgICByZXR1cm4gY29uZmlnLnRhZ1VybDtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBBVl9QVUJMSVNIRVJJRDogJzU4YzI1YmIwMDczZWY0NDhiMTA4N2FkNicsXG4gICAgICBBVl9DSEFOTkVMSUQ6ICc1YTA0NThkYzI4YTA2MTQ1ZTQ1MTlkMjEnLFxuICAgICAgQVZfVVJMOiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsXG4gICAgICBjYjogRGF0ZS5ub3coKSxcbiAgICAgIEFWX1dJRFRIOiA2NDAsXG4gICAgICBBVl9IRUlHSFQ6IDQ4MCxcbiAgICAgIEFWX0NESU0yOiBjb25maWcucHVibGlzaGVySWQsXG4gICAgfTtcblxuICAgIGNvbnN0IGJhc2UgPSAnaHR0cHM6Ly9nby5hbml2aWV3LmNvbS9hcGkvYWRzZXJ2ZXI2L3Zhc3QvJztcblxuICAgIHJldHVybiBgJHtiYXNlfT8ke2J1aWxkVXJsUGFyYW1zKHBhcmFtcyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbiBvcmRlciBmb3IgdGhlIFNESyB0byBkaXNwbGF5IGFkcyBmb3Igb3VyIHZpZGVvLCB3ZSBuZWVkIHRvIHRlbGwgaXQgd2hlcmUgdG8gcHV0IHRoZW0sXG4gICAqIHNvIGhlcmUgd2UgZGVmaW5lIG91ciBhZCBjb250YWluZXIuIFRoaXMgZGl2IGlzIHNldCB1cCB0byByZW5kZXIgb24gdG9wIG9mIHRoZSB2aWRlbyBwbGF5ZXIuXG4gICAqIFVzaW5nIHRoZSBjb2RlIGJlbG93LCB3ZSB0ZWxsIHRoZSBTREsgdG8gcmVuZGVyIGFkcyB3aXRoaW4gdGhhdCBkaXYuIFdlIGFsc28gcHJvdmlkZSBhXG4gICAqIGhhbmRsZSB0byB0aGUgY29udGVudCB2aWRlbyBwbGF5ZXIgLSB0aGUgU0RLIHdpbGwgcG9sbCB0aGUgY3VycmVudCB0aW1lIG9mIG91ciBwbGF5ZXIgdG9cbiAgICogcHJvcGVybHkgcGxhY2UgbWlkLXJvbGxzLiBBZnRlciB3ZSBjcmVhdGUgdGhlIGFkIGRpc3BsYXkgY29udGFpbmVyLCB3ZSBpbml0aWFsaXplIGl0LiBPblxuICAgKiBtb2JpbGUgZGV2aWNlcywgdGhpcyBpbml0aWFsaXphdGlvbiBpcyBkb25lIGFzIHRoZSByZXN1bHQgb2YgYSB1c2VyIGFjdGlvbi5cbiAgICovXG4gIHNldHVwSU1BKCkge1xuICAgIC8vIENyZWF0ZSB0aGUgY29udGFpbmVyIGZvciBvdXIgYWR2ZXJ0aXNlbWVudHNcbiAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzOiB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5hZHMsXG4gICAgfSk7XG5cbiAgICB0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5jb250YWluZXIpO1xuXG4gICAgLy8gU28gd2UgY2FuIHJ1biBWUEFJRDJcbiAgICBnb29nbGUuaW1hLnNldHRpbmdzLnNldFZwYWlkTW9kZShnb29nbGUuaW1hLkltYVNka1NldHRpbmdzLlZwYWlkTW9kZS5FTkFCTEVEKTtcblxuICAgIC8vIFNldCBsYW5ndWFnZVxuICAgIGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0TG9jYWxlKHRoaXMucGxheWVyLmNvbmZpZy5hZHMubGFuZ3VhZ2UpO1xuXG4gICAgLy8gU2V0IHBsYXliYWNrIGZvciBpT1MxMCtcbiAgICBnb29nbGUuaW1hLnNldHRpbmdzLnNldERpc2FibGVDdXN0b21QbGF5YmFja0ZvcklPUzEwUGx1cyh0aGlzLnBsYXllci5jb25maWcucGxheXNpbmxpbmUpO1xuXG4gICAgLy8gV2UgYXNzdW1lIHRoZSBhZENvbnRhaW5lciBpcyB0aGUgdmlkZW8gY29udGFpbmVyIG9mIHRoZSBwbHlyIGVsZW1lbnQgdGhhdCB3aWxsIGhvdXNlIHRoZSBhZHNcbiAgICB0aGlzLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXIgPSBuZXcgZ29vZ2xlLmltYS5BZERpc3BsYXlDb250YWluZXIodGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMucGxheWVyLm1lZGlhKTtcblxuICAgIC8vIENyZWF0ZSBhZHMgbG9hZGVyXG4gICAgdGhpcy5sb2FkZXIgPSBuZXcgZ29vZ2xlLmltYS5BZHNMb2FkZXIodGhpcy5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyKTtcblxuICAgIC8vIExpc3RlbiBhbmQgcmVzcG9uZCB0byBhZHMgbG9hZGVkIGFuZCBlcnJvciBldmVudHNcbiAgICB0aGlzLmxvYWRlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgZ29vZ2xlLmltYS5BZHNNYW5hZ2VyTG9hZGVkRXZlbnQuVHlwZS5BRFNfTUFOQUdFUl9MT0FERUQsXG4gICAgICBldmVudCA9PiB0aGlzLm9uQWRzTWFuYWdlckxvYWRlZChldmVudCksXG4gICAgICBmYWxzZSxcbiAgICApO1xuICAgIHRoaXMubG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoZ29vZ2xlLmltYS5BZEVycm9yRXZlbnQuVHlwZS5BRF9FUlJPUiwgZXJyb3IgPT4gdGhpcy5vbkFkRXJyb3IoZXJyb3IpLCBmYWxzZSk7XG5cbiAgICAvLyBSZXF1ZXN0IHZpZGVvIGFkcyB0byBiZSBwcmUtbG9hZGVkXG4gICAgdGhpcy5yZXF1ZXN0QWRzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBhZHZlcnRpc2VtZW50c1xuICAgKi9cbiAgcmVxdWVzdEFkcygpIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gdGhpcy5wbGF5ZXIuZWxlbWVudHM7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUmVxdWVzdCB2aWRlbyBhZHNcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgZ29vZ2xlLmltYS5BZHNSZXF1ZXN0KCk7XG4gICAgICByZXF1ZXN0LmFkVGFnVXJsID0gdGhpcy50YWdVcmw7XG5cbiAgICAgIC8vIFNwZWNpZnkgdGhlIGxpbmVhciBhbmQgbm9ubGluZWFyIHNsb3Qgc2l6ZXMuIFRoaXMgaGVscHMgdGhlIFNES1xuICAgICAgLy8gdG8gc2VsZWN0IHRoZSBjb3JyZWN0IGNyZWF0aXZlIGlmIG11bHRpcGxlIGFyZSByZXR1cm5lZFxuICAgICAgcmVxdWVzdC5saW5lYXJBZFNsb3RXaWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICAgIHJlcXVlc3QubGluZWFyQWRTbG90SGVpZ2h0ID0gY29udGFpbmVyLm9mZnNldEhlaWdodDtcbiAgICAgIHJlcXVlc3Qubm9uTGluZWFyQWRTbG90V2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGg7XG4gICAgICByZXF1ZXN0Lm5vbkxpbmVhckFkU2xvdEhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgIC8vIFdlIG9ubHkgb3ZlcmxheSBhZHMgYXMgd2Ugb25seSBzdXBwb3J0IHZpZGVvLlxuICAgICAgcmVxdWVzdC5mb3JjZU5vbkxpbmVhckZ1bGxTbG90ID0gZmFsc2U7XG5cbiAgICAgIC8vIE11dGUgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICAgICAgcmVxdWVzdC5zZXRBZFdpbGxQbGF5TXV0ZWQoIXRoaXMucGxheWVyLm11dGVkKTtcblxuICAgICAgdGhpcy5sb2FkZXIucmVxdWVzdEFkcyhyZXF1ZXN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLm9uQWRFcnJvcihlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBhZCBjb3VudGRvd25cbiAgICogQHBhcmFtIHtCb29sZWFufSBzdGFydFxuICAgKi9cbiAgcG9sbENvdW50ZG93bihzdGFydCA9IGZhbHNlKSB7XG4gICAgaWYgKCFzdGFydCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50ZG93blRpbWVyKTtcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1iYWRnZS10ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICAgICAgY29uc3QgdGltZSA9IGZvcm1hdFRpbWUoTWF0aC5tYXgodGhpcy5tYW5hZ2VyLmdldFJlbWFpbmluZ1RpbWUoKSwgMCkpO1xuICAgICAgY29uc3QgbGFiZWwgPSBgJHtpMThuLmdldCgnYWR2ZXJ0aXNlbWVudCcsIHRoaXMucGxheWVyLmNvbmZpZyl9IC0gJHt0aW1lfWA7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtYmFkZ2UtdGV4dCcsIGxhYmVsKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb3VudGRvd25UaW1lciA9IHNldEludGVydmFsKHVwZGF0ZSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbmV2ZXIgdGhlIGFkcyBhcmUgcmVhZHkgaW5zaWRlIHRoZSBBZERpc3BsYXlDb250YWluZXJcbiAgICogQHBhcmFtIHtFdmVudH0gYWRzTWFuYWdlckxvYWRlZEV2ZW50XG4gICAqL1xuICBvbkFkc01hbmFnZXJMb2FkZWQoZXZlbnQpIHtcbiAgICAvLyBMb2FkIGNvdWxkIG9jY3VyIGFmdGVyIGEgc291cmNlIGNoYW5nZSAocmFjZSBjb25kaXRpb24pXG4gICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGFkcyBtYW5hZ2VyXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBuZXcgZ29vZ2xlLmltYS5BZHNSZW5kZXJpbmdTZXR0aW5ncygpO1xuXG4gICAgLy8gVGVsbCB0aGUgU0RLIHRvIHNhdmUgYW5kIHJlc3RvcmUgY29udGVudCB2aWRlbyBzdGF0ZSBvbiBvdXIgYmVoYWxmXG4gICAgc2V0dGluZ3MucmVzdG9yZUN1c3RvbVBsYXliYWNrU3RhdGVPbkFkQnJlYWtDb21wbGV0ZSA9IHRydWU7XG4gICAgc2V0dGluZ3MuZW5hYmxlUHJlbG9hZGluZyA9IHRydWU7XG5cbiAgICAvLyBUaGUgU0RLIGlzIHBvbGxpbmcgY3VycmVudFRpbWUgb24gdGhlIGNvbnRlbnRQbGF5YmFjay4gQW5kIG5lZWRzIGEgZHVyYXRpb25cbiAgICAvLyBzbyBpdCBjYW4gZGV0ZXJtaW5lIHdoZW4gdG8gc3RhcnQgdGhlIG1pZC0gYW5kIHBvc3Qtcm9sbFxuICAgIHRoaXMubWFuYWdlciA9IGV2ZW50LmdldEFkc01hbmFnZXIodGhpcy5wbGF5ZXIsIHNldHRpbmdzKTtcblxuICAgIC8vIEdldCB0aGUgY3VlIHBvaW50cyBmb3IgYW55IG1pZC1yb2xscyBieSBmaWx0ZXJpbmcgb3V0IHRoZSBwcmUtIGFuZCBwb3N0LXJvbGxcbiAgICB0aGlzLmN1ZVBvaW50cyA9IHRoaXMubWFuYWdlci5nZXRDdWVQb2ludHMoKTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgdG8gdGhlIHJlcXVpcmVkIGV2ZW50c1xuICAgIC8vIEFkdmVydGlzZW1lbnQgZXJyb3IgZXZlbnRzXG4gICAgdGhpcy5tYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoZ29vZ2xlLmltYS5BZEVycm9yRXZlbnQuVHlwZS5BRF9FUlJPUiwgZXJyb3IgPT4gdGhpcy5vbkFkRXJyb3IoZXJyb3IpKTtcblxuICAgIC8vIEFkdmVydGlzZW1lbnQgcmVndWxhciBldmVudHNcbiAgICBPYmplY3Qua2V5cyhnb29nbGUuaW1hLkFkRXZlbnQuVHlwZSkuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgIHRoaXMubWFuYWdlci5hZGRFdmVudExpc3RlbmVyKGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlW3R5cGVdLCBlID0+IHRoaXMub25BZEV2ZW50KGUpKTtcbiAgICB9KTtcblxuICAgIC8vIFJlc29sdmUgb3VyIGFkc01hbmFnZXJcbiAgICB0aGlzLnRyaWdnZXIoJ2xvYWRlZCcpO1xuICB9XG5cbiAgYWRkQ3VlUG9pbnRzKCkge1xuICAgIC8vIEFkZCBhZHZlcnRpc2VtZW50IGN1ZSdzIHdpdGhpbiB0aGUgdGltZSBsaW5lIGlmIGF2YWlsYWJsZVxuICAgIGlmICghaXMuZW1wdHkodGhpcy5jdWVQb2ludHMpKSB7XG4gICAgICB0aGlzLmN1ZVBvaW50cy5mb3JFYWNoKGN1ZVBvaW50ID0+IHtcbiAgICAgICAgaWYgKGN1ZVBvaW50ICE9PSAwICYmIGN1ZVBvaW50ICE9PSAtMSAmJiBjdWVQb2ludCA8IHRoaXMucGxheWVyLmR1cmF0aW9uKSB7XG4gICAgICAgICAgY29uc3Qgc2Vla0VsZW1lbnQgPSB0aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcztcblxuICAgICAgICAgIGlmIChpcy5lbGVtZW50KHNlZWtFbGVtZW50KSkge1xuICAgICAgICAgICAgY29uc3QgY3VlUGVyY2VudGFnZSA9ICgxMDAgLyB0aGlzLnBsYXllci5kdXJhdGlvbikgKiBjdWVQb2ludDtcbiAgICAgICAgICAgIGNvbnN0IGN1ZSA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgIGNsYXNzOiB0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5jdWVzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGN1ZS5zdHlsZS5sZWZ0ID0gYCR7Y3VlUGVyY2VudGFnZS50b1N0cmluZygpfSVgO1xuICAgICAgICAgICAgc2Vla0VsZW1lbnQuYXBwZW5kQ2hpbGQoY3VlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHdoZXJlIGFsbCB0aGUgZXZlbnQgaGFuZGxpbmcgdGFrZXMgcGxhY2UuIFJldHJpZXZlIHRoZSBhZCBmcm9tIHRoZSBldmVudC4gU29tZVxuICAgKiBldmVudHMgKGUuZy4gQUxMX0FEU19DT01QTEVURUQpIGRvbid0IGhhdmUgdGhlIGFkIG9iamVjdCBhc3NvY2lhdGVkXG4gICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2ludGVyYWN0aXZlLW1lZGlhLWFkcy9kb2NzL3Nka3MvaHRtbDUvdjMvYXBpcyNpbWEuQWRFdmVudC5UeXBlXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBvbkFkRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gdGhpcy5wbGF5ZXIuZWxlbWVudHM7XG4gICAgLy8gUmV0cmlldmUgdGhlIGFkIGZyb20gdGhlIGV2ZW50LiBTb21lIGV2ZW50cyAoZS5nLiBBTExfQURTX0NPTVBMRVRFRClcbiAgICAvLyBkb24ndCBoYXZlIGFkIG9iamVjdCBhc3NvY2lhdGVkXG4gICAgY29uc3QgYWQgPSBldmVudC5nZXRBZCgpO1xuICAgIGNvbnN0IGFkRGF0YSA9IGV2ZW50LmdldEFkRGF0YSgpO1xuXG4gICAgLy8gUHJveHkgZXZlbnRcbiAgICBjb25zdCBkaXNwYXRjaEV2ZW50ID0gdHlwZSA9PiB7XG4gICAgICB0cmlnZ2VyRXZlbnQuY2FsbCh0aGlzLnBsYXllciwgdGhpcy5wbGF5ZXIubWVkaWEsIGBhZHMke3R5cGUucmVwbGFjZSgvXy9nLCAnJykudG9Mb3dlckNhc2UoKX1gKTtcbiAgICB9O1xuXG4gICAgLy8gQnViYmxlIHRoZSBldmVudFxuICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQudHlwZSk7XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuTE9BREVEOlxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBldmVudCBzZW50IGZvciBhbiBhZCAtIGl0IGlzIHBvc3NpYmxlIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZVxuICAgICAgICAvLyBhZCBpcyBhIHZpZGVvIGFkIG9yIGFuIG92ZXJsYXlcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdsb2FkZWQnKTtcblxuICAgICAgICAvLyBTdGFydCBjb3VudGRvd25cbiAgICAgICAgdGhpcy5wb2xsQ291bnRkb3duKHRydWUpO1xuXG4gICAgICAgIGlmICghYWQuaXNMaW5lYXIoKSkge1xuICAgICAgICAgIC8vIFBvc2l0aW9uIEFkRGlzcGxheUNvbnRhaW5lciBjb3JyZWN0bHkgZm9yIG92ZXJsYXlcbiAgICAgICAgICBhZC53aWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICAgICAgICBhZC5oZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS5pbmZvKCdBZCB0eXBlOiAnICsgZXZlbnQuZ2V0QWQoKS5nZXRBZFBvZEluZm8oKS5nZXRQb2RJbmRleCgpKTtcbiAgICAgICAgLy8gY29uc29sZS5pbmZvKCdBZCB0aW1lOiAnICsgZXZlbnQuZ2V0QWQoKS5nZXRBZFBvZEluZm8oKS5nZXRUaW1lT2Zmc2V0KCkpO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlNUQVJURUQ6XG4gICAgICAgIC8vIFNldCB2b2x1bWUgdG8gbWF0Y2ggcGxheWVyXG4gICAgICAgIHRoaXMubWFuYWdlci5zZXRWb2x1bWUodGhpcy5wbGF5ZXIudm9sdW1lKTtcblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BTExfQURTX0NPTVBMRVRFRDpcbiAgICAgICAgLy8gQWxsIGFkcyBmb3IgdGhlIGN1cnJlbnQgdmlkZW9zIGFyZSBkb25lLiBXZSBjYW4gbm93IHJlcXVlc3QgbmV3IGFkdmVydGlzZW1lbnRzXG4gICAgICAgIC8vIGluIGNhc2UgdGhlIHZpZGVvIGlzIHJlLXBsYXllZFxuXG4gICAgICAgIC8vIFRPRE86IEV4YW1wbGUgZm9yIHdoYXQgaGFwcGVucyB3aGVuIGEgbmV4dCB2aWRlbyBpbiBhIHBsYXlsaXN0IHdvdWxkIGJlIGxvYWRlZC5cbiAgICAgICAgLy8gU28gaGVyZSB3ZSBsb2FkIGEgbmV3IHZpZGVvIHdoZW4gYWxsIGFkcyBhcmUgZG9uZS5cbiAgICAgICAgLy8gVGhlbiB3ZSBsb2FkIG5ldyBhZHMgd2l0aGluIGEgbmV3IGFkc01hbmFnZXIuIFdoZW4gdGhlIHZpZGVvXG4gICAgICAgIC8vIElzIHN0YXJ0ZWQgLSBhZnRlciAtIHRoZSBhZHMgYXJlIGxvYWRlZCwgdGhlbiB3ZSBnZXQgYWRzLlxuICAgICAgICAvLyBZb3UgY2FuIGFsc28gZWFzaWx5IHRlc3QgY2FuY2VsbGluZyBhbmQgcmVsb2FkaW5nIGJ5IHJ1bm5pbmdcbiAgICAgICAgLy8gcGxheWVyLmFkcy5jYW5jZWwoKSBhbmQgcGxheWVyLmFkcy5wbGF5IGZyb20gdGhlIGNvbnNvbGUgSSBndWVzcy5cbiAgICAgICAgLy8gdGhpcy5wbGF5ZXIuc291cmNlID0ge1xuICAgICAgICAvLyAgICAgdHlwZTogJ3ZpZGVvJyxcbiAgICAgICAgLy8gICAgIHRpdGxlOiAnVmlldyBGcm9tIEEgQmx1ZSBNb29uJyxcbiAgICAgICAgLy8gICAgIHNvdXJjZXM6IFt7XG4gICAgICAgIC8vICAgICAgICAgc3JjOlxuICAgICAgICAvLyAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvZGVtby9WaWV3X0Zyb21fQV9CbHVlX01vb25fVHJhaWxlci1IRC5tcDQnLCB0eXBlOlxuICAgICAgICAvLyAndmlkZW8vbXA0JywgfV0sIHBvc3RlcjpcbiAgICAgICAgLy8gJ2h0dHBzOi8vY2RuLnBseXIuaW8vc3RhdGljL2RlbW8vVmlld19Gcm9tX0FfQmx1ZV9Nb29uX1RyYWlsZXItSEQuanBnJywgdHJhY2tzOlxuICAgICAgICAvLyBbIHsga2luZDogJ2NhcHRpb25zJywgbGFiZWw6ICdFbmdsaXNoJywgc3JjbGFuZzogJ2VuJywgc3JjOlxuICAgICAgICAvLyAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvZGVtby9WaWV3X0Zyb21fQV9CbHVlX01vb25fVHJhaWxlci1IRC5lbi52dHQnLFxuICAgICAgICAvLyBkZWZhdWx0OiB0cnVlLCB9LCB7IGtpbmQ6ICdjYXB0aW9ucycsIGxhYmVsOiAnRnJlbmNoJywgc3JjbGFuZzogJ2ZyJywgc3JjOlxuICAgICAgICAvLyAnaHR0cHM6Ly9jZG4ucGx5ci5pby9zdGF0aWMvZGVtby9WaWV3X0Zyb21fQV9CbHVlX01vb25fVHJhaWxlci1IRC5mci52dHQnLCB9LCBdLFxuICAgICAgICAvLyB9O1xuXG4gICAgICAgIC8vIFRPRE86IFNvIHRoZXJlIGlzIHN0aWxsIHRoaXMgdGhpbmcgd2hlcmUgYSB2aWRlbyBzaG91bGQgb25seSBiZSBhbGxvd2VkIHRvIHN0YXJ0XG4gICAgICAgIC8vIHBsYXlpbmcgd2hlbiB0aGUgSU1BIFNESyBpcyByZWFkeSBvciBoYXMgZmFpbGVkXG5cbiAgICAgICAgaWYgKHRoaXMucGxheWVyLmVuZGVkKSB7XG4gICAgICAgICAgdGhpcy5sb2FkQWRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlIFNESyB3b24ndCBhbGxvdyBuZXcgYWRzIHRvIGJlIGNhbGxlZCB3aXRob3V0IHJlY2VpdmluZyBhIGNvbnRlbnRDb21wbGV0ZSgpXG4gICAgICAgICAgdGhpcy5sb2FkZXIuY29udGVudENvbXBsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5DT05URU5UX1BBVVNFX1JFUVVFU1RFRDpcbiAgICAgICAgLy8gVGhpcyBldmVudCBpbmRpY2F0ZXMgdGhlIGFkIGhhcyBzdGFydGVkIC0gdGhlIHZpZGVvIHBsYXllciBjYW4gYWRqdXN0IHRoZSBVSSxcbiAgICAgICAgLy8gZm9yIGV4YW1wbGUgZGlzcGxheSBhIHBhdXNlIGJ1dHRvbiBhbmQgcmVtYWluaW5nIHRpbWUuIEZpcmVkIHdoZW4gY29udGVudCBzaG91bGRcbiAgICAgICAgLy8gYmUgcGF1c2VkLiBUaGlzIHVzdWFsbHkgaGFwcGVucyByaWdodCBiZWZvcmUgYW4gYWQgaXMgYWJvdXQgdG8gY292ZXIgdGhlIGNvbnRlbnRcblxuICAgICAgICB0aGlzLnBhdXNlQ29udGVudCgpO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkNPTlRFTlRfUkVTVU1FX1JFUVVFU1RFRDpcbiAgICAgICAgLy8gVGhpcyBldmVudCBpbmRpY2F0ZXMgdGhlIGFkIGhhcyBmaW5pc2hlZCAtIHRoZSB2aWRlbyBwbGF5ZXIgY2FuIHBlcmZvcm1cbiAgICAgICAgLy8gYXBwcm9wcmlhdGUgVUkgYWN0aW9ucywgc3VjaCBhcyByZW1vdmluZyB0aGUgdGltZXIgZm9yIHJlbWFpbmluZyB0aW1lIGRldGVjdGlvbi5cbiAgICAgICAgLy8gRmlyZWQgd2hlbiBjb250ZW50IHNob3VsZCBiZSByZXN1bWVkLiBUaGlzIHVzdWFsbHkgaGFwcGVucyB3aGVuIGFuIGFkIGZpbmlzaGVzXG4gICAgICAgIC8vIG9yIGNvbGxhcHNlc1xuXG4gICAgICAgIHRoaXMucG9sbENvdW50ZG93bigpO1xuXG4gICAgICAgIHRoaXMucmVzdW1lQ29udGVudCgpO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkxPRzpcbiAgICAgICAgaWYgKGFkRGF0YS5hZEVycm9yKSB7XG4gICAgICAgICAgdGhpcy5wbGF5ZXIuZGVidWcud2FybihgTm9uLWZhdGFsIGFkIGVycm9yOiAke2FkRGF0YS5hZEVycm9yLmdldE1lc3NhZ2UoKX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW55IGFkIGVycm9yIGhhbmRsaW5nIGNvbWVzIHRocm91Z2ggaGVyZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKi9cbiAgb25BZEVycm9yKGV2ZW50KSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbiAgICB0aGlzLnBsYXllci5kZWJ1Zy53YXJuKCdBZHMgZXJyb3InLCBldmVudCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaG9va3MgZm9yIFBseXIgYW5kIHdpbmRvdyBldmVudHMuIFRoaXMgZW5zdXJlc1xuICAgKiB0aGUgbWlkLSBhbmQgcG9zdC1yb2xsIGxhdW5jaCBhdCB0aGUgY29ycmVjdCB0aW1lLiBBbmRcbiAgICogcmVzaXplIHRoZSBhZHZlcnRpc2VtZW50IHdoZW4gdGhlIHBsYXllciByZXNpemVzXG4gICAqL1xuICBsaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHRoaXMucGxheWVyLmVsZW1lbnRzO1xuICAgIGxldCB0aW1lO1xuXG4gICAgdGhpcy5wbGF5ZXIub24oJ2NhbnBsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmFkZEN1ZVBvaW50cygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5wbGF5ZXIub24oJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5sb2FkZXIuY29udGVudENvbXBsZXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnBsYXllci5vbigndGltZXVwZGF0ZScsICgpID0+IHtcbiAgICAgIHRpbWUgPSB0aGlzLnBsYXllci5jdXJyZW50VGltZTtcbiAgICB9KTtcblxuICAgIHRoaXMucGxheWVyLm9uKCdzZWVrZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZWVrZWRUaW1lID0gdGhpcy5wbGF5ZXIuY3VycmVudFRpbWU7XG5cbiAgICAgIGlmIChpcy5lbXB0eSh0aGlzLmN1ZVBvaW50cykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmN1ZVBvaW50cy5mb3JFYWNoKChjdWVQb2ludCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHRpbWUgPCBjdWVQb2ludCAmJiBjdWVQb2ludCA8IHNlZWtlZFRpbWUpIHtcbiAgICAgICAgICB0aGlzLm1hbmFnZXIuZGlzY2FyZEFkQnJlYWsoKTtcbiAgICAgICAgICB0aGlzLmN1ZVBvaW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiB0byB0aGUgcmVzaXppbmcgb2YgdGhlIHdpbmRvdy4gQW5kIHJlc2l6ZSBhZCBhY2NvcmRpbmdseVxuICAgIC8vIFRPRE86IGV2ZW50dWFsbHkgaW1wbGVtZW50IFJlc2l6ZU9ic2VydmVyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLnJlc2l6ZShjb250YWluZXIub2Zmc2V0V2lkdGgsIGNvbnRhaW5lci5vZmZzZXRIZWlnaHQsIGdvb2dsZS5pbWEuVmlld01vZGUuTk9STUFMKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBhZHNNYW5hZ2VyIGFuZCBzdGFydCBwbGF5aW5nIGFkdmVydGlzZW1lbnRzXG4gICAqL1xuICBwbGF5KCkge1xuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSB0aGlzLnBsYXllci5lbGVtZW50cztcblxuICAgIGlmICghdGhpcy5tYW5hZ2VyUHJvbWlzZSkge1xuICAgICAgdGhpcy5yZXN1bWVDb250ZW50KCk7XG4gICAgfVxuXG4gICAgLy8gUGxheSB0aGUgcmVxdWVzdGVkIGFkdmVydGlzZW1lbnQgd2hlbmV2ZXIgdGhlIGFkc01hbmFnZXIgaXMgcmVhZHlcbiAgICB0aGlzLm1hbmFnZXJQcm9taXNlXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIFNldCB2b2x1bWUgdG8gbWF0Y2ggcGxheWVyXG4gICAgICAgIHRoaXMubWFuYWdlci5zZXRWb2x1bWUodGhpcy5wbGF5ZXIudm9sdW1lKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBjb250YWluZXIuIE11c3QgYmUgZG9uZSB2aWEgYSB1c2VyIGFjdGlvbiBvbiBtb2JpbGUgZGV2aWNlc1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBhZHMgbWFuYWdlci4gQWQgcnVsZXMgcGxheWxpc3Qgd2lsbCBzdGFydCBhdCB0aGlzIHRpbWVcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5pbml0KGNvbnRhaW5lci5vZmZzZXRXaWR0aCwgY29udGFpbmVyLm9mZnNldEhlaWdodCwgZ29vZ2xlLmltYS5WaWV3TW9kZS5OT1JNQUwpO1xuXG4gICAgICAgICAgICAvLyBDYWxsIHBsYXkgdG8gc3RhcnQgc2hvd2luZyB0aGUgYWQuIFNpbmdsZSB2aWRlbyBhbmQgb3ZlcmxheSBhZHMgd2lsbFxuICAgICAgICAgICAgLy8gc3RhcnQgYXQgdGhpcyB0aW1lOyB0aGUgY2FsbCB3aWxsIGJlIGlnbm9yZWQgZm9yIGFkIHJ1bGVzXG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuc3RhcnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoYWRFcnJvcikge1xuICAgICAgICAgIC8vIEFuIGVycm9yIG1heSBiZSB0aHJvd24gaWYgdGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoZVxuICAgICAgICAgIC8vIFZBU1QgcmVzcG9uc2VcbiAgICAgICAgICB0aGlzLm9uQWRFcnJvcihhZEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7fSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdW1lIG91ciB2aWRlb1xuICAgKi9cbiAgcmVzdW1lQ29udGVudCgpIHtcbiAgICAvLyBIaWRlIHRoZSBhZHZlcnRpc2VtZW50IGNvbnRhaW5lclxuICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcnO1xuXG4gICAgLy8gQWQgaXMgc3RvcHBlZFxuICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuXG4gICAgLy8gUGxheSB2aWRlb1xuICAgIHNpbGVuY2VQcm9taXNlKHRoaXMucGxheWVyLm1lZGlhLnBsYXkoKSk7XG4gIH1cblxuICAvKipcbiAgICogUGF1c2Ugb3VyIHZpZGVvXG4gICAqL1xuICBwYXVzZUNvbnRlbnQoKSB7XG4gICAgLy8gU2hvdyB0aGUgYWR2ZXJ0aXNlbWVudCBjb250YWluZXJcbiAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5zdHlsZS56SW5kZXggPSAzO1xuXG4gICAgLy8gQWQgaXMgcGxheWluZ1xuICAgIHRoaXMucGxheWluZyA9IHRydWU7XG5cbiAgICAvLyBQYXVzZSBvdXIgdmlkZW8uXG4gICAgdGhpcy5wbGF5ZXIubWVkaWEucGF1c2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBhZHNNYW5hZ2VyIHNvIHdlIGNhbiBncmFiIG5ldyBhZHMgYWZ0ZXIgdGhpcy4gSWYgd2UgZG9uJ3QgdGhlbiB3ZSdyZSBub3RcbiAgICogYWxsb3dlZCB0byBjYWxsIG5ldyBhZHMgYmFzZWQgb24gZ29vZ2xlIHBvbGljaWVzLCBhcyB0aGV5IGludGVycHJldCB0aGlzIGFzIGFuIGFjY2lkZW50YWxcbiAgICogdmlkZW8gcmVxdWVzdHMuIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2ludGVyYWN0aXZlLVxuICAgKiBtZWRpYS1hZHMvZG9jcy9zZGtzL2FuZHJvaWQvZmFxIzhcbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICAvLyBQYXVzZSBvdXIgdmlkZW9cbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5yZXN1bWVDb250ZW50KCk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCBvdXIgaW5zdGFuY2UgdGhhdCB3ZSdyZSBkb25lIGZvciBub3dcbiAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG5cbiAgICAvLyBSZS1jcmVhdGUgb3VyIGFkc01hbmFnZXJcbiAgICB0aGlzLmxvYWRBZHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZS1jcmVhdGUgb3VyIGFkc01hbmFnZXJcbiAgICovXG4gIGxvYWRBZHMoKSB7XG4gICAgLy8gVGVsbCBvdXIgYWRzTWFuYWdlciB0byBnbyBieWUgYnllXG4gICAgdGhpcy5tYW5hZ2VyUHJvbWlzZVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBEZXN0cm95IG91ciBhZHNNYW5hZ2VyXG4gICAgICAgIGlmICh0aGlzLm1hbmFnZXIpIHtcbiAgICAgICAgICB0aGlzLm1hbmFnZXIuZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmUtc2V0IG91ciBhZHNNYW5hZ2VyIHByb21pc2VzXG4gICAgICAgIHRoaXMubWFuYWdlclByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICB0aGlzLm9uKCdsb2FkZWQnLCByZXNvbHZlKTtcbiAgICAgICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2codGhpcy5tYW5hZ2VyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE5vdyB0aGF0IHRoZSBtYW5hZ2VyIGhhcyBiZWVuIGRlc3Ryb3llZCBzZXQgaXQgdG8gYWxzbyBiZSB1bi1pbml0aWFsaXplZFxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gTm93IHJlcXVlc3Qgc29tZSBuZXcgYWR2ZXJ0aXNlbWVudHNcbiAgICAgICAgdGhpcy5yZXF1ZXN0QWRzKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGNhbGxiYWNrcyBhZnRlciBhbiBhZCBldmVudCB3YXMgaW52b2tlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBFdmVudCB0eXBlXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLmV2ZW50c1tldmVudF07XG5cbiAgICBpZiAoaXMuYXJyYXkoaGFuZGxlcnMpKSB7XG4gICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge1xuICAgICAgICBpZiAoaXMuZnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBFdmVudCB0eXBlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlbnQgb2NjdXJzXG4gICAqIEByZXR1cm4ge0Fkc31cbiAgICovXG4gIG9uKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIGlmICghaXMuYXJyYXkodGhpcy5ldmVudHNbZXZlbnRdKSkge1xuICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgYSBzYWZldHkgdGltZXIgZm9yIHdoZW4gdGhlIGFkIG5ldHdvcmsgZG9lc24ndCByZXNwb25kIGZvciB3aGF0ZXZlciByZWFzb24uXG4gICAqIFRoZSBhZHZlcnRpc2VtZW50IGhhcyAxMiBzZWNvbmRzIHRvIGdldCBpdHMgdGhpbmdzIHRvZ2V0aGVyLiBXZSBzdG9wIHRoaXMgdGltZXIgd2hlbiB0aGVcbiAgICogYWR2ZXJ0aXNlbWVudCBpcyBwbGF5aW5nLCBvciB3aGVuIGEgdXNlciBhY3Rpb24gaXMgcmVxdWlyZWQgdG8gc3RhcnQsIHRoZW4gd2UgY2xlYXIgdGhlXG4gICAqIHRpbWVyIG9uIGFkIHJlYWR5XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmcm9tXG4gICAqL1xuICBzdGFydFNhZmV0eVRpbWVyKHRpbWUsIGZyb20pIHtcbiAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coYFNhZmV0eSB0aW1lciBpbnZva2VkIGZyb206ICR7ZnJvbX1gKTtcblxuICAgIHRoaXMuc2FmZXR5VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICB0aGlzLmNsZWFyU2FmZXR5VGltZXIoJ3N0YXJ0U2FmZXR5VGltZXIoKScpO1xuICAgIH0sIHRpbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIG91ciBzYWZldHkgdGltZXIocylcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZyb21cbiAgICovXG4gIGNsZWFyU2FmZXR5VGltZXIoZnJvbSkge1xuICAgIGlmICghaXMubnVsbE9yVW5kZWZpbmVkKHRoaXMuc2FmZXR5VGltZXIpKSB7XG4gICAgICB0aGlzLnBsYXllci5kZWJ1Zy5sb2coYFNhZmV0eSB0aW1lciBjbGVhcmVkIGZyb206ICR7ZnJvbX1gKTtcblxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2FmZXR5VGltZXIpO1xuICAgICAgdGhpcy5zYWZldHlUaW1lciA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFkcztcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQbHlyIHNvdXJjZSB1cGRhdGVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IHByb3ZpZGVycyB9IGZyb20gJy4vY29uZmlnL3R5cGVzJztcbmltcG9ydCBodG1sNSBmcm9tICcuL2h0bWw1JztcbmltcG9ydCBtZWRpYSBmcm9tICcuL21lZGlhJztcbmltcG9ydCBQcmV2aWV3VGh1bWJuYWlscyBmcm9tICcuL3BsdWdpbnMvcHJldmlldy10aHVtYm5haWxzJztcbmltcG9ydCBzdXBwb3J0IGZyb20gJy4vc3VwcG9ydCc7XG5pbXBvcnQgdWkgZnJvbSAnLi91aSc7XG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBpbnNlcnRFbGVtZW50LCByZW1vdmVFbGVtZW50IH0gZnJvbSAnLi91dGlscy9lbGVtZW50cyc7XG5pbXBvcnQgaXMgZnJvbSAnLi91dGlscy9pcyc7XG5pbXBvcnQgeyBnZXREZWVwIH0gZnJvbSAnLi91dGlscy9vYmplY3RzJztcblxuY29uc3Qgc291cmNlID0ge1xuICAvLyBBZGQgZWxlbWVudHMgdG8gSFRNTDUgbWVkaWEgKHNvdXJjZSwgdHJhY2tzLCBldGMpXG4gIGluc2VydEVsZW1lbnRzKHR5cGUsIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAoaXMuc3RyaW5nKGF0dHJpYnV0ZXMpKSB7XG4gICAgICBpbnNlcnRFbGVtZW50KHR5cGUsIHRoaXMubWVkaWEsIHtcbiAgICAgICAgc3JjOiBhdHRyaWJ1dGVzLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpcy5hcnJheShhdHRyaWJ1dGVzKSkge1xuICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKGF0dHJpYnV0ZSA9PiB7XG4gICAgICAgIGluc2VydEVsZW1lbnQodHlwZSwgdGhpcy5tZWRpYSwgYXR0cmlidXRlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBVcGRhdGUgc291cmNlXG4gIC8vIFNvdXJjZXMgYXJlIG5vdCBjaGVja2VkIGZvciBzdXBwb3J0IHNvIGJlIGNhcmVmdWxcbiAgY2hhbmdlKGlucHV0KSB7XG4gICAgaWYgKCFnZXREZWVwKGlucHV0LCAnc291cmNlcy5sZW5ndGgnKSkge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdJbnZhbGlkIHNvdXJjZSBmb3JtYXQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgY3VycmVudCBuZXR3b3JrIHJlcXVlc3RzXG4gICAgaHRtbDUuY2FuY2VsUmVxdWVzdHMuY2FsbCh0aGlzKTtcblxuICAgIC8vIERlc3Ryb3kgaW5zdGFuY2UgYW5kIHJlLXNldHVwXG4gICAgdGhpcy5kZXN0cm95LmNhbGwoXG4gICAgICB0aGlzLFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBSZXNldCBxdWFsaXR5IG9wdGlvbnNcbiAgICAgICAgdGhpcy5vcHRpb25zLnF1YWxpdHkgPSBbXTtcblxuICAgICAgICAvLyBSZW1vdmUgZWxlbWVudHNcbiAgICAgICAgcmVtb3ZlRWxlbWVudCh0aGlzLm1lZGlhKTtcbiAgICAgICAgdGhpcy5tZWRpYSA9IG51bGw7XG5cbiAgICAgICAgLy8gUmVzZXQgY2xhc3MgbmFtZVxuICAgICAgICBpZiAoaXMuZWxlbWVudCh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcikpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIHR5cGUgYW5kIHByb3ZpZGVyXG4gICAgICAgIGNvbnN0IHsgc291cmNlcywgdHlwZSB9ID0gaW5wdXQ7XG4gICAgICAgIGNvbnN0IFt7IHByb3ZpZGVyID0gcHJvdmlkZXJzLmh0bWw1LCBzcmMgfV0gPSBzb3VyY2VzO1xuICAgICAgICBjb25zdCB0YWdOYW1lID0gcHJvdmlkZXIgPT09ICdodG1sNScgPyB0eXBlIDogJ2Rpdic7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBwcm92aWRlciA9PT0gJ2h0bWw1JyA/IHt9IDogeyBzcmMgfTtcblxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHtcbiAgICAgICAgICBwcm92aWRlcixcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0XG4gICAgICAgICAgc3VwcG9ydGVkOiBzdXBwb3J0LmNoZWNrKHR5cGUsIHByb3ZpZGVyLCB0aGlzLmNvbmZpZy5wbGF5c2lubGluZSksXG4gICAgICAgICAgLy8gQ3JlYXRlIG5ldyBlbGVtZW50XG4gICAgICAgICAgbWVkaWE6IGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwgYXR0cmlidXRlcyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluamVjdCB0aGUgbmV3IGVsZW1lbnRcbiAgICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tZWRpYSk7XG5cbiAgICAgICAgLy8gQXV0b3BsYXkgdGhlIG5ldyBzb3VyY2U/XG4gICAgICAgIGlmIChpcy5ib29sZWFuKGlucHV0LmF1dG9wbGF5KSkge1xuICAgICAgICAgIHRoaXMuY29uZmlnLmF1dG9wbGF5ID0gaW5wdXQuYXV0b3BsYXk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgYXR0cmlidXRlcyBmb3IgYXVkaW8gYW5kIHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb25maWcuY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWEuc2V0QXR0cmlidXRlKCdjcm9zc29yaWdpbicsICcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLnNldEF0dHJpYnV0ZSgnYXV0b3BsYXknLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaXMuZW1wdHkoaW5wdXQucG9zdGVyKSkge1xuICAgICAgICAgICAgdGhpcy5wb3N0ZXIgPSBpbnB1dC5wb3N0ZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5sb29wLmFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5zZXRBdHRyaWJ1dGUoJ2xvb3AnLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5tdXRlZCkge1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5zZXRBdHRyaWJ1dGUoJ211dGVkJywgJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5jb25maWcucGxheXNpbmxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWEuc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXN0b3JlIGNsYXNzIGhvb2tcbiAgICAgICAgdWkuYWRkU3R5bGVIb29rLmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy8gU2V0IG5ldyBzb3VyY2VzIGZvciBodG1sNVxuICAgICAgICBpZiAodGhpcy5pc0hUTUw1KSB7XG4gICAgICAgICAgc291cmNlLmluc2VydEVsZW1lbnRzLmNhbGwodGhpcywgJ3NvdXJjZScsIHNvdXJjZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHZpZGVvIHRpdGxlXG4gICAgICAgIHRoaXMuY29uZmlnLnRpdGxlID0gaW5wdXQudGl0bGU7XG5cbiAgICAgICAgLy8gU2V0IHVwIGZyb20gc2NyYXRjaFxuICAgICAgICBtZWRpYS5zZXR1cC5jYWxsKHRoaXMpO1xuXG4gICAgICAgIC8vIEhUTUw1IHN0dWZmXG4gICAgICAgIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICAgICAgICAvLyBTZXR1cCBjYXB0aW9uc1xuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dCkuaW5jbHVkZXMoJ3RyYWNrcycpKSB7XG4gICAgICAgICAgICBzb3VyY2UuaW5zZXJ0RWxlbWVudHMuY2FsbCh0aGlzLCAndHJhY2snLCBpbnB1dC50cmFja3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIEhUTUw1IG9yIGVtYmVkIGJ1dCBub3QgZnVsbHkgc3VwcG9ydGVkLCBzZXR1cEludGVyZmFjZSBhbmQgY2FsbCByZWFkeSBub3dcbiAgICAgICAgaWYgKHRoaXMuaXNIVE1MNSB8fCAodGhpcy5pc0VtYmVkICYmICF0aGlzLnN1cHBvcnRlZC51aSkpIHtcbiAgICAgICAgICAvLyBTZXR1cCBpbnRlcmZhY2VcbiAgICAgICAgICB1aS5idWlsZC5jYWxsKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCBIVE1MNSBzb3VyY2VzXG4gICAgICAgIGlmICh0aGlzLmlzSFRNTDUpIHtcbiAgICAgICAgICB0aGlzLm1lZGlhLmxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBwcmV2aWV3VGh1bWJuYWlscyBjb25maWcgJiByZWxvYWQgcGx1Z2luXG4gICAgICAgIGlmICghaXMuZW1wdHkoaW5wdXQucHJldmlld1RodW1ibmFpbHMpKSB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscywgaW5wdXQucHJldmlld1RodW1ibmFpbHMpO1xuXG4gICAgICAgICAgLy8gQ2xlYW51cCBwcmV2aWV3VGh1bWJuYWlscyBwbHVnaW4gaWYgaXQgd2FzIGxvYWRlZFxuICAgICAgICAgIGlmICh0aGlzLnByZXZpZXdUaHVtYm5haWxzICYmIHRoaXMucHJldmlld1RodW1ibmFpbHMubG9hZGVkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXdUaHVtYm5haWxzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlld1RodW1ibmFpbHMgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBuZXcgaW5zdGFuY2UgaWYgaXQgaXMgc3RpbGwgZW5hYmxlZFxuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscy5lbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXdUaHVtYm5haWxzID0gbmV3IFByZXZpZXdUaHVtYm5haWxzKHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZnVsbHNjcmVlbiBzdXBwb3J0XG4gICAgICAgIHRoaXMuZnVsbHNjcmVlbi51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICB0cnVlLFxuICAgICk7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzb3VyY2U7XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUGx5clxuLy8gcGx5ci5qcyB2My42LjJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYW1wb3R0cy9wbHlyXG4vLyBMaWNlbnNlOiBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCBjYXB0aW9ucyBmcm9tICcuL2NhcHRpb25zJztcbmltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2NvbmZpZy9kZWZhdWx0cyc7XG5pbXBvcnQgeyBwaXAgfSBmcm9tICcuL2NvbmZpZy9zdGF0ZXMnO1xuaW1wb3J0IHsgZ2V0UHJvdmlkZXJCeVVybCwgcHJvdmlkZXJzLCB0eXBlcyB9IGZyb20gJy4vY29uZmlnL3R5cGVzJztcbmltcG9ydCBDb25zb2xlIGZyb20gJy4vY29uc29sZSc7XG5pbXBvcnQgY29udHJvbHMgZnJvbSAnLi9jb250cm9scyc7XG5pbXBvcnQgRnVsbHNjcmVlbiBmcm9tICcuL2Z1bGxzY3JlZW4nO1xuaW1wb3J0IExpc3RlbmVycyBmcm9tICcuL2xpc3RlbmVycyc7XG5pbXBvcnQgbWVkaWEgZnJvbSAnLi9tZWRpYSc7XG5pbXBvcnQgQWRzIGZyb20gJy4vcGx1Z2lucy9hZHMnO1xuaW1wb3J0IFByZXZpZXdUaHVtYm5haWxzIGZyb20gJy4vcGx1Z2lucy9wcmV2aWV3LXRodW1ibmFpbHMnO1xuaW1wb3J0IHNvdXJjZSBmcm9tICcuL3NvdXJjZSc7XG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UnO1xuaW1wb3J0IHN1cHBvcnQgZnJvbSAnLi9zdXBwb3J0JztcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCB7IGNsb3Nlc3QgfSBmcm9tICcuL3V0aWxzL2FycmF5cyc7XG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBoYXNDbGFzcywgcmVtb3ZlRWxlbWVudCwgcmVwbGFjZUVsZW1lbnQsIHRvZ2dsZUNsYXNzLCB3cmFwIH0gZnJvbSAnLi91dGlscy9lbGVtZW50cyc7XG5pbXBvcnQgeyBvZmYsIG9uLCBvbmNlLCB0cmlnZ2VyRXZlbnQsIHVuYmluZExpc3RlbmVycyB9IGZyb20gJy4vdXRpbHMvZXZlbnRzJztcbmltcG9ydCBpcyBmcm9tICcuL3V0aWxzL2lzJztcbmltcG9ydCBsb2FkU3ByaXRlIGZyb20gJy4vdXRpbHMvbG9hZC1zcHJpdGUnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL3V0aWxzL251bWJlcnMnO1xuaW1wb3J0IHsgY2xvbmVEZWVwLCBleHRlbmQgfSBmcm9tICcuL3V0aWxzL29iamVjdHMnO1xuaW1wb3J0IHsgc2lsZW5jZVByb21pc2UgfSBmcm9tICcuL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHsgZ2V0QXNwZWN0UmF0aW8sIHJlZHVjZUFzcGVjdFJhdGlvLCBzZXRBc3BlY3RSYXRpbywgdmFsaWRhdGVSYXRpbyB9IGZyb20gJy4vdXRpbHMvc3R5bGUnO1xuaW1wb3J0IHsgcGFyc2VVcmwgfSBmcm9tICcuL3V0aWxzL3VybHMnO1xuXG4vLyBQcml2YXRlIHByb3BlcnRpZXNcbi8vIFRPRE86IFVzZSBhIFdlYWtNYXAgZm9yIHByaXZhdGUgZ2xvYmFsc1xuLy8gY29uc3QgZ2xvYmFscyA9IG5ldyBXZWFrTWFwKCk7XG5cbi8vIFBseXIgaW5zdGFuY2VcbmNsYXNzIFBseXIge1xuICBjb25zdHJ1Y3Rvcih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnRpbWVycyA9IHt9O1xuXG4gICAgLy8gU3RhdGVcbiAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5mYWlsZWQgPSBmYWxzZTtcblxuICAgIC8vIFRvdWNoIGRldmljZVxuICAgIHRoaXMudG91Y2ggPSBzdXBwb3J0LnRvdWNoO1xuXG4gICAgLy8gU2V0IHRoZSBtZWRpYSBlbGVtZW50XG4gICAgdGhpcy5tZWRpYSA9IHRhcmdldDtcblxuICAgIC8vIFN0cmluZyBzZWxlY3RvciBwYXNzZWRcbiAgICBpZiAoaXMuc3RyaW5nKHRoaXMubWVkaWEpKSB7XG4gICAgICB0aGlzLm1lZGlhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLm1lZGlhKTtcbiAgICB9XG5cbiAgICAvLyBqUXVlcnksIE5vZGVMaXN0IG9yIEFycmF5IHBhc3NlZCwgdXNlIGZpcnN0IGVsZW1lbnRcbiAgICBpZiAoKHdpbmRvdy5qUXVlcnkgJiYgdGhpcy5tZWRpYSBpbnN0YW5jZW9mIGpRdWVyeSkgfHwgaXMubm9kZUxpc3QodGhpcy5tZWRpYSkgfHwgaXMuYXJyYXkodGhpcy5tZWRpYSkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgdGhpcy5tZWRpYSA9IHRoaXMubWVkaWFbMF07XG4gICAgfVxuXG4gICAgLy8gU2V0IGNvbmZpZ1xuICAgIHRoaXMuY29uZmlnID0gZXh0ZW5kKFxuICAgICAge30sXG4gICAgICBkZWZhdWx0cyxcbiAgICAgIFBseXIuZGVmYXVsdHMsXG4gICAgICBvcHRpb25zIHx8IHt9LFxuICAgICAgKCgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLm1lZGlhLmdldEF0dHJpYnV0ZSgnZGF0YS1wbHlyLWNvbmZpZycpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICApO1xuXG4gICAgLy8gRWxlbWVudHMgY2FjaGVcbiAgICB0aGlzLmVsZW1lbnRzID0ge1xuICAgICAgY29udGFpbmVyOiBudWxsLFxuICAgICAgZnVsbHNjcmVlbjogbnVsbCxcbiAgICAgIGNhcHRpb25zOiBudWxsLFxuICAgICAgYnV0dG9uczoge30sXG4gICAgICBkaXNwbGF5OiB7fSxcbiAgICAgIHByb2dyZXNzOiB7fSxcbiAgICAgIGlucHV0czoge30sXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBwb3B1cDogbnVsbCxcbiAgICAgICAgbWVudTogbnVsbCxcbiAgICAgICAgcGFuZWxzOiB7fSxcbiAgICAgICAgYnV0dG9uczoge30sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICAvLyBDYXB0aW9uc1xuICAgIHRoaXMuY2FwdGlvbnMgPSB7XG4gICAgICBhY3RpdmU6IG51bGwsXG4gICAgICBjdXJyZW50VHJhY2s6IC0xLFxuICAgICAgbWV0YTogbmV3IFdlYWtNYXAoKSxcbiAgICB9O1xuXG4gICAgLy8gRnVsbHNjcmVlblxuICAgIHRoaXMuZnVsbHNjcmVlbiA9IHtcbiAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgfTtcblxuICAgIC8vIE9wdGlvbnNcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBzcGVlZDogW10sXG4gICAgICBxdWFsaXR5OiBbXSxcbiAgICB9O1xuXG4gICAgLy8gRGVidWdnaW5nXG4gICAgLy8gVE9ETzogbW92ZSB0byBnbG9iYWxzXG4gICAgdGhpcy5kZWJ1ZyA9IG5ldyBDb25zb2xlKHRoaXMuY29uZmlnLmRlYnVnKTtcblxuICAgIC8vIExvZyBjb25maWcgb3B0aW9ucyBhbmQgc3VwcG9ydFxuICAgIHRoaXMuZGVidWcubG9nKCdDb25maWcnLCB0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5kZWJ1Zy5sb2coJ1N1cHBvcnQnLCBzdXBwb3J0KTtcblxuICAgIC8vIFdlIG5lZWQgYW4gZWxlbWVudCB0byBzZXR1cFxuICAgIGlmIChpcy5udWxsT3JVbmRlZmluZWQodGhpcy5tZWRpYSkgfHwgIWlzLmVsZW1lbnQodGhpcy5tZWRpYSkpIHtcbiAgICAgIHRoaXMuZGVidWcuZXJyb3IoJ1NldHVwIGZhaWxlZDogbm8gc3VpdGFibGUgZWxlbWVudCBwYXNzZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBCYWlsIGlmIHRoZSBlbGVtZW50IGlzIGluaXRpYWxpemVkXG4gICAgaWYgKHRoaXMubWVkaWEucGx5cikge1xuICAgICAgdGhpcy5kZWJ1Zy53YXJuKCdUYXJnZXQgYWxyZWFkeSBzZXR1cCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEJhaWwgaWYgbm90IGVuYWJsZWRcbiAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZGVidWcuZXJyb3IoJ1NldHVwIGZhaWxlZDogZGlzYWJsZWQgYnkgY29uZmlnJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQmFpbCBpZiBkaXNhYmxlZCBvciBubyBiYXNpYyBzdXBwb3J0XG4gICAgLy8gWW91IG1heSB3YW50IHRvIGRpc2FibGUgY2VydGFpbiBVQXMgZXRjXG4gICAgaWYgKCFzdXBwb3J0LmNoZWNrKCkuYXBpKSB7XG4gICAgICB0aGlzLmRlYnVnLmVycm9yKCdTZXR1cCBmYWlsZWQ6IG5vIHN1cHBvcnQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDYWNoZSBvcmlnaW5hbCBlbGVtZW50IHN0YXRlIGZvciAuZGVzdHJveSgpXG4gICAgY29uc3QgY2xvbmUgPSB0aGlzLm1lZGlhLmNsb25lTm9kZSh0cnVlKTtcbiAgICBjbG9uZS5hdXRvcGxheSA9IGZhbHNlO1xuICAgIHRoaXMuZWxlbWVudHMub3JpZ2luYWwgPSBjbG9uZTtcblxuICAgIC8vIFNldCBtZWRpYSB0eXBlIGJhc2VkIG9uIHRhZyBvciBkYXRhIGF0dHJpYnV0ZVxuICAgIC8vIFN1cHBvcnRlZDogdmlkZW8sIGF1ZGlvLCB2aW1lbywgeW91dHViZVxuICAgIGNvbnN0IHR5cGUgPSB0aGlzLm1lZGlhLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAvLyBFbWJlZCBwcm9wZXJ0aWVzXG4gICAgbGV0IGlmcmFtZSA9IG51bGw7XG4gICAgbGV0IHVybCA9IG51bGw7XG5cbiAgICAvLyBEaWZmZXJlbnQgc2V0dXAgYmFzZWQgb24gdHlwZVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnZGl2JzpcbiAgICAgICAgLy8gRmluZCB0aGUgZnJhbWVcbiAgICAgICAgaWZyYW1lID0gdGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTtcblxuICAgICAgICAvLyA8aWZyYW1lPiB0eXBlXG4gICAgICAgIGlmIChpcy5lbGVtZW50KGlmcmFtZSkpIHtcbiAgICAgICAgICAvLyBEZXRlY3QgcHJvdmlkZXJcbiAgICAgICAgICB1cmwgPSBwYXJzZVVybChpZnJhbWUuZ2V0QXR0cmlidXRlKCdzcmMnKSk7XG4gICAgICAgICAgdGhpcy5wcm92aWRlciA9IGdldFByb3ZpZGVyQnlVcmwodXJsLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgLy8gUmV3b3JrIGVsZW1lbnRzXG4gICAgICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSB0aGlzLm1lZGlhO1xuICAgICAgICAgIHRoaXMubWVkaWEgPSBpZnJhbWU7XG5cbiAgICAgICAgICAvLyBSZXNldCBjbGFzc25hbWVcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc05hbWUgPSAnJztcblxuICAgICAgICAgIC8vIEdldCBhdHRyaWJ1dGVzIGZyb20gVVJMIGFuZCBzZXQgY29uZmlnXG4gICAgICAgICAgaWYgKHVybC5zZWFyY2gubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCB0cnV0aHkgPSBbJzEnLCAndHJ1ZSddO1xuXG4gICAgICAgICAgICBpZiAodHJ1dGh5LmluY2x1ZGVzKHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdhdXRvcGxheScpKSkge1xuICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJ1dGh5LmluY2x1ZGVzKHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdsb29wJykpKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETzogcmVwbGFjZSBmdWxsc2NyZWVuLmlvc05hdGl2ZSB3aXRoIHRoaXMgcGxheXNpbmxpbmUgY29uZmlnIG9wdGlvblxuICAgICAgICAgICAgLy8gWW91VHViZSByZXF1aXJlcyB0aGUgcGxheXNpbmxpbmUgaW4gdGhlIFVSTFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNZb3VUdWJlKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29uZmlnLnBsYXlzaW5saW5lID0gdHJ1dGh5LmluY2x1ZGVzKHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdwbGF5c2lubGluZScpKTtcbiAgICAgICAgICAgICAgdGhpcy5jb25maWcueW91dHViZS5obCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdobCcpOyAvLyBUT0RPOiBTaG91bGQgdGhpcyBiZSBzZXR0aW5nIGxhbmd1YWdlP1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5jb25maWcucGxheXNpbmxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyA8ZGl2PiB3aXRoIGF0dHJpYnV0ZXNcbiAgICAgICAgICB0aGlzLnByb3ZpZGVyID0gdGhpcy5tZWRpYS5nZXRBdHRyaWJ1dGUodGhpcy5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5wcm92aWRlcik7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgYXR0cmlidXRlXG4gICAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVBdHRyaWJ1dGUodGhpcy5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5wcm92aWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVbnN1cHBvcnRlZCBvciBtaXNzaW5nIHByb3ZpZGVyXG4gICAgICAgIGlmIChpcy5lbXB0eSh0aGlzLnByb3ZpZGVyKSB8fCAhT2JqZWN0LmtleXMocHJvdmlkZXJzKS5pbmNsdWRlcyh0aGlzLnByb3ZpZGVyKSkge1xuICAgICAgICAgIHRoaXMuZGVidWcuZXJyb3IoJ1NldHVwIGZhaWxlZDogSW52YWxpZCBwcm92aWRlcicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF1ZGlvIHdpbGwgY29tZSBsYXRlciBmb3IgZXh0ZXJuYWwgcHJvdmlkZXJzXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGVzLnZpZGVvO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd2aWRlbyc6XG4gICAgICBjYXNlICdhdWRpbyc6XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcnMuaHRtbDU7XG5cbiAgICAgICAgLy8gR2V0IGNvbmZpZyBmcm9tIGF0dHJpYnV0ZXNcbiAgICAgICAgaWYgKHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKCdjcm9zc29yaWdpbicpKSB7XG4gICAgICAgICAgdGhpcy5jb25maWcuY3Jvc3NvcmlnaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1lZGlhLmhhc0F0dHJpYnV0ZSgnYXV0b3BsYXknKSkge1xuICAgICAgICAgIHRoaXMuY29uZmlnLmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJykgfHwgdGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScpKSB7XG4gICAgICAgICAgdGhpcy5jb25maWcucGxheXNpbmxpbmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1lZGlhLmhhc0F0dHJpYnV0ZSgnbXV0ZWQnKSkge1xuICAgICAgICAgIHRoaXMuY29uZmlnLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoJ2xvb3AnKSkge1xuICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLmRlYnVnLmVycm9yKCdTZXR1cCBmYWlsZWQ6IHVuc3VwcG9ydGVkIHR5cGUnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBzdXBwb3J0IGFnYWluIGJ1dCB3aXRoIHR5cGVcbiAgICB0aGlzLnN1cHBvcnRlZCA9IHN1cHBvcnQuY2hlY2sodGhpcy50eXBlLCB0aGlzLnByb3ZpZGVyLCB0aGlzLmNvbmZpZy5wbGF5c2lubGluZSk7XG5cbiAgICAvLyBJZiBubyBzdXBwb3J0IGZvciBldmVuIEFQSSwgYmFpbFxuICAgIGlmICghdGhpcy5zdXBwb3J0ZWQuYXBpKSB7XG4gICAgICB0aGlzLmRlYnVnLmVycm9yKCdTZXR1cCBmYWlsZWQ6IG5vIHN1cHBvcnQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzID0gW107XG5cbiAgICAvLyBDcmVhdGUgbGlzdGVuZXJzXG4gICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgTGlzdGVuZXJzKHRoaXMpO1xuXG4gICAgLy8gU2V0dXAgbG9jYWwgc3RvcmFnZSBmb3IgdXNlciBzZXR0aW5nc1xuICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBTdG9yYWdlKHRoaXMpO1xuXG4gICAgLy8gU3RvcmUgcmVmZXJlbmNlXG4gICAgdGhpcy5tZWRpYS5wbHlyID0gdGhpcztcblxuICAgIC8vIFdyYXAgbWVkaWFcbiAgICBpZiAoIWlzLmVsZW1lbnQodGhpcy5lbGVtZW50cy5jb250YWluZXIpKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgdGFiaW5kZXg6IDAgfSk7XG4gICAgICB3cmFwKHRoaXMubWVkaWEsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gbWVkaWEgdG8gY29udGFpbmVyIChzbyB0aGV5IHdvcmsg8J+YiSlcbiAgICB1aS5taWdyYXRlU3R5bGVzLmNhbGwodGhpcyk7XG5cbiAgICAvLyBBZGQgc3R5bGUgaG9va1xuICAgIHVpLmFkZFN0eWxlSG9vay5jYWxsKHRoaXMpO1xuXG4gICAgLy8gU2V0dXAgbWVkaWFcbiAgICBtZWRpYS5zZXR1cC5jYWxsKHRoaXMpO1xuXG4gICAgLy8gTGlzdGVuIGZvciBldmVudHMgaWYgZGVidWdnaW5nXG4gICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnKSB7XG4gICAgICBvbi5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB0aGlzLmNvbmZpZy5ldmVudHMuam9pbignICcpLCBldmVudCA9PiB7XG4gICAgICAgIHRoaXMuZGVidWcubG9nKGBldmVudDogJHtldmVudC50eXBlfWApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgZnVsbHNjcmVlblxuICAgIHRoaXMuZnVsbHNjcmVlbiA9IG5ldyBGdWxsc2NyZWVuKHRoaXMpO1xuXG4gICAgLy8gU2V0dXAgaW50ZXJmYWNlXG4gICAgLy8gSWYgZW1iZWQgYnV0IG5vdCBmdWxseSBzdXBwb3J0ZWQsIGJ1aWxkIGludGVyZmFjZSBub3cgdG8gYXZvaWQgZmxhc2ggb2YgY29udHJvbHNcbiAgICBpZiAodGhpcy5pc0hUTUw1IHx8ICh0aGlzLmlzRW1iZWQgJiYgIXRoaXMuc3VwcG9ydGVkLnVpKSkge1xuICAgICAgdWkuYnVpbGQuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBDb250YWluZXIgbGlzdGVuZXJzXG4gICAgdGhpcy5saXN0ZW5lcnMuY29udGFpbmVyKCk7XG5cbiAgICAvLyBHbG9iYWwgbGlzdGVuZXJzXG4gICAgdGhpcy5saXN0ZW5lcnMuZ2xvYmFsKCk7XG5cbiAgICAvLyBTZXR1cCBhZHMgaWYgcHJvdmlkZWRcbiAgICBpZiAodGhpcy5jb25maWcuYWRzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuYWRzID0gbmV3IEFkcyh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBBdXRvcGxheSBpZiByZXF1aXJlZFxuICAgIGlmICh0aGlzLmlzSFRNTDUgJiYgdGhpcy5jb25maWcuYXV0b3BsYXkpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2lsZW5jZVByb21pc2UodGhpcy5wbGF5KCkpLCAxMCk7XG4gICAgfVxuXG4gICAgLy8gU2VlayB0aW1lIHdpbGwgYmUgcmVjb3JkZWQgKGluIGxpc3RlbmVycy5qcykgc28gd2UgY2FuIHByZXZlbnQgaGlkaW5nIGNvbnRyb2xzIGZvciBhIGZldyBzZWNvbmRzIGFmdGVyIHNlZWtcbiAgICB0aGlzLmxhc3RTZWVrVGltZSA9IDA7XG5cbiAgICAvLyBTZXR1cCBwcmV2aWV3IHRodW1ibmFpbHMgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscy5lbmFibGVkKSB7XG4gICAgICB0aGlzLnByZXZpZXdUaHVtYm5haWxzID0gbmV3IFByZXZpZXdUaHVtYm5haWxzKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBBUElcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLyoqXG4gICAqIFR5cGVzIGFuZCBwcm92aWRlciBoZWxwZXJzXG4gICAqL1xuICBnZXQgaXNIVE1MNSgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm92aWRlciA9PT0gcHJvdmlkZXJzLmh0bWw1O1xuICB9XG5cbiAgZ2V0IGlzRW1iZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNZb3VUdWJlIHx8IHRoaXMuaXNWaW1lbztcbiAgfVxuXG4gIGdldCBpc1lvdVR1YmUoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXIgPT09IHByb3ZpZGVycy55b3V0dWJlO1xuICB9XG5cbiAgZ2V0IGlzVmltZW8oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXIgPT09IHByb3ZpZGVycy52aW1lbztcbiAgfVxuXG4gIGdldCBpc1ZpZGVvKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IHR5cGVzLnZpZGVvO1xuICB9XG5cbiAgZ2V0IGlzQXVkaW8oKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gdHlwZXMuYXVkaW87XG4gIH1cblxuICAvKipcbiAgICogUGxheSB0aGUgbWVkaWEsIG9yIHBsYXkgdGhlIGFkdmVydGlzZW1lbnQgKGlmIHRoZXkgYXJlIG5vdCBibG9ja2VkKVxuICAgKi9cbiAgcGxheSgpIHtcbiAgICBpZiAoIWlzLmZ1bmN0aW9uKHRoaXMubWVkaWEucGxheSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEludGVjZXB0IHBsYXkgd2l0aCBhZHNcbiAgICBpZiAodGhpcy5hZHMgJiYgdGhpcy5hZHMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5hZHMubWFuYWdlclByb21pc2UudGhlbigoKSA9PiB0aGlzLmFkcy5wbGF5KCkpLmNhdGNoKCgpID0+IHNpbGVuY2VQcm9taXNlKHRoaXMubWVkaWEucGxheSgpKSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBwcm9taXNlIChmb3IgSFRNTDUpXG4gICAgcmV0dXJuIHRoaXMubWVkaWEucGxheSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlIHRoZSBtZWRpYVxuICAgKi9cbiAgcGF1c2UoKSB7XG4gICAgaWYgKCF0aGlzLnBsYXlpbmcgfHwgIWlzLmZ1bmN0aW9uKHRoaXMubWVkaWEucGF1c2UpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZWRpYS5wYXVzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwbGF5aW5nIHN0YXRlXG4gICAqL1xuICBnZXQgcGxheWluZygpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLnJlYWR5ICYmICF0aGlzLnBhdXNlZCAmJiAhdGhpcy5lbmRlZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhdXNlZCBzdGF0ZVxuICAgKi9cbiAgZ2V0IHBhdXNlZCgpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLm1lZGlhLnBhdXNlZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0b3BwZWQgc3RhdGVcbiAgICovXG4gIGdldCBzdG9wcGVkKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMucGF1c2VkICYmIHRoaXMuY3VycmVudFRpbWUgPT09IDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbmRlZCBzdGF0ZVxuICAgKi9cbiAgZ2V0IGVuZGVkKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMubWVkaWEuZW5kZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBwbGF5YmFjayBiYXNlZCBvbiBjdXJyZW50IHN0YXR1c1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlucHV0XG4gICAqL1xuICB0b2dnbGVQbGF5KGlucHV0KSB7XG4gICAgLy8gVG9nZ2xlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGUgaWYgbm90aGluZyBwYXNzZWRcbiAgICBjb25zdCB0b2dnbGUgPSBpcy5ib29sZWFuKGlucHV0KSA/IGlucHV0IDogIXRoaXMucGxheWluZztcblxuICAgIGlmICh0b2dnbGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBsYXkoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXVzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgcGxheWJhY2tcbiAgICovXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgdGhpcy5yZXN0YXJ0KCk7XG4gICAgfSBlbHNlIGlmIChpcy5mdW5jdGlvbih0aGlzLm1lZGlhLnN0b3ApKSB7XG4gICAgICB0aGlzLm1lZGlhLnN0b3AoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzdGFydCBwbGF5YmFja1xuICAgKi9cbiAgcmVzdGFydCgpIHtcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXdpbmRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlZWtUaW1lIC0gaG93IGZhciB0byByZXdpbmQgaW4gc2Vjb25kcy4gRGVmYXVsdHMgdG8gdGhlIGNvbmZpZy5zZWVrVGltZVxuICAgKi9cbiAgcmV3aW5kKHNlZWtUaW1lKSB7XG4gICAgdGhpcy5jdXJyZW50VGltZSAtPSBpcy5udW1iZXIoc2Vla1RpbWUpID8gc2Vla1RpbWUgOiB0aGlzLmNvbmZpZy5zZWVrVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGYXN0IGZvcndhcmRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlZWtUaW1lIC0gaG93IGZhciB0byBmYXN0IGZvcndhcmQgaW4gc2Vjb25kcy4gRGVmYXVsdHMgdG8gdGhlIGNvbmZpZy5zZWVrVGltZVxuICAgKi9cbiAgZm9yd2FyZChzZWVrVGltZSkge1xuICAgIHRoaXMuY3VycmVudFRpbWUgKz0gaXMubnVtYmVyKHNlZWtUaW1lKSA/IHNlZWtUaW1lIDogdGhpcy5jb25maWcuc2Vla1RpbWU7XG4gIH1cblxuICAvKipcbiAgICogU2VlayB0byBhIHRpbWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGlucHV0IC0gd2hlcmUgdG8gc2VlayB0byBpbiBzZWNvbmRzLiBEZWZhdWx0cyB0byAwICh0aGUgc3RhcnQpXG4gICAqL1xuICBzZXQgY3VycmVudFRpbWUoaW5wdXQpIHtcbiAgICAvLyBCYWlsIGlmIG1lZGlhIGR1cmF0aW9uIGlzbid0IGF2YWlsYWJsZSB5ZXRcbiAgICBpZiAoIXRoaXMuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxuICAgIGNvbnN0IGlucHV0SXNWYWxpZCA9IGlzLm51bWJlcihpbnB1dCkgJiYgaW5wdXQgPiAwO1xuXG4gICAgLy8gU2V0XG4gICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSA9IGlucHV0SXNWYWxpZCA/IE1hdGgubWluKGlucHV0LCB0aGlzLmR1cmF0aW9uKSA6IDA7XG5cbiAgICAvLyBMb2dnaW5nXG4gICAgdGhpcy5kZWJ1Zy5sb2coYFNlZWtpbmcgdG8gJHt0aGlzLmN1cnJlbnRUaW1lfSBzZWNvbmRzYCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgdGltZVxuICAgKi9cbiAgZ2V0IGN1cnJlbnRUaW1lKCkge1xuICAgIHJldHVybiBOdW1iZXIodGhpcy5tZWRpYS5jdXJyZW50VGltZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGJ1ZmZlcmVkXG4gICAqL1xuICBnZXQgYnVmZmVyZWQoKSB7XG4gICAgY29uc3QgeyBidWZmZXJlZCB9ID0gdGhpcy5tZWRpYTtcblxuICAgIC8vIFlvdVR1YmUgLyBWaW1lbyByZXR1cm4gYSBmbG9hdCBiZXR3ZWVuIDAtMVxuICAgIGlmIChpcy5udW1iZXIoYnVmZmVyZWQpKSB7XG4gICAgICByZXR1cm4gYnVmZmVyZWQ7XG4gICAgfVxuXG4gICAgLy8gSFRNTDVcbiAgICAvLyBUT0RPOiBIYW5kbGUgYnVmZmVyZWQgY2h1bmtzIG9mIHRoZSBtZWRpYVxuICAgIC8vIChpLmUuIHNlZWsgdG8gYW5vdGhlciBzZWN0aW9uIGJ1ZmZlcnMgb25seSB0aGF0IHNlY3Rpb24pXG4gICAgaWYgKGJ1ZmZlcmVkICYmIGJ1ZmZlcmVkLmxlbmd0aCAmJiB0aGlzLmR1cmF0aW9uID4gMCkge1xuICAgICAgcmV0dXJuIGJ1ZmZlcmVkLmVuZCgwKSAvIHRoaXMuZHVyYXRpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlZWtpbmcgc3RhdHVzXG4gICAqL1xuICBnZXQgc2Vla2luZygpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLm1lZGlhLnNlZWtpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhlIGN1cnJlbnQgbWVkaWFcbiAgICovXG4gIGdldCBkdXJhdGlvbigpIHtcbiAgICAvLyBGYXV4IGR1cmF0aW9uIHNldCB2aWEgY29uZmlnXG4gICAgY29uc3QgZmF1eER1cmF0aW9uID0gcGFyc2VGbG9hdCh0aGlzLmNvbmZpZy5kdXJhdGlvbik7XG4gICAgLy8gTWVkaWEgZHVyYXRpb24gY2FuIGJlIE5hTiBvciBJbmZpbml0eSBiZWZvcmUgdGhlIG1lZGlhIGhhcyBsb2FkZWRcbiAgICBjb25zdCByZWFsRHVyYXRpb24gPSAodGhpcy5tZWRpYSB8fCB7fSkuZHVyYXRpb247XG4gICAgY29uc3QgZHVyYXRpb24gPSAhaXMubnVtYmVyKHJlYWxEdXJhdGlvbikgfHwgcmVhbER1cmF0aW9uID09PSBJbmZpbml0eSA/IDAgOiByZWFsRHVyYXRpb247XG5cbiAgICAvLyBJZiBjb25maWcgZHVyYXRpb24gaXMgZnVua3ksIHVzZSByZWd1bGFyIGR1cmF0aW9uXG4gICAgcmV0dXJuIGZhdXhEdXJhdGlvbiB8fCBkdXJhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHBsYXllciB2b2x1bWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEuIERlZmF1bHRzIHRvIHRoZSB2YWx1ZSBmcm9tIGxvY2FsIHN0b3JhZ2UgYW5kIGNvbmZpZy52b2x1bWUgaWYgbm90IHNldCBpbiBzdG9yYWdlXG4gICAqL1xuICBzZXQgdm9sdW1lKHZhbHVlKSB7XG4gICAgbGV0IHZvbHVtZSA9IHZhbHVlO1xuICAgIGNvbnN0IG1heCA9IDE7XG4gICAgY29uc3QgbWluID0gMDtcblxuICAgIGlmIChpcy5zdHJpbmcodm9sdW1lKSkge1xuICAgICAgdm9sdW1lID0gTnVtYmVyKHZvbHVtZSk7XG4gICAgfVxuXG4gICAgLy8gTG9hZCB2b2x1bWUgZnJvbSBzdG9yYWdlIGlmIG5vIHZhbHVlIHNwZWNpZmllZFxuICAgIGlmICghaXMubnVtYmVyKHZvbHVtZSkpIHtcbiAgICAgIHZvbHVtZSA9IHRoaXMuc3RvcmFnZS5nZXQoJ3ZvbHVtZScpO1xuICAgIH1cblxuICAgIC8vIFVzZSBjb25maWcgaWYgYWxsIGVsc2UgZmFpbHNcbiAgICBpZiAoIWlzLm51bWJlcih2b2x1bWUpKSB7XG4gICAgICAoeyB2b2x1bWUgfSA9IHRoaXMuY29uZmlnKTtcbiAgICB9XG5cbiAgICAvLyBNYXhpbXVtIGlzIHZvbHVtZU1heFxuICAgIGlmICh2b2x1bWUgPiBtYXgpIHtcbiAgICAgIHZvbHVtZSA9IG1heDtcbiAgICB9XG4gICAgLy8gTWluaW11bSBpcyB2b2x1bWVNaW5cbiAgICBpZiAodm9sdW1lIDwgbWluKSB7XG4gICAgICB2b2x1bWUgPSBtaW47XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNvbmZpZ1xuICAgIHRoaXMuY29uZmlnLnZvbHVtZSA9IHZvbHVtZTtcblxuICAgIC8vIFNldCB0aGUgcGxheWVyIHZvbHVtZVxuICAgIHRoaXMubWVkaWEudm9sdW1lID0gdm9sdW1lO1xuXG4gICAgLy8gSWYgbXV0ZWQsIGFuZCB3ZSdyZSBpbmNyZWFzaW5nIHZvbHVtZSBtYW51YWxseSwgcmVzZXQgbXV0ZWQgc3RhdGVcbiAgICBpZiAoIWlzLmVtcHR5KHZhbHVlKSAmJiB0aGlzLm11dGVkICYmIHZvbHVtZSA+IDApIHtcbiAgICAgIHRoaXMubXV0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHBsYXllciB2b2x1bWVcbiAgICovXG4gIGdldCB2b2x1bWUoKSB7XG4gICAgcmV0dXJuIE51bWJlcih0aGlzLm1lZGlhLnZvbHVtZSk7XG4gIH1cblxuICAvKipcbiAgICogSW5jcmVhc2Ugdm9sdW1lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RlcCAtIEhvdyBtdWNoIHRvIGRlY3JlYXNlIGJ5IChiZXR3ZWVuIDAgYW5kIDEpXG4gICAqL1xuICBpbmNyZWFzZVZvbHVtZShzdGVwKSB7XG4gICAgY29uc3Qgdm9sdW1lID0gdGhpcy5tZWRpYS5tdXRlZCA/IDAgOiB0aGlzLnZvbHVtZTtcbiAgICB0aGlzLnZvbHVtZSA9IHZvbHVtZSArIChpcy5udW1iZXIoc3RlcCkgPyBzdGVwIDogMCk7XG4gIH1cblxuICAvKipcbiAgICogRGVjcmVhc2Ugdm9sdW1lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RlcCAtIEhvdyBtdWNoIHRvIGRlY3JlYXNlIGJ5IChiZXR3ZWVuIDAgYW5kIDEpXG4gICAqL1xuICBkZWNyZWFzZVZvbHVtZShzdGVwKSB7XG4gICAgdGhpcy5pbmNyZWFzZVZvbHVtZSgtc3RlcCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IG11dGVkIHN0YXRlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbXV0ZVxuICAgKi9cbiAgc2V0IG11dGVkKG11dGUpIHtcbiAgICBsZXQgdG9nZ2xlID0gbXV0ZTtcblxuICAgIC8vIExvYWQgbXV0ZWQgc3RhdGUgZnJvbSBzdG9yYWdlXG4gICAgaWYgKCFpcy5ib29sZWFuKHRvZ2dsZSkpIHtcbiAgICAgIHRvZ2dsZSA9IHRoaXMuc3RvcmFnZS5nZXQoJ211dGVkJyk7XG4gICAgfVxuXG4gICAgLy8gVXNlIGNvbmZpZyBpZiBhbGwgZWxzZSBmYWlsc1xuICAgIGlmICghaXMuYm9vbGVhbih0b2dnbGUpKSB7XG4gICAgICB0b2dnbGUgPSB0aGlzLmNvbmZpZy5tdXRlZDtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY29uZmlnXG4gICAgdGhpcy5jb25maWcubXV0ZWQgPSB0b2dnbGU7XG5cbiAgICAvLyBTZXQgbXV0ZSBvbiB0aGUgcGxheWVyXG4gICAgdGhpcy5tZWRpYS5tdXRlZCA9IHRvZ2dsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBtdXRlZCBzdGF0ZVxuICAgKi9cbiAgZ2V0IG11dGVkKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMubWVkaWEubXV0ZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBtZWRpYSBoYXMgYXVkaW9cbiAgICovXG4gIGdldCBoYXNBdWRpbygpIHtcbiAgICAvLyBBc3N1bWUgeWVzIGZvciBhbGwgbm9uIEhUTUw1IChhcyB3ZSBjYW4ndCB0ZWxsLi4uKVxuICAgIGlmICghdGhpcy5pc0hUTUw1KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0F1ZGlvKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBHZXQgYXVkaW8gdHJhY2tzXG4gICAgcmV0dXJuIChcbiAgICAgIEJvb2xlYW4odGhpcy5tZWRpYS5tb3pIYXNBdWRpbykgfHxcbiAgICAgIEJvb2xlYW4odGhpcy5tZWRpYS53ZWJraXRBdWRpb0RlY29kZWRCeXRlQ291bnQpIHx8XG4gICAgICBCb29sZWFuKHRoaXMubWVkaWEuYXVkaW9UcmFja3MgJiYgdGhpcy5tZWRpYS5hdWRpb1RyYWNrcy5sZW5ndGgpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcGxheWJhY2sgc3BlZWRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNwZWVkIC0gdGhlIHNwZWVkIG9mIHBsYXliYWNrICgwLjUtMi4wKVxuICAgKi9cbiAgc2V0IHNwZWVkKGlucHV0KSB7XG4gICAgbGV0IHNwZWVkID0gbnVsbDtcblxuICAgIGlmIChpcy5udW1iZXIoaW5wdXQpKSB7XG4gICAgICBzcGVlZCA9IGlucHV0O1xuICAgIH1cblxuICAgIGlmICghaXMubnVtYmVyKHNwZWVkKSkge1xuICAgICAgc3BlZWQgPSB0aGlzLnN0b3JhZ2UuZ2V0KCdzcGVlZCcpO1xuICAgIH1cblxuICAgIGlmICghaXMubnVtYmVyKHNwZWVkKSkge1xuICAgICAgc3BlZWQgPSB0aGlzLmNvbmZpZy5zcGVlZC5zZWxlY3RlZDtcbiAgICB9XG5cbiAgICAvLyBDbGFtcCB0byBtaW4vbWF4XG4gICAgY29uc3QgeyBtaW5pbXVtU3BlZWQ6IG1pbiwgbWF4aW11bVNwZWVkOiBtYXggfSA9IHRoaXM7XG4gICAgc3BlZWQgPSBjbGFtcChzcGVlZCwgbWluLCBtYXgpO1xuXG4gICAgLy8gVXBkYXRlIGNvbmZpZ1xuICAgIHRoaXMuY29uZmlnLnNwZWVkLnNlbGVjdGVkID0gc3BlZWQ7XG5cbiAgICAvLyBTZXQgbWVkaWEgc3BlZWRcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubWVkaWEucGxheWJhY2tSYXRlID0gc3BlZWQ7XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgcGxheWJhY2sgc3BlZWRcbiAgICovXG4gIGdldCBzcGVlZCgpIHtcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubWVkaWEucGxheWJhY2tSYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gYWxsb3dlZCBzcGVlZFxuICAgKi9cbiAgZ2V0IG1pbmltdW1TcGVlZCgpIHtcbiAgICBpZiAodGhpcy5pc1lvdVR1YmUpIHtcbiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3lvdXR1YmUvaWZyYW1lX2FwaV9yZWZlcmVuY2Ujc2V0UGxheWJhY2tSYXRlXG4gICAgICByZXR1cm4gTWF0aC5taW4oLi4udGhpcy5vcHRpb25zLnNwZWVkKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1ZpbWVvKSB7XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmltZW8vcGxheWVyLmpzLyNzZXRwbGF5YmFja3JhdGVwbGF5YmFja3JhdGUtbnVtYmVyLXByb21pc2VudW1iZXItcmFuZ2VlcnJvcmVycm9yXG4gICAgICByZXR1cm4gMC41O1xuICAgIH1cblxuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMjMyMDAyMC8xMTkxMzE5XG4gICAgcmV0dXJuIDAuMDYyNTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gYWxsb3dlZCBzcGVlZFxuICAgKi9cbiAgZ2V0IG1heGltdW1TcGVlZCgpIHtcbiAgICBpZiAodGhpcy5pc1lvdVR1YmUpIHtcbiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3lvdXR1YmUvaWZyYW1lX2FwaV9yZWZlcmVuY2Ujc2V0UGxheWJhY2tSYXRlXG4gICAgICByZXR1cm4gTWF0aC5tYXgoLi4udGhpcy5vcHRpb25zLnNwZWVkKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1ZpbWVvKSB7XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmltZW8vcGxheWVyLmpzLyNzZXRwbGF5YmFja3JhdGVwbGF5YmFja3JhdGUtbnVtYmVyLXByb21pc2VudW1iZXItcmFuZ2VlcnJvcmVycm9yXG4gICAgICByZXR1cm4gMjtcbiAgICB9XG5cbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzIzMjAwMjAvMTE5MTMxOVxuICAgIHJldHVybiAxNjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcGxheWJhY2sgcXVhbGl0eVxuICAgKiBDdXJyZW50bHkgSFRNTDUgJiBZb3VUdWJlIG9ubHlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGlucHV0IC0gUXVhbGl0eSBsZXZlbFxuICAgKi9cbiAgc2V0IHF1YWxpdHkoaW5wdXQpIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZy5xdWFsaXR5O1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMucXVhbGl0eTtcblxuICAgIGlmICghb3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgcXVhbGl0eSA9IFtcbiAgICAgICFpcy5lbXB0eShpbnB1dCkgJiYgTnVtYmVyKGlucHV0KSxcbiAgICAgIHRoaXMuc3RvcmFnZS5nZXQoJ3F1YWxpdHknKSxcbiAgICAgIGNvbmZpZy5zZWxlY3RlZCxcbiAgICAgIGNvbmZpZy5kZWZhdWx0LFxuICAgIF0uZmluZChpcy5udW1iZXIpO1xuXG4gICAgbGV0IHVwZGF0ZVN0b3JhZ2UgPSB0cnVlO1xuXG4gICAgaWYgKCFvcHRpb25zLmluY2x1ZGVzKHF1YWxpdHkpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNsb3Nlc3Qob3B0aW9ucywgcXVhbGl0eSk7XG4gICAgICB0aGlzLmRlYnVnLndhcm4oYFVuc3VwcG9ydGVkIHF1YWxpdHkgb3B0aW9uOiAke3F1YWxpdHl9LCB1c2luZyAke3ZhbHVlfSBpbnN0ZWFkYCk7XG4gICAgICBxdWFsaXR5ID0gdmFsdWU7XG5cbiAgICAgIC8vIERvbid0IHVwZGF0ZSBzdG9yYWdlIGlmIHF1YWxpdHkgaXMgbm90IHN1cHBvcnRlZFxuICAgICAgdXBkYXRlU3RvcmFnZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjb25maWdcbiAgICBjb25maWcuc2VsZWN0ZWQgPSBxdWFsaXR5O1xuXG4gICAgLy8gU2V0IHF1YWxpdHlcbiAgICB0aGlzLm1lZGlhLnF1YWxpdHkgPSBxdWFsaXR5O1xuXG4gICAgLy8gU2F2ZSB0byBzdG9yYWdlXG4gICAgaWYgKHVwZGF0ZVN0b3JhZ2UpIHtcbiAgICAgIHRoaXMuc3RvcmFnZS5zZXQoeyBxdWFsaXR5IH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBxdWFsaXR5IGxldmVsXG4gICAqL1xuICBnZXQgcXVhbGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZWRpYS5xdWFsaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBsb29wXG4gICAqIFRPRE86IEZpbmlzaCBmYW5jeSBuZXcgbG9naWMuIFNldCB0aGUgaW5kaWNhdG9yIG9uIGxvYWQgYXMgdXNlciBtYXkgcGFzcyBsb29wIGFzIGNvbmZpZ1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlucHV0IC0gV2hldGhlciB0byBsb29wIG9yIG5vdFxuICAgKi9cbiAgc2V0IGxvb3AoaW5wdXQpIHtcbiAgICBjb25zdCB0b2dnbGUgPSBpcy5ib29sZWFuKGlucHV0KSA/IGlucHV0IDogdGhpcy5jb25maWcubG9vcC5hY3RpdmU7XG4gICAgdGhpcy5jb25maWcubG9vcC5hY3RpdmUgPSB0b2dnbGU7XG4gICAgdGhpcy5tZWRpYS5sb29wID0gdG9nZ2xlO1xuXG4gICAgLy8gU2V0IGRlZmF1bHQgdG8gYmUgYSB0cnVlIHRvZ2dsZVxuICAgIC8qIGNvbnN0IHR5cGUgPSBbJ3N0YXJ0JywgJ2VuZCcsICdhbGwnLCAnbm9uZScsICd0b2dnbGUnXS5pbmNsdWRlcyhpbnB1dCkgPyBpbnB1dCA6ICd0b2dnbGUnO1xuXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5sb29wLmVuZCAmJiB0aGlzLmNvbmZpZy5sb29wLmVuZCA8PSB0aGlzLmN1cnJlbnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuZW5kID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5zdGFydCA9IHRoaXMuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5jb25maWcubG9vcC5pbmRpY2F0b3Iuc3RhcnQgPSB0aGlzLmVsZW1lbnRzLmRpc3BsYXkucGxheWVkLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5sb29wLnN0YXJ0ID49IHRoaXMuY3VycmVudFRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuZW5kID0gdGhpcy5jdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbmZpZy5sb29wLmluZGljYXRvci5lbmQgPSB0aGlzLmVsZW1lbnRzLmRpc3BsYXkucGxheWVkLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdhbGwnOlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3Auc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuZW5kID0gdGhpcy5kdXJhdGlvbiAtIDI7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5pbmRpY2F0b3Iuc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuaW5kaWNhdG9yLmVuZCA9IDEwMDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAndG9nZ2xlJzpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcubG9vcC5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5zdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvb3AuZW5kID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb29wLnN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5lbmQgPSB0aGlzLmR1cmF0aW9uIC0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5zdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9vcC5lbmQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9ICovXG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgbG9vcCBzdGF0ZVxuICAgKi9cbiAgZ2V0IGxvb3AoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5sb29wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbmV3IG1lZGlhIHNvdXJjZVxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXQgLSBUaGUgbmV3IHNvdXJjZSBvYmplY3QgKHNlZSBkb2NzKVxuICAgKi9cbiAgc2V0IHNvdXJjZShpbnB1dCkge1xuICAgIHNvdXJjZS5jaGFuZ2UuY2FsbCh0aGlzLCBpbnB1dCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgc291cmNlXG4gICAqL1xuICBnZXQgc291cmNlKCkge1xuICAgIHJldHVybiB0aGlzLm1lZGlhLmN1cnJlbnRTcmM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgZG93bmxvYWQgVVJMIChlaXRoZXIgc291cmNlIG9yIGN1c3RvbSlcbiAgICovXG4gIGdldCBkb3dubG9hZCgpIHtcbiAgICBjb25zdCB7IGRvd25sb2FkIH0gPSB0aGlzLmNvbmZpZy51cmxzO1xuXG4gICAgcmV0dXJuIGlzLnVybChkb3dubG9hZCkgPyBkb3dubG9hZCA6IHRoaXMuc291cmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZG93bmxvYWQgVVJMXG4gICAqL1xuICBzZXQgZG93bmxvYWQoaW5wdXQpIHtcbiAgICBpZiAoIWlzLnVybChpbnB1dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNvbmZpZy51cmxzLmRvd25sb2FkID0gaW5wdXQ7XG5cbiAgICBjb250cm9scy5zZXREb3dubG9hZFVybC5jYWxsKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcG9zdGVyIGltYWdlIGZvciBhIHZpZGVvXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCAtIHRoZSBVUkwgZm9yIHRoZSBuZXcgcG9zdGVyIGltYWdlXG4gICAqL1xuICBzZXQgcG9zdGVyKGlucHV0KSB7XG4gICAgaWYgKCF0aGlzLmlzVmlkZW8pIHtcbiAgICAgIHRoaXMuZGVidWcud2FybignUG9zdGVyIGNhbiBvbmx5IGJlIHNldCBmb3IgdmlkZW8nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB1aS5zZXRQb3N0ZXIuY2FsbCh0aGlzLCBpbnB1dCwgZmFsc2UpLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcG9zdGVyIGltYWdlXG4gICAqL1xuICBnZXQgcG9zdGVyKCkge1xuICAgIGlmICghdGhpcy5pc1ZpZGVvKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZWRpYS5nZXRBdHRyaWJ1dGUoJ3Bvc3RlcicpIHx8IHRoaXMubWVkaWEuZ2V0QXR0cmlidXRlKCdkYXRhLXBvc3RlcicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBhc3BlY3QgcmF0aW8gaW4gdXNlXG4gICAqL1xuICBnZXQgcmF0aW8oKSB7XG4gICAgaWYgKCF0aGlzLmlzVmlkZW8pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJhdGlvID0gcmVkdWNlQXNwZWN0UmF0aW8oZ2V0QXNwZWN0UmF0aW8uY2FsbCh0aGlzKSk7XG5cbiAgICByZXR1cm4gaXMuYXJyYXkocmF0aW8pID8gcmF0aW8uam9pbignOicpIDogcmF0aW87XG4gIH1cblxuICAvKipcbiAgICogU2V0IHZpZGVvIGFzcGVjdCByYXRpb1xuICAgKi9cbiAgc2V0IHJhdGlvKGlucHV0KSB7XG4gICAgaWYgKCF0aGlzLmlzVmlkZW8pIHtcbiAgICAgIHRoaXMuZGVidWcud2FybignQXNwZWN0IHJhdGlvIGNhbiBvbmx5IGJlIHNldCBmb3IgdmlkZW8nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzLnN0cmluZyhpbnB1dCkgfHwgIXZhbGlkYXRlUmF0aW8oaW5wdXQpKSB7XG4gICAgICB0aGlzLmRlYnVnLmVycm9yKGBJbnZhbGlkIGFzcGVjdCByYXRpbyBzcGVjaWZpZWQgKCR7aW5wdXR9KWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY29uZmlnLnJhdGlvID0gaW5wdXQ7XG5cbiAgICBzZXRBc3BlY3RSYXRpby5jYWxsKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYXV0b3BsYXkgc3RhdGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbnB1dCAtIFdoZXRoZXIgdG8gYXV0b3BsYXkgb3Igbm90XG4gICAqL1xuICBzZXQgYXV0b3BsYXkoaW5wdXQpIHtcbiAgICBjb25zdCB0b2dnbGUgPSBpcy5ib29sZWFuKGlucHV0KSA/IGlucHV0IDogdGhpcy5jb25maWcuYXV0b3BsYXk7XG4gICAgdGhpcy5jb25maWcuYXV0b3BsYXkgPSB0b2dnbGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGF1dG9wbGF5IHN0YXRlXG4gICAqL1xuICBnZXQgYXV0b3BsYXkoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5jb25maWcuYXV0b3BsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBjYXB0aW9uc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlucHV0IC0gV2hldGhlciB0byBlbmFibGUgY2FwdGlvbnNcbiAgICovXG4gIHRvZ2dsZUNhcHRpb25zKGlucHV0KSB7XG4gICAgY2FwdGlvbnMudG9nZ2xlLmNhbGwodGhpcywgaW5wdXQsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNhcHRpb24gdHJhY2sgYnkgaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IC0gQ2FwdGlvbiBpbmRleFxuICAgKi9cbiAgc2V0IGN1cnJlbnRUcmFjayhpbnB1dCkge1xuICAgIGNhcHRpb25zLnNldC5jYWxsKHRoaXMsIGlucHV0LCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGNhcHRpb24gdHJhY2sgaW5kZXggKC0xIGlmIGRpc2FibGVkKVxuICAgKi9cbiAgZ2V0IGN1cnJlbnRUcmFjaygpIHtcbiAgICBjb25zdCB7IHRvZ2dsZWQsIGN1cnJlbnRUcmFjayB9ID0gdGhpcy5jYXB0aW9ucztcbiAgICByZXR1cm4gdG9nZ2xlZCA/IGN1cnJlbnRUcmFjayA6IC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgd2FudGVkIGxhbmd1YWdlIGZvciBjYXB0aW9uc1xuICAgKiBTaW5jZSB0cmFja3MgY2FuIGJlIGFkZGVkIGxhdGVyIGl0IHdvbid0IHVwZGF0ZSB0aGUgYWN0dWFsIGNhcHRpb24gdHJhY2sgdW50aWwgdGhlcmUgaXMgYSBtYXRjaGluZyB0cmFja1xuICAgKiBAcGFyYW0ge1N0cmluZ30gLSBUd28gY2hhcmFjdGVyIElTTyBsYW5ndWFnZSBjb2RlIChlLmcuIEVOLCBGUiwgUFQsIGV0YylcbiAgICovXG4gIHNldCBsYW5ndWFnZShpbnB1dCkge1xuICAgIGNhcHRpb25zLnNldExhbmd1YWdlLmNhbGwodGhpcywgaW5wdXQsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2sncyBsYW5ndWFnZVxuICAgKi9cbiAgZ2V0IGxhbmd1YWdlKCkge1xuICAgIHJldHVybiAoY2FwdGlvbnMuZ2V0Q3VycmVudFRyYWNrLmNhbGwodGhpcykgfHwge30pLmxhbmd1YWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBwaWN0dXJlLWluLXBpY3R1cmUgcGxheWJhY2sgb24gV2ViS2l0L01hY09TXG4gICAqIFRPRE86IHVwZGF0ZSBwbGF5ZXIgd2l0aCBzdGF0ZSwgc3VwcG9ydCwgZW5hYmxlZFxuICAgKiBUT0RPOiBkZXRlY3Qgb3V0c2lkZSBjaGFuZ2VzXG4gICAqL1xuICBzZXQgcGlwKGlucHV0KSB7XG4gICAgLy8gQmFpbCBpZiBubyBzdXBwb3J0XG4gICAgaWYgKCFzdXBwb3J0LnBpcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlIGlmIG5vdCBwYXNzZWRcbiAgICBjb25zdCB0b2dnbGUgPSBpcy5ib29sZWFuKGlucHV0KSA/IGlucHV0IDogIXRoaXMucGlwO1xuXG4gICAgLy8gVG9nZ2xlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcbiAgICAvLyBTYWZhcmlcbiAgICBpZiAoaXMuZnVuY3Rpb24odGhpcy5tZWRpYS53ZWJraXRTZXRQcmVzZW50YXRpb25Nb2RlKSkge1xuICAgICAgdGhpcy5tZWRpYS53ZWJraXRTZXRQcmVzZW50YXRpb25Nb2RlKHRvZ2dsZSA/IHBpcC5hY3RpdmUgOiBwaXAuaW5hY3RpdmUpO1xuICAgIH1cblxuICAgIC8vIENocm9tZVxuICAgIGlmIChpcy5mdW5jdGlvbih0aGlzLm1lZGlhLnJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlKSkge1xuICAgICAgaWYgKCF0aGlzLnBpcCAmJiB0b2dnbGUpIHtcbiAgICAgICAgdGhpcy5tZWRpYS5yZXF1ZXN0UGljdHVyZUluUGljdHVyZSgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnBpcCAmJiAhdG9nZ2xlKSB7XG4gICAgICAgIGRvY3VtZW50LmV4aXRQaWN0dXJlSW5QaWN0dXJlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBwaWN0dXJlLWluLXBpY3R1cmUgc3RhdGVcbiAgICovXG4gIGdldCBwaXAoKSB7XG4gICAgaWYgKCFzdXBwb3J0LnBpcCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2FmYXJpXG4gICAgaWYgKCFpcy5lbXB0eSh0aGlzLm1lZGlhLndlYmtpdFByZXNlbnRhdGlvbk1vZGUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5tZWRpYS53ZWJraXRQcmVzZW50YXRpb25Nb2RlID09PSBwaXAuYWN0aXZlO1xuICAgIH1cblxuICAgIC8vIENocm9tZVxuICAgIHJldHVybiB0aGlzLm1lZGlhID09PSBkb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIHRoZSBhaXJwbGF5IGRpYWxvZ1xuICAgKiBUT0RPOiB1cGRhdGUgcGxheWVyIHdpdGggc3RhdGUsIHN1cHBvcnQsIGVuYWJsZWRcbiAgICovXG4gIGFpcnBsYXkoKSB7XG4gICAgLy8gU2hvdyBkaWFsb2cgaWYgc3VwcG9ydGVkXG4gICAgaWYgKHN1cHBvcnQuYWlycGxheSkge1xuICAgICAgdGhpcy5tZWRpYS53ZWJraXRTaG93UGxheWJhY2tUYXJnZXRQaWNrZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBwbGF5ZXIgY29udHJvbHNcbiAgICogQHBhcmFtIHtCb29sZWFufSBbdG9nZ2xlXSAtIFdoZXRoZXIgdG8gc2hvdyB0aGUgY29udHJvbHNcbiAgICovXG4gIHRvZ2dsZUNvbnRyb2xzKHRvZ2dsZSkge1xuICAgIC8vIERvbid0IHRvZ2dsZSBpZiBtaXNzaW5nIFVJIHN1cHBvcnQgb3IgaWYgaXQncyBhdWRpb1xuICAgIGlmICh0aGlzLnN1cHBvcnRlZC51aSAmJiAhdGhpcy5pc0F1ZGlvKSB7XG4gICAgICAvLyBHZXQgc3RhdGUgYmVmb3JlIGNoYW5nZVxuICAgICAgY29uc3QgaXNIaWRkZW4gPSBoYXNDbGFzcyh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgdGhpcy5jb25maWcuY2xhc3NOYW1lcy5oaWRlQ29udHJvbHMpO1xuICAgICAgLy8gTmVnYXRlIHRoZSBhcmd1bWVudCBpZiBub3QgdW5kZWZpbmVkIHNpbmNlIGFkZGluZyB0aGUgY2xhc3MgdG8gaGlkZXMgdGhlIGNvbnRyb2xzXG4gICAgICBjb25zdCBmb3JjZSA9IHR5cGVvZiB0b2dnbGUgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogIXRvZ2dsZTtcbiAgICAgIC8vIEFwcGx5IGFuZCBnZXQgdXBkYXRlZCBzdGF0ZVxuICAgICAgY29uc3QgaGlkaW5nID0gdG9nZ2xlQ2xhc3ModGhpcy5lbGVtZW50cy5jb250YWluZXIsIHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaGlkZUNvbnRyb2xzLCBmb3JjZSk7XG5cbiAgICAgIC8vIENsb3NlIG1lbnVcbiAgICAgIGlmIChoaWRpbmcgJiYgaXMuYXJyYXkodGhpcy5jb25maWcuY29udHJvbHMpICYmIHRoaXMuY29uZmlnLmNvbnRyb2xzLmluY2x1ZGVzKCdzZXR0aW5ncycpICYmICFpcy5lbXB0eSh0aGlzLmNvbmZpZy5zZXR0aW5ncykpIHtcbiAgICAgICAgY29udHJvbHMudG9nZ2xlTWVudS5jYWxsKHRoaXMsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVHJpZ2dlciBldmVudCBvbiBjaGFuZ2VcbiAgICAgIGlmIChoaWRpbmcgIT09IGlzSGlkZGVuKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGhpZGluZyA/ICdjb250cm9sc2hpZGRlbicgOiAnY29udHJvbHNzaG93bic7XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHRoaXMsIHRoaXMubWVkaWEsIGV2ZW50TmFtZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAhaGlkaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCAtIEV2ZW50IHR5cGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmb3Igd2hlbiBldmVudCBvY2N1cnNcbiAgICovXG4gIG9uKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIG9uLmNhbGwodGhpcywgdGhpcy5lbGVtZW50cy5jb250YWluZXIsIGV2ZW50LCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBvbmNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCAtIEV2ZW50IHR5cGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmb3Igd2hlbiBldmVudCBvY2N1cnNcbiAgICovXG4gIG9uY2UoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgb25jZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCBldmVudCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IC0gRXZlbnQgdHlwZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZvciB3aGVuIGV2ZW50IG9jY3Vyc1xuICAgKi9cbiAgb2ZmKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIG9mZih0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciwgZXZlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IGFuIGluc3RhbmNlXG4gICAqIEV2ZW50IGxpc3RlbmVycyBhcmUgcmVtb3ZlZCB3aGVuIGVsZW1lbnRzIGFyZSByZW1vdmVkXG4gICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTI1MjgwNDkvaWYtYS1kb20tZWxlbWVudC1pcy1yZW1vdmVkLWFyZS1pdHMtbGlzdGVuZXJzLWFsc28tcmVtb3ZlZC1mcm9tLW1lbW9yeVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZvciB3aGVuIGRlc3Ryb3kgaXMgY29tcGxldGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBzb2Z0IC0gV2hldGhlciBpdCdzIGEgc29mdCBkZXN0cm95IChmb3Igc291cmNlIGNoYW5nZXMgZXRjKVxuICAgKi9cbiAgZGVzdHJveShjYWxsYmFjaywgc29mdCA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLnJlYWR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZG9uZSA9ICgpID0+IHtcbiAgICAgIC8vIFJlc2V0IG92ZXJmbG93IChpbmNhc2UgZGVzdHJveWVkIHdoaWxlIGluIGZ1bGxzY3JlZW4pXG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7XG5cbiAgICAgIC8vIEdDIGZvciBlbWJlZFxuICAgICAgdGhpcy5lbWJlZCA9IG51bGw7XG5cbiAgICAgIC8vIElmIGl0J3MgYSBzb2Z0IGRlc3Ryb3ksIG1ha2UgbWluaW1hbCBjaGFuZ2VzXG4gICAgICBpZiAoc29mdCkge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5lbGVtZW50cykubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIGVsZW1lbnRzXG4gICAgICAgICAgcmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMucGxheSk7XG4gICAgICAgICAgcmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnRzLmNhcHRpb25zKTtcbiAgICAgICAgICByZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudHMuY29udHJvbHMpO1xuICAgICAgICAgIHJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50cy53cmFwcGVyKTtcblxuICAgICAgICAgIC8vIENsZWFyIGZvciBHQ1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9ucy5wbGF5ID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNhcHRpb25zID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRyb2xzID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsbGJhY2tcbiAgICAgICAgaWYgKGlzLmZ1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVuYmluZCBsaXN0ZW5lcnNcbiAgICAgICAgdW5iaW5kTGlzdGVuZXJzLmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgY29udGFpbmVyIHdpdGggdGhlIG9yaWdpbmFsIGVsZW1lbnQgcHJvdmlkZWRcbiAgICAgICAgcmVwbGFjZUVsZW1lbnQodGhpcy5lbGVtZW50cy5vcmlnaW5hbCwgdGhpcy5lbGVtZW50cy5jb250YWluZXIpO1xuXG4gICAgICAgIC8vIEV2ZW50XG4gICAgICAgIHRyaWdnZXJFdmVudC5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudHMub3JpZ2luYWwsICdkZXN0cm95ZWQnLCB0cnVlKTtcblxuICAgICAgICAvLyBDYWxsYmFja1xuICAgICAgICBpZiAoaXMuZnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLmVsZW1lbnRzLm9yaWdpbmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc2V0IHN0YXRlXG4gICAgICAgIHRoaXMucmVhZHkgPSBmYWxzZTtcblxuICAgICAgICAvLyBDbGVhciBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSBudWxsO1xuICAgICAgICAgIHRoaXMubWVkaWEgPSBudWxsO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBTdG9wIHBsYXliYWNrXG4gICAgdGhpcy5zdG9wKCk7XG5cbiAgICAvLyBDbGVhciB0aW1lb3V0c1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5sb2FkaW5nKTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuY29udHJvbHMpO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZXNpemVkKTtcblxuICAgIC8vIFByb3ZpZGVyIHNwZWNpZmljIHN0dWZmXG4gICAgaWYgKHRoaXMuaXNIVE1MNSkge1xuICAgICAgLy8gUmVzdG9yZSBuYXRpdmUgdmlkZW8gY29udHJvbHNcbiAgICAgIHVpLnRvZ2dsZU5hdGl2ZUNvbnRyb2xzLmNhbGwodGhpcywgdHJ1ZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwXG4gICAgICBkb25lKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzWW91VHViZSkge1xuICAgICAgLy8gQ2xlYXIgdGltZXJzXG4gICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJzLmJ1ZmZlcmluZyk7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJzLnBsYXlpbmcpO1xuXG4gICAgICAvLyBEZXN0cm95IFlvdVR1YmUgQVBJXG4gICAgICBpZiAodGhpcy5lbWJlZCAhPT0gbnVsbCAmJiBpcy5mdW5jdGlvbih0aGlzLmVtYmVkLmRlc3Ryb3kpKSB7XG4gICAgICAgIHRoaXMuZW1iZWQuZGVzdHJveSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbiB1cFxuICAgICAgZG9uZSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1ZpbWVvKSB7XG4gICAgICAvLyBEZXN0cm95IFZpbWVvIEFQSVxuICAgICAgLy8gdGhlbiBjbGVhbiB1cCAod2FpdCwgdG8gcHJldmVudCBwb3N0bWVzc2FnZSBlcnJvcnMpXG4gICAgICBpZiAodGhpcy5lbWJlZCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmVtYmVkLnVubG9hZCgpLnRoZW4oZG9uZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZpbWVvIGRvZXMgbm90IGFsd2F5cyByZXR1cm5cbiAgICAgIHNldFRpbWVvdXQoZG9uZSwgMjAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHN1cHBvcnQgZm9yIGEgbWltZSB0eXBlIChIVE1MNSBvbmx5KVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIE1pbWUgdHlwZVxuICAgKi9cbiAgc3VwcG9ydHModHlwZSkge1xuICAgIHJldHVybiBzdXBwb3J0Lm1pbWUuY2FsbCh0aGlzLCB0eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBmb3Igc3VwcG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFBsYXllciB0eXBlIChhdWRpby92aWRlbylcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3ZpZGVyIC0gUHJvdmlkZXIgKGh0bWw1L3lvdXR1YmUvdmltZW8pXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5saW5lIC0gV2hlcmUgcGxheWVyIGhhcyBgcGxheXNpbmxpbmVgIHN0dHJpYnV0ZVxuICAgKi9cbiAgc3RhdGljIHN1cHBvcnRlZCh0eXBlLCBwcm92aWRlciwgaW5saW5lKSB7XG4gICAgcmV0dXJuIHN1cHBvcnQuY2hlY2sodHlwZSwgcHJvdmlkZXIsIGlubGluZSk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBhbiBTVkcgc3ByaXRlIGludG8gdGhlIHBhZ2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybCAtIFVSTCBmb3IgdGhlIFNWRyBzcHJpdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtpZF0gLSBVbmlxdWUgSURcbiAgICovXG4gIHN0YXRpYyBsb2FkU3ByaXRlKHVybCwgaWQpIHtcbiAgICByZXR1cm4gbG9hZFNwcml0ZSh1cmwsIGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBtdWx0aXBsZSBpbnN0YW5jZXNcbiAgICogQHBhcmFtIHsqfSBzZWxlY3RvclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cbiAgc3RhdGljIHNldHVwKHNlbGVjdG9yLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgdGFyZ2V0cyA9IG51bGw7XG5cbiAgICBpZiAoaXMuc3RyaW5nKHNlbGVjdG9yKSkge1xuICAgICAgdGFyZ2V0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgIH0gZWxzZSBpZiAoaXMubm9kZUxpc3Qoc2VsZWN0b3IpKSB7XG4gICAgICB0YXJnZXRzID0gQXJyYXkuZnJvbShzZWxlY3Rvcik7XG4gICAgfSBlbHNlIGlmIChpcy5hcnJheShzZWxlY3RvcikpIHtcbiAgICAgIHRhcmdldHMgPSBzZWxlY3Rvci5maWx0ZXIoaXMuZWxlbWVudCk7XG4gICAgfVxuXG4gICAgaWYgKGlzLmVtcHR5KHRhcmdldHMpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0cy5tYXAodCA9PiBuZXcgUGx5cih0LCBvcHRpb25zKSk7XG4gIH1cbn1cblxuUGx5ci5kZWZhdWx0cyA9IGNsb25lRGVlcChkZWZhdWx0cyk7XG5cbmV4cG9ydCBkZWZhdWx0IFBseXI7XG4iLCIvKipcbiAqIFJldHVybnMgYSBudW1iZXIgd2hvc2UgdmFsdWUgaXMgbGltaXRlZCB0byB0aGUgZ2l2ZW4gcmFuZ2UuXG4gKlxuICogRXhhbXBsZTogbGltaXQgdGhlIG91dHB1dCBvZiB0aGlzIGNvbXB1dGF0aW9uIHRvIGJldHdlZW4gMCBhbmQgMjU1XG4gKiAoeCAqIDI1NSkuY2xhbXAoMCwgMjU1KVxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnB1dFxuICogQHBhcmFtIHtOdW1iZXJ9IG1pbiBUaGUgbG93ZXIgYm91bmRhcnkgb2YgdGhlIG91dHB1dCByYW5nZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1heCBUaGUgdXBwZXIgYm91bmRhcnkgb2YgdGhlIG91dHB1dCByYW5nZVxuICogQHJldHVybnMgQSBudW1iZXIgaW4gdGhlIHJhbmdlIFttaW4sIG1heF1cbiAqIEB0eXBlIE51bWJlclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAoaW5wdXQgPSAwLCBtaW4gPSAwLCBtYXggPSAyNTUpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGlucHV0LCBtaW4pLCBtYXgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IGNsYW1wIH07XG4iLCIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT1lfHxzZWxmKS5NaWNyb01vZGFsPXQoKX0odGhpcywoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBuPXRbb107bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1mdW5jdGlvbiB0KGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBvKGUpfShlKXx8ZnVuY3Rpb24oZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX0oZSl8fGZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBvKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO1wiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpO2lmKFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bilyZXR1cm4gQXJyYXkuZnJvbShuKTtpZihcIkFyZ3VtZW50c1wiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpcmV0dXJuIG8oZSx0KX0oZSl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gbyhlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgbz0wLG49bmV3IEFycmF5KHQpO288dDtvKyspbltvXT1lW29dO3JldHVybiBufXZhciBuLGksYSxyLHMsbD0obj1bXCJhW2hyZWZdXCIsXCJhcmVhW2hyZWZdXCIsJ2lucHV0Om5vdChbZGlzYWJsZWRdKTpub3QoW3R5cGU9XCJoaWRkZW5cIl0pOm5vdChbYXJpYS1oaWRkZW5dKScsXCJzZWxlY3Q6bm90KFtkaXNhYmxlZF0pOm5vdChbYXJpYS1oaWRkZW5dKVwiLFwidGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pOm5vdChbYXJpYS1oaWRkZW5dKVwiLFwiYnV0dG9uOm5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSlcIixcImlmcmFtZVwiLFwib2JqZWN0XCIsXCJlbWJlZFwiLFwiW2NvbnRlbnRlZGl0YWJsZV1cIiwnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4Xj1cIi1cIl0pJ10saT1mdW5jdGlvbigpe2Z1bmN0aW9uIG8oZSl7dmFyIG49ZS50YXJnZXRNb2RhbCxpPWUudHJpZ2dlcnMsYT12b2lkIDA9PT1pP1tdOmkscj1lLm9uU2hvdyxzPXZvaWQgMD09PXI/ZnVuY3Rpb24oKXt9OnIsbD1lLm9uQ2xvc2UsYz12b2lkIDA9PT1sP2Z1bmN0aW9uKCl7fTpsLGQ9ZS5vcGVuVHJpZ2dlcix1PXZvaWQgMD09PWQ/XCJkYXRhLW1pY3JvbW9kYWwtdHJpZ2dlclwiOmQsZj1lLmNsb3NlVHJpZ2dlcixoPXZvaWQgMD09PWY/XCJkYXRhLW1pY3JvbW9kYWwtY2xvc2VcIjpmLHY9ZS5vcGVuQ2xhc3MsbT12b2lkIDA9PT12P1wiaXMtb3BlblwiOnYsZz1lLmRpc2FibGVTY3JvbGwsYj12b2lkIDAhPT1nJiZnLHk9ZS5kaXNhYmxlRm9jdXMscD12b2lkIDAhPT15JiZ5LHc9ZS5hd2FpdENsb3NlQW5pbWF0aW9uLEU9dm9pZCAwIT09dyYmdyxrPWUuYXdhaXRPcGVuQW5pbWF0aW9uLE09dm9pZCAwIT09ayYmayxDPWUuZGVidWdNb2RlLEE9dm9pZCAwIT09QyYmQzshZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLG8pLHRoaXMubW9kYWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobiksdGhpcy5jb25maWc9e2RlYnVnTW9kZTpBLGRpc2FibGVTY3JvbGw6YixvcGVuVHJpZ2dlcjp1LGNsb3NlVHJpZ2dlcjpoLG9wZW5DbGFzczptLG9uU2hvdzpzLG9uQ2xvc2U6Yyxhd2FpdENsb3NlQW5pbWF0aW9uOkUsYXdhaXRPcGVuQW5pbWF0aW9uOk0sZGlzYWJsZUZvY3VzOnB9LGEubGVuZ3RoPjAmJnRoaXMucmVnaXN0ZXJUcmlnZ2Vycy5hcHBseSh0aGlzLHQoYSkpLHRoaXMub25DbGljaz10aGlzLm9uQ2xpY2suYmluZCh0aGlzKSx0aGlzLm9uS2V5ZG93bj10aGlzLm9uS2V5ZG93bi5iaW5kKHRoaXMpfXZhciBpLGEscjtyZXR1cm4gaT1vLChhPVt7a2V5OlwicmVnaXN0ZXJUcmlnZ2Vyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoLG89bmV3IEFycmF5KHQpLG49MDtuPHQ7bisrKW9bbl09YXJndW1lbnRzW25dO28uZmlsdGVyKEJvb2xlYW4pLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLnNob3dNb2RhbCh0KX0pKX0pKX19LHtrZXk6XCJzaG93TW9kYWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDtpZih0aGlzLmFjdGl2ZUVsZW1lbnQ9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCx0aGlzLm1vZGFsLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJmYWxzZVwiKSx0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcub3BlbkNsYXNzKSx0aGlzLnNjcm9sbEJlaGF2aW91cihcImRpc2FibGVcIiksdGhpcy5hZGRFdmVudExpc3RlbmVycygpLHRoaXMuY29uZmlnLmF3YWl0T3BlbkFuaW1hdGlvbil7dmFyIG89ZnVuY3Rpb24gdCgpe2UubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLHQsITEpLGUuc2V0Rm9jdXNUb0ZpcnN0Tm9kZSgpfTt0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIixvLCExKX1lbHNlIHRoaXMuc2V0Rm9jdXNUb0ZpcnN0Tm9kZSgpO3RoaXMuY29uZmlnLm9uU2hvdyh0aGlzLm1vZGFsLHRoaXMuYWN0aXZlRWxlbWVudCx0KX19LHtrZXk6XCJjbG9zZU1vZGFsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbCx0PXRoaXMubW9kYWw7aWYodGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCksdGhpcy5zY3JvbGxCZWhhdmlvdXIoXCJlbmFibGVcIiksdGhpcy5hY3RpdmVFbGVtZW50JiZ0aGlzLmFjdGl2ZUVsZW1lbnQuZm9jdXMmJnRoaXMuYWN0aXZlRWxlbWVudC5mb2N1cygpLHRoaXMuY29uZmlnLm9uQ2xvc2UodGhpcy5tb2RhbCx0aGlzLmFjdGl2ZUVsZW1lbnQsZSksdGhpcy5jb25maWcuYXdhaXRDbG9zZUFuaW1hdGlvbil7dmFyIG89dGhpcy5jb25maWcub3BlbkNsYXNzO3RoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLChmdW5jdGlvbiBlKCl7dC5jbGFzc0xpc3QucmVtb3ZlKG8pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLGUsITEpfSksITEpfWVsc2UgdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY29uZmlnLm9wZW5DbGFzcyl9fSx7a2V5OlwiY2xvc2VNb2RhbEJ5SWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm1vZGFsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpLHRoaXMubW9kYWwmJnRoaXMuY2xvc2VNb2RhbCgpfX0se2tleTpcInNjcm9sbEJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuY29uZmlnLmRpc2FibGVTY3JvbGwpe3ZhciB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO3N3aXRjaChlKXtjYXNlXCJlbmFibGVcIjpPYmplY3QuYXNzaWduKHQuc3R5bGUse292ZXJmbG93OlwiXCJ9KTticmVhaztjYXNlXCJkaXNhYmxlXCI6T2JqZWN0LmFzc2lnbih0LnN0eWxlLHtvdmVyZmxvdzpcImhpZGRlblwifSl9fX19LHtrZXk6XCJhZGRFdmVudExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25DbGljayksdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2spLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5vbktleWRvd24pfX0se2tleTpcInJlbW92ZUV2ZW50TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vbkNsaWNrKSx0aGlzLm1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljayksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLm9uS2V5ZG93bil9fSx7a2V5Olwib25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2UudGFyZ2V0Lmhhc0F0dHJpYnV0ZSh0aGlzLmNvbmZpZy5jbG9zZVRyaWdnZXIpJiZ0aGlzLmNsb3NlTW9kYWwoZSl9fSx7a2V5Olwib25LZXlkb3duXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Mjc9PT1lLmtleUNvZGUmJnRoaXMuY2xvc2VNb2RhbChlKSw5PT09ZS5rZXlDb2RlJiZ0aGlzLnJldGFpbkZvY3VzKGUpfX0se2tleTpcImdldEZvY3VzYWJsZU5vZGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwobik7cmV0dXJuIEFycmF5LmFwcGx5KHZvaWQgMCx0KGUpKX19LHtrZXk6XCJzZXRGb2N1c1RvRmlyc3ROb2RlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF0aGlzLmNvbmZpZy5kaXNhYmxlRm9jdXMpe3ZhciB0PXRoaXMuZ2V0Rm9jdXNhYmxlTm9kZXMoKTtpZigwIT09dC5sZW5ndGgpe3ZhciBvPXQuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hdC5oYXNBdHRyaWJ1dGUoZS5jb25maWcuY2xvc2VUcmlnZ2VyKX0pKTtvLmxlbmd0aD4wJiZvWzBdLmZvY3VzKCksMD09PW8ubGVuZ3RoJiZ0WzBdLmZvY3VzKCl9fX19LHtrZXk6XCJyZXRhaW5Gb2N1c1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0Rm9jdXNhYmxlTm9kZXMoKTtpZigwIT09dC5sZW5ndGgpaWYodD10LmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lLm9mZnNldFBhcmVudH0pKSx0aGlzLm1vZGFsLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKXt2YXIgbz10LmluZGV4T2YoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7ZS5zaGlmdEtleSYmMD09PW8mJih0W3QubGVuZ3RoLTFdLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpKSwhZS5zaGlmdEtleSYmdC5sZW5ndGg+MCYmbz09PXQubGVuZ3RoLTEmJih0WzBdLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpKX1lbHNlIHRbMF0uZm9jdXMoKX19XSkmJmUoaS5wcm90b3R5cGUsYSksciYmZShpLHIpLG99KCksYT1udWxsLHI9ZnVuY3Rpb24oZSl7aWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpKXJldHVybiBjb25zb2xlLndhcm4oXCJNaWNyb01vZGFsOiDinZdTZWVtcyBsaWtlIHlvdSBoYXZlIG1pc3NlZCAlYydcIi5jb25jYXQoZSxcIidcIiksXCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO2NvbG9yOiAjNTA1OTZjO2ZvbnQtd2VpZ2h0OiBib2xkO1wiLFwiSUQgc29tZXdoZXJlIGluIHlvdXIgY29kZS4gUmVmZXIgZXhhbXBsZSBiZWxvdyB0byByZXNvbHZlIGl0LlwiKSxjb25zb2xlLndhcm4oXCIlY0V4YW1wbGU6XCIsXCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO2NvbG9yOiAjNTA1OTZjO2ZvbnQtd2VpZ2h0OiBib2xkO1wiLCc8ZGl2IGNsYXNzPVwibW9kYWxcIiBpZD1cIicuY29uY2F0KGUsJ1wiPjwvZGl2PicpKSwhMX0scz1mdW5jdGlvbihlLHQpe2lmKGZ1bmN0aW9uKGUpe2UubGVuZ3RoPD0wJiYoY29uc29sZS53YXJuKFwiTWljcm9Nb2RhbDog4p2XUGxlYXNlIHNwZWNpZnkgYXQgbGVhc3Qgb25lICVjJ21pY3JvbW9kYWwtdHJpZ2dlcidcIixcImJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7Y29sb3I6ICM1MDU5NmM7Zm9udC13ZWlnaHQ6IGJvbGQ7XCIsXCJkYXRhIGF0dHJpYnV0ZS5cIiksY29uc29sZS53YXJuKFwiJWNFeGFtcGxlOlwiLFwiYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTtjb2xvcjogIzUwNTk2Yztmb250LXdlaWdodDogYm9sZDtcIiwnPGEgaHJlZj1cIiNcIiBkYXRhLW1pY3JvbW9kYWwtdHJpZ2dlcj1cIm15LW1vZGFsXCI+PC9hPicpKX0oZSksIXQpcmV0dXJuITA7Zm9yKHZhciBvIGluIHQpcihvKTtyZXR1cm4hMH0se2luaXQ6ZnVuY3Rpb24oZSl7dmFyIG89T2JqZWN0LmFzc2lnbih7fSx7b3BlblRyaWdnZXI6XCJkYXRhLW1pY3JvbW9kYWwtdHJpZ2dlclwifSxlKSxuPXQoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltcIi5jb25jYXQoby5vcGVuVHJpZ2dlcixcIl1cIikpKSxyPWZ1bmN0aW9uKGUsdCl7dmFyIG89W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5hdHRyaWJ1dGVzW3RdLnZhbHVlO3ZvaWQgMD09PW9bbl0mJihvW25dPVtdKSxvW25dLnB1c2goZSl9KSksb30obixvLm9wZW5UcmlnZ2VyKTtpZighMCE9PW8uZGVidWdNb2RlfHwhMSE9PXMobixyKSlmb3IodmFyIGwgaW4gcil7dmFyIGM9cltsXTtvLnRhcmdldE1vZGFsPWwsby50cmlnZ2Vycz10KGMpLGE9bmV3IGkobyl9fSxzaG93OmZ1bmN0aW9uKGUsdCl7dmFyIG89dHx8e307by50YXJnZXRNb2RhbD1lLCEwPT09by5kZWJ1Z01vZGUmJiExPT09cihlKXx8KGEmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSwoYT1uZXcgaShvKSkuc2hvd01vZGFsKCkpfSxjbG9zZTpmdW5jdGlvbihlKXtlP2EuY2xvc2VNb2RhbEJ5SWQoZSk6YS5jbG9zZU1vZGFsKCl9fSk7cmV0dXJuIHdpbmRvdy5NaWNyb01vZGFsPWwsbH0pKTtcbiJdfQ==
